{"hands_on_practices": [{"introduction": "Control-flow graphs for real programs are rich with loops. Calculating dominance frontiers in the presence of back edges is a critical skill, as these are the places where control flow re-converges. This exercise provides a concrete example with nested loops, allowing you to apply the definition of the dominance frontier to see how it captures these essential join points in cyclic graphs. [@problem_id:3638564]", "problem": "Consider the following reducible Control Flow Graph (CFG) with two nested loops. Nodes are labeled by integers, with a unique entry at node $0$ and a unique exit at node $10$. The directed edges are:\n$(0,1)$, $(1,2)$, $(2,3)$, $(2,9)$, $(3,4)$, $(4,5)$, $(4,7)$, $(5,6)$, $(6,4)$, $(7,8)$, $(8,2)$, $(9,10)$. The outer loop has header node $2$ with back edge $(8,2)$; the inner loop has header node $4$ with back edge $(6,4)$. The inner loop body contains node $5$.\n\nUsing only first principles from the theory of dominators in Control Flow Graphs, determine the dominance frontiers (DF) of the inner loop header node $4$ and of the inner loop body node $5$. Then compute the value\n$$S \\;=\\; \\sum_{n \\in \\mathrm{DF}(4)} n \\;+\\; 10 \\times \\sum_{m \\in \\mathrm{DF}(5)} m.$$\n\nExpress the final result as an exact integer (no rounding is needed). Here, DF denotes Dominance Frontier (DF) as standardly defined in compiler theory. You may assume that dominance is defined with respect to the unique entry node $0$ and that a node dominates itself.", "solution": "The user wants me to solve the problem by following these steps:\n1.  **Validate the problem statement:** I need to check if the Control Flow Graph (CFG) is well-defined, if the concepts are standard, and if the question is objective and solvable.\n2.  **Extract Givens:** I will list all the nodes and edges of the CFG as provided in the problem.\n3.  **Perform Validation:**\n    *   **Scientifically Grounded:** The concepts of CFGs, dominators, and dominance frontiers are foundational in compiler theory. The problem is well within this established framework. It does not violate any scientific or mathematical principles.\n    *   **Well-Posed:** The CFG is explicitly defined by its nodes and edges. The task is to compute the Dominance Frontiers (DF) for specific nodes and then a weighted sum of the elements of these sets. This structure ensures that a unique and meaningful solution exists.\n    *   **Objective:** The problem is described using precise, standard terminology from compiler theory. There is no ambiguity, subjectivity, or opinion-based language.\n    *   **Completeness and Consistency:** The problem provides all necessary information: the set of nodes, the set of edges, the unique entry node, and the unique exit node. The description of the loops is consistent with the graph structure derived from the edges. The problem is self-contained and free of contradictions.\n\nThe verdict of the validation is that the problem is **valid**. I will now proceed to solve it.\n\n### Step 1: Definition of the Control Flow Graph (CFG)\n\nThe problem defines a CFG with nodes $V = \\{0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10\\}$. The entry node is $0$. The set of directed edges $E$ is given as:\n$E = \\{(0,1), (1,2), (2,3), (2,9), (3,4), (4,5), (4,7), (5,6), (6,4), (7,8), (8,2), (9,10)\\}$.\n\nTo find the dominance frontiers, we must first determine the dominator relationships for all nodes in the graph.\n\n### Step 2: Computation of Dominators\n\nA node $d$ dominates a node $n$, written as $d \\text{ dom } n$, if every path from the entry node ($0$) to $n$ must pass through $d$. By definition, every node dominates itself. The set of all dominators of $n$ is denoted $\\mathrm{Dom}(n)$. The dominator sets can be found by solving the following system of equations using a fixed-point iteration method:\n$$ \\mathrm{Dom}(n) = \\{n\\} \\cup \\bigcap_{p \\in \\mathrm{preds}(n)} \\mathrm{Dom}(p) $$\nwhere $\\mathrm{preds}(n)$ is the set of immediate predecessors of $n$. For the entry node $0$, $\\mathrm{Dom}(0)=\\{0\\}$.\n\nThe predecessors for each node are:\n$\\mathrm{preds}(0) = \\emptyset$\n$\\mathrm{preds}(1) = \\{0\\}$\n$\\mathrm{preds}(2) = \\{1, 8\\}$\n$\\mathrm{preds}(3) = \\{2\\}$\n$\\mathrm{preds}(4) = \\{3, 6\\}$\n$\\mathrm{preds}(5) = \\{4\\}$\n$\\mathrm{preds}(6) = \\{5\\}$\n$\\mathrm{preds}(7) = \\{4\\}$\n$\\mathrm{preds}(8) = \\{7\\}$\n$\\mathrm{preds}(9) = \\{2\\}$\n$\\mathrm{preds}(10) = \\{9\\}$\n\nWe initialize $\\mathrm{Dom}(0) = \\{0\\}$ and $\\mathrm{Dom}(n) = V$ for all $n \\ne 0$. The iterative computation converges to the following sets:\n- $\\mathrm{Dom}(0) = \\{0\\}$\n- $\\mathrm{Dom}(1) = \\{1\\} \\cup \\mathrm{Dom}(0) = \\{0, 1\\}$\n- $\\mathrm{Dom}(2) = \\{2\\} \\cup (\\mathrm{Dom}(1) \\cap \\mathrm{Dom}(8)) = \\{0, 1, 2\\}$\n- $\\mathrm{Dom}(3) = \\{3\\} \\cup \\mathrm{Dom}(2) = \\{0, 1, 2, 3\\}$\n- $\\mathrm{Dom}(4) = \\{4\\} \\cup (\\mathrm{Dom}(3) \\cap \\mathrm{Dom}(6)) = \\{0, 1, 2, 3, 4\\}$\n- $\\mathrm{Dom}(5) = \\{5\\} \\cup \\mathrm{Dom}(4) = \\{0, 1, 2, 3, 4, 5\\}$\n- $\\mathrm{Dom}(6) = \\{6\\} \\cup \\mathrm{Dom}(5) = \\{0, 1, 2, 3, 4, 5, 6\\}$\n- $\\mathrm{Dom}(7) = \\{7\\} \\cup \\mathrm{Dom}(4) = \\{0, 1, 2, 3, 4, 7\\}$\n- $\\mathrm{Dom}(8) = \\{8\\} \\cup \\mathrm{Dom}(7) = \\{0, 1, 2, 3, 4, 7, 8\\}$\n- $\\mathrm{Dom}(9) = \\{9\\} \\cup \\mathrm{Dom}(2) = \\{0, 1, 2, 9\\}$\n- $\\mathrm{Dom}(10) = \\{10\\} \\cup \\mathrm{Dom}(9) = \\{0, 1, 2, 9, 10\\}$\n\nFrom these sets, we can determine the immediate dominator, $\\mathrm{idom}(n)$, for each node $n \\ne 0$. The immediate dominator is the unique dominator of $n$ that is dominated by all other dominators of $n$.\n- $\\mathrm{idom}(1) = 0$\n- $\\mathrm{idom}(2) = 1$\n- $\\mathrm{idom}(3) = 2$\n- $\\mathrm{idom}(4) = 3$\n- $\\mathrm{idom}(5) = 4$\n- $\\mathrm{idom}(6) = 5$\n- $\\mathrm{idom}(7) = 4$\n- $\\mathrm{idom}(8) = 7$\n- $\\mathrm{idom}(9) = 2$\n- $\\mathrm{idom}(10) = 9$\n\n### Step 3: Computation of Dominance Frontiers\n\nThe dominance frontier of a node $n$, denoted $\\mathrm{DF}(n)$, is the set of all nodes $y$ such that $n$ dominates an immediate predecessor of $y$, but $n$ does not strictly dominate $y$. A node $n$ strictly dominates $y$ (written $n \\text{ sdom } y$) if $n \\text{ dom } y$ and $n \\neq y$.\nThe formal definition is:\n$$ \\mathrm{DF}(n) = \\{ y \\mid (\\exists p \\in \\mathrm{preds}(y)) (n \\text{ dom } p) \\land \\neg(n \\text{ sdom } y) \\} $$\n\nWe apply this definition to compute $\\mathrm{DF}(4)$ and $\\mathrm{DF}(5)$.\n\n**Computation of $\\mathrm{DF}(4)$:**\nWe need to find all nodes $y$ such that for some predecessor $p$ of $y$, $4 \\text{ dom } p$ and $4$ does not strictly dominate $y$.\nThe set of nodes dominated by $4$ is $\\mathrm{Dom}(4) \\setminus \\{0,1,2,3\\} = \\{4, 5, 6, 7, 8\\}$. We examine the successors of these nodes.\n- Successors of $4$: $\\{5, 7\\}$.\n  - For $y=5$, $p=4$. $4 \\text{ dom } 4$ is true. But $4 \\text{ sdom } 5$ is true, so $5 \\notin \\mathrm{DF}(4)$.\n  - For $y=7$, $p=4$. $4 \\text{ dom } 4$ is true. But $4 \\text{ sdom } 7$ is true, so $7 \\notin \\mathrm{DF}(4)$.\n- Successors of $5$: $\\{6\\}$.\n  - For $y=6$, $p=5$. $4 \\text{ dom } 5$ is true. But $4 \\text{ sdom } 6$ is true, so $6 \\notin \\mathrm{DF}(4)$.\n- Successors of $6$: $\\{4\\}$.\n  - For $y=4$, $p=6$. $4 \\text{ dom } 6$ is true. Does $4$ strictly dominate $4$? No. Thus, $\\neg(4 \\text{ sdom } 4)$ is true. Therefore, $4 \\in \\mathrm{DF}(4)$.\n- Successors of $7$: $\\{8\\}$.\n  - For $y=8$, $p=7$. $4 \\text{ dom } 7$ is true. But $4 \\text{ sdom } 8$ is true, so $8 \\notin \\mathrm{DF}(4)$.\n- Successors of $8$: $\\{2\\}$.\n  - For $y=2$, $p=8$. $4 \\text{ dom } 8$ is true. Does $4$ strictly dominate $2$? No, in fact $2$ dominates $4$. Thus, $\\neg(4 \\text{ sdom } 2)$ is true. Therefore, $2 \\in \\mathrm{DF}(4)$.\n\nCombining these results, the dominance frontier of node $4$ is $\\mathrm{DF}(4) = \\{2, 4\\}$.\n\n**Computation of $\\mathrm{DF}(5)$:**\nWe apply the same procedure for node $5$.\nThe set of nodes dominated by $5$ is $\\mathrm{Dom}(5) \\setminus \\{0,1,2,3,4\\} = \\{5, 6\\}$. We examine the successors of these nodes.\n- Successors of $5$: $\\{6\\}$.\n  - For $y=6$, $p=5$. $5 \\text{ dom } 5$ is true. But $5 \\text{ sdom } 6$ is true, so $6 \\notin \\mathrm{DF}(5)$.\n- Successors of $6$: $\\{4\\}$.\n  - For $y=4$, $p=6$. $5 \\text{ dom } 6$ is true. Does $5$ strictly dominate $4$? No, $4$ dominates $5$. Thus, $\\neg(5 \\text{ sdom } 4)$ is true. Therefore, $4 \\in \\mathrm{DF}(5)$.\n\nThe dominance frontier of node $5$ is $\\mathrm{DF}(5) = \\{4\\}$.\n\n### Step 4: Final Calculation\n\nThe problem asks for the value of $S$ defined as:\n$$ S = \\sum_{n \\in \\mathrm{DF}(4)} n \\;+\\; 10 \\times \\sum_{m \\in \\mathrm{DF}(5)} m $$\nSubstituting the computed dominance frontiers:\n$$ S = \\sum_{n \\in \\{2, 4\\}} n \\;+\\; 10 \\times \\sum_{m \\in \\{4\\}} m $$\n$$ S = (2 + 4) + 10 \\times (4) $$\n$$ S = 6 + 40 $$\n$$ S = 46 $$\nThe final result is an exact integer.", "answer": "$$\n\\boxed{46}\n$$", "id": "3638564"}, {"introduction": "The primary motivation for computing dominance frontiers is their central role in constructing Static Single Assignment (SSA) form. The Cytron et al. algorithm uses the *iterated dominance frontier* ($DF^{+}$) of a variable's definition sites to determine exactly where to place $\\phi$-functions. This practice problem guides you through this process, connecting the abstract concept of dominance frontiers to the concrete task of generating efficient, optimized code representations. [@problem_id:3638894]", "problem": "Consider a control-flow graph (CFG) with nodes $E$, $B$, $L$, $R$, $J$, $B_{2}$, $L_{2}$, $R_{2}$, $J_{2}$, and $X$. The directed edges are:\n$E \\rightarrow B$, $B \\rightarrow L$, $B \\rightarrow R$, $L \\rightarrow J$, $R \\rightarrow J$, $J \\rightarrow B_{2}$, $B_{2} \\rightarrow L_{2}$, $B_{2} \\rightarrow R_{2}$, $L_{2} \\rightarrow J_{2}$, $R_{2} \\rightarrow J_{2}$, and $J_{2} \\rightarrow X$. This CFG forms two diamond-shaped regions in series.\n\nUse the following foundational definitions from compiler theory:\n- A node $d$ dominates a node $n$ if every path from the entry node to $n$ includes $d$. If $d \\neq n$, then $d$ strictly dominates $n$.\n- The dominance frontier $DF(n)$ of a node $n$ is the set of all nodes $y$ such that there exists a predecessor $p$ of $y$ where $n$ dominates $p$, but $n$ does not strictly dominate $y$.\n- Static Single Assignment (SSA) form is a representation in which each variable is assigned exactly once, and $\\phi$-functions are used at join points to merge values coming from multiple predecessors. Use the Cytron et al. construction algorithm for SSA with no liveness-based pruning: place $\\phi$-functions at nodes in the iterated dominance frontier of the set of definition sites for each variable until a fixed point is reached.\n\nTasks:\n1. Compute the dominance frontier $DF(n)$ for each node $n \\in \\{E, B, L, R, J, B_{2}, L_{2}, R_{2}, J_{2}, X\\}$.\n2. Suppose $3$ scalar variables $x$, $y$, and $w$ are defined as follows:\n   - $x$ is defined in $L$ and $R$.\n   - $y$ is defined in $L_{2}$ and $R_{2}$.\n   - $w$ is defined in $R$ and $L_{2}$.\n   Using the SSA construction described above, determine where $\\phi$-functions are placed for each variable by computing the iterated dominance frontier of its definition sites.\n3. What is the total number of $\\phi$-functions inserted across all three variables? Provide your final answer as a single integer. No rounding is required.", "solution": "The problem asks for an analysis of a given control-flow graph (CFG) to determine the placement of $\\phi$-functions according to the Static Single Assignment (SSA) construction algorithm by Cytron et al. This involves three main steps: first, determining the dominance frontiers for all nodes in the graph; second, using this information to find the iterated dominance frontiers for the definition sites of three specific variables; and third, counting the total number of $\\phi$-functions required.\n\nThe CFG has nodes $N = \\{E, B, L, R, J, B_{2}, L_{2}, R_{2}, J_{2}, X\\}$ and directed edges $A = \\{ (E,B), (B,L), (B,R), (L,J), (R,J), (J,B_{2}), (B_{2},L_{2}), (B_{2},R_{2}), (L_{2},J_{2}), (R_{2},J_{2}), (J_{2},X) \\}$. The node $E$ is the unique entry node of the graph, as it has an in-degree of $0$.\n\nFirst, we must determine the dominator relationships. A node $d$ dominates a node $n$, written $d \\text{ dom } n$, if every path from the entry node $E$ to $n$ contains $d$. A node $d$ strictly dominates $n$, written $d \\text{ sdom } n$, if $d \\text{ dom } n$ and $d \\neq n$. The immediate dominator of a node $n$, denoted $\\text{idom}(n)$, is the strict dominator of $n$ that is dominated by all other strict dominators of $n$.\n\nBy analyzing all paths from $E$, we establish the following immediate dominator relationships:\n- $\\text{idom}(B) = E$\n- $\\text{idom}(L) = B$\n- $\\text{idom}(R) = B$\n- $\\text{idom}(J) = B$. This is because any path to $J$ must pass through $B$, and the paths $E \\rightarrow B \\rightarrow L \\rightarrow J$ and $E \\rightarrow B \\rightarrow R \\rightarrow J$ show that neither $L$ nor $R$ dominates $J$.\n- $\\text{idom}(B_{2}) = J$\n- $\\text{idom}(L_{2}) = B_{2}$\n- $\\text{idom}(R_{2}) = B_{2}$\n- $\\text{idom}(J_{2}) = B_{2}$. Similar to $J$, any path to $J_{2}$ must pass through $B_{2}$, but not necessarily through $L_{2}$ or $R_{2}$.\n- $\\text{idom}(X) = J_{2}$\n\nThe dominator tree, which represents the immediate dominance relationships, can be constructed from these. $E$ is the root. The children of any node $d$ are all nodes $n$ for which $\\text{idom}(n) = d$.\n\n**Task 1: Compute the Dominance Frontier $DF(n)$ for each node**\n\nThe dominance frontier $DF(n)$ of a node $n$ is the set of all nodes $y$ such that $n$ dominates a predecessor $p$ of $y$, but $n$ does not strictly dominate $y$. We apply this definition to each node $n \\in N$.\n\n- $DF(L)$: The only node dominated solely by $L$ (and its dominators) is $L$ itself. The only outgoing edge from $L$ is $L \\rightarrow J$. Here, the predecessor $p$ is $L$ and the successor $y$ is $J$. We check the condition: $L \\text{ dom } L$, but $L$ does not strictly dominate $J$ (since $\\text{idom}(J) = B$). Thus, $J \\in DF(L)$. So, $DF(L) = \\{J\\}$.\n- $DF(R)$: By symmetric reasoning to $L$, the edge $R \\rightarrow J$ results in $J \\in DF(R)$. So, $DF(R) = \\{J\\}$.\n- $DF(L_{2})$: The edge is $L_{2} \\rightarrow J_{2}$. The predecessor is $p=L_{2}$ and the successor is $y=J_{2}$. We check: $L_{2} \\text{ dom } L_{2}$, but $L_{2}$ does not strictly dominate $J_{2}$ (since $\\text{idom}(J_{2}) = B_{2}$). Thus, $J_{2} \\in DF(L_{2})$. So, $DF(L_{2}) = \\{J_{2}\\}$.\n- $DF(R_{2})$: By symmetric reasoning to $L_{2}$, the edge $R_{2} \\rightarrow J_{2}$ results in $J_{2} \\in DF(R_{2})$. So, $DF(R_{2}) = \\{J_{2}\\}$.\n- For all other nodes $n \\in \\{E, B, J, B_{2}, J_{2}, X\\}$, any edge $(p, y)$ where $n \\text{ dom } p$ also has the property that $n \\text{ sdom } y$. For example, consider $n=J$. $J$ dominates $J$, $B_2$, $L_2$, $R_2$, $J_2$, and $X$. Any edge originating from one of these nodes (e.g., $J \\rightarrow B_2$ or $L_2 \\rightarrow J_2$) leads to a node that is also strictly dominated by $J$. Therefore, their dominance frontiers are empty.\n- $DF(E) = \\emptyset$\n- $DF(B) = \\emptyset$\n- $DF(J) = \\emptyset$\n- $DF(B_{2}) = \\emptyset$\n- $DF(J_{2}) = \\emptyset$\n- $DF(X) = \\emptyset$ (no outgoing edges)\n\nTo summarize Task 1, the non-empty dominance frontiers are:\n$DF(L) = \\{J\\}$\n$DF(R) = \\{J\\}$\n$DF(L_{2}) = \\{J_{2}\\}$\n$DF(R_{2}) = \\{J_{2}\\}$\n\n**Task 2: Determine $\\phi$-function placement for variables $x$, $y$, and $w$**\n\nThe Cytron et al. algorithm states that a $\\phi$-function for a variable is placed at every node in the iterated dominance frontier, $DF^{+}(S)$, of the set $S$ of nodes containing definitions of that variable. The iterated dominance frontier is computed by repeatedly calculating the dominance frontier of the union of the original sites and the sites found in the previous iteration, until a fixed point is reached.\nLet $\\Phi$ be the set of nodes where $\\phi$-functions are placed.\n\n- **Variable $x$**: defined in $S_x = \\{L, R\\}$.\nWe compute $DF^+(S_x)$.\nThe initial set of nodes for which we need frontiers is $S_x$.\n$DF(S_x) = DF(L) \\cup DF(R) = \\{J\\} \\cup \\{J\\} = \\{J\\}$.\nSo, we must place a $\\phi$-function for $x$ at node $J$, so $\\Phi_x = \\{J\\}$.\nNow we iterate: we compute the DF for the new set of \"definitions\" $S_x \\cup \\Phi_x = \\{L, R, J\\}$.\n$DF(L) \\cup DF(R) \\cup DF(J) = \\{J\\} \\cup \\{J\\} \\cup \\emptyset = \\{J\\}$.\nThe set of $\\phi$-locations has not changed. The fixed point is reached.\nThe set of nodes for $\\phi$-functions for $x$ is $\\Phi_x = \\{J\\}$. This requires $1$ $\\phi$-function.\n\n- **Variable $y$**: defined in $S_y = \\{L_{2}, R_{2}\\}$.\nWe compute $DF^+(S_y)$.\n$DF(S_y) = DF(L_{2}) \\cup DF(R_{2}) = \\{J_{2}\\} \\cup \\{J_{2}\\} = \\{J_{2}\\}$.\nSo, we must place a $\\phi$-function for $y$ at node $J_{2}$, so $\\Phi_y = \\{J_{2}\\}$.\nNow we iterate: we compute the DF for $\\{L_{2}, R_{2}, J_{2}\\}$.\n$DF(L_{2}) \\cup DF(R_{2}) \\cup DF(J_{2}) = \\{J_{2}\\} \\cup \\{J_{2}\\} \\cup \\emptyset = \\{J_{2}\\}$.\nThe fixed point is reached.\nThe set of nodes for $\\phi$-functions for $y$ is $\\Phi_y = \\{J_{2}\\}$. This requires $1$ $\\phi$-function.\n\n- **Variable $w$**: defined in $S_w = \\{R, L_{2}\\}$.\nWe compute $DF^+(S_w)$.\n$DF(S_w) = DF(R) \\cup DF(L_{2}) = \\{J\\} \\cup \\{J_{2}\\} = \\{J, J_{2}\\}$.\nSo, we must place $\\phi$-functions for $w$ at nodes $J$ and $J_{2}$, so $\\Phi_w = \\{J, J_{2}\\}$.\nNow we iterate: we compute the DF for $\\{R, L_{2}, J, J_{2}\\}$.\n$DF(R) \\cup DF(L_{2}) \\cup DF(J) \\cup DF(J_{2}) = \\{J\\} \\cup \\{J_{2}\\} \\cup \\emptyset \\cup \\emptyset = \\{J, J_{2}\\}$.\nThe fixed point is reached.\nThe set of nodes for $\\phi$-functions for $w$ is $\\Phi_w = \\{J, J_{2}\\}$. This requires $2$ $\\phi$-functions.\n\n**Task 3: Compute the total number of $\\phi$-functions**\n\nThe total number of $\\phi$-functions is the sum of the number of $\\phi$-functions inserted for each variable.\nNumber for $x$: $|\\Phi_x| = |\\{J\\}| = 1$.\nNumber for $y$: $|\\Phi_y| = |\\{J_{2}\\}| = 1$.\nNumber for $w$: $|\\Phi_w| = |\\{J, J_{2}\\}| = 2$.\n\nTotal number of $\\phi$-functions = $1 + 1 + 2 = 4$.", "answer": "$$\n\\boxed{4}\n$$", "id": "3638894"}, {"introduction": "A true test of understanding is the ability to apply a concept in reverse. Instead of calculating where $\\phi$-functions should go, this challenge asks you to deduce the possible original definition sites for a variable, given a known set of $\\phi$-functions. Solving this puzzle requires a firm grasp of the iterated dominance frontier and strengthens your intuition for how data-flow information propagates through a program. [@problem_id:3638500]", "problem": "Consider the following Control Flow Graph (CFG) with a unique entry node $1$ and node set $\\{1,2,3,4,5,6,7,8,9,10\\}$. The directed edges are:\n$$\n(1 \\to 2),\\ (1 \\to 3),\\ (2 \\to 4),\\ (3 \\to 4),\\ (4 \\to 5),\\ (4 \\to 6),\\ (5 \\to 7),\\ (6 \\to 7),\\ (7 \\to 8),\\ (7 \\to 9),\\ (8 \\to 10),\\ (9 \\to 10).\n$$\nUse the standard definitions from compiler theory. A node $d$ dominates a node $n$ if every path from the entry node $1$ to $n$ includes $d$. A node $d$ strictly dominates $n$ if $d$ dominates $n$ and $d \\neq n$. The dominance frontier $DF(d)$ of a node $d$ is the set of all nodes $y$ such that $d$ dominates at least one predecessor of $y$, but $d$ does not strictly dominate $y$. The iterated dominance frontier $DF^{+}(S)$ of a set $S$ of nodes is the least fixed point of repeatedly applying $DF$ starting from $S$, that is,\n$$\nDF^{+}(S) = \\bigcup_{k \\geq 1} DF^{k}(S), \\quad \\text{where } DF^{1}(S) = \\bigcup_{s \\in S} DF(s)\\ \\text{ and }\\ DF^{k+1}(S) = \\bigcup_{n \\in DF^{k}(S)} DF(n).\n$$\nIn the Static Single Assignment (SSA) construction algorithm, if a variable $v$ has definition sites $S$, then the algorithm places $\\phi$-functions at exactly the nodes in $DF^{+}(S)$. Suppose that for this CFG the observed $\\phi$-function placement set is\n$$\nT = \\{4,7,10\\}.\n$$\nReverse-engineer possible original definition sites by identifying sets $S \\subseteq \\{1,2,3,4,5,6,7,8,9,10\\}$ such that $DF^{+}(S) = T$. Among all such sets, consider those with minimal cardinality. Determine the number of distinct minimal-cardinality sets $S$ that satisfy $DF^{+}(S) = T$. Express your final answer as a single integer. No rounding is required.", "solution": "The problem requires identifying the number of minimal-cardinality sets $S$ of original definition sites such that the iterated dominance frontier $DF^{+}(S)$ is equal to the given set of $\\phi$-function placements $T = \\{4, 7, 10\\}$.\n\nTo solve this, we must first compute the dominance properties of the given Control Flow Graph (CFG).\n\n1. Dominance Relations\nA node $d$ dominates a node $n$, written $d \\text{ dom } n$, if every path from the entry node ($1$) to $n$ contains $d$. We compute the set of dominators $D(n)$ for each node $n \\in \\{1, \\dots, 10\\}$.\n$D(1) = \\{1\\}$\n$D(2) = \\{1, 2\\}$\n$D(3) = \\{1, 3\\}$\n$D(4) = (D(2) \\cap D(3)) \\cup \\{4\\} = (\\{1, 2\\} \\cap \\{1, 3\\}) \\cup \\{4\\} = \\{1, 4\\}$\n$D(5) = D(4) \\cup \\{5\\} = \\{1, 4, 5\\}$\n$D(6) = D(4) \\cup \\{6\\} = \\{1, 4, 6\\}$\n$D(7) = (D(5) \\cap D(6)) \\cup \\{7\\} = (\\{1, 4, 5\\} \\cap \\{1, 4, 6\\}) \\cup \\{7\\} = \\{1, 4, 7\\}$\n$D(8) = D(7) \\cup \\{8\\} = \\{1, 4, 7, 8\\}$\n$D(9) = D(7) \\cup \\{9\\} = \\{1, 4, 7, 9\\}$\n$D(10) = (D(8) \\cap D(9)) \\cup \\{10\\} = (\\{1, 4, 7, 8\\} \\cap \\{1, 4, 7, 9\\}) \\cup \\{10\\} = \\{1, 4, 7, 10\\}$\n\n2. Immediate Dominators and the Dominator Tree\nThe immediate dominator of a node $n$, $idom(n)$, is the strict dominator of $n$ that is closest to $n$ in any path from the entry. From the dominator sets, we can deduce the immediate dominators:\n$idom(2) = 1$\n$idom(3) = 1$\n$idom(4) = 1$\n$idom(5) = 4$\n$idom(6) = 4$\n$idom(7) = 4$\n$idom(8) = 7$\n$idom(9) = 7$\n$idom(10) = 7$\nThe dominator tree structure is as follows: node $1$ is the parent of nodes $2, 3, 4$; node $4$ is the parent of nodes $5, 6, 7$; and node $7$ is the parent of nodes $8, 9, 10$.\n\n3. Dominance Frontiers\nThe dominance frontier $DF(n)$ of a node $n$ is the set of all nodes $y$ such that $n$ dominates a predecessor of $y$, but $n$ does not strictly dominate $y$. A systematic way to do this is to consider each \"join point\" in the CFG -- a node with multiple predecessors.\nThe join points are $4$, $7$, and $10$.\nFor join point $y=4$ (predecessors $p_1=2, p_2=3$):\n$idom(4)=1$. The path in the dominator tree from $p_1=2$ to $idom(4)=1$ is just the node $2$. So $4 \\in DF(2)$. The path from $p_2=3$ to $idom(4)=1$ is just the node $3$. So $4 \\in DF(3)$.\nFor join point $y=7$ (predecessors $p_1=5, p_2=6$):\n$idom(7)=4$. The path in the dominator tree from $p_1=5$ to $idom(7)=4$ is just the node $5$. So $7 \\in DF(5)$. The path from $p_2=6$ to $idom(7)=4$ is just the node $6$. So $7 \\in DF(6)$.\nFor join point $y=10$ (predecessors $p_1=8, p_2=9$):\n$idom(10)=7$. The path in the dominator tree from $p_1=8$ to $idom(10)=7$ is just the node $8$. So $10 \\in DF(8)$. The path from $p_2=9$ to $idom(10)=7$ is just the node $9$. So $10 \\in DF(9)$.\nThe non-empty dominance frontiers are:\n$DF(2) = \\{4\\}$\n$DF(3) = \\{4\\}$\n$DF(5) = \\{7\\}$\n$DF(6) = \\{7\\}$\n$DF(8) = \\{10\\}$\n$DF(9) = \\{10\\}$\nThe dominance frontier for all other nodes is the empty set, $\\emptyset$. Specifically, $DF(1) = \\emptyset$, $DF(4) = \\emptyset$, $DF(7) = \\emptyset$, $DF(10) = \\emptyset$.\n\n4. Iterated Dominance Frontier and Minimal Sets\nWe are looking for minimal sets $S$ such that $DF^{+}(S) = T = \\{4, 7, 10\\}$.\nThe iterated dominance frontier is $DF^{+}(S) = \\bigcup_{k \\geq 1} DF^{k}(S)$.\n$DF^{1}(S) = \\bigcup_{s \\in S} DF(s)$.\n$DF^{2}(S) = \\bigcup_{n \\in DF^{1}(S)} DF(n)$.\nLet's assume we can achieve $DF^1(S) = T$. Then $DF^2(S) = \\bigcup_{n \\in T} DF(n) = DF(4) \\cup DF(7) \\cup DF(10) = \\emptyset \\cup \\emptyset \\cup \\emptyset = \\emptyset$.\nAny further iteration $DF^k(S)$ for $k > 1$ will also yield $\\emptyset$. Thus, $DF^{+}(S)=DF^{1}(S)$ if we can find $S$ such that $DF^1(S)=T$.\nThe problem reduces to finding minimal sets $S$ such that $\\bigcup_{s \\in S} DF(s) = \\{4, 7, 10\\}$.\n\nTo construct the target set $T = \\{4, 7, 10\\}$, we need to combine the DFs of the nodes in $S$.\nTo obtain the element $4$, $S$ must contain a node $s$ for which $4 \\in DF(s)$. The possible choices for $s$ are $2$ or $3$. So, $S \\cap \\{2, 3\\} \\neq \\emptyset$.\nTo obtain the element $7$, $S$ must contain a node $s$ for which $7 \\in DF(s)$. The possible choices are $5$ or $6$. So, $S \\cap \\{5, 6\\} \\neq \\emptyset$.\nTo obtain the element $10$, $S$ must contain a node $s$ for which $10 \\in DF(s)$. The possible choices are $8$ or $9$. So, $S \\cap \\{8, 9\\} \\neq \\emptyset$.\n\nThe sets of \"generator\" nodes for each element of $T$ are disjoint: $\\{2, 3\\}$, $\\{5, 6\\}$, and $\\{8, 9\\}$. Furthermore, no single node's DF contains more than one element from $T$. Therefore, to generate all three elements of $T$, the set $S$ must contain at least one node from each of these three generator sets. This implies that the minimal cardinality of $S$ is $3$.\n\n5. Counting the Minimal Sets\nA minimal-cardinality set $S$ must have $|S|=3$ and must be formed by picking exactly one node from each of the three generator sets.\nLet $S = \\{s_1, s_2, s_3\\}$ where:\n$s_1 \\in \\{2, 3\\}$ (there are $2$ choices)\n$s_2 \\in \\{5, 6\\}$ (there are $2$ choices)\n$s_3 \\in \\{8, 9\\}$ (there are $2$ choices)\n\nThe total number of distinct sets $S$ with minimal cardinality that satisfy the condition is the product of the number of choices for each element.\nNumber of sets = (choices for generating $4$) $\\times$ (choices for generating $7$) $\\times$ (choices for generating $10$)\nNumber of sets = $2 \\times 2 \\times 2 = 8$.\n\nThe $8$ possible minimal-cardinality sets are:\n$\\{2, 5, 8\\}$, $\\{2, 5, 9\\}$, $\\{2, 6, 8\\}$, $\\{2, 6, 9\\}$, $\\{3, 5, 8\\}$, $\\{3, 5, 9\\}$, $\\{3, 6, 8\\}$, $\\{3, 6, 9\\}$.\nEach of these sets has cardinality $3$ and satisfies $DF^{+}(S) = \\{4, 7, 10\\}$. The number of such sets is $8$.", "answer": "$$\n\\boxed{8}\n$$", "id": "3638500"}]}