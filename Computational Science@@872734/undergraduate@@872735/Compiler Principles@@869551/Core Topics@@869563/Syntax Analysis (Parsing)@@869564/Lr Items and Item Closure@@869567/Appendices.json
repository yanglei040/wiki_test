{"hands_on_practices": [{"introduction": "The foundation of building an LR parser is the construction of its states, which are represented by sets of LR(0) items. This process begins with the initial state, $I_0$, derived from the augmented start symbol. This first practice exercise focuses on the fundamental `CLOSURE` operation, showing how it systematically expands an initial item to reveal all possible productions the parser might expect to see at the very beginning of the input stream. By working through a grammar with several nullable nonterminals [@problem_id:3655630], you will gain a concrete understanding of how completed items, particularly those from $\\epsilon$-productions, arise and coexist within a single state.", "problem": "Consider the following context-free grammar with explicit empty-string productions designed to form a chain of nullable nonterminals. Let the start symbol be $S$, and let the augmented start symbol be $S'$. The terminals are $\\{a,b,c,d,e\\}$ and the nonterminals are $\\{S,A,B,C,D,E\\}$. The productions are:\n$$\n\\begin{aligned}\n&0.\\quad S' \\to S \\\\\n&1.\\quad S \\to A\\,B \\;\\mid\\; C\\,D \\;\\mid\\; E \\\\\n&2.\\quad A \\to \\epsilon \\;\\mid\\; a \\\\\n&3.\\quad B \\to \\epsilon \\;\\mid\\; b \\\\\n&4.\\quad C \\to \\epsilon \\;\\mid\\; c \\\\\n&5.\\quad D \\to \\epsilon \\;\\mid\\; d\\,E \\\\\n&6.\\quad E \\to \\epsilon \\;\\mid\\; e\n\\end{aligned}\n$$\nTreat an $\\epsilon$-production $X \\to \\epsilon$ as having a single $\\text{LR}(0)$ item $X \\to \\cdot$, where the dot $\\cdot$ marks the position in the right-hand side. Construct the initial canonical item set $I_0 = \\operatorname{CLOSURE}(\\{\\,S' \\to \\cdot S\\,\\})$ for the augmented grammar under the $\\text{LR}(0)$ (Left-to-right, Rightmost derivation with zero lookahead) method. Then determine how many distinct completed items (that is, items of the form $X \\to \\gamma \\cdot$ for some right-hand side $\\gamma$, including $\\gamma=\\epsilon$) appear simultaneously in $I_0$.\n\nYour final answer must be a single integer equal to that count. No rounding is required and no units are involved.", "solution": "The problem requires the construction of the initial canonical $\\text{LR}(0)$ item set, denoted as $I_0$, for a given context-free grammar. Subsequently, we must determine the number of completed items within this set. A completed item is defined as an item where the dot ($\\cdot$) appears at the rightmost end of the production's right-hand side, such as $X \\to \\gamma \\cdot$.\n\nThe grammar is specified with the start symbol $S$, the augmented start symbol $S'$, productions, terminals $\\{a,b,c,d,e\\}$, and nonterminals $\\{S,A,B,C,D,E\\}$.\nThe productions are:\n$$\n\\begin{aligned}\n&0.\\quad S' \\to S \\\\\n&1.\\quad S \\to A\\,B \\mid C\\,D \\mid E \\\\\n&2.\\quad A \\to \\epsilon \\mid a \\\\\n&3.\\quad B \\to \\epsilon \\mid b \\\\\n&4.\\quad C \\to \\epsilon \\mid c \\\\\n&5.\\quad D \\to \\epsilon \\mid d\\,E \\\\\n&6.\\quad E \\to \\epsilon \\mid e\n\\end{aligned}\n$$\nThe problem states that an empty-string production $X \\to \\epsilon$ gives rise to the single $\\text{LR}(0)$ item $X \\to \\cdot$. This item is inherently a completed item, as the dot is at the end of an empty right-hand side.\n\nThe initial item set $I_0$ is defined as the closure of the set containing the single initial item for the augmented grammar, i.e., $I_0 = \\operatorname{CLOSURE}(\\{S' \\to \\cdot S\\})$.\n\nThe $\\operatorname{CLOSURE}$ algorithm for an $\\text{LR}(0)$ item set $I$ is defined as follows:\n$1$. Initialize a set $J$ to $I$.\n$2$. Repeat until no more items can be added to $J$: for each item of the form $[A \\to \\alpha \\cdot B \\beta]$ in $J$, where $B$ is a nonterminal, add all production items $[B \\to \\cdot \\gamma]$ to $J$.\n$3$. The resulting set $J$ is the closure.\n\nNote that the standard $\\text{LR}(0)$ closure algorithm does not \"look through\" nullable nonterminals. The phrase \"chain of nullable nonterminals\" in the problem description is an attribute of the grammar that leads to parsing conflicts (specifically, reduce/reduce conflicts in $I_0$), but it does not alter the procedure for constructing the $\\text{LR}(0)$ item sets. We must strictly adhere to the specified $\\text{LR}(0)$ method.\n\nLet us compute $I_0 = \\operatorname{CLOSURE}(\\{S' \\to \\cdot S\\})$.\n\nInitially, the set of items, which we will call $J$, contains only the item from the augmented start symbol:\n$J = \\{S' \\to \\cdot S\\}$.\n\nNext, we apply the closure rule iteratively.\n**Step 1:** The item $S' \\to \\cdot S$ is in $J$. The dot is before the nonterminal $S$. Therefore, we must add all items corresponding to the productions of $S$ to $J$. The productions for $S$ are $S \\to A\\,B$, $S \\to C\\,D$, and $S \\to E$. This adds the items $S \\to \\cdot A\\,B$, $S \\to \\cdot C\\,D$, and $S \\to \\cdot E$ to our set.\nAfter this step, $J = \\{S' \\to \\cdot S, S \\to \\cdot A\\,B, S \\to \\cdot C\\,D, S \\to \\cdot E\\}$.\n\n**Step 2:** We inspect the newly added items for any nonterminals immediately following a dot.\n- The item $S \\to \\cdot A\\,B$ has the nonterminal $A$ after the dot. We add all items for the productions of $A$. The productions are $A \\to \\epsilon$ and $A \\to a$. This adds the items $A \\to \\cdot$ and $A \\to \\cdot a$.\n- The item $S \\to \\cdot C\\,D$ has the nonterminal $C$ after the dot. We add all items for the productions of $C$. The productions are $C \\to \\epsilon$ and $C \\to c$. This adds the items $C \\to \\cdot$ and $C \\to \\cdot c$.\n- The item $S \\to \\cdot E$ has the nonterminal $E$ after the dot. We add all items for the productions of $E$. The productions are $E \\to \\epsilon$ and $E \\to e$. This adds the items $E \\to \\cdot$ and $E \\to \\cdot e$.\n\nAfter this step, the set $J$ is:\n$J = \\{S' \\to \\cdot S, S \\to \\cdot A\\,B, S \\to \\cdot C\\,D, S \\to \\cdot E, A \\to \\cdot a, A \\to \\cdot, C \\to \\cdot c, C \\to \\cdot, E \\to \\cdot e, E \\to \\cdot\\}$.\n\n**Step 3:** We inspect the items added in Step $2$.\n- The items $A \\to \\cdot a$, $C \\to \\cdot c$, and $E \\to \\cdot e$ have a terminal symbol after the dot, so the closure rule does not apply.\n- The items $A \\to \\cdot$, $C \\to \\cdot$, and $E \\to \\cdot$ are completed items and have no symbol after the dot, so the closure rule does not apply.\n\nSince no new items were added in this step, the algorithm terminates. The final set $I_0$ is the current set $J$.\n$I_0 = \\{S' \\to \\cdot S, S \\to \\cdot A\\,B, S \\to \\cdot C\\,D, S \\to \\cdot E, A \\to \\cdot a, A \\to \\cdot, C \\to \\cdot c, C \\to \\cdot, E \\to \\cdot e, E \\to \\cdot\\}$.\nThe set $I_0$ contains a total of $10$ items.\n\nThe final task is to count the number of distinct completed items in $I_0$. A completed item has the form $X \\to \\gamma \\cdot$. We examine each item in $I_0$:\n$1$. $S' \\to \\cdot S$: Not completed. The dot is at the beginning.\n$2$. $S \\to \\cdot A\\,B$: Not completed. The dot is at the beginning.\n$3$. $S \\to \\cdot C\\,D$: Not completed. The dot is at the beginning.\n$4$. $S \\to \\cdot E$: Not completed. The dot is at the beginning.\n$5$. $A \\to \\cdot a$: Not completed. The dot is before the terminal $a$.\n$6$. $A \\to \\cdot$: **Completed**. This item comes from the production $A \\to \\epsilon$. The right-hand side is empty, so the dot is at the end.\n$7$. $C \\to \\cdot c$: Not completed. The dot is before the terminal $c$.\n$8$. $C \\to \\cdot$: **Completed**. This item comes from the production $C \\to \\epsilon$.\n$9$. $E \\to \\cdot e$: Not completed. The dot is before the terminal $e$.\n$10$. $E \\to \\cdot$: **Completed**. This item comes from the production $E \\to \\epsilon$.\n\nBy inspection, there are exactly $3$ completed items in the set $I_0$. These are $A \\to \\cdot$, $C \\to \\cdot$, and $E \\to \\cdot$.\nThe presence of these $3$ completed items in the single state $I_0$ creates reduce/reduce conflicts, meaning the grammar is not $\\text{LR}(0)$. This is a direct consequence of the grammar structure, particularly the nullable nonterminals, but it does not change the result of the calculation.\n\nThe number of distinct completed items in $I_0$ is $3$.", "answer": "$$\\boxed{3}$$", "id": "3655630"}, {"introduction": "Once we can define a parser state using the `CLOSURE` operation, the next step is to define the transitions between states. The `goto` function serves this exact purpose, modeling the parser's action of \"shifting\" a grammar symbol and moving to a new state. This problem [@problem_id:3655618] provides hands-on practice with the `goto` function, demonstrating how to compute the destination state after the parser recognizes a nonterminal symbol. This exercise is crucial for understanding how the complete state machine, or canonical collection of LR(0) items, is constructed one transition at a time.", "problem": "Consider the context-free grammar with productions $S \\to AB$, $A \\to a \\mid \\epsilon$, and $B \\to b$. Work in the framework of Left-to-right, Rightmost derivation in reverse (LR) parsing with $LR(0)$ items. Let $I$ be the closure of the singleton set that initially contains the item $[S \\to \\cdot AB]$. Using only the core definitions of $LR(0)$ items, item closure, and the $\\operatorname{goto}$ function, construct $\\operatorname{goto}(I, A)$ by first forming all items obtained by advancing the dot over $A$ in items of $I$ and then taking the closure. Let $n$ denote the cardinality $|\\operatorname{goto}(I, A)|$. Provide a concise interpretation of the items contained in $\\operatorname{goto}(I, A)$ in terms of what portion of the right-hand sides has been recognized and what symbols are expected next, and then report the exact value of $n$. Your final answer should be the single integer value of $n$.", "solution": "The problem asks for the cardinality of the set of $LR(0)$ items, $\\operatorname{goto}(I, A)$, for a given context-free grammar. The grammar productions are $S \\to AB$, $A \\to a \\mid \\epsilon$, and $B \\to b$. The set $I$ is defined as the closure of the initial item set $\\{[S \\to \\cdot AB]\\}$.\n\nLet the given context-free grammar be $G$. The set of nonterminals is $V = \\{S, A, B\\}$, the set of terminals is $\\Sigma = \\{a, b\\}$, and the set of productions $P$ is:\n$1.$ $S \\to AB$\n$2.$ $A \\to a$\n$3.$ $A \\to \\epsilon$\n$4.$ $B \\to b$\n\nAn $LR(0)$ item is a production with a dot ($\\cdot$) at some position on the right-hand side (RHS). The problem requires two main computations: first, the construction of the set of items $I$, and second, the construction of the set of items $\\operatorname{goto}(I, A)$.\n\nFirst, we compute the set $I$ by applying the closure operation to the initial set $\\{[S \\to \\cdot AB]\\}$.\nThe closure of a set of items $J$, denoted $\\operatorname{closure}(J)$, is computed as follows:\n$1.$ Initially, every item in $J$ is in $\\operatorname{closure}(J)$.\n$2.$ If an item $[X \\to \\alpha \\cdot Y \\beta]$ is in $\\operatorname{closure}(J)$ and $Y \\to \\gamma$ is a production, then add the item $[Y \\to \\cdot \\gamma]$ to $\\operatorname{closure}(J)$, if it is not already there.\n$3.$ Repeat step $2$ until no more new items can be added to $\\operatorname{closure}(J)$.\n\nLet's compute $I = \\operatorname{closure}(\\{[S \\to \\cdot AB]\\})$.\n$1.$ We start with the initial set of items, which is $\\{[S \\to \\cdot AB]\\}$.\n$2.$ The item $[S \\to \\cdot AB]$ has the nonterminal $A$ immediately to the right of the dot. Therefore, we must add all items corresponding to the productions for $A$. The productions for $A$ are $A \\to a$ and $A \\to \\epsilon$. This gives us the new items $[A \\to \\cdot a]$ and $[A \\to \\cdot]$ (for $A \\to \\epsilon$).\n$3.$ Our current set of items is $\\{[S \\to \\cdot AB], [A \\to \\cdot a], [A \\to \\cdot]\\}$.\n$4.$ We now examine the newly added items.\n   - For $[A \\to \\cdot a]$, the symbol to the right of the dot is the terminal $a$. This does not cause any new items to be added.\n   - For $[A \\to \\cdot]$, there is no symbol to the right of the dot. This is a reduce item and also does not cause any new items to be added.\n$5.$ Since no new items can be added, the closure operation is complete. The resulting set of items is:\n$$I = \\{[S \\to \\cdot AB], [A \\to \\cdot a], [A \\to \\cdot]\\}$$\n\nNext, we compute the set $\\operatorname{goto}(I, A)$. The $\\operatorname{goto}$ function is defined as follows: for a set of items $J$ and a grammar symbol $X$, $\\operatorname{goto}(J, X)$ is the closure of the set of all items $[P \\to \\alpha X \\cdot \\beta]$ such that $[P \\to \\alpha \\cdot X \\beta]$ is in $J$.\n\nTo compute $\\operatorname{goto}(I, A)$, we first identify the \"kernel\" of the new set. This kernel consists of all items in $I$ where the nonterminal $A$ is to the right of the dot, with the dot advanced over $A$.\nLooking at the set $I = \\{[S \\to \\cdot AB], [A \\to \\cdot a], [A \\to \\cdot]\\}$, only the item $[S \\to \\cdot AB]$ is of the form $[P \\to \\alpha \\cdot A \\beta]$. Here, $P=S$, $\\alpha=\\epsilon$, and $\\beta=B$.\nBy advancing the dot over $A$, we get the item $[S \\to A \\cdot B]$.\nThe kernel of the $\\operatorname{goto}$ set is therefore $\\{[S \\to A \\cdot B]\\}$.\n\nNow, we must compute the closure of this kernel set: $\\operatorname{goto}(I, A) = \\operatorname{closure}(\\{[S \\to A \\cdot B]\\})$.\n$1.$ We start with the set $\\{[S \\to A \\cdot B]\\}$.\n$2.$ The item $[S \\to A \\cdot B]$ has the nonterminal $B$ immediately to the right of the dot. Therefore, we must add all items for the productions of $B$. The only production for $B$ is $B \\to b$. This gives the new item $[B \\to \\cdot b]$.\n$3.$ Our current set of items is $\\{[S \\to A \\cdot B], [B \\to \\cdot b]\\}$.\n$4.$ We examine the newly added item $[B \\to \\cdot b]$. The symbol to the right of the dot is the terminal $b$, so no new items are added.\n$5.$ The closure operation is complete. The resulting set of items is:\n$$\\operatorname{goto}(I, A) = \\{[S \\to A \\cdot B], [B \\to \\cdot b]\\}$$\n\nThe interpretation of the items in this set is as follows. The set $\\operatorname{goto}(I, A)$ represents a state in the LR automaton reached after recognizing a sequence of input terminals that can be reduced to the nonterminal $A$.\n- The kernel item $[S \\to A \\cdot B]$ signifies that a part of the input corresponding to nonterminal $A$ has been successfully parsed, and the parser now expects to see a sequence of terminals that can be reduced to the nonterminal $B$ to complete the production $S \\to AB$.\n- The closure item $[B \\to \\cdot b]$ indicates how the parser can begin to recognize the expected $B$: by seeing the terminal symbol $b$.\n\nFinally, the problem asks for the value of $n$, which is the cardinality of the set $\\operatorname{goto}(I, A)$.\n$$n = |\\operatorname{goto}(I, A)| = |\\{[S \\to A \\cdot B], [B \\to \\cdot b]\\}|$$\nThe set contains two distinct items. Therefore, the cardinality is $2$.\n$n = 2$.", "answer": "$$\\boxed{2}$$", "id": "3655618"}, {"introduction": "The primary motivation for constructing the canonical collection of LR(0) item sets is to analyze the grammar for parsing suitability. The structure of these item sets can reveal ambiguities that would prevent a deterministic parse. This final practice problem [@problem_id:3655684] brings the previous concepts together to demonstrate how a shift/reduce conflict manifests within an LR(0) item set. By identifying a state that contains both a \"shift\" item and a \"reduce\" item for the same input, you will learn to spot why a grammar is not LR(0) and appreciate the core challenge that more advanced parsing techniques aim to solve.", "problem": "Consider the context-free grammar with start symbol $S$ and productions $S \\to aS \\mid Sb \\mid \\epsilon$. Augment the grammar by introducing a new start symbol $S'$ with the production $S' \\to S$. Using only the standard definitions of $LR(0)$ items, item closure, and the $goto$ function, construct the initial $LR(0)$ item set $I_0 = \\mathrm{CLOSURE}(\\{\\,S' \\to \\cdot S\\,\\})$. From first principles, identify within $I_0$ an item set that simultaneously contains the completed item $[\\,S \\to \\epsilon \\cdot\\,]$ and at least one item whose dot precedes a terminal symbol $a$ or $b$, thereby making a shift possible on that terminal. Explain why this situation constitutes a shift/reduce conflict in the $LR(0)$ parsing framework. Finally, compute the total number of distinct $LR(0)$ shift/reduce conflicts present in that item set. Express your final answer as a single integer with no units. No rounding is required.", "solution": "The problem asks us to analyze a given context-free grammar, construct its initial $LR(0)$ item set $I_0$, and determine the number of shift/reduce conflicts within this set.\n\nThe grammar $G$ has the start symbol $S$ and the following productions:\n$1$. $S \\to aS$\n$2$. $S \\to Sb$\n$3$. $S \\to \\epsilon$\n\nFirst, we augment the grammar by introducing a new start symbol $S'$ and a new production $S' \\to S$. The augmented grammar $G'$ is:\n$0$. $S' \\to S$\n$1$. $S \\to aS$\n$2$. $S \\to Sb$\n$3$. $S \\to \\epsilon$\n\nThe next step is to construct the initial $LR(0)$ item set, denoted as $I_0$. This set is defined as the closure of the initial item derived from the augmented production, $I_0 = \\mathrm{CLOSURE}(\\{\\,[S' \\to \\cdot S]\\,\\})$.\n\nThe $\\mathrm{CLOSURE}$ operation is defined as follows:\nIf an item $[A \\to \\alpha \\cdot B \\beta]$ is in an item set, and $B \\to \\gamma$ is a production in the grammar, then the item $[B \\to \\cdot \\gamma]$ must also be in the closure of that set. This process is repeated until no new items can be added.\n\nLet's compute $I_0$:\n$1$. We begin with the initial item set containing only the item from the augmented production: $\\{[S' \\to \\cdot S]\\}$.\n\n$2$. The dot in $[S' \\to \\cdot S]$ precedes the non-terminal $S$. Therefore, we must add all items corresponding to the productions of $S$, with the dot at the beginning of the right-hand side. The productions for $S$ are $S \\to aS$, $S \\to Sb$, and $S \\to \\epsilon$. Adding the corresponding items, our set becomes:\n$\\{ [S' \\to \\cdot S], [S \\to \\cdot aS], [S \\to \\cdot Sb], [S \\to \\epsilon \\cdot] \\}$\nNote that the production $S \\to \\epsilon$ gives rise to the item $[S \\to \\cdot]$, which we write as $[S \\to \\epsilon \\cdot]$ for clarity as per the problem's notation.\n\n$3$. We now check if any new items can be added by applying the closure rule to the newly added items:\n- For $[S \\to \\cdot aS]$, the dot is before a terminal symbol ($a$), so no new items are added.\n- For $[S \\to \\cdot Sb]$, the dot is before the non-terminal $S$. We must add items for the productions of $S$. However, the items $[S \\to \\cdot aS]$, $[S \\to \\cdot Sb]$, and $[S \\to \\epsilon \\cdot]$ are already in our set. So, no new items are added.\n- For $[S \\to \\epsilon \\cdot]$, the dot is at the end (this is a completed or reduce item), so no new items are added.\n\nThe closure process is complete. The initial $LR(0)$ item set is:\n$$ I_0 = \\{ [S' \\to \\cdot S], [S \\to \\cdot aS], [S \\to \\cdot Sb], [S \\to \\epsilon \\cdot] \\} $$\n\nThe problem asks us to identify a situation within $I_0$ that constitutes a shift/reduce conflict. An $LR(0)$ shift/reduce conflict occurs in an item set if it contains both:\n- A *shift* item, which is of the form $[A \\to \\alpha \\cdot t \\beta]$ where $t$ is a terminal symbol. This indicates that the parser can shift the terminal $t$ from the input onto the stack.\n- A *reduce* item, which is a completed item of the form $[B \\to \\gamma \\cdot]$. In the $LR(0)$ framework, this indicates that the parser can perform a reduction using the production $B \\to \\gamma$, regardless of the next input symbol.\n\nLet's analyze the item set $I_0$ in this context. The terminals of the grammar are $a$ and $b$.\n\n- **Analysis for terminal $a$:**\n  - The item $[S \\to \\cdot aS]$ is present in $I_0$. The dot is before the terminal $a$. This corresponds to a **shift** action on input $a$.\n  - The item $[S \\to \\epsilon \\cdot]$ is also present in $I_0$. This is a completed item. In an $LR(0)$ parser, this item dictates a **reduce** action (by production $S \\to \\epsilon$) for any lookahead terminal. Thus, it specifies a reduce action for input $a$.\n  - Since the set $I_0$ directs the parser to both `shift` and `reduce` on the input terminal $a$, there is a **shift/reduce conflict** for the terminal $a$.\n\n- **Analysis for terminal $b$:**\n  - Is there an item of the form $[A \\to \\alpha \\cdot b \\beta]$ in $I_0$? No. The item $[S \\to \\cdot Sb]$ has the dot before the non-terminal $S$, not the terminal $b$. Therefore, there is no shift action on input $b$.\n  - The item $[S \\to \\epsilon \\cdot]$ is present in $I_0$, which dictates a **reduce** action on input $b$.\n  - For terminal $b$, there is only one defined action: `reduce`. There is no conflict.\n\nA distinct shift/reduce conflict is defined for each pair of (state, terminal) where the conflict occurs. In our case, the state is $I_0$.\n- For the pair $(I_0, a)$, a shift/reduce conflict exists.\n- For the pair $(I_0, b)$, no conflict exists.\n\nTherefore, there is exactly one distinct shift/reduce conflict in the item set $I_0$.\n\nThe final task is to compute the total number of distinct $LR(0)$ shift/reduce conflicts present in the item set $I_0$. Based on the analysis above, this number is $1$.", "answer": "$$\\boxed{1}$$", "id": "3655684"}]}