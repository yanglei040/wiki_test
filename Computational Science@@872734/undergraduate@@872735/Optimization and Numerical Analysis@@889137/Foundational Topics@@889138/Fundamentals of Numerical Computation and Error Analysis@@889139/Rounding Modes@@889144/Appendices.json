{"hands_on_practices": [{"introduction": "Many computational environments, such as embedded systems, rely on fixed-point arithmetic to save power and resources. This first exercise explores the very first step where rounding errors are introduced: converting a real-world decimal value into a finite binary representation. By applying two different rounding rules—truncation and round-to-nearest-even—you will see how this initial choice creates different digital values from the same source data [@problem_id:2199486].", "problem": "An embedded system designed for a remote environmental monitoring station utilizes a specialized low-power processor. To conserve power and silicon area, this processor avoids floating-point arithmetic and instead represents all sensor data using a signed 8-bit fixed-point format. This format is defined as Q3.4, which signifies that each 8-bit number includes 1 sign bit, 3 integer bits, and 4 fractional bits.\n\nA new barometric pressure sensor is calibrated to output a normalized value, which can be positive or negative. A specific reading from this sensor is $-0.3$. Before this value can be processed, it must be converted into the Q3.4 binary format. The processor's instruction set architecture provides two distinct rounding modes for this conversion:\n1.  **Truncation (Round toward Zero):** The fractional part of the number is discarded. For example, $5.9$ becomes $5$ and $-5.9$ becomes $-5$.\n2.  **Round-to-Nearest-Even (Convergent Rounding):** The number is rounded to the nearest integer. If the number is exactly halfway between two integers (e.g., has a fractional part of exactly $0.5$), it is rounded to the nearest even integer. For example, $5.5$ rounds to $6$, and $4.5$ rounds to $4$.\n\nDetermine the two 8-bit signed integer values that correspond to the binary patterns representing the sensor reading of $-0.3$ after it is converted using each of the two rounding modes. Present your answer as a pair of integers ordered as (result from truncation, result from round-to-nearest-even).", "solution": "In a signed Q3.4 fixed-point format with 8 bits total, there are 1 sign bit, 3 integer bits, and 4 fractional bits. The quantization step is therefore $2^{-4}$. Converting a real number $x$ to this format proceeds by scaling and rounding:\n$$\nS = x \\cdot 2^{4}, \\quad I = R(S),\n$$\nwhere $R(\\cdot)$ is the rounding rule, and the stored 8-bit signed integer is $I$. The represented real value is $I \\cdot 2^{-4}$.\n\nFor $x=-0.3$, the scaled value is\n$$\nS = -0.3 \\cdot 2^{4} = -0.3 \\cdot 16 = -4.8.\n$$\n\nUnder truncation (round toward zero), the rule discards the fractional part, which for negative values is equivalent to taking the ceiling:\n$$\nI_{\\text{trunc}} = -4.\n$$\n\nUnder round-to-nearest-even, we choose the nearest integer to $-4.8$. Since $-5$ is closer than $-4$ and there is no tie (not exactly halfway), the result is\n$$\nI_{\\text{rne}} = -5.\n$$\n\nBoth $I_{\\text{trunc}}$ and $I_{\\text{rne}}$ lie within the valid 8-bit signed range, so no saturation is needed. Thus, the required pair of 8-bit signed integers is $\\left(-4,-5\\right)$, ordered as (truncation, round-to-nearest-even).", "answer": "$$\\boxed{\\begin{pmatrix}-4 & -5\\end{pmatrix}}$$", "id": "2199486"}, {"introduction": "In standard mathematics, the order of multiplication doesn't matter, a property known as associativity. However, in the world of finite-precision computing, this fundamental law can break down. This practice will guide you through a calculation performed in two different orders, revealing how intermediate rounding after each step leads to two distinct final answers [@problem_id:2199504].", "problem": "In scientific computing, the finite precision of floating-point arithmetic can lead to results that differ from those obtained with ideal, infinite-precision real numbers. One consequence is that the associative property of multiplication, which holds for real numbers (i.e., $(a \\times b) \\times c = a \\times (b \\times c)$), does not always hold in practice.\n\nConsider a hypothetical simplified processor that performs floating-point arithmetic. This processor has a specific hardware limitation: after every multiplication operation, the result is immediately rounded to a precision of three significant figures. The rounding rule implemented is \"round half away from zero,\" meaning a number is rounded to its nearest value, and a tie (a number exactly halfway between two representable values) is rounded to the value with the larger magnitude. For example, 3.456 rounds to 3.46, 3.452 rounds to 3.45, and 3.455 rounds to 3.46.\n\nGiven the three input numbers $a = 3.14$, $b = 1.78$, and $c = 9.99$, this processor is tasked to compute the product $a \\times b \\times c$ in two different orders. Let $R_1$ be the result of the evaluation $(a \\times b) \\times c$, and let $R_2$ be the result of the evaluation $a \\times (b \\times c)$.\n\nDetermine the final computed values of $R_1$ and $R_2$ as determined by this specific processor. Present your answer as a pair of numbers $(R_1, R_2)$.", "solution": "We apply the rule that after each multiplication, the result is rounded to three significant figures using round half away from zero.\n\nFirst, compute $(a \\times b) \\times c$.\n- Exact product $a \\times b$:\n$$\na \\times b = 3.14 \\times 1.78 = \\frac{314}{100} \\times \\frac{178}{100} = \\frac{55892}{10000} = 5.5892.\n$$\n- Round to three significant figures: $5.5892 \\to 5.59$ (fourth significant digit is $9$).\n- Multiply by $c$:\n$$\n5.59 \\times 9.99 = \\frac{559}{100} \\times \\frac{999}{100} = \\frac{558441}{10000} = 55.8441.\n$$\n- Round to three significant figures: $55.8441 \\to 55.8$ (fourth significant digit is $4$).\n\nThus, $R_{1} = 55.8$.\n\nNext, compute $a \\times (b \\times c)$.\n- Exact product $b \\times c$:\n$$\nb \\times c = 1.78 \\times 9.99 = \\frac{178}{100} \\times \\frac{999}{100} = \\frac{177822}{10000} = 17.7822.\n$$\n- Round to three significant figures: $17.7822 \\to 17.8$ (fourth significant digit is $8$).\n- Multiply by $a$:\n$$\n3.14 \\times 17.8 = \\frac{314}{100} \\times \\frac{178}{10} = \\frac{55892}{1000} = 55.892.\n$$\n- Round to three significant figures: $55.892 \\to 55.9$ (fourth significant digit is $9$).\n\nThus, $R_{2} = 55.9$.\n\nTherefore, the final computed values are $(R_{1}, R_{2}) = (55.8, 55.9)$.", "answer": "$$\\boxed{\\begin{pmatrix}55.8 & 55.9\\end{pmatrix}}$$", "id": "2199504"}, {"introduction": "The subtle effects of rounding become much more pronounced in iterative algorithms, where small errors can accumulate over many steps. In this exercise, we will simulate a simple digital filter, a system that repeatedly updates its state, on two processors with different rounding policies. You will discover how this single design choice—rounding towards zero versus rounding to the nearest even number—can lead the system to entirely different stable fixed points [@problem_id:2199495].", "problem": "A simple first-order digital Infinite Impulse Response (IIR) filter is implemented on two different experimental microprocessors, Processor A and Processor B. The filter's state, represented by a variable $x$, is updated at discrete time steps $n=0, 1, 2, \\dots$ according to the linear recurrence relation:\n$$x_{n+1} = \\alpha x_n + \\beta$$\nFor this particular filter, the coefficients are $\\alpha = 0.5$ and $\\beta = 1.5$. The initial state of the filter is $x_0 = 0.67$.\n\nBoth microprocessors employ a decimal floating-point arithmetic system that stores all values with a precision of three significant figures. The update rule is implemented as $x_{n+1} = \\text{fl}(\\alpha x_n + \\beta)$, where the function $\\text{fl}(y)$ rounds the result of the calculation $y = \\alpha x_n + \\beta$ to three significant figures before storing it as the new state $x_{n+1}$. The two processors differ only in their rounding mode:\n\n1.  **Processor A** uses **Round-Towards-Zero (RTZ)**. In this mode, the number is truncated to three significant figures. For example, $3.1498$ is rounded to $3.14$, and $-3.1498$ is rounded to $-3.14$.\n\n2.  **Processor B** uses **Round-to-Nearest-Even (RNE)**. In this mode, a number is rounded to the nearest representable value with three significant figures. If a number is exactly halfway between two representable values (e.g., $3.145$), it is rounded to the one whose last significant digit is even. For example, $3.145$ is rounded to $3.14$, while $3.155$ is rounded to $3.16$.\n\nThe filter's state is considered stable when it reaches a fixed point, defined as a value $x^*$ such that an iteration no longer changes the state (i.e., $x_{k+1} = x_k = x^*$ for some step $k$).\n\nDetermine the fixed-point value, $x_A^*$, for the system running on Processor A and the fixed-point value, $x_B^*$, for the system on Processor B. Provide the final answers as a pair of decimal numbers, $(x_A^*, x_B^*)$, with each value expressed to three significant figures.", "solution": "We are given the rounded iteration\n$$x_{n+1}=\\mathrm{fl}(0.5\\,x_{n}+1.5),$$\nwith three significant figures and two rounding modes. A fixed point for the rounded system satisfies\n$$x^{*}=\\mathrm{fl}(0.5\\,x^{*}+1.5),$$\nwith $x^{*}$ representable to three significant figures. The unrounded fixed point of $x=0.5x+1.5$ is $x=3$, which guides where the quantized fixed point will lie.\n\nProcessor A (RTZ, truncate toward zero to three significant figures):\nStart with $x_{0}=0.67$ (stored as $0.670$ to three significant figures).\nCompute step by step, always truncating to three significant figures:\n$$y_{0}=0.5\\cdot 0.67+1.5=1.835\\;\\Rightarrow\\;x_{1}=\\mathrm{fl}(1.835)=1.83,$$\n$$y_{1}=0.5\\cdot 1.83+1.5=2.415\\;\\Rightarrow\\;x_{2}=\\mathrm{fl}(2.415)=2.41,$$\n$$y_{2}=0.5\\cdot 2.41+1.5=2.705\\;\\Rightarrow\\;x_{3}=\\mathrm{fl}(2.705)=2.70,$$\n$$y_{3}=0.5\\cdot 2.70+1.5=2.85\\;\\Rightarrow\\;x_{4}=\\mathrm{fl}(2.85)=2.85,$$\n$$y_{4}=0.5\\cdot 2.85+1.5=2.925\\;\\Rightarrow\\;x_{5}=\\mathrm{fl}(2.925)=2.92,$$\n$$y_{5}=0.5\\cdot 2.92+1.5=2.96\\;\\Rightarrow\\;x_{6}=\\mathrm{fl}(2.96)=2.96,$$\n$$y_{6}=0.5\\cdot 2.96+1.5=2.98\\;\\Rightarrow\\;x_{7}=\\mathrm{fl}(2.98)=2.98,$$\n$$y_{7}=0.5\\cdot 2.98+1.5=2.99\\;\\Rightarrow\\;x_{8}=\\mathrm{fl}(2.99)=2.99,$$\n$$y_{8}=0.5\\cdot 2.99+1.5=2.995\\;\\Rightarrow\\;x_{9}=\\mathrm{fl}(2.995)=2.99.$$\nThus $x=2.99$ is a fixed point under RTZ, since $0.5\\cdot 2.99+1.5=2.995$ truncates to $2.99$. Therefore $x_{A}^{*}=2.99$ from the given initial condition.\n\nProcessor B (RNE, round to nearest with ties to even, three significant figures):\nStart with $x_{0}=0.67$ and round each step:\n$$y_{0}=0.5\\cdot 0.67+1.5=1.835\\;\\Rightarrow\\;x_{1}=\\mathrm{fl}(1.835)=1.84\\quad\\text{(tie, last kept digit even)},$$\n$$y_{1}=0.5\\cdot 1.84+1.5=2.42\\;\\Rightarrow\\;x_{2}=2.42,$$\n$$y_{2}=0.5\\cdot 2.42+1.5=2.71\\;\\Rightarrow\\;x_{3}=2.71,$$\n$$y_{3}=0.5\\cdot 2.71+1.5=2.855\\;\\Rightarrow\\;x_{4}=\\mathrm{fl}(2.855)=2.86\\quad\\text{(tie, last kept digit even)},$$\n$$y_{4}=0.5\\cdot 2.86+1.5=2.93\\;\\Rightarrow\\;x_{5}=2.93,$$\n$$y_{5}=0.5\\cdot 2.93+1.5=2.965\\;\\Rightarrow\\;x_{6}=\\mathrm{fl}(2.965)=2.96\\quad\\text{(tie, last kept digit even)},$$\n$$y_{6}=0.5\\cdot 2.96+1.5=2.98\\;\\Rightarrow\\;x_{7}=2.98,$$\n$$y_{7}=0.5\\cdot 2.98+1.5=2.99\\;\\Rightarrow\\;x_{8}=2.99,$$\n$$y_{8}=0.5\\cdot 2.99+1.5=2.995\\;\\Rightarrow\\;x_{9}=\\mathrm{fl}(2.995)=3.00\\quad\\text{(tie, last kept digit even)}.$$\nFinally,\n$$y_{9}=0.5\\cdot 3.00+1.5=3.00\\;\\Rightarrow\\;x_{10}=3.00,$$\nso $x=3.00$ is the fixed point under RNE. Therefore $x_{B}^{*}=3.00$.\n\nHence, the fixed-point values (to three significant figures) are $x_{A}^{*}=2.99$ and $x_{B}^{*}=3.00$.", "answer": "$$\\boxed{\\begin{pmatrix} 2.99 & 3.00 \\end{pmatrix}}$$", "id": "2199495"}]}