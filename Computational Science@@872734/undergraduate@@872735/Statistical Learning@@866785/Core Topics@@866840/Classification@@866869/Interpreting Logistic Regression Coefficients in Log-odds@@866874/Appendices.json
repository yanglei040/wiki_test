{"hands_on_practices": [{"introduction": "The linear relationship between a predictor and the log-odds is the cornerstone of logistic regression. This exercise makes this abstract concept tangible by asking a practical question: how much do we need to change a predictor to achieve a specific outcome, like doubling the odds of success? By working through this problem [@problem_id:3133350], you will directly connect the coefficient's value, $\\beta_1$, to a meaningful, real-world change, solidifying your understanding of its interpretation.", "problem": "A training program for data entry specialists studies the effect of simulator practice time on the probability that a trainee passes a certification exam on the first attempt. Let $Y \\in \\{0,1\\}$ indicate whether a trainee passes ($Y=1$) or not ($Y=0$), and let $x$ denote the number of hours of simulator practice completed before the exam. A logistic regression model with the log-odds link is fit to historical data and yields a slope coefficient for $x$ equal to $\\beta_{1} = 0.27$ (interpreted as the change in log-odds per additional hour of practice), holding all other covariates fixed.\n\nStarting from the definition of odds as $p/(1-p)$ for a probability $p$, and the definition of the log-odds (logit) link in logistic regression, determine the increase in practice time $\\Delta x$ that is required to double the odds of passing for an otherwise identical trainee who currently practices $x$ hours. Express your final answer in hours. Round your answer to $4$ significant figures.", "solution": "The problem asks for the increase in practice time, denoted as $\\Delta x$, that would result in a doubling of the odds of passing a certification exam. The relationship between practice time and the probability of passing is modeled using logistic regression.\n\nFirst, we must formally define the components of the logistic regression model as given. The probability of passing for a given set of predictors is denoted by $p$. The odds of passing are defined as the ratio of the probability of passing to the probability of not passing:\n$$ \\text{odds} = \\frac{p}{1-p} $$\nThe logistic regression model relates the natural logarithm of the odds (the log-odds or logit) to a linear combination of the predictor variables. Let $x$ be the hours of simulator practice and let other covariates be represented by $x_2, x_3, \\dots, x_k$. The model equation is:\n$$ \\ln\\left(\\frac{p}{1-p}\\right) = \\beta_0 + \\beta_1 x + \\sum_{j=2}^{k} \\beta_j x_j $$\nHere, $\\beta_1$ is the coefficient for practice time $x$, and its given value is $\\beta_1 = 0.27$. The interpretation of $\\beta_1$ is that for a one-unit increase in $x$, the log-odds of passing increase by $\\beta_1$, holding all other variables constant.\n\nLet us consider two scenarios for an otherwise identical trainee. \"Otherwise identical\" implies that all other covariates ($x_2, \\dots, x_k$) are held constant.\n\nScenario 1: The trainee practices for $x$ hours. The log-odds of passing are given by:\n$$ \\ln(\\text{odds}_1) = \\beta_0 + \\beta_1 x + \\sum_{j=2}^{k} \\beta_j x_j $$\n\nScenario 2: The trainee practices for an increased duration of $x + \\Delta x$ hours. The log-odds of passing in this case are:\n$$ \\ln(\\text{odds}_2) = \\beta_0 + \\beta_1 (x + \\Delta x) + \\sum_{j=2}^{k} \\beta_j x_j $$\n\nWe are interested in the change in log-odds between these two scenarios. By subtracting the equation for Scenario 1 from the equation for Scenario 2, we can isolate the effect of the additional practice time $\\Delta x$:\n$$ \\ln(\\text{odds}_2) - \\ln(\\text{odds}_1) = \\left(\\beta_0 + \\beta_1 (x + \\Delta x) + \\sum_{j=2}^{k} \\beta_j x_j\\right) - \\left(\\beta_0 + \\beta_1 x + \\sum_{j=2}^{k} \\beta_j x_j\\right) $$\nThe intercept $\\beta_0$, the term for the initial practice time $\\beta_1 x$, and the sum representing other covariates all cancel out, leaving:\n$$ \\ln(\\text{odds}_2) - \\ln(\\text{odds}_1) = \\beta_1 (x + \\Delta x) - \\beta_1 x = \\beta_1 \\Delta x $$\nUsing the property of logarithms, $\\ln(a) - \\ln(b) = \\ln(a/b)$, we can rewrite the left side of the equation as:\n$$ \\ln\\left(\\frac{\\text{odds}_2}{\\text{odds}_1}\\right) = \\beta_1 \\Delta x $$\nThis equation shows that the log of the odds ratio is directly proportional to the change in the predictor variable, $\\Delta x$, with the coefficient $\\beta_1$ as the constant of proportionality.\n\nThe problem requires us to find the specific $\\Delta x$ that doubles the odds. This condition is expressed as:\n$$ \\text{odds}_2 = 2 \\times \\text{odds}_1 $$\nThis implies that the ratio of the odds is:\n$$ \\frac{\\text{odds}_2}{\\text{odds}_1} = 2 $$\nSubstituting this value into our derived equation:\n$$ \\ln(2) = \\beta_1 \\Delta x $$\nWe can now solve for $\\Delta x$:\n$$ \\Delta x = \\frac{\\ln(2)}{\\beta_1} $$\nThe problem provides the value of the slope coefficient as $\\beta_1 = 0.27$. Substituting this value into the equation for $\\Delta x$:\n$$ \\Delta x = \\frac{\\ln(2)}{0.27} $$\nUsing the value of the natural logarithm of $2$, $\\ln(2) \\approx 0.69314718$:\n$$ \\Delta x \\approx \\frac{0.69314718}{0.27} \\approx 2.56721178 \\text{ hours} $$\nThe problem asks for the answer to be rounded to $4$ significant figures. Rounding the calculated value gives:\n$$ \\Delta x \\approx 2.567 \\text{ hours} $$\nTherefore, an increase of approximately $2.567$ hours in simulator practice time is required to double the odds of a trainee passing the certification exam, holding all other factors constant.", "answer": "$$\\boxed{2.567}$$", "id": "3133350"}, {"introduction": "A common pitfall is assuming that a constant effect on the log-odds scale translates to a constant effect on the probability scale. This practice [@problem_id:3133329] directly confronts this misconception. You will explore how the same improvement in log-odds, represented by a constant increment $\\delta$, produces different changes in probability for a low-risk versus a high-risk group, highlighting the crucial non-linear nature of the logistic function.", "problem": "A binary outcome is modeled with logistic regression, where a one-unit increase in a predictor adds a constant increment $\\delta$ to the log-odds (logit) of the event. Consider two populations with different baseline event probabilities: a low-risk group with baseline probability $p_{L}=\\frac{1}{10}$ and a high-risk group with baseline probability $p_{H}=\\frac{4}{5}$. Suppose the predictor increases by one unit and the corresponding increment in log-odds is $\\delta=\\ln(2)$. Using only the definitions of odds $o=\\frac{p}{1-p}$ and the logit function $\\text{logit}(p)=\\ln\\!\\left(\\frac{p}{1-p}\\right)$ as your starting point, derive the post-increment probability $p'$ as a function of the baseline probability $p$ and $\\delta$, then compute the probability changes $p_{L}'-p_{L}$ and $p_{H}'-p_{H}$. Report the single number\n$$\\Delta=\\big(p_{H}'-p_{H}\\big)-\\big(p_{L}'-p_{L}\\big)$$\nas an exact value. Do not round your answer.", "solution": "The first step is to derive an expression for the post-increment probability, which we denote as $p'$, as a function of the baseline probability $p$ and the increment in log-odds $\\delta$. The log-odds, or logit, of the baseline probability $p$ is defined as:\n$$\n\\text{logit}(p) = \\ln\\left(\\frac{p}{1-p}\\right)\n$$\nA one-unit increase in a predictor variable results in the log-odds increasing by a constant amount $\\delta$. The new log-odds, $\\text{logit}(p')$, is therefore:\n$$\n\\text{logit}(p') = \\text{logit}(p) + \\delta = \\ln\\left(\\frac{p}{1-p}\\right) + \\delta\n$$\nTo find the new probability $p'$, we first need to find the new odds, $o'$. The odds are obtained by exponentiating the log-odds:\n$$\no' = \\exp(\\text{logit}(p')) = \\exp\\left(\\ln\\left(\\frac{p}{1-p}\\right) + \\delta\\right)\n$$\nUsing the property of exponents $\\exp(a+b) = \\exp(a)\\exp(b)$, we can separate the terms:\n$$\no' = \\exp\\left(\\ln\\left(\\frac{p}{1-p}\\right)\\right) \\cdot \\exp(\\delta) = \\left(\\frac{p}{1-p}\\right) \\exp(\\delta)\n$$\nThe relationship between probability and odds is $p = \\frac{o}{1+o}$. Therefore, the new probability $p'$ can be expressed in terms of the new odds $o'$ as:\n$$\np' = \\frac{o'}{1+o'}\n$$\nSubstituting the expression for $o'$:\n$$\np' = \\frac{\\left(\\frac{p}{1-p}\\right) \\exp(\\delta)}{1 + \\left(\\frac{p}{1-p}\\right) \\exp(\\delta)}\n$$\nTo simplify this expression, we multiply the numerator and the denominator by $(1-p)$:\n$$\np' = \\frac{p \\exp(\\delta)}{(1-p) + p \\exp(\\delta)}\n$$\nThis is the required general formula for the post-increment probability $p'$ as a function of $p$ and $\\delta$.\n\nNext, we substitute the given value for the log-odds increment, $\\delta = \\ln(2)$. This implies that $\\exp(\\delta) = \\exp(\\ln(2)) = 2$. The formula for $p'$ simplifies to:\n$$\np' = \\frac{2p}{1-p+2p} = \\frac{2p}{1+p}\n$$\nNow, we apply this formula to the two specified populations.\n\nFor the low-risk group, the baseline probability is $p_{L} = \\frac{1}{10}$. The post-increment probability $p_{L}'$ is:\n$$\np_{L}' = \\frac{2 p_{L}}{1+p_{L}} = \\frac{2\\left(\\frac{1}{10}\\right)}{1+\\frac{1}{10}} = \\frac{\\frac{2}{10}}{\\frac{11}{10}} = \\frac{2}{11}\n$$\nThe change in probability for the low-risk group is:\n$$\np_{L}' - p_{L} = \\frac{2}{11} - \\frac{1}{10} = \\frac{2 \\cdot 10 - 1 \\cdot 11}{110} = \\frac{20-11}{110} = \\frac{9}{110}\n$$\n\nFor the high-risk group, the baseline probability is $p_{H} = \\frac{4}{5}$. The post-increment probability $p_{H}'$ is:\n$$\np_{H}' = \\frac{2 p_{H}}{1+p_{H}} = \\frac{2\\left(\\frac{4}{5}\\right)}{1+\\frac{4}{5}} = \\frac{\\frac{8}{5}}{\\frac{9}{5}} = \\frac{8}{9}\n$$\nThe change in probability for the high-risk group is:\n$$\np_{H}' - p_{H} = \\frac{8}{9} - \\frac{4}{5} = \\frac{8 \\cdot 5 - 4 \\cdot 9}{45} = \\frac{40-36}{45} = \\frac{4}{45}\n$$\n\nFinally, we compute the quantity $\\Delta$, which is the difference between these two probability changes:\n$$\n\\Delta = (p_{H}' - p_{H}) - (p_{L}' - p_{L}) = \\frac{4}{45} - \\frac{9}{110}\n$$\nTo subtract these fractions, we find a common denominator. The least common multiple of $45$ and $110$ is $990$.\n$45 = 5 \\times 9$\n$110 = 10 \\times 11 = 2 \\times 5 \\times 11$\n$\\text{lcm}(45, 110) = 2 \\times 5 \\times 9 \\times 11 = 990$.\nWe rewrite the fractions with the common denominator:\n$$\n\\Delta = \\frac{4 \\cdot (990/45)}{990} - \\frac{9 \\cdot (990/110)}{990} = \\frac{4 \\cdot 22}{990} - \\frac{9 \\cdot 9}{990} = \\frac{88}{990} - \\frac{81}{990}\n$$\n$$\n\\Delta = \\frac{88 - 81}{990} = \\frac{7}{990}\n$$\nThis result demonstrates that a constant increment in the log-odds corresponds to a non-constant increment in probability, with the magnitude of the probability change depending on the baseline probability.", "answer": "$$\\boxed{\\frac{7}{990}}$$", "id": "3133329"}, {"introduction": "The true power of a regression model lies in its ability to compare different scenarios, such as the risk profiles of two different individuals. This hands-on problem [@problem_id:3133360] guides you through calculating the relative risk, expressed as an odds ratio, between two patients with multiple differing characteristics. This practice demonstrates a key application of logistic regression in risk stratification by showing how to synthesize the effects of several predictors into a single, interpretable comparison.", "problem": "A hospital uses a logistic regression model to estimate the probability $p(\\mathbf{x})$ that a patient will experience a major cardiovascular event within $10$ years. The model uses the logit link, so that $\\ln\\!\\big(\\frac{p(\\mathbf{x})}{1-p(\\mathbf{x})}\\big)$ is a linear function of features. Specifically, for a patient with features $\\mathbf{x}=(x_{\\mathrm{age}},x_{\\mathrm{LDL}},x_{\\mathrm{smoke}})$, the model is\n$\\ln\\!\\big(\\frac{p(\\mathbf{x})}{1-p(\\mathbf{x})}\\big)=\\beta_{0}+\\beta_{\\mathrm{age}}\\,x_{\\mathrm{age}}+\\beta_{\\mathrm{LDL}}\\,x_{\\mathrm{LDL}}+\\beta_{\\mathrm{smoke}}\\,x_{\\mathrm{smoke}}$,\nwhere $x_{\\mathrm{age}}=(\\text{age in years}-40)/10$, $x_{\\mathrm{LDL}}=(\\text{low-density lipoprotein cholesterol in mmol/L}-3)$, and $x_{\\mathrm{smoke}}$ equals $1$ if the patient is a current smoker and $0$ otherwise. The estimated coefficients are $\\beta_{0}=-3.2$, $\\beta_{\\mathrm{age}}=0.55$, $\\beta_{\\mathrm{LDL}}=0.25$, and $\\beta_{\\mathrm{smoke}}=1.10$.\n\nConsider two patients with feature values:\n- Patient A: age $62$ years, LDL $4.2$ mmol/L, current smoker ($x_{\\mathrm{smoke}}=1$).\n- Patient B: age $54$ years, LDL $2.8$ mmol/L, not a current smoker ($x_{\\mathrm{smoke}}=0$).\n\nUsing only the definitions of the logit link and odds, first derive the expression for the difference in log-odds $\\ln\\!\\big(\\frac{p(\\mathbf{x}_A)}{1-p(\\mathbf{x}_A)}\\big)-\\ln\\!\\big(\\frac{p(\\mathbf{x}_B)}{1-p(\\mathbf{x}_B)}\\big)$ in terms of the model coefficients and the feature differences. Then compute the odds ratio for Patient A relative to Patient B, defined as $\\frac{p(\\mathbf{x}_A)/(1-p(\\mathbf{x}_A))}{p(\\mathbf{x}_B)/(1-p(\\mathbf{x}_B))}$. Report the odds ratio as a single real number, rounded to four significant figures. This odds ratio is the quantity the hospital uses for pairwise risk stratification.", "solution": "The problem asks for the odds ratio for Patient A relative to Patient B. This is a measure of how much greater the odds of a cardiovascular event are for Patient A compared to Patient B.\n\nFirst, let's define the log-odds for a patient with features $\\mathbf{x}=(x_{\\mathrm{age}}, x_{\\mathrm{LDL}}, x_{\\mathrm{smoke}})$ as $L(\\mathbf{x})$. The model is given by:\n$$ L(\\mathbf{x}) = \\ln\\left(\\frac{p(\\mathbf{x})}{1-p(\\mathbf{x})}\\right) = \\beta_{0}+\\beta_{\\mathrm{age}}\\,x_{\\mathrm{age}}+\\beta_{\\mathrm{LDL}}\\,x_{\\mathrm{LDL}}+\\beta_{\\mathrm{smoke}}\\,x_{\\mathrm{smoke}} $$\nThe log-odds for Patient A, $L(\\mathbf{x}_A)$, and Patient B, $L(\\mathbf{x}_B)$, are:\n$$ L(\\mathbf{x}_A) = \\beta_{0}+\\beta_{\\mathrm{age}}\\,x_{\\mathrm{age},A}+\\beta_{\\mathrm{LDL}}\\,x_{\\mathrm{LDL},A}+\\beta_{\\mathrm{smoke}}\\,x_{\\mathrm{smoke},A} $$\n$$ L(\\mathbf{x}_B) = \\beta_{0}+\\beta_{\\mathrm{age}}\\,x_{\\mathrm{age},B}+\\beta_{\\mathrm{LDL}}\\,x_{\\mathrm{LDL},B}+\\beta_{\\mathrm{smoke}}\\,x_{\\mathrm{smoke},B} $$\nThe difference in log-odds is found by subtracting $L(\\mathbf{x}_B)$ from $L(\\mathbf{x}_A)$:\n$$ L(\\mathbf{x}_A) - L(\\mathbf{x}_B) = (\\beta_{0}+\\beta_{\\mathrm{age}}\\,x_{\\mathrm{age},A}+\\dots) - (\\beta_{0}+\\beta_{\\mathrm{age}}\\,x_{\\mathrm{age},B}+\\dots) $$\n$$ L(\\mathbf{x}_A) - L(\\mathbf{x}_B) = \\beta_{\\mathrm{age}}(x_{\\mathrm{age},A} - x_{\\mathrm{age},B}) + \\beta_{\\mathrm{LDL}}(x_{\\mathrm{LDL},A} - x_{\\mathrm{LDL},B}) + \\beta_{\\mathrm{smoke}}(x_{\\mathrm{smoke},A} - x_{\\mathrm{smoke},B}) $$\nThis expression shows the difference in log-odds based on the differences in the patients' features.\n\nThe odds ratio (OR) is defined as the ratio of the odds for Patient A to the odds for Patient B:\n$$ \\text{OR} = \\frac{\\text{odds}_A}{\\text{odds}_B} = \\frac{p(\\mathbf{x}_A)/(1-p(\\mathbf{x}_A))}{p(\\mathbf{x}_B)/(1-p(\\mathbf{x}_B))} $$\nUsing the property of logarithms, the difference in log-odds can be written as $\\ln(\\text{odds}_A) - \\ln(\\text{odds}_B) = \\ln(\\text{odds}_A / \\text{odds}_B) = \\ln(\\text{OR})$. Therefore, the odds ratio is the exponential of the difference in log-odds:\n$$ \\text{OR} = \\exp(L(\\mathbf{x}_A) - L(\\mathbf{x}_B)) $$\nNext, we calculate the feature values for each patient based on the given formulas:\n$x_{\\mathrm{age}}=(\\text{age in years}-40)/10$, $x_{\\mathrm{LDL}}=(\\text{low-density lipoprotein cholesterol in mmol/L}-3)$.\n\nFor Patient A (age 62, LDL 4.2, smoker):\n- $x_{\\mathrm{age},A} = (62-40)/10 = 2.2$\n- $x_{\\mathrm{LDL},A} = 4.2 - 3 = 1.2$\n- $x_{\\mathrm{smoke},A} = 1$\n\nFor Patient B (age 54, LDL 2.8, non-smoker):\n- $x_{\\mathrm{age},B} = (54-40)/10 = 1.4$\n- $x_{\\mathrm{LDL},B} = 2.8 - 3 = -0.2$\n- $x_{\\mathrm{smoke},B} = 0$\n\nNow, we compute the feature differences:\n- $\\Delta x_{\\mathrm{age}} = x_{\\mathrm{age},A} - x_{\\mathrm{age},B} = 2.2 - 1.4 = 0.8$\n- $\\Delta x_{\\mathrm{LDL}} = x_{\\mathrm{LDL},A} - x_{\\mathrm{LDL},B} = 1.2 - (-0.2) = 1.4$\n- $\\Delta x_{\\mathrm{smoke}} = x_{\\mathrm{smoke},A} - x_{\\mathrm{smoke},B} = 1 - 0 = 1$\n\nWe substitute these differences and the given coefficients ($\\beta_{\\mathrm{age}}=0.55$, $\\beta_{\\mathrm{LDL}}=0.25$, $\\beta_{\\mathrm{smoke}}=1.10$) into the log-odds difference equation:\n$$ L(\\mathbf{x}_A) - L(\\mathbf{x}_B) = (0.55)(0.8) + (0.25)(1.4) + (1.10)(1) $$\n$$ L(\\mathbf{x}_A) - L(\\mathbf{x}_B) = 0.44 + 0.35 + 1.10 = 1.89 $$\nFinally, we calculate the odds ratio by exponentiating this value:\n$$ \\text{OR} = \\exp(1.89) \\approx 6.619332 $$\nRounding the result to four significant figures, we get:\n$$ \\text{OR} \\approx 6.619 $$\nThis means the odds of a major cardiovascular event for Patient A are approximately 6.619 times the odds for Patient B.", "answer": "$$\\boxed{6.619}$$", "id": "3133360"}]}