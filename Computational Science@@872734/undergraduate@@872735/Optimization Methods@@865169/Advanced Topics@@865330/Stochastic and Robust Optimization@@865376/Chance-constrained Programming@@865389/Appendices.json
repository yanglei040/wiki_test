{"hands_on_practices": [{"introduction": "Our first practice exercise grounds us in a common scenario: handling uncertainty in resource availability. This problem shows how to translate a probabilistic constraint, where a resource limit follows a normal distribution, into a standard deterministic linear constraint. Mastering this conversion is the first step toward building robust optimization models that account for real-world variability [@problem_id:2177257].", "problem": "A cutting-edge Quantum Software-as-a-Service (SaaS) company offers computational time on its quantum processors to external clients. The company runs two main types of hybrid quantum-classical jobs for its clients: Variational Quantum Eigensolver (VQE) jobs and Quantum Approximate Optimization Algorithm (QAOA) jobs. The head of operations needs to determine the optimal number of each type of job to run per day to maximize revenue, subject to several resource limitations.\n\nLet $x_1$ be the number of VQE jobs and $x_2$ be the number of QAOA jobs scheduled per day. The company's revenue is given by the objective function $Z = 10000x_1 + 4000x_2$, measured in dollars.\n\nThe scheduling is subject to the following constraints:\n1.  **Qubit-Hour Capacity:** The company's quantum processor has a firm, deterministic daily capacity of 180 total qubit-hours. Each VQE job requires 1 qubit-hour, and each QAOA job requires 2 qubit-hours.\n2.  **Classical CPU Constraint:** Both algorithms require a classical optimization loop that runs on a shared high-performance computing cluster. The total available Central Processing Unit (CPU) time, $B_C$, is stochastic due to unpredictable demand from other internal processes. Its availability is modeled by a normal distribution with a mean of $\\mu_C = 183$ core-hours and a standard deviation of $\\sigma_C = 20$ core-hours. Each VQE job requires 2 core-hours and each QAOA job requires 3 core-hours. The operations team requires that the scheduled jobs can be completed with a probability of at least 95%.\n3.  **Control System Constraint:** The jobs also rely on a specialized Field-Programmable Gate Array (FPGA) for qubit control, whose available processing time, $B_S$, is also stochastic. It follows a normal distribution with a mean of $\\mu_S = 279$ time-units and a standard deviation of $\\sigma_S = 25$ time-units. Each VQE job consumes 4 time-units, and each QAOA job consumes 1 time-unit. The team mandates that this resource constraint is met with a probability of at least 97.5%.\n\nFor your calculations, you may use the fact that for a standard normal random variable $Z \\sim N(0, 1)$, its $\\alpha$-quantile $z_\\alpha$ is the value such that $P(Z \\le z_\\alpha) = \\alpha$. The necessary quantiles are $z_{0.05} = -1.65$ and $z_{0.025} = -1.96$.\n\nAssuming that $x_1$ and $x_2$ can be non-integer values (representing partially completed or batched jobs), determine the maximum possible daily revenue. Express your answer in dollars.", "solution": "We maximize the linear revenue function $Z = 10000 x_{1} + 4000 x_{2}$ subject to deterministic and chance constraints.\n\nThe deterministic qubit-hour capacity is $x_{1} + 2 x_{2} \\leq 180$.\n\nFor the CPU chance constraint, let $L_{C} = 2 x_{1} + 3 x_{2}$ be the required core-hours and $B_{C} \\sim N(\\mu_{C}, \\sigma_{C}^{2})$ with $\\mu_{C} = 183$ and $\\sigma_{C} = 20$ be the available core-hours. The requirement is $P(L_{C} \\le B_{C}) \\geq 0.95$. This is equivalent to $P(B_{C} \\le L_{C}) \\le 0.05$. Standardizing with $Z \\sim N(0,1)$ gives\n$$\nP\\!\\left(Z \\leq \\frac{L_{C} - \\mu_{C}}{\\sigma_{C}}\\right) \\leq 0.05 \\quad \\Longrightarrow \\quad \\frac{L_{C} - \\mu_{C}}{\\sigma_{C}} \\leq z_{0.05}.\n$$\nHence $L_{C} \\leq \\mu_{C} + \\sigma_{C} z_{0.05}$. Using $z_{0.05} = -1.65$,\n$$\n2 x_{1} + 3 x_{2} \\leq 183 + 20(-1.65) = 150.\n$$\n\nFor the FPGA chance constraint, let $L_{S} = 4 x_{1} + x_{2}$ and $B_{S} \\sim N(\\mu_{S}, \\sigma_{S}^{2})$ with $\\mu_{S} = 279$ and $\\sigma_{S} = 25$. The requirement is $P(L_{S} \\le B_{S}) \\geq 0.975$, i.e., $P(B_{S} \\le L_{S}) \\leq 0.025$. Standardizing yields\n$$\n\\frac{L_{S} - \\mu_{S}}{\\sigma_{S}} \\leq z_{0.025},\n$$\nso $L_{S} \\leq \\mu_{S} + \\sigma_{S} z_{0.025}$. Using $z_{0.025} = -1.96$,\n$$\n4 x_{1} + x_{2} \\leq 279 + 25(-1.96) = 230.\n$$\n\nThe full linear program is\n$$\n\\text{maximize } Z = 10000 x_{1} + 4000 x_{2}\n$$\nsubject to\n$$\nx_{1} + 2 x_{2} \\leq 180,\\quad 2 x_{1} + 3 x_{2} \\leq 150,\\quad 4 x_{1} + x_{2} \\leq 230,\\quad x_{1} \\geq 0,\\ x_{2} \\geq 0.\n$$\n\nWe find candidate optimal vertices by intersecting binding constraints:\n1) Intersection of $2 x_{1} + 3 x_{2} = 150$ and $4 x_{1} + x_{2} = 230$:\nFrom $4 x_{1} + x_{2} = 230$, $x_{2} = 230 - 4 x_{1}$. Substitute into $2 x_{1} + 3 x_{2} = 150$:\n$$\n2 x_{1} + 3(230 - 4 x_{1}) = 150 \\Longrightarrow 2 x_{1} + 690 - 12 x_{1} = 150 \\Longrightarrow -10 x_{1} = -540 \\Longrightarrow x_{1} = 54.\n$$\nThen $x_{2} = 230 - 4 \\cdot 54 = 14$. This point satisfies $x_{1} + 2 x_{2} = 54 + 28 = 82 \\leq 180$.\n\n2) Intersection of $2 x_{1} + 3 x_{2} = 150$ with axes: $(x_{1}, x_{2}) = (0,50)$ and $(75,0)$. The point $(75,0)$ violates $4 x_{1} + x_{2} \\leq 230$ since $300  230$, so it is infeasible. The point $(0,50)$ is feasible.\n\n3) Intersection of $4 x_{1} + x_{2} = 230$ with axes: $(x_{1}, x_{2}) = (57.5,0)$ and $(0,230)$. The point $(0,230)$ violates $2 x_{1} + 3 x_{2} \\leq 150$ since $690  150$, so it is infeasible. The point $(57.5,0)$ is feasible.\n\nThe remaining bounds and the constraint $x_{1} + 2 x_{2} \\leq 180$ are nonbinding at these candidates. Evaluate the objective:\n- At $(54,14)$: $Z = 10000 \\cdot 54 + 4000 \\cdot 14 = 540000 + 56000 = 596000$.\n- At $(57.5,0)$: $Z = 10000 \\cdot 57.5 = 575000$.\n- At $(0,50)$: $Z = 4000 \\cdot 50 = 200000$.\n- At $(0,0)$: $Z = 0$.\n\nTherefore, the maximum revenue occurs at $(x_{1}, x_{2}) = (54, 14)$ with $Z = 596000$ dollars.", "answer": "$$\\boxed{596000}$$", "id": "2177257"}, {"introduction": "Having learned to handle normally distributed uncertainty, we now turn our attention to discrete random events. This problem models a scenario where outcomes are discrete, following a binomial distribution, requiring us to work directly with probability mass functions to find an exact solution. By comparing this exact result with a normal approximation based on the Central Limit Theorem, we gain valuable insight into the trade-offs between precision and computational convenience [@problem_id:3107905].", "problem": "A planner must set a one-day carbon dioxide (CO$_2$) emissions cap for a portfolio of $N=25$ identical units. For unit $i$, the emissions factor per unit of output is uncertain: with probability $p=0.2$ it is in a high-emission state with $e_H=2.0$ tCO$_2$ per unit, and with probability $1-p=0.8$ it is in a low-emission state with $e_L=1.2$ tCO$_2$ per unit. States are independent across units. The decision vector is $x \\in \\mathbb{R}^{25}$ with components $x_i=1$ for all $i$, so that total emissions are the random sum $e(\\xi)^{\\top}x=\\sum_{i=1}^{25} e_i(\\xi)$. The planner imposes the chance constraint\n$$\n\\mathbb{P}\\!\\left(e(\\xi)^{\\top}x \\le E\\right) \\ge 1-\\alpha,\n$$\nwith reliability level $1-\\alpha=0.95$ for the cap $E$.\n\nStarting from basic probability definitions and distributional facts, do the following:\n1) Derive the exact minimal cap $E_{\\text{exact}}$ that satisfies the chance constraint by working with the exact distribution of the number of high-emission units.\n2) Use the Central Limit Theorem (CLT) normal approximation for the binomial distribution, without continuity correction, to obtain an approximate cap $E_{\\text{norm}}$ at the same reliability level. You may use the standard normal quantile $z_{0.95}$ defined by $\\Phi(z_{0.95})=0.95$, where $\\Phi(\\cdot)$ is the cumulative distribution function of the standard normal distribution.\n3) Compute the numerical difference\n$$\n\\Delta \\;=\\; E_{\\text{norm}} - E_{\\text{exact}}.\n$$\n\nRound your final numeric answer for $\\Delta$ to four significant figures. Express the result in metric tons of carbon dioxide (tCO$_2$). Report only the number for your final answer; do not include units in the final answer box.", "solution": "The total emissions, $S = e(\\xi)^{\\top}x$, depend on the number of units in the high-emission state. Let $K$ be the random variable representing the number of units in the high-emission state. Since the $N=25$ units are identical and their states are independent, each with a probability $p=0.2$ of being in the high-emission state, $K$ follows a binomial distribution.\n$$\nK \\sim \\text{Binomial}(n=N, p) = \\text{Binomial}(25, 0.2)\n$$\nThe probability mass function of $K$ is given by $\\mathbb{P}(K=k) = \\binom{25}{k} (0.2)^k (0.8)^{25-k}$ for $k \\in \\{0, 1, \\dots, 25\\}$.\n\nThe total emissions $S$ can be expressed as a function of $K$. With $x_i=1$ for all $i$, there are $K$ units emitting at rate $e_H$ and $N-K$ units emitting at rate $e_L$.\n$$\nS(K) = K \\cdot e_H + (N-K) \\cdot e_L = K(e_H - e_L) + N e_L\n$$\nSubstituting the given values, $e_H=2.0$, $e_L=1.2$, and $N=25$:\n$$\nS(K) = K(2.0 - 1.2) + 25(1.2) = 0.8K + 30\n$$\nSince $e_H  e_L$, $S(K)$ is a strictly increasing function of $K$.\n\nThe chance constraint is $\\mathbb{P}(S \\le E) \\ge 1-\\alpha$, with $1-\\alpha = 0.95$. Substituting the expression for $S$:\n$$\n\\mathbb{P}(0.8K + 30 \\le E) \\ge 0.95 \\implies \\mathbb{P}\\left(K \\le \\frac{E-30}{0.8}\\right) \\ge 0.95\n$$\n\n**1) Derivation of the exact minimal cap $E_{\\text{exact}}$**\n\nTo find the minimum cap $E_{\\text{exact}}$ that satisfies the constraint, we need to find the smallest integer $k_{\\text{crit}}$ such that the cumulative distribution function (CDF) of $K$, $F_K(k) = \\mathbb{P}(K \\le k)$, meets or exceeds the reliability level $1-\\alpha=0.95$.\n$$\nk_{\\text{crit}} = \\min \\{ k \\in \\mathbb{Z}_{\\ge 0} \\mid \\mathbb{P}(K \\le k) \\ge 0.95 \\}\n$$\nWe compute the cumulative probabilities for $K \\sim \\text{Binomial}(25, 0.2)$:\n$F_K(k) = \\sum_{j=0}^{k} \\binom{25}{j} (0.2)^j (0.8)^{25-j}$.\n- $\\mathbb{P}(K \\le 7) = \\sum_{j=0}^{7} \\binom{25}{j} (0.2)^j (0.8)^{25-j} \\approx 0.89087  0.95$\n- $\\mathbb{P}(K \\le 8) = \\sum_{j=0}^{8} \\binom{25}{j} (0.2)^j (0.8)^{25-j} \\approx 0.95321 \\ge 0.95$\n\nThe smallest integer is $k_{\\text{crit}}=8$. The constraint $\\mathbb{P}(K \\le (E-30)/0.8) \\ge 0.95$ is satisfied if $(E-30)/0.8 \\ge k_{\\text{crit}}$. To find the minimal cap, we set $(E_{\\text{exact}}-30)/0.8 = k_{\\text{crit}}$.\n$$\nE_{\\text{exact}} - 30 = 0.8 \\cdot k_{\\text{crit}} \\implies E_{\\text{exact}} = 0.8 \\cdot 8 + 30 = 6.4 + 30 = 36.4\n$$\nSo, the exact minimal cap is $E_{\\text{exact}} = 36.4$ tCO$_2$.\n\n**2) Derivation of the approximate cap $E_{\\text{norm}}$**\n\nWe use the Central Limit Theorem to approximate the distribution of the total emissions $S = \\sum_{i=1}^{N} e_i$. This sum consists of $N=25$ independent and identically distributed random variables $e_i$. The emission $e_i$ of a single unit has the following distribution:\n$$\ne_i = \\begin{cases} e_H = 2.0  \\text{with probability } p=0.2 \\\\ e_L = 1.2  \\text{with probability } 1-p=0.8 \\end{cases}\n$$\nThe mean of $e_i$ is:\n$$\n\\mu_e = \\mathbb{E}[e_i] = p \\cdot e_H + (1-p) \\cdot e_L = 0.2(2.0) + 0.8(1.2) = 0.4 + 0.96 = 1.36\n$$\nThe variance of $e_i$ is $\\sigma_e^2 = \\mathbb{E}[e_i^2] - (\\mathbb{E}[e_i])^2$:\n$$\n\\mathbb{E}[e_i^2] = p \\cdot e_H^2 + (1-p) \\cdot e_L^2 = 0.2(2.0^2) + 0.8(1.2^2) = 0.2(4) + 0.8(1.44) = 0.8 + 1.152 = 1.952\n$$\n$$\n\\sigma_e^2 = 1.952 - (1.36)^2 = 1.952 - 1.8496 = 0.1024\n$$\nBy the CLT, the sum $S = \\sum_{i=1}^{25} e_i$ is approximately normally distributed with mean $\\mu_S = N\\mu_e$ and variance $\\sigma_S^2 = N\\sigma_e^2$.\n$$\n\\mu_S = 25 \\times 1.36 = 34\n$$\n$$\n\\sigma_S^2 = 25 \\times 0.1024 = 2.56 \\implies \\sigma_S = \\sqrt{2.56} = 1.6\n$$\nThus, $S \\approx \\mathcal{N}(\\mu_S=34, \\sigma_S^2=2.56)$. The chance constraint is approximated as:\n$$\n\\mathbb{P}(S \\le E) \\ge 0.95\n$$\nTo find the minimal cap $E_{\\text{norm}}$, we treat the inequality as an equality based on the continuous normal approximation:\n$$\n\\mathbb{P}(S \\le E_{\\text{norm}}) = 0.95\n$$\nStandardizing the normal variable:\n$$\n\\mathbb{P}\\left(\\frac{S - \\mu_S}{\\sigma_S} \\le \\frac{E_{\\text{norm}} - \\mu_S}{\\sigma_S}\\right) = 0.95\n$$\nLet $Z = (S-\\mu_S)/\\sigma_S \\sim \\mathcal{N}(0,1)$. The equation becomes $\\Phi\\left(\\frac{E_{\\text{norm}} - \\mu_S}{\\sigma_S}\\right) = 0.95$, where $\\Phi$ is the CDF of the standard normal distribution. This implies:\n$$\n\\frac{E_{\\text{norm}} - \\mu_S}{\\sigma_S} = z_{0.95}\n$$\nSolving for $E_{\\text{norm}}$:\n$$\nE_{\\text{norm}} = \\mu_S + z_{0.95} \\cdot \\sigma_S = 34 + z_{0.95} \\cdot (1.6)\n$$\n\n**3) Computation of the difference $\\Delta$**\n\nWe now compute the difference $\\Delta = E_{\\text{norm}} - E_{\\text{exact}}$.\n$$\n\\Delta = (34 + 1.6 z_{0.95}) - 36.4 = 1.6 z_{0.95} - 2.4\n$$\nThe standard value for the $95^{\\text{th}}$ percentile of the standard normal distribution is $z_{0.95} \\approx 1.6448536$.\n$$\n\\Delta \\approx 1.6 \\times 1.6448536 - 2.4 = 2.63176576 - 2.4 = 0.23176576\n$$\nRounding the result to four significant figures:\n$$\n\\Delta \\approx 0.2318\n$$\nThe value is in metric tons of carbon dioxide, tCO$_2$.", "answer": "$$\n\\boxed{0.2318}\n$$", "id": "3107905"}, {"introduction": "Our final exercise is a crucial thought experiment that exposes a common pitfall in stochastic modeling. When dealing with multiple simultaneous chance constraints, a tempting simplification is to aggregate them into a single constraint. This problem constructs a counterexample to demonstrate how this seemingly logical step can fail dramatically, especially when the uncertain parameters are dependent, highlighting the critical importance of respecting the joint nature of probabilistic constraints [@problem_id:3107959].", "problem": "Consider a joint chance-constrained optimization model with $2$ random linear constraints driven by a bivariate random vector $\\boldsymbol{\\xi} = (\\xi_{1}, \\xi_{2})$. The joint chance constraint requires\n$$\n\\mathbb{P}\\left(\\xi_{1} x \\le b_{1},\\ \\xi_{2} x \\le b_{2}\\right) \\ge 1 - \\alpha,\n$$\nwhere $x \\in \\mathbb{R}$ is the decision variable, $b_{1}, b_{2} \\in \\mathbb{R}$ are deterministic bounds, and $\\alpha \\in (0,1)$ is a risk level. A common relaxation aggregates the left-hand sides and imposes a single chance constraint\n$$\n\\mathbb{P}\\left(\\xi_{1} x + \\xi_{2} x \\le b_{1} + b_{2}\\right) \\ge 1 - \\alpha.\n$$\nStarting from the foundational definition that a chance constraint requires the probability of satisfaction of the stated event to be at least $1 - \\alpha$, construct a counterexample that reveals how replacing the joint chance constraint with the aggregated single chance constraint can be misleading when the distribution exhibits tail dependence structure. Use the following scientifically sound setup:\n\n- Let $U \\sim \\mathrm{Unif}(0,1)$ be a scalar random variable with a uniform distribution on $[0,1]$.\n- Define $\\xi_{1} := 2U$ and $\\xi_{2} := 2(1-U)$, so that $(\\xi_{1}, \\xi_{2})$ has perfectly negative tail dependence (extreme values occur in an oppositional pattern).\n- Fix $x := 1$, $b_{1} := 1$, $b_{2} := 1$, and choose any $\\alpha \\in (0,1)$.\n\nUnder this setup:\n1. Compute $\\mathbb{P}\\left(\\xi_{1} + \\xi_{2} \\le 2\\right)$ and $\\mathbb{P}\\left(\\xi_{1} \\le 1,\\ \\xi_{2} \\le 1\\right)$ from first principles.\n2. To quantify the misleading nature of the aggregation, define\n$$\n\\Delta := \\mathbb{P}\\left(\\xi_{1} + \\xi_{2} \\le 2\\right) - \\mathbb{P}\\left(\\xi_{1} \\le 1,\\ \\xi_{2} \\le 1\\right).\n$$\nCompute the exact value of $\\Delta$.\n\nYour final answer must be the single real number equal to $\\Delta$. No rounding is required.", "solution": "The problem requires the computation of a specific quantity, $\\Delta$, which measures the difference in probabilities between a joint chance constraint and its aggregated relaxation, under a specified probabilistic model designed to highlight the pitfalls of such a relaxation. The model is defined by a bivariate random vector $(\\xi_{1}, \\xi_{2})$ whose components are functions of a single underlying uniform random variable $U \\sim \\mathrm{Unif}(0,1)$. The parameters are fixed at $x=1$, $b_{1}=1$, and $b_{2}=1$.\n\nFirst, we must evaluate the probability associated with the aggregated constraint:\n$$ \\mathbb{P}\\left(\\xi_{1} x + \\xi_{2} x \\le b_{1} + b_{2}\\right) $$\nSubstituting the given values $x=1$, $b_{1}=1$, and $b_{2}=1$, the expression becomes:\n$$ \\mathbb{P}\\left(\\xi_{1} + \\xi_{2} \\le 2\\right) $$\nThe random variables $\\xi_{1}$ and $\\xi_{2}$ are defined as:\n$$ \\xi_{1} := 2U $$\n$$ \\xi_{2} := 2(1-U) $$\nWe can compute the sum $\\xi_{1} + \\xi_{2}$ directly by substituting these definitions:\n$$ \\xi_{1} + \\xi_{2} = 2U + 2(1-U) = 2U + 2 - 2U = 2 $$\nThe sum $\\xi_{1} + \\xi_{2}$ is a constant value, $2$, regardless of the outcome of the random variable $U$. The event inside the probability is therefore $\\xi_{1} + \\xi_{2} \\le 2$, which is equivalent to the statement $2 \\le 2$. This is a certain event, one that is always true. The probability of a certain event is, by definition, $1$.\n$$ \\mathbb{P}\\left(\\xi_{1} + \\xi_{2} \\le 2\\right) = 1 $$\n\nSecond, we evaluate the probability of the original joint chance constraint:\n$$ \\mathbb{P}\\left(\\xi_{1} x \\le b_{1}, \\xi_{2} x \\le b_{2}\\right) $$\nSubstituting the same parameter values, we get:\n$$ \\mathbb{P}\\left(\\xi_{1} \\le 1, \\xi_{2} \\le 1\\right) $$\nThis is the probability of the intersection of two events. We must translate these events into conditions on the underlying random variable $U$.\nThe first event, $\\xi_{1} \\le 1$, becomes:\n$$ 2U \\le 1 \\implies U \\le \\frac{1}{2} $$\nThe second event, $\\xi_{2} \\le 1$, becomes:\n$$ 2(1-U) \\le 1 \\implies 1-U \\le \\frac{1}{2} \\implies \\frac{1}{2} \\le U $$\nFor the joint event $(\\xi_{1} \\le 1 \\text{ and } \\xi_{2} \\le 1)$ to occur, both conditions on $U$ must be satisfied simultaneously: $U \\le \\frac{1}{2}$ and $U \\ge \\frac{1}{2}$. The only real number that satisfies both inequalities is $U = \\frac{1}{2}$. Therefore, the joint event is equivalent to the event that $U$ takes the specific value $\\frac{1}{2}$.\n$$ \\mathbb{P}\\left(\\xi_{1} \\le 1, \\xi_{2} \\le 1\\right) = \\mathbb{P}\\left(U = \\frac{1}{2}\\right) $$\nThe random variable $U$ is specified to have a uniform distribution on the interval $[0,1]$, which is a continuous probability distribution. For any continuous random variable, the probability of it taking on any single, precise value is $0$.\n$$ \\mathbb{P}\\left(U = \\frac{1}{2}\\right) = 0 $$\nThus, the probability of satisfying the joint constraint is $0$.\n\nFinally, we compute $\\Delta$, the difference between the two probabilities:\n$$ \\Delta := \\mathbb{P}\\left(\\xi_{1} + \\xi_{2} \\le 2\\right) - \\mathbb{P}\\left(\\xi_{1} \\le 1,\\ \\xi_{2} \\le 1\\right) $$\nSubstituting the values we have calculated:\n$$ \\Delta = 1 - 0 = 1 $$\nThis result quantifies the error introduced by the aggregation. While the aggregated constraint suggests the solution is perfectly safe (probability of satisfaction is $1$), the true joint probability of satisfaction is $0$, meaning the solution is infeasible under the original, more accurate model.", "answer": "$$\\boxed{1}$$", "id": "3107959"}]}