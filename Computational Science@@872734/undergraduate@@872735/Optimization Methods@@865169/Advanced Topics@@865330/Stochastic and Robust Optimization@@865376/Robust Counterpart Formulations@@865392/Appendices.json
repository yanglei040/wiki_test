{"hands_on_practices": [{"introduction": "The cornerstone of robust optimization lies in converting an uncertain problem into a deterministic, solvable one. This first exercise provides practice with this fundamental skill by deriving the robust counterpart for a linear constraint from first principles. You will explore a common scenario where each uncertain coefficient can deviate from its nominal value within a given range, a setup described by an $\\ell_\\infty$-norm uncertainty set, and discover how this leads to a tractable formulation involving an $\\ell_1$-norm penalty term [@problem_id:3173436].", "problem": "Consider a single linear inequality constraint subject to coefficient uncertainty in robust optimization (RO). Let $n \\in \\mathbb{N}$, $x \\in \\mathbb{R}^{n}$ be the decision vector, and $b \\in \\mathbb{R}$ be a given bound. The uncertain coefficient vector $a(\\xi) \\in \\mathbb{R}^{n}$ is multiplicatively perturbed from a nominal baseline $\\bar{a} \\in \\mathbb{R}^{n}$ with componentwise nonnegativity $\\bar{a}_{i} \\ge 0$ for all $i \\in \\{1,\\dots,n\\}$, according to the rule $a(\\xi) = \\bar{a} \\circ (1 + \\xi)$, where $\\circ$ denotes the Hadamard (componentwise) product, and $\\xi \\in \\mathbb{R}^{n}$ is an unknown perturbation vector lying in the closed $\\ell_{\\infty}$-norm ball of radius $\\delta \\in \\mathbb{R}$ with $\\delta \\ge 0$, that is $\\|\\xi\\|_{\\infty} \\le \\delta$. Robust feasibility of the inequality $a(\\xi)^{\\top} x \\le b$ means that it holds for all $\\xi$ in the specified uncertainty set.\n\nStarting from the definition of robust feasibility and the description of the uncertainty set, derive the exact worst-case (largest) value of $a(\\xi)^{\\top} x$ over all $\\xi$ satisfying $\\|\\xi\\|_{\\infty} \\le \\delta$, expressed in closed form in terms of $x$, $\\bar{a}$, and $\\delta$. Your final answer must be a single closed-form analytical expression for $\\sup_{\\|\\xi\\|_{\\infty} \\le \\delta} a(\\xi)^{\\top} x$. No numerical evaluation is required.", "solution": "The problem is to find the supremum of the linear function $a(\\xi)^{\\top} x$ over the uncertainty set for the perturbation vector $\\xi$. The objective is to compute the value of the expression:\n$$\n\\sup_{\\|\\xi\\|_{\\infty} \\le \\delta} a(\\xi)^{\\top} x\n$$\nFirst, we substitute the definition of the uncertain coefficient vector $a(\\xi) = \\bar{a} \\circ (1 + \\xi)$ into the expression. The scalar product $a(\\xi)^{\\top} x$ can be written as a sum over the components:\n$$\na(\\xi)^{\\top} x = \\sum_{i=1}^{n} a_i(\\xi) x_i = \\sum_{i=1}^{n} \\bar{a}_i (1 + \\xi_i) x_i\n$$\nWe expand this sum and separate the terms that depend on $\\xi$ from those that do not:\n$$\n\\sum_{i=1}^{n} \\bar{a}_i (1 + \\xi_i) x_i = \\sum_{i=1}^{n} (\\bar{a}_i x_i + \\bar{a}_i \\xi_i x_i) = \\bar{a}^{\\top} x + \\sum_{i=1}^{n} \\bar{a}_i x_i \\xi_i\n$$\nThe maximization problem can now be rewritten as:\n$$\n\\sup_{\\|\\xi\\|_{\\infty} \\le \\delta} \\left( \\bar{a}^{\\top} x + \\sum_{i=1}^{n} \\bar{a}_i x_i \\xi_i \\right) = \\bar{a}^{\\top} x + \\sup_{\\|\\xi\\|_{\\infty} \\le \\delta} \\left( \\sum_{i=1}^{n} \\bar{a}_i x_i \\xi_i \\right)\n$$\nThe remaining task is to solve the subproblem $\\sup_{\\|\\xi\\|_{\\infty} \\le \\delta} \\sum_{i=1}^{n} \\bar{a}_i x_i \\xi_i$. The uncertainty set $\\|\\xi\\|_{\\infty} \\le \\delta$ is equivalent to the componentwise constraints $|\\xi_i| \\le \\delta$ for all $i$. Since the objective is a sum of decoupled terms, we can maximize each term independently:\n$$\n\\sup_{\\|\\xi\\|_{\\infty} \\le \\delta} \\left( \\sum_{i=1}^{n} \\bar{a}_i x_i \\xi_i \\right) = \\sum_{i=1}^{n} \\sup_{|\\xi_i| \\le \\delta} (\\bar{a}_i x_i \\xi_i)\n$$\nFor each $i$, to maximize the linear function $(\\bar{a}_i x_i) \\xi_i$ over the interval $[-\\delta, \\delta]$, we choose $\\xi_i$ at an endpoint. The maximum value is $|\\bar{a}_i x_i| \\delta$. Since the problem states that $\\bar{a}_i \\ge 0$, we can simplify this to:\n$$\n\\sup_{|\\xi_i| \\le \\delta} (\\bar{a}_i x_i \\xi_i) = |\\bar{a}_i| |x_i| \\delta = \\bar{a}_i |x_i| \\delta\n$$\nSumming these maximized terms over all $i$ gives:\n$$\n\\sum_{i=1}^{n} \\delta \\bar{a}_i |x_i| = \\delta \\sum_{i=1}^{n} \\bar{a}_i |x_i|\n$$\nCombining this with the constant nominal term, we obtain the final expression for the worst-case value:\n$$\n\\sup_{\\|\\xi\\|_{\\infty} \\le \\delta} a(\\xi)^{\\top} x = \\bar{a}^{\\top} x + \\delta \\sum_{i=1}^{n} \\bar{a}_i |x_i|\n$$\nThis is the required analytical expression.", "answer": "$$\n\\boxed{\\bar{a}^{\\top} x + \\delta \\sum_{i=1}^{n} \\bar{a}_i |x_i|}\n$$", "id": "3173436"}, {"introduction": "Theory comes to life when applied to tangible problems. This practice moves from abstract derivation to a concrete application in project management, a field where uncertainty is a constant challenge. You will see how the principle of worst-case optimization is used to make a simple project precedence constraint robust against unforeseen delays in an activity's duration [@problem_id:3173524]. This exercise highlights the intuitive nature of the robust counterpart, which in this case translates to adding a simple safety buffer to the schedule.", "problem": "Consider a single-activity precedence relation in a project schedule, from activity $i$ to activity $j$, modeled by the deterministic constraint $S_{j} \\ge S_{i} + d_{ij}$, where $S_{i}$ and $S_{j}$ denote the planned start times of activities $i$ and $j$, respectively, and $d_{ij}$ is the activity duration along the precedence arc $(i,j)$. In the presence of uncertainty, suppose the true duration is a function $d_{ij}(u)$ of an uncertainty realization $u$, and that the planner only knows $d_{ij}(u)$ lies within the interval $[\\underline{d}_{ij}, \\overline{d}_{ij}]$. The planner uses a nominal duration $d_{ij}^{\\text{nom}}$ in the baseline schedule and seeks a robust counterpart formulation that ensures feasibility for all realizations of $u$ consistent with the interval.\n\nStarting from the foundational definition of robust counterpart formulations in Robust Optimization (RO)—that is, replacing a constraint involving uncertain parameters by its requirement to hold for all realizations in a specified uncertainty set—derive the robust precedence constraint for $S_{j} \\ge S_{i} + d_{ij}(u)$ under interval uncertainty. Show how this results in adding a worst-case slack to the nominal precedence constraint $S_{j} \\ge S_{i} + d_{ij}^{\\text{nom}}$.\n\nAssume the following data for this precedence arc:\n- Nominal duration $d_{ij}^{\\text{nom}} = 6$ days.\n- Interval bounds $\\underline{d}_{ij} = 5$ days and $\\overline{d}_{ij} = 8$ days.\n\nCompute the numerical value of the worst-case slack that must be added to the nominal constraint to obtain the robust counterpart that is guaranteed feasible for all $u$ in the interval. Express your final slack value in days. The final answer must be a single real-valued number. No rounding is required.", "solution": "The core principle of robust optimization is to ensure that a constraint holds for all possible realizations of the uncertain parameters. The original uncertain precedence constraint is:\n$$S_{j} \\ge S_{i} + d_{ij}(u)$$\nwhere the duration $d_{ij}(u)$ is known to lie in the interval $[\\underline{d}_{ij}, \\overline{d}_{ij}]$. To guarantee feasibility for all possible durations, the constraint must hold even for the worst-case (longest) duration. This means we must satisfy:\n$$S_{j} - S_{i} \\ge \\max_{d_{ij}(u) \\in [\\underline{d}_{ij}, \\overline{d}_{ij}]} \\{d_{ij}(u)\\}$$\nThe maximum value that the duration can attain is its upper bound, $\\overline{d}_{ij}$. Therefore, the robust counterpart of the constraint is:\n$$S_{j} \\ge S_{i} + \\overline{d}_{ij}$$\nThe problem asks to express this as the nominal constraint, $S_{j} \\ge S_{i} + d_{ij}^{\\text{nom}}$, plus a worst-case slack. We can rewrite the robust counterpart by adding and subtracting the nominal duration $d_{ij}^{\\text{nom}}$:\n$$S_{j} \\ge S_{i} + d_{ij}^{\\text{nom}} + (\\overline{d}_{ij} - d_{ij}^{\\text{nom}})$$\nThe worst-case slack is the additional time buffer needed to protect against the maximum possible delay beyond the nominal duration. We can identify it as:\n$$\\text{slack} = \\overline{d}_{ij} - d_{ij}^{\\text{nom}}$$\nUsing the provided data, where the nominal duration $d_{ij}^{\\text{nom}} = 6$ days and the upper bound is $\\overline{d}_{ij} = 8$ days, we compute the numerical value of the slack:\n$$\\text{slack} = 8 - 6 = 2$$\nA slack of 2 days must be added to the nominal constraint. The robust constraint is $S_j \\ge S_i + 8$, which is equivalent to $S_j \\ge S_i + 6 + 2$.", "answer": "$$\n\\boxed{2}\n$$", "id": "3173524"}, {"introduction": "Our final practice synthesizes the concepts of robust formulation and solution analysis in the context of portfolio selection, and introduces a critical metric for evaluating robust strategies. Here, you will work with a \"budgeted\" uncertainty model, where the total deviation of costs is limited, a scenario common in financial applications [@problem_id:3173485]. This exercise challenges you not only to derive the robust counterpart but also to analyze the structure of the optimal robust solution and quantify the trade-off between optimality and robustness using the \"Price of Robustness.\"", "problem": "Consider a linear cost minimization problem with uncertain costs. Let the decision variable be a real vector $x \\in \\mathbb{R}^n$ constrained to the probability simplex, that is, $x_i \\ge 0$ for all $i$ and $\\sum_{i=1}^n x_i = 1$. The uncertain cost vector $c(u) \\in \\mathbb{R}^n$ belongs to a budgeted uncertainty set centered at a known mean cost $\\bar c \\in \\mathbb{R}^n$:\n$$\n\\mathcal{U} \\;=\\; \\left\\{ c \\in \\mathbb{R}^n \\;:\\; \\sum_{i=1}^n \\left| c_i - \\bar c_i \\right| \\le \\Gamma \\right\\},\n$$\nwhere $\\Gamma \\ge 0$ is a given uncertainty budget. You are asked to:\n- Formulate the robust counterpart of the problem $\\min_{x} \\max_{u \\in \\mathcal{U}} c(u)^\\top x$ using only foundational definitions and well-tested facts (for example, properties of norm duality and support functions), starting from the given uncertainty set and the feasible region for $x$.\n- Reason from first principles to characterize the structure of the robust optimal solution on the probability simplex, without introducing any shortcuts or pre-derived formulas. Your characterization must be sufficient to implement a correct algorithm.\n- Define the nominal problem $\\min_{x} \\bar c^\\top x$ on the same feasible region.\n- Define the price of robustness as the nominal performance gap induced by using the robust optimal solution instead of the nominal optimal solution:\n$$\n\\text{PoR} \\;=\\; \\bar c^\\top x^{\\star}_{\\text{rob}} \\;-\\; \\bar c^\\top x^{\\star}_{\\text{nom}},\n$$\nwhere $x^{\\star}_{\\text{rob}}$ is any robust optimal solution and $x^{\\star}_{\\text{nom}}$ is any nominal optimal solution.\n\nYour program must implement the derived robust counterpart logic and compute, for each test case:\n1. The robust optimal objective value of $\\min_x \\max_{u \\in \\mathcal{U}} c(u)^\\top x$.\n2. The nominal optimal objective value of $\\min_x \\bar c^\\top x$.\n3. The price of robustness $\\text{PoR}$ as defined above.\n\nAll quantities are dimensionless real numbers. For each test case, output a list of three real numbers corresponding to these three values, in the order specified above.\n\nTest Suite:\nUse the following set of $(\\bar c, \\Gamma)$ pairs. In each case, $\\bar c$ is given as a list of numbers, and $\\Gamma$ is a nonnegative real number.\n\n- Case 1 (general case): $\\bar c = [3,\\,5,\\,2,\\,7]$, $\\Gamma = 2$.\n- Case 2 (ties in costs): $\\bar c = [1,\\,1,\\,1]$, $\\Gamma = 1$.\n- Case 3 (mixed signs, large uncertainty): $\\bar c = [-2,\\,1,\\,4]$, $\\Gamma = 5$.\n- Case 4 (single variable boundary): $\\bar c = [4]$, $\\Gamma = 3$.\n- Case 5 (zero uncertainty boundary): $\\bar c = [2,\\,8,\\,5]$, $\\Gamma = 0$.\n\nFinal Output Format:\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, where each element corresponds to one test case and is itself a comma-separated list of three numbers in square brackets. For example: \n$$\n[\\,[v_{11},v_{12},v_{13}],\\,[v_{21},v_{22},v_{23}],\\,\\dots\\,]\n$$\nwhere $v_{i1}$ is the robust optimal objective value, $v_{i2}$ is the nominal optimal objective value, and $v_{i3}$ is the price of robustness for the $i$th test case.", "solution": "### 1. Formulation of the Robust Counterpart\n\nThe problem is to find a robust optimal strategy $x$ on the probability simplex, defined as $\\Delta = \\{x \\in \\mathbb{R}^n : \\sum_{i=1}^n x_i = 1, x_i \\ge 0 \\text{ for all } i\\}$. The problem statement is:\n$$\n\\min_{x \\in \\Delta} \\max_{c \\in \\mathcal{U}} c^\\top x\n$$\nwhere the uncertainty set for the cost vector $c$ is given by\n$$\n\\mathcal{U} = \\left\\{ c \\in \\mathbb{R}^n : \\sum_{i=1}^n |c_i - \\bar c_i| \\le \\Gamma \\right\\}\n$$\nfor a nominal cost vector $\\bar c$ and an uncertainty budget $\\Gamma \\ge 0$. This uncertainty set can be expressed using the $\\ell_1$-norm as $\\mathcal{U} = \\{ c \\in \\mathbb{R}^n : \\|c - \\bar c\\|_1 \\le \\Gamma \\}$.\n\nThe expression $\\max_{c \\in \\mathcal{U}} c^\\top x$ is the support function of the set $\\mathcal{U}$ evaluated at $x$. We can derive its closed-form expression by rewriting the inner maximization problem:\n$$\n\\max_{c \\in \\mathcal{U}} c^\\top x = \\max_{c - \\bar c : \\|c - \\bar c\\|_1 \\le \\Gamma} (\\bar c + (c-\\bar c))^\\top x = \\bar c^\\top x + \\max_{\\delta : \\|\\delta\\|_1 \\le \\Gamma} \\delta^\\top x\n$$\nThe term $\\max_{\\delta : \\|\\delta\\|_1 \\le \\Gamma} \\delta^\\top x$ is, by definition of the dual norm, equal to $\\Gamma \\|x\\|_\\infty$.\nSubstituting this back into the main problem, we obtain the robust counterpart (RC) formulation:\n$$\n\\min_{x \\in \\Delta} \\left( \\bar c^\\top x + \\Gamma \\|x\\|_\\infty \\right)\n$$\nThis is an optimization problem over the simplex with a non-linear objective function.\n\n### 2. Characterization of the Robust Optimal Solution\n\nThe RC problem is $\\min_{x \\in \\Delta} \\left( \\sum_{i=1}^n \\bar c_i x_i + \\Gamma \\max_{j} x_j \\right)$.\nAn optimal solution will only have non-zero components for indices corresponding to the smallest costs. To minimize the penalty $\\Gamma \\max_i x_i$, it is optimal to make these non-zero components equal. Let the nominal costs be sorted: $\\bar c_{(1)} \\le \\bar c_{(2)} \\le \\dots \\le \\bar c_{(n)}$. We propose a solution structure where we invest in the $k$ assets with the lowest costs, with equal weights: $x_{(i)} = 1/k$ for $i=1, \\dots, k$ and $x_{(i)}=0$ for $i>k$.\n\nFor a fixed number $k$ of assets, the objective value under this structure is:\n$$\nV(k) = \\sum_{i=1}^k \\bar c_{(i)} x_{(i)} + \\Gamma \\max_{i=1, \\dots, k} x_{(i)} = \\sum_{i=1}^k \\bar c_{(i)} \\left(\\frac{1}{k}\\right) + \\Gamma \\left(\\frac{1}{k}\\right) = \\frac{1}{k} \\left( \\sum_{i=1}^k \\bar c_{(i)} + \\Gamma \\right)\n$$\nThe optimal strategy corresponds to choosing the number of assets $k \\in \\{1, \\dots, n\\}$ that minimizes this value $V(k)$. The robust optimal objective value is therefore $\\min_{k=1, \\dots, n} V(k)$.\n\n### 3. The Nominal Problem and Price of Robustness\n\nThe nominal problem is $\\min_{x \\in \\Delta} \\bar c^\\top x$. To minimize this linear program, we must allocate the entire weight to the component with the minimum cost, $\\bar c_{\\min} = \\min_i \\bar c_i$. The nominal optimal objective value is $\\bar c_{\\min}$.\n\nThe price of robustness (PoR) is $\\text{PoR} = \\bar c^\\top x^{\\star}_{\\text{rob}} - \\bar c^\\top x^{\\star}_{\\text{nom}}$.\nLet $k^*$ be the integer that minimizes $V(k)$. The robust optimal solution $x^{\\star}_{\\text{rob}}$ has components $x_{(i)} = 1/k^*$ for the $k^*$ indices corresponding to the smallest costs. The nominal performance of this solution is:\n$$\n\\bar c^\\top x^{\\star}_{\\text{rob}} = \\frac{1}{k^*} \\sum_{i=1}^{k^*} \\bar c_{(i)}\n$$\nTherefore, the price of robustness is:\n$$\n\\text{PoR} = \\frac{1}{k^*} \\sum_{i=1}^{k^*} \\bar c_{(i)} - \\bar c_{\\min}\n$$\nThis provides a complete, constructive procedure to find all required quantities.\n\n### Algorithmic Summary\n\nFor a given $(\\bar c, \\Gamma)$:\n1.  **Nominal Solution**: The optimal value is $\\min(\\bar c)$.\n2.  **Robust Solution**:\n    a. Sort the costs: $\\bar c_{(1)} \\le \\dots \\le \\bar c_{(n)}$.\n    b. For each $k \\in \\{1, \\dots, n\\}$, calculate the candidate value $V(k) = \\frac{1}{k} (\\sum_{i=1}^k \\bar c_{(i)} + \\Gamma)$.\n    c. The robust optimal value is $\\min_{k} V(k)$.\n3.  **Price of Robustness**:\n    a. Let $k^*$ be the value of $k$ that yields the minimum $V(k)$.\n    b. Calculate the nominal performance of the robust solution: $P_{\\text{rob,nom}} = \\frac{1}{k^*} \\sum_{i=1}^{k^*} \\bar c_{(i)}$.\n    c. The PoR is $P_{\\text{rob,nom}} - \\min(\\bar c)$.", "answer": "[[3.5,2,0.5],[1.333333333,1,0.3333333333],[2,-2,1.5],[7,4,0],[2,2,0]]", "id": "3173485"}]}