{
    "hands_on_practices": [
        {
            "introduction": "本练习将从最基础的概念入手。我们将由两个向量构建一个并矢积，并探究其基本的代数性质，例如其秩为1的特性。理解这些内在属性，是有效利用并矢积作为构建块，以形成更复杂的张量和在计算力学中执行运算的第一步。",
            "id": "3604564",
            "problem": "考虑向量 $\\boldsymbol{u}, \\boldsymbol{v}, \\boldsymbol{w} \\in \\mathbb{R}^{3}$ 以及由并矢积 $\\boldsymbol{u} \\otimes \\boldsymbol{v}$ 构成的二阶张量（矩阵），其分量定义为 $(\\boldsymbol{u} \\otimes \\boldsymbol{v})_{ij} = u_{i} v_{j}$。二阶张量对向量的作用由标准的张量-向量缩并定义，即 $(\\boldsymbol{A}\\boldsymbol{w})_{i} = \\sum_{j=1}^{3} A_{ij} w_{j}$，两个向量的欧几里得内积为 $\\boldsymbol{v} \\cdot \\boldsymbol{w} = \\sum_{j=1}^{3} v_{j} w_{j}$。在计算固体力学中，秩一更新和并矢积常出现在应力和刚度公式中；确立它们的代数性质对于稳定的算法至关重要。\n\n给定 $\\boldsymbol{u} = (1,0,0)^{\\mathsf{T}}$ 和 $\\boldsymbol{v} = (0,2,0)^{\\mathsf{T}}$，执行以下操作：\n\n1. 使用分量定义，将并矢积 $\\boldsymbol{u} \\otimes \\boldsymbol{v}$ 计算为一个 $3 \\times 3$ 矩阵。\n2. 通过证明对于任意 $\\boldsymbol{w} \\in \\mathbb{R}^{3}$ 都有 $(\\boldsymbol{u} \\otimes \\boldsymbol{v}) \\boldsymbol{w} = \\boldsymbol{u} \\left( \\boldsymbol{v} \\cdot \\boldsymbol{w} \\right)$，来验证 $\\boldsymbol{u} \\otimes \\boldsymbol{v}$ 是秩一的。\n3. 确定 $\\boldsymbol{u} \\otimes \\boldsymbol{v}$ 的奇异值，其定义为 $(\\boldsymbol{u} \\otimes \\boldsymbol{v})^{\\mathsf{T}} (\\boldsymbol{u} \\otimes \\boldsymbol{v})$ 的特征值的非负平方根。\n\n将最终答案表示为一个包含按非递增顺序排列的奇异值的行矩阵。无需四舍五入，也无需单位。",
            "solution": "该问题经核实是科学上合理的、适定的、客观的且自洽的。它是在线性和张量代数中的一个标准练习，对计算固体力学等学科至关重要。所有提供的定义和数据都是标准且一致的。因此，我们可以开始求解。\n\n问题分为三个部分。我们将按顺序解决它们。给定的向量是 $\\boldsymbol{u} = (1,0,0)^{\\mathsf{T}}$ 和 $\\boldsymbol{v} = (0,2,0)^{\\mathsf{T}}$。用列向量表示法，即：\n$$\n\\boldsymbol{u} = \\begin{pmatrix} 1 \\\\ 0 \\\\ 0 \\end{pmatrix}, \\quad \\boldsymbol{v} = \\begin{pmatrix} 0 \\\\ 2 \\\\ 0 \\end{pmatrix}\n$$\n\n**第1部分：计算并矢积 $\\boldsymbol{u} \\otimes \\boldsymbol{v}$**\n\n两个向量 $\\boldsymbol{u}$ 和 $\\boldsymbol{v}$ 的并矢积产生一个二阶张量（或矩阵）$\\boldsymbol{A} = \\boldsymbol{u} \\otimes \\boldsymbol{v}$。其分量由定义 $A_{ij} = u_i v_j$ 给出。在矩阵表示法中，这等价于外积 $\\boldsymbol{u} \\boldsymbol{v}^{\\mathsf{T}}$。\n\n向量为 $\\boldsymbol{u} = (u_1, u_2, u_3) = (1, 0, 0)$ 和 $\\boldsymbol{v} = (v_1, v_2, v_3) = (0, 2, 0)$。\n$\\boldsymbol{v}$ 的转置是 $\\boldsymbol{v}^{\\mathsf{T}} = \\begin{pmatrix} 0  2  0 \\end{pmatrix}$。\n\n我们计算矩阵乘积 $\\boldsymbol{u} \\boldsymbol{v}^{\\mathsf{T}}$：\n$$\n\\boldsymbol{u} \\otimes \\boldsymbol{v} = \\boldsymbol{u} \\boldsymbol{v}^{\\mathsf{T}} = \\begin{pmatrix} 1 \\\\ 0 \\\\ 0 \\end{pmatrix} \\begin{pmatrix} 0  2  0 \\end{pmatrix} = \\begin{pmatrix}\n(1)(0)  (1)(2)  (1)(0) \\\\\n(0)(0)  (0)(2)  (0)(0) \\\\\n(0)(0)  (0)(2)  (0)(0)\n\\end{pmatrix}\n$$\n$$\n\\boldsymbol{u} \\otimes \\boldsymbol{v} = \\begin{pmatrix}\n0  2  0 \\\\\n0  0  0 \\\\\n0  0  0\n\\end{pmatrix}\n$$\n这是并矢积 $\\boldsymbol{u} \\otimes \\boldsymbol{v}$ 的 $3 \\times 3$ 矩阵表示。\n\n**第2部分：验证 $(\\boldsymbol{u} \\otimes \\boldsymbol{v}) \\boldsymbol{w} = \\boldsymbol{u} ( \\boldsymbol{v} \\cdot \\boldsymbol{w} )$**\n\n这是并矢积的一个基本性质。我们将按要求对任意向量 $\\boldsymbol{w} = (w_1, w_2, w_3)^{\\mathsf{T}} \\in \\mathbb{R}^3$ 使用索引表示法来普遍地验证它。\n\n设 $\\boldsymbol{A} = \\boldsymbol{u} \\otimes \\boldsymbol{v}$。$\\boldsymbol{A}$ 作用于 $\\boldsymbol{w}$ 所得向量的第 $i$ 个分量由张量-向量缩并法则给出：\n$$\n(\\boldsymbol{A} \\boldsymbol{w})_i = \\sum_{j=1}^{3} A_{ij} w_j\n$$\n代入并矢积的分量定义 $A_{ij} = u_i v_j$：\n$$\n(\\boldsymbol{A} \\boldsymbol{w})_i = \\sum_{j=1}^{3} (u_i v_j) w_j\n$$\n分量 $u_i$ 与求和索引 $j$ 无关，所以可以从求和中提取出来：\n$$\n(\\boldsymbol{A} \\boldsymbol{w})_i = u_i \\left( \\sum_{j=1}^{3} v_j w_j \\right)\n$$\n括号中的表达式是 $\\boldsymbol{v}$ 和 $\\boldsymbol{w}$ 的欧几里得内积（点积）的定义：\n$$\n\\boldsymbol{v} \\cdot \\boldsymbol{w} = \\sum_{j=1}^{3} v_j w_j\n$$\n将此代回，我们得到：\n$$\n(\\boldsymbol{A} \\boldsymbol{w})_i = u_i (\\boldsymbol{v} \\cdot \\boldsymbol{w})\n$$\n项 $\\boldsymbol{v} \\cdot \\boldsymbol{w}$ 是一个标量。表达式 $u_i (\\boldsymbol{v} \\cdot \\boldsymbol{w})$ 表示向量 $\\boldsymbol{u}$ 被此标量缩放后的第 $i$ 个分量。因此，结果向量是 $\\boldsymbol{u} (\\boldsymbol{v} \\cdot \\boldsymbol{w})$。这就完成了普遍性验证：\n$$\n(\\boldsymbol{u} \\otimes \\boldsymbol{v}) \\boldsymbol{w} = \\boldsymbol{u} (\\boldsymbol{v} \\cdot \\boldsymbol{w})\n$$\n这个恒等式表明，由 $\\boldsymbol{u} \\otimes \\boldsymbol{v}$ 表示的线性变换的像是被向量 $\\boldsymbol{u}$ 张成的一维空间。因此，张量 $\\boldsymbol{u} \\otimes \\boldsymbol{v}$ 的秩为1（假设 $\\boldsymbol{u}$ 和 $\\boldsymbol{v}$ 是非零向量）。\n\n**第3部分：确定 $\\boldsymbol{u} \\otimes \\boldsymbol{v}$ 的奇异值**\n\n矩阵 $\\boldsymbol{A}$ 的奇异值定义为矩阵 $\\boldsymbol{A}^{\\mathsf{T}} \\boldsymbol{A}$ 的特征值的非负平方根。设 $\\boldsymbol{A} = \\boldsymbol{u} \\otimes \\boldsymbol{v}$。从第1部分，我们有：\n$$\n\\boldsymbol{A} = \\begin{pmatrix}\n0  2  0 \\\\\n0  0  0 \\\\\n0  0  0\n\\end{pmatrix}\n$$\n$\\boldsymbol{A}$ 的转置是：\n$$\n\\boldsymbol{A}^{\\mathsf{T}} = \\begin{pmatrix}\n0  0  0 \\\\\n2  0  0 \\\\\n0  0  0\n\\end{pmatrix}\n$$\n现在，我们计算乘积 $\\boldsymbol{A}^{\\mathsf{T}} \\boldsymbol{A}$：\n$$\n\\boldsymbol{A}^{\\mathsf{T}} \\boldsymbol{A} = \\begin{pmatrix}\n0  0  0 \\\\\n2  0  0 \\\\\n0  0  0\n\\end{pmatrix} \\begin{pmatrix}\n0  2  0 \\\\\n0  0  0 \\\\\n0  0  0\n\\end{pmatrix} = \\begin{pmatrix}\n0  0  0 \\\\\n0  4  0 \\\\\n0  0  0\n\\end{pmatrix}\n$$\n记此矩阵为 $\\boldsymbol{B} = \\boldsymbol{A}^{\\mathsf{T}} \\boldsymbol{A}$。我们需要通过求解特征方程 $\\det(\\boldsymbol{B} - \\lambda \\boldsymbol{I}) = 0$ 来找到 $\\boldsymbol{B}$ 的特征值 $\\lambda$，其中 $\\boldsymbol{I}$ 是 $3 \\times 3$ 单位矩阵。\n$$\n\\det\\left( \\begin{pmatrix}\n0  0  0 \\\\\n0  4  0 \\\\\n0  0  0\n\\end{pmatrix} - \\lambda \\begin{pmatrix}\n1  0  0 \\\\\n0  1  0 \\\\\n0  0  1\n\\end{pmatrix} \\right) = 0\n$$\n$$\n\\det\\begin{pmatrix}\n-\\lambda  0  0 \\\\\n0  4-\\lambda  0 \\\\\n0  0  -\\lambda\n\\end{pmatrix} = 0\n$$\n这个对角矩阵的行列式是其对角线元素的乘积：\n$$\n(-\\lambda)(4-\\lambda)(-\\lambda) = 0\n$$\n$$\n\\lambda^2 (4-\\lambda) = 0\n$$\n$\\boldsymbol{A}^{\\mathsf{T}} \\boldsymbol{A}$ 的特征值 $\\lambda$ 是 $\\lambda_1 = 4$，$\\lambda_2 = 0$ 和 $\\lambda_3 = 0$。\n\n奇异值 $\\sigma$ 是这些特征值的非负平方根。\n$$\n\\sigma_1 = \\sqrt{4} = 2\n$$\n$$\n\\sigma_2 = \\sqrt{0} = 0\n$$\n$$\n\\sigma_3 = \\sqrt{0} = 0\n$$\n$\\boldsymbol{u} \\otimes \\boldsymbol{v}$ 的奇异值是 $\\{2, 0, 0\\}$。按非递增顺序排列，它们是 $2$、$0$、$0$。\n\n或者，使用一般性质：$\\boldsymbol{A}^{\\mathsf{T}}\\boldsymbol{A} = (\\boldsymbol{u}\\boldsymbol{v}^{\\mathsf{T}})^{\\mathsf{T}}(\\boldsymbol{u}\\boldsymbol{v}^{\\mathsf{T}}) = (\\boldsymbol{v}\\boldsymbol{u}^{\\mathsf{T}})(\\boldsymbol{u}\\boldsymbol{v}^{\\mathsf{T}}) = \\boldsymbol{v}(\\boldsymbol{u}^{\\mathsf{T}}\\boldsymbol{u})\\boldsymbol{v}^{\\mathsf{T}} = (\\boldsymbol{u} \\cdot \\boldsymbol{u})(\\boldsymbol{v} \\otimes \\boldsymbol{v}) = \\|\\boldsymbol{u}\\|^2(\\boldsymbol{v} \\otimes \\boldsymbol{v})$。该矩阵的特征值为 $\\|\\boldsymbol{u}\\|^2\\|\\boldsymbol{v}\\|^2$、$0$ 和 $0$。因此，非零奇异值为 $\\sigma = \\sqrt{\\|\\boldsymbol{u}\\|^2\\|\\boldsymbol{v}\\|^2} = \\|\\boldsymbol{u}\\|\\|\\boldsymbol{v}\\|$。\n对于 $\\boldsymbol{u} = (1,0,0)^{\\mathsf{T}}$，$\\|\\boldsymbol{u}\\| = \\sqrt{1^2+0^2+0^2} = 1$。\n对于 $\\boldsymbol{v} = (0,2,0)^{\\mathsf{T}}$，$\\|\\boldsymbol{v}\\| = \\sqrt{0^2+2^2+0^2} = 2$。\n非零奇异值为 $\\sigma = (1)(2) = 2$。另外两个是 $0$。这证实了结果。\n\n最终答案是按非递增顺序排列的奇异值组成的行矩阵。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 2  0  0 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "在理解了并矢积的基础上，本练习将探讨它如何通过双点积运算与其他张量相互作用。您将学习如何将看似复杂的张量表达式简化为更熟悉的矩阵和向量运算，这对于解析推导和高效的数值实现都是一项至关重要的技能。",
            "id": "3604550",
            "problem": "在计算固体力学 (CSM) 中，二阶张量及其缩并自然地出现在功、能量和通量的计算中。设 $u, v \\in \\mathbb{R}^{3}$ 为列向量，$A \\in \\mathbb{R}^{3 \\times 3}$ 为一个二阶张量。并矢积 $u \\otimes v$ 是一个二阶张量，其分量为 $(u \\otimes v)_{ij} = u_{i} v_{j}$，而二阶张量的双点积 $X:A$ 在爱因斯坦求和约定 (ESC) 下定义为 $X:A = X_{ij} A_{ij}$。在由克罗内克δ $\\delta_{ij}$ 定义的欧几里得度量的笛卡尔坐标系中，使用索引表示法和刚才陈述的核心定义，将标量 $(u \\otimes v):A = u_{i} v_{j} A_{ij}$ 化简为由 $u$、$v$ 和 $A$ 构建的标准欧几里得内积形式。简要解释为什么该标量在任何正交基变换下都是不变的。然后，对下列给定的值计算该标量：\n$$\nu = \\begin{pmatrix} 1 \\\\ 1 \\\\ 0 \\end{pmatrix}, \\quad\nv = \\begin{pmatrix} 0 \\\\ 1 \\\\ 1 \\end{pmatrix}, \\quad\nA = \\begin{pmatrix}\n2  -1  0 \\\\\n-1  3  1 \\\\\n0  1  0\n\\end{pmatrix}.\n$$\n给出精确的标量值（不要四舍五入）。该量是无量纲的，不要报告单位。",
            "solution": "首先根据所需标准对问题陈述进行验证。\n\n### 问题验证\n\n**第一步：提取已知条件**\n- $u, v \\in \\mathbb{R}^{3}$ 是列向量。\n- $A \\in \\mathbb{R}^{3 \\times 3}$ 是一个二阶张量。\n- 并矢积由其分量定义为 $(u \\otimes v)_{ij} = u_{i} v_{j}$。\n- 双点积使用爱因斯坦求和约定 (ESC) 定义为 $X:A = X_{ij} A_{ij}$。\n- 空间是由克罗内克δ $\\delta_{ij}$ 定义欧几里得度量的笛卡尔坐标系。\n- 待分析的标量是 $(u \\otimes v):A = u_{i} v_{j} A_{ij}$。\n- 为计算提供了以下具体值：\n$$\nu = \\begin{pmatrix} 1 \\\\ 1 \\\\ 0 \\end{pmatrix}, \\quad\nv = \\begin{pmatrix} 0 \\\\ 1 \\\\ 1 \\end{pmatrix}, \\quad\nA = \\begin{pmatrix}\n2  -1  0 \\\\\n-1  3  1 \\\\\n0  1  0\n\\end{pmatrix}\n$$\n\n**第二步：使用提取的已知条件进行验证**\n- **科学依据：** 该问题使用了张量代数和连续介质力学中关于并矢积和双点积的标准、正确的定义。这些运算在计算固体力学 (CSM) 中是基础性的。\n- **适定性：** 该问题是适定的。它要求完成三个不同的任务：一个符号化简、一个性质（不变性）的解释以及一个数值计算。每个任务都提供了所有必要的信息。\n- **客观性：** 该问题使用精确的数学语言陈述，没有主观或含糊不清的术语。\n\n该问题是自洽的、一致的且科学上是合理的。它没有违反任何无效标准。\n\n**第三步：结论与行动**\n该问题有效。将提供完整的解答。\n\n### 解\n\n设标量为 $S$。问题要求对 $S = (u \\otimes v):A$ 进行化简和计算。\n\n**第一部分：表达式的化简**\n\n根据定义，双点积 $X:A$ 是各分量逐元素乘积之和，$X_{ij} A_{ij}$。在这里，张量 $X$ 是并矢积 $u \\otimes v$，其分量由 $(u \\otimes v)_{ij} = u_{i} v_{j}$ 给出。\n\n将并矢积的分量代入双点积的定义中，我们得到：\n$$\nS = (u \\otimes v):A = (u \\otimes v)_{ij} A_{ij} = u_{i} v_{j} A_{ij}\n$$\n爱因斯坦求和约定意味着对索引 $i$ 和 $j$ 从 1 到 3 进行求和。由于分量 $u_i$、$v_j$ 和 $A_{ij}$ 都是标量，它们的乘法是可交换的。我们可以重新排列这些项：\n$$\nS = u_{i} (A_{ij} v_{j})\n$$\n我们识别出括号中的项 $A_{ij} v_{j}$ 是矩阵向量乘积 $Av$ 的第 $i$ 个分量的定义。我们定义一个向量 $w$，使得 $w = Av$。$w$ 的分量由 $w_{i} = A_{ij} v_{j}$ 给出。\n\n将其代回 $S$ 的表达式中，我们得到：\n$$\nS = u_{i} w_{i}\n$$\n这是向量 $u$ 和 $w$ 的标准欧几里得内积（或点积）的定义。因此，我们可以写成：\n$$\nS = u \\cdot w = u \\cdot (Av)\n$$\n在矩阵表示法中，对于列向量 $u$ 和 $v$ 以及矩阵 $A$，此内积表示为：\n$$\nS = u^{\\mathsf{T}}(Av)\n$$\n这就是所要求的将表达式化简为标准内积形式的结果。\n\n**第二部分：在正交基变换下的不变性**\n\n根据定义，标量在基变换下是不变的。我们可以对表达式 $S = u^{\\mathsf{T}} A v$ 明确地证明这一点。考虑一个从原始（未加撇）坐标系到新的（加撇）坐标系的正交基变换。该变换由一个正交矩阵 $Q$ 表示，它满足 $Q^{\\mathsf{T}}Q = QQ^{\\mathsf{T}} = I$，其中 $I$ 是单位矩阵。\n\n向量 $u$ 和 $v$ 以及二阶张量 $A$ 的分量变换如下：\n$$\nu' = Qu, \\quad v' = Qv, \\quad A' = QAQ^{\\mathsf{T}}\n$$\n在新基下的标量 $S'$ 具有相同的形式：\n$$\nS' = (u')^{\\mathsf{T}} A' v'\n$$\n将变换规则代入此表达式中：\n$$\nS' = (Qu)^{\\mathsf{T}} (QAQ^{\\mathsf{T}}) (Qv)\n$$\n使用矩阵乘积的转置性质 $(XY)^{\\mathsf{T}} = Y^{\\mathsf{T}}X^{\\mathsf{T}}$，我们有 $(Qu)^{\\mathsf{T}} = u^{\\mathsf{T}}Q^{\\mathsf{T}}$。\n$$\nS' = (u^{\\mathsf{T}}Q^{\\mathsf{T}}) (QAQ^{\\mathsf{T}}) (Qv)\n$$\n根据矩阵乘法的结合律，我们可以重新组合各项：\n$$\nS' = u^{\\mathsf{T}} (Q^{\\mathsf{T}}Q) A (Q^{\\mathsf{T}}Q) v\n$$\n由于 $Q$ 是一个正交矩阵，所以 $Q^{\\mathsf{T}}Q = I$。将此代入 $S'$ 的表达式中：\n$$\nS' = u^{\\mathsf{T}} I A I v = u^{\\mathsf{T}} A v\n$$\n这恰好是标量 $S$ 在原始基下的表达式。因此，$S' = S$，这证明了该标量在任何正交基变换下都是不变的。\n\n**第三部分：标量的计算**\n\n我们被要求对给定的 $u$、$v$ 和 $A$ 计算 $S = u^{\\mathsf{T}}Av$：\n$$\nu = \\begin{pmatrix} 1 \\\\ 1 \\\\ 0 \\end{pmatrix}, \\quad\nv = \\begin{pmatrix} 0 \\\\ 1 \\\\ 1 \\end{pmatrix}, \\quad\nA = \\begin{pmatrix}\n2  -1  0 \\\\\n-1  3  1 \\\\\n0  1  0\n\\end{pmatrix}\n$$\n首先，我们计算矩阵向量乘积 $w = Av$：\n$$\nw = Av = \\begin{pmatrix}\n2  -1  0 \\\\\n-1  3  1 \\\\\n0  1  0\n\\end{pmatrix}\n\\begin{pmatrix} 0 \\\\ 1 \\\\ 1 \\end{pmatrix}\n= \\begin{pmatrix}\n(2)(0) + (-1)(1) + (0)(1) \\\\\n(-1)(0) + (3)(1) + (1)(1) \\\\\n(0)(0) + (1)(1) + (0)(1)\n\\end{pmatrix}\n= \\begin{pmatrix}\n-1 \\\\\n4 \\\\\n1\n\\end{pmatrix}\n$$\n接下来，我们计算内积 $S = u^{\\mathsf{T}}w$：\n$$\nS = u^{\\mathsf{T}}w = \\begin{pmatrix} 1  1  0 \\end{pmatrix}\n\\begin{pmatrix} -1 \\\\ 4 \\\\ 1 \\end{pmatrix}\n= (1)(-1) + (1)(4) + (0)(1)\n$$\n$$\nS = -1 + 4 + 0 = 3\n$$\n标量的值为 $3$。",
            "answer": "$$\\boxed{3}$$"
        },
        {
            "introduction": "在计算力学中，理论上的恒等式必须被转化为可靠的代码。本练习要求您首先推导一个涉及两个并矢积收缩的关键恒等式，然后设计一个数值实验来检验其在有限精度算术下的有效性。这个练习突出了精确数学与浮点计算的实际情况之间的关键差异。",
            "id": "3604592",
            "problem": "考虑一个计算固体力学中的任务，该任务侧重于张量代数和并矢积。在一个具有标准基和内积的三维欧几里得空间中进行计算。仅使用以下基本定义：分量为 $a_i$ 和 $b_j$ 的向量 $a$ 和 $b$ 的并矢（外）积是二阶张量 $(a \\otimes b)_{ij} = a_i b_j$；两个二阶张量 $A$ 和 $B$ 的双点积是 $A:B = \\sum_{i=1}^{3} \\sum_{j=1}^{3} A_{ij} B_{ij}$；向量 $a$ 和 $b$ 的欧几里得点积是 $a \\cdot b = \\sum_{i=1}^{3} a_i b_i$。严格从这些定义出发，符号推导由向量 $a,b$ 和 $c,d$ 构成的两个并矢进行双点积运算后得到的标量。然后，设计并实现一个遵循电气和电子工程师协会（IEEE）754 binary64 标准的64位浮点算术的数值实验，以评估有限精度行为。\n\n对于每个测试用例，你的程序必须通过两条路径计算两个标量：\n- 路径 1：根据所提供的向量构建 $a \\otimes b$ 和 $c \\otimes d$，然后直接从它们的分量计算双点积 $ (a \\otimes b) : (c \\otimes d)$。\n- 路径 2：根据所提供的向量计算点积 $a \\cdot c$ 和 $b \\cdot d$，然后计算它们的乘积。\n\n对于每个测试用例，使用以下定义报告路径 1 和路径 2 所得标量之间的相对误差，以避免在退化情况下的除零错误：\n$$\n\\mathrm{rel\\_err} = \\frac{\\left| x - y \\right|}{\\max\\left( \\left| x \\right|, \\left| y \\right|, \\varepsilon \\right)},\n$$\n其中 $x$ 是路径 1 的标量，$y$ 是路径 2 的标量，$\\varepsilon$ 是 IEEE 754 binary64 算术的机器ε（无量纲）。所有输出均为无量纲实数。\n\n测试套件（每一项都是一个由4个三维向量 $(a,b,c,d)$ 组成的四元组，旨在探究典型行为、病态条件和边界情况）：\n- 情况 1（一般中等量级）：\n  $a = [\\,1.0,\\,2.0,\\,3.0\\,]$, $b = [\\,-1.0,\\,0.0,\\,2.0\\,]$, $c = [\\,0.5,\\,-1.0,\\,4.0\\,]$, $d = [\\,3.0,\\,-2.0,\\,1.0\\,]$.\n- 情况 2（带有微小扰动的近共线和反平行）：\n  $a = [\\,1.0,\\,0.0,\\,0.0\\,]$, $b = [\\,1.0,\\,0.0,\\,0.0\\,]$, $c = [\\,1.0,\\,10^{-16},\\,0.0\\,]$, $d = [\\,-1.0,\\,10^{-16},\\,0.0\\,]$.\n- 情况 3（带有相消的极端尺度，但避免溢出）：\n  $a = [\\,10^{150},\\,-10^{150},\\,10^{150}\\,]$, $b = [\\,10^{150},\\,2\\times 10^{150},\\,-3\\times 10^{150}\\,]$, $c = [\\,10^{-150},\\,-10^{-150},\\,10^{-150}\\,]$, $d = [\\,-10^{-150},\\,4\\times 10^{-150},\\,2\\times 10^{-150}\\,]$.\n- 情况 4（精确相消至接近零）：\n  $a = [\\,1.0,\\,1.0,\\,1.0\\,]$, $b = [\\,1.0,\\,-1.0,\\,0.0\\,]$, $c = [\\,1.0,\\,-1.0,\\,0.0\\,]$, $d = [\\,1.0,\\,1.0,\\,0.0\\,]$.\n- 情况 5（带有微小点积的近正交）：\n  $a = [\\,1.0,\\,0.0,\\,0.0\\,]$, $b = [\\,0.0,\\,1.0,\\,0.0\\,]$, $c = [\\,10^{-16},\\,1.0,\\,0.0\\,]$, $d = [\\,1.0,\\,10^{-16},\\,0.0\\,]$.\n- 情况 6（混合尺度和符号以测试求和与相消）：\n  $a = [\\,0.123456789,\\,-98765.4321,\\,3.1415926535\\,]$, $b = [\\,-2.718281828,\\,1.0,\\,10^{-12}\\,]$, $c = [\\,10^{12},\\,-10^{5},\\,2.0\\,]$, $d = [\\,-3.0,\\,4.0,\\,-5.0\\,]$.\n- 情况 7（含零向量的边界情况）：\n  $a = [\\,0.0,\\,0.0,\\,0.0\\,]$, $b = [\\,1.0,\\,2.0,\\,3.0\\,]$, $c = [\\,4.0,\\,5.0,\\,6.0\\,]$, $d = [\\,7.0,\\,8.0,\\,9.0\\,]$.\n\n最终输出格式要求：你的程序应生成单行输出，其中包含七个测试用例的相对误差，按顺序排列，形式为一个用方括号括起来的逗号分隔列表（例如 $[r_1,r_2,\\dots,r_7]$），其中每个 $r_i$ 是一个表示为浮点数的无量纲实数。",
            "solution": "该问题要求对一个张量恒等式进行符号推导，并随后进行数值实验，以研究有限精度算术的影响。完整过程详述如下。\n\n首先，我们进行符号推导。任务是求出运算 $(a \\otimes b) : (c \\otimes d)$ 的标量结果，其中 $a$、$b$、$c$ 和 $d$ 是三维欧几里得空间中的向量，$\\otimes$ 表示并矢（或外）积，$:$ 表示双点积。我们使用题目给出的分量形式定义。设向量在标准正交基下的分量表示为：$a = (a_1, a_2, a_3)$，$b = (b_1, b_2, b_3)$，以此类推。\n\n并矢积 $(a \\otimes b)$ 的结果是一个二阶张量，我们将其记为 $A$。其分量由定义给出：\n$$ A_{ij} = (a \\otimes b)_{ij} = a_i b_j $$\n类似地，并矢积 $(c \\otimes d)$ 的结果是二阶张量 $B$，其分量为：\n$$ B_{ij} = (c \\otimes d)_{ij} = c_i d_j $$\n索引 $i$ 和 $j$ 的取值范围为 1 到 3。\n\n接下来，我们应用两个二阶张量 $A$ 和 $B$ 的双点积定义：\n$$ A:B = \\sum_{i=1}^{3} \\sum_{j=1}^{3} A_{ij} B_{ij} $$\n将 $A$ 和 $B$ 的分量表达式代入此定义，我们得到：\n$$ (a \\otimes b) : (c \\otimes d) = \\sum_{i=1}^{3} \\sum_{j=1}^{3} (a_i b_j) (c_i d_j) $$\n由于分量是标量，我们可以在求和内部重新排列各项：\n$$ (a \\otimes b) : (c \\otimes d) = \\sum_{i=1}^{3} \\sum_{j=1}^{3} a_i c_i b_j d_j $$\n对 $i$ 的求和与对 $j$ 的求和是相互独立的。因此，我们可以将这个双重求和分离为两个单一求和的乘积：\n$$ (a \\otimes b) : (c \\otimes d) = \\left( \\sum_{i=1}^{3} a_i c_i \\right) \\left( \\sum_{j=1}^{3} b_j d_j \\right) $$\n我们认出这两个求和是欧几里得点积的定义。第一项是 $a$ 和 $c$ 的点积，第二项是 $b$ 和 $d$ 的点积：\n$$ \\sum_{i=1}^{3} a_i c_i = a \\cdot c $$\n$$ \\sum_{j=1}^{3} b_j d_j = b \\cdot d $$\n将它们代回，我们得到最终的符号恒等式：\n$$ (a \\otimes b) : (c \\otimes d) = (a \\cdot c)(b \\cdot d) $$\n这个推导证实了，在精确算术中，问题陈述中描述的两条计算路径是等价的。\n\n该数值实验旨在评估在有限精度算术（特别是 IEEE 754 binary64 标准）的约束下，这个数学恒等式的成立情况。我们通过两种不同的运算序列来计算同一个概念上的量。\n\n路径 1 通过首先构建完整的张量表示，然后执行双点积来计算标量 $x$：\n$1$. 构建张量 $A = a \\otimes b$，这是一个 $3 \\times 3$ 矩阵，其元素为 $A_{ij} = a_i b_j$。\n$2$. 构建张量 $B = c \\otimes d$，这是一个 $3 \\times 3$ 矩阵，其元素为 $B_{ij} = c_i d_j$。\n$3$. 计算双点积 $x = A:B = \\sum_{i=1}^{3} \\sum_{j=1}^{3} A_{ij} B_{ij}$。这涉及对 9 个项的求和。\n\n路径 2 通过首先计算点积，然后将结果相乘来计算标量 $y$：\n$1$. 计算点积 $p_1 = a \\cdot c = \\sum_{i=1}^{3} a_i c_i$。这是对 3 个项的求和。\n$2$. 计算点积 $p_2 = b \\cdot d = \\sum_{j=1}^{3} b_j d_j$。这也是对 3 个项的求和。\n$3$. 计算最终乘积 $y = p_1 \\cdot p_2$。\n\n关键区别在于运算顺序。路径 1 计算的是积之和，而路径 2 计算的是和之积。在浮点算术中，由于舍入误差，这两者不保证完全相同，尤其是在对量级差异悬殊的数字求和（有效位损失）或中间计算导致灾难性抵消时。\n\n为了量化这种差异，我们计算结果 $x$ 和 $y$ 之间的相对误差。指定的公式是：\n$$ \\mathrm{rel\\_err} = \\frac{\\left| x - y \\right|}{\\max\\left( \\left| x \\right|, \\left| y \\right|, \\varepsilon \\right)} $$\n此处，$\\varepsilon$ 是所用算术标准的机器ε。对于 IEEE 754 binary64（双精度浮点数），$\\varepsilon = 2^{-52}$，约等于 $2.22 \\times 10^{-16}$。在分母中包含 $\\varepsilon$ 是为了对计算进行正则化，防止在 $x$ 和 $y$ 均为零时出现除零错误，并在它们小于 $\\varepsilon$ 时提供一个有意义的误差尺度。\n\n实现将使用 Python 的 NumPy 库进行，该库为数组上的线性代数运算提供了遵循指定浮点标准的稳健高效的函数。并矢积 $a \\otimes b$ 使用 `np.outer(a, b)` 计算。双点积 $A:B$ 等效于矩阵的 Frobenius 内积，可以通过逐元素相乘后求和来计算，即 `np.sum(A * B)`。点积 $a \\cdot c$ 使用 `np.dot(a, c)` 计算。机器ε $\\varepsilon$ 从 `np.finfo(np.float64).eps` 获得。程序将处理七个测试用例中的每一个，计算相对误差，并按指定格式报告结果。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves the computational solid mechanics problem by performing a symbolic\n    derivation and a numerical experiment on tensor products.\n    \"\"\"\n\n    # Get the machine epsilon for IEEE 754 binary64 floating-point arithmetic.\n    epsilon = np.finfo(np.float64).eps\n\n    # Test Suite: Each item is a quadruple of 3-vectors (a, b, c, d).\n    test_cases = [\n        # Case 1: general moderate magnitudes\n        (\n            [1.0, 2.0, 3.0], \n            [-1.0, 0.0, 2.0], \n            [0.5, -1.0, 4.0], \n            [3.0, -2.0, 1.0]\n        ),\n        # Case 2: nearly collinear and antiparallel with tiny perturbations\n        (\n            [1.0, 0.0, 0.0], \n            [1.0, 0.0, 0.0], \n            [1.0, 1e-16, 0.0], \n            [-1.0, 1e-16, 0.0]\n        ),\n        # Case 3: extreme scaling with cancellation but avoiding overflow\n        (\n            [1e150, -1e150, 1e150],\n            [1e150, 2e150, -3e150],\n            [1e-150, -1e-150, 1e-150],\n            [-1e-150, 4e-150, 2e-150]\n        ),\n        # Case 4: exact cancellation to near-zero\n        (\n            [1.0, 1.0, 1.0], \n            [1.0, -1.0, 0.0], \n            [1.0, -1.0, 0.0], \n            [1.0, 1.0, 0.0]\n        ),\n        # Case 5: nearly orthogonal with tiny dot products\n        (\n            [1.0, 0.0, 0.0],\n            [0.0, 1.0, 0.0],\n            [1e-16, 1.0, 0.0],\n            [1.0, 1e-16, 0.0]\n        ),\n        # Case 6: mixed scales and signs to test summation and cancellation\n        (\n            [0.123456789, -98765.4321, 3.1415926535],\n            [-2.718281828, 1.0, 1e-12],\n            [1e12, -1e5, 2.0],\n            [-3.0, 4.0, -5.0]\n        ),\n        # Case 7: boundary with a zero vector\n        (\n            [0.0, 0.0, 0.0], \n            [1.0, 2.0, 3.0], \n            [4.0, 5.0, 6.0], \n            [7.0, 8.0, 9.0]\n        ),\n    ]\n\n    results = []\n    for case in test_cases:\n        a_vec, b_vec, c_vec, d_vec = case\n        \n        # Ensure vectors are numpy arrays with the correct float type\n        a = np.array(a_vec, dtype=np.float64)\n        b = np.array(b_vec, dtype=np.float64)\n        c = np.array(c_vec, dtype=np.float64)\n        d = np.array(d_vec, dtype=np.float64)\n\n        # Route 1: (a ⊗ b) : (c ⊗ d)\n        # Construct the dyadic products (outer products)\n        A = np.outer(a, b)\n        B = np.outer(c, d)\n        # Compute the double contraction (Frobenius inner product)\n        x = np.sum(A * B)\n\n        # Route 2: (a ⋅ c) * (b ⋅ d)\n        # Compute the dot products\n        ac_dot = np.dot(a, c)\n        bd_dot = np.dot(b, d)\n        # Compute the final product\n        y = ac_dot * bd_dot\n\n        # Calculate the relative error using the specified formula\n        numerator = np.abs(x - y)\n        denominator = np.max([np.abs(x), np.abs(y), epsilon])\n        relative_error = numerator / denominator\n        \n        results.append(relative_error)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```"
        }
    ]
}