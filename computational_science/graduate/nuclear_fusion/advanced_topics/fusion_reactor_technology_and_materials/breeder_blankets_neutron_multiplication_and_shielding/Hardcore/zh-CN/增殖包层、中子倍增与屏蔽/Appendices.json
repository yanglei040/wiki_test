{
    "hands_on_practices": [
        {
            "introduction": "本节的第一个实践练习将聚焦于增殖包层的核心功能：产生氚。通过一个基础性的计算，我们将材料组分（特别是 $^{6}\\text{Li}$ 的丰度）与局域氚产额直接联系起来。这个练习旨在阐明反应率计算的基本原理 $R=N \\sigma \\phi$，这是理解和设计增殖包层的第一步。",
            "id": "3692294",
            "problem": "氘-氚（DT）聚变包层中的一个固态增殖区由一个多孔铍基体构成，其中渗透有金属锂。铍在目标位置的上游充当中子倍增剂，但在所考虑的局部位置，中子场可以近似为能量为 $E_f$ 的单能中子场，其快中子通量 $\\phi_f$ 已知。锂的同位素组成需要进行调整，以满足单位体积内指定的局部氚生产率。\n\n假设以下基于物理的模型假设：\n- 氚的产生完全来自于 ${}^{6}\\text{Li}(n,\\alpha)\\text{T}$ 和 ${}^{7}\\text{Li}(n,n'\\alpha)\\text{T}$ 这两个反应，每个反应恰好产生一个氚核。\n- 锂在铍基体中均匀分布，并在原子尺度上同位素混合良好（锂内部无自屏效应）。\n- 目标位置的快中子通量 $\\phi_f$ 已经包含了上游中子倍增和屏蔽的效应；在所考虑的局部体积内，可以将其视为已知且空间均匀的。\n- 中子能量窄带分布在 $E_f$ 附近，因此依赖于能量的微观截面可以取其在 $E_f$ 处的值。\n\n数据：\n- 锂占据增殖区 $f_v^{\\mathrm{Li}} = 0.35$ 的体积分数。块状金属锂的原子数密度为 $n_{\\mathrm{Li}}^{0} = 4.6 \\times 10^{22}\\,\\mathrm{cm}^{-3}$。因此，局部锂原子数密度为 $N_{\\mathrm{Li}} = f_v^{\\mathrm{Li}}\\,n_{\\mathrm{Li}}^{0}$。\n- 在能量 $E_f$ 处的快中子通量为 $\\phi_f = 2.5 \\times 10^{15}\\,\\mathrm{cm}^{-2}\\,\\mathrm{s}^{-1}$。\n- 在 $E_f$ 处，产生氚的微观截面分别为：对于 ${}^{6}\\text{Li}(n,\\alpha)\\text{T}$ 反应，$\\sigma_{6}(E_f) = 0.09\\,\\mathrm{b}$；对于 ${}^{7}\\text{Li}(n,n'\\alpha)\\text{T}$ 反应，$\\sigma_{7}(E_f) = 0.03\\,\\mathrm{b}$，其中 $1\\,\\mathrm{b} = 10^{-24}\\,\\mathrm{cm}^{2}$。\n- 目标局部氚生产率密度为 $R_T = 2.40 \\times 10^{12}\\,\\mathrm{cm}^{-3}\\,\\mathrm{s}^{-1}$。\n\n设 $x_6$ 表示 $^{6}\\text{Li}$ 在总锂中的原子分数（因此 $^{7}\\text{Li}$ 的原子分数为 $1-x_6$）。使用基本反应率定义，确定在给定的 $\\phi_f$ 和 $E_f$ 条件下，为达到目标 $R_T$ 所需的丰度 $x_6$。将您的答案表示为一个纯数（无单位），并将结果四舍五入到四位有效数字。",
            "solution": "问题陈述已经过严格验证，被认为是有效的。它在科学上基于核反应物理学原理，特别是与聚变反应堆包层中的氚增殖相关。该问题定义明确、客观，并包含所有必要信息，以确定所要求变量——$^{6}\\text{Li}$ 丰度分数 $x_6$ 的唯一且有意义的解。所有提供的物理量都在聚变系统设计研究的实际范围内。诸如单能中子通量之类的简化，是局部、一阶分析的标准假设。\n\n求解过程首先建立总氚生产率密度 $R_T$ 的控制方程，然后求解未知的 $^{6}\\text{Li}$ 原子分数 $x_6$。\n\n总氚生产率密度 $R_T$ 是由两个指定反应的生产率之和：${}^{6}\\text{Li}(n,\\alpha)\\text{T}$ 反应和 ${}^{7}\\text{Li}(n,n'\\alpha)\\text{T}$ 反应。\n$$R_T = R_{T,6} + R_{T,7}$$\n其中 $R_{T,6}$ 是来自 $^{6}\\text{Li}$ 的反应率密度，$R_{T,7}$ 是来自 $^{7}\\text{Li}$ 的反应率密度。\n\n给定过程的反应率密度定义为靶核素数密度 $N$、微观截面 $\\sigma$ 和入射粒子通量 $\\phi$ 的乘积。\n$$R = N \\sigma \\phi$$\n设 $x_6$ 是锂混合物中 $^{6}\\text{Li}$ 的原子分数。因此，$^{7}\\text{Li}$ 的原子分数是 $1-x_6$。增殖区中锂的总原子数密度给定为 $N_{\\mathrm{Li}}$。因此，锂同位素各自的数密度为：\n- $^{6}\\text{Li}$ 的数密度：$N_6 = x_6 N_{\\mathrm{Li}}$\n- $^{7}\\text{Li}$ 的数密度：$N_7 = (1-x_6) N_{\\mathrm{Li}}$\n\n使用这些定义，每种同位素的氚生产率密度可以写为：\n$$R_{T,6} = N_6 \\sigma_6(E_f) \\phi_f = x_6 N_{\\mathrm{Li}} \\sigma_6(E_f) \\phi_f$$\n$$R_{T,7} = N_7 \\sigma_7(E_f) \\phi_f = (1-x_6) N_{\\mathrm{Li}} \\sigma_7(E_f) \\phi_f$$\n其中 $\\sigma_6(E_f)$ 和 $\\sigma_7(E_f)$ 是在中子能量 $E_f$ 下各自产氚反应的微观截面，$\\phi_f$ 是快中子通量。\n\n将这些表达式代入总氚生产率密度的方程中，得到：\n$$R_T = x_6 N_{\\mathrm{Li}} \\sigma_6(E_f) \\phi_f + (1-x_6) N_{\\mathrm{Li}} \\sigma_7(E_f) \\phi_f$$\n为了求解 $x_6$，我们可以提取公因式 $N_{\\mathrm{Li}}$ 和 $\\phi_f$：\n$$R_T = N_{\\mathrm{Li}} \\phi_f \\left[ x_6 \\sigma_6(E_f) + (1-x_6) \\sigma_7(E_f) \\right]$$\n展开括号内的项：\n$$R_T = N_{\\mathrm{Li}} \\phi_f \\left[ x_6 \\sigma_6(E_f) + \\sigma_7(E_f) - x_6 \\sigma_7(E_f) \\right]$$\n合并含有 $x_6$ 的项：\n$$R_T = N_{\\mathrm{Li}} \\phi_f \\left[ x_6 (\\sigma_6(E_f) - \\sigma_7(E_f)) + \\sigma_7(E_f) \\right]$$\n现在，我们重新整理方程以分离出 $x_6$：\n$$\\frac{R_T}{N_{\\mathrm{Li}} \\phi_f} = x_6 (\\sigma_6(E_f) - \\sigma_7(E_f)) + \\sigma_7(E_f)$$\n$$\\frac{R_T}{N_{\\mathrm{Li}} \\phi_f} - \\sigma_7(E_f) = x_6 (\\sigma_6(E_f) - \\sigma_7(E_f))$$\n$$x_6 = \\frac{\\frac{R_T}{N_{\\mathrm{Li}} \\phi_f} - \\sigma_7(E_f)}{\\sigma_6(E_f) - \\sigma_7(E_f)}$$\n这是所需 $^{6}\\text{Li}$ 丰度的解析表达式。现在我们代入给定的数值。首先，我们计算局部锂原子数密度 $N_{\\mathrm{Li}}$：\n$$N_{\\mathrm{Li}} = f_v^{\\mathrm{Li}} n_{\\mathrm{Li}}^{0} = 0.35 \\times (4.6 \\times 10^{22}\\,\\mathrm{cm}^{-3}) = 1.61 \\times 10^{22}\\,\\mathrm{cm}^{-3}$$\n截面必须从靶恩（$b$）转换为 $\\mathrm{cm}^2$，其中 $1\\,\\mathrm{b} = 10^{-24}\\,\\mathrm{cm}^2$：\n$$\\sigma_6(E_f) = 0.09\\,\\mathrm{b} = 0.09 \\times 10^{-24}\\,\\mathrm{cm}^2 = 9 \\times 10^{-26}\\,\\mathrm{cm}^2$$\n$$\\sigma_7(E_f) = 0.03\\,\\mathrm{b} = 0.03 \\times 10^{-24}\\,\\mathrm{cm}^2 = 3 \\times 10^{-26}\\,\\mathrm{cm}^2$$\n其余的数值为：\n$$\\phi_f = 2.5 \\times 10^{15}\\,\\mathrm{cm}^{-2}\\,\\mathrm{s}^{-1}$$\n$$R_T = 2.40 \\times 10^{12}\\,\\mathrm{cm}^{-3}\\,\\mathrm{s}^{-1}$$\n现在，我们计算 $x_6$ 表达式中的各项。首先，是乘积 $N_{\\mathrm{Li}} \\phi_f$：\n$$N_{\\mathrm{Li}} \\phi_f = (1.61 \\times 10^{22}\\,\\mathrm{cm}^{-3}) \\times (2.5 \\times 10^{15}\\,\\mathrm{cm}^{-2}\\,\\mathrm{s}^{-1}) = 4.025 \\times 10^{37}\\,\\mathrm{cm}^{-5}\\,\\mathrm{s}^{-1}$$\n接下来，计算项 $\\frac{R_T}{N_{\\mathrm{Li}} \\phi_f}$：\n$$\\frac{R_T}{N_{\\mathrm{Li}} \\phi_f} = \\frac{2.40 \\times 10^{12}\\,\\mathrm{cm}^{-3}\\,\\mathrm{s}^{-1}}{4.025 \\times 10^{37}\\,\\mathrm{cm}^{-5}\\,\\mathrm{s}^{-1}} \\approx 5.96273 \\times 10^{-26}\\,\\mathrm{cm}^2$$\n现在，将这些计算出的值代入 $x_6$ 的方程中：\n$$x_6 = \\frac{(5.96273 \\times 10^{-26}\\,\\mathrm{cm}^2) - (3 \\times 10^{-26}\\,\\mathrm{cm}^2)}{(9 \\times 10^{-26}\\,\\mathrm{cm}^2) - (3 \\times 10^{-26}\\,\\mathrm{cm}^2)}$$\n单位 $\\mathrm{cm}^2$ 约掉了，这对于一个无量纲的分数是符合预期的。\n$$x_6 = \\frac{(5.96273 - 3) \\times 10^{-26}}{(9 - 3) \\times 10^{-26}} = \\frac{2.96273}{6}$$\n$$x_6 \\approx 0.493788...$$\n问题要求答案四舍五入到四位有效数字。\n$$x_6 \\approx 0.4938$$\n这个结果在物理上是合理的，因为它介于 $0$ 和 $1$ 之间。这表明，在这些条件下，为达到目标氚增殖率，锂中 $^{6}\\text{Li}$ 同位素的丰度必须富集到大约 $49.38\\%$。",
            "answer": "$$\\boxed{0.4938}$$"
        },
        {
            "introduction": "在单点计算的基础上，这项实践练习将挑战你开发一个简化但功能强大的系统级模型。通过从零开始编写一个双能群中子动力学程序，你将获得将基本守恒方程转化为预测工具的动手经验。这个过程能让你深刻理解中子增殖、慢化和吸收之间的相互作用。",
            "id": "3692301",
            "problem": "针对一个由铍（Be）快中子倍增层和锂（Li）热中子吸收增殖层组成，并受到外部氘-氚（DT）中子源照射的增殖包层，构建一个自洽的双能群中子平衡模型。目标是利用多群动力学和泄漏参数化方法计算稳态群通量和反应率，并实现一个程序，用一小组参数值测试套件来求解该模型。\n\n从稳态下的基本中子守恒陈述开始：对于每个能群，总产生率等于总移除率。令 $g=1$ 表示快中子群，$g=2$ 表示热中子群。考虑以下物理要素：\n\n- 将宏观截面 $\\Sigma$ 定义为 $\\Sigma = N \\sigma$，其中 $N$ 是数密度，$\\sigma$ 是微观截面。为方便起见，将所有提供的截面都视为宏观截面（单位：$\\text{cm}^{-1}$）。\n- 令 Beryllium 和 Lithium 的体积分数分别为 $v_{\\mathrm{Be}}$ 和 $v_{\\mathrm{Li}}$，且 $v_{\\mathrm{Be}} + v_{\\mathrm{Li}} = 1$。\n- 通过引入与群相关的伪移除截面 $\\Sigma_{L,1}$ 和 $\\Sigma_{L,2}$ 来模拟泄漏，这两个截面表示从中子计算域损失到周围屏蔽层的中子；将它们视为有效的移除项。\n- 令外部 DT 中子源仅馈入快中子群，其强度为 $S_0$，单位为 $\\text{n}/(\\text{cm}^3\\cdot \\text{s})$。\n- 通过 Beryllium 的 $(n,2n)$ 反应来捕捉快中子倍增。用 $\\Sigma_{m}^{\\mathrm{Be}}$ 表示 Beryllium 中的宏观倍增截面（对群 $g=1$ 有效），并令 $\\eta_{\\mathrm{Be}}$ 为每次 $(n,2n)$ 反应产生的净增中子数；对于 $(n,2n)$ 反应，$\\eta_{\\mathrm{Be}} = 1$，因为一个入射中子产生两个出射中子，净增一个中子。\n- 从快中子群到热中子群的向下散射由作用于快中子群的有效移除截面 $\\Sigma_{s,12}^{\\mathrm{eff}}$ 参数化，该项为热中子群贡献一个等量的源。使用体积分数加权混合：$\\Sigma_{s,12}^{\\mathrm{eff}} = v_{\\mathrm{Be}} \\Sigma_{s,12}^{\\mathrm{Be}} + v_{\\mathrm{Li}} \\Sigma_{s,12}^{\\mathrm{Li}}$。\n- 按群的吸收截面按材料指定，并按体积分数混合：$\\Sigma_{a,1}^{\\mathrm{eff}} = v_{\\mathrm{Be}}\\Sigma_{a,1}^{\\mathrm{Be}} + v_{\\mathrm{Li}}\\Sigma_{a,1}^{\\mathrm{Li}}$ 和 $\\Sigma_{a,2}^{\\mathrm{eff}} = v_{\\mathrm{Be}}\\Sigma_{a,2}^{\\mathrm{Be}} + v_{\\mathrm{Li}}\\Sigma_{a,2}^{\\mathrm{Li}}$。\n- Lithium 中的氚生成主要由 Lithium-6 的 $(n,t)$ 反应主导；用 $\\Sigma_{t}^{\\mathrm{Li}}$ 表示其宏观热群截面，并据此计算其反应率。\n\n假设从热群到快群的向上散射可忽略不计，即没有 $\\Sigma_{s,21}$ 项，且外部热源为零。在这些假设下，体平均的稳态群平衡方程为：\n\n$$\n\\text{快中子群:}\\quad S_0 + \\eta_{\\mathrm{Be}}\\, v_{\\mathrm{Be}}\\, \\Sigma_{m}^{\\mathrm{Be}}\\, \\phi_1 \\;=\\; \\left( \\Sigma_{a,1}^{\\mathrm{eff}} + \\Sigma_{s,12}^{\\mathrm{eff}} + \\Sigma_{L,1} \\right)\\, \\phi_1,\n$$\n\n$$\n\\text{热中子群:}\\quad \\Sigma_{s,12}^{\\mathrm{eff}}\\, \\phi_1 \\;=\\; \\left( \\Sigma_{a,2}^{\\mathrm{eff}} + \\Sigma_{L,2} \\right)\\, \\phi_2,\n$$\n\n其中 $\\phi_1$ 和 $\\phi_2$ 是未知的稳态群通量，单位为 $\\text{n}/(\\text{cm}^2\\cdot \\text{s})$。\n\n根据这些通量，计算以下单位体积的反应率（单位均为 $\\text{n}/(\\text{cm}^3\\cdot \\text{s})$）：\n\n- 净 Be 倍增率（产生的额外中子）：$R_{m,\\mathrm{Be}} = \\eta_{\\mathrm{Be}}\\, v_{\\mathrm{Be}}\\, \\Sigma_{m}^{\\mathrm{Be}}\\, \\phi_1$。\n- Lithium 氚生成率：$R_{t,\\mathrm{Li}} = v_{\\mathrm{Li}}\\, \\Sigma_{t}^{\\mathrm{Li}}\\, \\phi_2$。\n- Lithium 总热吸收率：$R_{a,\\mathrm{Li}} = v_{\\mathrm{Li}}\\, \\Sigma_{a,2}^{\\mathrm{Li}}\\, \\phi_2$。\n\n对于每个测试用例，您的程序必须使用上述平衡方程求解 $\\phi_1$ 和 $\\phi_2$ 的 $2\\times 2$ 稳态系统，然后计算列出的三种反应率。\n\n将所有通量以 $\\text{n}/(\\text{cm}^2\\cdot \\text{s})$ 为单位，所有反应率以 $\\text{n}/(\\text{cm}^3\\cdot \\text{s})$ 为单位，表示为十进制浮点数。\n\n使用以下参数集测试套件实现您的解法，每组参数集以 $(v_{\\mathrm{Be}}, v_{\\mathrm{Li}}, \\Sigma_{a,1}^{\\mathrm{Be}}, \\Sigma_{a,1}^{\\mathrm{Li}}, \\Sigma_{s,12}^{\\mathrm{Be}}, \\Sigma_{s,12}^{\\mathrm{Li}}, \\Sigma_{m}^{\\mathrm{Be}}, \\eta_{\\mathrm{Be}}, \\Sigma_{a,2}^{\\mathrm{Be}}, \\Sigma_{a,2}^{\\mathrm{Li}}, \\Sigma_{t}^{\\mathrm{Li}}, \\Sigma_{L,1}, \\Sigma_{L,2}, S_0)$ 的形式给出，单位为 $(\\text{无量纲}, \\text{无量纲}, \\text{cm}^{-1}, \\text{cm}^{-1}, \\text{cm}^{-1}, \\text{cm}^{-1}, \\text{cm}^{-1}, \\text{无量纲}, \\text{cm}^{-1}, \\text{cm}^{-1}, \\text{cm}^{-1}, \\text{cm}^{-1}, \\text{cm}^{-1}, \\text{n}/(\\text{cm}^3\\cdot \\text{s}))$：\n\n- 情况 A（正常路径，中等倍增）：\n  - $v_{\\mathrm{Be}} = 0.35$, $v_{\\mathrm{Li}} = 0.65$,\n  - $\\Sigma_{a,1}^{\\mathrm{Be}} = 0.002$, $\\Sigma_{a,1}^{\\mathrm{Li}} = 0.005$,\n  - $\\Sigma_{s,12}^{\\mathrm{Be}} = 0.18$, $\\Sigma_{s,12}^{\\mathrm{Li}} = 0.05$,\n  - $\\Sigma_{m}^{\\mathrm{Be}} = 0.015$, $\\eta_{\\mathrm{Be}} = 1.0$,\n  - $\\Sigma_{a,2}^{\\mathrm{Be}} = 0.001$, $\\Sigma_{a,2}^{\\mathrm{Li}} = 0.90$, $\\Sigma_{t}^{\\mathrm{Li}} = 0.70$,\n  - $\\Sigma_{L,1} = 0.03$, $\\Sigma_{L,2} = 0.02$,\n  - $S_0 = 10^7$.\n- 情况 B（边界条件，无 Be 倍增）：\n  - $v_{\\mathrm{Be}} = 0.35$, $v_{\\mathrm{Li}} = 0.65$,\n  - $\\Sigma_{a,1}^{\\mathrm{Be}} = 0.002$, $\\Sigma_{a,1}^{\\mathrm{Li}} = 0.005$,\n  - $\\Sigma_{s,12}^{\\mathrm{Be}} = 0.18$, $\\Sigma_{s,12}^{\\mathrm{Li}} = 0.05$,\n  - $\\Sigma_{m}^{\\mathrm{Be}} = 0.0$, $\\eta_{\\mathrm{Be}} = 1.0$,\n  - $\\Sigma_{a,2}^{\\mathrm{Be}} = 0.001$, $\\Sigma_{a,2}^{\\mathrm{Li}} = 0.90$, $\\Sigma_{t}^{\\mathrm{Li}} = 0.70$,\n  - $\\Sigma_{L,1} = 0.03$, $\\Sigma_{L,2} = 0.02$,\n  - $S_0 = 10^7$.\n- 情况 C（近临界倍增，强 Be (n,2n) 反应）：\n  - $v_{\\mathrm{Be}} = 0.35$, $v_{\\mathrm{Li}} = 0.65$,\n  - $\\Sigma_{a,1}^{\\mathrm{Be}} = 0.002$, $\\Sigma_{a,1}^{\\mathrm{Li}} = 0.005$,\n  - $\\Sigma_{s,12}^{\\mathrm{Be}} = 0.18$, $\\Sigma_{s,12}^{\\mathrm{Li}} = 0.05$,\n  - $\\Sigma_{m}^{\\mathrm{Be}} = 0.20$, $\\eta_{\\mathrm{Be}} = 1.0$,\n  - $\\Sigma_{a,2}^{\\mathrm{Be}} = 0.001$, $\\Sigma_{a,2}^{\\mathrm{Li}} = 0.90$, $\\Sigma_{t}^{\\mathrm{Li}} = 0.70$,\n  - $\\Sigma_{L,1} = 0.03$, $\\Sigma_{L,2} = 0.02$,\n  - $S_0 = 10^7$.\n- 情况 D（边缘情况，高泄漏代表强屏蔽损失）：\n  - $v_{\\mathrm{Be}} = 0.35$, $v_{\\mathrm{Li}} = 0.65$,\n  - $\\Sigma_{a,1}^{\\mathrm{Be}} = 0.002$, $\\Sigma_{a,1}^{\\mathrm{Li}} = 0.005$,\n  - $\\Sigma_{s,12}^{\\mathrm{Be}} = 0.18$, $\\Sigma_{s,12}^{\\mathrm{Li}} = 0.05$,\n  - $\\Sigma_{m}^{\\mathrm{Be}} = 0.015$, $\\eta_{\\mathrm{Be}} = 1.0$,\n  - $\\Sigma_{a,2}^{\\mathrm{Be}} = 0.001$, $\\Sigma_{a,2}^{\\mathrm{Li}} = 0.90$, $\\Sigma_{t}^{\\mathrm{Li}} = 0.70$,\n  - $\\Sigma_{L,1} = 0.20$, $\\Sigma_{L,2} = 0.15$,\n  - $S_0 = 10^7$.\n\n您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表形式的结果，每个测试用例的结果是一个包含五个浮点数的列表，顺序为 $[\\phi_1, \\phi_2, R_{t,\\mathrm{Li}}, R_{m,\\mathrm{Be}}, R_{a,\\mathrm{Li}}]$。例如，输出格式应类似于 $[[x_1,x_2,x_3,x_4,x_5],[y_1,y_2,y_3,y_4,y_5],\\ldots]$，所有量均以指定单位表示。",
            "solution": "用户提供了一个问题陈述，要求为简化的聚变增殖包层开发并求解一个双能群中子平衡模型。验证和求解过程将以STEM领域所期望的严谨性进行。\n\n### 问题验证\n\n**第 1 步：提取给定条件**\n\n该问题提供了以下定义、参数和控制方程：\n- **能群**：快中子群 ($g=1$)，热中子群 ($g=2$)。\n- **宏观截面**：$\\Sigma = N \\sigma$。\n- **体积分数**：$v_{\\mathrm{Be}}$ 代表 Beryllium，$v_{\\mathrm{Li}}$ 代表 Lithium，且 $v_{\\mathrm{Be}} + v_{\\mathrm{Li}} = 1$。\n- **泄漏模型**：伪移除截面 $\\Sigma_{L,1}$ 和 $\\Sigma_{L,2}$。\n- **外部源**：$S_0$（仅快中子群），单位为 $\\text{n}/(\\text{cm}^3\\cdot \\text{s})$。\n- **中子倍增**：在 Beryllium 中，通过 $(n,2n)$ 反应。宏观截面 $\\Sigma_{m}^{\\mathrm{Be}}$，每次反应的净增中子数 $\\eta_{\\mathrm{Be}} = 1$。\n- **向下散射**：从快中子群到热中子群，由有效截面 $\\Sigma_{s,12}^{\\mathrm{eff}} = v_{\\mathrm{Be}} \\Sigma_{s,12}^{\\mathrm{Be}} + v_{\\mathrm{Li}} \\Sigma_{s,12}^{\\mathrm{Li}}$ 控制。\n- **吸收**：按群的有效截面：\n  - $\\Sigma_{a,1}^{\\mathrm{eff}} = v_{\\mathrm{Be}}\\Sigma_{a,1}^{\\mathrm{Be}} + v_{\\mathrm{Li}}\\Sigma_{a,1}^{\\mathrm{Li}}$\n  - $\\Sigma_{a,2}^{\\mathrm{eff}} = v_{\\mathrm{Be}}\\Sigma_{a,2}^{\\mathrm{Be}} + v_{\\mathrm{Li}}\\Sigma_{a,2}^{\\mathrm{Li}}$\n- **氚生成**：在 Lithium 中，热群宏观截面 $\\Sigma_{t}^{\\mathrm{Li}}$。\n- **稳态平衡方程**：\n  - 快中子群 ($g=1$)：$S_0 + \\eta_{\\mathrm{Be}}\\, v_{\\mathrm{Be}}\\, \\Sigma_{m}^{\\mathrm{Be}}\\, \\phi_1 \\;=\\; \\left( \\Sigma_{a,1}^{\\mathrm{eff}} + \\Sigma_{s,12}^{\\mathrm{eff}} + \\Sigma_{L,1} \\right)\\, \\phi_1$\n  - 热中子群 ($g=2$)：$\\Sigma_{s,12}^{\\mathrm{eff}}\\, \\phi_1 \\;=\\; \\left( \\Sigma_{a,2}^{\\mathrm{eff}} + \\Sigma_{L,2} \\right)\\, \\phi_2$\n- **未知数**：快中子通量 $\\phi_1$，热中子通量 $\\phi_2$。\n- **待计算的反应率**：\n  - 净 Be 倍增率：$R_{m,\\mathrm{Be}} = \\eta_{\\mathrm{Be}}\\, v_{\\mathrm{Be}}\\, \\Sigma_{m}^{\\mathrm{Be}}\\, \\phi_1$\n  - Lithium 氚生成率：$R_{t,\\mathrm{Li}} = v_{\\mathrm{Li}}\\, \\Sigma_{t}^{\\mathrm{Li}}\\, \\phi_2$\n  - Lithium 总热吸收率：$R_{a,\\mathrm{Li}} = v_{\\mathrm{Li}}\\, \\Sigma_{a,2}^{\\mathrm{Li}}\\, \\phi_2$\n- **假设**：可忽略的向上散射（$\\Sigma_{s,21}=0$），零外部热源。\n- **测试用例**：为参数提供了四组数值（情况 A、B、C、D）。\n\n**第 2 步：使用提取的给定条件进行验证**\n\n- **科学上成立（关键）**：该问题在根本上是合理的。它基于中子平衡方程，这是反应堆物理和核工程的基石。使用双群扩散/动力学模型是分析核系统中子群体的标准且行之有效的方法。所提及的具体反应——Beryllium 中的 $(n,2n)$ 和 Lithium 中的 $(n,t)$——是 DT 聚变反应堆增殖包层设计中关注的主要反应。\n- **适定性**：该问题是适定的。它提出了一个关于两个未知数 $\\phi_1$ 和 $\\phi_2$ 的两个线性代数方程组。该系统既不是欠定的也不是超定的。快中子群方程可以独立求解 $\\phi_1$，然后该结果可用于求解热中子群方程以得到 $\\phi_2$。只要 $\\phi_1$ 表达式中的分母不为零，就存在唯一解。对参数的检查证实，所有测试用例中的系统都是次临界的，从而得到有限、正值且具有物理意义的通量。\n- **客观性（关键）**：该问题以客观、定量的术语陈述，使用了标准的科学记法和术语，没有主观论断或含糊之处。\n\n问题陈述没有表现出验证标准中列出的任何缺陷。它是科学上有效、自洽且定量明确的。\n\n**第 3 步：结论与操作**\n\n该问题是 **有效的**。将进行求解。\n\n### 解题推导\n\n目标是求解稳态中子通量 $\\phi_1$ 和 $\\phi_2$，然后计算派生的反应率。起点是所提供的中子平衡方程组。\n\n**1. 求解快中子通量 ($\\phi_1$)**\n\n快中子群 ($g=1$) 的平衡方程是：\n$$\nS_0 + \\eta_{\\mathrm{Be}}\\, v_{\\mathrm{Be}}\\, \\Sigma_{m}^{\\mathrm{Be}}\\, \\phi_1 = \\left( \\Sigma_{a,1}^{\\mathrm{eff}} + \\Sigma_{s,12}^{\\mathrm{eff}} + \\Sigma_{L,1} \\right)\\, \\phi_1\n$$\n该方程描述了快中子群中中子产生与移除之间的平衡。产生项是外部源 $S_0$ 和 Beryllium 的 $(n,2n)$ 反应引起的群内倍增。移除项是吸收（$\\Sigma_{a,1}^{\\mathrm{eff}}$）、向热群的外散射（$\\Sigma_{s,12}^{\\mathrm{eff}}$）和泄漏（$\\Sigma_{L,1}$）。\n\n我们可以重新整理方程以求解 $\\phi_1$：\n$$\nS_0 = \\left( \\Sigma_{a,1}^{\\mathrm{eff}} + \\Sigma_{s,12}^{\\mathrm{eff}} + \\Sigma_{L,1} - \\eta_{\\mathrm{Be}}\\, v_{\\mathrm{Be}}\\, \\Sigma_{m}^{\\mathrm{Be}} \\right)\\, \\phi_1\n$$\n我们定义快中子群的净移除截面 $\\Sigma_{R,1}^{\\text{net}}$ 为总移除率减去群内产生率：\n$$\n\\Sigma_{R,1}^{\\text{net}} = \\Sigma_{a,1}^{\\mathrm{eff}} + \\Sigma_{s,12}^{\\mathrm{eff}} + \\Sigma_{L,1} - \\eta_{\\mathrm{Be}}\\, v_{\\mathrm{Be}}\\, \\Sigma_{m}^{\\mathrm{Be}}\n$$\n对于带有外部源的稳态次临界系统，此净移除项必须为正值（$\\Sigma_{R,1}^{\\text{net}} > 0$）。如果它为零或负值，系统将是临界或超临界的，通量不会在恒定源下达到稳态。因此，快中子通量由下式给出：\n$$\n\\phi_1 = \\frac{S_0}{\\Sigma_{R,1}^{\\text{net}}}\n$$\n\n**2. 求解热中子通量 ($\\phi_2$)**\n\n热中子群 ($g=2$) 的平衡方程是：\n$$\n\\Sigma_{s,12}^{\\mathrm{eff}}\\, \\phi_1 = \\left( \\Sigma_{a,2}^{\\mathrm{eff}} + \\Sigma_{L,2} \\right)\\, \\phi_2\n$$\n该方程平衡了热中子的源项（完全来自快中子的向下散射 $\\Sigma_{s,12}^{\\mathrm{eff}}\\, \\phi_1$）与热中子的移除项（通过吸收 $\\Sigma_{a,2}^{\\mathrm{eff}}$ 和泄漏 $\\Sigma_{L,2}$）。\n\n我们定义热中子群的总移除截面 $\\Sigma_{R,2}$：\n$$\n\\Sigma_{R,2} = \\Sigma_{a,2}^{\\mathrm{eff}} + \\Sigma_{L,2}\n$$\n我们可以重新整理方程以求解 $\\phi_2$：\n$$\n\\phi_2 = \\frac{\\Sigma_{s,12}^{\\mathrm{eff}}}{\\Sigma_{a,2}^{\\mathrm{eff}} + \\Sigma_{L,2}}\\, \\phi_1 = \\frac{\\Sigma_{s,12}^{\\mathrm{eff}}}{\\Sigma_{R,2}}\\, \\phi_1\n$$\n\n**3. 计算反应率**\n\n一旦确定了通量 $\\phi_1$ 和 $\\phi_2$，就可以直接根据它们的定义计算所需的单位体积反应率。对于宏观截面为 $\\Sigma$ 的过程，其反应率 $R$ 由 $R = \\Sigma \\phi$ 给出。\n\n- **净 Beryllium 倍增率 ($R_{m,\\mathrm{Be}}$)**：这是 $(n,2n)$ 反应产生*额外*中子的速率。\n$$\nR_{m,\\mathrm{Be}} = \\eta_{\\mathrm{Be}}\\, v_{\\mathrm{Be}}\\, \\Sigma_{m}^{\\mathrm{Be}}\\, \\phi_1\n$$\n注意，项 $v_{\\mathrm{Be}}\\, \\Sigma_{m}^{\\mathrm{Be}}$ 代表在均匀化混合物中该反应的有效宏观截面。\n\n- **Lithium 氚生成率 ($R_{t,\\mathrm{Li}}$)**：这是 Lithium 中 $(n,t)$ 反应（指定在热群中发生）的氚增殖速率。\n$$\nR_{t,\\mathrm{Li}} = v_{\\mathrm{Li}}\\, \\Sigma_{t}^{\\mathrm{Li}}\\, \\phi_2\n$$\n\n- **Lithium 总热吸收率 ($R_{a,\\mathrm{Li}}$)**：这是热群中 Lithium 内总吸收反应的速率。\n$$\nR_{a,\\mathrm{Li}} = v_{\\mathrm{Li}}\\, \\Sigma_{a,2}^{\\mathrm{Li}}\\, \\phi_2\n$$\n\n**4. 计算算法**\n\n对于每组输入参数：\n1.  使用体积分数加权公式计算混合物的有效宏观截面：\n    - $\\Sigma_{a,1}^{\\mathrm{eff}} = v_{\\mathrm{Be}}\\Sigma_{a,1}^{\\mathrm{Be}} + v_{\\mathrm{Li}}\\Sigma_{a,1}^{\\mathrm{Li}}$\n    - $\\Sigma_{a,2}^{\\mathrm{eff}} = v_{\\mathrm{Be}}\\Sigma_{a,2}^{\\mathrm{Be}} + v_{\\mathrm{Li}}\\Sigma_{a,2}^{\\mathrm{Li}}$\n    - $\\Sigma_{s,12}^{\\mathrm{eff}} = v_{\\mathrm{Be}} \\Sigma_{s,12}^{\\mathrm{Be}} + v_{\\mathrm{Li}} \\Sigma_{s,12}^{\\mathrm{Li}}$\n2.  计算快中子群的净移除截面 $\\Sigma_{R,1}^{\\text{net}} = \\Sigma_{a,1}^{\\mathrm{eff}} + \\Sigma_{s,12}^{\\mathrm{eff}} + \\Sigma_{L,1} - \\eta_{\\mathrm{Be}}\\, v_{\\mathrm{Be}}\\, \\Sigma_{m}^{\\mathrm{Be}}$。\n3.  计算快中子通量：$\\phi_1 = S_0 / \\Sigma_{R,1}^{\\text{net}}$。\n4.  计算热中子群的总移除截面 $\\Sigma_{R,2} = \\Sigma_{a,2}^{\\mathrm{eff}} + \\Sigma_{L,2}$。\n5.  计算热中子通量：$\\phi_2 = (\\Sigma_{s,12}^{\\mathrm{eff}} / \\Sigma_{R,2}) \\phi_1$。\n6.  使用计算出的通量计算所需的反应率：$R_{m,\\mathrm{Be}}$、$R_{t,\\mathrm{Li}}$ 和 $R_{a,\\mathrm{Li}}$。\n7.  收集五个输出值：$\\phi_1, \\phi_2, R_{t,\\mathrm{Li}}, R_{m,\\mathrm{Be}}, R_{a,\\mathrm{Li}}$。\n\n将对每个提供的测试用例执行此程序。",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves a two-energy-group neutron balance model for a breeder blanket\n    for a given suite of test cases.\n    \"\"\"\n\n    # Define the test cases from the problem statement.\n    # Each tuple contains:\n    # (v_Be, v_Li, Sigma_a1_Be, Sigma_a1_Li, Sigma_s12_Be, Sigma_s12_Li, \n    #  Sigma_m_Be, eta_Be, Sigma_a2_Be, Sigma_a2_Li, Sigma_t_Li, \n    #  Sigma_L1, Sigma_L2, S0)\n    test_cases = [\n        # Case A: Happy path, moderate multiplication\n        (0.35, 0.65, 0.002, 0.005, 0.18, 0.05, 0.015, 1.0, \n         0.001, 0.90, 0.70, 0.03, 0.02, 1e7),\n        # Case B: Boundary condition, no Be multiplication\n        (0.35, 0.65, 0.002, 0.005, 0.18, 0.05, 0.0, 1.0, \n         0.001, 0.90, 0.70, 0.03, 0.02, 1e7),\n        # Case C: Near-critical multiplication, strong Be (n,2n)\n        (0.35, 0.65, 0.002, 0.005, 0.18, 0.05, 0.20, 1.0, \n         0.001, 0.90, 0.70, 0.03, 0.02, 1e7),\n        # Case D: Edge case, high leakage\n        (0.35, 0.65, 0.002, 0.005, 0.18, 0.05, 0.015, 1.0, \n         0.001, 0.90, 0.70, 0.20, 0.15, 1e7),\n    ]\n\n    results = []\n    for case in test_cases:\n        # Unpack parameters with descriptive names\n        (v_Be, v_Li, \n         Sigma_a1_Be, Sigma_a1_Li, \n         Sigma_s12_Be, Sigma_s12_Li, \n         Sigma_m_Be, eta_Be, \n         Sigma_a2_Be, Sigma_a2_Li, Sigma_t_Li, \n         Sigma_L1, Sigma_L2, S0) = case\n\n        # 1. Calculate effective macroscopic cross-sections\n        Sigma_a1_eff = v_Be * Sigma_a1_Be + v_Li * Sigma_a1_Li\n        Sigma_a2_eff = v_Be * Sigma_a2_Be + v_Li * Sigma_a2_Li\n        Sigma_s12_eff = v_Be * Sigma_s12_Be + v_Li * Sigma_s12_Li\n\n        # 2. Calculate net removal cross-section for the fast group\n        # This is the denominator for the phi_1 calculation.\n        # It includes removal by absorption, scattering-out, leakage,\n        # and production by (n,2n) multiplication.\n        net_removal_g1 = Sigma_a1_eff + Sigma_s12_eff + Sigma_L1 - eta_Be * v_Be * Sigma_m_Be\n\n        # 3. Calculate the fast flux (phi_1)\n        # phi_1 = S0 / net_removal_g1\n        # Check for criticality/supercriticality, though problem cases are subcritical\n        if net_removal_g1 == 0:\n            # In a real scenario, this would indicate a critical or supercritical system,\n            # where flux would diverge. For this problem, we'd get non-physical results.\n            # We set results to NaN to indicate failure.\n            phi_1 = float('nan')\n            phi_2 = float('nan')\n            R_t_Li = float('nan')\n            R_m_Be = float('nan')\n            R_a_Li = float('nan')\n        else:\n            phi_1 = S0 / net_removal_g1\n            \n            # 4. Calculate total removal cross-section for the thermal group\n            total_removal_g2 = Sigma_a2_eff + Sigma_L2\n            \n            # 5. Calculate the thermal flux (phi_2)\n            phi_2 = (Sigma_s12_eff / total_removal_g2) * phi_1\n            \n            # 6. Calculate the required reaction rates\n            # Net Be multiplication rate\n            R_m_Be = eta_Be * v_Be * Sigma_m_Be * phi_1\n            # Lithium tritium production rate\n            R_t_Li = v_Li * Sigma_t_Li * phi_2\n            # Total Lithium thermal absorption rate\n            R_a_Li = v_Li * Sigma_a2_Li * phi_2\n\n        # 7. Collect the five output values in the specified order\n        # [phi_1, phi_2, R_t_Li, R_m_Be, R_a_Li]\n        case_results = [phi_1, phi_2, R_t_Li, R_m_Be, R_a_Li]\n        results.append(case_results)\n\n    # Format the final output string as a list of lists.\n    # e.g., [[val1, val2, ...], [val1, val2, ...]]\n    output_str = f\"[{','.join(map(str, results))}]\"\n    print(output_str)\n\nsolve()\n```"
        },
        {
            "introduction": "最后的这项练习将从分析转向设计，解决一个真实的工程权衡问题。利用一个多层输运模型，你将探索不同材料的排列顺序如何影响聚变堆的整体性能。你的目标是在满足结构材料活化限制的条件下，最大化氚增殖率，这个练习突出了聚变包层设计的多物理场和多目标特性。",
            "id": "3692329",
            "problem": "考虑一个简化的板状几何模型，用于模拟聚变增殖包层，该包层由中子倍增材料、氚增殖材料和结构钢材料组成的不同平面层构成。入射的氘-氚源近似为能量为 $14.1\\,\\mathrm{MeV}$ 的单能中子源，中子布居被离散为三个能群：快能群 ($F$)、超热能群 ($E$) 和热能群 ($T$)。设群通量分数向量表示为 $\\boldsymbol{\\Phi} = [\\phi_F,\\phi_E,\\phi_T]$，初始化为 $\\boldsymbol{\\Phi}_0 = [1,0,0]$，此为无量纲量。每一层根据 Beer–Lambert 定律和群间散射近似来衰减并重新分布群通量。倍增剂中通过 $(n,2n)$ 反应实现的中子倍增由一个有效增益参数捕捉。氚的产生被建模为在增殖层中发生，通过依赖于能群的增殖效率系数实现。结构活化被建模为结构钢层中由快能群相互作用驱动的通量加权照射。\n\n基本原理和定义：\n\n- 使用指数衰减定律 $I(x)=I_0 e^{-\\Sigma_t x}$，其中 $I$ 是中子通量，$x$ 是层厚度，$\\Sigma_t$ 是宏观总截面。对于每种材料 $m$ 和能群 $g \\in \\{F,E,T\\}$，$\\Sigma_{t,m}^{(g)}$ 的单位为 $\\mathrm{cm}^{-1}$。\n\n- 对每种材料层 $m$，使用固定的相互作用通道概率 $p_{m}^{F\\rightarrow E}$ 和 $p_{m}^{E\\rightarrow T}$（无量纲，在 $[0,1]$ 区间内）来模拟单步降散射，该概率应用于每个群中的相互作用部分。为简化起见，忽略上散射和直接的 $F\\rightarrow T$ 跃迁。\n\n- 在倍增剂中，使用一个有效增益系数 $y_m$（无量纲）来模拟倍增，该系数应用于快能群的相互作用部分。\n\n- 设增殖材料对 $F$、$E$ 和 $T$ 能群分别具有增殖效率系数 $k_F$、$k_E$ 和 $k_T$（无量纲）。累积氚增殖比 $R_T$ 作为一个无量纲代理指标，它与增殖层中按 $k_g$ 加权的相互作用通量成正比。\n\n- 设结构钢具有一个活化系数 $\\alpha_{\\mathrm{SS}}$（无量纲），该系数应用于快能群的相互作用部分。累积一个无量纲的活化度量 $A$ 并约束 $A \\le A_{\\max}$。\n\n对于厚度为 $x$ 的材料 $m$ 的每层更新规则：\n\n- 对于每个能群 $g \\in \\{F,E,T\\}$，计算相互作用分数 $f^{(g)} = 1 - e^{-\\Sigma_{t,m}^{(g)} x}$ 和存活分数 $s^{(g)} = e^{-\\Sigma_{t,m}^{(g)} x}$。\n\n- 快能群更新：\n    - 降散射量 $\\Delta_{FE} = \\phi_F \\, f^{(F)} \\, p_{m}^{F\\rightarrow E}$。\n    - 倍增增益 $G_F = \\phi_F \\, f^{(F)} \\, y_m$。\n    - 出射快中子通量分数：$\\phi_F' = \\phi_F \\, s^{(F)} + G_F$。\n\n- 超热能群更新：\n    - 降散射量 $\\Delta_{ET} = \\phi_E \\, f^{(E)} \\, p_{m}^{E\\rightarrow T}$。\n    - 转移前的出射超热能通量分数：$\\phi_E' = \\phi_E \\, s^{(E)}$。\n    - 加上来自快能群的转移：$\\phi_E' \\leftarrow \\phi_E' + \\Delta_{FE}$。\n\n- 热能群更新：\n    - 转移前的出射热能通量分数：$\\phi_T' = \\phi_T \\, s^{(T)}$。\n    - 加上来自超热能群的转移：$\\phi_T' \\leftarrow \\phi_T' + \\Delta_{ET}$。\n\n- 如果 $m$ 是增殖剂，则累积氚增殖比增量\n    $$\\Delta R_T = \\phi_F \\, f^{(F)} \\, k_F + \\phi_E \\, f^{(E)} \\, k_E + \\phi_T \\, f^{(T)} \\, k_T,$$\n  如果 $m$ 是结构钢，则累积活化增量\n    $$\\Delta A = \\phi_F \\, f^{(F)} \\, \\alpha_{\\mathrm{SS}}.$$\n\n处理完一个增殖层后，将增殖层出口能谱形状定义为归一化的通量分数向量\n$$\\widehat{\\boldsymbol{\\Phi}}_{\\mathrm{exit}} = \\frac{\\boldsymbol{\\Phi}_{\\mathrm{after~breeder}}}{\\phi_F + \\phi_E + \\phi_T},$$\n并用欧几里得范数测量其与给定的目标能谱 $\\boldsymbol{\\Phi}^{\\star}$ 的距离\n$$D = \\left\\|\\widehat{\\boldsymbol{\\Phi}}_{\\mathrm{exit}} - \\boldsymbol{\\Phi}^{\\star}\\right\\|_2.$$\n\n目标和约束：\n\n- 对于一个具有固定厚度的预定层序列，考虑倍增剂层和增殖剂层的所有排列顺序，结构钢层固定在下游末端。对于每种排列，计算总氚增殖比 $R_T$、活化度量 $A$ 以及与目标能谱的增殖层出口距离 $D$。约束 $A \\le A_{\\max}$。在所有可行排列中，选择能使标量目标\n$$J = R_T - \\lambda D,$$\n最大化的布置，其中 $\\lambda > 0$ 是一个能谱惩罚权重。报告所选布置可实现的最大 $R_T$。如果没有排列满足活化约束，则报告 $-1.0$。\n\n材料属性（使用以下固定值）：\n\n- 铍倍增剂 (Be): $\\Sigma_{t,\\mathrm{Be}}^{(F)} = 0.30\\,\\mathrm{cm}^{-1}$, $\\Sigma_{t,\\mathrm{Be}}^{(E)} = 0.50\\,\\mathrm{cm}^{-1}$, $\\Sigma_{t,\\mathrm{Be}}^{(T)} = 0.70\\,\\mathrm{cm}^{-1}$, $p_{\\mathrm{Be}}^{F\\rightarrow E} = 0.60$, $p_{\\mathrm{Be}}^{E\\rightarrow T} = 0.30$, $y_{\\mathrm{Be}} = 0.25$。\n\n- 铅倍增剂 (Pb): $\\Sigma_{t,\\mathrm{Pb}}^{(F)} = 0.50\\,\\mathrm{cm}^{-1}$, $\\Sigma_{t,\\mathrm{Pb}}^{(E)} = 0.80\\,\\mathrm{cm}^{-1}$, $\\Sigma_{t,\\mathrm{Pb}}^{(T)} = 0.90\\,\\mathrm{cm}^{-1}$, $p_{\\mathrm{Pb}}^{F\\rightarrow E} = 0.50$, $p_{\\mathrm{Pb}}^{E\\rightarrow T} = 0.25$, $y_{\\mathrm{Pb}} = 0.15$。\n\n- 锂陶瓷增殖剂 (Li): $\\Sigma_{t,\\mathrm{Li}}^{(F)} = 0.20\\,\\mathrm{cm}^{-1}$, $\\Sigma_{t,\\mathrm{Li}}^{(E)} = 0.30\\,\\mathrm{cm}^{-1}$, $\\Sigma_{t,\\mathrm{Li}}^{(T)} = 0.90\\,\\mathrm{cm}^{-1}$, $p_{\\mathrm{Li}}^{F\\rightarrow E} = 0.40$, $p_{\\mathrm{Li}}^{E\\rightarrow T} = 0.50$, $y_{\\mathrm{Li}} = 0.00$。增殖效率: $k_F = 0.05$, $k_E = 0.30$, $k_T = 0.80$。\n\n- 结构钢 (SS): $\\Sigma_{t,\\mathrm{SS}}^{(F)} = 0.60\\,\\mathrm{cm}^{-1}$, $\\Sigma_{t,\\mathrm{SS}}^{(E)} = 0.70\\,\\mathrm{cm}^{-1}$, $\\Sigma_{t,\\mathrm{SS}}^{(T)} = 1.00\\,\\mathrm{cm}^{-1}$, $p_{\\mathrm{SS}}^{F\\rightarrow E} = 0.20$, $p_{\\mathrm{SS}}^{E\\rightarrow T} = 0.10$, $y_{\\mathrm{SS}} = 0.00$。活化系数: $\\alpha_{\\mathrm{SS}} = 0.05$。\n\n测试套件：\n\n对于每个测试用例，您将得到层厚度（厘米）和优化参数 $(\\lambda,A_{\\max},\\boldsymbol{\\Phi}^{\\star})$ 的元组。需要排列的倍增剂-增殖剂层是 Be、Li、Pb；SS 层固定在最后。\n\n- 测试用例 1: Be $10\\,\\mathrm{cm}$, Li $30\\,\\mathrm{cm}$, Pb $8\\,\\mathrm{cm}$, SS $5\\,\\mathrm{cm}$, $\\lambda = 0.05$, $A_{\\max} = 0.35$, $\\boldsymbol{\\Phi}^{\\star} = [0.15,0.55,0.30]$。\n\n- 测试用例 2: Be $12\\,\\mathrm{cm}$, Li $25\\,\\mathrm{cm}$, Pb $6\\,\\mathrm{cm}$, SS $4\\,\\mathrm{cm}$, $\\lambda = 0.05$, $A_{\\max} = 0.20$, $\\boldsymbol{\\Phi}^{\\star} = [0.10,0.60,0.30]$。\n\n- 测试用例 3: Be $6\\,\\mathrm{cm}$, Li $12\\,\\mathrm{cm}$, Pb $12\\,\\mathrm{cm}$, SS $6\\,\\mathrm{cm}$, $\\lambda = 0.05$, $A_{\\max} = 0.18$, $\\boldsymbol{\\Phi}^{\\star} = [0.20,0.50,0.30]$。\n\n- 测试用例 4: Be $18\\,\\mathrm{cm}$, Li $20\\,\\mathrm{cm}$, Pb $15\\,\\mathrm{cm}$, SS $6\\,\\mathrm{cm}$, $\\lambda = 0.05$, $A_{\\max} = 0.40$, $\\boldsymbol{\\Phi}^{\\star} = [0.12,0.58,0.30]$。\n\n所需单位约定：\n\n- 层厚度必须以 $\\mathrm{cm}$ 为单位处理和解释。\n\n- 氚增殖比 $R_T$ 是无量纲的。\n\n- 活化度量 $A$ 是无量纲的。\n\n程序要求：\n\n- 实现每层更新规则以及 $R_T$、$A$ 和增殖层出口能谱形状的累积。对于每个测试用例，搜索三个功能层（Be、Li、Pb）的所有排列，并将 SS 层固定在最后。施加活化约束 $A \\le A_{\\max}$，并在可行布置中最大化 $J = R_T - \\lambda D$。如果不存在可行的布置，则输出 $-1.0$。\n\n- 您的程序应生成单行输出，其中包含测试用例的结果，形式为方括号括起来的逗号分隔列表，按测试用例的顺序排列（例如，$[r_1,r_2,r_3,r_4]$），其中每个 $r_i$ 是第 $i$ 个测试用例可实现的最大 $R_T$（浮点数）。",
            "solution": "所提出的问题是计算物理学中一个适定且有科学依据的练习，具体是模拟聚变反应堆增殖包层中的简化中子输运。该问题是自洽的，所有必要的参数、方程和目标都已明确定义。该模型虽然简化，但基于公认的原理，例如用于衰减的 Beer-Lambert 定律、多能群能量离散化以及对中子倍增和氚增殖等核反应的建模。目标是确定材料的最佳分层以最大化性能指标，这是一个标准的工程设计问题。该问题是有效的，并且可以通过算法解决。\n\n解决方法包括以下步骤：\n1.  **数据结构化**：将每种材料（铍、铅、锂陶瓷和结构钢）的物理属性组织到数据结构中以便于访问。这些属性包括依赖于能群的宏观截面（$\\Sigma_{t,m}^{(g)}$）、降散射概率（$p_{m}^{g_1 \\to g_2}$）、中子倍增产额（$y_m$）、氚增殖系数（$k_g$）和结构活化系数（$\\alpha_{\\mathrm{SS}}$）。\n\n2.  **层模拟**：实现一个函数来模拟中子穿过给定厚度的单个材料层。此函数将入射中子通量向量 $\\boldsymbol{\\Phi}_{\\mathrm{in}} = [\\phi_F, \\phi_E, \\phi_T]$ 作为输入，并计算输出通量向量 $\\boldsymbol{\\Phi}_{\\mathrm{out}} = [\\phi_F', \\phi_E', \\phi_T']$。\n    对于每个能群 $g \\in \\{F,E,T\\}$ 的计算，首先确定相互作用分数 $f^{(g)} = 1 - e^{-\\Sigma_{t,m}^{(g)} x}$ 和存活分数 $s^{(g)} = e^{-\\Sigma_{t,m}^{(g)} x}$。\n\n    然后根据提供的明确规则更新通量分量：\n    -   快能群 ($F$)：出射通量包括穿过该层而未发生相互作用的存活中子，以及来自 $(n,2n)$ 反应的新中子。\n        $$ \\phi_F' = \\phi_F s^{(F)} + \\phi_F f^{(F)} y_m $$\n    -   超热能群 ($E$)：出射通量包括存活的超热中子，以及从快能群降散射下来的中子。\n        $$ \\phi_E' = \\phi_E s^{(E)} + \\phi_F f^{(F)} p_{m}^{F\\to E} $$\n    -   热能群 ($T$)：出射通量包括存活的热中子，以及从超热能群降散射下来的中子。\n        $$ \\phi_T' = \\phi_T s^{(T)} + \\phi_E f^{(E)} p_{m}^{E\\to T} $$\n\n    如果材料是增殖剂 (Li)，该函数还会使用该层的入射通量计算氚增殖比 ($\\Delta R_T$) 的增量变化；如果材料是结构钢 (SS)，则计算活化度量 ($\\Delta A$) 的增量变化。\n    $$ \\Delta R_T = \\phi_F f^{(F)} k_F + \\phi_E f^{(E)} k_E + \\phi_T f^{(T)} k_T $$\n    $$ \\Delta A = \\phi_F f^{(F)} \\alpha_{\\mathrm{SS}} $$\n\n3.  **序列评估**：第二个函数模拟中子穿过整个层序列的输运过程。它将通量向量初始化为 $\\boldsymbol{\\Phi}_0 = [1, 0, 0]$，并将累积度量 $R_T=0$ 和 $A=0$ 初始化。然后，它按指定顺序为序列中的每一层迭代调用单层模拟函数，将一层的输出通量作为下一层的输入，并累积 $\\Delta R_T$ 和 $\\Delta A$。\n\n    至关重要的是，该函数会捕获离开增殖剂 (Li) 层的通量向量 $\\boldsymbol{\\Phi}_{\\mathrm{after~breeder}}$。在模拟完所有层之后，它通过归一化这个捕获的能谱并计算其与目标能谱 $\\boldsymbol{\\Phi}^{\\star}$ 的欧几里得距离来计算能谱距离度量 $D$：\n    $$ \\widehat{\\boldsymbol{\\Phi}}_{\\mathrm{exit}} = \\frac{\\boldsymbol{\\Phi}_{\\mathrm{after~breeder}}}{\\sum_g \\phi_g} $$\n    $$ D = \\left\\| \\widehat{\\boldsymbol{\\Phi}}_{\\mathrm{exit}} - \\boldsymbol{\\Phi}^{\\star} \\right\\|_2 $$\n    该函数返回总 $R_T$、总 $A$ 和距离 $D$。\n\n4.  **优化**：对于每个测试用例，程序生成功能层（Be、Li、Pb）的所有可能排列。共有 $3! = 6$ 种这样的排列。对于每种排列，通过将固定的结构钢 (SS) 层附加在末尾来构建一个完整的层序列。然后为该序列调用`序列评估`函数。\n\n    将得到的总活化度量 $A$ 与约束 $A \\le A_{\\max}$ 进行核对。如果布置是可行的，则计算目标函数 $J = R_T - \\lambda D$。在所有可行排列中，产生最大 $J$ 值的布置被视为最优。\n\n5.  **结果报告**：一个测试用例的最终答案是与最优布置相对应的总氚增殖比 $R_T$。如果没有排列满足活化约束，则结果报告为 $-1.0$。对所有测试用例重复此过程，并将结果编译成一个单一格式的列表。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nfrom itertools import permutations\n\ndef solve():\n    \"\"\"\n    Solves the breeder blanket optimization problem for a suite of test cases.\n    \"\"\"\n\n    # Define material properties as per the problem statement.\n    # Each material has its macroscopic cross-sections (Sigma_t), scattering probabilities (p_scatter),\n    # neutron multiplication yield (y), tritium breeding coefficients (k), and activation coefficient (alpha_SS).\n    MATERIALS = {\n        'Be': {\n            'Sigma_t': np.array([0.30, 0.50, 0.70]),  # For F, E, T groups in cm^-1\n            'p_scatter': {'F_E': 0.60, 'E_T': 0.30},\n            'y': 0.25,\n            'k': np.array([0.0, 0.0, 0.0]),\n            'alpha_SS': 0.0\n        },\n        'Pb': {\n            'Sigma_t': np.array([0.50, 0.80, 0.90]),\n            'p_scatter': {'F_E': 0.50, 'E_T': 0.25},\n            'y': 0.15,\n            'k': np.array([0.0, 0.0, 0.0]),\n            'alpha_SS': 0.0\n        },\n        'Li': {\n            'Sigma_t': np.array([0.20, 0.30, 0.90]),\n            'p_scatter': {'F_E': 0.40, 'E_T': 0.50},\n            'y': 0.00,\n            'k': np.array([0.05, 0.30, 0.80]),\n            'alpha_SS': 0.0\n        },\n        'SS': {\n            'Sigma_t': np.array([0.60, 0.70, 1.00]),\n            'p_scatter': {'F_E': 0.20, 'E_T': 0.10},\n            'y': 0.00,\n            'k': np.array([0.0, 0.0, 0.0]),\n            'alpha_SS': 0.05\n        }\n    }\n\n    def simulate_layer(material_name, thickness, phi_in):\n        \"\"\"\n        Simulates neutron flux passing through a single material layer and calculates metric increments.\n        \"\"\"\n        props = MATERIALS[material_name]\n        phi_F, phi_E, phi_T = phi_in\n\n        # Calculate interacting and survival fractions for each energy group\n        Sigma_t = props['Sigma_t']\n        f = 1 - np.exp(-Sigma_t * thickness)\n        s = np.exp(-Sigma_t * thickness)\n        f_F, f_E, f_T = f\n        s_F, s_E, s_T = s\n\n        # Apply update rules for flux fractions based on scattering, multiplication, and survival\n        p_FE = props['p_scatter']['F_E']\n        p_ET = props['p_scatter']['E_T']\n        y = props['y']\n\n        delta_FE = phi_F * f_F * p_FE\n        G_F = phi_F * f_F * y\n        delta_ET = phi_E * f_E * p_ET\n\n        phi_F_out = phi_F * s_F + G_F\n        phi_E_out = phi_E * s_E + delta_FE\n        phi_T_out = phi_T * s_T + delta_ET\n        phi_out = np.array([phi_F_out, phi_E_out, phi_T_out])\n\n        # Calculate increments for Tritium Breeding Ratio (RT) and Activation (A)\n        delta_RT = 0.0\n        if material_name == 'Li':\n            k_vec = props['k']\n            delta_RT = f_F * phi_F * k_vec[0] + f_E * phi_E * k_vec[1] + f_T * phi_T * k_vec[2]\n\n        delta_A = 0.0\n        if material_name == 'SS':\n            alpha_SS = props['alpha_SS']\n            delta_A = phi_F * f_F * alpha_SS\n            \n        return phi_out, delta_RT, delta_A\n\n    def evaluate_sequence(layer_sequence, phi_star):\n        \"\"\"\n        Simulates a full sequence of layers, returning total RT, A, and spectral distance D.\n        \"\"\"\n        phi = np.array([1.0, 0.0, 0.0])  # Initial flux from D-T source\n        total_RT = 0.0\n        total_A = 0.0\n        phi_after_breeder = None\n\n        for name, thickness in layer_sequence:\n            phi, delta_RT, delta_A = simulate_layer(name, thickness, phi)\n            total_RT += delta_RT\n            total_A += delta_A\n            if name == 'Li':\n                phi_after_breeder = np.copy(phi)\n        \n        # Calculate spectral distance D from the breeder-exit spectrum to the target\n        # Should always find a breeder layer in this problem's setup\n        norm = np.sum(phi_after_breeder) if phi_after_breeder is not None else 0\n        if norm > 1e-12: # Avoid division by zero\n            phi_exit_hat = phi_after_breeder / norm\n        else:\n            phi_exit_hat = np.array([0.0, 0.0, 0.0])\n        D = np.linalg.norm(phi_exit_hat - phi_star)\n            \n        return total_RT, total_A, D\n\n    def solve_case(case_data):\n        \"\"\"\n        Processes a single test case to find the optimal arrangement and its RT.\n        \"\"\"\n        thicknesses, lam, A_max, phi_star_list = case_data\n        phi_star = np.array(phi_star_list)\n        \n        permute_layers = ['Be', 'Li', 'Pb']\n        layer_permutations = permutations(permute_layers)\n        \n        feasible_results = []\n        \n        for p in layer_permutations:\n            # Construct the full layer sequence for the current permutation\n            sequence = [(name, thicknesses[name]) for name in p]\n            sequence.append(('SS', thicknesses['SS']))\n            \n            RT, A, D = evaluate_sequence(sequence, phi_star)\n            \n            # Check the activation constraint\n            if A = A_max:\n                J = RT - lam * D\n                feasible_results.append({'J': J, 'RT': RT})\n                \n        if not feasible_results:\n            return -1.0\n        else:\n            # Find the arrangement that maximizes the objective function J\n            best_result = max(feasible_results, key=lambda x: x['J'])\n            return best_result['RT']\n\n    # Define the test cases from the problem statement.\n    test_cases = [\n        ({'Be': 10, 'Li': 30, 'Pb': 8, 'SS': 5}, 0.05, 0.35, [0.15, 0.55, 0.30]),\n        ({'Be': 12, 'Li': 25, 'Pb': 6, 'SS': 4}, 0.05, 0.20, [0.10, 0.60, 0.30]),\n        ({'Be': 6, 'Li': 12, 'Pb': 12, 'SS': 6}, 0.05, 0.18, [0.20, 0.50, 0.30]),\n        ({'Be': 18, 'Li': 20, 'Pb': 15, 'SS': 6}, 0.05, 0.40, [0.12, 0.58, 0.30]),\n    ]\n    \n    results = [solve_case(case) for case in test_cases]\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(f'{r:.7f}' for r in results)}]\")\n\nsolve()\n```"
        }
    ]
}