{
    "hands_on_practices": [
        {
            "introduction": "要理解计算误差，我们首先必须掌握计算机如何表示数字。本练习通过探索一个简化的浮点数系统，深入探讨了机器精度的基本概念。通过计算机器浮点数（machine epsilon），你将对数字之间最小可分辨的差异有一个具体的理解，而这正是舍入误差的最终来源。",
            "id": "2204331",
            "problem": "考虑一个为低功耗嵌入式控制器设计的假想的8位浮点数系统。在该系统中，每个数字使用1位表示符号（$S$），4位表示偏置指数（$E$），以及3位表示尾数的小数部分（$M$）。\n\n一个数的值由以下公式给出：\n$$V = (-1)^S \\times (1.M)_2 \\times 2^{E - \\text{bias}}$$\n\n尾数是规格化的，意味着其形式为 $(1.M)_2$，表示二进制数 $1$ 后面跟着3位小数 $M$。指数偏置定义为 $\\text{bias} = 2^{k-1} - 1$，其中 $k$ 是指数域的位数。\n\n在任何浮点系统中，都存在一个称为机器ε（$\\epsilon_m$）的基本精度限制。它被定义为在该系统的表示法中，当加到1上时能得到一个大于1的值的最小正数。\n\n计算这个8位浮点数系统的机器ε的值。用十进制形式表示你的答案，作为一个实数。",
            "solution": "我们有一个8位浮点数格式，包含1个符号位、4个指数位和3个尾数小数位。其值由下式给出\n$$\nV = (-1)^{S} (1.M)_{2} 2^{E - \\text{bias}},\n$$\n其中尾数是规格化的，偏置由 $\\text{bias} = 2^{k-1} - 1$ 定义，其中 $k$ 为指数位数。\n\n首先计算 $k=4$ 时的偏置：\n$$\n\\text{bias} = 2^{4-1} - 1 = 2^{3} - 1 = 7.\n$$\n数字 $1$ 通过选择 $S=0$，$E=\\text{bias}$ 和 $M=000$ 来表示，得到\n$$\nV_{1} = (1.000)_{2} \\times 2^{7-7} = 1 \\times 2^{0} = 1.\n$$\n在相同指数下，下一个大于 $1$ 的可表示数具有最小的正尾数增量，即 $M=001$。其值为\n$$\nV_{\\text{next}} = (1.001)_{2} \\times 2^{7-7} = \\left(1 + 2^{-3}\\right) \\times 2^{0} = 1 + 2^{-3}.\n$$\n根据机器ε $\\epsilon_{m}$ 的定义，即在该系统中使 $1 + \\epsilon_{m} > 1$ 成立的最小正数，我们有\n$$\n\\epsilon_{m} = V_{\\text{next}} - V_{1} = \\left(1 + 2^{-3}\\right) - 1 = 2^{-3} = \\frac{1}{8} = 0.125.\n$$\n等价地，由于精度为 $p=1+3=4$ 个有效位（包括隐含的前导 $1$），通用公式 $\\epsilon_{m} = 2^{1-p}$ 得出\n$$\n\\epsilon_{m} = 2^{1-4} = 2^{-3} = 0.125,\n$$\n这与直接构造的结果一致。",
            "answer": "$$\\boxed{0.125}$$"
        },
        {
            "introduction": "除了硬件的限制，误差也可能源于我们选择的数学方法。本问题通过使用麦克劳林级数来近似一个函数，从而演示了截断误差。你将确定需要多少项才能达到期望的精度，这说明了在数值近似中计算成本与精度之间的权衡。",
            "id": "2204306",
            "problem": "一名程序员的任务是为一个专门的计算库实现一个高精度的自然对数函数 `log(y)`。为了处理非常接近 1 的输入 `y`，该函数使用了 $f(x) = \\ln(1+x)$ 的麦克劳林级数展开，其中 $x = y-1$。该麦克劳林级数由下式给出：\n$$ \\ln(1+x) = \\sum_{n=1}^{\\infty} (-1)^{n-1} \\frac{x^n}{n} = x - \\frac{x^2}{2} + \\frac{x^3}{3} - \\frac{x^4}{4} + \\dots $$\n对于一个特定的基准测试，必须计算 $\\ln(1.01)$ 的值。要求是截断误差的绝对值——即 $\\ln(1.01)$ 的真实值与级数部分和之间的差——必须严格小于 $10^{-8}$。\n\n为了保证近似值满足此误差容限，必须对级数的至少多少项求和？你的答案应该是一个整数。",
            "solution": "我们使用其交错麦克劳林级数 $\\sum_{n=1}^{\\infty}(-1)^{n-1}\\frac{x^{n}}{n}$ 来近似 $\\ln(1+x)$，其中 $x=y-1$。对于 $y=1.01$，我们有 $x=0.01=10^{-2}$。$N$ 项部分和 $S_{N}=\\sum_{n=1}^{N}(-1)^{n-1}\\frac{x^{n}}{n}$ 的余项为 $R_{N}=\\ln(1+x)-S_{N}$。由于 $x\\in(0,1)$，项的大小 $a_{n}=\\frac{x^{n}}{n}$ 递减至零，因为\n$$\n\\frac{a_{n+1}}{a_{n}}=\\frac{x^{n+1}}{n+1}\\cdot\\frac{n}{x^{n}}=x\\cdot\\frac{n}{n+1}  1,\n$$\n所以交错级数的余项满足莱布尼茨界\n$$\n|R_{N}|\\leq a_{N+1}=\\frac{x^{N+1}}{N+1}.\n$$\n为了保证 $|R_{N}|  10^{-8}$，我们只需满足\n$$\n\\frac{x^{N+1}}{N+1}  10^{-8}.\n$$\n代入 $x=10^{-2}$，我们检验使不等式成立的最小整数 $N$：\n-   若 $N=2$：$|R_2| \\le \\frac{(10^{-2})^3}{3} = \\frac{10^{-6}}{3} \\approx 3.33 \\times 10^{-7}$，这不小于 $10^{-8}$。\n-   若 $N=3$：$|R_3| \\le \\frac{(10^{-2})^4}{4} = \\frac{10^{-8}}{4} = 2.5 \\times 10^{-9}$，这小于 $10^{-8}$。\n因此，至少需要3项才能满足误差容限。",
            "answer": "$$\\boxed{3}$$"
        },
        {
            "introduction": "有时，即使数字精确、数学公式正确，我们组织计算的方式也可能导致灾难性的误差。本练习通过比较两个代数上等价的方差公式，揭示了一个被称为“灾难性抵消”的常见陷阱。这个动手实践的计算将突显在科学计算中选择数值稳定算法的至关重要性。",
            "id": "2204336",
            "problem": "一位质量控制工程师正在测量来自同一生产批次的三个高精度钢棒的长度。测量结果记录为 $x_1 = 10000.001$ 毫米，$x_2 = 10000.002$ 毫米，以及 $x_3 = 10000.003$ 毫米。工程师需要计算这三个长度的总体方差。\n\n该工程师使用一台浮点精度有限的计算器。这台计算器在执行每次算术运算和存储每个中间结果时，都会四舍五入到8位有效数字。\n\n总体方差 $\\sigma^2$ 可以用两种不同的公式计算：\n1.  “单遍”计算公式：$\\sigma^2 = \\left(\\frac{1}{N}\\sum_{i=1}^{N} x_i^2\\right) - \\mu^2$，其中 $\\mu = \\frac{1}{N}\\sum_{i=1}^{N} x_i$。\n2.  “双遍”定义公式：$\\sigma^2 = \\frac{1}{N}\\sum_{i=1}^{N} (x_i - \\mu)^2$。\n\n设 $V_1$ 是使用单遍公式计算出的方差，$V_2$ 是使用双遍公式计算出的方差，两者都受到计算器四舍五入的限制。对于标准差远小于其均值的数据，双遍公式在数值上已知是更稳定的。因此，在本问题中，我们将 $V_2$ 视为更准确的值。\n\n计算单遍公式结果相对于双遍公式结果的相对误差 $E_{rel}$，其定义为 $E_{rel} = \\frac{|V_2 - V_1|}{|V_2|}$。将相对误差的最终答案四舍五入到四位有效数字。",
            "solution": "我们已知三个测量值 $x_{1}=10000.001$，$x_{2}=10000.002$，$x_{3}=10000.003$，且 $N=3$。每次运算和中间存储结果都四舍五入到8位有效数字。\n\n首先计算两种方法都用到的均值。求和：\n$$x_{1}+x_{2}=20000.003 \\quad(\\text{已经是8位有效数字})，$$\n$$x_{1}+x_{2}+x_{3}=30000.006 \\quad(\\text{已经是8位有效数字})。$$\n然后\n$$\\mu=\\frac{1}{3}(30000.006)=10000.002 \\quad(\\text{四舍五入到8位有效数字})。$$\n\n单遍（计算）方差 $V_{1}=\\left(\\frac{1}{N}\\sum x_{i}^{2}\\right)-\\mu^{2}$，每次运算后四舍五入到8位有效数字：\n- 将每个 $x_{i}$ 平方并四舍五入到8位有效数字：\n$$x_{1}^{2}=100000020.000001 \\to 1.0000002\\times 10^{8},$$\n$$x_{2}^{2}=100000040.000004 \\to 1.0000004\\times 10^{8},$$\n$$x_{3}^{2}=100000060.000009 \\to 1.0000006\\times 10^{8}。$$\n- 求和并取平均（保持8位有效数字的四舍五入）：\n$$\\sum x_{i}^{2}=3.0000012\\times 10^{8},\\qquad \\frac{1}{3}\\sum x_{i}^{2}=1.0000004\\times 10^{8}。$$\n- 将四舍五入后的均值平方并四舍五入到8位有效数字：\n$$\\mu^{2}=(10000.002)^{2}=100000040.000004\\to 1.0000004\\times 10^{8}。$$\n- 相减：\n$$V_{1}=\\left(1.0000004\\times 10^{8}\\right)-\\left(1.0000004\\times 10^{8}\\right)=0。$$\n\n双遍（定义）方差 $V_{2}=\\frac{1}{N}\\sum (x_{i}-\\mu)^{2}$，每一步都四舍五入到8位有效数字：\n- 偏差（四舍五入到8位有效数字）：\n$$x_{1}-\\mu=-0.001= -1.0000000\\times 10^{-3},\\quad x_{2}-\\mu=0,\\quad x_{3}-\\mu=+0.001=1.0000000\\times 10^{-3}。$$\n- 平方（四舍五入到8位有效数字）：\n$$(x_{1}-\\mu)^{2}=1.0000000\\times 10^{-6},\\quad (x_{2}-\\mu)^{2}=0,\\quad (x_{3}-\\mu)^{2}=1.0000000\\times 10^{-6}。$$\n- 求和并取平均：\n$$\\sum (x_{i}-\\mu)^{2}=2.0000000\\times 10^{-6},\\qquad V_{2}=\\frac{1}{3}\\left(2.0000000\\times 10^{-6}\\right)=6.6666667\\times 10^{-7}\\quad(\\text{8位有效数字})。$$\n\n使用这些四舍五入后的结果计算相对误差：\n$$E_{\\text{rel}}=\\frac{|V_{2}-V_{1}|}{|V_{2}|}=\\frac{6.6666667\\times 10^{-7}-0}{6.6666667\\times 10^{-7}}=1。$$\n四舍五入到四位有效数字，结果为 $1.000$。",
            "answer": "$$\\boxed{1.000}$$"
        }
    ]
}