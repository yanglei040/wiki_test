{
    "hands_on_practices": [
        {
            "introduction": "时钟门控是现代功耗管理的基础，通过关闭空闲电路模块的时钟来降低动态功耗。本练习提供了一个动手实践的机会来量化这些节省的功耗。通过分析一个具有突发性工作负载的处理器单元，您将应用基本的动态功耗方程 $P_{\\text{dyn}} = C_{\\text{eff}}V^2 f$，并制定一个考虑到实际开销的门控策略，从而具体理解这项关键技术中所涉及的权衡。",
            "id": "3666961",
            "problem": "一个超标量处理器中的流水线整数乘法器承受着突发性的工作负载：该流水线在连续 $30$ 个周期内提供有效操作数，随后是连续 $20$ 个没有操作数的周期，如此无限重复。这种重复模式意味着有 $40\\%$ 的空闲率。在空闲期间，如果时钟未被门控，乘法器的内部时序元件会继续翻转其本地时钟。\n\n假设如下：\n- 电源电压为 $V = 0.9\\,\\mathrm{V}$，工作频率为 $f = 800\\,\\mathrm{MHz}$。在关注的时间间隔内，动态电压和频率缩放（DVFS）被禁用，因此 $V$ 和 $f$ 是恒定的。\n- 当时钟未被门控时，乘法器及其本地时钟分配的有效时钟电容为 $C_{\\mathrm{eff}} = 160\\,\\mathrm{pF}$。\n- 时钟门控单元的唤醒延迟为 $L_{\\mathrm{wu}} = 2$ 个周期（必须在下一个有效操作数到达前 $2$ 个周期重新启用时钟以满足时序要求）。\n- 为避免抖动，门控控制器在断言门控之前需要 $L_{\\mathrm{det}} = 2$ 个连续的空闲周期。\n- 门控控制逻辑中，每次门控的断言和撤销对会消耗 $E_{\\mathrm{gate}} = 100\\,\\mathrm{pJ}$ 的开销能量。\n\n提出一个合理的时钟门控策略，该策略需遵守上述的检测和唤醒延迟，然后估算在重复的工作负载模式下，通过时钟门控节省的长期平均动态功率。请基于同步电路动态功率的基本原理进行推理。以毫瓦（mW）为单位表示最终节省的功率。将您的答案四舍五入到四位有效数字。",
            "solution": "**1. 理解工作负载模式**\n工作负载每 $30+20 = 50$ 个周期重复一次。\n*   活动周期：$30$\n*   空闲周期：$20$\n*   每个模式的总周期数：$50$\n\n**2. 设计时钟门控策略**\n目标是在空闲期间关闭时钟以节省功耗。我们必须遵守延迟要求：\n*   检测延迟（$L_{\\mathrm{det}} = 2$ 个周期）：我们必须观察到 2 个连续的空闲周期才能对时钟进行门控。\n*   唤醒延迟（$L_{\\mathrm{wu}} = 2$ 个周期）：我们必须在下一个活动周期开始前 2 个周期取消时钟门控。\n\n我们来分析这 20 个周期的空闲期：\n*   空闲期的前 2 个周期用于检测。此时时钟保持开启。\n*   在空闲期第 2 个周期结束时，控制器断言门控。从第 3 个周期开始，时钟关闭。\n*   下一个活动期在 20 个空闲周期后开始。时钟必须在此之前 2 个周期重新启用，因此在空闲期的第 19 和第 20 个周期，时钟必须是开启的。\n*   因此，在这 20 个周期的空闲期内，时钟从第 3 个周期开始到第 18 个周期结束都是被门控的（关闭）。\n*   每个空闲期内门控的周期数 = $18 - 3 + 1 = 16$ 个周期。\n*   空闲期内未门控的周期数 = $20 - 16 = 4$ 个周期（第 1、2、19、20 周期）。\n\n**3. 计算未门控时的动态功率**\n同步电路的动态功率由公式 $P_{\\mathrm{dyn}} = C_{\\mathrm{eff}} V^2 f$ 给出。\n这是乘法器的时钟网络在*未被*门控时消耗的功率。\n给定值：\n*   $C_{\\mathrm{eff}} = 160\\,\\mathrm{pF} = 160 \\times 10^{-12}\\,\\mathrm{F}$\n*   $V = 0.9\\,\\mathrm{V}$\n*   $f = 800\\,\\mathrm{MHz} = 800 \\times 10^6\\,\\mathrm{Hz}$\n\n$P_{\\mathrm{ungated}} = (160 \\times 10^{-12}\\,\\mathrm{F}) \\times (0.9\\,\\mathrm{V})^2 \\times (800 \\times 10^6\\,\\mathrm{Hz})$\n$P_{\\mathrm{ungated}} = 160 \\times 0.81 \\times 800 \\times 10^{-6}\\,\\mathrm{W} = 103680 \\times 10^{-6}\\,\\mathrm{W} = 0.10368\\,\\mathrm{W} = 103.68\\,\\mathrm{mW}$\n\n这是在任何时钟未被门控的周期内所消耗的功率。\n\n**4. 计算通过门控节省的功率**\n节省的功耗来自于在每个 50 周期的模式中关闭时钟 16 个周期。\n每个模式中通过门控节省的能量是未门控功率乘以门控期间的持续时间。\n*   时钟周期 $T = 1/f = 1 / (800 \\times 10^6\\,\\mathrm{Hz}) = 1.25\\,\\mathrm{ns}$。\n*   每个模式通过门控节省的能量：$E_{\\mathrm{saved\\_gating}} = P_{\\mathrm{ungated}} \\times (\\text{门控周期数}) \\times T$\n    $E_{\\mathrm{saved\\_gating}} = 0.10368\\,\\mathrm{W} \\times 16 \\times (1.25 \\times 10^{-9}\\,\\mathrm{s}) = 2.0736\\,\\mathrm{nJ}$\n\n**5. 计算门控开销**\n每次我们对时钟进行门控和取消门控时，都会产生能量开销。\n在我们的 50 周期模式中，我们执行一次门控断言和一次门控撤销。\n*   每个模式的开销能量：$E_{\\mathrm{gate}} = 100\\,\\mathrm{pJ} = 0.1\\,\\mathrm{nJ}$。\n\n**6. 计算净节省功率**\n每个 50 周期模式中净节省的能量是通过门控节省的能量减去开销能量。\n$E_{\\mathrm{net\\_saved}} = E_{\\mathrm{saved\\_gating}} - E_{\\mathrm{gate}} = 2.0736\\,\\mathrm{nJ} - 0.1\\,\\mathrm{nJ} = 1.9736\\,\\mathrm{nJ}$\n\n为了求得平均节省功率，我们将此净节省能量除以模式的总持续时间。\n*   模式的总持续时间 = $50 \\text{ 周期} \\times T = 50 \\times 1.25\\,\\mathrm{ns} = 62.5\\,\\mathrm{ns}$。\n*   $P_{\\mathrm{saved\\_avg}} = \\frac{E_{\\mathrm{net\\_saved}}}{\\text{总持续时间}} = \\frac{1.9736 \\times 10^{-9}\\,\\mathrm{J}}{62.5 \\times 10^{-9}\\,\\mathrm{s}} = 0.0315776\\,\\mathrm{W}$\n\n以毫瓦表示：$P_{\\mathrm{saved\\_avg}} = 31.5776\\,\\mathrm{mW}$。\n\n**7. 最终答案**\n四舍五入到四位有效数字，平均节省的动态功率为 $31.58\\,\\mathrm{mW}$。",
            "answer": "$$ \\boxed{31.58} $$"
        },
        {
            "introduction": "动态电压和频率缩放 (DVFS) 超越了时钟门控的简单开关控制，为功耗与性能之间的权衡提供了更精细的调节。然而，找到运行任务最节能的方式并非总是直观的。本练习挑战您为一个有严格截止期限的任务确定最佳调度方案，通过组合多个DVFS状态来最小化总能耗，从而阐释在操作点的下凸包上进行能量优化调度的强大概念。",
            "id": "3667039",
            "problem": "一个单一的顺序执行核心支持动态电压和频率调整 (DVFS)，具有三个离散的工作点。DVFS 状态如下：\n- $\\left(V_{1}, f_{1}\\right) = \\left(0.7~\\text{V},~1.2~\\text{GHz}\\right)$,\n- $\\left(V_{2}, f_{2}\\right) = \\left(0.9~\\text{V},~1.8~\\text{GHz}\\right)$,\n- $\\left(V_{3}, f_{3}\\right) = \\left(1.1~\\text{V},~2.4~\\text{GHz}\\right)$.\n\n假设动态功耗由 $P_{\\text{dyn}}(V,f) = C_{\\text{eff}} V^{2} f$ 建模，其中有效开关电容 $C_{\\text{eff}} = 1.5 \\times 10^{-9}~\\text{F}$，漏电功耗由 $P_{\\text{leak}}(V) = k_{\\text{leak}} V$ 建模，其中 $k_{\\text{leak}} = 0.4~\\text{W/V}$。一项任务需要 $W = 3.0 \\times 10^{9}$ 个周期，并且必须在 $D = 1.6~\\text{s}$ 的截止时间内完成。电压和频率转换是瞬时发生的，开销可忽略不计。处理器必须在区间 $\\left[0, D\\right]$ 内持续主动执行该任务，不能有空闲间隙；也就是说，它不能提前完成并在截止时间前处于空闲状态。\n\n在区间 $\\left[0, D\\right]$ 内，可以在三个DVFS状态之间任意进行时间共享。令 $t_{i}$ 表示在 $\\left[0, D\\right]$ 期间处于状态 $i$ 的总时间，其中 $t_{i} \\ge 0$。可行性约束为 $\\sum_{i=1}^{3} t_{i} = D$ 和 $\\sum_{i=1}^{3} f_{i} t_{i} = W$。总能量为\n$$\nE \\;=\\; \\int_{0}^{D} P(t)\\,dt \\;=\\; \\sum_{i=1}^{3} \\Big(P_{\\text{dyn}}(V_{i}, f_{i}) + P_{\\text{leak}}(V_{i})\\Big)\\, t_{i}.\n$$\n\n从给定的功耗模型和约束出发，确定所有可行调度下的最小可实现能量。以焦耳为单位表示最终能量，并将您的答案四舍五入到四位有效数字。",
            "solution": "该问题是一个定义明确的约束优化问题，目标是最小化总能量 E，它是每个状态所用时间 $t_i$ 的线性函数：\n$$\nE(t_1, t_2, t_3) = P_1 t_1 + P_2 t_2 + P_3 t_3\n$$\n其中 $P_i$ 是状态 $i$ 下的总功耗。最小化受以下线性约束的限制：\n$$\n\\begin{cases}\nt_1 + t_2 + t_3 = D \\\\\nf_1 t_1 + f_2 t_2 + f_3 t_3 = W \\\\\nt_1, t_2, t_3 \\ge 0\n\\end{cases}\n$$\n这是一个线性规划问题。一个定义在紧凸集上的线性函数，其最小值在极点处取得。可行解将涉及最多在两个DVFS状态之间进行时间共享。\n\n首先，我们使用公式 $P_i = C_{\\text{eff}} V_i^2 f_i + k_{\\text{leak}} V_i$ 计算每个状态 $i \\in \\{1, 2, 3\\}$ 的总功耗 $P_i$。\n对于状态 1：$(V_1, f_1) = (0.7~\\text{V}, 1.2~\\text{GHz})$\n$$P_1 = (1.5 \\times 10^{-9}~\\text{F}) (0.7~\\text{V})^2 (1.2 \\times 10^9~\\text{Hz}) + (0.4~\\text{W/V})(0.7~\\text{V})$$\n$$P_1 = (1.5 \\times 0.49 \\times 1.2)~\\text{W} + 0.28~\\text{W} = 0.882~\\text{W} + 0.28~\\text{W} = 1.162~\\text{W}$$\n\n对于状态 2：$(V_2, f_2) = (0.9~\\text{V}, 1.8~\\text{GHz})$\n$$P_2 = (1.5 \\times 10^{-9}~\\text{F}) (0.9~\\text{V})^2 (1.8 \\times 10^9~\\text{Hz}) + (0.4~\\text{W/V})(0.9~\\text{V})$$\n$$P_2 = (1.5 \\times 0.81 \\times 1.8)~\\text{W} + 0.36~\\text{W} = 2.187~\\text{W} + 0.36~\\text{W} = 2.547~\\text{W}$$\n\n对于状态 3：$(V_3, f_3) = (1.1~\\text{V}, 2.4~\\text{GHz})$\n$$P_3 = (1.5 \\times 10^{-9}~\\text{F}) (1.1~\\text{V})^2 (2.4 \\times 10^9~\\text{Hz}) + (0.4~\\text{W/V})(1.1~\\text{V})$$\n$$P_3 = (1.5 \\times 1.21 \\times 2.4)~\\text{W} + 0.44~\\text{W} = 4.356~\\text{W} + 0.44~\\text{W} = 4.796~\\text{W}$$\n\n我们在频率-功耗平面上有三个工作点：$(1.2~\\text{GHz}, 1.162~\\text{W})$，$(1.8~\\text{GHz}, 2.547~\\text{W})$ 和 $(2.4~\\text{GHz}, 4.796~\\text{W})$。\n\n能量最优调度原则指出，对于目标平均频率 $f_{\\text{avg}}$，应在位于所有工作点集合的下凸包上且满足 $f_i \\le f_{\\text{avg}} \\le f_j$ 的两个工作点 $(f_i, P_i)$ 和 $(f_j, P_j)$ 之间进行时间共享。\n为确定下凸包，我们检查状态2的点 $(f_2, P_2)$ 是否位于连接状态1和状态3的线段下方。\n在频率 $f_2$ 处，连接 $(f_1, P_1)$ 和 $(f_3, P_3)$ 的直线上的功耗为：\n$$ P_{\\text{line}}(f_2) = P_1 + \\frac{P_3 - P_1}{f_3 - f_1}(f_2 - f_1) $$\n$$ P_{\\text{line}}(1.8) = 1.162 + \\frac{4.796 - 1.162}{2.4 - 1.2}(1.8 - 1.2) = 1.162 + \\frac{3.634}{1.2}(0.6) = 1.162 + 1.817 = 2.979~\\text{W} $$\n由于 $P_2 = 2.547~\\text{W}$ 小于 $P_{\\text{line}}(1.8) = 2.979~\\text{W}$，点 $(f_2, P_2)$ 位于该线段下方。因此，下凸包由连接状态1与状态2、以及状态2与状态3的线段构成。\n\n所需的平均频率为 $f_{\\text{avg}} = W/D = (3.0 \\times 10^9) / 1.6 = 1.875~\\text{GHz}$。\n由于 $f_2 = 1.8~\\text{GHz}  f_{\\text{avg}}  f_3 = 2.4~\\text{GHz}$，能量最优策略是在状态2和状态3之间进行独占时间共享。这意味着我们设置 $t_1=0$。\n\n约束简化为关于 $t_2$ 和 $t_3$ 的两个方程组：\n$$ t_2 + t_3 = 1.6 $$\n$$ (1.8 \\times 10^9) t_2 + (2.4 \\times 10^9) t_3 = 3.0 \\times 10^9 $$\n将第二个方程两边同除以 $10^9$ 得到：\n$$ 1.8 t_2 + 2.4 t_3 = 3.0 $$\n由第一个方程，得 $t_3 = 1.6 - t_2$。将其代入第二个方程：\n$$ 1.8 t_2 + 2.4(1.6 - t_2) = 3.0 $$\n$$ 1.8 t_2 + 3.84 - 2.4 t_2 = 3.0 $$\n$$ -0.6 t_2 = 3.0 - 3.84 $$\n$$ -0.6 t_2 = -0.84 $$\n$$ t_2 = \\frac{0.84}{0.6} = 1.4~\\text{s} $$\n那么，在状态3的时间为：\n$$ t_3 = 1.6 - t_2 = 1.6 - 1.4 = 0.2~\\text{s} $$\n时间为 $t_1=0~\\text{s}$，$t_2=1.4~\\text{s}$ 和 $t_3=0.2~\\text{s}$，它们都是非负的。\n\n最后，我们使用这些最优时间计算最小总能量：\n$$ E_{\\text{min}} = P_1 t_1 + P_2 t_2 + P_3 t_3 $$\n$$ E_{\\text{min}} = (1.162~\\text{W})(0~\\text{s}) + (2.547~\\text{W})(1.4~\\text{s}) + (4.796~\\text{W})(0.2~\\text{s}) $$\n$$ E_{\\text{min}} = 0 + 3.5658 + 0.9592 $$\n$$ E_{\\text{min}} = 4.525~\\text{J} $$\n题目要求答案四舍五入到四位有效数字。计算出的值 $4.525$ 已经有四位有效数字。",
            "answer": "$$\n\\boxed{4.525}\n$$"
        },
        {
            "introduction": "尽管形式化优化可以提供理论上的最优解，但现实世界中的功耗控制器通常依赖于基于程序运行时行为的简单而有效的启发式策略。本练习让您扮演系统设计者的角色，任务是评估这样一种启发式策略。您将需要建模分析当工作负载是计算密集型或内存密集型时，执行时间和能耗如何变化，并据此评估一个相应切换频率的策略，从而深入了解自适应功耗管理系统的实际设计。",
            "id": "3666964",
            "problem": "一个处理器实现了动态电压频率调整 (DVFS)，具有两个工作点。每个工作点的动态功耗和泄漏功耗是已知的。对于给定的工作负载，已知在最大频率下的测量执行时间以及该时间中因内存访问而停顿的时间比例。考虑一个简单的控制器：如果内存停顿比例超过一个阈值，它将以最低频率运行工作负载；否则，它将以最高频率运行。您的任务是计算该启发式策略相对于始终在最大频率下运行所带来的每个工作负载的能量节省，并报告一组工作负载的平均节省量。\n\n使用以下基本原理和建模假设作为出发点：\n- 能量是功率对时间的积分：$E=\\int P(t)\\,dt$。对于在固定工作点下的一次运行，总能量为 $E=P_{\\text{total}}\\cdot T$，其中 $T$ 是以秒为单位的执行时间，$P_{\\text{total}}$ 是以瓦特为单位的总功率。\n- 总功率是动态功耗和泄漏功耗分量的总和：$P_{\\text{total}}=P_{\\text{dyn}}+P_{\\text{leak}}$。\n- 动态分量随开关活动而变化，而开关活动取决于频率；泄漏分量取决于工作条件。在本问题中，每个工作点的 $P_{\\text{dyn}}$ 和 $P_{\\text{leak}}$ 是给定的，因此您不应推导它们。\n- 在不同频率下的执行时间会发生变化，因为计算密集型部分的执行时间与频率成反比，而内存停顿部分主要由核外延迟决定，并被建模为与核心频率无关（以秒为单位）。\n\n定义和变量：\n- 最大频率 $f_{\\max}$，单位为赫兹 (Hz)。\n- 最小频率 $f_{\\min}$，单位为赫兹 (Hz)。\n- $f_{\\max}$ 时的动态功耗：$P_{\\text{dyn},\\max}$，单位为瓦特 (W)。\n- $f_{\\max}$ 时的泄漏功耗：$P_{\\text{leak},\\max}$，单位为瓦特 (W)。\n- $f_{\\min}$ 时的动态功耗：$P_{\\text{dyn},\\min}$，单位为瓦特 (W)。\n- $f_{\\min}$ 时的泄漏功耗：$P_{\\text{leak},\\min}$，单位为瓦特 (W)。\n- 对于每个工作负载 $i$，在 $f_{\\max}$ 下测得的执行时间为 $T_{\\max}^{(i)}$（单位：秒(s)），在 $f_{\\max}$ 下测得的内存停顿比例为 $m^{(i)}$，其中 $m^{(i)}\\in[0,1]$ 是 $T_{\\max}^{(i)}$ 中因内存停顿所占的比例。\n- 启发式控制器：如果 $m^{(i)}0.5$，则在 $f_{\\min}$ 下运行；否则，在 $f_{\\max}$ 下运行。\n\n您必须根据上述原理推导出如何计算在任意选定频率 $f\\in\\{f_{\\max},f_{\\min}\\}$ 下的执行时间 $T(f)$。这需要将 $f_{\\max}$ 下的执行时间分解为计算密集型和内存停顿两部分，将计算密集型部分与频率成反比缩放，并保持内存停顿部分不变。然后，计算在选定工作点下的能量 $E(f)=P_{\\text{total}}(f)\\cdot T(f)$ 和基准能量 $E_{\\text{base}}=P_{\\text{total}}(f_{\\max})\\cdot T_{\\max}^{(i)}$。最后，为每个工作负载 $i$ 计算节省量，表示为小数形式 $s^{(i)}=(E_{\\text{base}}-E_{\\text{heur}})/E_{\\text{base}}$。\n\n单位：\n- 频率必须以赫兹 (Hz) 处理，时间以秒 (s) 处理，功率以瓦特 (W) 处理，能量以焦耳 (J) 处理。\n- 将节省量报告为小数值（无单位），不要使用百分号。\n\n工作点和功耗：\n- $f_{\\max}=3.0\\times 10^{9}$ Hz,\n- $f_{\\min}=1.2\\times 10^{9}$ Hz,\n- $P_{\\text{dyn},\\max}=30$ W, $P_{\\text{leak},\\max}=10$ W,\n- $P_{\\text{dyn},\\min}=8$ W, $P_{\\text{leak},\\min}=6$ W.\n\n工作负载测试套件：\n- 工作负载 1: $T_{\\max}^{(1)}=1.0$ s, $m^{(1)}=0.2$.\n- 工作负载 2: $T_{\\max}^{(2)}=1.0$ s, $m^{(2)}=0.8$.\n- 工作负载 3: $T_{\\max}^{(3)}=0.5$ s, $m^{(3)}=0.5$.\n- 工作负载 4: $T_{\\max}^{(4)}=2.0$ s, $m^{(4)}=1.0$.\n- 工作负载 5: $T_{\\max}^{(5)}=0.2$ s, $m^{(5)}=0.0$.\n\n边界条件：\n- 当 $m^{(i)}=0.5$ 时，使用 $f_{\\max}$。\n\n编程任务：\n- 实现一个程序，对于测试套件中的每个工作负载 $i$，计算启发式策略相对于始终在 $f_{\\max}$ 下运行所带来的节省量 $s^{(i)}$，然后计算所有工作负载的平均节省量 $\\bar{s}$。\n\n最终输出格式：\n- 您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表，顺序为 $[s^{(1)},s^{(2)},s^{(3)},s^{(4)},s^{(5)},\\bar{s}]$，每个值都使用标准舍入规则四舍五入到恰好 $6$ 位小数。例如，$[0.123456,0.234567,0.345678,0.456789,0.567890,0.345276]$。",
            "solution": "该问题要求计算一组工作负载在使用一种简单的动态电压频率调整 (DVFS) 启发式策略时的能量节省。解决方案是通过首先根据所提供的原理建立执行时间和能量的数学模型，然后将这些模型应用于具体的工作负载来推导得出。\n\n首先，我们确定两个工作点各自的总功耗。总功耗 $P_{\\text{total}}$ 是其动态功耗 ($P_{\\text{dyn}}$) 和泄漏功耗 ($P_{\\text{leak}}$) 分量的总和。\n\n在最大频率 $f_{\\max} = 3.0 \\times 10^9$ Hz 时：\n$$P_{\\text{total},\\max} = P_{\\text{dyn},\\max} + P_{\\text{leak},\\max} = 30 \\text{ W} + 10 \\text{ W} = 40 \\text{ W}$$\n在最小频率 $f_{\\min} = 1.2 \\times 10^9$ Hz 时：\n$$P_{\\text{total},\\min} = P_{\\text{dyn},\\min} + P_{\\text{leak},\\min} = 8 \\text{ W} + 6 \\text{ W} = 14 \\text{ W}$$\n\n接下来，我们为通用工作负载 $i$ 建立执行时间模型。在最大频率下给定的执行时间 $T_{\\max}^{(i)}$ 由计算密集型部分 $T_{\\text{comp},\\max}^{(i)}$ 和内存停顿部分 $T_{\\text{stall},\\max}^{(i)}$ 组成。给定内存停顿比例 $m^{(i)}$，我们有：\n$$T_{\\text{stall},\\max}^{(i)} = m^{(i)} \\cdot T_{\\max}^{(i)}$$\n$$T_{\\text{comp},\\max}^{(i)} = T_{\\max}^{(i)} - T_{\\text{stall},\\max}^{(i)} = (1 - m^{(i)}) \\cdot T_{\\max}^{(i)}$$\n\n根据建模假设，当核心频率从 $f_{\\text{ref}}$ 变为 $f$ 时，计算密集型部分的执行时间成反比缩放，而内存停顿部分的执行时间（以秒为单位）保持不变。因此，在频率 $f$ 下的总执行时间，记为 $T^{(i)}(f)$，为：\n$$T^{(i)}(f) = T_{\\text{comp},\\max}^{(i)} \\cdot \\frac{f_{\\max}}{f} + T_{\\text{stall},\\max}^{(i)}$$\n代入各部分时间的表达式：\n$$T^{(i)}(f) = (1 - m^{(i)}) \\cdot T_{\\max}^{(i)} \\cdot \\frac{f_{\\max}}{f} + m^{(i)} \\cdot T_{\\max}^{(i)}$$\n$$T^{(i)}(f) = T_{\\max}^{(i)} \\left( (1 - m^{(i)}) \\frac{f_{\\max}}{f} + m^{(i)} \\right)$$\n\n基准能量 $E_{\\text{base}}^{(i)}$ 是在整个执行期间以 $f_{\\max}$ 频率运行时所消耗的能量：\n$$E_{\\text{base}}^{(i)} = P_{\\text{total},\\max} \\cdot T_{\\max}^{(i)}$$\n\n启发式策略下的能量 $E_{\\text{heur}}^{(i)}$ 取决于控制器选择的频率 $f_{\\text{heur}}^{(i)}$。控制器的规则是：如果 $m^{(i)}  0.5$，则使用 $f_{\\min}$；否则（即 $m^{(i)} \\le 0.5$），使用 $f_{\\max}$。\n$$E_{\\text{heur}}^{(i)} = P_{\\text{total}}(f_{\\text{heur}}^{(i)}) \\cdot T^{(i)}(f_{\\text{heur}}^{(i)})$$\n\n能量节省量 $s^{(i)}$ 定义为相对于基准能量的分数减少量：\n$$s^{(i)} = \\frac{E_{\\text{base}}^{(i)} - E_{\\text{heur}}^{(i)}}{E_{\\text{base}}^{(i)}} = 1 - \\frac{E_{\\text{heur}}^{(i)}}{E_{\\text{base}}^{(i)}}$$\n\n我们根据启发式策略的两种情况来分析节省量：\n\n情况 1：低停顿比例 ($m^{(i)} \\le 0.5$)\n启发式策略选择 $f_{\\text{heur}}^{(i)} = f_{\\max}$。执行时间为 $T^{(i)}(f_{\\max}) = T_{\\max}^{(i)}$，能量为 $E_{\\text{heur}}^{(i)} = P_{\\text{total},\\max} \\cdot T_{\\max}^{(i)}$，这与基准能量 $E_{\\text{base}}^{(i)}$ 相同。\n因此，节省量为：\n$$s^{(i)} = 1 - \\frac{E_{\\text{base}}^{(i)}}{E_{\\text{base}}^{(i)}} = 0$$\n\n情况 2：高停顿比例 ($m^{(i)}  0.5$)\n启发式策略选择 $f_{\\text{heur}}^{(i)} = f_{\\min}$。在此频率下的执行时间为 $T^{(i)}(f_{\\min}) = T_{\\max}^{(i)} \\left( (1 - m^{(i)}) \\frac{f_{\\max}}{f_{\\min}} + m^{(i)} \\right)$。能量为 $E_{\\text{heur}}^{(i)} = P_{\\text{total},\\min} \\cdot T^{(i)}(f_{\\min})$。\n代入节省量公式：\n$$s^{(i)} = 1 - \\frac{P_{\\text{total},\\min} \\cdot T_{\\max}^{(i)} \\left( (1 - m^{(i)}) \\frac{f_{\\max}}{f_{\\min}} + m^{(i)} \\right)}{P_{\\text{total},\\max} \\cdot T_{\\max}^{(i)}}$$\n$T_{\\max}^{(i)}$ 项被消去，这表明节省比例仅取决于停顿比例 $m^{(i)}$ 和系统参数，而与工作负载的初始运行时间无关：\n$$s^{(i)} = 1 - \\frac{P_{\\text{total},\\min}}{P_{\\text{total},\\max}} \\left( (1 - m^{(i)}) \\frac{f_{\\max}}{f_{\\min}} + m^{(i)} \\right)$$\n\n我们现在代入数值。关键的比率为：\n- 频率比：$\\frac{f_{\\max}}{f_{\\min}} = \\frac{3.0 \\times 10^9}{1.2 \\times 10^9} = 2.5$\n- 总功耗比：$\\frac{P_{\\text{total},\\min}}{P_{\\text{total},\\max}} = \\frac{14 \\text{ W}}{40 \\text{ W}} = 0.35$\n\n对于 $m^{(i)}  0.5$ 的情况，节省量公式变为：\n$$s^{(i)} = 1 - 0.35 \\left( (1 - m^{(i)}) \\cdot 2.5 + m^{(i)} \\right) = 1 - 0.35 (2.5 - 2.5 m^{(i)} + m^{(i)}) = 1 - 0.35 (2.5 - 1.5 m^{(i)})$$\n\n各工作负载的计算：\n- 工作负载 1: $m^{(1)} = 0.2$。由于 $0.2 \\le 0.5$，所以 $s^{(1)} = 0$。\n- 工作负载 2: $m^{(2)} = 0.8$。由于 $0.8  0.5$，我们使用公式：\n  $s^{(2)} = 1 - 0.35 (2.5 - 1.5 \\cdot 0.8) = 1 - 0.35 (2.5 - 1.2) = 1 - 0.35(1.3) = 1 - 0.455 = 0.545$。\n- 工作负载 3: $m^{(3)} = 0.5$。由于 $0.5 \\le 0.5$，所以 $s^{(3)} = 0$。\n- 工作负载 4: $m^{(4)} = 1.0$。由于 $1.0  0.5$：\n  $s^{(4)} = 1 - 0.35 (2.5 - 1.5 \\cdot 1.0) = 1 - 0.35 (1.0) = 0.65$。\n- 工作负载 5: $m^{(5)} = 0.0$。由于 $0.0 \\le 0.5$，所以 $s^{(5)} = 0$。\n\n单个节省量分别为 $s^{(1)}=0.0$、$s^{(2)}=0.545$、$s^{(3)}=0.0$、$s^{(4)}=0.65$ 和 $s^{(5)}=0.0$。\n\n最后，我们计算 $N=5$ 个工作负载的平均节省量 $\\bar{s}$：\n$$\\bar{s} = \\frac{1}{N} \\sum_{i=1}^{N} s^{(i)} = \\frac{0.0 + 0.545 + 0.0 + 0.65 + 0.0}{5} = \\frac{1.195}{5} = 0.239$$",
            "answer": "$$ \\boxed{[0.000000,0.545000,0.000000,0.650000,0.000000,0.239000]} $$"
        }
    ]
}