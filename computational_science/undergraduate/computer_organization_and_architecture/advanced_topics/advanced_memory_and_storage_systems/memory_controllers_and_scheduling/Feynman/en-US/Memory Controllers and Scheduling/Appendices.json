{
    "hands_on_practices": [
        {
            "introduction": "Before we can optimize memory access, we must first ensure correctness. This practice is a fundamental exercise in understanding the intricate 'rules of the road' for DRAM operation. By manually calculating the minimum time required to execute a sequence of commands, you will gain a concrete appreciation for the various timing constraints that a memory controller must rigorously enforce to prevent data corruption .",
            "id": "3656949",
            "problem": "A memory controller targets a single-rank, single-bank dynamic random-access memory (DRAM) device and must schedule the following fixed sequence of commands to the same bank: Activate ($\\mathrm{ACT}$), Read ($\\mathrm{RD}$), Write ($\\mathrm{WR}$), Read ($\\mathrm{RD}$), Precharge ($\\mathrm{PRE}$). The controller issues at most one command per command clock cycle. All timing parameters below are given in units of command clock cycles.\n\nUse the following device-level constraints, which are the invariant timing rules the controller must obey for correctness:\n- Row-to-column delay: After an $\\mathrm{ACT}$ to a bank, the first column command to that bank (either $\\mathrm{RD}$ or $\\mathrm{WR}$) must be delayed by at least $t_{RCD}$ cycles.\n- Column-to-column delay: Between any two consecutive column commands (any $\\mathrm{RD}$ or $\\mathrm{WR}$) to the same rank, there must be at least $t_{CCD}$ cycles.\n- Read-to-write bus turnaround: From a $\\mathrm{RD}$ to a subsequent $\\mathrm{WR}$, there must be at least $t_{RTW}$ cycles to allow data bus turnaround.\n- Write-to-read bus turnaround: From a $\\mathrm{WR}$ to a subsequent $\\mathrm{RD}$, there must be at least $t_{WTR}$ cycles to allow data bus turnaround.\n- Activate-to-precharge (row active time): After an $\\mathrm{ACT}$ to a bank, a $\\mathrm{PRE}$ to the same bank must be delayed by at least $t_{RAS}$ cycles.\n- Read-to-precharge: After a $\\mathrm{RD}$ to a bank, a $\\mathrm{PRE}$ to the same bank must be delayed by at least $t_{RTP}$ cycles.\n- Write recovery: After a $\\mathrm{WR}$ to a bank, a $\\mathrm{PRE}$ to the same bank must be delayed by at least $t_{WR}$ cycles.\n\nAssume that:\n- The DRAM is idle and precharged before the $\\mathrm{ACT}$ command is issued.\n- The command rate is one command per cycle (one command occupies exactly one command clock cycle).\n- All commands in the sequence target the same bank in the same rank.\n- No other commands are issued to any bank or rank.\n\nThe timing parameters are:\n- $t_{RCD} = 4$, $t_{CCD} = 4$, $t_{RTW} = 6$, $t_{WTR} = 3$, $t_{RAS} = 12$, $t_{RTP} = 4$, $t_{WR} = 6$.\n\nDefine the schedule to start by issuing $\\mathrm{ACT}$ at cycle $0$. Let the schedule length $L$ be the cycle index at which the $\\mathrm{PRE}$ command is issued (that is, the number of cycles elapsed from issuing $\\mathrm{ACT}$ at cycle $0$ to issuing $\\mathrm{PRE}$). Compute the minimum possible $L$ that satisfies all of the above constraints. Express your answer in cycles as a single integer.",
            "solution": "The problem requires the determination of the minimum schedule length for a fixed sequence of dynamic random-access memory (DRAM) commands. The schedule length, $L$, is defined as the cycle index at which the final command, Precharge ($\\mathrm{PRE}$), is issued. The scheduling must respect a set of specified timing constraints.\n\nFirst, let us formalize the problem. The command sequence is $\\mathrm{ACT}$, $\\mathrm{RD}$, $\\mathrm{WR}$, $\\mathrm{RD}$, $\\mathrm{PRE}$. To distinguish between the two read commands, let us denote them as $\\mathrm{RD}_1$ and $\\mathrm{RD}_2$. The sequence is thus $\\mathrm{ACT}, \\mathrm{RD}_1, \\mathrm{WR}, \\mathrm{RD}_2, \\mathrm{PRE}$.\n\nLet $C(cmd)$ be the cycle number at which a command $cmd$ is issued. The problem states that the schedule starts by issuing $\\mathrm{ACT}$ at cycle $0$.\nSo, $C(\\mathrm{ACT}) = 0$.\n\nOur goal is to find the minimum possible value of $L = C(\\mathrm{PRE})$ by finding the earliest possible issue cycle for each command in the sequence. We will proceed chronologically.\n\n1.  **Issuing the first Read command ($\\mathrm{RD}_1$)**:\n    The first command after $\\mathrm{ACT}$ is $\\mathrm{RD}_1$. Since $\\mathrm{RD}_1$ is a column command, its issuance is constrained by the row-to-column delay, $t_{RCD}$, relative to the $\\mathrm{ACT}$ command.\n    The constraint is:\n    $$C(\\mathrm{RD}_1) - C(\\mathrm{ACT}) \\ge t_{RCD}$$\n    Substituting the given values, $C(\\mathrm{ACT}) = 0$ and $t_{RCD} = 4$:\n    $$C(\\mathrm{RD}_1) - 0 \\ge 4 \\implies C(\\mathrm{RD}_1) \\ge 4$$\n    The earliest cycle at which $\\mathrm{RD}_1$ can be issued is cycle $4$. Thus, we set $C(\\mathrm{RD}_1) = 4$.\n\n2.  **Issuing the Write command ($\\mathrm{WR}$)**:\n    The $\\mathrm{WR}$ command follows $\\mathrm{RD}_1$. The issuance of $\\mathrm{WR}$ is subject to two constraints relative to $\\mathrm{RD}_1$:\n    a.  The column-to-column delay, $t_{CCD}$, between two consecutive column commands.\n        $$C(\\mathrm{WR}) - C(\\mathrm{RD}_1) \\ge t_{CCD}$$\n        $$C(\\mathrm{WR}) \\ge C(\\mathrm{RD}_1) + t_{CCD} = 4 + 4 = 8$$\n    b.  The read-to-write bus turnaround time, $t_{RTW}$, required when a $\\mathrm{WR}$ follows a $\\mathrm{RD}$.\n        $$C(\\mathrm{WR}) - C(\\mathrm{RD}_1) \\ge t_{RTW}$$\n        $$C(\\mathrm{WR}) \\ge C(\\mathrm{RD}_1) + t_{RTW} = 4 + 6 = 10$$\n    To satisfy both constraints, $C(\\mathrm{WR})$ must be greater than or equal to the maximum of the two lower bounds:\n    $$C(\\mathrm{WR}) \\ge \\max(8, 10) = 10$$\n    The earliest cycle for $\\mathrm{WR}$ is cycle $10$. Thus, we set $C(\\mathrm{WR}) = 10$.\n\n3.  **Issuing the second Read command ($\\mathrm{RD}_2$)**:\n    The $\\mathrm{RD}_2$ command follows $\\mathrm{WR}$. Its issuance is subject to two constraints relative to $\\mathrm{WR}$:\n    a.  The column-to-column delay, $t_{CCD}$.\n        $$C(\\mathrm{RD}_2) - C(\\mathrm{WR}) \\ge t_{CCD}$$\n        $$C(\\mathrm{RD}_2) \\ge C(\\mathrm{WR}) + t_{CCD} = 10 + 4 = 14$$\n    b.  The write-to-read bus turnaround time, $t_{WTR}$, required when a $\\mathrm{RD}$ follows a $\\mathrm{WR}$.\n        $$C(\\mathrm{RD}_2) - C(\\mathrm{WR}) \\ge t_{WTR}$$\n        $$C(\\mathrm{RD}_2) \\ge C(\\mathrm{WR}) + t_{WTR} = 10 + 3 = 13$$\n    To satisfy both constraints, $C(\\mathrm{RD}_2)$ must be greater than or equal to the maximum of the two lower bounds:\n    $$C(\\mathrm{RD}_2) \\ge \\max(14, 13) = 14$$\n    The earliest cycle for $\\mathrm{RD}_2$ is cycle $14$. Thus, we set $C(\\mathrm{RD}_2) = 14$.\n\n4.  **Issuing the Precharge command ($\\mathrm{PRE}$)**:\n    The final command is $\\mathrm{PRE}$, and its cycle index is $L = C(\\mathrm{PRE})$. The $\\mathrm{PRE}$ command closes the currently active row. Its timing is constrained by several preceding commands.\n    a.  The activate-to-precharge time, $t_{RAS}$, which is the minimum time a row must remain active. This is measured from the $\\mathrm{ACT}$ command.\n        $$C(\\mathrm{PRE}) - C(\\mathrm{ACT}) \\ge t_{RAS}$$\n        $$C(\\mathrm{PRE}) \\ge C(\\mathrm{ACT}) + t_{RAS} = 0 + 12 = 12$$\n    b.  The write-recovery time, $t_{WR}$, which is the time that must elapse after a $\\mathrm{WR}$ command before the bank can be precharged.\n        $$C(\\mathrm{PRE}) - C(\\mathrm{WR}) \\ge t_{WR}$$\n        $$C(\\mathrm{PRE}) \\ge C(\\mathrm{WR}) + t_{WR} = 10 + 6 = 16$$\n    c.  The read-to-precharge time, $t_{RTP}$, which is the time that must elapse after a $\\mathrm{RD}$ command before the bank can be precharged. This constraint must be satisfied with respect to the *last* read command issued, which is $\\mathrm{RD}_2$.\n        $$C(\\mathrm{PRE}) - C(\\mathrm{RD}_2) \\ge t_{RTP}$$\n        $$C(\\mathrm{PRE}) \\ge C(\\mathrm{RD}_2) + t_{RTP} = 14 + 4 = 18$$\n        (Note: The constraint from $\\mathrm{RD}_1$, $C(\\mathrm{PRE}) \\ge C(\\mathrm{RD}_1) + t_{RTP} = 4 + 4 = 8$, is strictly dominated by the constraint from $\\mathrm{RD}_2$ and can be ignored.)\n\n    To satisfy all of these constraints, $C(\\mathrm{PRE})$ must be greater than or equal to the maximum of all lower bounds:\n    $$L = C(\\mathrm{PRE}) \\ge \\max(12, 16, 18) = 18$$\n    The minimum possible cycle index for issuing the $\\mathrm{PRE}$ command is $18$.\n\nThe minimum-latency schedule is:\n- Cycle $0$: $\\mathrm{ACT}$\n- Cycle $4$: $\\mathrm{RD}_1$ (constrained by $t_{RCD}$)\n- Cycle $10$: $\\mathrm{WR}$ (constrained by $t_{RTW}$)\n- Cycle $14$: $\\mathrm{RD}_2$ (constrained by $t_{CCD}$)\n- Cycle $18$: $\\mathrm{PRE}$ (constrained by $t_{RTP}$ from $\\mathrm{RD}_2$)\n\nThe minimum schedule length $L$ is the cycle index of the $\\mathrm{PRE}$ command, which is $18$.",
            "answer": "$$\\boxed{18}$$"
        },
        {
            "introduction": "With the rules of timing in hand, we can now ask a fundamental performance question: how fast can the memory system operate under ideal conditions? This exercise guides you through deriving a simple yet powerful expression for the maximum command issue rate, a key measure of system throughput . Understanding this theoretical peak is crucial for benchmarking real-world scheduler performance and identifying bottlenecks.",
            "id": "3656865",
            "problem": "A memory controller drives a single channel of Double Data Rate (DDR) Dynamic Random Access Memory (DRAM) and schedules a steady-state stream of back-to-back column READ commands to the same rank, all of which are row hits. Let $t_{CCD}$ denote the minimum command-to-command delay between two consecutive READ commands, specified in units of command clock cycles. Let the command clock run at frequency $f$ (in $\\mathrm{s}^{-1}$). Assume the following:\n- The controller is otherwise unconstrained by bank conflicts, activate/precharge timing, or turnarounds, and there are sufficient independent banks to keep the device continuously busy.\n- All column commands are READs (no interleaving with WRITEs), and the command-to-command spacing $t_{CCD}$ is the binding constraint that ensures data bursts do not collide on the data bus at frequency $f$.\n- Ignore fixed latencies such as Column Access Strobe (CAS) latency, because they do not constrain the steady-state issuance rate when a deep pipeline is sustained.\n\nStarting only from definitions of frequency as cycles per second and rate as inverse time per event, derive a closed-form analytic expression for the maximum sustainable READ command issue rate $\\mu_{RD}$ (in reads per second) that the controller can achieve under these constraints, expressed solely in terms of $t_{CCD}$ and $f$.\n\nExpress your final answer as a single closed-form expression. No numerical evaluation is required, and no rounding is needed. Do not include units in your final boxed answer.",
            "solution": "The goal is to derive the maximum sustainable READ command issue rate $\\mu_{RD}$ given the minimum command-to-command spacing $t_{CCD}$ and the command clock frequency $f$. We will proceed from first principles.\n\nBy definition, a clock running at frequency $f$ completes $f$ cycles per second, so the clock period $T_{clk}$ in seconds per cycle is\n$$\nT_{clk} = \\frac{1}{f}.\n$$\nThe device mandates a minimum separation of $t_{CCD}$ command clock cycles between consecutive READ commands. Therefore, the minimum time interval in seconds between issuing two READ commands is the product of the cycle count and the clock period:\n$$\n\\Delta t_{RR} = t_{CCD} \\cdot T_{clk} = t_{CCD} \\cdot \\frac{1}{f} = \\frac{t_{CCD}}{f}.\n$$\nIn steady state, the maximum sustainable READ command issue rate $\\mu_{RD}$ is the reciprocal of the minimum inter-command time, because one READ can be issued every $\\Delta t_{RR}$ seconds:\n$$\n\\mu_{RD} = \\frac{1}{\\Delta t_{RR}} = \\frac{1}{t_{CCD}/f} = \\frac{f}{t_{CCD}}.\n$$\n\nThis expression already incorporates the effect of the command clock frequency $f$ converting cycles to time, and the binding constraint of $t_{CCD}$ that prevents READ bursts from overlapping on the bus. Thus, under the stated assumptions, the closed-form expression for the maximum READs per unit time is\n$$\n\\mu_{RD} = \\frac{f}{t_{CCD}}.\n$$\n\nFor completeness, if one were to relax the assumption that $t_{CCD}$ alone ensures non-overlapping data bursts and instead explicitly account for a data burst duration $t_{BURST}$ in seconds, then the inter-command time would be the maximum of the two constraints,\n$$\n\\Delta t_{RR} = \\max\\!\\left(\\frac{t_{CCD}}{f},\\, t_{BURST}\\right),\n$$\nleading to\n$$\n\\mu_{RD} = \\frac{1}{\\max\\!\\left(\\frac{t_{CCD}}{f},\\, t_{BURST}\\right)}.\n$$\nIn many DDR generations with burst length $BL$, one has $t_{BURST} = \\frac{BL}{2f}$ and typical specifications set $t_{CCD}$ (in cycles) to be at least $\\frac{BL}{2}$ so that the binding constraint is $t_{CCD}$; this reduces back to $\\mu_{RD} = \\frac{f}{t_{CCD}}$. However, under the problem’s stated assumptions, the required closed form is simply $\\mu_{RD} = \\frac{f}{t_{CCD}}$.",
            "answer": "$$\\boxed{\\frac{f}{t_{CCD}}}$$"
        },
        {
            "introduction": "Real-world systems rarely operate under ideal, continuous workloads; requests often arrive sporadically, creating contention and queues. This practice introduces a powerful analytical tool from queueing theory to model the impact of random arrivals on memory access latency . By working through this hypothetical scenario, you will learn how to estimate average waiting times—a critical factor in overall system responsiveness—and appreciate the trade-offs between utilization and delay.",
            "id": "3656957",
            "problem": "A single-channel Dynamic Random-Access Memory (DRAM) controller implements First-Come First-Served (FCFS) scheduling for read requests generated by a Central Processing Unit (CPU). Empirical measurements show that the inter-arrival times of requests are well-modeled by a Poisson process with rate $\\lambda$ and that the service time of the controller is dominated by a fixed row cycle and data burst, so that service times can be approximated as deterministic with mean $E[S]$. Assume a single-server queue, requests do not abandon, and the controller is work-conserving.\n\nStarting from the fundamental properties of a Poisson arrival process, the definition of traffic intensity $\\rho$ for a single-server system, the Poisson Arrivals See Time Averages (PASTA) property, and the residual service time of a renewal process, derive an $M/D/1$ queue approximation for the mean waiting time in queue $E[W]$ (the time from a request’s arrival until its service begins, excluding its own service time). Then evaluate the resulting expression for the following measured parameters:\n- Arrival rate $\\lambda = 16 \\times 10^{6}$ requests per second.\n- Deterministic service time $E[S] = 42 \\times 10^{-9}$ seconds.\n\nUse the $M/D/1$ approximation and provide the numerical value of $E[W]$ for the given parameters. Round your answer to four significant figures. Express your final numerical answer in nanoseconds.",
            "solution": "The problem requires the derivation of the mean waiting time in an M/D/1 queue and its subsequent numerical evaluation. The system is a single-server queue with Poisson arrivals (M), deterministic service times (D), and one server (1). The scheduling discipline is First-Come First-Served (FCFS).\n\nFirst, we derive the general formula for the mean waiting time in queue, $E[W]$, for an M/G/1 system (Poisson arrivals, general service time distribution). The problem specifies the required starting points for this derivation. The waiting time $W$ of a newly arriving request is the time it spends in the queue before its service begins. This time is equal to the total service time required to clear all requests present in the system upon its arrival.\n\nLet an arbitrary request arrive at time $t$. The waiting time $W$ for this request is the sum of two components:\n$1$. The residual service time, $S_{res}$, of the request currently being served (if any).\n$2$. The sum of the full service times of all other requests already waiting in the queue.\n\nLet $N_q$ be the number of requests in the queue (not including the one in service) upon the arrival of our test request. Let $S_i$ be the service time of the $i$-th request in the queue. The waiting time can be expressed as:\n$$W = S_{res} + \\sum_{i=1}^{N_q} S_i$$\nTo find the mean waiting time $E[W]$, we take the expectation of this expression:\n$$E[W] = E[S_{res}] + E\\left[\\sum_{i=1}^{N_q} S_i\\right]$$\nFor an M/G/1 queue, the service times $S_i$ are independent and identically distributed, and are also independent of the queue length $N_q$ seen by an arrival. Using Wald's identity, the expectation of the sum becomes:\n$$E\\left[\\sum_{i=1}^{N_q} S_i\\right] = E[N_q] E[S]$$\nwhere $E[S]$ is the mean service time. Due to the Poisson Arrivals See Time Averages (PASTA) property, the average number of requests in the queue seen by an arriving request, $E[N_q]$, is equal to the time-average number of requests in the queue. By Little's Law applied to the queue of waiting requests, this is given by $E[N_q] = \\lambda E[W]$, where $\\lambda$ is the arrival rate.\n\nSubstituting these results back, we get:\n$$E[W] = E[S_{res}] + (\\lambda E[W]) E[S]$$\nLet $\\rho = \\lambda E[S]$ be the traffic intensity or server utilization. The equation becomes:\n$$E[W] = E[S_{res}] + \\rho E[W]$$\nRearranging for $E[W]$ (assuming the system is stable, i.e., $\\rho < 1$):\n$$E[W](1 - \\rho) = E[S_{res}]$$\n$$E[W] = \\frac{E[S_{res}]}{1 - \\rho}$$\nThe next step is to find the mean residual service time, $E[S_{res}]$. An arriving request finds the server busy with probability $\\rho$ (again, by PASTA) and idle with probability $1-\\rho$. If the server is idle, $S_{res} = 0$. If the server is busy, the request arrives at a random point within a service period. The expected remaining time of a service period, given an arrival occurred during it, is a classic result from renewal theory related to the inspection paradox. For a random variable $S$ representing the service time, the expected residual life is given by $\\frac{E[S^2]}{2 E[S]}$.\n\nThus, the overall mean residual service time is:\n$$E[S_{res}] = P(\\text{server busy}) \\times E[\\text{residual time} | \\text{busy}] + P(\\text{server idle}) \\times 0$$\n$$E[S_{res}] = \\rho \\times \\frac{E[S^2]}{2 E[S]}$$\nSubstituting $\\rho = \\lambda E[S]$:\n$$E[S_{res}] = (\\lambda E[S]) \\frac{E[S^2]}{2 E[S]} = \\frac{\\lambda E[S^2]}{2}$$\nNow, we substitute this expression for $E[S_{res}]$ back into our equation for $E[W]$:\n$$E[W] = \\frac{\\frac{\\lambda E[S^2]}{2}}{1 - \\rho} = \\frac{\\lambda E[S^2]}{2(1 - \\rho)}$$\nThis is the Pollaczek-Khinchine formula for the mean waiting time in an M/G/1 queue.\n\nThe problem specifies deterministic service times, which corresponds to the M/D/1 queue. For a deterministic service time, the service duration $S$ is constant. Let this constant be $D$. Then, the mean service time is $E[S] = D$. The second moment is $E[S^2] = D^2 = (E[S])^2$.\nSubstituting $E[S^2] = (E[S])^2$ into the Pollaczek-Khinchine formula:\n$$E[W] = \\frac{\\lambda (E[S])^2}{2(1 - \\rho)}$$\nSince $\\rho = \\lambda E[S]$, we can rewrite this as:\n$$E[W] = \\frac{(\\lambda E[S]) E[S]}{2(1 - \\rho)} = \\frac{\\rho E[S]}{2(1 - \\rho)}$$\nThis is the final expression for the mean waiting time in an M/D/1 queue.\n\nNow, we evaluate this expression using the given parameters:\n- Arrival rate $\\lambda = 16 \\times 10^6$ requests/second.\n- Deterministic service time $E[S] = 42 \\times 10^{-9}$ seconds.\n\nFirst, calculate the traffic intensity $\\rho$:\n$$\\rho = \\lambda E[S] = (16 \\times 10^6 \\, \\text{s}^{-1}) \\times (42 \\times 10^{-9} \\, \\text{s})$$\n$$\\rho = 16 \\times 42 \\times 10^{-3} = 672 \\times 10^{-3} = 0.672$$\nSince $\\rho = 0.672 < 1$, the queue is stable and a steady-state waiting time exists.\n\nNext, calculate the mean waiting time $E[W]$:\n$$E[W] = \\frac{\\rho E[S]}{2(1 - \\rho)} = \\frac{0.672 \\times (42 \\times 10^{-9} \\, \\text{s})}{2(1 - 0.672)}$$\n$$E[W] = \\frac{28.224 \\times 10^{-9} \\, \\text{s}}{2(0.328)} = \\frac{28.224 \\times 10^{-9} \\, \\text{s}}{0.656}$$\n$$E[W] \\approx 43.02439 \\times 10^{-9} \\, \\text{s}$$\nThe problem asks for the answer in nanoseconds, rounded to four significant figures. Since $1 \\, \\text{ns} = 10^{-9} \\, \\text{s}$:\n$$E[W] \\approx 43.02439 \\, \\text{ns}$$\nRounding to four significant figures gives $43.02 \\, \\text{ns}$.",
            "answer": "$$\\boxed{43.02}$$"
        }
    ]
}