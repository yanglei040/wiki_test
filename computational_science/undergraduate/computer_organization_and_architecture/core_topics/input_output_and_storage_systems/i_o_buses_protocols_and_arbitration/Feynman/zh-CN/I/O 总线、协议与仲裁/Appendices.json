{
    "hands_on_practices": [
        {
            "introduction": "在许多共享总线设计中，为了在读写操作之间切换总线驱动方而避免电气冲突，必须引入“总线转向”时间。本练习将通过一个概率模型，帮助你量化这种协议开销对系统吞吐量的具体影响。通过推导吞吐量损失与转向时间和读写比例之间的关系，你将更深刻地理解物理层约束如何直接转化为系统级的性能瓶颈。",
            "id": "3648172",
            "problem": "一个同步、共享、双向的输入/输出 (I/O) 总线被一个中央处理器 (CPU) 和一个内存控制器使用。该总线是半双工的：在读事务期间，内存控制器驱动总线；在写事务期间，CPU驱动总线。为了在切换驱动代理时避免电气冲突，总线协议规定，每当下一个事务改变方向（从读到写或从写到读）时，必须插入恰好 $t_{ta}$ 个转换周期，在此期间总线保持在高阻抗状态。假设仲裁和命令阶段是重叠的，并且除了下面明确描述的周期外，不产生额外的周期。\n\n考虑一个由 $N$ 个独立事务组成的长序列，其中每个事务传输一个固定大小的数据单元，并在活动时占用恰好 1 个总线时间周期。每个事务为读的概率是 $r$，为写的概率是 $1 - r$，且与其他事务独立。在连续的事务之间，如果下一个事务的方向与当前事务相同，它会立即在下一个周期开始；如果方向改变，协议会插入 $t_{ta}$ 个转换周期，然后下一个事务才能开始。\n\n仅使用吞吐量是单位时间的有效数据量等基本定义以及独立事件的基本概率，推导在极限 $N \\to \\infty$ 条件下，吞吐量损失分数（与没有转换周期的理想情况相比，吞吐量减少的分数）关于 $t_{ta}$ 和 $r$ 的渐近闭式表达式。将您的最终答案表示为关于 $t_{ta}$ 和 $r$ 的单个符号表达式。无需四舍五入。",
            "solution": "首先对问题陈述进行严格的验证过程。\n\n### 第一步：提取已知条件\n- 总线是同步、共享、双向和半双工的。\n- 用户是 CPU 和内存控制器。\n- 读事务涉及内存控制器驱动总线。\n- 写事务涉及 CPU 驱动总线。\n- 每当事务方向改变（从读到写或从写到读）时，会插入 $t_{ta}$ 个周期的转换时间。\n- 仲裁和命令阶段不贡献额外周期。\n- 考虑一个由 $N$ 个独立事务组成的序列。\n- 每个事务传输一个固定大小的数据单元。\n- 每个事务的活动数据传输占用 1 个周期。\n- 一个事务是读的概率为 $r$。\n- 一个事务是写的概率为 $1-r$。\n- 事务是独立的。\n- 如果连续事务的方向相同，下一个事务在下一个周期立即开始。\n- 目标是找到在极限 $N \\to \\infty$ 条件下，吞吐量损失分数关于 $t_{ta}$ 和 $r$ 的渐近闭式表达式。\n\n### 第二步：使用提取的已知条件进行验证\n评估问题的有效性。\n- **科学依据**：该问题基于计算机体系结构和数字设计的基本原理。同步总线、半双工通信、高阻抗状态和转换时间 ($t_{ta}$) 等概念在 I/O 总线协议的背景下是标准且现实的。\n- **适定性**：该问题是适定的。它提供了所有必要的参数（$r$, $t_{ta}$）和约束（独立事务，1 周期数据传输，极限 $N \\to \\infty$），以推导出吞吐量损失分数的唯一、有意义的解析表达式。\n- **客观性**：问题使用精确、客观、无歧义的技术语言陈述。\n- **完整性和一致性**：问题是自洽的。明确说明了零仲裁开销的简化假设，且不产生矛盾。\n- **可行性**：事务流的概率模型是性能分析中一种标准且有效的方法。参数是符号化的，排除了任何物理上的不一致性。\n\n### 第三步：结论与行动\n问题被判定为**有效**。这是一个计算机体系结构中的标准性能分析问题，可以使用基本概率论解决。现在开始求解过程。\n\n吞吐量损失分数 $L$ 定义为吞吐量减少量与理想吞吐量之比：\n$$L = \\frac{Th_{ideal} - Th_{actual}}{Th_{ideal}}$$\n其中，$Th_{ideal}$ 是没有任何转换惩罚时的吞吐量，$Th_{actual}$ 是在指定协议下的吞吐量。\n\n首先，我们确定理想吞吐量 $Th_{ideal}$。在理想情况下，没有转换周期（$t_{ta} = 0$）。一个由 $N$ 个事务组成的序列，每个事务的数据传输需要 1 个周期，将在总时间 $T_{ideal} = N \\times 1 = N$ 个周期内完成。\n理想吞吐量是单位时间内传输的数据量：\n$$Th_{ideal} = \\frac{N \\text{ data units}}{N \\text{ cycles}} = 1 \\frac{\\text{data unit}}{\\text{cycle}}$$\n\n接下来，我们确定在存在转换惩罚时的实际吞吐量 $Th_{actual}$。完成 $N$ 个事务的总时间 $T_{actual}$ 是数据传输时间和所有转换惩罚总时间的总和。\n数据传输的总时间是 $N \\times 1 = N$ 个周期。\n只有当两个连续事务之间的方向发生变化时，才会产生 $t_{ta}$ 个周期的转换惩罚。在一个包含 $N$ 个事务的序列中，有 $N-1$ 个这样的转换。\n\n设一个事务为读（$R$）的概率为 $P(R) = r$，为写（$W$）的概率为 $P(W) = 1-r$。由于事务是独立的，两个事务特定序列的概率是它们各自概率的乘积。\n\n当发生从读到写（$R \\to W$）的转换或从写到读（$W \\to R$）的转换时，方向发生改变。\n从读到写的转换概率是：\n$$P(R \\to W) = P(R) \\times P(W) = r(1-r)$$\n从写到读的转换概率是：\n$$P(W \\to R) = P(W) \\times P(R) = (1-r)r$$\n\n在任何给定转换中，方向改变的总概率 $P_{change}$ 是这些概率的和：\n$$P_{change} = P(R \\to W) + P(W \\to R) = r(1-r) + (1-r)r = 2r(1-r)$$\n\n对于一个由 $N$ 个事务组成的长序列，有 $N-1$ 个转换。方向改变的期望次数 $E_{changes}$ 是转换次数乘以每次转换发生改变的概率：\n$$E_{changes} = (N-1) P_{change} = (N-1)2r(1-r)$$\n\n每次改变都会引入 $t_{ta}$ 个周期的惩罚。因此，期望的总惩罚时间 $T_{penalty}$ 是：\n$$T_{penalty} = E_{changes} \\times t_{ta} = (N-1)2r(1-r)t_{ta}$$\n\n$N$ 个事务的总期望时间是数据传输时间和惩罚时间的总和：\n$$T_{actual} = N + T_{penalty} = N + (N-1)2r(1-r)t_{ta}$$\n\n实际吞吐量是传输的总数据量除以总时间：\n$$Th_{actual} = \\frac{N}{T_{actual}} = \\frac{N}{N + (N-1)2r(1-r)t_{ta}}$$\n\n问题要求在 $N \\to \\infty$ 时的渐近表达式。我们计算 $Th_{actual}$ 的极限：\n$$Th_{asymptotic} = \\lim_{N\\to\\infty} \\frac{N}{N + (N-1)2r(1-r)t_{ta}}$$\n为了计算这个极限，我们将分子和分母同时除以 $N$：\n$$Th_{asymptotic} = \\lim_{N\\to\\infty} \\frac{1}{1 + \\frac{N-1}{N} 2r(1-r)t_{ta}}$$\n由于 $\\lim_{N\\to\\infty} \\frac{N-1}{N} = \\lim_{N\\to\\infty} (1 - \\frac{1}{N}) = 1$，表达式简化为：\n$$Th_{asymptotic} = \\frac{1}{1 + 2r(1-r)t_{ta}}$$\n\n现在我们可以计算吞吐量损失分数 $L$：\n$$L = \\frac{Th_{ideal} - Th_{asymptotic}}{Th_{ideal}} = \\frac{1 - \\frac{1}{1 + 2r(1-r)t_{ta}}}{1}$$\n$$L = 1 - \\frac{1}{1 + 2r(1-r)t_{ta}}$$\n通过通分合并各项：\n$$L = \\frac{(1 + 2r(1-r)t_{ta}) - 1}{1 + 2r(1-r)t_{ta}}$$\n$$L = \\frac{2r(1-r)t_{ta}}{1 + 2r(1-r)t_{ta}}$$\n这就是吞吐量损失分数关于 $t_{ta}$ 和 $r$ 的最终闭式表达式。",
            "answer": "$$\\boxed{\\frac{2r(1-r)t_{ta}}{1 + 2r(1-r)t_{ta}}}$$"
        },
        {
            "introduction": "菊花链仲裁是一种简单且成本低廉的总线仲裁方案，但其固定的优先级机制可能导致低优先级设备“饿死”。本练习旨在通过一个具体的病态访问模式，让你亲手量化这种饿死风险。你将运用基本的概率论知识，推导出低优先级设备在最坏情况下的预期等待时间，从而直观地感受到不同仲裁策略对系统公平性和响应时间的重要影响。",
            "id": "3648149",
            "problem": "考虑一个输入/输出 (I/O) 总线，上面连接了 $N$ 个总线主设备 $\\{M_1, M_2, \\dots, M_N\\}$。这些设备通过一个菊花链仲裁器连接，该仲裁器总是将总线授予索引号最小的请求主设备。仲裁以离散的总线周期进行。假设存在一种病态但统计上合理的访问模式如下：末端主设备 $M_N$ 发出其请求并持续保持，直到被授予总线为止；而在每个周期内，每个更高优先级的主设备 $M_i$（其中 $i \\in \\{1,2,\\dots,N-1\\}$）都以概率 $p$ 独立地发出一个为期一周期的请求，然后在该周期结束时释放总线。这种模式迫使 $M_N$ 在任何更高优先级的主设备请求总线时都被延迟，而这正是菊花链仲裁可能出现饿死现象的条件。\n\n从菊花链仲裁（索引号最小者在同时请求中获胜）和概率独立性的基本定义出发，推导在上述模式下，$M_N$ 在其首次被授予总线之前必须等待的总线周期的期望数的封闭形式解析表达式，该表达式应以 $N$ 和 $p$ 表示。将最终答案表示为单一的简化表达式。无需进行四舍五入。",
            "solution": "用户希望找到特定主设备 $M_N$ 在被授予总线访问权限之前必须等待的总线周期的期望数。\n\n首先，我必须验证问题陈述。\n\n### 步骤1：提取已知条件\n- 总线主设备数量：$N$，索引为 $\\{M_1, M_2, \\dots, M_N\\}$。\n- 仲裁协议：菊花链，其中授权被给予请求总线的设备中索引号最小（优先级最高）的主设备。\n- 时间模型：离散的总线周期。\n- 访问模式：\n    - 主设备 $M_N$（末端主设备，优先级最低）发出其请求并持续保持，直到被授予。\n    - 每个更高优先级的主设备 $M_i$（对于 $i \\in \\{1, 2, \\dots, N-1\\}$）在任何给定周期内以概率 $p$ 独立地发出一个为期一周期的请求。\n- 目标：推导主设备 $M_N$ 在首次获得授权前必须等待的总线周期的期望数的封闭形式解析表达式。该表达式应以 $N$ 和 $p$ 表示。\n\n### 步骤2：使用提取的已知条件进行验证\n- **科学依据：** 该问题基于计算机体系结构（I/O总线、菊花链仲裁）和概率论（几何分布、期望）中的标准、明确定义的概​​念。总线访问模型虽然经过简化，却是性能分析中一种常用且有效的方法，尤其适用于研究像饿死这样的最坏情况场景。该问题在科学上是合理的。\n- **提法得当：** 该问题提供了所有必要信息：主设备数量、仲裁规则以及每个主设备的概率行为。目标是计算一个特定、明确定义的统计度量（期望值）。可以从所提供的信息中推导出唯一且有意义的解。\n- **客观性：** 问题以精确、正式的语言陈述，没有主观性或模糊性。\n\n### 步骤3：结论与行动\n问题是有效的。这是一个与计算机组成与体系结构相关的应用概率学中的良构问题。我现在将开始推导解决方案。\n\n令 $W$ 为表示主设备 $M_N$ 必须等待的总线周期数的随机变量。我们旨在求出 $W$ 的期望值，记为 $E[W]$。\n\n总线仲裁以离散周期进行。主设备 $M_N$ 具有最低优先级，它在某个给定的周期内能被授予总线，当且仅当它正在请求访问，并且没有其他更高优先级（即索引 $i  N$）的主设备也请求访问。问题陈述 $M_N$ 持续发出请求。因此，$M_N$ 在任何特定周期被授予总线的条件简化为：在那个周期内，集合 $\\{M_1, M_2, \\dots, M_{N-1}\\}$ 中没有主设备发出请求。\n\n让我们将单个周期内的“成功”事件定义为 $M_N$ 被授予总线的事件。这发生在 $N-1$ 个更高优先级的主设备都没有请求总线时。\n\n对于任何一个特定的更高优先级主设备 $M_i$（其中 $i \\in \\{1, 2, \\dots, N-1\\}$），它在给定周期内发出请求的概率是 $p$。因此，主设备 $M_i$ 在该周期内*不*发出请求的概率是 $1-p$。\n\n问题陈述这些主设备的请求是独立的。因此，在给定周期内，*所有* $N-1$ 个更高优先级的主设备都不发出请求的概率是它们各自不发出请求的概率的乘积。\n令 $P_S$ 为在任何给定周期内“成功”事件的概率。\n$$ P_S = P(\\text{no requests from } M_1, \\dots, M_{N-1}) = \\prod_{i=1}^{N-1} P(M_i \\text{ does not request}) $$\n由于所有这些主设备的概率都是相同的，我们有：\n$$ P_S = (1-p)^{N-1} $$\n\n等待总线的过程可以建模为一系列独立的伯努利试验，其中每次试验对应一个总线周期。试验中的一次“成功”是 $M_N$ 被授予总线的事件，其发生概率为 $P_S$。\n\n令 $T$ 为表示 $M_N$ 首次被授予总线时所在的周期数的随机变量。该变量服从参数（成功概率）为 $P_S$ 的几何分布。$T$ 的概率质量函数是：\n$$ P(T=k) = (1-P_S)^{k-1} P_S \\quad \\text{for } k=1, 2, 3, \\dots $$\n几何分布中直到首次成功所需的试验次数的期望值由成功概率的倒数给出。\n$$ E[T] = \\frac{1}{P_S} = \\frac{1}{(1-p)^{N-1}} $$\n\n问题要求的是 $M_N$ 必须*等待*的周期数的期望值。如果授权发生在第 $T$ 个周期，那么 $M_N$ 已经等待了 $T-1$ 个周期。例如，如果授权发生在第 $T=1$ 个周期，等待时间是 $0$。如果发生在第 $T=2$ 个周期，等待时间是 $1$。所以，等待周期数 $W$ 与 $T$ 的关系是 $W = T-1$。\n\n利用期望算子的线性性质，我们可以求出期望等待时间 $E[W]$：\n$$ E[W] = E[T-1] = E[T] - 1 $$\n代入 $E[T]$ 的表达式：\n$$ E[W] = \\frac{1}{(1-p)^{N-1}} - 1 $$\n\n或者，我们可以将其表示为单个分数：\n$$ E[W] = \\frac{1 - (1-p)^{N-1}}{(1-p)^{N-1}} $$\n这个表达式表示首次成功前失败（即 $M_N$ 被阻塞的周期）次数的期望值，这是基于失败次数定义的几何分布的一个标准结果。两种形式是等价的。第一种形式更明确地显示了与总周期数的关系。",
            "answer": "$$\\boxed{\\frac{1}{(1-p)^{N-1}} - 1}$$"
        },
        {
            "introduction": "在复杂的系统中，高吞吐量的批量数据传输（如DMA）与低延迟的紧急事件（如中断）常常会争夺总线资源。简单地让一方优先可能会牺牲另一方的性能要求。本练习将引导你设计一个交错访问方案，通过在长时间的DMA传输中周期性地插入服务时隙，来在保证中断响应延迟上限的同时，最小化对DMA吞吐量的影响，这是一个典型的系统架构性能权衡问题。",
            "id": "3648126",
            "problem": "一个共享系统总线连接了中央处理器 (CPU)、一个直接内存访问 (DMA) 控制器和若干个I/O设备。该总线的运行频率为 $f_{\\text{bus}} = 200\\,\\text{MHz}$，总线上的一次数据传输（一个“节拍”）需要 $t_b = 1/f_{\\text{bus}}$ 秒。在当前的非抢占式总线仲裁机制下，当DMA控制器赢得总线以进行突发传输时，它将一直占用总线直到其突发传输完成。考虑一个 $B = 2048$ 个节拍的DMA突发传输。一个紧急的设备中断必须由CPU确认，并且中断服务程序 (ISR) 必须在CPU对中断应答寄存器执行了至少一次原子总线操作后才能开始。为了减少在长DMA突发传输下的中断饿死现象，架构师提出了一种交错方案，为紧急流量注入周期性的读-修改-写 (RMW) 令牌：\n\n- 一个读-修改-写 (RMW) 令牌由为紧急流量保留的 $3$ 个节拍组成（读、修改、写）。\n- 在每次主设备切换时（从DMA到紧急令牌，以及从紧急令牌回到DMA），总线会产生 $2$ 个节拍的转换开销。\n- 仲裁器强制规定，在每 $k$ 个DMA节拍之后，插入一个RMW令牌（为此抢占DMA），无论是否有紧急流量等待，以保证最坏情况中断延迟的上限。\n\n架构师要求，从中断断言到完成 $3$ 节拍RMW序列的最坏情况时间必须被限制在 $L_{\\max} = 2\\,\\mu\\text{s}$ 以内，即使中断在最不利的时刻到达，且DMA正在执行一个非常长的突发传输。同时，与不间断的DMA操作相比，连续插入令牌所导致的DMA吞吐量下降不得超过 $10\\%$。\n\n根据基本原理和上述定义，确定满足这两个约束条件并因此在交错方案下最大化DMA吞吐量的最大整数 $k$（以节拍为单位）。选择正确的选项。\n\nA. $k = 395$\n\nB. $k = 397$\n\nC. $k = 63$\n\nD. $k = 45$",
            "solution": "用户提供了一个关于计算机体系结构的问题，涉及总线仲裁、中断延迟和DMA吞吐量。我将首先验证问题陈述，然后进行完整解答。\n\n### 步骤 1: 提取已知条件\n问题提供了以下数据和约束：\n- 总线频率: $f_{\\text{bus}} = 200\\,\\text{MHz}$\n- 单个总线节拍的时间: $t_b = 1/f_{\\text{bus}}$\n- 示例DMA突发大小: $B = 2048$ 节拍 (上下文信息，不是直接用于计算 $k$ 的参数)\n- 读-修改-写 (RMW) 令牌大小: $3$ 节拍\n- 每次主设备切换的转换开销: $2$ 节拍\n- 交错结构: 每 $k$ 个DMA节拍后，插入一个RMW令牌。此插入涉及两次主设备切换 (DMA $\\rightarrow$ CPU, CPU $\\rightarrow$ DMA)。\n- 延迟约束: 从中断断言到完成 $3$ 节拍RMW序列的最坏情况时间不得超过 $L_{\\max} = 2\\,\\mu\\text{s}$。\n- 吞吐量约束: 由于交错方案导致的DMA吞吐量下降不得超过 $10\\%$。\n- 目标: 找到满足两个约束条件的最大整数 $k$。\n\n### 步骤 2: 使用提取的已知条件进行验证\n根据验证标准对问题陈述进行评估。\n- **科学性**: 问题涉及计算机组成和体系结构中的标准概念，包括总线协议、DMA、中断、仲裁以及性能权衡（延迟与吞吐量）。该场景是一个现实的工程问题。所提供的值（$200\\,\\text{MHz}$ 总线, $2\\,\\mu\\text{s}$ 延迟限制）是合理的。该模型是对总线交错方案的简化但有效的表示。\n- **适定性**: 问题是适定的。它对单个变量 $k$ 定义了两个不同的约束，并要求在允许的解空间内最大化该变量。这种结构会导出一个唯一的整数解。\n- **客观性**: 问题以精确、客观的技术术语陈述。提供了“RMW令牌”和“转换开销”的定义，像“吞吐量下降”这样的概念在此上下文中具有标准解释。\n\n### 步骤 3: 结论与行动\n问题陈述是**有效的**。它是一个自洽、一致且科学合理的问题，可以使用计算机体系结构性能分析的基本原理来解决。我现在将进行解题推导。\n\n### 推导\n首先，我们计算单个总线节拍的持续时间 $t_b$。\n$$t_b = \\frac{1}{f_{\\text{bus}}} = \\frac{1}{200 \\times 10^6\\,\\text{Hz}} = 5 \\times 10^{-9}\\,\\text{s} = 5\\,\\text{ns}$$\n\n接下来，我们分析交错总线访问周期的结构。该周期由 $k$ 个DMA节拍和一个为RMW令牌保留的时隙组成。与RMW令牌时隙相关的开销包括令牌本身以及交接总线的开销。\n- DMA传输节拍数: $k$\n- 从DMA切换到RMW主设备的节拍数: $2$\n- RMW操作的节拍数: $3$\n- 从RMW主设备切换回DMA的节拍数: $2$\n\nRMW令牌插入所消耗的总节拍数（即开销）为 $2 + 3 + 2 = 7$ 个节拍。\n因此，一个完整的交错周期由 $k$ 个DMA节拍和 $7$ 个开销节拍组成，总共为 $k+7$ 个节拍。\n\n现在，我们用 $k$ 来表示这两个约束。\n\n**约束 1: 最坏情况中断延迟**\n最坏情况延迟发生在紧急中断在最不合时宜的时刻被断言时。在此方案中，最坏的时刻是刚错过使用RMW令牌时隙的机会之后。这意味着CPU必须等待整个下一个包含 $k$ 个DMA节拍的数据块完成，然后等待总线切换，之后它自己的RMW操作才能开始。\n\n从中断断言到RMW序列*完成*的总时间是以下各项之和：\n1.  等待正在进行的 $k$ 个DMA节拍块完成的时间: $k \\cdot t_b$\n2.  总线主设备从DMA控制器切换到CPU的时间: $2 \\cdot t_b$\n3.  执行 $3$ 节拍RMW操作本身的时间: $3 \\cdot t_b$\n\n最坏情况延迟 $L_{worst}$ 是这些持续时间的总和：\n$$L_{worst} = (k \\cdot t_b) + (2 \\cdot t_b) + (3 \\cdot t_b) = (k + 5) \\cdot t_b$$\n\n该延迟必须小于或等于 $L_{\\max} = 2\\,\\mu\\text{s} = 2000\\,\\text{ns}$。\n$$(k + 5) \\cdot (5\\,\\text{ns}) \\le 2000\\,\\text{ns}$$\n两边同除以 $5\\,\\text{ns}$:\n$$k + 5 \\le 400$$\n$$k \\le 395$$\n延迟约束要求 $k$ 不得大于 $395$。\n\n**约束 2: DMA吞吐量下降**\n吞吐量可以用单位时间内的有效数据节拍数来衡量。\n- **理想吞吐量 (无交错):** DMA控制器使用 $100\\%$ 的总线节拍。吞吐量与 $1/t_b$ 成正比。我们可以将其归一化为每个总线节拍有 $1$ 个有效节拍。\n- **交错吞吐量:** 在一个总共 $k+7$ 个节拍的周期中，只有 $k$ 个节拍用于DMA。有效吞吐量是有效节拍与总节拍的比率，即 $\\frac{k}{k+7}$。\n\n吞吐量下降是吞吐量的分数减少量：\n$$\\text{Degradation} = \\frac{\\text{Throughput}_{\\text{ideal}} - \\text{Throughput}_{\\text{interleaved}}}{\\text{Throughput}_{\\text{ideal}}} = \\frac{1 - \\frac{k}{k+7}}{1} = 1 - \\frac{k}{k+7} = \\frac{(k+7) - k}{k+7} = \\frac{7}{k+7}$$\n\n此下降不得超过 $10\\%$，即 $0.1$。\n$$\\frac{7}{k+7} \\le 0.1$$\n$$7 \\le 0.1 \\cdot (k+7)$$\n$$70 \\le k+7$$\n$$k \\ge 63$$\n吞吐量约束要求 $k$ 不得小于 $63$。\n\n**综合约束**\n我们必须同时满足两个约束条件：\n1.  来自延迟: $k \\le 395$\n2.  来自吞吐量: $k \\ge 63$\n\n结合这些，整数 $k$ 的有效范围是 $63 \\le k \\le 395$。问题要求找到满足两个约束条件的*最大整数 k*，这对应于在满足延迟要求的同时最大化DMA吞吐量的 $k$ 值（因为吞吐量 $\\frac{k}{k+7}$ 是 $k$ 的增函数）。此范围内的最大整数是 $395$。\n\n### 逐项分析\n\n**A. $k = 395$**\n- **延迟检查:** $L_{worst} = (395 + 5) \\cdot 5\\,\\text{ns} = 400 \\cdot 5\\,\\text{ns} = 2000\\,\\text{ns} = 2\\,\\mu\\text{s}$。这满足约束 $L_{worst} \\le 2\\,\\mu\\text{s}$。\n- **吞吐量检查:** 下降率 = $\\frac{7}{395+7} = \\frac{7}{402} \\approx 0.0174$，即 $1.74\\%$。这远低于 $10\\%$ 的限制。\n- **结论:** 该 $k$ 值满足两个约束条件，并且是延迟约束所允许的最大可能整数值。因此，它是满足两个条件的最大整数值。**正确**。\n\n**B. $k = 397$**\n- **延迟检查:** $L_{worst} = (397 + 5) \\cdot 5\\,\\text{ns} = 402 \\cdot 5\\,\\text{ns} = 2010\\,\\text{ns} = 2.01\\,\\mu\\text{s}$。这违反了约束 $L_{worst} \\le 2\\,\\mu\\text{s}$。\n- **结论:** **不正确**。\n\n**C. $k = 63$**\n- **延迟检查:** $L_{worst} = (63 + 5) \\cdot 5\\,\\text{ns} = 68 \\cdot 5\\,\\text{ns} = 340\\,\\text{ns} = 0.34\\,\\mu\\text{s}$。这满足延迟约束。\n- **吞吐量检查:** 下降率 = $\\frac{7}{63+7} = \\frac{7}{70} = 0.1$，恰好是 $10\\%$。这满足吞吐量约束。\n- **结论:** 虽然 $k=63$ 是一个有效的解，但问题要求的是*最大*整数 $k$。由于 $395  63$，此选项不是正确答案。**不正确**。\n\n**D. $k = 45$**\n- **吞吐量检查:** 下降率 = $\\frac{7}{45+7} = \\frac{7}{52} \\approx 0.1346$，即 $13.46\\%$。这违反了吞吐量下降必须 $\\le 10\\%$ 的约束。\n- **结论:** **不正确**。",
            "answer": "$$\\boxed{A}$$"
        }
    ]
}