{
    "hands_on_practices": [
        {
            "introduction": "Before we delve into complex arbitration schemes, it's crucial to understand the fundamental physical limitations of a shared bus. In many systems, bidirectional buses operate in a half-duplex mode, where data can only flow in one direction at a time. This practice explores the performance impact of the 'turnaround time' ($t_{ta}$), the necessary delay when switching the bus direction from a write to a read, or vice versa, which is required to prevent electrical signal contention. By modeling transaction streams probabilistically, you will derive how these low-level physical delays accumulate to create a measurable loss in overall system throughput .",
            "id": "3648172",
            "problem": "A synchronous, shared, bidirectional Input/Output (I/O) bus is used by a Central Processing Unit (CPU) and a memory controller. The bus is half-duplex: during a read transaction the memory controller drives the bus, and during a write transaction the CPU drives the bus. To avoid electrical contention when switching the driving agent, the bus protocol mandates an insertion of exactly $t_{ta}$ turnaround cycles in which the bus is held in a high-impedance state whenever the next transaction changes direction (read-to-write or write-to-read). Assume arbitration and command phases are overlapped and contribute no additional cycles beyond those explicitly described below.\n\nConsider a long sequence of $N$ independent transactions, each of which transfers exactly one fixed-size data unit and occupies exactly $1$ cycle of bus time when active. Each transaction is a read with probability $r$ and a write with probability $1 - r$, independently of other transactions. Between consecutive transactions, if the next transaction has the same direction as the current one, it starts immediately in the next cycle; if the direction changes, the protocol inserts $t_{ta}$ turnaround cycles before the next transaction can start.\n\nUsing only fundamental definitions such as throughput being useful data per unit time and basic probability for independent events, derive the asymptotic closed-form expression for the fractional throughput loss (the fraction by which throughput is reduced compared to the ideal case with no required turnaround cycles) as a function of $t_{ta}$ and $r$ in the limit $N \\to \\infty$. Express your final answer as a single symbolic expression in terms of $t_{ta}$ and $r$. No rounding is required.",
            "solution": "The problem statement is first subjected to a rigorous validation process.\n\n### Step 1: Extract Givens\n- Bus is synchronous, shared, bidirectional, and half-duplex.\n- Users are a CPU and a memory controller.\n- A read transaction involves the memory controller driving the bus.\n- A write transaction involves the CPU driving the bus.\n- A turnaround time of $t_{ta}$ cycles is inserted whenever the transaction direction changes (read-to-write or write-to-read).\n- Arbitration and command phases contribute no additional cycles.\n- A sequence of $N$ independent transactions is considered.\n- Each transaction transfers one fixed-size data unit.\n- Each transaction's active data transfer occupies $1$ cycle.\n- The probability of a transaction being a read is $r$.\n- The probability of a transaction being a write is $1-r$.\n- Transactions are independent.\n- If consecutive transaction directions are the same, the next one starts in the next cycle.\n- The objective is to find the asymptotic closed-form expression for the fractional throughput loss as a function of $t_{ta}$ and $r$, in the limit $N \\to \\infty$.\n\n### Step 2: Validate Using Extracted Givens\nThe problem is assessed for validity.\n- **Scientifically Grounded**: The problem is grounded in fundamental principles of computer architecture and digital design. Concepts like synchronous buses, half-duplex communication, high-impedance states, and turnaround time ($t_{ta}$) are standard and realistic in the context of I/O bus protocols.\n- **Well-Posed**: The problem is well-posed. It provides all necessary parameters ($r$, $t_{ta}$) and constraints (independent transactions, $1$-cycle data transfer, limit $N \\to \\infty$) to derive a unique, meaningful analytical expression for fractional throughput loss.\n- **Objective**: The problem is stated using precise, objective, and unambiguous technical language.\n- **Completeness and Consistency**: The problem is self-contained. The simplifying assumption of zero arbitration overhead is explicitly stated and does not create a contradiction.\n- **Feasibility**: The probabilistic model of transaction streams is a standard and valid technique for performance analysis. The parameters are symbolic, precluding any physical inconsistency.\n\n### Step 3: Verdict and Action\nThe problem is deemed **valid**. It is a standard performance analysis problem in computer architecture that can be solved using basic probability theory. The solution process will now proceed.\n\nThe fractional throughput loss, $L$, is defined as the ratio of the reduction in throughput to the ideal throughput:\n$$L = \\frac{Th_{ideal} - Th_{actual}}{Th_{ideal}}$$\nwhere $Th_{ideal}$ is the throughput in the absence of any turnaround penalties, and $Th_{actual}$ is the throughput under the specified protocol.\n\nFirst, we determine the ideal throughput, $Th_{ideal}$. In the ideal case, there are no turnaround cycles ($t_{ta} = 0$). A sequence of $N$ transactions, each taking $1$ cycle for data transfer, would complete in a total time of $T_{ideal} = N \\times 1 = N$ cycles.\nThe ideal throughput is the amount of data transferred per unit time:\n$$Th_{ideal} = \\frac{N \\text{ data units}}{N \\text{ cycles}} = 1 \\frac{\\text{data unit}}{\\text{cycle}}$$\n\nNext, we determine the actual throughput, $Th_{actual}$, in the presence of turnaround penalties. The total time, $T_{actual}$, for $N$ transactions is the sum of the time for data transfers and the total time for all turnaround penalties.\nThe total time for data transfers is $N \\times 1 = N$ cycles.\nThe turnaround penalty of $t_{ta}$ cycles is incurred only when the direction of the transaction changes between two consecutive transactions. There are $N-1$ such transitions in a sequence of $N$ transactions.\n\nLet a transaction be a read ($R$) with probability $P(R) = r$ and a write ($W$) with probability $P(W) = 1-r$. Since transactions are independent, the probability of a specific sequence of two transactions is the product of their individual probabilities.\n\nA direction change occurs for a read-to-write ($R \\to W$) transition or a write-to-read ($W \\to R$) transition.\nThe probability of a read-to-write transition is:\n$$P(R \\to W) = P(R) \\times P(W) = r(1-r)$$\nThe probability of a write-to-read transition is:\n$$P(W \\to R) = P(W) \\times P(R) = (1-r)r$$\n\nThe total probability of a direction change in any given transition, $P_{change}$, is the sum of these probabilities:\n$$P_{change} = P(R \\to W) + P(W \\to R) = r(1-r) + (1-r)r = 2r(1-r)$$\n\nFor a long sequence of $N$ transactions, there are $N-1$ transitions. The expected number of direction changes, $E_{changes}$, is the number of transitions multiplied by the probability of a change per transition:\n$$E_{changes} = (N-1) P_{change} = (N-1)2r(1-r)$$\n\nEach change introduces a penalty of $t_{ta}$ cycles. Therefore, the expected total penalty time, $T_{penalty}$, is:\n$$T_{penalty} = E_{changes} \\times t_{ta} = (N-1)2r(1-r)t_{ta}$$\n\nThe total expected time for $N$ transactions is the sum of the data transfer time and the penalty time:\n$$T_{actual} = N + T_{penalty} = N + (N-1)2r(1-r)t_{ta}$$\n\nThe actual throughput is the total data transferred divided by the total time:\n$$Th_{actual} = \\frac{N}{T_{actual}} = \\frac{N}{N + (N-1)2r(1-r)t_{ta}}$$\n\nThe problem asks for the asymptotic expression as $N \\to \\infty$. We evaluate the limit of $Th_{actual}$:\n$$Th_{asymptotic} = \\lim_{N\\to\\infty} \\frac{N}{N + (N-1)2r(1-r)t_{ta}}$$\nTo evaluate this limit, we divide the numerator and the denominator by $N$:\n$$Th_{asymptotic} = \\lim_{N\\to\\infty} \\frac{1}{1 + \\frac{N-1}{N} 2r(1-r)t_{ta}}$$\nSince $\\lim_{N\\to\\infty} \\frac{N-1}{N} = \\lim_{N\\to\\infty} (1 - \\frac{1}{N}) = 1$, the expression simplifies to:\n$$Th_{asymptotic} = \\frac{1}{1 + 2r(1-r)t_{ta}}$$\n\nNow we can calculate the fractional throughput loss, $L$:\n$$L = \\frac{Th_{ideal} - Th_{asymptotic}}{Th_{ideal}} = \\frac{1 - \\frac{1}{1 + 2r(1-r)t_{ta}}}{1}$$\n$$L = 1 - \\frac{1}{1 + 2r(1-r)t_{ta}}$$\nCombining the terms by finding a common denominator:\n$$L = \\frac{(1 + 2r(1-r)t_{ta}) - 1}{1 + 2r(1-r)t_{ta}}$$\n$$L = \\frac{2r(1-r)t_{ta}}{1 + 2r(1-r)t_{ta}}$$\nThis is the final closed-form expression for the fractional throughput loss as a function of $t_{ta}$ and $r$.",
            "answer": "$$\\boxed{\\frac{2r(1-r)t_{ta}}{1 + 2r(1-r)t_{ta}}}$$"
        },
        {
            "introduction": "Modern systems are rarely monolithic; they are composed of many subsystems that often operate at different speeds. A common challenge is bridging a high-speed bus with a lower-speed one without losing data. This practice focuses on the First-In First-Out (FIFO) buffer, a critical component for rate-decoupling. You will step into the shoes of a hardware designer to calculate the minimum buffer depth needed to absorb a burst of data from a fast source, while accounting for the delays and slower drain rate of the destination bus. Mastering this type of worst-case analysis is essential for building reliable, high-performance hardware .",
            "id": "3648166",
            "problem": "A bus bridge connects an upstream posted-write source to a downstream shared bus. The upstream protocol is posted (no per-beat flow control once a burst is launched): when a burst begins, exactly $B$ words arrive back-to-back at an instantaneous rate of $R_{in}$ words per second. The downstream bus drains data at a sustained rate of $R_{out}$ words per second but may be denied service by arbitration for up to $T_{\\text{blk}}$ seconds in the worst case; after arbitration grant, a fixed start-up latency of $L_{s}$ cycles at frequency $f_{out}$ elapses before the first word can be drained. The bridge contains a First-In First-Out (FIFO) buffer to decouple the rates. Assume the FIFO is empty at time $t=0$, a single upstream burst of length $B$ starts at $t=0$, and the worst-case arbitration denial interval also starts at $t=0$. During the combined block and start-up interval, no draining occurs; afterward, draining proceeds continuously at $R_{out}$.\n\nUse the following parameters:\n- Upstream word rate $R_{in} = 250 \\times 10^{6}$ words/s (one word per cycle at $f_{in} = 250\\,\\text{MHz}$).\n- Downstream word rate $R_{out} = 150 \\times 10^{6}$ words/s (one word per cycle at $f_{out} = 150\\,\\text{MHz}$).\n- Worst-case arbitration block $T_{\\text{blk}} = 200 \\times 10^{-9}\\,\\text{s}$.\n- Downstream start-up latency $L_{s} = 12$ cycles at $f_{out} = 150\\,\\text{MHz}$.\n- Burst length $B = 256$ words.\n\nCompute the minimum FIFO depth $D$ (in words) that guarantees no overflow for this burst under the stated worst-case timing. Express your answer as an integer number of words (no units). If any intermediate real-valued quantity appears in your calculation of the occupancy, you must take the least integer $D$ that is sufficient to prevent overflow.",
            "solution": "The problem requires the determination of the minimum required depth, $D$, of a First-In First-Out (FIFO) buffer to guarantee no data loss under a specified worst-case scenario. This depth corresponds to the maximum occupancy the FIFO will experience. The occupancy of the FIFO at any time $t$, denoted as $N(t)$, is the difference between the total number of words that have entered the FIFO, $W_{in}(t)$, and the total number of words that have exited it, $W_{out}(t)$. The FIFO is initially empty, so $N(0) = 0$.\n\nThe number of words that have entered the FIFO by time $t$ is determined by the upstream source. A burst of $B=256$ words begins at $t=0$ and arrives at a constant rate of $R_{in} = 250 \\times 10^{6}$ words/s. The duration of this input burst is $T_{burst} = \\frac{B}{R_{in}}$. For $t$ within the burst duration, the number of words arrived is $W_{in}(t) = R_{in} \\cdot t$. After the burst is complete, the total number of words that have arrived remains constant at $B$.\n$$W_{in}(t) = \\begin{cases} R_{in} \\cdot t & \\text{for } 0 \\le t \\le T_{burst} \\\\ B & \\text{for } t > T_{burst} \\end{cases}$$\n\nThe number of words that have exited the FIFO by time $t$, $W_{out}(t)$, is determined by the downstream bus. Draining does not start immediately at $t=0$. There is a total delay period, $T_{delay}$, during which no words are drained. This delay is the sum of the worst-case arbitration block time, $T_{\\text{blk}}$, and a fixed start-up latency, $T_{startup}$. The start-up latency is given as $L_s = 12$ cycles at a frequency of $f_{out} = 150\\,\\text{MHz}$, so its duration in seconds is $T_{startup} = \\frac{L_s}{f_{out}}$.\nThe total delay before draining begins is $T_{delay} = T_{\\text{blk}} + T_{startup}$.\nAfter this delay, draining proceeds at a sustained rate of $R_{out} = 150 \\times 10^{6}$ words/s as long as the FIFO is not empty.\n$$W_{out}(t) = \\begin{cases} 0 & \\text{for } 0 \\le t \\le T_{delay} \\\\ R_{out} \\cdot (t - T_{delay}) & \\text{for } t > T_{delay} \\end{cases}$$\n\nThe FIFO occupancy $N(t) = W_{in}(t) - W_{out}(t)$ will be maximal when its rate of change, $\\frac{dN}{dt} = R_{net}(t)$, transitions from positive to zero or negative. The net rate is the difference between the instantaneous input and output rates.\n1.  For $0 \\le t \\le T_{delay}$: The input rate is $R_{in}$ and the output rate is $0$. The net rate is $R_{in} > 0$, so occupancy increases.\n2.  For $T_{delay} < t \\le T_{burst}$: The input rate is $R_{in}$ and the output rate is $R_{out}$. The net rate is $R_{in} - R_{out}$. Given $R_{in} > R_{out}$, this net rate is positive, and occupancy continues to increase.\n3.  For $t > T_{burst}$: The input rate is $0$ and the output rate is $R_{out}$. The net rate is $-R_{out} < 0$, so occupancy decreases.\n\nThe occupancy increases until $t = T_{burst}$ and decreases thereafter. Thus, the maximum occupancy $N_{max}$ occurs precisely at the end of the input burst, at $t=T_{burst}$.\n$N_{max} = N(T_{burst}) = W_{in}(T_{burst}) - W_{out}(T_{burst})$.\n\nWe now substitute the given parameter values to calculate $N_{max}$.\nThe parameters are:\n$B = 256$ words\n$R_{in} = 250 \\times 10^{6}$ words/s\n$R_{out} = 150 \\times 10^{6}$ words/s\n$T_{\\text{blk}} = 200 \\times 10^{-9}$ s\n$L_{s} = 12$ cycles\n$f_{out} = 150 \\times 10^{6}$ Hz\n\nFirst, we calculate the relevant time constants:\nThe duration of the input burst is:\n$$T_{burst} = \\frac{B}{R_{in}} = \\frac{256}{250 \\times 10^{6} \\text{ s}^{-1}} = 1.024 \\times 10^{-6} \\text{ s}$$\nThe start-up latency duration is:\n$$T_{startup} = \\frac{L_s}{f_{out}} = \\frac{12}{150 \\times 10^{6} \\text{ s}^{-1}} = 80 \\times 10^{-9} \\text{ s}$$\nThe total delay before draining begins is:\n$$T_{delay} = T_{\\text{blk}} + T_{startup} = 200 \\times 10^{-9} \\text{ s} + 80 \\times 10^{-9} \\text{ s} = 280 \\times 10^{-9} \\text{ s}$$\nSince $T_{burst} > T_{delay}$, our analysis that the maximum occurs at $t=T_{burst}$ is correct.\n\nAt $t = T_{burst}$, the total number of words that have arrived is $W_{in}(T_{burst}) = B = 256$.\nThe draining has been active for a duration of $T_{burst} - T_{delay}$. The number of words drained is:\n$$W_{out}(T_{burst}) = R_{out} \\cdot (T_{burst} - T_{delay})$$\n$$W_{out}(T_{burst}) = (150 \\times 10^{6} \\text{ words/s}) \\cdot (1.024 \\times 10^{-6} \\text{ s} - 280 \\times 10^{-9} \\text{ s})$$\n$$W_{out}(T_{burst}) = (150 \\times 10^{6}) \\cdot (1024 \\times 10^{-9} - 280 \\times 10^{-9}) \\text{ s} = (150 \\times 10^{6}) \\cdot (744 \\times 10^{-9}) \\text{ words}$$\n$$W_{out}(T_{burst}) = 150 \\times 0.744 = 111.6 \\text{ words}$$\n\nThe maximum occupancy is the difference between words in and words out at this time:\n$$N_{max} = W_{in}(T_{burst}) - W_{out}(T_{burst}) = 256 - 111.6 = 144.4 \\text{ words}$$\nThe FIFO must be able to hold this maximum number of words. Since the FIFO depth must be an integer, we must choose the smallest integer depth $D$ such that $D \\ge N_{max}$. This requires taking the ceiling of $N_{max}$.\n$$D = \\lceil N_{max} \\rceil = \\lceil 144.4 \\rceil = 145$$\nTherefore, a minimum FIFO depth of $145$ words is required to prevent overflow.",
            "answer": "$$\\boxed{145}$$"
        },
        {
            "introduction": "The heart of a shared bus is its arbiter, the logic that decides which device gets access and when. This decision often involves a fundamental trade-off between maximizing bulk data throughput and guaranteeing low-latency response for urgent events. This practice examines a classic conflict: a long, high-efficiency Direct Memory Access (DMA) transfer that risks 'starving' a CPU from responding to a critical interrupt. You will analyze an interleaving scheme designed to solve this problem and determine the optimal parameter $k$ that balances the competing demands of throughput and latency. This exercise provides direct insight into the art of co-designing bus protocols and arbitration logic to meet system-level performance goals .",
            "id": "3648126",
            "problem": "A shared system bus connects the Central Processing Unit (CPU), a Direct Memory Access (DMA) controller, and several I/O devices. The bus runs at frequency $f_{\\text{bus}} = 200\\,\\text{MHz}$, and one data transfer on the bus (one \"beat\") takes $t_b = 1/f_{\\text{bus}}$ seconds. Under the current non-preemptive bus arbitration, when the DMA controller wins the bus for a burst transfer, it holds the bus until its burst completes. Consider a DMA burst of $B = 2048$ beats. An urgent device interrupt must be acknowledged by the CPU, and the Interrupt Service Routine (ISR) cannot begin until the CPU performs at least one atomic bus operation to an interrupt acknowledge register. To reduce interrupt starvation under long DMA bursts, the architect proposes an interleaving scheme that injects a periodic Read-Modify-Write (RMW) token for urgent traffic:\n\n- A Read-Modify-Write (RMW) token consists of $3$ beats reserved for urgent traffic (read, modify, write).\n- The bus incurs a turn-around penalty of $2$ beats on each master handoff (from DMA to urgent token and from urgent token back to DMA).\n- The arbiter enforces that after every $k$ DMA beats, one RMW token is inserted (preempting the DMA for the token), whether or not urgent traffic is pending, to guarantee a bound on worst-case interrupt latency.\n\nThe architect requires that the worst-case time from interrupt assertion to completion of the $3$-beat RMW sequence be bounded by $L_{\\max} = 2\\,\\mu\\text{s}$ even if the interrupt arrives at the most unfortunate instant and the DMA is performing a very long burst. At the same time, the DMA throughput degradation under continuous token insertion must not exceed $10\\%$ compared to uninterrupted DMA operation.\n\nFrom first principles and the definitions above, determine the largest integer $k$ (in beats) that satisfies both constraints and thereby maximizes DMA throughput under the interleaving scheme. Choose the correct option.\n\nA. $k = 395$\n\nB. $k = 397$\n\nC. $k = 63$\n\nD. $k = 45$",
            "solution": "The user has provided a problem in computer architecture concerning bus arbitration, interrupt latency, and DMA throughput. I will first validate the problem statement and then proceed to a full solution.\n\n### Step 1: Extract Givens\nThe problem provides the following data and constraints:\n- Bus frequency: $f_{\\text{bus}} = 200\\,\\text{MHz}$\n- Time for one bus beat: $t_b = 1/f_{\\text{bus}}$\n- Example DMA burst size: $B = 2048$ beats (contextual, not a direct parameter for calculating $k$)\n- Read-Modify-Write (RMW) token size: $3$ beats\n- Turn-around penalty per handoff: $2$ beats\n- Interleaving structure: After every $k$ DMA beats, one RMW token is inserted. This insertion involves two handoffs (DMA $\\rightarrow$ CPU, CPU $\\rightarrow$ DMA).\n- Latency Constraint: The worst-case time from interrupt assertion to the completion of the $3$-beat RMW sequence must be no more than $L_{\\max} = 2\\,\\mu\\text{s}$.\n- Throughput Constraint: The DMA throughput degradation due to the interleaving scheme must not exceed $10\\%$.\n- Objective: Find the largest integer $k$ that satisfies both constraints.\n\n### Step 2: Validate Using Extracted Givens\nThe problem statement is evaluated against the validation criteria.\n- **Scientifically Grounded:** The problem deals with standard concepts in computer organization and architecture, including bus protocols, DMA, interrupts, arbitration, and performance trade-offs (latency vs. throughput). The scenario is a realistic engineering problem. The values provided ($200\\,\\text{MHz}$ bus, $2\\,\\mu\\text{s}$ latency bound) are plausible. The model is a simplified but valid representation of a bus interleaving scheme.\n- **Well-Posed:** The problem is well-posed. It defines two distinct constraints on a single variable, $k$, and asks for the maximization of this variable within the allowed solution space. This structure leads to a unique integer solution.\n- **Objective:** The problem is stated in precise, objective technical terms. Definitions for \"RMW token\" and \"turn-around penalty\" are provided, and concepts like \"throughput degradation\" have standard interpretations in this context.\n\n### Step 3: Verdict and Action\nThe problem statement is **valid**. It is a self-contained, consistent, and scientifically sound problem that can be solved using first principles of computer architecture performance analysis. I will now proceed with the derivation of the solution.\n\n### Derivation\nFirst, we calculate the duration of a single bus beat, $t_b$.\n$$t_b = \\frac{1}{f_{\\text{bus}}} = \\frac{1}{200 \\times 10^6\\,\\text{Hz}} = 5 \\times 10^{-9}\\,\\text{s} = 5\\,\\text{ns}$$\n\nNext, we analyze the structure of the interleaved bus access cycle. The cycle consists of $k$ beats for DMA, followed by a reserved slot for the RMW token. The overhead associated with the RMW token slot includes the token itself and the penalties for handing the bus over and back.\n- Beats for DMA transfer: $k$\n- Beats for handoff from DMA to RMW master: $2$\n- Beats for the RMW operation: $3$\n- Beats for handoff from RMW master back to DMA: $2$\n\nThe total number of beats consumed by the RMW token insertion (the overhead) is $2 + 3 + 2 = 7$ beats.\nTherefore, one full interleaved cycle consists of $k$ DMA beats and $7$ overhead beats, for a total of $k+7$ beats.\n\nNow, we formulate the two constraints in terms of $k$.\n\n**Constraint 1: Worst-Case Interrupt Latency**\nThe worst-case latency occurs when an urgent interrupt is asserted at the most inopportune moment. In this scheme, the worst time is immediately after the opportunity to use an RMW token slot has passed. This means the CPU must wait for the entire next block of $k$ DMA beats to complete, then for the bus handoff, before its own RMW operation can even begin.\n\nThe total time from interrupt assertion to the *completion* of the RMW sequence is the sum of:\n1.  The time to wait for the ongoing block of $k$ DMA beats to finish: $k \\cdot t_b$\n2.  The time for the bus master to be handed off from the DMA controller to the CPU: $2 \\cdot t_b$\n3.  The time to perform the $3$-beat RMW operation itself: $3 \\cdot t_b$\n\nThe worst-case latency, $L_{worst}$, is the sum of these durations:\n$$L_{worst} = (k \\cdot t_b) + (2 \\cdot t_b) + (3 \\cdot t_b) = (k + 5) \\cdot t_b$$\n\nThis latency must be less than or equal to $L_{\\max} = 2\\,\\mu\\text{s} = 2000\\,\\text{ns}$.\n$$(k + 5) \\cdot (5\\,\\text{ns}) \\le 2000\\,\\text{ns}$$\nDividing by $5\\,\\text{ns}$:\n$$k + 5 \\le 400$$\n$$k \\le 395$$\nThe latency constraint requires that $k$ be no larger than $395$.\n\n**Constraint 2: DMA Throughput Degradation**\nThroughput can be measured in terms of useful data beats per unit of time.\n- **Ideal Throughput (no interleaving):** The DMA controller uses $100\\%$ of the bus beats. The throughput is proportional to $1/t_b$. We can normalize this to $1$ useful beat per bus beat.\n- **Interleaved Throughput:** In one cycle of $k+7$ total beats, only $k$ beats are used for DMA. The effective throughput is the ratio of useful beats to total beats, which is $\\frac{k}{k+7}$.\n\nThe throughput degradation is the fractional reduction in throughput:\n$$\\text{Degradation} = \\frac{\\text{Throughput}_{\\text{ideal}} - \\text{Throughput}_{\\text{interleaved}}}{\\text{Throughput}_{\\text{ideal}}} = \\frac{1 - \\frac{k}{k+7}}{1} = 1 - \\frac{k}{k+7} = \\frac{(k+7) - k}{k+7} = \\frac{7}{k+7}$$\n\nThis degradation must not exceed $10\\%$, or $0.1$.\n$$\\frac{7}{k+7} \\le 0.1$$\n$$7 \\le 0.1 \\cdot (k+7)$$\n$$70 \\le k+7$$\n$$k \\ge 63$$\nThe throughput constraint requires that $k$ be no smaller than $63$.\n\n**Synthesizing the Constraints**\nWe must satisfy both constraints simultaneously:\n1.  From latency: $k \\le 395$\n2.  From throughput: $k \\ge 63$\n\nCombining these, the valid range for the integer $k$ is $63 \\le k \\le 395$. The problem asks for the *largest integer k* that satisfies both constraints, which corresponds to the value of $k$ that maximizes DMA throughput (since throughput $\\frac{k}{k+7}$ is an increasing function of $k$) while meeting the latency requirement. The largest integer in this range is $395$.\n\n### Option-by-Option Analysis\n\n**A. $k = 395$**\n- **Latency Check:** $L_{worst} = (395 + 5) \\cdot 5\\,\\text{ns} = 400 \\cdot 5\\,\\text{ns} = 2000\\,\\text{ns} = 2\\,\\mu\\text{s}$. This meets the constraint $L_{worst} \\le 2\\,\\mu\\text{s}$.\n- **Throughput Check:** Degradation = $\\frac{7}{395+7} = \\frac{7}{402} \\approx 0.0174$, which is $1.74\\%$. This is well below the $10\\%$ limit.\n- **Verdict:** This value of $k$ satisfies both constraints and is the maximum possible integer value allowed by the latency constraint. Therefore, it is the largest integer value that satisfies both. **Correct**.\n\n**B. $k = 397$**\n- **Latency Check:** $L_{worst} = (397 + 5) \\cdot 5\\,\\text{ns} = 402 \\cdot 5\\,\\text{ns} = 2010\\,\\text{ns} = 2.01\\,\\mu\\text{s}$. This violates the constraint $L_{worst} \\le 2\\,\\mu\\text{s}$.\n- **Verdict:** **Incorrect**.\n\n**C. $k = 63$**\n- **Latency Check:** $L_{worst} = (63 + 5) \\cdot 5\\,\\text{ns} = 68 \\cdot 5\\,\\text{ns} = 340\\,\\text{ns} = 0.34\\,\\mu\\text{s}$. This meets the latency constraint.\n- **Throughput Check:** Degradation = $\\frac{7}{63+7} = \\frac{7}{70} = 0.1$, which is exactly $10\\%$. This meets the throughput constraint.\n- **Verdict:** While $k=63$ is a valid solution, the problem asks for the *largest* integer $k$. Since $395 > 63$, this option is not the correct answer. **Incorrect**.\n\n**D. $k = 45$**\n- **Throughput Check:** Degradation = $\\frac{7}{45+7} = \\frac{7}{52} \\approx 0.1346$, which is $13.46\\%$. This violates the throughput degradation constraint of being $\\le 10\\%$.\n- **Verdict:** **Incorrect**.",
            "answer": "$$\\boxed{A}$$"
        }
    ]
}