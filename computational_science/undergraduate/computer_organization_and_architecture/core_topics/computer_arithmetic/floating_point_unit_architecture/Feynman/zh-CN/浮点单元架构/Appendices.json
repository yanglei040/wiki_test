{
    "hands_on_practices": [
        {
            "introduction": "浮点运算的执行时间并非一成不变，尤其是加法和减法。操作数的指数差异和相减时的有效数字抵消程度，都会直接影响流水线的执行效率。本练习提供一个具体的时序模型，让你通过动手计算，量化对齐和规格化阶段对FPU加法器性能的影响，从而深入理解流水线停顿的来源。",
            "id": "3643299",
            "problem": "你的任务是为一个浮点单元（FPU）中的浮点加/减法数据通路设计并实现一个周期级时序模型，该模型需要分离出规格化延迟，并将其与阶码差和前导零预测（LZA）关联起来。你的程序必须为一组类似于微基准测试的测试用例计算预测的周期数，这些测试用例改变了绝对阶码差 $|E_x - E_y|$ 和尾数中的抵消程度。目标是模拟对齐移位器和规格化硬件对总周期的贡献。\n\n从以下基础和架构事实出发：\n- 算术遵循二进制 IEEE $754$ 单精度格式，其字段为：符号位 $S \\in \\{0,1\\}$，无偏阶码 $E \\in \\mathbb{Z}$，以及小数部分 $F \\in \\{0,1,\\dots,2^{23}-1\\}$。一个规格化的操作数在其尾数中有一个隐含的前导 1。将一个操作数的 $24$ 位整数尾数表示为 $M = 2^{23} + F$。\n- 浮点加/减法通过将阶码较小的尾数右移 $d = |E_x - E_y|$ 位来对其进行对齐，然后在对齐后的数值上执行带符号的加/减法。\n- 加法后规格化要求在因抵消而出现前导零时将结果左移，或在有进位时右移一位，以恢复前导 1。前导零预测（LZA）是一种逻辑，它预测前导零的数量以驱动规格化；实际需要的左移量等于加法后数值中的前导零数量。\n- 用于对齐的实际桶形移位器具有有限的每周期吞吐量。假设对齐硬件每周期可以移位 $w_a = 8$ 位。流水线包含一个对齐周期；当 $d$ 超过 $w_a$ 时，会产生额外的对齐停顿周期。\n- 类似地，规格化硬件的每周期吞吐量也有限。假设规格化硬件每周期可以左移 $w_n = 4$ 位。流水线不包含用于可变左移规格化的专用周期；任何需要的左移规格化都会导致停顿周期。\n- 加/减法操作的基准流水线深度（不包括停顿）为 $C_0 = 4$ 个周期（比较/准备、对齐、加/减、舍入/打包）。停顿是累加的。\n\n根据这些信息，定义用于计算预测周期 $C_{\\text{total}}$ 的时序模型：\n1. 计算 $d = |E_x - E_y|$。\n2. 令 $M_x = 2^{23} + F_x$ 和 $M_y = 2^{23} + F_y$ 为 $24$ 位尾数整数。将阶码较大的操作数确定为基准；如果阶码相等，则将 $M$ 较大的操作数确定为基准。将阶码较小的尾数右移 $d$ 位以进行对齐。\n3. 执行数值操作：如果 $S_x = S_y$，则对齐后的数值为 $R = M_{\\text{large}} + M_{\\text{small, aligned}}$；否则，$R = |M_{\\text{large}} - M_{\\text{small, aligned}}|$。\n4. 确定所需的规格化：\n   - 如果 $R = 0$，则设置 $L = 24$。\n   - 如果 $R \\ge 2^{24}$（有进位），则设置 $L = 0$。\n   - 否则，$L$ 是 $R$ 的 $24$ 位表示中的前导零计数（最高有效位之前的零位数）。\n5. 对齐停顿周期：$S_a = \\max\\left(0, \\left\\lceil \\frac{d}{w_a} \\right\\rceil - 1\\right)$。\n6. 规格化停顿周期：$S_n = \\left\\lceil \\frac{L}{w_n} \\right\\rceil$。\n7. 总预测周期：$C_{\\text{total}} = C_0 + S_a + S_n$。\n\n实现一个程序，对于下面的每个测试用例，根据上述模型计算 $C_{\\text{total}}$。所有操作数都是 IEEE $754$ 单精度规格化值，由其字段 $(S, E, F)$ 指定，其中 $S$ 是符号位，$E$ 是无偏阶码，$F$ 是 $23$ 位小数部分的整数。在你的模型中使用整数算术，并将 $E$ 视为抽象的整数字段；你不需要重构浮点数。\n\n测试套件：\n- 用例 $1$（理想路径，阶码相等，无抵消，有进位）：$(S_x, E_x, F_x) = (0, 100, 0x000000)$，$(S_y, E_y, F_y) = (0, 100, 0x400000)$。\n- 用例 $2$（大范围对齐，最小化规格化）：$(S_x, E_x, F_x) = (0, 120, 0x200000)$，$(S_y, E_y, F_y) = (0, 90, 0x100000)$。\n- 用例 $3$（符号相反，中度抵消）：$(S_x, E_x, F_x) = (0, 100, 0x010000)$，$(S_y, E_y, F_y) = (1, 100, 0x00F000)$。\n- 用例 $4$（符号相反，极端抵消）：$(S_x, E_x, F_x) = (0, 100, 0x000001)$，$(S_y, E_y, F_y) = (1, 100, 0x000000)$。\n- 用例 $5$（对齐超出尾数宽度）：$(S_x, E_x, F_x) = (0, 150, 0x000000)$，$(S_y, E_y, F_y) = (0, 110, 0x000000)$。\n- 用例 $6$（阶码相等，大小数部分，有进位，无规格化左移）：$(S_x, E_x, F_x) = (0, 10, 0x7FFFFF)$，$(S_y, E_y, F_y) = (0, 10, 0x7FFFFF)$。\n\n要求输出：\n- 你的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表（例如，$[result_1,result_2,\\dots]$），其中每个 $result_i$ 是按上述顺序列出的相应测试用例的整数 $C_{\\text{total}}$。",
            "solution": "该问题要求为一个浮点加/减法单元设计一个周期级时序模型。为确保问题可解，首先执行验证过程。\n\n### 问题验证\n\n**步骤1：提取的已知条件**\n- **算术标准：** IEEE $754$ 单精度二进制格式。\n- **操作数字段：** 符号位 $S \\in \\{0,1\\}$，无偏阶码 $E \\in \\mathbb{Z}$，小数部分 $F \\in \\{0,1,\\dots,2^{23}-1\\}$。\n- **尾数表示：** 对于规格化操作数，24位尾数整数为 $M = 2^{23} + F$。\n- **对齐移位：** 阶码较小的操作数的尾数右移 $d = |E_x - E_y|$ 位。\n- **硬件吞吐量：**\n    - 对齐移位器宽度：$w_a = 8$ 位/周期。\n    - 规格化移位器宽度：$w_n = 4$ 位/周期。\n- **基准周期数：** $C_0 = 4$ 个周期。\n- **总周期数（$C_{\\text{total}}$）的时序模型：**\n    1.  计算阶码差 $d = |E_x - E_y|$。\n    2.  定义尾数 $M_x = 2^{23} + F_x$ 和 $M_y = 2^{23} + F_y$。阶码较大的操作数是基准。如果阶码相等，则尾数 $M$ 较大的操作数是基准。另一个操作数的尾数通过右移 $d$ 位进行对齐。\n    3.  计算对齐后的数值 $R$。如果 $S_x = S_y$，则 $R = M_{\\text{large}} + M_{\\text{small, aligned}}$。如果 $S_x \\neq S_y$，则 $R = |M_{\\text{large}} - M_{\\text{small, aligned}}|$。\n    4.  确定规格化左移量 $L$：如果 $R = 0$，则 $L = 24$；如果 $R \\ge 2^{24}$，则 $L = 0$；否则，$L$ 是 $R$ 的24位表示中前导零的计数。\n    5.  对齐停顿周期为 $S_a = \\max\\left(0, \\left\\lceil \\frac{d}{w_a} \\right\\rceil - 1\\right)$。\n    6.  规格化停顿周期为 $S_n = \\left\\lceil \\frac{L}{w_n} \\right\\rceil$。\n    7.  总周期数为 $C_{\\text{total}} = C_0 + S_a + S_n$。\n- **测试套件：** 六个由 $(S, E, F)$ 三元组定义的测试用例。\n\n**步骤2：使用提取的已知条件进行验证**\n- **科学依据：** 该问题牢固地基于计算机体系结构的原理，特别是浮点单元的设计。所描述的流水线阶段（对齐、ALU操作、规格化）以及由于可变延迟操作（移位）导致的流水线停顿概念是标准且现实的。\n- **适定性：** 问题陈述为计算总周期数提供了一个完整、无歧义且确定性的算法。所有必需的常数（$C_0, w_a, w_n$）、停顿公式（$S_a, S_n$）和输入数据都已明确定义。每个测试用例都存在唯一的解。\n- **客观性：** 问题以精确、定量和客观的语言陈述，没有任何主观性或观点。\n\n**步骤3：结论与行动**\n该问题有效。这是一个定义明确的、应用微体系结构性能模型的练习。解决方案将通过将给定模型应用于每个测试用例来继续进行。\n\n### 解题推导\n\n每个测试用例的总周期数 $C_{\\text{total}}$ 是通过遵循指定的时序模型计算得出的。常数为 $C_0 = 4$，$w_a = 8$，以及 $w_n = 4$。\n\n**用例 1:** $(S_x, E_x, F_x) = (0, 100, 0x0)$, $(S_y, E_y, F_y) = (0, 100, 0x400000)$\n1.  $d = |100 - 100| = 0$。\n2.  $M_x = 2^{23} + 0x0 = 0x800000$。$M_y = 2^{23} + 0x400000 = 0xC00000$。\n3.  阶码相等，且 $M_y  M_x$，因此操作数 $y$ 是基准。$M_{\\text{large}} = M_y$，$M_{\\text{small}} = M_x$。\n4.  符号相同 ($S_x = S_y = 0$)。由于 $d=0$，$M_{\\text{small, aligned}} = M_x$。\n5.  $R = M_y + M_x = 0xC00000 + 0x800000 = 0x1400000$。\n6.  $R \\ge 2^{24}$，表示有进位。因此，$L=0$。\n7.  $S_a = \\max(0, \\lceil 0/8 \\rceil - 1) = 0$。\n8.  $S_n = \\lceil 0/4 \\rceil = 0$。\n9.  $C_{\\text{total}} = 4 + 0 + 0 = 4$。\n\n**用例 2:** $(S_x, E_x, F_x) = (0, 120, 0x200000)$, $(S_y, E_y, F_y) = (0, 90, 0x100000)$\n1.  $d = |120 - 90| = 30$。\n2.  $M_x = 2^{23} + 0x200000 = 0xA00000$。$M_y = 2^{23} + 0x100000 = 0x900000$。\n3.  $E_x  E_y$，因此操作数 $x$ 是基准。$M_{\\text{large}} = M_x$，$M_{\\text{small}} = M_y$。\n4.  符号相同。较小操作数的尾数被对齐：$M_{\\text{small, aligned}} = M_y \\gg 30 = 0$。\n5.  $R = M_x + 0 = 0xA00000$。\n6.  结果 $R$ 是一个24位的值，其最高有效位在第23位。它已经规格化。因此，$L=0$。\n7.  $S_a = \\max(0, \\lceil 30/8 \\rceil - 1) = \\max(0, 4 - 1) = 3$。\n8.  $S_n = \\lceil 0/4 \\rceil = 0$。\n9.  $C_{\\text{total}} = 4 + 3 + 0 = 7$。\n\n**用例 3:** $(S_x, E_x, F_x) = (0, 100, 0x010000)$, $(S_y, E_y, F_y) = (1, 100, 0x00F000)$\n1.  $d = |100 - 100| = 0$。\n2.  $M_x = 2^{23} + 0x010000 = 0x810000$。$M_y = 2^{23} + 0x00F000 = 0x80F000$。\n3.  阶码相等，且 $M_x  M_y$，因此 $x$ 是基准。$M_{\\text{large}} = M_x$，$M_{\\text{small}} = M_y$。\n4.  符号不同。由于 $d=0$，$M_{\\text{small, aligned}} = M_y$。\n5.  $R = |M_x - M_y| = |0x810000 - 0x80F000| = 0x1000$。\n6.  $R = 0x1000 = 2^{12}$。作为一个24位数，最高有效位在索引12。前导零的数量是 $L = 23 - 12 = 11$。\n7.  $S_a = \\max(0, \\lceil 0/8 \\rceil - 1) = 0$。\n8.  $S_n = \\lceil 11/4 \\rceil = 3$。\n9.  $C_{\\text{total}} = 4 + 0 + 3 = 7$。\n\n**用例 4:** $(S_x, E_x, F_x) = (0, 100, 0x000001)$, $(S_y, E_y, F_y) = (1, 100, 0x000000)$\n1.  $d = |100 - 100| = 0$。\n2.  $M_x = 2^{23} + 0x1 = 0x800001$。$M_y = 2^{23} + 0x0 = 0x800000$。\n3.  阶码相等，$M_x  M_y$，因此 $x$ 是基准。$M_{\\text{large}} = M_x$，$M_{\\text{small}} = M_y$。\n4.  符号不同。$M_{\\text{small, aligned}} = M_y$。\n5.  $R = |M_x - M_y| = |0x800001 - 0x800000| = 1$。\n6.  结果 $R=1$。作为一个24位数，最高有效位在索引0。前导零的数量是 $L = 23 - 0 = 23$。\n7.  $S_a = \\max(0, \\lceil 0/8 \\rceil - 1) = 0$。\n8.  $S_n = \\lceil 23/4 \\rceil = 6$。\n9.  $C_{\\text{total}} = 4 + 0 + 6 = 10$。\n\n**用例 5:** $(S_x, E_x, F_x) = (0, 150, 0x0)$, $(S_y, E_y, F_y) = (0, 110, 0x0)$\n1.  $d = |150 - 110| = 40$。\n2.  $M_x = 2^{23} + 0x0 = 0x800000$。$M_y = 2^{23} + 0x0 = 0x800000$。\n3.  $E_x  E_y$，因此 $x$ 是基准。$M_{\\text{large}} = M_x$，$M_{\\text{small}} = M_y$。\n4.  符号相同。$M_{\\text{small, aligned}} = M_y \\gg 40 = 0$。\n5.  $R = M_x + 0 = 0x800000$。\n6.  结果已经规格化。因此，$L=0$。\n7.  $S_a = \\max(0, \\lceil 40/8 \\rceil - 1) = \\max(0, 5 - 1) = 4$。\n8.  $S_n = \\lceil 0/4 \\rceil = 0$。\n9.  $C_{\\text{total}} = 4 + 4 + 0 = 8$。\n\n**用例 6:** $(S_x, E_x, F_x) = (0, 10, 0x7FFFFF)$, $(S_y, E_y, F_y) = (0, 10, 0x7FFFFF)$\n1.  $d = |10 - 10| = 0$。\n2.  $M_x = 2^{23} + 0x7FFFFF = 0xFFFFFF$。$M_y = 2^{23} + 0x7FFFFF = 0xFFFFFF$。\n3.  阶码相等，且 $M_x = M_y$。我们可以选择 $x$ 作为基准。$M_{\\text{large}} = M_x$，$M_{\\text{small}} = M_y$。\n4.  符号相同。$M_{\\text{small, aligned}} = M_y$。\n5.  $R = M_x + M_y = 0xFFFFFF + 0xFFFFFF = 0x1FFFFFE$。\n6.  $R \\ge 2^{24}$，表示有进位。因此，$L=0$。\n7.  $S_a = \\max(0, \\lceil 0/8 \\rceil - 1) = 0$。\n8.  $S_n = \\lceil 0/4 \\rceil = 0$。\n9.  $C_{\\text{total}} = 4 + 0 + 0 = 4$。\n\n六个用例最终计算出的周期数是 $[4, 7, 7, 10, 8, 4]$。",
            "answer": "[4, 7, 7, 10, 8, 4]"
        },
        {
            "introduction": "上一节的性能模型揭示了规格化左移是流水线延迟的重要来源。一个自然的问题是：规格化左移的最大位数是多少？本练习将引导你从第一性原理出发，构造导致“灾难性抵消”的输入操作数，从而推导出加法器必须支持的最大规格化移位数。这个过程不仅能加深你对浮点数表示的理解，也能让你明白FPU中规格化逻辑单元的设计约束。",
            "id": "3643224",
            "problem": "一个符合电气和电子工程师协会（Institute of Electrical and Electronics Engineers, IEEE）754（IEEE 754）标准的二进制浮点单元以基数 $2$ 运行，精度为 $p \\ge 2$（意味着尾数有 $p$ 位，包括隐含的前导 $1$），采用规格化编码，并使用“舍入到最近，偶数优先”的舍入模式。考虑这样一个加法单元：它对齐指数，形成尾数的精确非规格化中间和（当操作数符号不同时进行减法），通过将尾数左移某个非负整数位数 $s$ 来规格化结果，同时将指数减少相同的 $s$，最后将尾数舍入到 $p$ 位。\n\n你需要构造两个可表示的输入 $x$ 和 $y$，使得它们在此浮点加法中引发最大可能的抵消。该构造必须满足：\n- $x$ 和 $y$ 是规格化的，符号相反，并共享相同的无偏指数 $e$，该 $e$ 选择得足够大以确保在规格化过程中不会发生下溢。\n- $x \\ne -y$，使得精确和非零，但在所有此类数对中其绝对值尽可能小。\n\n令 $r = x + y$ 表示精确的实数和。将实数大小为 $z$ 的末位单位 (ulp) 定义为在 $z$ 的指数处相邻可表示规格化浮点数之间的距离，即，如果 $\\operatorname{expo}(z) = E$，那么 $\\operatorname{ulp}(z) = 2^{E-(p-1)}$。\n\n任务：\n1. 从规格化二进制表示和指数对齐的第一性原理出发，推导当相加这样的 $x$ 和 $y$ 时，加法单元必须应用于非规格化尾数的最大可能再规格化左移位数 $s(p)$。\n2. 使用“舍入到最近，偶数优先”的定义和上述 ulp 的定义，确定对于你构造的 $x$ 和 $y$，所产生的舍入误差大小 $E(p)$，该误差以 $\\operatorname{ulp}(r)$ 为单位度量。\n\n请以精确封闭形式的单行矩阵 $\\bigl[s(p)\\ \\ E(p)\\bigr]$ 提供你的最终答案。无需舍入。",
            "solution": "用户提供了一个具有科学依据、良构且客观的问题陈述。这是计算机算术领域中的一个有效问题，具体涉及在灾 nạn性抵消条件下对浮点加法的分析。因此，我们可以进行完整解答。\n\n问题要求推导两个量 $s(p)$ 和 $E(p)$，它们与两个特殊构造的数 $x$ 和 $y$ 的浮点加法有关。我们首先根据所给约束构造这两个数，然后利用这个构造来推导所需的量。\n\n**1. 操作数 $x$ 和 $y$ 的构造**\n\n该浮点系统是二进制的（基数 $B=2$），具有一个包含隐含前导位的 $p$ 位尾数。一个规格化数的形式为 $\\pm S \\times 2^e$，其中 $S$ 是尾数， $e$ 是无偏指数。尾数 $S$ 的形式为 $(1.f_1f_2...f_{p-1})_2$，其中 $f_i \\in \\{0, 1\\}$。因此，尾数 $S$ 的值在范围 $[1, 2 - 2^{-(p-1)}]$ 内。尾数值是量化的，其形式为 $1 + k \\cdot 2^{-(p-1)}$，其中整数 $k \\in [0, 2^{p-1}-1]$。\n\n问题规定输入 $x$ 和 $y$ 必须是：\n- 规格化的且可表示的。\n- 符号相反。\n- 共享相同的无偏指数 $e$。\n- 彼此不为相反数，即 $x \\ne -y$。\n- 精确和 $r = x+y$ 必须非零且绝对值尽可能小。\n\n设 $x > 0$ 且 $y  0$。我们可以将它们写为 $x = S_x \\cdot 2^e$ 和 $y = -S_y \\cdot 2^e$，其中 $S_x$ 和 $S_y$ 是它们各自的尾数。$S_x$ 和 $S_y$ 都是可表示的 $p$ 位尾数。精确和为 $r = x+y = (S_x - S_y) \\cdot 2^e$。\n\n为了使 $|r|$ 尽可能小但不为零，我们必须选择 $S_x$ 和 $S_y$，使得它们的差 $|S_x - S_y|$ 最小化且非零。由于尾数的值以 $2^{-(p-1)}$ 为间距，两个不同尾数之间可能的最小非零差值恰好是 $2^{-(p-1)}$。\n\n我们可以构造这样一对数。例如，我们选择：\n- $S_y = 1.00...0_2 = 1$。\n- $S_x = 1.00...01_2 = 1 + 2^{-(p-1)}$。\n对于 $p \\ge 2$，两者都是有效的 $p$ 位尾数。\n\n根据这个选择，我们的操作数是：\n- $x = (1 + 2^{-(p-1)}) \\cdot 2^e$\n- $y = -1 \\cdot 2^e$\n\n这些操作数满足所有给定约束。精确和为：\n$r = x+y = \\left( (1 + 2^{-(p-1)}) - 1 \\right) \\cdot 2^e = 2^{-(p-1)} \\cdot 2^e = 2^{e-(p-1)}$。\n\n**2. 再规格化移位数 $s(p)$ 的推导**\n\n浮点加法单元首先计算尾数之差，因为它们的指数相同。此减法的非规格化结果是 $S_{unnorm} = S_x - S_y = 2^{-(p-1)}$。在二进制中，这表示为 $0.0...01$，在二进制小数点和最后的 $1$ 之间有 $p-2$ 个零。\n\n下一步是规格化。中间结果 $r = S_{unnorm} \\cdot 2^e$ 必须转换为规格化形式 $S_{norm} \\cdot 2^{e_{new}}$，其中 $1 \\le S_{norm}  2$。这通过将非规格化尾数 $S_{unnorm}$ 左移 $s$ 位并同时将指数减少相同量来实现。\n$$ S_{norm} = S_{unnorm} \\cdot 2^s $$\n$$ e_{new} = e - s $$\n\n我们需要找到整数 $s$ 使得 $1 \\le S_{unnorm} \\cdot 2^s  2$。\n代入 $S_{unnorm} = 2^{-(p-1)}$：\n$$ 1 \\le 2^{-(p-1)} \\cdot 2^s  2 $$\n$$ 2^0 \\le 2^{s-(p-1)}  2^1 $$\n这表明指数必须为 $0$：\n$$ s-(p-1) = 0 \\implies s = p-1 $$\n得到的规格化尾数是 $S_{norm} = 2^{-(p-1)} \\cdot 2^{p-1} = 1$，在二进制中即为 $1.00...0_2$。\n\n$x$ 和 $y$ 的构造受最大化抵消的约束驱动，这等效于最大化所需的左移位数 $s$。这通过最小化中间结果的绝对值来实现，我们已经这样做了。任何其他相邻尾数的选择都会导致差的绝对值相同，即 $|S_x - S_y| = 2^{-(p-1)}$，因此移位数也相同。因此，在给定约束下，可能的最大移位数是 $p-1$。\n\n$$ s(p) = p-1 $$\n\n**3. 舍入误差 $E(p)$ 的确定**\n\n舍入误差是计算出的浮点结果 $\\operatorname{fl}(x+y)$ 与精确实数和 $r=x+y$ 之间差值的绝对值。该误差以 $\\operatorname{ulp}(r)$ 为单位进行度量。\n\n精确和为 $r = 2^{e-p+1}$。该和的规格化表示为 $1.0 \\times 2^{e-p+1}$。\n尾数恰好是 $1.0$，指数是 $e-p+1$。这是一个可以精确表示的浮点数，前提是指数在范围内（问题陈述已保证）。\n最终舍入步骤之前的中间结果是 $S_{norm} = 1.0$。这个尾数可以用 $p$ 位完美表示（一个整数位，$p-1$ 个零小数位）。在第 $(p-1)$ 个小数位之后没有需要舍入的非零位。因此，舍入步骤不会改变其值。\n最终计算结果是 $\\operatornamefl(x+y) = 1.0 \\times 2^{e-p+1} = r$。\n\n绝对舍入误差为 $|\\operatorname{fl}(x+y) - r| = |r-r| = 0$。\n\n量 $E(p)$ 是用 $\\operatorname{ulp}(r)$ 单位度量的这个误差。\n首先，我们求 $\\operatorname{ulp}(r)$。$r$ 的指数是 $\\operatorname{expo}(r) = e-p+1$。\n使用给定的定义 $\\operatorname{ulp}(z) = 2^{\\operatorname{expo}(z)-(p-1)}$：\n$$ \\operatorname{ulp}(r) = 2^{(e-p+1) - (p-1)} = 2^{e-2p+2} $$\n由于 $e$ 足够大，$\\operatorname{ulp}(r)$ 是一个明确定义的正值。\n\n以 $\\operatorname{ulp}(r)$ 为单位的误差大小为：\n$$ E(p) = \\frac{|\\operatorname{fl}(x+y) - r|}{\\operatorname{ulp}(r)} = \\frac{0}{\\operatorname{ulp}(r)} = 0 $$\n\n这个结果可以由 Sterbenz's Lemma 证实，该引理指出，如果 $x$ 和 $y$ 是浮点数，满足 $\\frac{1}{2} \\le \\frac{|x|}{|y|} \\le 2$，那么它们的差 $\\operatorname{fl}(|x|-|y|)$ 是精确计算的。在我们的例子中，$x$ 和 $y$ 有相同的指数 $e$。设它们的尾数为 $S_x$ 和 $S_y$。如前所示，$1 \\le S_x, S_y  2$。因此，$\\frac{1}{2}  \\frac{S_x}{S_y}  2$，这意味着 $\\frac{1}{2}  \\frac{|x|}{|y|}  2$。引理的条件得到满足，保证了减法的结果是精确的。舍入误差必然为零。\n\n最终答案由两个推导出的量 $s(p)$ 和 $E(p)$ 组成。\n$$ s(p) = p-1 $$\n$$ E(p) = 0 $$",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\np-1  0\n\\end{pmatrix}\n}\n$$"
        }
    ]
}