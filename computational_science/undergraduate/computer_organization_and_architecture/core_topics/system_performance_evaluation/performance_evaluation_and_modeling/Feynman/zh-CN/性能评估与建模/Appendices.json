{
    "hands_on_practices": [
        {
            "introduction": "计算机性能的提升并非一蹴而就，通常是针对系统中某个特定瓶颈进行优化。阿姆达尔定律（Amdahl's Law）为我们提供了一个严谨的框架，用以计算当系统某一部分得到改进时，整体性能能获得多大的提升。这个实践练习将引导你应用这一定律来分析一个经典的CPU设计问题：通过提高分支预测器的准确性来减少流水线停顿，并量化其对整体执行速度的贡献 。",
            "id": "3664724",
            "problem": "一个流水线中央处理器 (CPU) 执行一个基准测试工作负载，硬件性能监视器或周期精确仿真的周期核算报告显示，基准执行时间的 $f$ 部分归因于分支预测错误引起的停顿。基准分支预测准确率为 $p$，意味着基准预测错误率为 $1-p$。预测器升级将准确率提高到 $p+\\Delta p$，其中 $0  p  1$，$0  \\Delta p \\leq 1-p$ 且 $0  f  1$。假设每次分支预测错误的惩罚是恒定的，条件分支指令的比例保持不变，并且所有其他执行时间来源均不受影响。进一步假设分支引起的停顿时间与预测错误率成线性关系。推导一个关于 $p$、$\\Delta p$ 和 $f$ 的总体加速比 $S$ 的闭式解析表达式。",
            "solution": "在进行求解之前，需要对问题陈述进行验证。\n\n### 第1步：提取已知条件\n- $f$：基准执行时间中由分支预测错误引起的停顿所占的比例。\n- $p$：基准分支预测准确率。\n- $p+\\Delta p$：升级后的分支预测准确率。\n- 约束条件：$0  p  1$，$0  \\Delta p \\leq 1-p$，$0  f  1$。\n- 假设1：每次分支预测错误的惩罚是恒定的。\n- 假设2：条件分支指令的比例保持不变。\n- 假设3：所有其他执行时间来源均不受影响。\n- 假设4：分支引起的停顿时间与预测错误率成线性关系。\n- 目标：推导一个关于 $p$、$\\Delta p$ 和 $f$ 的总体加速比 $S$ 的闭式解析表达式。\n\n### 第2步：使用提取的已知条件进行验证\n该问题具有科学依据，属于计算机体系结构性能分析的标准领域。它使用了诸如执行时间、停顿、分支预测准确率和加速比等明确定义的概念。所提供的假设是创建易于处理的分析模型的典型假设。该问题是适定的，提供了足够的信息和约束来推导出一个唯一的、有意义的解。语言客观而精确。该问题没有违反任何无效性标准。例如，假设4（停顿时间与预测错误率成线性关系）是假设1（每次预测错误的惩罚恒定）和假设2（分支指令比例恒定）的直接结果，因为总停顿时间是分支数量、预测错误率和每次预测错误的惩罚的乘积。由于分支数量和惩罚是恒定的，所以停顿时间与预测错误率成正比。\n\n### 第3步：结论与行动\n问题被判定为**有效**。将推导解答。\n\n设 $T_{base}$ 为工作负载在基准系统上的总执行时间。我们可以将此时间分解为两个部分：因分支预测错误而产生的停顿时间 $T_{stall, base}$，以及用于所有其他活动的时间 $T_{other}$。\n$$T_{base} = T_{stall, base} + T_{other}$$\n根据问题陈述，基准执行时间中由这些停顿引起的部分为 $f$。\n$$T_{stall, base} = f \\cdot T_{base}$$\n因此，所有其他活动的时间为：\n$$T_{other} = T_{base} - T_{stall, base} = T_{base} - f \\cdot T_{base} = (1-f) \\cdot T_{base}$$\n现在，考虑使用升级后分支预测器的系统。设新的总执行时间为 $T_{new}$。问题陈述指出，所有其他执行时间来源均不受影响，这意味着 $T_{other}$ 部分保持不变。新的执行时间是新的停顿时间 $T_{stall, new}$ 和 $T_{other}$ 的总和。\n$$T_{new} = T_{stall, new} + T_{other}$$\n问题陈述指出，分支引起的停顿时间与预测错误率成线性关系。设 $m_{base}$ 为基准预测错误率，$m_{new}$ 为新的预测错误率。\n基准预测准确率为 $p$，所以基准预测错误率为：\n$$m_{base} = 1 - p$$\n升级后的预测准确率为 $p + \\Delta p$，所以新的预测错误率为：\n$$m_{new} = 1 - (p + \\Delta p) = 1 - p - \\Delta p$$\n线性关系意味着停顿时间的比率等于其相应预测错误率的比率：\n$$\\frac{T_{stall, new}}{T_{stall, base}} = \\frac{m_{new}}{m_{base}} = \\frac{1 - p - \\Delta p}{1 - p}$$\n我们可以用基准停顿时间来表示新的停顿时间 $T_{stall, new}$：\n$$T_{stall, new} = T_{stall, base} \\cdot \\left(\\frac{1 - p - \\Delta p}{1 - p}\\right)$$\n代入 $T_{stall, base} = f \\cdot T_{base}$：\n$$T_{stall, new} = (f \\cdot T_{base}) \\cdot \\left(\\frac{1 - p - \\Delta p}{1 - p}\\right)$$\n现在我们可以写出新的总执行时间 $T_{new}$ 的表达式：\n$$T_{new} = T_{stall, new} + T_{other} = (f \\cdot T_{base}) \\left(\\frac{1 - p - \\Delta p}{1 - p}\\right) + (1-f) \\cdot T_{base}$$\n提出因子 $T_{base}$：\n$$T_{new} = T_{base} \\left[ f \\left(\\frac{1 - p - \\Delta p}{1 - p}\\right) + (1-f) \\right]$$\n总体加速比 $S$ 定义为基准执行时间与新执行时间的比率：\n$$S = \\frac{T_{base}}{T_{new}}$$\n代入 $T_{new}$ 的表达式：\n$$S = \\frac{T_{base}}{T_{base} \\left[ f \\left(\\frac{1 - p - \\Delta p}{1 - p}\\right) + (1-f) \\right]} = \\frac{1}{f \\left(\\frac{1 - p - \\Delta p}{1 - p}\\right) + (1-f)}$$\n为了简化此表达式，我们为分母中的各项找到一个公分母：\n$$S = \\frac{1}{\\frac{f(1 - p - \\Delta p) + (1-f)(1 - p)}{1 - p}}$$\n$$S = \\frac{1 - p}{f(1 - p - \\Delta p) + (1-f)(1 - p)}$$\n展开分母中的各项：\n$$f(1 - p - \\Delta p) + (1-f)(1 - p) = (f - fp - f\\Delta p) + (1 - p - f + fp)$$\n项 $f$ 和 $-f$ 相互抵消，$-fp$ 和 $fp$ 也相互抵消：\n$$f - fp - f\\Delta p + 1 - p - f + fp = 1 - p - f\\Delta p$$\n将此简化后的表达式代回 $S$ 的方程中：\n$$S = \\frac{1 - p}{1 - p - f\\Delta p}$$\n这个结果与阿姆达尔定律一致，该定律指出加速比由 $S = \\frac{1}{(1-f_{enh}) + \\frac{f_{enh}}{S_{enh}}}$ 给出。在这里，被优化的时间部分是停顿时间，所以 $f_{enh} = f$。被优化部分（停顿）的加速比为 $S_{enh} = \\frac{T_{stall, base}}{T_{stall, new}} = \\frac{1-p}{1-p-\\Delta p}$。将这些代入阿姆达尔公式，可以得到与上面推导的相同的中间表达式，从而证实了结果。$S$ 的最终表达式已是最简形式。",
            "answer": "$$\n\\boxed{\\frac{1-p}{1-p-f\\Delta p}}\n$$"
        },
        {
            "introduction": "在工程设计中，“越多越好”并非总是真理，性能优化往往需要在多个相互制约的因素之间寻找最佳平衡点。例如，在处理器设计中，增加流水线深度可以提高时钟频率，但同时也会加重分支预测失败等事件造成的性能损失。本练习将指导你构建一个数学模型，通过分析这种权衡关系，来确定能够最大化处理器整体指令吞吐量的最佳流水线深度 。",
            "id": "3664684",
            "problem": "一位处理器设计者正在研究流水线深度 $D$ 对于一个运行分支密集型工作负载的单发射顺序执行核心的执行吞吐率有何影响。针对该工作负载，测量或假设了以下参数：\n\n- 忽略控制冒险的基础每指令周期数 (CPI) 为 $C_{0} = 1.0$。\n- 分支指令的动态比例为 $r_{b} = 0.20$ 分支/指令。\n- 每次分支的预测错误概率为 $p_{m} = 0.10$。\n- 以周期为单位的分支预测错误惩罚与流水线深度成正比，其模型为 $P_{\\mathrm{br}}(D) = \\beta D$，其中 $\\beta = 1.0$ 周期/级。\n- 时钟周期 $T_{\\mathrm{clk}}(D)$ 的建模方式为：将总组合逻辑延迟均匀分配到各个阶段，并加上由锁存器和时钟分配引起的固定的每级开销：$T_{\\mathrm{clk}}(D) = t_{\\mathrm{ov}} + \\frac{t_{\\mathrm{comb}}}{D}$，其中 $t_{\\mathrm{ov}} = 200\\,\\mathrm{ps}$ 且 $t_{\\mathrm{comb}} = 3500\\,\\mathrm{ps}$。\n\n使用以下基本性能模型：\n\n- 每周期指令数 (IPC) 和 CPI 之间的关系为 $IPC(D) = \\frac{1}{CPI(D)}$。\n- 考虑控制冒险的平均 CPI 为 $CPI(D) = C_{0} + r_{b} p_{m} P_{\\mathrm{br}}(D)$。\n- 每秒指令数 (IPS) 为 $IPS(D) = \\frac{IPC(D)}{T_{\\mathrm{clk}}(D)}$。\n\n将 $D$ 视为一个正实数变量。在给定模型下，推导使 $IPS(D)$ 最大化的 $D$ 的参数表达式，并为指定的工作负载参数计算其值。报告最优的实数值流水线深度 $D$（无量纲）。将您的答案四舍五入到三位有效数字。",
            "solution": "用户要求找到最优流水线深度 $D$，该深度能使以每秒指令数 ($IPS$) 衡量的处理器性能最大化。题目提供了一组关于性能指标如何依赖于 $D$ 的模型。\n\n首先，我们必须利用给定的关系构建目标函数 $IPS(D)$。\n平均每指令周期数 $CPI(D)$ 被建模为基础 CPI $C_0$ 和分支预测错误惩罚项之和：\n$$CPI(D) = C_{0} + r_{b} p_{m} P_{\\mathrm{br}}(D)$$\n分支预测错误惩罚 $P_{\\mathrm{br}}(D)$ 与流水线深度 $D$ 成正比：\n$$P_{\\mathrm{br}}(D) = \\beta D$$\n将此代入 $CPI$ 方程可得：\n$$CPI(D) = C_{0} + r_{b} p_{m} \\beta D$$\n每周期指令数 $IPC(D)$ 是 $CPI(D)$ 的倒数：\n$$IPC(D) = \\frac{1}{CPI(D)} = \\frac{1}{C_{0} + r_{b} p_{m} \\beta D}$$\n时钟周期 $T_{\\mathrm{clk}}(D)$ 也是流水线深度的函数：\n$$T_{\\mathrm{clk}}(D) = t_{\\mathrm{ov}} + \\frac{t_{\\mathrm{comb}}}{D}$$\n最后，以每秒指令数衡量的性能 $IPS(D)$ 由 $IPC(D)$ 与时钟周期 $T_{\\mathrm{clk}}(D)$ 的比值给出：\n$$IPS(D) = \\frac{IPC(D)}{T_{\\mathrm{clk}}(D)} = \\frac{\\frac{1}{C_{0} + r_{b} p_{m} \\beta D}}{t_{\\mathrm{ov}} + \\frac{t_{\\mathrm{comb}}}{D}}$$\n这可以写成：\n$$IPS(D) = \\frac{1}{(C_{0} + r_{b} p_{m} \\beta D) (t_{\\mathrm{ov}} + \\frac{t_{\\mathrm{comb}}}{D})}$$\n为了最大化 $IPS(D)$，我们必须最小化其分母，我们将其定义为函数 $f(D)$。题目规定 $D$ 应被视为一个正实数变量。\n$$f(D) = (C_{0} + r_{b} p_{m} \\beta D) \\left(t_{\\mathrm{ov}} + \\frac{t_{\\mathrm{comb}}}{D}\\right)$$\n展开此表达式，我们得到：\n$$f(D) = C_{0}t_{\\mathrm{ov}} + C_{0}\\frac{t_{\\mathrm{comb}}}{D} + (r_{b} p_{m} \\beta D)t_{\\mathrm{ov}} + (r_{b} p_{m} \\beta D)\\frac{t_{\\mathrm{comb}}}{D}$$\n$$f(D) = C_{0}t_{\\mathrm{ov}} + \\frac{C_{0}t_{\\mathrm{comb}}}{D} + r_{b} p_{m} \\beta t_{\\mathrm{ov}} D + r_{b} p_{m} \\beta t_{\\mathrm{comb}}$$\n为了找到使 $f(D)$ 最小化的 $D$ 值，我们对 $f(D)$ 关于 $D$ 求导，并令其为零。首先，我们根据各项对 $D$ 的依赖性重新排列它们：\n$$f(D) = (r_{b} p_{m} \\beta t_{\\mathrm{ov}})D + (C_{0}t_{\\mathrm{comb}})D^{-1} + (C_{0}t_{\\mathrm{ov}} + r_{b} p_{m} \\beta t_{\\mathrm{comb}})$$\n关于 $D$ 的导数是：\n$$\\frac{df}{dD} = r_{b} p_{m} \\beta t_{\\mathrm{ov}} - C_{0}t_{\\mathrm{comb}}D^{-2} = r_{b} p_{m} \\beta t_{\\mathrm{ov}} - \\frac{C_{0}t_{\\mathrm{comb}}}{D^2}$$\n令导数为零以找到临界点：\n$$r_{b} p_{m} \\beta t_{\\mathrm{ov}} - \\frac{C_{0}t_{\\mathrm{comb}}}{D^2} = 0$$\n$$r_{b} p_{m} \\beta t_{\\mathrm{ov}} = \\frac{C_{0}t_{\\mathrm{comb}}}{D^2}$$\n求解 $D^2$：\n$$D^2 = \\frac{C_{0}t_{\\mathrm{comb}}}{r_{b} p_{m} \\beta t_{\\mathrm{ov}}}$$\n由于 $D$ 必须为正，我们取正平方根来找到最优流水线深度 $D_{\\mathrm{opt}}$：\n$$D_{\\mathrm{opt}} = \\sqrt{\\frac{C_{0}t_{\\mathrm{comb}}}{r_{b} p_{m} \\beta t_{\\mathrm{ov}}}}$$\n为确认这是一个最小值点，我们计算二阶导数：\n$$\\frac{d^2f}{dD^2} = \\frac{d}{dD}\\left(r_{b} p_{m} \\beta t_{\\mathrm{ov}} - C_{0}t_{\\mathrm{comb}}D^{-2}\\right) = 2C_{0}t_{\\mathrm{comb}}D^{-3} = \\frac{2C_{0}t_{\\mathrm{comb}}}{D^3}$$\n由于所有参数 $C_{0}$、$t_{\\mathrm{comb}}$ 均为正，且 $D  0$，所以二阶导数为正。这证实了找到的临界点对应于 $f(D)$ 的一个局部最小值，从而对应于 $IPS(D)$ 的一个局部最大值。由于这是 $D  0$ 的唯一临界点，因此它是全局最优解。\n\n现在，我们代入给定的数值：\n$C_{0} = 1.0$ (无量纲)\n$r_{b} = 0.20$ (无量纲)\n$p_{m} = 0.10$ (无量纲)\n$\\beta = 1.0$ (周期/级)\n$t_{\\mathrm{ov}} = 200\\,\\mathrm{ps}$\n$t_{\\mathrm{comb}} = 3500\\,\\mathrm{ps}$\n\n$$D_{\\mathrm{opt}} = \\sqrt{\\frac{(1.0)(3500\\,\\mathrm{ps})}{(0.20)(0.10)(1.0)(200\\,\\mathrm{ps})}}$$\n分子和分母中的皮秒 ($ps$) 单位相互抵消，使得 $D$ 成为一个无量纲量，这符合要求。\n$$D_{\\mathrm{opt}} = \\sqrt{\\frac{3500}{(0.02)(200)}} = \\sqrt{\\frac{3500}{4}}$$\n$$D_{\\mathrm{opt}} = \\sqrt{875}$$\n计算数值：\n$$D_{\\mathrm{opt}} \\approx 29.5803989...$$\n题目要求结果四舍五入到三位有效数字。\n$$D_{\\mathrm{opt}} \\approx 29.6$$",
            "answer": "$$\\boxed{29.6}$$"
        },
        {
            "introduction": "处理器速度再快，也常常受限于内存访问的延迟，因此存储系统的性能至关重要。软件层面的数据组织方式对硬件缓存的效率有着决定性的影响，这一原则是高性能计算的基石。本练习将探讨两种常见的数据布局——结构体数组（Array of Structures, AoS）和数组结构体（Structure of Arrays, SoA）——并让你从第一性原理出发，分析它们在处理流式数据时如何影响缓存未命中率和有效带宽利用率，从而揭示数据局部性的重要性 。",
            "id": "3664714",
            "problem": "您正在评估两种数据布局对于一个在记录数组上运行的流式、向量化循环所产生的内存系统影响。每条记录有四个双精度浮点数类型的字段（每个字段为 $8$ 字节），分别名为 $a$、$b$、$c$ 和 $d$。计算核心执行标量归约 $S = \\sum_{i=0}^{N-1} \\left(\\alpha \\cdot a_i + \\beta \\cdot b_i\\right)$，对于每条记录 $i$，仅访问字段 $a$ 和 $b$，$N$ 足够大以忽略预热效应。该循环被编译为使用单指令多数据（SIMD）向量化，向量长度 $VL = 4$ 个双精度浮点数，但您必须从第一性原理出发对内存行为进行建模，而不是依赖于任何关于指令语义的隐藏假设。\n\n考虑两种数据布局：\n- 结构体数组 (AoS)：记录连续存储为 $[a_0,b_0,c_0,d_0][a_1,b_1,c_1,d_1]\\ldots$，因此每条记录的大小为 $32$ 字节，对齐时 $2$ 条记录可以放入一个 $64$ 字节的缓存行中。\n- 分离数组 (SoA)：四个独立的数组分别存储字段 $a[\\,]$、$b[\\,]$、$c[\\,]$ 和 $d[\\,]$，每个数组在内存中是连续的。\n\n假设以下架构和工作负载属性：\n- 一级（L1）数据缓存行大小为 $64$ 字节。\n- 数组和 AoS 块的起始地址都与 $64$ 字节边界对齐。\n- 工作集很大且是流式的，因此您可以将所有未命中都视为强制性未命中，并忽略容量、冲突和一致性效应。\n- 忽略快表（TLB）效应和指令提取效应；仅对数据内存行为进行建模。\n- 向量化机制可能对 AoS 使用收集（gather）操作，但您应严格根据内存布局和访问模式来计算数据流量和缓存行填充，而不是根据微架构的指令选择。\n- 每次 L1 未命中都会从下一级缓存中获取一整个 $64$ 字节的缓存行。\n\n使用以下基于核心性能建模的定义：\n- 循环请求的标量数据项总数等于读取的 $a$ 和 $b$ 字段值的数量，即 $2N$ 项，每项大小为 $8$ 字节。\n- L1 未命中率在此定义为 L1 数据缓存行填充次数除以循环请求的标量数据项数量（即，每次请求的 $8$ 字节字段值的未命中次数）。\n- 有效带宽利用率定义为计算所需的有效载荷字节数与因这些加载操作而传入 L1 的总字节数之比。\n\n在这些假设下，哪个选项正确地说明了 AoS 和 SoA 布局的稳态 L1 未命中率和有效带宽利用率？\n\nA. AoS：未命中率 $25\\%$，带宽利用率 $50\\%$；SoA：未命中率 $12.5\\%$，带宽利用率 $100\\%$。\n\nB. AoS：未命中率 $12.5\\%$，带宽利用率 $100\\%$；SoA：未命中率 $25\\%$，带宽利用率 $50\\%$。\n\nC. AoS：未命中率 $12.5\\%$，带宽利用率 $100\\%$；SoA：未命中率 $12.5\\%$，带宽利用率 $100\\%$。\n\nD. AoS：未命中率 $25\\%$，带宽利用率 $25\\%$；SoA：未命中率 $12.5\\%$，带宽利用率 $50\\%$。",
            "solution": "我们从空间局部性、缓存行和强制性未命中的核心定义出发进行分析。L1 未命中率是缓存行填充次数除以请求的标量字段值的数量，有效带宽利用率是有效载荷除以因这些填充而带入 L1 的总字节数。\n\n通用事实和参数：\n- 每个请求的字段值为 $8$ 字节。\n- 循环总共请求 $2N$ 个标量字段值（每条记录的 $a_i$ 和 $b_i$，共 $N$ 条记录），即 $16N$ 字节的有效数据。\n- 缓存行大小为 $64$ 字节。\n- 所有数据都是 $64$ 字节对齐的，且 $N$ 很大，因此边界效应可以忽略不计，并且如果布局允许，每个缓存行内的数据最终都会被某个请求所使用。\n\n分离数组 (SoA)：\n- $a[\\,]$ 数组连续存储双精度浮点数。一个 $64$ 字节的缓存行可以容纳 $64/8 = 8$ 个 $a$ 的元素。\n- 同样，$b[\\,]$ 数组每个 $64$ 字节的缓存行可以容纳 $8$ 个元素。\n- 对于 $N$ 个元素，假设完美对齐和流式访问，除了顺序消耗外没有迭代间的重用，为 $a$ 获取的不同缓存行数为 $N/8$，为 $b$ 获取的为 $N/8$。\n- 因此，为请求数据而进行的 L1 缓存行填充总数为 $(N/8) + (N/8) = N/4$。\n- 标量字段请求的总数为 $2N$，因此 L1 未命中率为\n$$\n\\text{miss rate}_{\\text{SoA}} = \\frac{(N/4)}{2N} = \\frac{1}{8} = 12.5\\% \\, .\n$$\n- 由于这些未命中而传输到 L1 的总字节数为 $(N/4)$ 行 $\\times 64$ 字节/行 $= 16N$ 字节。\n- 有效载荷字节数为 $2N \\times 8 = 16N$ 字节（仅使用 $a$ 和 $b$）。\n- 因此，有效带宽利用率为\n$$\n\\text{util}_{\\text{SoA}} = \\frac{16N}{16N} = 1.0 = 100\\% \\, .\n$$\n- 这反映了在使用连续数组和流式访问时，为 $a$ 或 $b$ 获取的每个缓存行都被循环完全消耗。\n\n结构体数组 (AoS)：\n- 每条记录为 $32$ 字节（$4$ 个双精度浮点数）。对齐时，一个 $64$ 字节的缓存行可以容纳 $64/32 = 2$ 条记录。\n- $N$ 条记录的数组足迹为 $32N$ 字节，对应于在流式遍历中接触到的 $(32N)/64 = N/2$ 个不同的缓存行。\n- 为了访问每个 $i$ 的 $a_i$ 和 $b_i$，循环必须获取跨越 AoS 块的缓存行；这些缓存行上的字段 $c$ 和 $d$ 不被计算使用，因此它们的字节不计为有效载荷。\n- 因此，L1 缓存行填充总数为 $N/2$。\n- 标量字段请求的总数为 $2N$，因此 L1 未命中率为\n$$\n\\text{miss rate}_{\\text{AoS}} = \\frac{(N/2)}{2N} = \\frac{1}{4} = 25\\% \\, .\n$$\n- 由于这些未命中而传输到 L1 的总字节数为 $(N/2)$ 行 $\\times 64$ 字节/行 $= 32N$ 字节。\n- 有效载荷字节数仍为 $16N$ 字节（仅使用 $a$ 和 $b$）。\n- 因此，有效带宽利用率为\n$$\n\\text{util}_{\\text{AoS}} = \\frac{16N}{32N} = \\frac{1}{2} = 50\\% \\, .\n$$\n- 这反映了 AoS 布局中因将未使用的字段 $c$ 和 $d$ 与所需字段交错排列而导致的过度提取。\n\n向量化的作用：\n- SIMD 向量长度为 $VL = 4$ 个双精度浮点数。对于 SoA，每次向量加载会接触 $32$ 个连续字节；两个这样的向量可以放入一个 $64$ 字节的缓存行中，从而得出与上述标量推理相同的稳态缓存行数。\n- 对于 AoS，对字段 $a$ 和 $b$ 的向量化访问在连续记录之间表现出 $32$ 字节的步幅。尽管这可能需要收集（gather）操作，但带入 L1 的不同缓存行的总数由 AoS 的空间填充决定，并且仍为 $N/2$，如前所推导。因此，在所述假设下，计算出的未命中率和利用率不受向量化的影响。\n\n逐项分析选项：\n- 选项 A 指出 AoS 未命中率为 $25\\%$，利用率为 $50\\%$；SoA 未命中率为 $12.5\\%$，利用率为 $100\\%$。这与上面的推导相符。结论：正确。\n- 选项 B 交换了 AoS 和 SoA 的结果，与空间局部性分析相矛盾。结论：错误。\n- 选项 C 声称两种布局都达到了 $12.5\\%$ 的未命中率和 $100\\%$ 的利用率，这忽略了在 AoS 中为未使用字段提取的浪费字节以及所需的更多缓存行。结论：错误。\n- 选项 D 给出 AoS 未命中率为 $25\\%$（这相符），但声称 AoS 利用率为 $25\\%$，SoA 利用率为 $50\\%$，这两者都与上面的字节核算不一致。结论：错误。\n\n因此，正确选项是 A。",
            "answer": "$$\\boxed{A}$$"
        }
    ]
}