{
    "hands_on_practices": [
        {
            "introduction": "在处理约束优化问题时，我们不能随意朝着任何能使目标函数下降的方向移动，因为我们必须始终保持在可行域内。对于等式约束，这意味着我们的移动方向必须与约束曲面“相切”。这个练习  提供了一个基础的计算实践：首先，确定在可行点上的切空间，即所有局部可行移动方向的集合；然后，从这个空间中找出一个能够有效降低目标函数值的下降方向。",
            "id": "3128723",
            "problem": "考虑一个等式约束优化问题，其目标函数为 $f(x) = x_{1}$，约束条件为 $h(x) = x_{1}^{2} + x_{2}^{2} - x_{1} = 0$。可行集是由 $h(x) = 0$ 定义的曲线，该曲线是非凸的。设 $x^{(0)} = \\left(\\frac{1}{2}, \\frac{1}{2}\\right)$，该点满足约束条件。\n\n利用 $h$ 的可微性以及等式约束的一阶可行性条件（即，与约束流形相切的方向必须满足线性化约束），计算点 $x^{(0)}$ 处的切空间，然后找出 $f$ 在 $x^{(0)}$ 处的一个可行下降方向，该方向使 $f$ 一阶严格下降。\n\n将你的最终答案以一个包含四个元素的行矩阵 $\\left(t_{1}, t_{2}, d_{1}, d_{2}\\right)$ 的形式返回，其中 $(t_{1}, t_{2})$ 是 $x^{(0)}$ 处的一个基切向量的分量，$(d_{1}, d_{2})$ 是 $f$ 在 $x^{(0)}$ 处的一个可行下降方向的分量。请提供精确值，不要进行四舍五入。",
            "solution": "### 步骤 1：计算约束函数的梯度\n\n首先，我们计算等式约束函数 $h(x) = x_{1}^{2} + x_{2}^{2} - x_{1}$ 的梯度：\n$$\n\\nabla h(x) = \\begin{pmatrix} \\frac{\\partial h}{\\partial x_1} \\\\ \\frac{\\partial h}{\\partial x_2} \\end{pmatrix} = \\begin{pmatrix} 2x_1 - 1 \\\\ 2x_2 \\end{pmatrix}\n$$\n在点 $x^{(0)} = \\left(\\frac{1}{2}, \\frac{1}{2}\\right)$ 处，该梯度为：\n$$\n\\nabla h(x^{(0)}) = \\begin{pmatrix} 2\\left(\\frac{1}{2}\\right) - 1 \\\\ 2\\left(\\frac{1}{2}\\right) \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}\n$$\n\n### 步骤 2：确定切空间\n\n在点 $x^{(0)}$ 处的切空间由所有与约束梯度 $\\nabla h(x^{(0)})$ 正交的方向 $d = (d_1, d_2)$ 组成。这意味着方向 $d$ 必须满足一阶可行性条件：\n$$\n\\nabla h(x^{(0)})^T d = 0\n$$\n代入梯度值，我们得到：\n$$\n\\begin{pmatrix} 0  1 \\end{pmatrix} \\begin{pmatrix} d_1 \\\\ d_2 \\end{pmatrix} = 0 \\cdot d_1 + 1 \\cdot d_2 = d_2 = 0\n$$\n因此，切空间是所有形如 $(d_1, 0)$ 的向量的集合，其中 $d_1 \\in \\mathbb{R}$。这个一维空间的一个基向量可以选择为 $t = (1, 0)$。\n\n### 步骤 3：计算目标函数的梯度\n\n接下来，我们计算目标函数 $f(x) = x_1$ 的梯度：\n$$\n\\nabla f(x) = \\begin{pmatrix} \\frac{\\partial f}{\\partial x_1} \\\\ \\frac{\\partial f}{\\partial x_2} \\end{pmatrix} = \\begin{pmatrix} 1 \\\\ 0 \\end{pmatrix}\n$$\n这个梯度是常数，因此在点 $x^{(0)}$ 处也是 $\\nabla f(x^{(0)}) = (1, 0)^T$。\n\n### 步骤 4：寻找一个可行下降方向\n\n一个方向 $d$ 是可行下降方向，如果它既是可行方向（即在切空间内），又是一个下降方向。\n1.  **可行性**：$d$ 必须在切空间内，即 $d = (d_1, 0)$。\n2.  **下降条件**：$d$ 必须满足 $\\nabla f(x^{(0)})^T d  0$。\n\n我们将这两个条件结合起来：\n$$\n\\nabla f(x^{(0)})^T d = \\begin{pmatrix} 1  0 \\end{pmatrix} \\begin{pmatrix} d_1 \\\\ 0 \\end{pmatrix} = 1 \\cdot d_1 + 0 \\cdot 0 = d_1  0\n$$\n因此，任何形如 $(d_1, 0)$ 且 $d_1  0$ 的向量都是一个可行下降方向。一个简单的选择是令 $d_1 = -1$，得到方向 $d = (-1, 0)$。\n\n### 步骤 5：格式化最终答案\n\n根据题目要求，我们需要返回一个行矩阵 $(t_1, t_2, d_1, d_2)$，其中 $(t_1, t_2)$ 是一个基切向量，$(d_1, d_2)$ 是一个可行下降方向。\n-   基切向量：$t = (1, 0)$\n-   可行下降方向：$d = (-1, 0)$\n\n所以，最终答案是 $(1, 0, -1, 0)$。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 1  0  -1  0 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "当问题包含不等式约束时，在边界点上的所有可行方向构成一个“锥体”，即所谓的“可行方向锥”。如果最直接的下降方向（即负梯度方向 $-\\nabla f(x)$）指向了可行域之外，我们应该如何选择最佳的前进方向呢？这个练习  探讨了这种情况，并引入了一种强大的技术来寻找“最速可行下降方向”。这通常涉及到求解一个局部优化问题，即找到负梯度在可行锥上的投影。",
            "id": "3128694",
            "problem": "考虑 $\\mathbb{R}^{2}$ 中的约束优化问题：最小化 $f(x)$，约束条件为 $g_{i}(x) \\le 0$，其中 $i \\in \\{1,2,3\\}$，\n- $f(x) = x_{1} + x_{2}$，\n- $g_{1}(x) = x_{1} + x_{2} - 2 \\le 0$，\n- $g_{2}(x) = -x_{1} \\le 0$，\n- $g_{3}(x) = -x_{2} \\le 0$。\n\n设边界点为 $x^{\\ast} = (0,2)$。从约束优化的核心定义出发：\n- 如果对于在 $x^{\\ast}$ 处激活的每个约束，一阶变化满足 $\\nabla g_{i}(x^{\\ast})^{\\mathsf{T}} d \\le 0$，则方向 $d$ 是在 $x^{\\ast}$ 处的可行方向。\n- 如果 $\\nabla f(x^{\\ast})^{\\mathsf{T}} d  0$，则方向 $d$ 是 $f$ 在 $x^{\\ast}$ 处的下降方向。\n\n任务：\n- 确定在 $x^{\\ast}$ 处的激活约束集，并使用它们的梯度构建在 $x^{\\ast}$ 处的可行方向锥 $\\mathcal{C}(x^{\\ast})$。\n- 检验 $-\\nabla f(x^{\\ast})$ 是否位于 $\\mathcal{C}(x^{\\ast})$ 中。\n- 如果 $-\\nabla f(x^{\\ast}) \\notin \\mathcal{C}(x^{\\ast})$，通过求解以下小型二次规划（QP, Quadratic Program）问题来确定最陡可行下降方向：最小化 $\\nabla f(x^{\\ast})^{\\mathsf{T}} d$，约束条件为 $d \\in \\mathcal{C}(x^{\\ast})$ 且 $\\|d\\|_{2} \\le 1$。\n\n报告最优单位方向 $d^{\\ast}$ 从正 $x_{1}$ 轴测量的唯一角度 $\\theta$（以弧度为单位），取值 $\\theta \\in [-\\pi, \\pi)$。将您的最终答案表示为以弧度为单位的精确实数。无需四舍五入。最终的方框答案中不应出现单位。",
            "solution": "用户想要解决一个约束优化问题。\n\n这是我的计划：\n1.  **验证问题陈述。**\n    *   逐字提取所有给定信息。\n    *   检查科学合理性、自洽性和清晰度。该问题是一个标准的优化问题，因此应该是有效的。\n2.  **如果问题有效，则解决它。**\n    *   **第 1 步：确定激活约束。**\n        *   我有这个点 $x^{\\ast} = (0, 2)$。\n        *   我需要检查哪些约束 $g_i(x) \\le 0$ 是以等式形式满足的，即 $g_i(x^{\\ast}) = 0$。\n        *   $g_1(x) = x_1 + x_2 - 2$。在 $x^{\\ast}=(0,2)$ 处，$g_1(x^{\\ast}) = 0 + 2 - 2 = 0$。所以，$g_1$ 是激活的。\n        *   $g_2(x) = -x_1$。在 $x^{\\ast}=(0,2)$ 处，$g_2(x^{\\ast}) = -0 = 0$。所以，$g_2$ 是激活的。\n        *   $g_3(x) = -x_2$。在 $x^{\\ast}=(0,2)$ 处，$g_3(x^{\\ast}) = -2  0$。所以，$g_3$ 未激活。\n        *   在 $x^{\\ast}$ 处的激活约束集是 $I(x^{\\ast}) = \\{1, 2\\}$。\n\n    *   **第 2 步：构建可行方向锥。**\n        *   问题将在 $x^{\\ast}$ 处的可行方向 $d$ 定义为对于所有激活约束 $i \\in I(x^{\\ast})$，都有 $\\nabla g_i(x^{\\ast})^{\\mathsf{T}} d \\le 0$ 的方向。\n        *   我需要激活约束的梯度。\n        *   $f(x) = x_1 + x_2 \\implies \\nabla f(x) = (1, 1)^{\\mathsf{T}}$。所以，$\\nabla f(x^{\\ast}) = (1, 1)^{\\mathsf{T}}$。\n        *   $g_1(x) = x_1 + x_2 - 2 \\implies \\nabla g_1(x) = (1, 1)^{\\mathsf{T}}$。所以，$\\nabla g_1(x^{\\ast}) = (1, 1)^{\\mathsf{T}}$。\n        *   $g_2(x) = -x_1 \\implies \\nabla g_2(x) = (-1, 0)^{\\mathsf{T}}$。所以，$\\nabla g_2(x^{\\ast}) = (-1, 0)^{\\mathsf{T}}$。\n        *   设 $d = (d_1, d_2)^{\\mathsf{T}}$。$d$ 位于可行方向锥 $\\mathcal{C}(x^{\\ast})$ 中的条件是：\n            *   $\\nabla g_1(x^{\\ast})^{\\mathsf{T}} d \\le 0 \\implies (1, 1) \\cdot (d_1, d_2) \\le 0 \\implies d_1 + d_2 \\le 0$。\n            *   $\\nabla g_2(x^{\\ast})^{\\mathsf{T}} d \\le 0 \\implies (-1, 0) \\cdot (d_1, d_2) \\le 0 \\implies -d_1 \\le 0 \\implies d_1 \\ge 0$。\n        *   所以，$\\mathcal{C}(x^{\\ast}) = \\{ d \\in \\mathbb{R}^2 \\mid d_1 + d_2 \\le 0 \\text{ 且 } d_1 \\ge 0 \\}$。\n\n    *   **第 3 步：检验 $-\\nabla f(x^{\\ast})$ 是否在 $\\mathcal{C}(x^{\\ast})$ 中。**\n        *   我们有 $\\nabla f(x^{\\ast}) = (1, 1)^{\\mathsf{T}}$。\n        *   令 $d_{SD} = -\\nabla f(x^{\\ast}) = (-1, -1)^{\\mathsf{T}}$。\n        *   检查 $d_{SD}$ 是否满足 $\\mathcal{C}(x^{\\ast})$ 的条件。\n            *   条件 1：$d_1 \\ge 0$。这里，$d_1 = -1$。这不满足。所以，$-1 \\ge 0$ 是假的。\n        *   因此，$-\\nabla f(x^{\\ast}) \\notin \\mathcal{C}(x^{\\ast})$。\n\n    *   **第 4 步：找到最陡可行下降方向。**\n        *   问题要求解这个 QP 问题：\n            *   最小化 $\\nabla f(x^{\\ast})^{\\mathsf{T}} d$\n            *   约束条件为 $d \\in \\mathcal{C}(x^{\\ast})$ 且 $\\|d\\|_2 \\le 1$。\n        *   代入已知值：\n            *   最小化 $(1, 1)^{\\mathsf{T}} (d_1, d_2)^{\\mathsf{T}} = d_1 + d_2$\n            *   约束条件：\n                1.  $d_1 + d_2 \\le 0$\n                2.  $d_1 \\ge 0$\n                3.  $d_1^2 + d_2^2 \\le 1$\n        *   我们希望使和 $d_1 + d_2$ 尽可能小（即，尽可能为负）。\n        *   根据条件 (1)，$d_1 + d_2$ 必须为非正数。\n        *   根据条件 (2)，$d_1$ 必须为非负数。\n        *   根据条件 (1)，$d_2 \\le -d_1$。因为 $d_1 \\ge 0$，这意味着 $d_2$ 必须为负数或零。\n        *   该方向的可行集是锥 $\\mathcal{C}(x^{\\ast})$ 与以原点为中心的单位圆盘的交集。\n        *   锥 $\\mathcal{C}(x^{\\ast})$ 是 $d_1 \\ge 0$ 且 $d_2 \\le -d_1$ 的区域。这是第四象限中负 $d_2$ 轴与直线 $d_1 + d_2 = 0$ 之间的楔形区域。边界射线沿着 $(0, -1)$ 和 $(1, -1)$。\n        *   向量 $(1, -1)$ 归一化后是 $\\frac{1}{\\sqrt{2}}(1, -1)$。我们称之为 $v_1$。角度是 $-\\pi/4$。\n        *   向量 $(0, -1)$ 是一个单位向量。我们称之为 $v_2$。角度是 $-\\pi/2$。\n        *   单位方向的可行集是单位圆上角度在 $-\\pi/2$ 和 $-\\pi/4$ 之间的圆弧。\n        *   我们需要在这个圆弧上找到单位圆上的点 $(d_1, d_2)$，以最小化函数 $F(d_1, d_2) = d_1 + d_2$。\n        *   令 $d_1 = \\cos\\phi$ 和 $d_2 = \\sin\\phi$。约束条件是 $d_1^2 + d_2^2 = 1$。\n        *   角度 $\\phi$ 的可行范围是 $[-\\pi/2, -\\pi/4]$。\n        *   我们需要最小化 $F(\\phi) = \\cos\\phi + \\sin\\phi$。\n        *   我们来检查导数：$F'(\\phi) = -\\sin\\phi + \\cos\\phi$。\n        *   我们设 $F'(\\phi) = 0 \\implies \\cos\\phi = \\sin\\phi \\implies \\tan\\phi = 1$。解是 $\\phi = \\pi/4 + k\\pi$。\n        *   解 $\\phi = \\pi/4$ 在我们的可行区间 $[-\\pi/2, -\\pi/4]$ 之外。下一个最接近的解是 $\\phi = -3\\pi/4$，也在区间之外。\n        *   由于导数在区间内部非零，最小值必须在端点之一处取得。\n        *   我们在端点 $\\phi = -\\pi/2$ 和 $\\phi = -\\pi/4$ 处计算 $F(\\phi)$ 的值。\n        *   在 $\\phi = -\\pi/2$ 处：$d = (0, -1)$。$F = 0 + (-1) = -1$。\n        *   在 $\\phi = -\\pi/4$ 处：$d = (\\frac{1}{\\sqrt{2}}, -\\frac{1}{\\sqrt{2}})$。$F = \\frac{1}{\\sqrt{2}} - \\frac{1}{\\sqrt{2}} = 0$。\n        *   最小值为 $-1$，在 $\\phi = -\\pi/2$ 时取得。\n        *   所以最优方向是 $d^{\\ast} = (0,-1)$。\n        *   我们来复查一下。问题是找到最小化 $\\nabla f^{\\mathsf{T}} d$ 的方向 $d$。这等价于在可行集中找到与 $\\nabla f$ 形成最大钝角的方向 $d$。\n        *   $\\nabla f = (1,1)$。$\\nabla f$ 的角度是 $\\pi/4$。\n        *   可行方向位于 $-\\pi/2$ 和 $-\\pi/4$ 之间的扇形区域内。\n        *   我们想最小化 $\\nabla f^{\\mathsf{T}} d = \\|\\nabla f\\| \\|d\\| \\cos(\\alpha)$，其中 $\\alpha$ 是 $\\nabla f$ 和 $d$ 之间的夹角。\n        *   当 $\\|d\\|=1$ 时，我们想最小化 $\\sqrt{2} \\cos(\\alpha)$。这等价于最大化夹角 $\\alpha$。\n        *   $\\nabla f$ 的角度是 $\\pi/4$。可行方向 $d$ 的角度在 $[-\\pi/2, -\\pi/4]$ 内。\n        *   设 $\\theta_d$ 是 $d$ 的角度。它们之间的夹角是 $\\alpha = |\\theta_d - \\pi/4|$。\n        *   如果 $\\theta_d = -\\pi/4$，$\\alpha = |-\\pi/4 - \\pi/4| = |-\\pi/2| = \\pi/2$。$\\cos(\\pi/2)=0$。\n        *   如果 $\\theta_d = -\\pi/2$，$\\alpha = |-\\pi/2 - \\pi/4| = |-3\\pi/4| = 3\\pi/4$。$\\cos(3\\pi/4) = -1/\\sqrt{2}$。\n        *   目标函数的值是 $\\sqrt{2} \\cos(\\alpha)$。\n        *   在 $\\theta_d = -\\pi/4$ 处，目标值为 $\\sqrt{2}\\cos(\\pi/2) = 0$。\n        *   在 $\\theta_d = -\\pi/2$ 处，目标值为 $\\sqrt{2}\\cos(3\\pi/4) = \\sqrt{2}(-1/\\sqrt{2}) = -1$。\n        *   这证实了当方向 $d$ 的角度为 $-\\pi/2$ 时达到最小值。\n        *   问题要求最优单位方向 $d^{\\ast}$ 的唯一角度 $\\theta$。\n        *   最优方向是 $d^{\\ast} = (0, -1)$。这个向量从正 $x_1$ 轴测量的角度确实是 $-\\pi/2$。$\\theta$ 的给定范围是 $[-\\pi, \\pi)$，而 $-\\pi/2$ 在此范围内。\n\n    *   **另一种解释**：寻找最陡下降方向的问题通常被定义为寻找 $-\\nabla f$ 在可行方向锥上的投影。\n        *   我们来解在 $d \\in \\mathcal{C}(x^{\\ast})$ 约束下的 min $\\|d - (-\\nabla f)\\|^2$。\n        *   最小化 $\\|(d_1, d_2) - (-1, -1)\\|^2 = \\|(d_1+1, d_2+1)\\|^2 = (d_1+1)^2 + (d_2+1)^2$。\n        *   约束条件为 $d_1 \\ge 0$ 且 $d_1+d_2 \\le 0$。\n        *   我们来找无约束最小值：$d_1 = -1, d_2 = -1$。这个点是 $( -1, -1)$，也就是 $-\\nabla f$。\n        *   这个点违反了 $d_1 \\ge 0$。所以最小值必须在可行域的边界上。\n        *   可行域是锥 $d_1 \\ge 0, d_2 \\le -d_1$。\n        *   边界是 $d_1=0, d_2 \\le 0$（负 $d_2$ 轴）和 $d_1+d_2=0, d_1 \\ge 0$（第四象限的直线）。\n        *   我们将 $( -1, -1)$ 投影到直线 $d_1=0$ 上。投影是 $(0, -1)$。这个点在可行域内（$d_1=0 \\ge 0$，$d_1+d_2=0-1=-1 \\le 0$）。距离的平方是 $(0+1)^2 + (-1+1)^2 = 1$。\n        *   我们将 $( -1, -1)$ 投影到直线 $d_1+d_2=0$ 上。一个点 $q$ 到一个平面 $n^{\\mathsf{T}}x-c=0$ 上的投影 $p$ 是 $p = q - \\frac{n^{\\mathsf{T}}q - c}{n^{\\mathsf{T}}n}n$。这里，$q=(-1,-1)$，$n=(1,1)$，$c=0$。\n        *   $p = (-1,-1) - \\frac{(1,1)^{\\mathsf{T}}(-1,-1) - 0}{(1,1)^{\\mathsf{T}}(1,1)}(1,1) = (-1,-1) - \\frac{-2}{2}(1,1) = (-1,-1) - (-1)(1,1) = (-1,-1) + (1,1) = (0,0)$。\n        *   点 $(0,0)$ 在可行域内。距离的平方是 $(0+1)^2+(0+1)^2 = 2$。\n        *   锥中距离 $( -1, -1)$ 最近的点是 $(0, -1)$。\n        *   所以 $-\\nabla f$ 在 $\\mathcal{C}(x^{\\ast})$ 上的投影是向量 $(0, -1)$。\n        *   最陡下降方向 $d^{\\ast}$ 是这个投影的归一化版本。我们称这个投影为 $p^{\\ast}$。\n        *   $p^{\\ast} = (0,-1)$。它已经是一个单位向量。所以 $d^{\\ast} = (0, -1)$。\n        *   这证实了我之前的结果。\n\n    *   我们再仔细阅读一遍问题陈述，以确保我遵循了给定的定义。\n        *   “...通过求解以下小型二次规划（QP, Quadratic Program）问题来确定最陡可行下降方向：最小化 $\\nabla f(x^{\\ast})^{\\mathsf{T}} d$，约束条件为 $d \\in \\mathcal{C}(x^{\\ast})$ 且 $\\|d\\|_{2} \\le 1$。”\n        *   我的公式：\n            *   最小化 $d_1 + d_2$\n            *   约束条件：\n                1.  $d_1 + d_2 \\le 0$\n                2.  $d_1 \\ge 0$\n                3.  $d_1^2 + d_2^2 \\le 1$\n        *   根据问题，这个公式是正确的。最小值必须在可行集的极点上的分析也是合理的。线性函数在紧凸集上的最小值是在集合的边界上实现的。\n        *   可行集 $\\mathcal{F} = \\{ d \\in \\mathbb{R}^2 \\mid d_1+d_2 \\le 0,\\ d_1\\ge 0,\\ d_1^2+d_2^2 \\le 1 \\}$。\n        *   这是单位圆盘的一个扇形区域。边界由三部分组成：\n            1.  从 $(0,0)$ 到 $(0,-1)$ 的线段。在这段上，$d_1=0$，$-1 \\le d_2 \\le 0$。目标函数是 $d_1+d_2 = d_2$。最小值在 $d_2=-1$ 处取得，所以 $d=(0, -1)$。值为 $-1$。\n            2.  从 $(0,0)$ 到 $(1/\\sqrt{2}, -1/\\sqrt{2})$ 的线段。在这段上，$d_1+d_2=0$。目标函数是 $d_1+d_2=0$。\n            3.  从 $(0,-1)$ 到 $(1/\\sqrt{2}, -1/\\sqrt{2})$ 的圆弧。在这段圆弧上，$d_1^2+d_2^2=1$，$d = (\\cos\\phi, \\sin\\phi)$，其中 $\\phi \\in [-\\pi/2, -\\pi/4]$。目标函数是 $\\cos\\phi+\\sin\\phi$。如前所述，导数是 $\\cos\\phi-\\sin\\phi$，在 $[-\\pi/2, -\\pi/4)$ 上为正。例如，在 $\\phi = -\\pi/3$ 处，$\\cos(-\\pi/3) - \\sin(-\\pi/3) = 1/2 - (-\\sqrt{3}/2) = (1+\\sqrt{3})/2 > 0$。所以函数在该区间上是严格递增的。最小值在左端点 $\\phi=-\\pi/2$ 处取得。最小值为 $\\cos(-\\pi/2) + \\sin(-\\pi/2) = 0 - 1 = -1$。最大值在右端点 $\\phi=-\\pi/4$ 处取得。最大值为 $\\cos(-\\pi/4)+\\sin(-\\pi/4) = 1/\\sqrt{2} - 1/\\sqrt{2} = 0$。\n        *   比较所有边界部分的最小值：\n            *   在线段 1 上：最小值为 -1，在 $d=(0,-1)$ 处取得。\n            *   在线段 2 上：最小值在整个线段上都为 0。\n            *   在圆弧 3 上：最小值为 -1，在 $d=(0,-1)$ 处取得。\n        *   在可行集 $\\mathcal{F}$ 上的全局最小值是 $-1$，并且它唯一地在 $d^{\\ast} = (0,-1)$ 处实现。\n        *   问题要求这个方向的唯一角度 $\\theta$。\n        *   向量 $d^{\\ast} = (0, -1)$ 对应于从正 $x_1$ 轴测量的 $-\\pi/2$ 弧度的角度。\n\n3.  **最终验证和格式化。**\n    *   问题是适定的，并有唯一解。\n    *   步骤是合乎逻辑的，并基于所提供的定义。\n    *   计算是直接的。\n    *   最终答案是一个精确的实数，符合要求。\n    *   角度在指定的范围 $[-\\pi, \\pi)$ 内。\n    *   我必须使用 LaTeX 编写整个解决方案中的所有数学实体。",
            "answer": "$$\n\\boxed{-\\frac{\\pi}{2}}\n$$"
        },
        {
            "introduction": "理论概念最终要应用于实际算法中。仅仅找到一个可行的下降方向是不够的，我们还需要确定沿着这个方向走多远。这个练习  揭示了优化算法中一个常见的陷阱——在没有实际改进的情况下循环振荡。它通过一个具体的例子展示了如何通过将一个精确选择的可行下降方向与保证充分下降的步长选择规则（Armijo 条件）相结合，来确保算法的每一步都能取得实质性进展。",
            "id": "3128719",
            "problem": "考虑一个约束优化问题，即在闭凸多面体 $$\\mathcal{C} = \\{x \\in \\mathbb{R}^{2} \\,:\\, x_{1} \\geq 0,\\; x_{2} \\geq 0,\\; x_{1} + x_{2} \\leq 1\\}$$ 上最小化光滑函数 $$f(x) = \\tfrac{1}{2}\\,(x_{1} - x_{2})^{2}$$。其梯度为 $$\\nabla f(x) = Qx$$，其中 $$Q = \\begin{pmatrix} 1  -1 \\\\ -1  1 \\end{pmatrix}$$。定义步长固定为 $$\\alpha = 1$$ 的朴素投影梯度迭代法为 $$x^{+} = \\Pi_{\\mathcal{C}}\\big(x - \\alpha \\nabla f(x)\\big)$$，其中 $$\\Pi_{\\mathcal{C}}(\\cdot)$$ 表示到 $$\\mathcal{C}$$ 上的欧几里得投影。从顶点 $$x^{(0)} = (1,0)^{\\top}$$ 开始。仅使用可行方向、切锥和 Armijo 回溯条件的基本定义，完成以下任务：\n\n1. 证明朴素投影梯度迭代在顶点 $$x^{(0)} = (1,0)^{\\top}$$ 和 $$x^{(1)} = (0,1)^{\\top}$$ 之间循环，而 $$f$$ 值不减小。\n\n2. 在 $$x^{(0)}$$ 处沿一个可行下降方向，引入带可行性的 Armijo 回溯准则。使用充分下降参数 $$\\sigma = \\tfrac{1}{4}$$，回溯因子 $$\\beta = \\tfrac{1}{2}$$，以及初始试验步长 $$\\alpha_{0} = 1$$。选择可行下降方向 $$d^{(0)}$$ 为负梯度在 $$\\mathcal{C}$$ 于 $$x^{(0)}$$ 处的切锥上的投影（确保一阶可行性）。确定序列 $$\\{\\alpha_{0},\\, \\beta \\alpha_{0},\\, \\beta^{2} \\alpha_{0},\\, \\ldots\\}$$ 中满足在 $$x^{(0)}$$ 处的 Armijo 不等式的最大回溯步长，然后计算该被接受的步长所对应的 Armijo 条件所规定的目标函数值的保证下降量 $$\\Delta$$，即 $$\\Delta = \\sigma\\,\\alpha\\,\\|\\nabla f(x^{(0)})\\|^{2}$$。\n\n你的最终答案必须是等于 $$\\Delta$$ 的单个实数。无需四舍五入。",
            "solution": "用户提出了一个约束优化问题，并要求对两种不同的算法方法进行分析。\n\n### 问题验证\n首先根据所需标准对问题进行验证。\n\n**第一步：提取已知条件**\n- 目标函数：$f(x) = \\frac{1}{2}(x_{1} - x_{2})^{2}$\n- 约束集：$\\mathcal{C} = \\{x \\in \\mathbb{R}^{2} \\,:\\, x_{1} \\geq 0,\\; x_{2} \\geq 0,\\; x_{1} + x_{2} \\leq 1\\}$\n- 梯度：$\\nabla f(x) = Qx$，其中 $Q = \\begin{pmatrix} 1  -1 \\\\ -1  1 \\end{pmatrix}$\n- 朴素投影梯度迭代：$x^{+} = \\Pi_{\\mathcal{C}}(x - \\alpha \\nabla f(x))$，固定步长 $\\alpha = 1$\n- 初始点：$x^{(0)} = (1,0)^{\\top}$\n- Armijo 回溯参数：$\\sigma = \\frac{1}{4}$，$\\beta = \\frac{1}{2}$，初始试验步长 $\\alpha_{0} = 1$\n- 可行下降方向：$d^{(0)} = \\Pi_{T_{\\mathcal{C}}(x^{(0)})}(-\\nabla f(x^{(0)}))$\n- 待计算的量：对于被接受的步长 $\\alpha$，计算 $\\Delta = \\sigma\\,\\alpha\\,\\|\\nabla f(x^{(0)})\\|^{2}$。\n\n**第二步：使用提取的已知条件进行验证**\n该问题具有科学依据，是适定的、客观的。这是数值优化领域的一个标准练习，具体涉及用于约束凸优化的投影梯度法。所有术语都是标准的且定义明确。数据一致且完整。未发现任何缺陷。\n\n**第三步：结论与行动**\n问题有效。将提供完整解答。\n\n### 解\n\n根据要求，解答分为两部分呈现。\n\n**第一部分：朴素投影梯度迭代法分析**\n\n我们从点 $x^{(0)} = \\begin{pmatrix} 1 \\\\ 0 \\end{pmatrix}$ 开始。\n该点的目标函数值为 $f(x^{(0)}) = \\frac{1}{2}(1 - 0)^2 = \\frac{1}{2}$。\n$x^{(0)}$ 处 $f$ 的梯度是 $\\nabla f(x^{(0)}) = \\begin{pmatrix} 1 - 0 \\\\ 0 - 1 \\end{pmatrix} = \\begin{pmatrix} 1 \\\\ -1 \\end{pmatrix}$。\n步长为 $\\alpha = 1$ 的朴素投影梯度迭代由 $x^{+} = \\Pi_{\\mathcal{C}}(x - \\nabla f(x))$ 给出。\n对于第一次迭代，我们计算无约束步：\n$$y^{(0)} = x^{(0)} - \\alpha \\nabla f(x^{(0)}) = \\begin{pmatrix} 1 \\\\ 0 \\end{pmatrix} - 1 \\cdot \\begin{pmatrix} 1 \\\\ -1 \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}.$$\n下一个迭代点 $x^{(1)}$ 是 $y^{(0)}$ 在可行集 $\\mathcal{C}$ 上的投影。\n点 $y^{(0)} = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}$ 满足 $\\mathcal{C}$ 的约束条件：$x_{1} = 0 \\geq 0$，$x_{2} = 1 \\geq 0$，以及 $x_{1} + x_{2} = 0+1=1 \\leq 1$。\n由于 $y^{(0)}$ 在 $\\mathcal{C}$ 中，其在 $\\mathcal{C}$ 上的投影就是该点本身。\n$$x^{(1)} = \\Pi_{\\mathcal{C}}(y^{(0)}) = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}.$$\n新迭代点的目标函数值为 $f(x^{(1)}) = \\frac{1}{2}(0 - 1)^2 = \\frac{1}{2}$。\n我们观察到 $f(x^{(1)}) = f(x^{(0)})$，因此目标函数值没有减小。\n\n现在我们从 $x^{(1)} = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}$ 开始执行第二次迭代。\n$x^{(1)}$ 处的梯度是 $\\nabla f(x^{(1)}) = \\begin{pmatrix} 0 - 1 \\\\ 1 - 0 \\end{pmatrix} = \\begin{pmatrix} -1 \\\\ 1 \\end{pmatrix}$。\n无约束步为：\n$$y^{(1)} = x^{(1)} - \\alpha \\nabla f(x^{(1)}) = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix} - 1 \\cdot \\begin{pmatrix} -1 \\\\ 1 \\end{pmatrix} = \\begin{pmatrix} 1 \\\\ 0 \\end{pmatrix}.$$\n下一个迭代点 $x^{(2)}$ 是 $y^{(1)}$ 在 $\\mathcal{C}$ 上的投影。\n点 $y^{(1)} = \\begin{pmatrix} 1 \\\\ 0 \\end{pmatrix}$ 是起始点 $x^{(0)}$，它也在 $\\mathcal{C}$ 中。\n$$x^{(2)} = \\Pi_{\\mathcal{C}}(y^{(1)}) = \\begin{pmatrix} 1 \\\\ 0 \\end{pmatrix} = x^{(0)}.$$\n迭代返回到起始点。因此，迭代序列为 $x^{(0)}, x^{(1)}, x^{(0)}, x^{(1)}, \\ldots$，在顶点 $\\begin{pmatrix} 1 \\\\ 0 \\end{pmatrix}$ 和 $\\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}$ 之间循环，目标函数值没有任何减小，保持在 $\\frac{1}{2}$ 不变。这证明了问题第一部分中的论断。\n\n**第二部分：带可行下降方向的 Armijo 回溯法**\n\n我们再次从 $x^{(0)} = \\begin{pmatrix} 1 \\\\ 0 \\end{pmatrix}$ 开始。\n首先，我们确定切锥 $T_{\\mathcal{C}}(x^{(0)})$。可行集 $\\mathcal{C}$ 由不等式 $g_1(x) = -x_1 \\leq 0$，$g_2(x) = -x_2 \\leq 0$ 和 $g_3(x) = x_1+x_2-1 \\leq 0$ 定义。在 $x^{(0)}$ 处，激活约束是 $g_2(x^{(0)}) = 0$ 和 $g_3(x^{(0)}) = 0$。\n激活约束的梯度为 $\\nabla g_2(x) = \\begin{pmatrix} 0 \\\\ -1 \\end{pmatrix}$ 和 $\\nabla g_3(x) = \\begin{pmatrix} 1 \\\\ 1 \\end{pmatrix}$。\n对于凸多面体，切锥是方向 $d = \\begin{pmatrix} d_1 \\\\ d_2 \\end{pmatrix}$ 的集合，满足对于所有激活约束 $i$，有 $\\nabla g_i(x^{(0)})^\\top d \\leq 0$。\n$$ \\nabla g_2(x^{(0)})^\\top d = \\begin{pmatrix} 0  -1 \\end{pmatrix} \\begin{pmatrix} d_1 \\\\ d_2 \\end{pmatrix} = -d_2 \\leq 0 \\implies d_2 \\geq 0.$$\n$$ \\nabla g_3(x^{(0)})^\\top d = \\begin{pmatrix} 1  1 \\end{pmatrix} \\begin{pmatrix} d_1 \\\\ d_2 \\end{pmatrix} = d_1 + d_2 \\leq 0.$$\n所以，切锥为 $T_{\\mathcal{C}}(x^{(0)}) = \\{d \\in \\mathbb{R}^2 \\,|\\, d_2 \\geq 0, d_1+d_2 \\leq 0\\}$。\n\n搜索方向 $d^{(0)}$ 是负梯度在该锥上的投影。负梯度为 $-\\nabla f(x^{(0)}) = -\\begin{pmatrix} 1 \\\\ -1 \\end{pmatrix} = \\begin{pmatrix} -1 \\\\ 1 \\end{pmatrix}$。\n我们检查该向量是否在切锥内。对于 $d_1 = -1$ 和 $d_2 = 1$：\n$d_2 = 1 \\geq 0$（满足）。\n$d_1+d_2 = -1+1=0 \\leq 0$（满足）。\n由于 $-\\nabla f(x^{(0)})$ 在闭凸锥 $T_{\\mathcal{C}}(x^{(0)})$ 内，其在该锥上的投影就是该向量本身。\n$$d^{(0)} = \\Pi_{T_{\\mathcal{C}}(x^{(0)})}(-\\nabla f(x^{(0)})) = \\begin{pmatrix} -1 \\\\ 1 \\end{pmatrix}.$$\n这是一个下降方向，因为 $\\nabla f(x^{(0)})^\\top d^{(0)} = \\begin{pmatrix} 1  -1 \\end{pmatrix} \\begin{pmatrix} -1 \\\\ 1 \\end{pmatrix} = -1 - 1 = -2  0$。\n\n接下来，我们执行 Armijo 回溯线搜索，从序列 $\\{\\alpha_0, \\beta \\alpha_0, \\beta^2 \\alpha_0, \\ldots\\} = \\{1, \\frac{1}{2}, \\frac{1}{4}, \\ldots\\}$ 中找到一个可接受的步长 $\\alpha$。\nArmijo 条件为：$f(x^{(0)} + \\alpha d^{(0)}) \\leq f(x^{(0)}) + \\sigma \\alpha \\nabla f(x^{(0)})^\\top d^{(0)}$。\n我们有 $f(x^{(0)}) = \\frac{1}{2}$，$\\sigma=\\frac{1}{4}$，以及 $\\nabla f(x^{(0)})^\\top d^{(0)} = -2$。该条件变为：\n$$f\\left(\\begin{pmatrix} 1 \\\\ 0 \\end{pmatrix} + \\alpha \\begin{pmatrix} -1 \\\\ 1 \\end{pmatrix}\\right) \\leq \\frac{1}{2} + \\frac{1}{4} \\alpha (-2) = \\frac{1}{2} - \\frac{\\alpha}{2}.$$\n新点为 $x(\\alpha) = \\begin{pmatrix} 1-\\alpha \\\\ \\alpha \\end{pmatrix}$。函数值为 $f(x(\\alpha)) = \\frac{1}{2}((1-\\alpha) - \\alpha)^2 = \\frac{1}{2}(1-2\\alpha)^2$。\n不等式为：\n$$\\frac{1}{2}(1-2\\alpha)^2 \\leq \\frac{1}{2} - \\frac{\\alpha}{2}.$$\n$$(1-2\\alpha)^2 \\leq 1 - \\alpha.$$\n$$1 - 4\\alpha + 4\\alpha^2 \\leq 1 - \\alpha.$$\n$$4\\alpha^2 - 3\\alpha \\leq 0.$$\n$$\\alpha(4\\alpha - 3) \\leq 0.$$\n因为我们寻找 $\\alpha > 0$，这可简化为 $4\\alpha - 3 \\leq 0$，或 $\\alpha \\leq \\frac{3}{4}$。\n\n现在我们测试试验步长：\n- 对于 $\\alpha_0 = 1$：$1 \\not\\leq \\frac{3}{4}$。条件不满足。\n- 对于 $\\alpha_1 = \\beta \\alpha_0 = \\frac{1}{2}$：$\\frac{1}{2} \\leq \\frac{3}{4}$。条件满足。\n我们还需检查步长是否可行。对于步长 $\\alpha$，点 $x(\\alpha) = (1-\\alpha, \\alpha)$ 必须在 $\\mathcal{C}$ 内，这要求 $1-\\alpha \\ge 0$，$\\alpha \\ge 0$，以及 $(1-\\alpha)+\\alpha \\le 1$。这些条件简化为 $0 \\le \\alpha \\le 1$。所有试验步长都在此范围内。\n序列中满足 Armijo 条件的最大步长是 $\\alpha = \\frac{1}{2}$。\n\n最后，我们使用给定的公式 $\\Delta = \\sigma\\,\\alpha\\,\\|\\nabla f(x^{(0)})\\|^{2}$，为这个被接受的步长计算保证的下降量 $\\Delta$。\n我们有 $\\sigma = \\frac{1}{4}$，被接受的步长是 $\\alpha = \\frac{1}{2}$。\n梯度的范数平方是 $\\|\\nabla f(x^{(0)})\\|^2 = \\left\\|\\begin{pmatrix} 1 \\\\ -1 \\end{pmatrix}\\right\\|^2 = 1^2 + (-1)^2 = 2$。\n代入这些值：\n$$\\Delta = \\left(\\frac{1}{4}\\right) \\left(\\frac{1}{2}\\right) (2) = \\frac{2}{8} = \\frac{1}{4}.$$\n保证的下降量为 $\\frac{1}{4}$。\n注意，实际的下降量是 $f(x^{(0)}) - f(x^{(0)} + \\frac{1}{2} d^{(0)}) = \\frac{1}{2} - f(\\frac{1}{2}, \\frac{1}{2}) = \\frac{1}{2} - 0 = \\frac{1}{2}$，它大于或等于保证的下降量 $\\frac{1}{4}$。",
            "answer": "$$\\boxed{\\frac{1}{4}}$$"
        }
    ]
}