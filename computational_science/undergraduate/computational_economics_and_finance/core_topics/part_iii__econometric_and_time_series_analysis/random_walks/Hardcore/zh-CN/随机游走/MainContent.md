## 引言
[随机游走](@entry_id:142620)，一个描述一系列随机步骤累积效应的数学模型，是理解不确定性和动态过程的基石，在[计算经济学](@entry_id:140923)与金融学中扮演着核心角色。从股票价格的波动到宏观经济指标的演变，[随机游走](@entry_id:142620)为量化和分析这些看似无序的现象提供了强大的理论框架。然而，基础模型在面对复杂的真实世界数据时常显不足，这催生了对其进行深入研究和扩展的必要性。本文旨在系统地剖析[随机游走理论](@entry_id:138227)，并展示其广泛的应用价值。

在接下来的内容中，我们将分三步深入这一主题。第一章“原理与机制”将从数学基础出发，揭示经典[随机游走](@entry_id:142620)的特性与局限，并引入鞅理论、边界条件和均值回归等高级概念。第二章“应用与跨学科联系”将视野扩展至金融、经济、物理和生物等多个领域，通过具体案例展示[随机游走](@entry_id:142620)作为通用建模工具的强大威力。最后，“动手实践”部分将提供一系列计算问题，让您有机会亲手应用所学知识解决实际挑战，从而巩固理解。

## 原理与机制

本章旨在深入探讨[随机游走模型](@entry_id:180803)的核心原理及其在[计算经济学](@entry_id:140923)与金融学中的关键机制。我们将从最基础的[随机游走](@entry_id:142620)定义出发，揭示其在模拟[金融时间序列](@entry_id:139141)时的局限性，进而引入一系列更为精妙和贴近现实的模型变体。我们将探讨[随机游走](@entry_id:142620)与金融[资产定价](@entry_id:144427)中的鞅理论之间的深刻联系，分析不同类型的边界条件（吸收、反射、[均值回归](@entry_id:164380)）如何影响过程的行为，并将模型扩展至多维空间以理解[投资组合多样化](@entry_id:276840)的数学基础。最后，我们将介绍一些高级应用，包括连续时间下的首达[时间问题](@entry_id:202825)、投资策略分析，以及带有记忆的非马尔可夫[随机游走](@entry_id:142620)。

### 经典[随机游走](@entry_id:142620)及其特性

[随机游走](@entry_id:142620)是描述一系列随机步骤累积效应的数学模型。其最基本的形式是一维简单[随机游走](@entry_id:142620)，定义为 $S_n = \sum_{t=1}^n X_t$，其中 $S_n$ 是在时间 $n$ 的位置，$X_t$ 是一系列独立同分布 (i.i.d.) 的[随机变量](@entry_id:195330)，代表每一步的移动。在金融领域，一个常见的初始模型是假设资产的对数价格服从[随机游走](@entry_id:142620)，即 $\log S_t = \log S_{t-1} + r_t$，其中[对数收益率](@entry_id:270840) $r_t$ 是[独立同分布](@entry_id:169067)的[随机变量](@entry_id:195330)。

尽管这一模型是金融建[模的基](@entry_id:156416)石，但它无法捕捉到真实[金融时间序列](@entry_id:139141)中观察到的两个关键的“程式化事实” (stylized facts)。

首先是**[波动率聚集](@entry_id:145675)** (volatility clustering)。实证研究表明，金融资产收益率的波动幅度具有持续性：大幅度的波动之后往往跟随着大幅度的波动，而小幅度的波动之后则倾向于继续保持小幅波动。这表现为绝对收益率 $|r_t|$ 或平方收益率 $r_t^2$ 的[自相关函数 (ACF)](@entry_id:139144) 在多个滞后期内显著为正。然而，在经典的[随机游走模型](@entry_id:180803)中，由于收益率 $r_t$ 是[独立同分布](@entry_id:169067)的，其任何函数（包括[绝对值](@entry_id:147688)）的序列也是相互独立的。对于任意 $k \ge 1$，由于 $|r_t|$ 和 $|r_{t-k}|$ 是独立的，它们的协[方差](@entry_id:200758)必然为零。因此，该模型的绝对收益率自[相关系数](@entry_id:147037) $\rho_k = \text{Corr}(|r_t|, |r_{t-k}|)$ 恒等于零，无法产生[波动率聚集](@entry_id:145675)现象。要捕捉这一特征，需要引入[条件异方差](@entry_id:141394)模型，如 GARCH 模型，在该模型中，当期波动率依赖于过去的收益率，从而使得 $|r_t|$ 序列产生自相关，尽管收益率 $r_t$ 本身是无序列相关的 。

其次是**肥尾现象** (fat tails) 或尖峰[厚尾](@entry_id:140093) (leptokurtosis)。大量证据显示，极端市场事件（即大幅度的正或负收益）的发生频率远高于正态分布（[高斯分布](@entry_id:154414)）所预测的水平。经典[随机游走模型](@entry_id:180803)常假设收益率服从正态分布，但这低估了[尾部风险](@entry_id:141564)。为了更准确地模拟金融市场，我们通常采用具有“肥尾”特征的[分布](@entry_id:182848)，如[学生t分布](@entry_id:267063) ([Student's t-distribution](@entry_id:142096))。与正态分布相比，[学生t分布](@entry_id:267063)的尾部更厚，能够更好地容纳极端值。我们可以通过几个诊断指标来量化这种偏离：

*   **样本超额峰度 ($g_2$)**：定义为 $g_2 = \frac{m_4}{m_2^2} - 3$，其中 $m_k$ 是样本的 $k$ 阶[中心矩](@entry_id:270177)。[正态分布](@entry_id:154414)的超额[峰度](@entry_id:269963)为0。正的超额峰度表示[分布](@entry_id:182848)比正态分布更“尖峭”且尾部更“厚”。
*   **尾部比率 ($Q$)**：比较样本绝对收益率的极端[分位数](@entry_id:178417)与[方差](@entry_id:200758)匹配的正态分布基准的相应[分位数](@entry_id:178417)。例如，可以将样本绝对收益率的 $0.99$ 分位数与具有相同样本标准差的[正态分布](@entry_id:154414)的[绝对值](@entry_id:147688)的 $0.99$ 分位数进行比较。若该比率大于1，则表明实证[分布](@entry_id:182848)的尾部比[正态分布](@entry_id:154414)更重。
*   **风险价值 ([VaR](@entry_id:140792)) 超出频率 ($f_{\text{exceed}}$)**：这是一种简单的模型[回测](@entry_id:137884)方法。我们首先基于[正态分布](@entry_id:154414)假设来计算[VaR](@entry_id:140792)阈值（例如，在 $99\%$ [置信水平](@entry_id:182309)下），然后计算实际收益率低于该阈值的频率。如果该频率显著高于预期的 $1\%$，则表明基于正态假设的VaR模型低估了实际风险。

例如，通过模拟可以发现，当[对数收益率](@entry_id:270840)的增量服从自由度较低（如 $\nu=5$）的[学生t分布](@entry_id:267063)时，其样本超额峰度显著为正，尾部比率大于1，且[VaR](@entry_id:140792)超出频率也高于名义水平。而当自由度很高（如 $\nu=30$）时，学生t分布趋近于正态分布，这些指标也会相应地接近其正态基准值 。这些观察强调了在金融建模中选择合适增量[分布](@entry_id:182848)的重要性。

### [随机游走](@entry_id:142620)与[资产定价](@entry_id:144427)：[鞅](@entry_id:267779)的联系

在金融理论中，一个核心概念是**[鞅](@entry_id:267779)** (martingale)，它是一个[随机过程](@entry_id:159502)，其在下一时刻的[期望值](@entry_id:153208)等于当前时刻的观测值，给定所有历史信息。这可以被理解为一个“公平游戏”的数学模型，即在游戏中，你无法利用历史信息来系统性地预测未来的收益。在[无套利](@entry_id:634322)市场中，经过适当折现的资产价格过程通常被建模为[鞅](@entry_id:267779)。

将[随机游走模型](@entry_id:180803)与资产价格联系起来的标准方法是**[几何随机游走](@entry_id:145665)** (Geometric Random Walk, GRW)。该模型假设资产价格 $S_t$ 的演化遵循：
$$ S_{t+1} = S_t \exp(X_{t+1}) $$
其中 $X_{t+1}$ 是[对数收益率](@entry_id:270840)，为一个独立同分布的[随机变量](@entry_id:195330)序列。

一个关键问题是：在什么条件下，[几何随机游走](@entry_id:145665) $\{S_t\}$ 是一个关于其自身历史信息流（自然滤波 $\mathcal{F}_t$）的[鞅](@entry_id:267779)？根据[鞅](@entry_id:267779)的定义，需要满足两个条件：1) $\mathbb{E}[|S_t|]  \infty$（可积性）；2) $\mathbb{E}[S_{t+1} | \mathcal{F}_t] = S_t$。

我们可以推导出一个简洁的条件。由于 $S_t$ 在 $t$ 时刻是已知的（即 $\mathcal{F}_t$-可测），我们可以将其从条件期望中提出：
$$ \mathbb{E}[S_{t+1} | \mathcal{F}_t] = \mathbb{E}[S_t \exp(X_{t+1}) | \mathcal{F}_t] = S_t \mathbb{E}[\exp(X_{t+1}) | \mathcal{F}_t] $$
因为 $X_{t+1}$ 独立于 $\mathcal{F}_t$，其[条件期望](@entry_id:159140)等于无条件期望。因此，[鞅](@entry_id:267779)的条件简化为：
$$ S_t \mathbb{E}[\exp(X_{t+1})] = S_t \implies \mathbb{E}[\exp(X)] = 1 $$
其中 $X$ 是与所有 $X_t$ 同[分布](@entry_id:182848)的[随机变量](@entry_id:195330)。这个条件等价于[对数收益率](@entry_id:270840) $X$ 的[矩生成函数](@entry_id:154347) (Moment-Generating Function, MGF) $M_X(u) = \mathbb{E}[\exp(uX)]$ 在 $u=1$ 处的值为1。如果 $M_X(1)$ 存在且等于1，那么可积性条件也会自动满足。

让我们通过几个例子来理解这一原理 ：
*   **[正态分布](@entry_id:154414)[对数收益率](@entry_id:270840)**：若 $X_t \sim \mathcal{N}(\mu, \sigma^2)$，其MGF为 $M_X(u) = \exp(\mu u + \frac{1}{2}\sigma^2 u^2)$。鞅条件 $\mathbb{E}[\exp(X)] = M_X(1) = 1$ 成立当且仅当 $\exp(\mu + \frac{1}{2}\sigma^2) = 1$，即 $\mu + \frac{1}{2}\sigma^2 = 0$。这个特定的漂移项 $\mu = -\frac{1}{2}\sigma^2$ 在[风险中性定价](@entry_id:144172)中至关重要，它恰好抵消了波动性带来的价格上行漂移（源于指数函数的凸性）。若 $\mu=0$，则 $\mathbb{E}[\exp(X)] > 1$，资产价格预期会增长，此时过程是一个[下鞅](@entry_id:263978) (submartingale)。
*   **[拉普拉斯分布](@entry_id:266437)[对数收益率](@entry_id:270840)**：若 $X_t$ 服从[位置参数](@entry_id:176482)为 $\mu$、[尺度参数](@entry_id:268705)为 $b$ 的[拉普拉斯分布](@entry_id:266437)，其MGF为 $M_X(u) = \frac{\exp(\mu u)}{1 - b^2 u^2}$，定义域为 $|u|  1/b$。若我们设定参数使得 $M_X(1)=1$，例如，取 $\mu = \ln(1-b^2)$ 且 $b  1$，那么对应的[几何随机游走](@entry_id:145665)也是一个鞅。这表明非[正态分布](@entry_id:154414)的收益率同样可以构建鞅过程。然而，如果参数使得MGF在 $u=1$ 处发散（例如当 $b \ge 1$ 时），则 $\mathbb{E}[\exp(X)]$ 不存在（为无穷大），[可积性](@entry_id:142415)条件失效，过程不是鞅。

### 行为变体：边界条件与[均值回归](@entry_id:164380)

现实中的许多经济金融过程并非在无约束的空间中自由游走，而是受到各种边界或内在机制的限制。这些限制从根本上改变了[随机游走](@entry_id:142620)的[长期行为](@entry_id:192358)。

#### [吸收边界](@entry_id:201489)

当一个[随机游走过程](@entry_id:171699)到达某个或某些状态后便停止移动时，这些状态被称为**[吸收边界](@entry_id:201489)** (absorbing barriers)。这在金融中常用于模拟极端事件，如破产或达到预设的盈利目标。一个经典例子是“赌徒破产问题”，它可以被用来为一个设定了止损和止盈目标的头寸建模 。

考虑一个资产净值过程 $X_t$，其在 $0$（破产）和 $H$（目标）处有[吸收边界](@entry_id:201489)。从初始状态 $s \in (0, H)$ 出发，我们关心两个核心问题：最终破产的概率 $\pi_{\text{ruin}}(s)$ 和到达任一边界的期望时间 $\tau(s)$。这些量可以通过**一步分析** (first-step analysis) 来求解。通过对过程的第一步进行条件分析，我们可以为所有内部状态建立一个递归关系。

例如，对于[破产概率](@entry_id:268258) $h(i) = \pi_{\text{ruin}}(i)$，我们有：
$$ h(i) = p \cdot h(i+\Delta_i) + (1-p) \cdot h(i-\Delta_i) $$
其中 $p$ 是向上移动的概率，$\Delta_i$ 是在状态 $i$ 时的步长（可能依赖于状态，例如，杠杆随资产水平变化）。该方程连同边界条件 $h(0)=1$ 和 $h(H)=0$，构成了一个关于所有内部状态 $h(i)$ 的[线性方程组](@entry_id:148943)。同样，对于[期望吸收时间](@entry_id:637112) $t(i) = \tau(i)$，我们有：
$$ t(i) = 1 + p \cdot t(i+\Delta_i) + (1-p) \cdot t(i-\Delta_i) $$
其边界条件为 $t(0)=0$ 和 $t(H)=0$。求解这两个[线性方程组](@entry_id:148943)是[计算经济学](@entry_id:140923)中的一项标准任务，它为[风险管理](@entry_id:141282)提供了定量的决策依据。

#### [反射边界](@entry_id:634534)

与[吸收边界](@entry_id:201489)不同，**[反射边界](@entry_id:634534)** (reflecting barriers) 会将试图穿越边界的过程“推回”到状态空间内部。这种机制适用于模拟那些被某种力量限制在特定范围内的过程，例如，由做市商干预维持的[买卖价差](@entry_id:140468) 。

考虑一个在 $\{0, 1, \ldots, N\}$ 上游走的过程，当它到达 $0$ 时被强制推回至 $1$，到达 $N$ 时被推回至 $N-1$。这种反射行为阻止了过程的发散，使其成为一个遍历的 (ergodic) 马尔可夫链。遍历过程的一个关键特性是它存在唯一的**平稳分布** (stationary distribution) $\pi$。[平稳分布](@entry_id:194199)描述了在长期运行中，过程处于每个状态的概率。

对于一维[随机游走](@entry_id:142620)（[生灭过程](@entry_id:168595)），[平稳分布](@entry_id:194199)可以通过**[细致平衡方程](@entry_id:265021)** (detailed balance equations) 求解。该方程要求在[稳态](@entry_id:182458)下，任意两个相邻状态 $k$ 和 $k+1$ 之间的概率流必须相等：
$$ \pi(k) P_{k, k+1} = \pi(k+1) P_{k+1, k} $$
其中 $P_{ij}$ 是从状态 $i$ 转移到 $j$ 的概率。通过递归地应用这些方程，并结合概率[归一化条件](@entry_id:156486) $\sum_{k=0}^N \pi(k) = 1$，我们可以解析地求出整个平稳分布 $\pi$。一旦获得平稳分布，就可以计算各种[稳态](@entry_id:182458)下的[期望值](@entry_id:153208)，如期望价差 $E_{\pi}[S] = \sum_k k \cdot \pi(k)$，或市场干预率 $I = \pi(0) + \pi(N)$。

#### 均值回归[随机游走](@entry_id:142620)

许多[金融时间序列](@entry_id:139141)，如配对交易中的价差或短期利率，并不会无限发散，而是表现出向某个长期[均值回归](@entry_id:164380)的趋势。这种行为可以通过**均值回归[随机游走](@entry_id:142620)**来建模。其中最著名的连续时间模型是**Ornstein-Uhlenbeck (OU) 过程**，由以下随机微分方程 (SDE) 定义 ：
$$ dX_t = \kappa (\theta - X_t) dt + \sigma dW_t $$
这里的参数有明确的金融含义：$\theta$ 是[长期均衡](@entry_id:139043)水平，$\kappa > 0$ 是均值回归速度（$\kappa$ 越大，回归越快），$\sigma$ 是波动率。当 $X_t > \theta$ 时，漂移项 $\kappa(\theta - X_t)$ 为负，将过程[拉回](@entry_id:160816) $\theta$；反之亦然。

OU过程的精确解为：
$$ X_t = X_s e^{-\kappa(t-s)} + \theta(1 - e^{-\kappa(t-s)}) + \sigma \int_s^t e^{-\kappa(t-u)} dW_u $$
从这个解我们可以直接推导出过程在离散时间点上的性质。若我们在时间间隔为 $\Delta$ 的离散点上观察该过程，那么 $X_{(k+1)\Delta}$ 与 $X_{k\Delta}$ 之间存在一个精确的自回归关系（AR(1)）：
$$ X_{(k+1)\Delta} = c + \phi X_{k\Delta} + \epsilon_{k+1} $$
其中，自[回归系数](@entry_id:634860) $\phi = e^{-\kappa\Delta}$，常数项 $c = \theta(1-\phi)$，而创新项 $\epsilon_{k+1}$ 是一个均值为零、[方差](@entry_id:200758)为 $\sigma_\Delta^2 = \frac{\sigma^2}{2\kappa}(1 - e^{-2\kappa\Delta})$ 的正态[随机变量](@entry_id:195330)。这种从连续时间SDE到离散时间[AR(1)模型](@entry_id:265801)的精确对应关系是[金融计量经济学](@entry_id:143067)中的一个核心结果。

[均值回归](@entry_id:164380)速度 $\kappa$ 也可以通过一个更直观的量——**半衰期** ($h$)——来理解。半衰期是指初始偏差 $(X_0 - \theta)$ 的[期望值](@entry_id:153208)衰减到一半所需的时间。通过求解 $\mathbb{E}[X_h - \theta | X_0] = \frac{1}{2}(X_0 - \theta)$，我们得到 $h = \frac{\ln(2)}{\kappa}$。这个量为我们提供了一个关于过程“记忆”时长的直观感受。

### 扩展维度：多资产组合与多样化

现实中的投资组合通常包含多种资产。我们可以通过**多维[随机游走](@entry_id:142620)**来模拟这种系统。一个 $d$ 维[随机游走](@entry_id:142620)是在格点 $\mathbb{Z}^d$ 上的一个过程 $S_n = \sum_{t=1}^n X_t$，其中 $X_t \in \mathbb{Z}^d$ 是随机增量向量。

一个深刻的理论结果涉及[随机游走](@entry_id:142620)的**常返性** (recurrence) 与**暂留性** (transience)。一个[随机游走](@entry_id:142620)是常返的，如果它以概率1返回其起点；否则，它是暂留的。数学家 György Pólya 证明了一个惊人的定理：简单[对称随机游走](@entry_id:273558)在一维 ($d=1$) 和二维 ($d=2$) 是常返的，但在三维及更高维度 ($d \ge 3$) 是暂留的。

这个纯数学结论在金融中有着深刻的寓意。考虑一个由三种不相关资产组成的投资组合，其累积的（去均值）对数收益向量可以建模为一个三维[随机游走](@entry_id:142620) $S_n \in \mathbb{R}^3$ 。根据[Pólya定理](@entry_id:264026)，$S_n$ 是暂留的。这意味着，虽然每个单一资产的累积收益（一个一维[随机游走](@entry_id:142620)）几乎肯定会回到其起点，但整个三维向量 $S_n$ 同时回到原点 $(0,0,0)$ 的概率严格小于1。换句话说，所有资产的累积冲击同时完全“抵消”的事件不是必然发生的。这为**多样化** (diversification) 提供了一个独特的视角：通过组合多个不相关的随机源，整个系统的[状态空间](@entry_id:177074)变得“太大”，以至于它“迷路”而无法保证回到初始状态的可能性。暂留性意味着系统倾向于向外探索，而不是在原点附近徘徊。

然而，有趣的是，如果我们考察这个投资组合的等权重整体表现，即 $P_n = \frac{1}{3}(S_n^{(1)} + S_n^{(2)} + S_n^{(3)})$，这个过程本身是一个一维[随机游走](@entry_id:142620)（其步长是三个[独立随机变量](@entry_id:273896)之和）。由于其步长的期望为零，这个一维的聚合过程 $P_n$ 是常返的。这揭示了分析向量过程本身与分析其[标量投影](@entry_id:148823)之间的关键区别。

### 应用与高级专题

[随机游走理论](@entry_id:138227)为解决金融中的许多实际问题提供了强大的工具。

#### 连续时间下的首达[时间问题](@entry_id:202825)

在风险管理和[衍生品定价](@entry_id:144008)中，我们经常关心一个[随机过程](@entry_id:159502)（如股价或利率）首次触及某个特定水平所需的时间。在连续时间框架下，这个问题可以通过求解涉及过程**无穷小生成元** (infinitesimal generator) 的[偏微分方程](@entry_id:141332)来解决。

考虑一个由 $dX_t = \mu dt + \sigma dW_t$ 描述的对数价格过程，其在区间 $(a,b)$ 内游走，其中 $a$ 是止损位， $b$ 是止盈位 。我们可能想知道，如果最终触及了止损位 $a$，那么到达那里所花费的期望时间是多少？即求解 $\mathbb{E}_x[\tau | X_\tau = a]$，其中 $\tau$ 是首次离开区间 $(a,b)$ 的时间。

这个问题可以通过求解两个耦合的常微分方程（边界值问题）来解决。首先，触及 $a$ 的概率 $p_a(x) = \mathbb{P}_x(X_\tau=a)$ 是方程 $\mathcal{L}f(x) = 0$ 的解，其中 $\mathcal{L}f(x) = \mu f'(x) + \frac{1}{2}\sigma^2 f''(x)$ 是过程的生成元，边界条件为 $p_a(a)=1, p_a(b)=0$。其次，联合事件“在时间 $\tau$ 到达 $a$”的期望时间 $J(x) = \mathbb{E}_x[\tau \cdot \mathbb{I}_{\{X_\tau=a\}}]$ 满足方程 $\mathcal{L}J(x) = -p_a(x)$，边界条件为 $J(a)=0, J(b)=0$。通过依次求解这两个[二阶常微分方程](@entry_id:204212)，我们可以得到所求条件期望的解析表达式：
$$ \mathbb{E}_{x} \left[ \tau \mid X_{\tau} = a \right] = \frac{J(x)}{p_a(x)} $$
这个强大的技术将[随机过程](@entry_id:159502)的路径问题转化为了确定性的分析问题。

#### 投资策略分析

[随机游走模型](@entry_id:180803)也常被用作评估和比较不同投资策略的理论实验室。一个经典的辩题是**一次性总付投资 (Lump-Sum, LS)** 与**定期定额投资 (Dollar-Cost Averaging, DCA)** 的优劣 。

假设我们有一个总预算 $B$ 和 $N$ 个投资期，资产的简单总回报率服从[随机游走](@entry_id:142620)，且各期独立，期望收益为零。
*   **LS策略**：在期初 $t=0$ 将全部资金 $B$ 投入。
*   **DCA策略**：在每期期初 $t=0, 1, \ldots, N-1$ 平均投入 $B/N$。

通过计算两种策略下期末财富的期望和[方差](@entry_id:200758)，我们可以进行比较。在零期望收益的假设下，两种策略的期末财富[期望值](@entry_id:153208)是相同的，均为 $B$。然而，它们的风险（以[方差](@entry_id:200758)衡量）却不同。通过近似计算可以发现，DCA策略的期末财富[方差](@entry_id:200758)显著低于LS策略（当 $N>1$ 时）。其根本原因在于，DCA策略的投资是分批进行的，后投入的资金暴露在市场风险中的时间更短，从而累积的[方差](@entry_id:200758)也更小。LS策略将所有资金一次性暴露于整个投资期的全部风险中，而DCA策略则在时间上分散了这种风险暴露。

#### 带有记忆的[随机游走](@entry_id:142620)

标准[随机游走](@entry_id:142620)的一个核心假设是**马尔可夫性**，即下一步的概率只依赖于当前状态，而与如何到达当前状态的历史路径无关。然而，在某些金融场景中，如模拟投资者情绪，历史路径可能很重要。这催生了对**带有记忆的[随机游走](@entry_id:142620)**或非马尔可夫[随机游走](@entry_id:142620)的研究。

一个例子是“大象[随机游走](@entry_id:142620)” (Elephant Random Walk, ERW)，它在每一步都有一定概率“记住”并复制过去所有步中的某一个。我们可以构建一个更复杂的模型来模拟投资者情绪，该模型混合了ERW机制（代表内在的从众或反转行为）和对外部市场信号的反应 。

在这种模型中，当前增量 $X_t$ 的期望 $\mu_t = \mathbb{E}[X_t]$ 不再是常数，而是依赖于过去所有增量的[期望值](@entry_id:153208)的总和或平均值。例如，其期望可能遵循如下的递推关系：
$$ \mu_t = (\text{外部市场影响项}) + (\text{记忆项}) \cdot \frac{1}{t-1}\sum_{u=1}^{t-1} \mu_u $$
这个[递推关系](@entry_id:189264)表明，过程的期望漂移是内生的，并随着时间的推移而演变。这种[路径依赖性](@entry_id:186326)使得模型能够产生比标准[随机游走](@entry_id:142620)更丰富的动态行为，尽管其[数学分析](@entry_id:139664)也更为复杂。通过求解这样的递推关系，我们可以计算出过程在任意时间 horizon 的期望位置，为理解具有[路径依赖性](@entry_id:186326)的金融现象提供了框架。