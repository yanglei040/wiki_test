{
    "hands_on_practices": [
        {
            "introduction": "Before placing a bet, it's crucial to understand the inherent uncertainty of the game. Information theory provides a powerful tool for this: Shannon entropy. This first exercise  will guide you through calculating the entropy of a hypothetical horse race, giving you a quantitative measure of its predictability and laying the groundwork for more advanced strategic decisions.",
            "id": "1625834",
            "problem": "A data analyst is studying the predictability of a local horse race involving four horses: an established favorite named \"Chronos\", a strong contender \"Bolt\", and two long-shots \"Starlight\" and \"Comet\". Based on extensive historical data and an advanced statistical model, the analyst assigns the following probabilities of winning to each horse:\n- Probability of Chronos winning: $p_C = \\frac{1}{2}$\n- Probability of Bolt winning: $p_B = \\frac{1}{4}$\n- Probability of Starlight winning: $p_S = \\frac{1}{8}$\n- Probability of Comet winning: $p_{Co} = \\frac{1}{8}$\n\nAssume that these probabilities accurately represent the race, that there are no other possible outcomes (e.g., a tie), and that the events are mutually exclusive. Calculate the Shannon entropy of the random variable representing the outcome of this race. Express your answer as a single numerical value in units of bits.",
            "solution": "Let $X$ be the discrete random variable representing the race outcome with probabilities $p_{C}=\\frac{1}{2}$, $p_{B}=\\frac{1}{4}$, $p_{S}=\\frac{1}{8}$, and $p_{Co}=\\frac{1}{8}$. First, verify normalization:\n$$\n\\frac{1}{2}+\\frac{1}{4}+\\frac{1}{8}+\\frac{1}{8}=1.\n$$\nThe Shannon entropy in bits for a discrete distribution is defined by\n$$\nH(X)=-\\sum_{i} p_{i}\\log_{2}(p_{i}).\n$$\nCompute each logarithm using $\\log_{2}\\!\\left(2^{-k}\\right)=-k$:\n$$\n\\log_{2}\\!\\left(\\frac{1}{2}\\right)=-1,\\quad \\log_{2}\\!\\left(\\frac{1}{4}\\right)=-2,\\quad \\log_{2}\\!\\left(\\frac{1}{8}\\right)=-3.\n$$\nSubstitute and sum:\n$$\nH(X)=-\\left[\\frac{1}{2}(-1)+\\frac{1}{4}(-2)+\\frac{1}{8}(-3)+\\frac{1}{8}(-3)\\right]\n= -\\left[-\\frac{1}{2}-\\frac{1}{2}-\\frac{3}{8}-\\frac{3}{8}\\right].\n$$\nCombine the terms inside the brackets:\n$$\n-\\frac{1}{2}-\\frac{1}{2}=-1,\\quad -\\frac{3}{8}-\\frac{3}{8}=-\\frac{6}{8}=-\\frac{3}{4},\n$$\nso the total is $-1-\\frac{3}{4}=-\\frac{7}{4}$. Therefore,\n$$\nH(X)=-\\left(-\\frac{7}{4}\\right)=\\frac{7}{4}\\ \\text{bits}.\n$$",
            "answer": "$$\\boxed{\\frac{7}{4}}$$"
        },
        {
            "introduction": "Once we can measure uncertainty, the next question is how to act on it, especially when the odds are in our favor. The Kelly criterion provides a rigorous answer by optimizing the fraction of capital to invest for maximal long-term growth. In this practice problem , you will apply this famous principle to a simple investment scenario, deriving both the optimal investment fraction and the resulting maximum growth rate.",
            "id": "1625814",
            "problem": "An algorithmic trading strategy is being evaluated for a highly volatile asset. The algorithm bets on the asset's price movement within very short, discrete time intervals. For each interval, the model assumes the following:\n\n- There is a probability $p$ that the asset's price will increase.\n- There is a probability $q=1-p$ that the asset's price will decrease.\n\nThe trading strategy involves staking a fraction $f$ of the current total capital on a price increase in each interval.\n- If the price increases, the firm wins an amount equal to the stake, which is added to the capital.\n- If the price decreases, the firm loses the staked amount.\n\nThe primary objective is to select the fraction $f$ that maximizes the long-term growth rate of capital. The growth rate per trade, denoted by $G(f)$, is defined as the expected value of the natural logarithm of the wealth ratio, i.e., $G(f) = E[\\ln(W_{n+1}/W_n)]$, where $W_n$ is the capital before the $n$-th trade.\n\nGiven that the model estimates the probability of a price increase to be $p = 0.505$, determine the maximum possible value for this long-term growth rate per trade.\n\nExpress your answer as a real number, rounded to four significant figures.",
            "solution": "The problem asks for the maximum long-term growth rate of capital per trade. Let $W_n$ be the capital at the beginning of the $n$-th interval. A fraction $f$ of this capital, $fW_n$, is staked on a price increase.\n\nFirst, let's determine the capital $W_{n+1}$ after one trade, based on the two possible outcomes.\nThe amount of capital not staked is $(1-f)W_n$.\n1.  **Price Increase (Win):** This occurs with probability $p$. The firm wins an amount equal to the stake, so the profit is $fW_n$. The original stake is returned. The capital after the trade is the non-staked part plus the returned stake plus the profit. However, the problem states the win is \"added to the capital\", which can be interpreted as the final capital being $W_n + (\\text{profit})$. The profit is stated to be equal to the stake. So, $W_{n+1} = W_n + fW_n = W_n(1+f)$.\n2.  **Price Decrease (Loss):** This occurs with probability $q=1-p$. The firm loses the staked amount, $fW_n$. The capital after the trade is $W_{n+1} = W_n - fW_n = W_n(1-f)$.\n\nThe wealth ratio is the random variable $W_{n+1}/W_n$, which takes the value $(1+f)$ with probability $p$ and $(1-f)$ with probability $q=1-p$.\n\nThe growth rate per trade, $G(f)$, is the expected value of the natural logarithm of this ratio:\n$$G(f) = E\\left[\\ln\\left(\\frac{W_{n+1}}{W_n}\\right)\\right] = p \\ln(1+f) + (1-p) \\ln(1-f)$$\n\nTo find the fraction $f$ that maximizes this growth rate, we need to take the derivative of $G(f)$ with respect to $f$ and set it to zero.\n$$\\frac{dG}{df} = \\frac{d}{df} [p \\ln(1+f) + (1-p) \\ln(1-f)]$$\n$$\\frac{dG}{df} = p \\cdot \\frac{1}{1+f} + (1-p) \\cdot \\frac{-1}{1-f} = \\frac{p}{1+f} - \\frac{1-p}{1-f}$$\n\nSetting the derivative to zero to find the optimal fraction, $f^*$:\n$$\\frac{p}{1+f^*} - \\frac{1-p}{1-f^*} = 0$$\n$$\\frac{p}{1+f^*} = \\frac{1-p}{1-f^*}$$\n$$p(1-f^*) = (1-p)(1+f^*)$$\n$$p - pf^* = 1 - p + f^* - pf^*$$\n$$p = 1 - p + f^*$$\n$$f^* = 2p - 1$$\n\nNow, we substitute the given value $p=0.505$ to find the numerical value of the optimal fraction $f^*$.\n$$f^* = 2(0.505) - 1 = 1.01 - 1 = 0.01$$\n\nThe maximum growth rate, $G_{max}$, is the value of $G(f)$ at $f=f^*=0.01$.\n$$G_{max} = G(0.01) = p \\ln(1+0.01) + (1-p) \\ln(1-0.01)$$\n$$G_{max} = 0.505 \\ln(1.01) + (1-0.505) \\ln(0.99)$$\n$$G_{max} = 0.505 \\ln(1.01) + 0.495 \\ln(0.99)$$\n\nUsing a calculator to evaluate the natural logarithms:\n$\\ln(1.01) \\approx 0.00995033085$\n$\\ln(0.99) \\approx -0.01005033585$\n\nSubstitute these values into the expression for $G_{max}$:\n$$G_{max} \\approx 0.505 \\times (0.00995033085) + 0.495 \\times (-0.01005033585)$$\n$$G_{max} \\approx 0.00502491708 - 0.00497491659$$\n$$G_{max} \\approx 0.00005000049$$\n\nThe problem asks to round the final answer to four significant figures.\n$$G_{max} \\approx 0.00005000$$\nThis can also be written in scientific notation as $5.000 \\times 10^{-5}$.",
            "answer": "$$\\boxed{0.00005000}$$"
        },
        {
            "introduction": "Real-world opportunities are rarely static; the rules and payouts often change based on past events. This final exercise  challenges you to extend the Kelly criterion to a dynamic system where the investment returns depend on the previous outcome. By developing a state-dependent strategy, you will see how the core principles of maximizing log-wealth can be applied to create sophisticated, adaptive policies for complex environments.",
            "id": "1625811",
            "problem": "An analyst is modeling a volatile financial asset whose price evolution is influenced by a binary \"market sentiment\" signal, $S_n \\in \\{\\text{Up}, \\text{Down}\\}$, at discrete time steps $n=1, 2, 3, \\ldots$. The signal sequence is modeled as a series of outcomes from a memoryless fair coin, where 'Heads' corresponds to 'Up' and 'Tails' corresponds to 'Down'.\n\nAn investor has access to a special derivative security. Before each time step $n$, they can invest a fraction of their current portfolio, $W_{n-1}$, on a bet to predict the upcoming signal, $S_n$. The rules of the investment are as follows:\n- The return on a correct prediction depends on the previous signal, $S_{n-1}$.\n- If the previous signal was 'Up', a correct prediction of $S_n$ multiplies the invested amount by a factor of $r_U$.\n- If the previous signal was 'Down', a correct prediction of $S_n$ multiplies the invested amount by a factor of $r_D$.\n- An incorrect prediction at any step results in the complete loss of the amount invested at that step. Any capital not invested is unaffected.\n- The initial signal $S_0$ is known. For this problem, you can analyze the process after it has been running for a long time, so the initial state does not affect the long-term average.\n- The investor's strategy is to choose the investment fraction at each step to maximize the long-term growth rate of their portfolio. This fraction can be chosen differently depending on whether the previous signal was 'Up' or 'Down'. The parameters $r_U$ and $r_D$ are constants, both assumed to be greater than 2.\n\nCalculate the maximum possible long-term average growth rate exponent, $G$, defined as $G = \\lim_{n \\to \\infty} \\frac{1}{n} \\ln\\left(\\frac{W_n}{W_0}\\right)$, where $W_n$ is the portfolio value after $n$ steps and $W_0$ is the initial value. Express your answer as a single closed-form analytic expression in terms of $r_U$ and $r_D$.",
            "solution": "The investor's goal is to maximize the long-term growth rate exponent $G = \\lim_{n \\to \\infty} \\frac{1}{n} \\ln\\left(\\frac{W_n}{W_0}\\right)$. By the law of large numbers, this is equivalent to maximizing the expected value of the logarithmic growth of the portfolio at each step, $E[\\ln(W_n/W_{n-1})]$.\n\nThe state of the system at the beginning of step $n$ is determined by the previous signal, $S_{n-1}$. Let the two states be 'U' (previous signal was 'Up') and 'D' (previous signal was 'Down'). The signal $S_n$ is generated by a fair coin, so the probability of $S_n$ being 'Up' is $p=1/2$, and the probability of it being 'Down' is $1-p=1/2$, regardless of the state.\n\nThe optimal strategy involves choosing an investment fraction $f$ that maximizes the expected log-growth for each state independently. Since the fair coin ensures that over a long period, states 'U' and 'D' will each be visited approximately half the time, the total long-term growth exponent $G$ will be the average of the maximum growth exponents achievable in each state.\n$G = \\frac{1}{2} G_U + \\frac{1}{2} G_D$, where $G_U$ and $G_D$ are the maximum single-step growth exponents starting from states 'U' and 'D' respectively.\n\nLet's first calculate $G_U$. We are in state 'U', so the previous signal was 'Up'. The return multiplier for a correct guess is $r_U$. Let $f_U$ be the fraction of the portfolio invested.\nThe investor can bet on either 'Up' or 'Down'. Since the coin is fair, both bets have a probability of success of $p=1/2$. The payout is the same for either correct guess. Let's assume the investor bets on 'Up'.\n- If the next signal $S_n$ is 'Up' (probability $1/2$), the portfolio becomes $W_n = W_{n-1}(1-f_U) + W_{n-1}f_U r_U = W_{n-1}(1 + f_U(r_U-1))$.\n- If the next signal $S_n$ is 'Down' (probability $1/2$), the bet is lost, and the portfolio becomes $W_n = W_{n-1}(1-f_U)$.\n\nThe expected log-growth in state 'U' is:\n$$g_U(f_U) = \\frac{1}{2} \\ln(1 + f_U(r_U-1)) + \\frac{1}{2} \\ln(1-f_U)$$\nTo find the optimal fraction $f_U^*$, we differentiate $g_U(f_U)$ with respect to $f_U$ and set the result to zero:\n$$\\frac{d g_U}{d f_U} = \\frac{1}{2} \\left( \\frac{r_U-1}{1 + f_U(r_U-1)} - \\frac{1}{1-f_U} \\right) = 0$$\n$$\\frac{r_U-1}{1 + f_U(r_U-1)} = \\frac{1}{1-f_U}$$\n$$(r_U-1)(1-f_U) = 1 + f_U(r_U-1)$$\n$$r_U - 1 - f_U(r_U-1) = 1 + f_U(r_U-1)$$\n$$r_U - 2 = 2f_U(r_U-1)$$\nSolving for the optimal fraction $f_U^*$:\n$$f_U^* = \\frac{r_U-2}{2(r_U-1)}$$\nSince we are given $r_U > 2$, $f_U^*$ is positive and less than 1, so it is a valid fraction.\n\nNow we substitute $f_U^*$ back into the expression for $g_U(f_U)$ to find the maximum growth exponent $G_U$:\nThe two multiplicative factors for the portfolio are:\n- Win: $1 + f_U^*(r_U-1) = 1 + \\frac{r_U-2}{2(r_U-1)}(r_U-1) = 1 + \\frac{r_U-2}{2} = \\frac{2+r_U-2}{2} = \\frac{r_U}{2}$.\n- Lose: $1 - f_U^* = 1 - \\frac{r_U-2}{2(r_U-1)} = \\frac{2(r_U-1) - (r_U-2)}{2(r_U-1)} = \\frac{2r_U-2-r_U+2}{2(r_U-1)} = \\frac{r_U}{2(r_U-1)}$.\n\nSo, the maximum growth exponent in state 'U' is:\n$$G_U = g_U(f_U^*) = \\frac{1}{2} \\ln\\left(\\frac{r_U}{2}\\right) + \\frac{1}{2} \\ln\\left(\\frac{r_U}{2(r_U-1)}\\right)$$\n$$G_U = \\frac{1}{2} \\ln\\left(\\frac{r_U}{2} \\cdot \\frac{r_U}{2(r_U-1)}\\right) = \\frac{1}{2} \\ln\\left(\\frac{r_U^2}{4(r_U-1)}\\right) = \\ln\\left(\\sqrt{\\frac{r_U^2}{4(r_U-1)}}\\right) = \\ln\\left(\\frac{r_U}{2\\sqrt{r_U-1}}\\right)$$\n\nBy symmetry, the calculation for state 'D' is identical, just replacing $r_U$ with $r_D$. The maximum growth exponent in state 'D' is:\n$$G_D = \\ln\\left(\\frac{r_D}{2\\sqrt{r_D-1}}\\right)$$\n\nThe overall long-term average growth rate exponent $G$ is the average of $G_U$ and $G_D$:\n$$G = \\frac{1}{2} G_U + \\frac{1}{2} G_D = \\frac{1}{2} \\left( \\ln\\left(\\frac{r_U}{2\\sqrt{r_U-1}}\\right) + \\ln\\left(\\frac{r_D}{2\\sqrt{r_D-1}}\\right) \\right)$$\nUsing the property $\\ln(a) + \\ln(b) = \\ln(ab)$:\n$$G = \\frac{1}{2} \\ln\\left( \\frac{r_U}{2\\sqrt{r_U-1}} \\cdot \\frac{r_D}{2\\sqrt{r_D-1}} \\right)$$\n$$G = \\frac{1}{2} \\ln\\left( \\frac{r_U r_D}{4\\sqrt{(r_U-1)(r_D-1)}} \\right)$$\nThis is the final expression for the maximum long-term growth rate exponent.",
            "answer": "$$\\boxed{\\frac{1}{2} \\ln\\left(\\frac{r_U r_D}{4\\sqrt{(r_U-1)(r_D-1)}}\\right)}$$"
        }
    ]
}