{
    "hands_on_practices": [
        {
            "introduction": "掌握了凯利判据的理论基础后，是时候通过一个具体的例子来实践它了。这个练习将引导你计算在一个具有明确成功概率和赔率的投资场景中的最优投资比例。通过解决这个问题，你将学会如何直接应用凯利公式来最大化你的长期资本增长率。",
            "id": "1663497",
            "problem": "一位投资者正在分析一种投机性数字资产，其价值与一个即将发生的单一二元事件相关联。根据她的模型，出现有利结果（“飙升”）的概率为 $1/3$。如果发生飙升，该投资将提供3比1的净回报。这意味着每投资一美元，投资者将收回其本金外加额外的3美元利润。如果结果不利（“崩盘”），全部投资金额将损失殆尽。\n\n假设投资者的目标是最大化其资本的长期预期增长率，并且她可以在每次这样的机会后将资本进行再投资，那么她应该将当前资本的多大比例投资于该资产才是最优的？\n\n请用一个简化的精确分数表示你的答案。",
            "solution": "设 $f$ 为每轮投资于该资产的当前资本比例。一轮过后的财富乘数是：\n- 飙升时（概率 $p = \\frac{1}{3}$）：$(1-f) + 4f = 1 + 3f$，\n- 崩盘时（概率 $1 - p = \\frac{2}{3}$）：$(1-f) + 0 \\cdot f = 1 - f$。\n\n为了在重复再投资的情况下最大化长期预期增长率，我们最大化预期对数增长（凯利准则）：\n$$\ng(f) = p \\ln(1 + 3f) + (1 - p) \\ln(1 - f).\n$$\n对 $f$ 求导并令其为零：\n$$\ng'(f) = p \\cdot \\frac{3}{1 + 3f} + (1 - p) \\cdot \\frac{-1}{1 - f} = 0.\n$$\n代入 $p = \\frac{1}{3}$：\n$$\n\\frac{1}{1 + 3f} - \\frac{2}{3} \\cdot \\frac{1}{1 - f} = 0.\n$$\n通过交叉相乘求解 $f$：\n$$\n\\frac{1}{1 + 3f} = \\frac{2}{3} \\cdot \\frac{1}{1 - f}\n\\;\\;\\Longrightarrow\\;\\;\n1 - f = \\frac{2}{3}(1 + 3f)\n\\;\\;\\Longrightarrow\\;\\;\n1 - f = \\frac{2}{3} + 2f.\n$$\n整理：\n$$\n1 - \\frac{2}{3} = 3f\n\\;\\;\\Longrightarrow\\;\\;\n\\frac{1}{3} = 3f\n\\;\\;\\Longrightarrow\\;\\;\nf = \\frac{1}{9}.\n$$\n检查凹性以确认是最大值：\n$$\ng''(f) = -p \\cdot \\frac{9}{(1 + 3f)^{2}} - (1 - p) \\cdot \\frac{1}{(1 - f)^{2}}  0\n$$\n对于所有在允许区间内的 $f$，该式都小于0，因此 $f = \\frac{1}{9}$ 是唯一的最大值点。由于 $0 \\leq \\frac{1}{9} \\leq 1$，该解是可行的。\n\n因此，最优的投资资本比例是 $\\frac{1}{9}$。",
            "answer": "$$\\boxed{\\frac{1}{9}}$$"
        },
        {
            "introduction": "在现实世界的金融分析中，我们有时需要反向推导。这个练习将挑战你从已知的最优投资策略反推市场所隐含的成功概率。这种逆向思维不仅能加深你对凯利公式各变量之间关系的理解，也模拟了量化分析师在评估模型和市场信号时的工作。",
            "id": "1663533",
            "problem": "一位量化分析师正在为一种高波动性的数字资产开发一种自动交易策略。该策略由一系列独立的交易组成。对于每笔交易，有两种可能的结果：“盈利”或“亏损”。盈利的交易产生的净利润等于投资金额的一个固定倍数，而亏损的交易则导致投资金额的完全损失。\n\n公司的资本管理模型旨在最大化投资组合的长期预期对数增长。该模型规定，在每笔交易中投资总可用资本的一个特定的、恒定的比例 $f^*$。\n\n根据历史数据和市场分析，已确定以下参数：\n- 盈利交易的赔付率，记为 $b$，为 $2$。这意味着一笔 `$X$` 的投资如果盈利，将产生 `$2X$` 的净利润。\n- 为最大化对数增长而计算出的每笔交易的最佳投资资本比例为 $f^* = 0.1$。\n\n假设每次交易的盈利概率 $p$ 是恒定的，确定 $p$ 的值。请用小数表示您的答案。",
            "solution": "设 $W$ 为当前资本。该交易策略涉及投资该资本的一部分，比例为 $f$。投资金额为 $fW$。\n\n每笔交易有两种结果：\n1.  **盈利**：这种情况发生的概率为 $p$。资本从 $W$ 变为 $W' = W - fW + (1+b)fW = W(1+bf)$。净利润为 $bfW$。\n2.  **亏损**：这种情况发生的概率为 $q = 1-p$。投资金额 $fW$ 将会损失。资本从 $W$ 变为 $W' = W - fW = W(1-f)$。\n\n该策略的目标是最大化资本的预期对数增长。单次交易的增长因子是 $W'/W$。我们希望最大化该增长因子的自然对数的期望值，这被称为增长率 $g(f)$。\n\n预期增长率由下式给出：\n$$g(f) = E[\\ln(W'/W)] = p \\ln(1+bf) + (1-p) \\ln(1-f)$$\n\n为了找到使该函数最大化的最优比例 $f^*$，我们对 $g(f)$ 关于 $f$ 求导，并令其等于零。\n$$\\frac{dg}{df} = \\frac{d}{df} [p \\ln(1+bf) + (1-p) \\ln(1-f)]$$\n使用链式法则进行微分，我们得到：\n$$\\frac{dg}{df} = p \\cdot \\frac{1}{1+bf} \\cdot b + (1-p) \\cdot \\frac{1}{1-f} \\cdot (-1)$$\n$$\\frac{dg}{df} = \\frac{pb}{1+bf} - \\frac{1-p}{1-f}$$\n\n对于最优比例 $f = f^*$，将导数设为零：\n$$\\frac{pb}{1+bf^*} - \\frac{1-p}{1-f^*} = 0$$\n$$\\frac{pb}{1+bf^*} = \\frac{1-p}{1-f^*}$$\n\n这个方程定义了最优比例 $f^*$，通常被称为凯利准则。我们已知 $f^* = 0.1$ 和 $b=2$，需要求解 $p$。\n\n将给定值代入方程：\n$$\\frac{p \\cdot 2}{1+2 \\cdot (0.1)} = \\frac{1-p}{1-0.1}$$\n$$\\frac{2p}{1+0.2} = \\frac{1-p}{0.9}$$\n$$\\frac{2p}{1.2} = \\frac{1-p}{0.9}$$\n\n现在我们来求解 $p$。我们可以交叉相乘：\n$$0.9 \\cdot (2p) = 1.2 \\cdot (1-p)$$\n$$1.8p = 1.2 - 1.2p$$\n\n现在，我们将所有包含 $p$ 的项移到等式的一边：\n$$1.8p + 1.2p = 1.2$$\n$$3.0p = 1.2$$\n\n最后，我们求解 $p$：\n$$p = \\frac{1.2}{3.0}$$\n$$p = 0.4$$\n\n因此，单次交易成功的潜在概率是 0.4。",
            "answer": "$$\\boxed{0.4}$$"
        },
        {
            "introduction": "凯利判据的真正力量在于它能够帮助我们在不同选项之间做出明智的决策。面对两个不同的投资机会，哪个在长期来看更有利可图？这个练习将要求你分别计算两个独立机会的最优增长率并进行比较，从而选择能够提供最高长期回报的那个。",
            "id": "1625793",
            "problem": "一位投资者正在分析两个独立的金融机会，这两个机会可以被建模为简化的博弈游戏。投资者的目标是选择能为其资本提供最高长期指数增长率的那个机会。这等同于最大化每次博弈后其财富比率（最终财富/初始财富）的自然对数的期望值。为实现这一最大增长率，投资者将始终押注其资本的最优比例。\n\n这两个机会描述如下：\n\n**游戏 A：** 在此机会上下注，成功的概率为 $p_A = 0.75$。成功的投注将获得所下注金额 $50\\%$ 的净回报。失败的投注将导致所下注金额的全部损失。\n\n**游戏 B：** 在此机会上下注，成功的概率为 $p_B = 0.40$。成功的投注将获得所下注金额 $200\\%$ 的净回报。失败的投注将导致所下注金额的全部损失。\n\n假设投资者必须只选择一个游戏重复进行，以下哪个陈述是正确的？\n\nA. 游戏 A 提供更高的最优增长率。\n\nB. 游戏 B 提供更高的最优增长率。\n\nC. 两个游戏提供相同的最优增长率。\n\nD. 两个游戏都不能实现财富的长期增长。",
            "solution": "假设一个重复的博弈有获胜概率 $p$，失败概率 $q=1-p$，以及净赔率 $b0$（获胜会将赌注乘以 $1+b$ 的总回报，即净回报为 $b$）。如果每轮下注财富的比例为 $f$，则每次博弈的财富乘数有 $p$ 的概率为 $1+b f$，有 $q$ 的概率为 $1-f$。凯利最优比例 $f^{\\ast}$ 最大化了期望对数增长\n$$\ng(f)=p\\,\\ln(1+b f)+q\\,\\ln(1-f).\n$$\n求导并令其为零：\n$$\ng'(f)=\\frac{p\\,b}{1+b f}-\\frac{q}{1-f}=0\n\\;\\;\\Longrightarrow\\;\\;\n\\frac{p\\,b}{1+b f}=\\frac{q}{1-f}.\n$$\n交叉相乘并求解 $f$ 可得 $p b(1-f)=q(1+b f) \\;\\Longrightarrow\\; p b - q = b f(p+q)$。由于 $p+q=1$，我们得到凯利公式：\n$$f^{\\ast}=\\frac{p b-q}{b}$$\n在这个 $f^{\\ast}$ 下，每次博弈的最优期望对数增长为\n$$\ng^{\\ast}=p\\,\\ln(1+b f^{\\ast})+q\\,\\ln(1-f^{\\ast}).\n$$\n\n应用到每个游戏中。\n\n游戏 A：$p_{A}=\\frac{3}{4}$，$q_{A}=\\frac{1}{4}$，$b_{A}=\\frac{1}{2}$。\n计算\n$$\nf^{\\ast}_{A}=\\frac{b_{A} p_{A}-q_{A}}{b_{A}}\n=\\frac{\\frac{1}{2}\\cdot\\frac{3}{4}-\\frac{1}{4}}{\\frac{1}{2}}\n=\\frac{\\frac{3}{8}-\\frac{2}{8}}{\\frac{1}{2}}\n=\\frac{\\frac{1}{8}}{\\frac{1}{2}}\n=\\frac{1}{4}.\n$$\n那么\n$$\n1+b_{A} f^{\\ast}_{A}=1+\\frac{1}{2}\\cdot\\frac{1}{4}=\\frac{9}{8},\\qquad\n1-f^{\\ast}_{A}=1-\\frac{1}{4}=\\frac{3}{4},\n$$\n所以\n$$\ng^{\\ast}_{A}\n=\\frac{3}{4}\\,\\ln\\!\\left(\\frac{9}{8}\\right)+\\frac{1}{4}\\,\\ln\\!\\left(\\frac{3}{4}\\right).\n$$\n数值上，\n$$\ng^{\\ast}_{A}\\approx \\frac{3}{4}\\cdot 0.117310925+\\frac{1}{4}\\cdot(-0.287682072)\\approx 0.0160626760.\n$$\n\n游戏 B：$p_{B}=\\frac{2}{5}$，$q_{B}=\\frac{3}{5}$，$b_{B}=2$。\n计算\n$$\nf^{\\ast}_{B}=\\frac{b_{B} p_{B}-q_{B}}{b_{B}}\n=\\frac{2\\cdot\\frac{2}{5}-\\frac{3}{5}}{2}\n=\\frac{\\frac{4}{5}-\\frac{3}{5}}{2}\n=\\frac{\\frac{1}{5}}{2}\n=\\frac{1}{10}.\n$$\n那么\n$$\n1+b_{B} f^{\\ast}_{B}=1+2\\cdot\\frac{1}{10}=\\frac{6}{5},\\qquad\n1-f^{\\ast}_{B}=1-\\frac{1}{10}=\\frac{9}{10},\n$$\n所以\n$$\ng^{\\ast}_{B}\n=\\frac{2}{5}\\,\\ln\\!\\left(\\frac{6}{5}\\right)+\\frac{3}{5}\\,\\ln\\!\\left(\\frac{9}{10}\\right).\n$$\n数值上，\n$$\ng^{\\ast}_{B}\\approx \\frac{2}{5}\\cdot 0.182321557+\\frac{3}{5}\\cdot(-0.105360516)\\approx 0.0097123130.\n$$\n\n比较：由于 $g^{\\ast}_{A}\\approx 0.01606$ 且 $g^{\\ast}_{B}\\approx 0.00971$，我们有 $g^{\\ast}_{A}g^{\\ast}_{B}$。因此，游戏 A 提供了更高的最优长期指数增长率。两个游戏在其凯利比例下都能实现正的长期增长，因此选项 C 和 D 是错误的，正确选项是 A。",
            "answer": "$$\\boxed{A}$$"
        }
    ]
}