{
    "hands_on_practices": [
        {
            "introduction": "掌握平稳分布的核心在于求解其定义方程。这项基础练习将引导你为一个简单的双状态系统建立并求解核心方程 $\\pi P = \\pi$，让你熟练掌握计算马尔可夫链长期均衡行为的基本方法。通过解决这个问题 ，你将打下坚实的基础。",
            "id": "1660504",
            "problem": "一个算法交易模型将股票的每日行为分为两种状态之一：状态1（上升趋势）或状态2（下降趋势）。该模型对次日状态的预测仅取决于当日的状态。如果股票今天处于上升趋势，那么它明天转移到下降趋势的概率是 $\\alpha$。如果股票今天处于下降趋势，那么它明天转移到上升趋势的概率是 $3\\alpha$。参数 $\\alpha$ 由市场状况决定，并受约束 $0  \\alpha  1/3$。\n\n在系统运行很长一段时间后，预计它将进入一个稳态。确定向量 $\\pi = [\\pi_1, \\pi_2]$，它分别代表股票长期处于上升趋势状态 ($\\pi_1$) 和下降趋势状态 ($\\pi_2$) 的天数比例。将你的答案表示为关于 $\\alpha$ 的函数。",
            "solution": "设这两个状态由 $1$ (上升趋势) 和 $2$ (下降趋势) 索引。以行为当前状态、列为下一状态的一步转移矩阵 $P$ 为\n$$\nP=\\begin{pmatrix}\n1-\\alpha  \\alpha \\\\\n3\\alpha  1-3\\alpha\n\\end{pmatrix},\n$$\n因为从状态 $1$ 开始，链以 $1-\\alpha$ 的概率停留在状态 $1$，以 $\\alpha$ 的概率转移到状态 $2$；而从状态 $2$ 开始，它以 $3\\alpha$ 的概率转移到状态 $1$，以 $1-3\\alpha$ 的概率停留在状态 $2$。约束 $0  \\alpha  1/3$ 确保了 $P$ 是一个对角线元素严格为正的随机矩阵，因此该马尔可夫链是不可约和非周期的，并拥有唯一的平稳分布。\n\n设 $\\pi=[\\pi_{1},\\pi_{2}]$ 表示平稳分布。根据定义，它满足 $\\pi=\\pi P$ 和归一化条件 $\\pi_{1}+\\pi_{2}=1$。从 $\\pi=\\pi P$ 写出平衡方程得到\n$$\n\\pi_{1}=\\pi_{1}(1-\\alpha)+\\pi_{2}(3\\alpha), \\quad \\pi_{2}=\\pi_{1}\\alpha+\\pi_{2}(1-3\\alpha).\n$$\n从第一个方程，\n$$\n\\pi_{1}-\\pi_{1}(1-\\alpha)=3\\alpha\\,\\pi_{2}\\;\\;\\Longrightarrow\\;\\;\\alpha\\,\\pi_{1}=3\\alpha\\,\\pi_{2}\\;\\;\\Longrightarrow\\;\\;\\pi_{1}=3\\pi_{2},\n$$\n其中我们利用 $\\alpha>0$ 将两边同除以 $\\alpha$。使用归一化条件 $\\pi_{1}+\\pi_{2}=1$，\n$$\n3\\pi_{2}+\\pi_{2}=1 \\;\\;\\Longrightarrow\\;\\; 4\\pi_{2}=1 \\;\\;\\Longrightarrow\\;\\; \\pi_{2}=\\frac{1}{4}, \\quad \\pi_{1}=\\frac{3}{4}.\n$$\n因此，每种状态的长期比例与 $\\alpha$ 无关（在给定范围内），等于 $[\\frac{3}{4},\\frac{1}{4}]$。",
            "answer": "$$\\boxed{\\begin{pmatrix} \\frac{3}{4}  \\frac{1}{4} \\end{pmatrix}}$$"
        },
        {
            "introduction": "在掌握了基本计算之后，学会识别能简化问题的特殊结构至关重要。这个问题  探索了一个具有特殊对称性的系统，其转移矩阵是“双随机”的。你会发现这种特性会导出一个非常简洁和直观的平稳分布，这展示了识别特殊性质在解决问题中的威力。",
            "id": "1660511",
            "problem": "一个自主维护机器人在一个由4台相同服务器（标记为S1、S2、S3和S4）组成的封闭网络中运行。机器人在服务器之间的移动可以被建模为一个离散时间马尔可夫链。系统的状态是机器人的当前位置。在每个时间步，如果机器人在某个特定的服务器上，它有概率 $p$ 在下一个时间步仍然停留在该服务器上。如果它决定移动，它会以相等的概率选择其他3台服务器中的任意一台。停留在当前服务器的概率为 $p = 0.4$。在系统运行了很长时间之后，它保证会达到一个稳态。确定平稳概率分布 $\\pi = (\\pi_1, \\pi_2, \\pi_3, \\pi_4)$，其中 $\\pi_i$ 是在服务器 $S_i$ 上找到该机器人的长期概率。将你的答案表示为一个概率行向量。",
            "solution": "设马尔可夫链的状态空间为 $S = \\{1, 2, 3, 4\\}$，分别对应服务器S1、S2、S3和S4。我们需要找到平稳分布 $\\pi = (\\pi_1, \\pi_2, \\pi_3, \\pi_4)$。\n\n首先，我们构建一步转移概率矩阵 $P$。元素 $P_{ij}$ 是从状态 $i$ 转移到状态 $j$ 的概率。\n\n问题陈述，停留在当前服务器的概率为 $p = 0.4$。这对应于矩阵的对角线元素：\n$P_{ii} = p = 0.4$，对于 $i \\in \\{1, 2, 3, 4\\}$。\n\n如果机器人决定移动，其发生的概率为 $1-p = 1 - 0.4 = 0.6$，它会以相等的概率选择其他3台服务器中的任意一台。因此，从服务器 $i$ 移动到另一个不同的服务器 $j$ 的概率为：\n$P_{ij} = \\frac{1-p}{3} = \\frac{0.6}{3} = 0.2$，对于 $i \\neq j$。\n\n因此，转移矩阵 $P$ 为：\n$$\nP = \\begin{pmatrix}\n0.4  0.2  0.2  0.2 \\\\\n0.2  0.4  0.2  0.2 \\\\\n0.2  0.2  0.4  0.2 \\\\\n0.2  0.2  0.2  0.4\n\\end{pmatrix}\n$$\n平稳分布 $\\pi$ 是一个满足以下两个条件的概率向量：\n1. $\\pi P = \\pi$\n2. $\\sum_{i=1}^{4} \\pi_i = 1$\n\n方程 $\\pi P = \\pi$ 给出了一个线性方程组：\n1. $0.4\\pi_1 + 0.2\\pi_2 + 0.2\\pi_3 + 0.2\\pi_4 = \\pi_1$\n2. $0.2\\pi_1 + 0.4\\pi_2 + 0.2\\pi_3 + 0.2\\pi_4 = \\pi_2$\n3. $0.2\\pi_1 + 0.2\\pi_2 + 0.4\\pi_3 + 0.2\\pi_4 = \\pi_3$\n4. $0.2\\pi_1 + 0.2\\pi_2 + 0.2\\pi_3 + 0.4\\pi_4 = \\pi_4$\n\n让我们分析第一个方程：\n$0.4\\pi_1 + 0.2(\\pi_2 + \\pi_3 + \\pi_4) = \\pi_1$\n$0.2(\\pi_2 + \\pi_3 + \\pi_4) = \\pi_1 - 0.4\\pi_1$\n$0.2(\\pi_2 + \\pi_3 + \\pi_4) = 0.6\\pi_1$\n$\\pi_2 + \\pi_3 + \\pi_4 = 3\\pi_1$\n\n根据归一化条件，我们知道 $\\pi_1 + \\pi_2 + \\pi_3 + \\pi_4 = 1$，这意味着 $\\pi_2 + \\pi_3 + \\pi_4 = 1 - \\pi_1$。\n将此代入我们导出的方程中：\n$1 - \\pi_1 = 3\\pi_1$\n$1 = 4\\pi_1$\n$\\pi_1 = \\frac{1}{4}$\n\n由于转移矩阵的对称性和问题的设定（所有服务器都是相同的），我们可以推断出所有平稳概率必须相等：$\\pi_1 = \\pi_2 = \\pi_3 = \\pi_4$。\n我们可以验证这一点。如果我们从第二个方程开始，我们会得到 $\\pi_1 + \\pi_3 + \\pi_4 = 3\\pi_2$，从而得出 $\\pi_2 = 1/4$，对于 $\\pi_3$ 和 $\\pi_4$ 也是如此。\n\n在归一化条件中使用关系 $\\pi_1 = \\pi_2 = \\pi_3 = \\pi_4$：\n$\\pi_1 + \\pi_1 + \\pi_1 + \\pi_1 = 1$\n$4\\pi_1 = 1$\n$\\pi_1 = \\frac{1}{4}$\n\n所以，平稳分布的所有分量都等于 $1/4$。\n平稳分布向量是 $\\pi = (\\frac{1}{4}, \\frac{1}{4}, \\frac{1}{4}, \\frac{1}{4})$。\n\n另外，可以注意到转移矩阵 $P$ 是双随机的。如果一个矩阵的行和与列和都为1，那么它就是双随机矩阵。\n- $P$ 的每一行之和为 $0.4 + 3 \\times 0.2 = 0.4 + 0.6 = 1$。对于转移矩阵而言，这总是成立的。\n- $P$ 的每一列之和也为 $1$。例如，第一列的和是 $P_{11} + P_{21} + P_{31} + P_{41} = 0.4 + 0.2 + 0.2 + 0.2 = 1$。\n\n对于有限状态、不可约且非周期的马尔可夫链，如果转移矩阵是双随机的，那么唯一的平稳分布是状态上的均匀分布。该链是不可约的，因为可以从任何一个服务器转移到任何其他服务器（所有非对角线元素都非零）。它是非周期的，因为停留在同一状态的概率非零（$P_{ii}  0$）。\n由于有 $N=4$ 个状态，均匀分布由 $\\pi_i = 1/N = 1/4$ 给出（对于所有 $i$）。\n这给出了相同的结果：$\\pi = (\\frac{1}{4}, \\frac{1}{4}, \\frac{1}{4}, \\frac{1}{4})$。\n作为概率的行向量，答案是 $\\begin{pmatrix} \\frac{1}{4}  \\frac{1}{4}  \\frac{1}{4}  \\frac{1}{4} \\end{pmatrix}$。",
            "answer": "$$\\boxed{\\begin{pmatrix} \\frac{1}{4}  \\frac{1}{4}  \\frac{1}{4}  \\frac{1}{4} \\end{pmatrix}}$$"
        },
        {
            "introduction": "最后一个练习将带你进入一个更复杂的场景：在一个立方体上的非均匀随机游走 。虽然一个拥有八个状态的系统可能看起来令人望而生畏，但解决问题的关键在于识别其潜在的对称性。这个问题将教会你利用状态聚合的巧妙技巧来简化复杂系统，这是解决现实世界中大规模问题的一项重要能力。",
            "id": "1660536",
            "problem": "一个粒子在一个单位立方体的八个顶点上进行离散时间随机游走。这些顶点由其坐标 $(x,y,z)$ 标识，其中 $x, y, z$ 的取值均为 0 或 1。在每一步中，当前位于顶点 $v$ 的粒子会移动到其三个相邻顶点之一。\n\n选择移动到哪个相邻顶点是概率性的，并且该选择会根据潜在目标顶点的 z 坐标产生偏向。具体来说，从当前顶点 $v$ 移动到特定相邻顶点 $u$ 的概率与赋予目标顶点 $u$ 的权重 $w(u)$ 成正比。该权重的定义如下：\n- 如果顶点 $u$ 的 z 坐标为 0，则 $w(u) = 1$。\n- 如果顶点 $u$ 的 z 坐标为 1，则 $w(u) = 2$。\n\n例如，如果一个位于顶点 $v$ 的粒子有三个相邻顶点 $u_1, u_2, u_3$，那么在下一步中转移到相邻顶点 $u_1$ 的概率由表达式 $\\frac{w(u_1)}{w(u_1) + w(u_2) + w(u_3)}$ 给出。\n\n经过很长时间后，粒子的位置将由一个关于这八个顶点的平稳概率分布来描述。计算粒子位于顶点 $(1,1,1)$ 的平稳概率。请将您的答案表示为最简有理数。",
            "solution": "用坐标 $(x,y,z)$ 标记八个顶点，其中 $x,y,z \\in \\{0,1\\}$。从任何一个顶点出发，其三个相邻顶点可通过翻转其一个坐标得到。从当前顶点 $v$ 转移到相邻顶点 $u$ 的转移概率与权重 $w(u)$ 成正比，其中如果 $u$ 的 z 坐标为 $0$，则 $w(u)=1$；如果为 $1$，则 $w(u)=2$。\n\n由于问题在 $x$ 和 $y$ 坐标上具有对称性，我们可以将八个顶点聚合为两个状态：$Z_0$（z 坐标为 0 的层，包含 4 个顶点）和 $Z_1$（z 坐标为 1 的层，包含 4 个顶点）。\n\n从 $Z_0$ 中的任意一个顶点出发：\n- 两个相邻顶点的 z 坐标保持为 0（翻转 x 或 y），权重均为 1。\n- 一个相邻顶点的 z 坐标变为 1（翻转 z），权重为 2。\n- 权重之和为 $1+1+2=4$。\n- 因此，从 $Z_0$ 转移到 $Z_1$ 的概率是 $\\frac{2}{4} = \\frac{1}{2}$，停留在 $Z_0$ 层的概率是 $\\frac{1+1}{4} = \\frac{1}{2}$。\n\n从 $Z_1$ 中的任意一个顶点出发：\n- 两个相邻顶点的 z 坐标保持为 1（翻转 x 或 y），权重均为 2。\n- 一个相邻顶点的 z 坐标变为 0（翻转 z），权重为 1。\n- 权重之和为 $2+2+1=5$。\n- 因此，从 $Z_1$ 转移到 $Z_0$ 的概率是 $\\frac{1}{5}$，停留在 $Z_1$ 层的概率是 $\\frac{2+2}{5} = \\frac{4}{5}$。\n\n这构成了一个关于聚合状态 $\\{Z_0, Z_1\\}$ 的两状态马尔可夫链，其转移矩阵为：\n$$\nP_{agg} = \\begin{pmatrix}\n1/2  1/2 \\\\\n1/5  4/5\n\\end{pmatrix}\n$$\n设 $q_0$ 和 $q_1$ 分别为粒子位于 $Z_0$ 层和 $Z_1$ 层的平稳概率。它们满足 $q_0+q_1=1$ 和 $(q_0, q_1)P_{agg} = (q_0, q_1)$。\n$$\nq_0 = \\frac{1}{2}q_0 + \\frac{1}{5}q_1 \\implies \\frac{1}{2}q_0 = \\frac{1}{5}q_1 \\implies q_0 = \\frac{2}{5}q_1.\n$$\n代入归一化条件：\n$$\n\\frac{2}{5}q_1 + q_1 = 1 \\implies \\frac{7}{5}q_1 = 1 \\implies q_1 = \\frac{5}{7}\n$$\n于是 $q_0 = \\frac{2}{7}$。\n$q_1 = 5/7$ 是粒子位于 z=1 层的总平稳概率。由于该层有 4 个对称的顶点，粒子位于其中任意一个顶点（包括 $(1,1,1)$）的概率是 $q_1/4$。\n$$\n\\pi(1,1,1) = \\frac{q_1}{4} = \\frac{5/7}{4} = \\frac{5}{28}.\n$$\n另外，该马尔可夫链满足细致平衡条件。设 z=0 和 z=1 层中顶点的平稳概率分别为 $\\pi_0$ 和 $\\pi_1$。考虑任意一条连接 z=0 顶点与 z=1 顶点的边，平衡条件为 $\\pi_0 P(0 \\to 1) = \\pi_1 P(1 \\to 0)$。我们有 $P(0 \\to 1) = 1/2$ 和 $P(1 \\to 0) = 1/5$，因此 $\\pi_0 \\cdot \\frac{1}{2} = \\pi_1 \\cdot \\frac{1}{5}$，即 $\\pi_1 = \\frac{5}{2}\\pi_0$。结合归一化条件 $4\\pi_0+4\\pi_1=1$ 可解得 $\\pi_1=\\frac{5}{28}$，结果与之前一致。",
            "answer": "$$\\boxed{\\frac{5}{28}}$$"
        }
    ]
}