{
    "hands_on_practices": [
        {
            "introduction": "在计算复杂性理论中，许多问题都涉及“全称”量词（“对于所有……”）。这类问题天然地导向了 co-NL 这个复杂性类。这个问题  提供了一个典型的例子，我们需要验证一个网络中所有可能的路径都满足某个安全属性。解决这类问题的关键在于分析其补问题，因为补问题通常具有“存在”量词的性质，这恰好与 NL 类的非确定性“猜测并验证”模型相契合。",
            "id": "1451607",
            "problem": "在计算复杂性理论中，我们分析解决判定问题所需的资源。考虑以下判定问题，我们称之为 `UNIVERSAL-SAFENET`。\n\n给定一个有向无环图（DAG）$G = (V, E)$，它表示服务器之间的单向数据通道网络。同时给定一个起始服务器 $s \\in V$ 和一个被指定为“安全终端”的特殊服务器子集 $T \\subseteq V$。该问题要求回答以下问题：是否所有从服务器 $s$ 开始并尽可能延伸的数据路径都必须在安全终端结束？\n\n一条数据路径是一系列相连的服务器。当路径到达一个没有出向通道的服务器（图中的汇点）时，该路径“结束”。\n\n形式上，`UNIVERSAL-SAFENET` 问题是：\n**输入：** 一个元组 $(G, s, T)$，其中 $G=(V,E)$ 是一个DAG，$s \\in V$，$T \\subseteq V$。\n**问题：** 是否所有从顶点 $s$ 开始的极大路径都结束于属于集合 $T$ 的顶点？\n\n根据复杂性类的标准定义，以下哪个陈述为 `UNIVERSAL-SAFENET` 问题提供了最准确和直接的分类？\n\n所提及的复杂性类是：\n- L：确定性图灵机上的对数空间。\n- NL：非确定性对数空间。\n- co-NL：其补问题在 NL 中的问题类。\n- PSPACE：确定性图灵机上的多项式空间。\n\nA. `UNIVERSAL-SAFENET` 在 L 中，因为一个对数空间机器可以确定性地遍历从 $s$ 出发的所有路径。\n\nB. `UNIVERSAL-SAFENET` 的补问题在 NL 中，根据定义，这意味着 `UNIVERSAL-SAFENET` 在 co-NL 中。\n\nC. `UNIVERSAL-SAFENET` 在 NL 中，因为一个非确定性机器可以猜测一条从 $s$ 出发的路径，并验证它结束于集合 $T$ 中的一个安全终端。\n\nD. `UNIVERSAL-SAFENET` 是 PSPACE-完全的，因为检查所有路径可能导致需要探索指数数量级的路线。",
            "solution": "这个问题的核心是通过分析 `UNIVERSAL-SAFENET` 问题的结构，并将其与复杂性类（特别是 NL 和 co-NL）的定义相关联，从而对该问题进行分类。\n\n**步骤 1：理解问题**\n`UNIVERSAL-SAFENET` 问题提出了一个“对所有”（全称）的问题：是否*每一条*从起始顶点 $s$ 出发的极大路径都具有特定属性（结束于集合 $T$ 中）？复杂性类 NL 天然适合于“存在”（存在性）问题，其中非确定性机器可以猜测一个证书（如一条路径）并进行验证。全称问题通常是 co-类（补类）的特征。\n\n**步骤 2：定义并分析补问题**\n要确定 `UNIVERSAL-SAFENET` 是否在 co-NL 中，我们必须分析其补问题，我们称之为 `NON-UNIVERSAL-SAFENET`。\n- `UNIVERSAL-SAFENET` 的“是”实例意味着所有从 $s$ 出发的极大路径都结束于 $T$ 中。\n- `UNIVERSAL-SAFENET` 的“否”实例意味着至少存在一条从 $s$ 出发的极大路径*不*结束于 $T$ 中。\n\n因此，补问题 `NON-UNIVERSAL-SAFENET` 是：\n**问题：** 是否*存在*至少一条从 $s$ 开始的极大路径，其结束于一个顶点 $v \\notin T$？\n\n**步骤 3：证明补问题在 NL 中**\n我们现在证明 `NON-UNIVERSAL-SAFENET` 可以由一台非确定性图灵机（NTM）仅使用对数空间来解决。输入规模 $n$ 与 $|V| + |E|$ 成正比。该 NTM 的算法如下：\n\n1.  初始化一个“当前顶点”指针 `curr`，指向起始顶点 $s$。这个指针需要 $O(\\log|V|)$ 的空间来存储。\n2.  在每一步，如果 `curr` 有出边，非确定性地选择其一个邻居，比如 $v'$，并将 `curr` 更新为 $v'$。\n3.  重复此过程。由于图是一个有向无环图（DAG），我们保证不会进入循环。一条路径的边数不会超过 $|V|-1$。可以使用一个计数器来跟踪路径长度以确保终止，这也使用 $O(\\log|V|)$ 的空间。\n4.  当 `curr` 指向一个汇点（没有出边）的顶点时，过程停止。设这个汇点顶点为 $v_{end}$。\n5.  机器然后检查 $v_{end} \\in T$ 是否成立。\n    - 如果 $v_{end} \\notin T$，机器成功找到了一条违反 `UNIVERSAL-SAFENET` 条件的路径。在这种情况下，NTM 接受。\n    - 如果 $v_{end} \\in T$，这个特定的非确定性计算分支未能找到反例，因此它拒绝。\n\n根据非确定性计算的定义，如果其*任何*一个计算分支接受，NTM 就接受该输入。这恰好发生在存在一条从 $s$ 出发的极大路径结束于 $T$ 之外的情况下。所使用的空间用于存储当前顶点和一个计数器，即 $O(\\log|V|)$，因此是 $O(\\log n)$。因此，`NON-UNIVERSAL-SAFENET` 在 NL 中。\n\n**步骤 4：对原始问题进行分类总结**\n由于 `UNIVERSAL-SAFENET` 的补问题在 NL 中，根据 co-NL 类的定义，`UNIVERSAL-SAFENET` 问题在 co-NL 中。\n\n**步骤 5：评估给定的选项**\n\n*   **A. `UNIVERSAL-SAFENET` 在 L 中，因为一个对数空间机器可以确定性地遍历从 $s$ 出发的所有路径。**\n    这是不正确的。一个确定性机器需要记录它已经探索了路径的哪些分支，这通常需要超过对数空间（例如，深度优先搜索需要一个栈）。\n\n*   **B. `UNIVERSAL-SAFENET` 的补问题在 NL 中，根据定义，这意味着 `UNIVERSAL-SAFENET` 在 co-NL 中。**\n    这是正确的。我们在步骤 2-4 中的分析证明了这一推理路线。这是基于问题的全称量词结构的最准确和直接的分类。\n\n*   **C. `UNIVERSAL-SAFENET` 在 NL 中，因为一个非确定性机器可以猜测一条从 $s$ 出发的路径，并验证它结束于集合 $T$ 中的一个安全终端。**\n    这是不正确的。这个逻辑将解决“是否存在一条从 $s$ 出发并结束于 $T$ 的路径？”的问题。它不能验证*所有*路径都如此。仅仅因为一条路径是“安全”的，并不意味着所有路径都是。\n\n*   **D. `UNIVERSAL-SAFENET` 是 PSPACE-完全的，因为检查所有路径可能导致需要探索指数数量级的路线。**\n    这是不正确的。虽然可能存在指数数量级的路径，但这个问题并没有那么难。它可以在确定性机器上用多项式时间解决（例如，使用动态规划或图遍历），所以它在 P 中。由于 P $\\subseteq$ PSPACE，除非 P = PSPACE，否则它不可能是 PSPACE-完全的。此外，我们的分析表明它在 co-NL 中，这是一个比 PSPACE 小得多的类。\n\n因此，选项 B 中提出的推理是基于问题定义的最忠实和最准确的分类。",
            "answer": "$$\\boxed{B}$$"
        },
        {
            "introduction": "理解了 co-NL 的定义后，我们来探讨它与 NL 之间的深刻联系。计算复杂性理论中的一个里程碑式定理——Immerman–Szelepcsényi 定理——证明了 $NL = co-NL$。这个练习  将展示这一定理的强大作用。我们将从一个明显属于 co-NL 的不可达性问题出发，看看这个定理如何让我们也能将其归入 NL 类中。",
            "id": "1451552",
            "problem": "考虑一个名为 `WEIGHT-CONSTRAINED-UNREACHABILITY` 的决策问题。其输入为一个元组 $\\langle G, s, t, k \\rangle$，其中 $G = (V, E)$ 是一个有 $n=|V|$ 个顶点的有向图，$s$ 和 $t$ 是 $V$ 中两个不同的顶点，$k$ 是一个正整数阈值。每条边 $e \\in E$ 都有一个相关的正整数权重 $w(e)$。一个实例 $\\langle G, s, t, k \\rangle$ 被定义为“是”实例，当且仅当不存在一条从顶点 $s$到顶点 $t$ 的路径，该路径完全由权重 $w(e)$ 严格小于 $k$ 的边 $e$ 组成。\n\n对于复杂度分析，假设输入是高效编码的。例如，图 $G$ 由邻接表给出，所有整数（顶点标签、权重和 $k$）都以二进制表示。总输入规模，记为 $N$，是关于 $n$ 以及表示最大权重和 $k$ 所需的比特数的多项式。\n\n下列哪个选项代表了已知包含 `WEIGHT-CONSTRAINED-UNREACHABILITY` 问题的最小复杂度类？\n\nA. P (可在确定性图灵机上于多项式时间内解决的问题类)\n\nB. co-NP (其补问题在非确定性多项式时间内的问题类)\n\nC. L (可在确定性图灵机上于对数空间内解决的问题类)\n\nD. NL (可在非确定性图灵机上于对数空间内解决的问题类)\n\nE. PSPACE (可在确定性图灵机上于多项式空间内解决的问题类)",
            "solution": "目标是确定已知包含 `WEIGHT-CONSTRAINED-UNREACHABILITY` 问题的最小复杂度类。\n\n首先，我们来分析问题定义。一个“是”实例对应的情况是，从一个起始顶点 $s$ 到一个目标顶点 $t$，*没有*只使用特定边子集的路径。允许的边是那些权重 $w(e)$ 严格小于给定阈值 $k$ 的边。\n\n这个问题可以通过将其与一个更标准的图问题关联起来进行简化。让我们从输入图 $G=(V, E)$ 构造一个新图 $G'=(V, E')$。顶点集 $V$ 保持不变。边集 $E'$ 只包含 $E$ 中满足权重约束的那些边。形式上，$E' = \\{ e \\in E \\mid w(e)  k \\}$。\n\n有了这个新图 $G'$，关于输入 $\\langle G, s, t, k \\rangle$ 的 `WEIGHT-CONSTRAINED-UNREACHABILITY` 问题就等价于回答这个问题：“在图 $G'$ 中是否**不**存在从 $s$ 到 $t$ 的路径？”\n\n这个新问题是标准 `PATH` 问题（也称为 `ST-CONNECTIVITY` 或 `STCON`）的补问题。`PATH` 问题询问的是在一个有向图中，两个指定顶点之间是否*存在*路径。我们所表述的问题是在图 $G'$ 上的 `NO-PATH`。\n\n有向图的 `PATH` 问题是复杂度类 NL (非确定性对数空间) 的典范完全问题。这意味着 `PATH` 在 NL 中，并且 NL 中的任何其他问题都可以通过对数空间归约到 `PATH`。\n\nco-NL 类被定义为所有其补集在 NL 中的语言的集合。由于我们的问题 `WEIGHT-CONSTRAINED-UNREACHABILITY` 等价于 `NO-PATH`（`PATH` 的补问题），而 `PATH` 在 NL 中，因此根据定义，我们的问题在 co-NL 中。\n\n复杂度理论中的一个基石性成果是 Immerman–Szelepcsényi 定理，该定理证明了 NL 在补运算下是闭合的。这意味着 NL = co-NL。\n\n因此，因为我们的问题在 co-NL 中，所以它也必然在 NL 中。有效使用 $G'$ 的过程不会增加空间复杂度。一台在对数空间内运行的非确定性图灵机可以解决这个问题。当从 $s$ 探索路径时，对于它考虑使用的每条边，它可以从输入带中读取该边的权重，并将其与 $k$ 进行比较。这只需要对数空间来存储指向输入的指针和 $k$ 的值。因此，`NO-PATH` 的算法（根据 NL=co-NL，存在一个 NL 算法）可以在“虚拟”图 $G'$ 上运行，而无需显式地构造它，从而保持在对数空间界限内。\n\n现在我们必须评估给定的选项，以找到已知包含该问题的最小类。已知的层级结构是 L ⊆ NL ⊆ P ⊆ PSPACE，以及 P ⊆ NP 和 P ⊆ co-NP。\n\nA. P：由于 NL ⊆ P，该问题在 P 中。然而，我们在寻找最小的此类，而 NL 是 P 的真子集，除非 P=NL，这是一个开放问题，但普遍认为是不成立的。\nB. co-NP：由于 NL ⊆ P ⊆ co-NP，该问题在 co-NP 中。但这不是最小的类。\nC. L：`PATH` 问题是 NL-完全的，并且尚不知道其是否在 L 中。据推测 L ≠ NL。因此，尚不知道 L 包含此问题。\nD. NL：我们已经确定该问题在 NL 中。\nE. PSPACE：由于 NL ⊆ PSPACE，该问题在 PSPACE 中，但这是一个比 NL 大得多的类。\n\n比较已知包含该问题的类（{NL, P, co-NP, PSPACE}），NL 是最小的。因此，NL 是正确答案。",
            "answer": "$$\\boxed{D}$$"
        },
        {
            "introduction": "$NL = co-NL$ 这个等式的影响远不止是简单地将两个复杂性类划上等号，它使得非确定性对数空间图灵机能够执行一些看似需要“计数”的复杂任务。这个问题  是一个更具挑战性的实践，它要求我们比较两个不同图中可达节点的数量。通过解决这个问题，我们将学会如何为其补问题（`EQUAL-REACH`）构造一个精巧的 NL 验证器，从而展示该定理在解决复杂组合问题时的威力。",
            "id": "1451560",
            "problem": "在网络分析中，经常需要比较不同网络拓扑的连通性属性。考虑两个通信网络，它们被建模为有向图 $G_1 = (V_1, E_1)$ 和 $G_2 = (V_2, E_2)$。在每个网络中，分别有一个指定的源服务器，$s_1 \\in V_1$ 和 $s_2 \\in V_2$。对于给定的图 $G$ 和起始顶点 $s$，令 $R(G, s)$ 表示从 $s$ 出发，经过零条或多条边的路径可以到达的所有顶点的集合。\n\n你的任务是分析一个名为 `UNEQUAL-REACH` 的特定判定问题。该问题以一个元组 $(G_1, G_2, s_1, s_2)$ 作为输入，并判定在 $G_1$ 中从 $s_1$ 可达的顶点数量是否不等于在 $G_2$ 中从 $s_2$ 可达的顶点数量。也就是说，该问题是判定是否 $|R(G_1, s_1)| \\neq |R(G_2, s_2)|$。\n\n以下是标准的计算复杂性类：\n- L: 确定性图灵机上的对数空间。\n- NL: 非确定性图灵机上的对数空间。\n- co-NL: 其补集在 NL 中的问题类。\n- P: 确定性图灵机上的多项式时间。\n- NP: 非确定性图灵机上的多项式时间。\n\n以下哪个选项代表了已知包含 `UNEQUAL-REACH` 问题的最具体（即在 L, NL, co-NL, P, NP 层次结构中最小）的复杂性类？\n\nA. L\n\nB. co-NL\n\nC. P\n\nD. NP",
            "solution": "问题要求找出 `UNEQUAL-REACH` 问题所属的最具体的已知复杂性类。`UNEQUAL-REACH` 问题是所有满足 $|R(G_1, s_1)| \\neq |R(G_2, s_2)|$ 的实例 $(G_1, G_2, s_1, s_2)$ 的集合。\n\n为了对 `UNEQUAL-REACH` 进行分类，我们首先考虑它的补集，我们称之为 `EQUAL-REACH`。\n`EQUAL-REACH` 问题是所有满足 $|R(G_1, s_1)| = |R(G_2, s_2)|$ 的实例 $(G_1, G_2, s_1, s_2)$ 的集合。\n根据定义，如果我们能证明 `EQUAL-REACH` 属于 NL 类（非确定性对数空间），那么 `UNEQUAL-REACH` 必然属于 co-NL 类。\n\n我们的目标是构建一台非确定性图灵机（NTM），它仅使用对数空间 $O(\\log n)$ 来解决 `EQUAL-REACH` 问题，其中 $n$ 是输入图的总大小。\n\n我们这台 NTM 的高层策略如下：\n1.  非确定性地猜测一个整数 $k$，其中 $0 \\leq k \\leq \\max(|V_1|, |V_2|)$。这个整数 $k$ 是我们对共同的可达顶点数的猜测。存储 $k$ 需要 $O(\\log |V|)$ 的空间，这在我们的对数空间限制内。\n2.  验证在 $G_1$ 中从 $s_1$ 可达的顶点数恰好为 $k$。\n3.  验证在 $G_2$ 中从 $s_2$ 可达的顶点数恰好为 $k$。\n4.  如果两次验证都成功，则机器接受。如果任何一次验证失败，则此非确定性路径拒绝。\n\n如果存在*任何*一个对 $k$ 的猜测，使得两个验证步骤都成功，则机器接受输入。这只在两个图中可达顶点的数量确实相同的情况下才可能发生。\n\n现在，我们必须证明验证步骤“验证 $|R(G, s)| = k$”可以在 NL 中完成。我们称这个子问题为 `EXACTLY-k-REACH`。这个子问题可以分解为两个必须同时为真的条件：\n(a) 可达顶点的数量至少为 $k$，即 $|R(G, s)| \\geq k$。\n(b) 可达顶点的数量至多为 $k$，即 $|R(G, s)| \\leq k$。\n\n让我们分析检查每个条件的复杂性。\n\n**条件 (a)：验证 $|R(G, s)| \\geq k$。**\n该语言是 $L_{\\geq k} = \\{ (G, s, k) \\mid |R(G,s)| \\ge k \\}$。一台 NTM 可以按如下方式判定它：\n1.  非确定性地从 $V$ 中猜测 $k$ 个不同的顶点：$v_1, v_2, \\dots, v_k$。\n2.  对于每个猜测的顶点 $v_i$（从 $i=1$ 到 $k$）：\n    a. 非确定性地猜测一条从 $s$ 到 $v_i$ 的路径。\n    b. 验证猜测的路径在 $G$ 中是有效的。\n3.  如果所有 $k$ 个顶点都不同，并且为每个顶点都找到了一条有效路径，则机器接受。否则，它在此路径上拒绝。\n\n所需的空间是对数级的。我们需要存储循环的计数器（上限为 $k$ 和路径长度，两者都 $\\le |V|$），以及当前正在检查的顶点的标识符。所有这些都可以在 $O(\\log |V| + \\log |E|)$ 空间内完成。因此，验证 $|R(G, s)| \\geq k$ 属于 NL。\n\n**条件 (b)：验证 $|R(G, s)| \\leq k$。**\n该语言是 $L_{\\leq k} = \\{ (G, s, k) \\mid |R(G,s)| \\le k \\}$。考虑该语言的补集 $\\overline{L_{\\leq k}}$。\n$\\overline{L_{\\leq k}} = \\{ (G, s, k) \\mid |R(G,s)|  k \\} = \\{ (G, s, k) \\mid |R(G,s)| \\ge k+1 \\}$。\n这个补集正是语言 $L_{\\geq k+1}$。根据我们对条件 (a) 的分析，我们知道 $L_{\\geq k+1}$ 属于 NL。\n因此，$L_{\\leq k}$ 属于 co-NL。\n\n复杂性理论中的一个里程碑式结果——Immerman-Szelepcsényi 定理——在此至关重要。该定理指出 NL = co-NL。这意味着任何在 co-NL 中的问题也在 NL 中。既然我们已经证明验证 $|R(G, s)| \\leq k$ 属于 co-NL，根据该定理，它也必然属于 NL。\n\n**关于 `EQUAL-REACH` 的结论：**\n验证 $|R(G, s)| = k$ 的问题需要检查 $|R(G, s)| \\geq k$（属于 NL）和 $|R(G, s)| \\leq k$（因 NL=co-NL 而属于 NL）是否同时成立。NL 类在交集运算下是封闭的，这意味着如果两种语言都在 NL 中，它们的交集也在 NL 中。一台 NTM 可以先为第一种语言运行机器，如果它接受，再为第二种语言运行机器。因此，`EXACTLY-k-REACH` 属于 NL。\n\n由于我们用于 `EQUAL-REACH` 的主算法的验证步骤属于 NL，且整个算法只是一个对 $k$ 的非确定性猜测，后跟两次这样的验证，所以整个 `EQUAL-REACH` 问题都属于 NL。\n\n**`UNEQUAL-REACH` 的最终分类：**\n由于 `EQUAL-REACH` 属于 NL，根据定义，其补集 `UNEQUAL-REACH` 属于 co-NL。\n\n现在我们评估给出的选项：\nA. L: 目前尚不清楚 `UNEQUAL-REACH` 是否在 L 中。证明这一点将意味着 L=NL，这是复杂性理论中一个主要的未解问题。因此，对于“已知包含”这个问题，这不大可能是正确答案。\nB. co-NL: 如上所证，`UNEQUAL-REACH` 属于此类。\nC. P: 该问题也属于 P。一个确定性的多项式时间算法是：在 $G_1$ 中从 $s_1$ 开始运行广度优先搜索（BFS）或深度优先搜索（DFS）来计算所有可达节点，对 $G_2$ 中的 $s_2$ 做同样的操作，然后比较这两个计数。这需要 $O(|V_1|+|E_1| + |V_2|+|E_2|)$ 的时间。由于 co-NL $\\subseteq$ P，这是一个正确但不够具体的分类。\nD. NP: 由于 P $\\subseteq$ NP，这也是一个有效但更不具体的类。\n\n问题要求的是*最具体*的已知复杂性类。已知的层次结构是 L $\\subseteq$ NL = co-NL $\\subseteq$ P $\\subseteq$ NP。由于我们已经证明该问题属于 co-NL，并且 co-NL 是比 P 和 NP 更小的类，因此在正确选项（B, C, D）中，co-NL 是最具体的类。\n\n因此，在所提供的选项中，co-NL 是对 `UNEQUAL-REACH` 最紧凑的分类。",
            "answer": "$$\\boxed{B}$$"
        }
    ]
}