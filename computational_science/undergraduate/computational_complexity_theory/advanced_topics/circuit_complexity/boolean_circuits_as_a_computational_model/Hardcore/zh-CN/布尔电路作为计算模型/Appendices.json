{
    "hands_on_practices": [
        {
            "introduction": "在数字逻辑中，一个关键概念是“功能完备性”——仅使用一种或几种基本逻辑门就能构建任何可能的布尔函数。NAND门是这种通用构建模块的经典例子。本练习将通过一个基本但至关重要的电路元件——2-to-1多路选择器（MUX）——让你亲身实践这一思想，挑战你用最少的NAND门来实现其功能。这不仅是数字设计的核心技能，也揭示了电路优化的根本目标：用最少的资源实现所需的功能。",
            "id": "1413448",
            "problem": "在数字逻辑设计和计算理论中，如果任何任意的布尔函数都可以仅使用某个逻辑门集合中的门来表示，那么该集合就被称为“功能完备的”。双输入与非门（NAND gate），其定义为 $x \\text{ NAND } y = \\neg(x \\land y)$，就构成了这样一个功能完备集。\n\n考虑二选一多路复用器（MUX），它是数字电路中的一个基本元件。多路复用器从多个模拟或数字输入信号中选择一个，并将选定的输入转发到单条线路上。一个二选一多路复用器有两个数据输入 $a$ 和 $b$，一个选择输入 $s$，以及一个输出 $f$。其逻辑行为由以下布尔函数定义：\n$$f(s, a, b) = (\\neg s \\land a) \\lor (s \\land b)$$\n这意味着如果 $s=0$，输出为 $a$；如果 $s=1$，输出为 $b$。\n\n你的任务是确定实现这个二选一多路复用器函数 $f(s, a, b)$ 所需的双输入与非门的最少数量。\n\n下列哪个选项代表了所需门的最少数量？\nA. 3\n\nB. 4\n\nC. 5\n\nD. 6\n\nE. 7",
            "solution": "我们要仅使用双输入与非门（其中 $\\operatorname{NAND}(x,y)=\\neg(x\\land y)$）来实现二选一多路复用器函数\n$$\nf(s,a,b)=(\\neg s \\land a)\\lor(s\\land b)\n$$\n\n使用四个与非门进行合成（证明其数量是足够的）：\n1) 使用一个与非门来获得选择输入的反相：\n$$\n\\neg s=\\operatorname{NAND}(s,s)=\\neg(s\\land s).\n$$\n2) 以反相（与非）形式构建两个乘积项：\n$$\nx=\\operatorname{NAND}(a,\\neg s)=\\neg(a\\land\\neg s),\\qquad y=\\operatorname{NAND}(b,s)=\\neg(b\\land s).\n$$\n3) 用最后一个与非门将它们组合起来：\n$$\nf=\\operatorname{NAND}(x,y)=\\neg(x\\land y)=\\neg\\big(\\neg(a\\land\\neg s)\\land\\neg(b\\land s)\\big).\n$$\n使用德摩根定律 $\\neg(\\neg P\\land\\neg Q)=P\\lor Q$，上式变为\n$$\nf=(a\\land\\neg s)\\lor(b\\land s),\n$$\n这正是所需的多路复用器函数。该构造使用了四个与非门：一个用于 $\\neg s$，一个用于 $x$，一个用于 $y$，以及最后一个用于 $f$ 的门。\n\n最小性证明（为什么三个与非门是不够的）：\n采用反证法，假设 $f$ 可以仅用三个双输入与非门实现。那么，输出必定是另外两个门的输出 $X$ 和 $Y$ 的与非结果：\n$$\nf=\\operatorname{NAND}(X,Y)=\\neg(X\\land Y).\n$$\n由于 $f$ 同时依赖于 $a$ 和 $b$，不失一般性，这两个前级门必须一个包含 $a$，另一个包含 $b$。因此，存在信号 $u$ 和 $v$（它们是 $s,a,b$ 的函数），使得\n$$\nX=\\operatorname{NAND}(a,u)=\\neg(a\\land u),\\qquad Y=\\operatorname{NAND}(b,v)=\\neg(b\\land v).\n$$\n因此，\n$$\nf=\\neg\\big(\\neg(a\\land u)\\land\\neg(b\\land v)\\big)=(a\\land u)\\lor(b\\land v).\n$$\n现在，对于所有输入，强制该表达式与 MUX 函数相等：\n- 设置 $a=1$ 和 $b=0$。MUX 函数给出 $f=\\neg s$。上述表达式化简为 $f=u$。因此 $u=\\neg s$。\n- 设置 $a=0$ 和 $b=1$。MUX 函数给出 $f=s$。表达式化简为 $f=v$。因此 $v=s$。\n因此，两个前级门必须实际上计算 $\\operatorname{NAND}(a,\\neg s)$ 和 $\\operatorname{NAND}(b,s)$，这要求 $s$ 和 $\\neg s$ 都必须是可用的信号。由于只有 $s$ 是原始输入，生成 $\\neg s$ 至少需要一个与非门（具体来说是 $\\operatorname{NAND}(s,s)$）。在总共只有三个门的情况下，一个门是最终的与非门，一个门必须用于对 $s$ 取反，这样只剩下一个门来同时产生 $\\operatorname{NAND}(a,\\neg s)$ 和 $\\operatorname{NAND}(b,s)$，这对于双输入与非门来说是不可能的。这个矛盾表明三个与非门是不够的。\n\n因此，所需的双输入与非门的最少数量是四个，对应选项 B。",
            "answer": "$$\\boxed{B}$$"
        },
        {
            "introduction": "布尔电路不仅能实现逻辑决策，还能执行算术运算，这是现代计算的基础。这个练习将指导你设计一个能计算两位二进制数平方的电路。你需要将一个算术问题分解为多个独立的布尔函数（每个输出位对应一个），并为每个函数找到最简化的逻辑表达式。通过这个过程，你将掌握将高级功能规范转化为底层门级实现的核心方法。",
            "id": "1413466",
            "problem": "考虑一个用于计算2位非负整数平方的数字电路。输入是一个2位二进制数，由比特 $x_1x_0$ 表示，其对应的整数值为 $V = 2x_1 + x_0$。电路的输出是一个4位二进制数，由比特 $y_3y_2y_1y_0$ 表示，其对应的整数值为 $V^2 = 8y_3 + 4y_2 + 2y_1 + y_0$。\n\n每个输出比特 $y_i$ 都可以表示为输入比特 $x_1$ 和 $x_0$ 的布尔函数。你的任务是为这四个函数中的每一个找到最小表示。具体来说，你必须确定每个函数 $y_3, y_2, y_1,$ 和 $y_0$ 的最小析取范式（DNF）。最小DNF被定义为包含最少可能文字总数的DNF表达式。一个文字（literal）是一个变量或其否定（例如，$x_1$ 和 $\\neg x_0$ 都是文字）。\n\n计算所有四个输出函数的最小DNF表示中出现的文字总数。",
            "solution": "设输入比特为 $x_{1},x_{0}\\in\\{0,1\\}$，其值为 $V=2x_{1}+x_{0}$。输出比特 $y_{3}y_{2}y_{1}y_{0}$ 编码 $V^{2}$，其中 $V^{2}=8y_{3}+4y_{2}+2y_{1}+y_{0}$。计算所有四种输入组合的 $V^{2}$：\n- 对于 $(x_{1},x_{0})=(0,0)$，$V=0$，所以 $V^{2}=0\\Rightarrow y_{3}y_{2}y_{1}y_{0}=0000$。\n- 对于 $(x_{1},x_{0})=(0,1)$，$V=1$，所以 $V^{2}=1\\Rightarrow y_{3}y_{2}y_{1}y_{0}=0001$。\n- 对于 $(x_{1},x_{0})=(1,0)$，$V=2$，所以 $V^{2}=4\\Rightarrow y_{3}y_{2}y_{1}y_{0}=0100$。\n- 对于 $(x_{1},x_{0})=(1,1)$，$V=3$，所以 $V^{2}=9\\Rightarrow y_{3}y_{2}y_{1}y_{0}=1001$。\n\n将每个输出比特读作 $x_{1},x_{0}$ 的布尔函数，并最小化为DNF（文字合取的析取）：\n1. 对于 $y_{0}$：对于输入 $(00,01,10,11)$，其值分别为 $0,1,0,1$。这等于 $V$ 的奇偶性，也即 $x_{0}$。最小DNF为\n$$\ny_{0}=x_{0},\n$$\n它有 $1$ 个文字。\n\n2. 对于 $y_{1}$：其值恒为 $0$。最小DNF是常量\n$$\ny_{1}=0,\n$$\n它使用 $0$ 个文字。\n\n3. 对于 $y_{2}$：仅当 $(x_{1},x_{0})=(1,0)$ 时其值为 $1$。唯一的质蕴涵项是最小项\n$$\ny_{2}=x_{1}\\land\\lnot x_{0},\n$$\n它有 $2$ 个文字，并且不能进一步化简，因为它覆盖了一个单一孤立的 $1$。\n\n4. 对于 $y_{3}$：仅当 $(x_{1},x_{0})=(1,1)$ 时其值为 $1$。唯一的质蕴涵项是最小项\n$$\ny_{3}=x_{1}\\land x_{0},\n$$\n它有 $2$ 个文字，并且已经是最简的。\n\n将最小DNF中的文字数量相加：$1+0+2+2=5$。",
            "answer": "$$\\boxed{5}$$"
        },
        {
            "introduction": "在计算复杂性理论中，我们不仅关心一个函数是否可以被计算，更关心计算它需要多少资源。电路的“规模”（即门的总数）是衡量其复杂性的一个关键指标。本练习以奇偶校验函数（Parity）为例，让你比较两种截然不同的电路实现方式：一种是利用其代数性质构建的巧妙的XOR树，另一种是基于其真值表直接生成的规范析取范式（DNF）。通过分析这两种设计的规模差异，你将深刻体会到电路结构对计算效率的巨大影响，这也是电路复杂性研究的核心问题之一。",
            "id": "1413469",
            "problem": "在计算复杂性理论的研究中，布尔电路为数字逻辑提供了一种形式化模型。考虑设计用于计算$n$位奇偶校验函数 $\\text{PARITY}_n(x_1, \\dots, x_n)$ 的电路，该函数在输入串中1的个数为奇数时输出1，否则输出0。\n\n所有电路都将使用由双输入与门和双输入或门构成的基底来构建。电路的规模定义为这些门的总数。在电路构建中，可以假设对于每个输入变量 $x_i$，其非 $\\neg x_i$ 也可作为输入，且无需成本（即，用于输入的非门不计入电路规模）。\n\n我们将比较奇偶校验函数的两种不同实现的规模。设 $S_{\\text{XOR}}(n)$ 为第一种实现的规模，$S_{\\text{DNF}}(n)$ 为第二种实现的规模。\n\n1.  **异或树实现：** 奇偶校验函数等价于其输入的链式异或（XOR）：$x_1 \\oplus x_2 \\oplus \\dots \\oplus x_n$。这种结构可以通过一个包含 $n-1$ 个双输入异或门的平衡二叉树来实现。每个双输入异或门 $a \\oplus b$ 可以使用标准基底通过恒等式 $a \\oplus b \\equiv (a \\land \\neg b) \\lor (\\neg a \\land b)$ 来构建。\n\n2.  **范式DNF实现：** 该函数通过首先将其表示为其范式析取范式（Canonical DNF）来实现。范式DNF是所有使函数求值为1的最小项的逻辑或。一个最小项是所有 $n$ 个输入文字的逻辑与（例如，对于 $n>2$，$x_1 \\land \\neg x_2 \\land \\dots \\land x_n$）。然后使用与门和或门构成的树形结构来构建电路，以实现此DNF表达式。\n\n对于 $n \\ge 2$，确定电路规模的比率 $\\frac{S_{\\text{DNF}}(n)}{S_{\\text{XOR}}(n)}$。请用一个关于 $n$ 的闭式解析表达式来表示你的答案。",
            "solution": "问题要求计算 $n$ 位奇偶校验函数两种不同实现的电路规模之比，$S_{\\text{DNF}}(n) / S_{\\text{XOR}}(n)$。我们需要分别计算每种电路的规模。电路规模是双输入与门和双输入或门的总数。我们假设输入变量 $x_i$ 及其非 $\\neg x_i$ 是免费提供的。\n\n**步骤1：计算异或树实现的规模 $S_{\\text{XOR}}(n)$**\n\n第一种实现使用一个包含 $n-1$ 个双输入异或门的平衡二叉树来计算 $x_1 \\oplus x_2 \\oplus \\dots \\oplus x_n$。我们需要计算由我们的基底门构建的单个双输入异或门 $a \\oplus b$ 的规模。\n\n题目给出了恒等式：$a \\oplus b \\equiv (a \\land \\neg b) \\lor (\\neg a \\land b)$。\n为了实现这个表达式，我们需要：\n- 一个与门用于项 $(a \\land \\neg b)$。\n- 一个与门用于项 $(\\neg a \\land b)$。\n- 一个或门用于合并这两项：$(a \\land \\neg b) \\lor (\\neg a \\land b)$。\n\n输入 $a$、$\\neg a$、$b$ 和 $\\neg b$ 无需成本即可获得。因此，一个双输入异或门需要2个与门和1个或门，总共3个门。\n\n整个电路由 $n-1$ 个这样的异或门组成。因此，异或树实现的总规模是：\n$$S_{\\text{XOR}}(n) = (n-1) \\times (\\text{单个异或门的规模}) = 3(n-1)$$\n\n**步骤2：计算范式DNF实现的规模 $S_{\\text{DNF}}(n)$**\n\nDNF实现是基于奇偶校验函数的范式析取范式构建的。该范式由所有使函数值为1的输入所对应的最小项的逻辑或组成。\n\n首先，我们必须确定这些最小项的数量。奇偶校验函数为1，当且仅当输入串 $(x_1, \\dots, x_n)$ 中1的个数为奇数。具有恰好 $k$ 个1的 $n$ 位串的数量由二项式系数 $\\binom{n}{k}$ 给出。最小项的总数 $N_{\\text{minterms}}$ 是这些计数在所有奇数 $k$ 值上的总和：\n$$N_{\\text{minterms}} = \\binom{n}{1} + \\binom{n}{3} + \\binom{n}{5} + \\dots$$\n\n为了计算这个和，我们使用 $(1+x)^n$ 的二项式展开：\n$$(1+x)^n = \\sum_{k=0}^{n} \\binom{n}{k} x^k = \\binom{n}{0} + \\binom{n}{1}x + \\binom{n}{2}x^2 + \\dots$$\n令 $x=1$ 得：$2^n = \\binom{n}{0} + \\binom{n}{1} + \\binom{n}{2} + \\dots$\n令 $x=-1$ 得：$0^n = \\binom{n}{0} - \\binom{n}{1} + \\binom{n}{2} - \\dots$（对于 $n \\ge 1$）\n\n将第一个方程减去第二个方程：\n$$2^n - 0 = \\left(\\binom{n}{0} + \\binom{n}{1} + \\dots\\right) - \\left(\\binom{n}{0} - \\binom{n}{1} + \\dots\\right)$$\n$$2^n = 2\\binom{n}{1} + 2\\binom{n}{3} + 2\\binom{n}{5} + \\dots = 2 \\times N_{\\text{minterms}}$$\n因此，最小项的数量是 $N_{\\text{minterms}} = 2^{n-1}$。\n\n现在我们计算实现这个DNF所需的门数。该DNF是 $2^{n-1}$ 个最小项的或运算。每个最小项是 $n$ 个文字的与运算。\n- **用于最小项的与门：** 每个最小项是 $n$ 个文字的合取。要使用双输入与门计算一个 $n$ 输入的与运算，我们需要一个包含 $n-1$ 个门的二叉树。由于有 $N_{\\text{minterms}} = 2^{n-1}$ 个这样的最小项，与门的总数是：\n$$(\\text{每个最小项的门数}) \\times (\\text{最小项数量}) = (n-1) \\times 2^{n-1}$$\n- **用于最终析取的或门：** DNF是 $N_{\\text{minterms}} = 2^{n-1}$ 个项（与门子电路的输出）的析取。要使用双输入或门计算 $2^{n-1}$ 个输入的或运算，我们需要一个包含 $2^{n-1}-1$ 个门的二叉树。\n\nDNF电路的总规模是与门和或门数量的总和：\n$$S_{\\text{DNF}}(n) = (n-1)2^{n-1} + (2^{n-1}-1)$$\n我们可以简化这个表达式：\n$$S_{\\text{DNF}}(n) = n \\cdot 2^{n-1} - 2^{n-1} + 2^{n-1} - 1 = n \\cdot 2^{n-1} - 1$$\n\n**步骤3：计算比率**\n\n最后，我们计算比率 $\\frac{S_{\\text{DNF}}(n)}{S_{\\text{XOR}}(n)}$。\n$$ \\frac{S_{\\text{DNF}}(n)}{S_{\\text{XOR}}(n)} = \\frac{n \\cdot 2^{n-1} - 1}{3(n-1)} $$\n这个表达式对于 $n \\ge 2$ 成立。",
            "answer": "$$\\boxed{\\frac{n \\cdot 2^{n-1} - 1}{3(n-1)}}$$"
        }
    ]
}