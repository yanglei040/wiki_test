{
    "hands_on_practices": [
        {
            "introduction": "Toda 定理的核心论断是 $PH \\subseteq P^{\\#P}$，它在计算复杂性理论中建立了逻辑量化（多项式层级）和计数（$\\#P$）之间的深刻联系。为了真正理解这一定理的意义，我们首先需要确保我们对其基本陈述有扎实的掌握。本练习  旨在通过一个直接的逻辑推导，帮助你巩固对多项式层级（PH）定义以及 Toda 定理本身如何应用于其特定层级的理解。",
            "id": "1467179",
            "problem": "在计算复杂性理论中，我们根据解决问题所需的资源对问题进行分类。让我们定义几个关键概念。\n- $P$类包含所有可以由确定性图灵机在多项式时间内解决的判定问题。\n- $\\#P$类（读作“sharp-P”）是一个函数问题类，而非判定问题类。对于$NP$类中的一个给定问题，相应的$\\#P$问题是计算其接受计算路径的数量。\n- 预言机是一种带有“黑盒”（即预言）的图灵机，它可以在一个步骤内解决来自特定复杂度类的问题。$P^C$类表示可以由带有C类预言的确定性图灵机在多项式时间内解决的判定问题集合。因此，$P^{\\#P}$是可以由一个带有能解决$\\#P$中任何计数问题的预言的机器在多项式时间内解决的判定问题类。\n- 多项式谱系（PH）是一个复杂度类的层级结构，它推广了$P$、$NP$和co-$NP$等类。它被定义为 $PH = \\bigcup_{k \\ge 0} \\Sigma_k^P$，其中$\\Sigma_k^P$代表该谱系的第k层。根据定义，$\\Sigma_0^P = P$，$\\Sigma_1^P = NP$，并且对于 $k > 1$，$\\Sigma_k^P$包含可以由带有$\\Sigma_{k-1}^P$预言的非确定性多项式时间机器解决的问题。\n\n该领域一个著名的结果是Toda定理，其表述如下：\n$$ PH \\subseteq P^{\\#P} $$\n\n根据这些定义和Toda定理的陈述，下列哪个选项为包含关系 $\\Sigma_2^P \\subseteq P^{\\#P}$ 为何成立提供了最直接和准确的推理？\n\nA. 根据定义，$\\Sigma_2^P$类是构成多项式谱系（$PH$）的层级之一。由于Toda定理指出整个$PH$都包含在$P^{\\#P}$内，因此谱系的任何单个层级，包括$\\Sigma_2^P$，也必然包含在$P^{\\#P}$内。\n\nB. Toda定理表明，在多项式谱系的第二层，计数问题从根本上说不比判定问题更难。因此，$P^{\\#P}$中的任何问题都可以归约到$\\Sigma_2^P$中的一个问题，这意味着$\\Sigma_2^P \\subseteq P^{\\#P}$。\n\nC. $\\Sigma_2^P$类等价于可用$\\#P$预言机解决的问题类。Toda定理证明了此等价性，形式上表述为$\\Sigma_2^P = P^{\\#P}$，由此可得包含关系$\\Sigma_2^P \\subseteq P^{\\#P}$是一个平凡的推论。\n\nD. 多项式谱系的定义是 $PH = \\bigcup_{k \\ge 0} \\Sigma_k^P$。Toda定理指出 $PH \\subseteq P^{\\#P}$。这意味着多项式谱系的某些（但不一定是全部）层级$\\Sigma_k^P$包含在$P^{\\#P}$中。Toda定理的具体证明显示$k=2$是这样一种情况。\n\nE. $\\Sigma_2^P$类被定义为$NP^{NP}$。由于$\\#P$中的问题涉及计算$NP$机中的路径数量，因此可以得出，带有$\\#P$预言的机器比带有$NP$预言的$NP$机更强大。这种能力差异直接蕴含了包含关系$\\Sigma_2^P \\subseteq P^{\\#P}$。",
            "solution": "我们仅使用定义和Toda定理所蕴含的集合论包含关系。\n\n根据多项式谱系的定义，\n$$\nPH=\\bigcup_{k \\ge 0}\\Sigma_{k}^{P}.\n$$\n对于任意集合族 $\\{S_{k}\\}_{k \\ge 0}$ 和任意固定索引 $j$，并集的基本性质意味着\n$$\nS_{j} \\subseteq \\bigcup_{k \\ge 0} S_{k}.\n$$\n将此应用于 $S_{k}=\\Sigma_{k}^{P}$ 和 $j=2$，我们得到\n$$\n\\Sigma_{2}^{P} \\subseteq PH.\n$$\nToda定理指出\n$$\nPH \\subseteq P^{\\#P}.\n$$\n根据集合包含的传递性，即若 $A \\subseteq B$ 且 $B \\subseteq C$ 则 $A \\subseteq C$，我们得出结论\n$$\n\\Sigma_{2}^{P} \\subseteq PH \\subseteq P^{\\#P} \\quad \\Rightarrow \\quad \\Sigma_{2}^{P} \\subseteq P^{\\#P}.\n$$\n在给出的选项中，这正是选项A中所阐述的推理。选项B、C、D和E要么颠倒了包含关系的方向，要么断言了一个未被证明的等价性，要么误解了并集包含的含义，要么依赖于非形式化的能力比较而非引用的定理。",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "理解了 Toda 定理的抽象陈述后，一个自然的问题是：一个带有计数预言机（counting oracle）的 $P$ 级图灵机在实践中是如何工作的？本练习  将这个抽象概念具体化。它通过一个经典的 NP 完全问题——图的 3-着色问题——展示了如何利用一个能返回有效着色方案数量的 $\\#P$ 预言机来解决一个判定问题，从而让你亲身体验从“判定”到“计数”的思维转变。",
            "id": "1467193",
            "problem": "在计算复杂性理论领域，Toda 定理指出，多项式层级 (PH) 中的任何问题都可以由一台能够访问计数预言机（一个称为 $P^{\\#P}$ 的复杂性类）的多项式时间机器解决。考虑经典的 **NP**-完全决策问题 3-着色问题：给定一个简单无向图，能否用三种颜色之一对其顶点进行着色，使得没有两个相邻顶点共享相同的颜色？\n\n一位计算机科学家旨在通过使用一个特殊的硬件预言机来解决输入图 $G=(V, E)$ 的 3-着色决策问题。这个名为 `COUNT_3_COLOR` 的预言机，接收任何图 $G'$ 作为输入，并在单一步骤内返回 $G'$ 的不同有效3-着色的确切数量。\n\n这位科学家的算法如下：\n1.  取输入图 $G$。\n2.  构建一个新的、修改后的图 $G_{mod}$。\n3.  调用预言机以找到 $C_{mod} = \\text{COUNT\\_3\\_COLOR}(G_{mod})$。\n4.  使用 $C_{mod}$ 的值计算原始图 $G$ 的有效3-着色数 $C_{orig}$。\n5.  当且仅当 $C_{orig} > 0$ 时，断定 $G$ 是可3-着色的。\n\n从 $G$ 构建 $G_{mod}$ 的方法如下：首先，创建一个“锚”部件。该部件由四个新顶点集合 $A = \\{a_1, a_2, a_3, a_4\\}$ 组成，这些顶点连接成一条路径（即，包含边 $(a_1, a_2)$、$(a_2, a_3)$ 和 $(a_3, a_4)$）。然后，从原始图的顶点集 $V$ 中任意选择一个顶点 $v_0$，并将其连接到锚路径的一个端点，即 $a_1$。得到的图即为 $G_{mod}$。\n\n已知着色数量之间的关系是直接的乘法关系：$C_{mod} = K \\cdot C_{orig}$，其中 $K$ 为某个整数常数。请确定科学家必须用来计算 $C_{orig}$ 作为 $C_{mod}$ 函数的解析表达式。",
            "solution": "我们分析原始图 $G$ 的每一种有效3-着色，可以扩展成多少种修改后的图 $G_{mod}$ 的有效3-着色。\n\n固定 $G$ 的任意一种有效3-着色。设分配给所选顶点 $v_0$ 的颜色为 $c_0 \\in \\{1,2,3\\}$。在 $G_{mod}$ 中，与 $G$ 相关的唯一新边是 $v_0$ 和 $a_1$ 之间的边，以及锚路径 $(a_1, a_2, a_3, a_4)$ 内部的边。因此，扩展着色等同于计算路径 $a_1-a_2-a_3-a_4$ 在约束条件 $a_1 \\neq c_0$ 下的有效3-着色数量。\n\n分步计算扩展数：\n- $a_1$ 恰好有 $2$ 种选择（$\\{1,2,3\\}\\setminus\\{c_0\\}$ 中的任意颜色）。\n- 给定 $a_1$ 的颜色，顶点 $a_2$ 有 $2$ 种选择（必须与 $a_1$ 的颜色不同）。\n- 给定 $a_2$ 的颜色，顶点 $a_3$ 有 $2$ 种选择（必须与 $a_2$ 的颜色不同）。\n- 给定 $a_3$ 的颜色，顶点 $a_4$ 有 $2$ 种选择（必须与 $a_3$ 的颜色不同）。\n\n根据乘法法则，锚路径的扩展数为\n$$\nK=2\\cdot 2\\cdot 2\\cdot 2=16.\n$$\n这个计数与 $G$ 的具体着色无关（它仅取决于 $a_1$ 必须避开单一颜色 $c_0$ 这一事实，以及路径的结构）。因此，$G_{mod}$ 的有效3-着色总数满足\n$$\nC_{mod}=K\\cdot C_{orig}=16\\cdot C_{orig}.\n$$\n求解 $C_{orig}$ 可得\n$$\nC_{orig}=\\frac{C_{mod}}{16}.\n$$\n因此，科学家应该通过将 $C_{mod}$ 除以 $16$ 来计算 $C_{orig}$。",
            "answer": "$$\\boxed{\\frac{C_{mod}}{16}}$$"
        },
        {
            "introduction": "Toda 定理的证明充满了巧妙的数学技巧，其中最关键的一步是展示如何使用一个更简单的计数类别——$\\oplus P$（奇偶P）——来模拟多项式层级的强大能力。这个练习  让你一窥这一证明的精髓。虽然它被包装成一个关于二项式系数奇偶性的数论谜题，但其核心思想——利用关于计数的奇偶信息来精确确定一个未知数值——直接呼应了 Toda 定理证明中的一个关键简化步骤。请注意，这个问题中的预言机是一个旨在阐明核心原理的教学工具。",
            "id": "1467165",
            "problem": "在计算复杂性理论的研究中，能够计算一个问题的解的数量，或者至少确定解数量的奇偶性，是一个强大的工具。该原理是Toda定理等开创性成果的基石，Toda定理将多项式时间层级与计数类联系起来。\n\n考虑这样一个场景：您正在研究一个计算搜索问题。对于一个给定的输入，存在未知数量的有效解，我们称这个数量为 $N$。给定约束条件 $0 \\le N  256$。虽然您无法直接计算 $N$，但您可以使用一个特殊的谕示机 $\\mathcal{O}$。这个谕示机以一个非负整数 $k$ 作为输入，并在多项式时间内确定二项式系数 $\\binom{N}{k}$ 的奇偶性。谕示机的输出是 $\\mathcal{O}(k) = \\binom{N}{k} \\pmod 2$。这类查询类似于使用复杂性类 $\\oplus P$ (Parity-P) 的谕示机。\n\n您执行了一系列查询并收到以下数据：\n*   $\\mathcal{O}(17) = 1$\n*   $\\mathcal{O}(18) = 1$\n*   $\\mathcal{O}(20) = 0$\n*   $\\mathcal{O}(24) = 0$\n*   $\\mathcal{O}(49) = 1$\n*   $\\mathcal{O}(96) = 0$\n*   $\\mathcal{O}(130) = 1$\n\n根据这些结果，确定整数 $N$ 的确切值。所提供的信息足以找到唯一的解。",
            "solution": "我们使用卢卡斯定理模2。将 $N$ 和 $k$ 写成二进制形式 $N=\\sum_{i=0}^{7}N_{i}2^{i}$ 和 $k=\\sum_{i=0}^{7}k_{i}2^{i}$，其中 $N_{i},k_{i}\\in\\{0,1\\}$。卢卡斯定理指出\n$$\n\\binom{N}{k}\\equiv\\prod_{i=0}^{7}\\binom{N_{i}}{k_{i}}\\pmod 2.\n$$\n在 $\\mathbb{F}_2$ 上，$\\binom{1}{1}=\\binom{1}{0}=\\binom{0}{0}=1$ 且 $\\binom{0}{1}=0$，因此 $\\binom{N}{k}\\equiv 1 \\pmod 2$ 当且仅当对所有 $i$ 都有 $k_i \\le N_i$，即 $k$ 的每个为1的比特位，在 $N$ 中对应的比特位也为1。\n\n因为 $0\\le N  256$，我们有比特位 $N_{0},\\dots,N_{7}$。我们通过将每个查询的 $k$ 值表示为二进制来分析：\n\n1) $k=17=16+1=2^{4}+2^{0}$。由于 $\\mathcal{O}(17)=1$，我们必有 $N_{4}=1$ 和 $N_{0}=1$。\n\n2) $k=18=16+2=2^{4}+2^{1}$。由于 $\\mathcal{O}(18)=1$，我们必有 $N_{4}=1$ 和 $N_{1}=1$。这与第1步的结果一致。\n\n3) $k=20=16+4=2^{4}+2^{2}$。由于 $\\mathcal{O}(20)=0$，所以 $N_{4}$ 或 $N_{2}$ 中至少有一个为0。从第1步我们知道 $N_{4}=1$，因此 $N_{2}=0$。\n\n4) $k=24=16+8=2^{4}+2^{3}$。由于 $\\mathcal{O}(24)=0$，所以 $N_{4}$ 或 $N_{3}$ 中至少有一个为0。已知 $N_{4}=1$，我们得到 $N_{3}=0$。\n\n5) $k=49=32+16+1=2^{5}+2^{4}+2^{0}$。由于 $\\mathcal{O}(49)=1$，我们必有 $N_{5}=1$，这也再次确认了 $N_{4}=1$ 和 $N_{0}=1$。\n\n6) $k=96=64+32=2^{6}+2^{5}$。由于 $\\mathcal{O}(96)=0$，所以 $N_{6}$ 或 $N_{5}$ 中至少有一个为0。从第5步我们知道 $N_{5}=1$，因此 $N_{6}=0$。\n\n7) $k=130=128+2=2^{7}+2^{1}$。由于 $\\mathcal{O}(130)=1$，我们必有 $N_{7}=1$，这与第2步得到的 $N_{1}=1$ 是一致的。\n\n汇总所有比特位，我们得到\n$$\n(N_{7},N_{6},N_{5},N_{4},N_{3},N_{2},N_{1},N_{0})=(1,0,1,1,0,0,1,1).\n$$\n因此，\n$$\nN=2^{7}+2^{5}+2^{4}+2^{1}+2^{0}=128+32+16+2+1=179.\n$$\n所有八个比特位都已确定，因此解是唯一的。",
            "answer": "$$\\boxed{179}$$"
        }
    ]
}