{
    "hands_on_practices": [
        {
            "introduction": "伪多项式时间算法的核心通常与整数的数值属性有关，而子集和问题是其中的典型代表。这项练习  提供了一个基于子集和问题的简化场景，模拟了网络流量管理中的资源分配决策。通过解决这个问题，你可以亲身体验如何在一个组合空间中寻找满足特定数值约束的最优解，这为理解更复杂的动态规划解法奠定了直观基础。",
            "id": "1438908",
            "problem": "一位网络工程师正在为一台核心路由器配置流量整形策略。该路由器有一个暂存缓冲区，设计用于在转发前存放一批数据包。为了防止缓冲区膨胀并确保低延迟，实施了一条规则：任何单批数据包的总大小必须严格小于缓冲区的总容量。缓冲区的总容量为 $W = 50$ 千字节 (KB)。\n\n在某一时刻，有一组五个传入的数据包，其大小（单位：KB）如下：$\\{10, 15, 22, 27, 34\\}$。工程师需要从这些数据包中选择一个子集，组成一批以便立即转发。目标是在满足总大小必须严格小于缓冲区容量 $W$ 的约束条件下，最大化该批次中所选数据包的总大小。每个数据包要么被完整地包含在批次中，要么完全不被包含；它不能被分片。\n\n在遵守指定约束的情况下，从给定集合中可以创建的一批数据包的最大总大小是多少？请以千字节 (KB) 为单位表示您的答案。",
            "solution": "我们必须在严格的容量约束下，最大化所选数据包大小子集的总大小。形式上，给定数据包大小集合 $\\{10,15,22,27,34\\}$ 和容量 $W=50$，选择一个子集 $S$ 来最大化 $\\sum_{s \\in S} s$，约束条件是 $\\sum_{s \\in S} s  50$，其中每个数据包要么被包含，要么被排除。\n\n由于集合很小，我们可以枚举所有可能的和，并保留那些严格小于 $50$ 的和，然后取其中的最大值。\n\n单个数据包：\n$10, 15, 22, 27, 34$；其中单个最大的为 $34$。\n\n两个数据包的组合：\n$10+15=25$，\n$10+22=32$，\n$10+27=37$，\n$10+34=44$，\n$15+22=37$，\n$15+27=42$，\n$15+34=49$，\n$22+27=49$，\n$22+34=56$ (丢弃，因为它不小于 $50$)，\n$27+34=61$ (丢弃)。\n在满足约束条件的两个数据包组合中，最大的和是 $49$。\n\n三个数据包的组合：\n$10+15+22=47$，\n$10+15+27=52$ (丢弃)，\n$10+15+34=59$ (丢弃)，\n$10+22+27=59$ (丢弃)，\n$10+22+34=66$ (丢弃)，\n$10+27+34=71$ (丢弃)，\n$15+22+27=64$ (丢弃)，\n$15+22+34=71$ (丢弃)，\n$15+27+34=76$ (丢弃)，\n$22+27+34=83$ (丢弃)。\n唯一有效的三数据包组合的和是 $47$。\n\n四个数据包的组合：\n$10+15+22+27=74$ (丢弃)，\n$10+15+22+34=81$ (丢弃)，\n$10+15+27+34=86$ (丢弃)，\n$10+22+27+34=93$ (丢弃)，\n$15+22+27+34=98$ (丢弃)。\n全部都超过 $50$。\n\n五个数据包的组合：\n$10+15+22+27+34=108$ (丢弃)。\n\n严格小于 $50$ 的最大有效和可以通过组合 $15+34=49$ 或 $22+27=49$ 达到，因此最优的总大小是 $49$。",
            "answer": "$$\\boxed{49}$$"
        },
        {
            "introduction": "许多计算问题在表面上看起来很独特，但经过巧妙的转换，就可以归约为我们熟悉的核心问题。这个问题  就是一个绝佳的例子，它展示了如何将一个看似复杂的划分问题（分区问题）转化为一个标准的子集和问题。完成这项练习有助于你掌握问题规约的重要技巧，即将新问题重构成一个已知模型，这是算法设计中的一个强大工具。",
            "id": "1438926",
            "problem": "一个深空观测任务正在绘制一个新发现的流浪行星系统。为了导航稳定性，探测器的制导系统需要精确的引力平衡。这些行星具有已知的整数质量，必须被划分为两个概念上的组，A组和B组。稳定性要求是A组的总质量与B组的总质量之间的绝对差值必须恰好等于一个给定的差分参数 $D$。\n\n给定行星质量集合 $M = \\{3, 5, 6, 8, 11, 14, 15, 18\\}$，以及要求的质量差 $D = 4$。\n\n如果可以将行星集合 $M$ 划分为这样的两组，请确定总质量较小的组的总质量。如果不存在这样的划分，你的答案应为-1。",
            "solution": "问题要求将质量集合 $M$ 划分为两个不相交的子集，我们称之为 $A$ 和 $B$，使得它们覆盖 $M$ 的所有元素（$A \\cup B = M$ 且 $A \\cap B = \\emptyset$）。令 $S_A$ 为A组中质量的总和，$S_B$ 为B组中质量的总和。条件是 $|S_A - S_B| = D$。如果存在这样的划分，我们需要找到 $\\min(S_A, S_B)$，否则返回-1。\n\n首先，我们来建立 $S_A$、$S_B$、总质量和以及差值 $D$ 之间的关系。\n令 $S_{total}$ 为 $M$ 中所有质量的总和。\n$S_{total} = \\sum_{m \\in M} m = S_A + S_B$。\n\n给定条件 $|S_A - S_B| = D$。这意味着有两种可能性：\n1. $S_A - S_B = D$\n2. $S_B - S_A = D$\n\n我们来分析第一种情况，$S_A - S_B = D$。我们有一个由两个线性方程组成的方程组：\n(i) $S_A + S_B = S_{total}$\n(ii) $S_A - S_B = D$\n\n(i) 和 (ii) 相加得到 $2S_A = S_{total} + D$，这意味着 $S_A = \\frac{S_{total} + D}{2}$。\n(i) 减去 (ii) 得到 $2S_B = S_{total} - D$，这意味着 $S_B = \\frac{S_{total} - D}{2}$。\n\n如果我们分析第二种情况（$S_B - S_A = D$），我们会发现两个组的和是相同的值，只是分配给了相反的组：$S_B = \\frac{S_{total} + D}{2}$ 和 $S_A = \\frac{S_{total} - D}{2}$。\n\n在任何有效的划分中，两组的和必须是 $\\frac{S_{total} + D}{2}$ 和 $\\frac{S_{total} - D}{2}$。\n只要存在有效的划分，总质量较小的组的和将为 $S_{small} = \\frac{S_{total} - D}{2}$。\n\n在继续之前，我们必须检查解是否可能存在。由于质量是整数，$S_A$ 和 $S_B$ 的和也必须是整数。这引入了两个条件：\na) $S_{total} - D$ 必须为非负数，这意味着 $S_{total} \\ge D$。\nb) $S_{total} + D$（以及 $S_{total} - D$）必须是偶数。这当且仅当 $S_{total}$ 和 $D$ 具有相同的奇偶性（都是偶数或都是奇数）时才成立。\n\n让我们将此应用于给定的值：\n$M = \\{3, 5, 6, 8, 11, 14, 15, 18\\}$\n$D = 4$\n\n首先，计算 $S_{total}$：\n$S_{total} = 3 + 5 + 6 + 8 + 11 + 14 + 15 + 18 = 80$。\n\n现在，检查可行性条件：\na) $S_{total} \\geq D$ 是否成立？$80 \\geq 4$。是。\nb) $S_{total}$ 和 $D$ 是否具有相同的奇偶性？$S_{total} = 80$ 是偶数，$D = 4$ 是偶数。是。\n由于条件得到满足，解可能存在。\n\n问题现在转化为寻找是否存在 $M$ 的一个子集，其元素之和等于目标值之一。让我们计算较小的和：\n$S_{small} = \\frac{S_{total} - D}{2} = \\frac{80 - 4}{2} = \\frac{76}{2} = 38$。\n\n因此，原问题等价于以下问题：是否存在 $M$ 的一个子集，其和恰好为38？这是子集和问题的一个经典实例。如果存在这样的子集，答案是38。如果不存在，答案是-1。\n\n我们可以使用动态规划来解决子集和问题。我们定义一个大小为 $S_{small} + 1$ 的布尔数组 `dp`，其中如果可以使用 $M$ 中质量的一个子集构成和 `j`，则 `dp[j]` 为真，否则为假。该数组的索引从0到38。\n\n我们初始化 `dp[0] = true`（空集的和为0），所有其他的 `dp[j] = false`。\n然后，我们遍历集合 $M$ 中的每个质量 $m$。对于每个质量，我们更新 `dp` 数组。为了避免在单个子集中多次使用相同的质量，我们从 $S_{small}$ 向下迭代到 $m$ 来遍历和 `j`：\n对于每个 $m \\in M$：\n  对于从 $S_{small}$ 到 $m$ 的 $j$：\n    `dp[j] = dp[j] or dp[j - m]`\n\n让我们为我们的集合 $M$ 和目标和38来追踪这个过程。\n`dp` 的大小为39。`dp[0]=true`。\n可达到的和开始时为 `{0}`。\n\n- 对于 $m=3$：新的可达和为 `{3}`。总可达和：`{0, 3}`。\n- 对于 $m=5$：新的可达和为 `{0+5, 3+5}` = `{5, 8}`。总计：`{0, 3, 5, 8}`。\n- 对于 $m=6$：新的可达和为 `{0+6, 3+6, 5+6, 8+6}` = `{6, 9, 11, 14}`。总计：`{0, 3, 5, 6, 8, 9, 11, 14}`。\n- 对于 $m=8$：来自先前总和的新和：`{8, 11, 13, 14, 16, 17, 19, 22}`。总可达和（合并并排序）：`{0, 3, 5, 6, 8, 9, 11, 13, 14, 16, 17, 19, 22}`。\n- 对于 $m=11$：新的和包括 `22+11=33`、`19+11=30`、`17+11=28`、`16+11=27`、`14+11=25`、`13+11=24`，`...`。\n- 对于 $m=14$：我们检查和 $j-14$ 是否在之前是可能达到的。对于我们的目标 $j=38$，我们检查 `dp[38-14] = dp[24]`。用目前已处理的质量 `{3, 5, 6, 8, 11}` 是否可能得到和24？我们来检查一下：$5+8+11 = 24$。是的。由于 `dp[24]` 会是真，处理 $m=14$ 会使得 `dp[38]` 为真 (`dp[38] = dp[38] or dp[24]`)。\n\n因为我们已经发现用子集 `{5, 8, 11}` 可以得到和24，通过包含质量14，我们可以用子集 `{5, 8, 11, 14}` 构成和 $24 + 14 = 38$。\n因此，`dp[38]` 为真。\n\n存在一个满足条件的划分。两个子集和中较小的一个是38。\n这两个子集是：\n- $A = \\{5, 8, 11, 14\\}$，其和为 $S_A = 38$。\n- $B = \\{3, 6, 15, 18\\}$，其和为 $S_B = 42$。\n绝对差为 $|S_A - S_B| = |38 - 42| = 4$，这与要求的差值 $D$ 相符。\n较小的和是38。",
            "answer": "$$\\boxed{38}$$"
        },
        {
            "introduction": "子集和问题的思想不仅限于处理加法。通过数学变换，我们还能用它来解决涉及其他运算的问题，例如乘法。这项练习  介绍了一种精妙的方法，即使用对数将一个子集乘积问题近似地转化为一个子集和问题。这个例子揭示了算法设计的灵活性，并展示了如何将在一个领域中学到的核心概念（如动态规划）应用于解决密码学等不同领域中的挑战。",
            "id": "1438913",
            "problem": "一名密码学家正在分析一组用于某个密码学协议的公开数值参数 $S$。该协议的安全性依赖于从 $S$ 中找到一个子集，其元素乘积等于一个秘密目标值 $P$ 的难度。为了分析潜在的漏洞，这位密码学家设计了一种基于动态规划的近似算法。\n\n该算法将子集乘积问题转化为整数子集和问题。步骤如下：\n1. 对于集合 $S$ 中的每个参数 $s_k$，计算其转换后的权重 $w_k = \\text{round}(M \\cdot \\ln(s_k))$，其中 $M$ 是一个预定义的缩放因子，$\\ln$ 是自然对数。\n2. 计算转换后的目标权重 $W = \\text{round}(M \\cdot \\ln(P))$。\n3. 使用整数权重集合 $\\{w_1, w_2, \\ldots, w_n\\}$，找到一个权重子集，其和是满足 $W_{\\text{max}} \\le W$ 的最大可能值，我们称之为 $W_{\\text{max}}$。\n4. 最终结果是 $S$ 中与上一步所选权重相对应的原始参数的乘积。\n\n您的任务是根据以下输入执行此算法，并找出最终的乘积。\n- 参数集合为 $S = \\{2, 3, 5, 7, 11\\}$。\n- 目标乘积为 $P = 100$。\n- 缩放因子为 $M = 100$。\n- `round()` 函数将实数四舍五入到最接近的整数。小数部分恰好为 0.5 的数字向上取整（例如，`round(2.5)` 为 3，而 `round(2.49)` 为 2）。\n\n计算通过此方法确定的原始参数的乘积。",
            "solution": "我们已知 $S=\\{2,3,5,7,11\\}$，$P=100$，$M=100$，以及所描述的四舍五入规则。该算法定义了整数权重 $w_{k}=\\operatorname{round}(M\\ln(s_{k}))$ 和目标值 $W=\\operatorname{round}(M\\ln(P))$，然后找到 $w_{k}$ 的一个子集，使其和在不超过 $W$ 的前提下最大化，最后返回相应原始 $s_{k}$ 的乘积。\n\n首先，使用 $w_{k}=\\operatorname{round}(100\\ln(s_{k}))$ 计算转换后的权重：\n$$\n100\\ln(2)=69.31471805599453\\ \\Rightarrow\\ w_{2}=\\operatorname{round}(69.31471805599453)=69,\n$$\n$$\n100\\ln(3)=109.86122886681098\\ \\Rightarrow\\ w_{3}=\\operatorname{round}(109.86122886681098)=110,\n$$\n$$\n100\\ln(5)=160.94379124341003\\ \\Rightarrow\\ w_{5}=\\operatorname{round}(160.94379124341003)=161,\n$$\n$$\n100\\ln(7)=194.59101490553132\\ \\Rightarrow\\ w_{7}=\\operatorname{round}(194.59101490553132)=195,\n$$\n$$\n100\\ln(11)=239.78952727983707\\ \\Rightarrow\\ w_{11}=\\operatorname{round}(239.78952727983707)=240.\n$$\n计算转换后的目标值：\n$$\nW=\\operatorname{round}(100\\ln(100))=\\operatorname{round}(460.5170185988092)=461.\n$$\n\n我们必须从 $\\{69,110,161,195,240\\}$ 中选择一个子集，其和最大且不超过 $461$。通过考虑组合来评估可行的和：\n- 包含 $240$ 的组合：$240+195=435$（有效），$240+161=401$（有效），$240+110=350$（有效），$240+69=309$（有效），任何包含 $240$ 的三个数的组合都会超过 $461$，除了 $240+110+69=419$（有效）。\n- 不包含 $240$ 的组合：$195+161=356$（有效），$195+110=305$（有效），$195+69=264$（有效），$161+110=271$（有效），$161+69=230$（有效），$110+69=179$（有效）。在三个数的组合中，$195+161+110=466$（过大），$195+161+69=425$（有效），$195+110+69=374$（有效），$161+110+69=340$（有效）。\n\n在这些和中，不超过 $461$ 的最大和是 $435=240+195$。因此，所选的权重对应于 $s=11$ 和 $s=7$。根据步骤 4，最终的乘积是\n$11 \\times 7 = 77$。",
            "answer": "$$\\boxed{77}$$"
        }
    ]
}