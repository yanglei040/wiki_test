{
    "hands_on_practices": [
        {
            "introduction": "The core of Shor's algorithm revolves around finding the period of a modular exponentiation function. Before we can appreciate the quantum speedup, it's crucial to understand what this period is and how it's defined. This first exercise allows you to calculate the period for a small-scale example by hand, making the abstract goal of the quantum subroutine concrete and tangible. ",
            "id": "1447896",
            "problem": "Consider a function $f$ that maps non-negative integers to a finite set of integers, defined by the rule $f(x) = a^x \\pmod{N}$, where $a$ and $N$ are positive integers such that the greatest common divisor of $a$ and $N$ is 1. This function is periodic. The period, denoted by $r$, is the smallest positive integer for which $a^r \\equiv 1 \\pmod{N}$.\n\nFor the specific case where the base is $a=7$ and the modulus is $N=15$, determine the period $r$ of the function $f(x) = 7^x \\pmod{15}$ by direct computation.",
            "solution": "We are asked to find the period (multiplicative order) $r$ of $a=7$ modulo $N=15$, defined as the smallest positive integer $r$ such that $7^{r} \\equiv 1 \\pmod{15}$. Since $\\gcd(7,15)=1$, powers of $7$ modulo $15$ are well-defined in the multiplicative group modulo $15$. By Euler's theorem, $7^{\\varphi(15)} \\equiv 1 \\pmod{15}$, where $\\varphi(15)=\\varphi(3)\\varphi(5)=2 \\cdot 4 = 8$, so the order $r$ must divide $8$. We proceed by direct computation to find the smallest such $r$.\n\nCompute successive powers of $7$ modulo $15$ using the property that if $x \\equiv y \\pmod{15}$, then $7x \\equiv 7y \\pmod{15}$:\n\n$7^{1} \\equiv 7 \\pmod{15}$, which is not congruent to $1$.\n\n$7^{2} \\equiv 7 \\cdot 7 = 49 \\equiv 49 - 45 = 4 \\pmod{15}$, which is not congruent to $1$.\n\n$7^{3} \\equiv 7 \\cdot 7^{2} \\equiv 7 \\cdot 4 = 28 \\equiv 28 - 15 = 13 \\pmod{15}$, which is not congruent to $1$.\n\n$7^{4} \\equiv 7 \\cdot 7^{3} \\equiv 7 \\cdot 13 = 91 \\equiv 91 - 90 = 1 \\pmod{15}$.\n\nThus the smallest positive integer $r$ such that $7^{r} \\equiv 1 \\pmod{15}$ is $r=4$. This also aligns with the fact that the order must divide $8$, and we have verified that no smaller positive exponent among $1,2,3$ yields $1$ modulo $15$.",
            "answer": "$$\\boxed{4}$$"
        },
        {
            "introduction": "Obtaining the period $r$ from the quantum subroutine is a major step, but it doesn't guarantee success. The classical post-processing part of the algorithm has its own requirements. This practice explores a fundamental reason the algorithm might fail, forcing us to analyze the mathematical trick—the difference of squares—that underpins the final factorization step. ",
            "id": "1447866",
            "problem": "In Shor's algorithm for integer factorization, a key step is the classical post-processing of the period $r$ found by a quantum subroutine. Let's consider an attempt to factor the integer $N=35$. A student chooses the base $a=6$ and correctly uses the quantum part of the algorithm to find the period of the function $f(x)=6^x \\pmod{35}$. The period found is $r=2$.\n\nNow, consider a hypothetical alternative scenario. Suppose that for a different integer $N'$ and a different base $a'$, a student runs the quantum period-finding subroutine and the algorithm returns an odd period, for instance, $r'=7$. In this case, the standard classical post-processing stage of Shor's algorithm would fail, and the student would need to restart the algorithm with a different base.\n\nWhich of the following statements provides the most accurate and fundamental reason for why Shor's algorithm fails at the classical post-processing stage when the period $r'$ is odd?\n\nA. An odd period $r'$ can only occur if the chosen base $a'$ shares a factor with $N'$, meaning the Greatest Common Divisor (GCD) pre-check, $\\gcd(a', N')  1$, should have already found a factor.\n\nB. The quantum Fourier transform, which is at the heart of the period-finding subroutine, is mathematically constrained to produce only even periods for composite numbers $N'$. An odd result implies a fault in the quantum hardware.\n\nC. The factorization step relies on expressing $a'^{r'}-1$ as a difference of squares, which is only possible if the exponent $r'/2$ is an integer.\n\nD. An odd period $r'$ implies that $a'^{r'/2} \\equiv -1 \\pmod{N'}$, which is one of the specific failure conditions where the algorithm yields trivial factors.\n\nE. When the period $r'$ is odd, the order of the element $a'$ in the multiplicative group of integers modulo $N'$ is not a power of 2, which prevents the final GCD computation from being efficient.",
            "solution": "In Shor's algorithm, after selecting an integer $a$ with $1aN$ and verifying $\\gcd(a,N)=1$, the quantum subroutine finds the order (period) $r$ of $a$ modulo $N$, defined as the least positive integer satisfying\n$$\na^{r} \\equiv 1 \\pmod{N}.\n$$\nThe classical post-processing then uses the algebraic identity\n$$\na^{r} - 1 = \\left(a^{\\frac{r}{2}} - 1\\right)\\left(a^{\\frac{r}{2}} + 1\\right),\n$$\nwhich requires that $\\frac{r}{2}$ be an integer, i.e., $r$ must be even. Since $a^{r} \\equiv 1 \\pmod{N}$, $N$ divides $a^{r}-1$, and if $r$ is even and additionally $a^{\\frac{r}{2}} \\not\\equiv -1 \\pmod{N}$, then neither factor equals $0 \\pmod{N}$. Therefore, the nontrivial factors of $N$ can be extracted via\n$$\np=\\gcd\\!\\left(a^{\\frac{r}{2}}-1,\\,N\\right),\\qquad q=\\gcd\\!\\left(a^{\\frac{r}{2}}+1,\\,N\\right),\n$$\nwhich, with high probability over random $a$, yields $1pN$ and $1qN$.\n\nWhen the period $r'$ returned by the quantum subroutine is odd, the step above fails at its core: the identity\n$$\na'^{\\,r'} - 1 = \\left(a'^{\\,\\frac{r'}{2}} - 1\\right)\\left(a'^{\\,\\frac{r'}{2}} + 1\\right)\n$$\nis not available over the integers because $\\frac{r'}{2}$ is not an integer. Hence the standard classical post-processing has no direct way to split $a'^{\\,r'}-1$ into two factors that are congruent to $\\pm 1 \\pmod{N'}$, and the usual greatest common divisor computations cannot be applied to extract nontrivial factors. This is the fundamental reason the algorithm must be restarted with a different base when $r'$ is odd.\n\nAssessing the options:\n\n- Option A is false: an odd order $r'$ can occur even when $\\gcd(a',N')=1$. The GCD pre-check does not preclude odd orders; it only detects the trivial case where $a'$ already shares a factor with $N'$.\n\n- Option B is false: the quantum Fourier transform estimates the period structure but is not restricted to even periods; odd orders can occur without implying any hardware fault.\n\n- Option C is correct: the factorization step crucially uses $a'^{\\,r'}-1=\\left(a'^{\\,\\frac{r'}{2}}-1\\right)\\left(a'^{\\,\\frac{r'}{2}}+1\\right)$, which requires $\\frac{r'}{2}\\in\\mathbb{Z}$, i.e., $r'$ even.\n\n- Option D is incorrect: the congruence $a'^{\\,\\frac{r'}{2}}\\equiv -1 \\pmod{N'}$ is only meaningful when $r'$ is even; it is one of the failure cases for even $r'$, not a consequence of $r'$ being odd.\n\n- Option E is misleading: the efficiency of the final GCD computations does not hinge on the order being a power of $2$; the obstacle is the inapplicability of the difference-of-squares step when $r'$ is odd.\n\nTherefore, the most accurate and fundamental reason for failure when $r'$ is odd is exactly that the classical factor extraction relies on expressing $a'^{\\,r'}-1$ as a difference of squares using $\\frac{r'}{2}$, which is impossible if $r'$ is odd.",
            "answer": "$$\\boxed{C}$$"
        },
        {
            "introduction": "The quantum computer does not output the period $r$ directly; instead, it provides a measurement that is a highly accurate approximation of a fraction $\\frac{c}{r}$. Bridging the gap between this quantum measurement and the exact integer period requires a clever classical algorithm. This problem gives you hands-on practice with the continued fraction algorithm, the essential tool used to decode the quantum result and recover the period. ",
            "id": "1447898",
            "problem": "In the classical post-processing stage of Shor's algorithm for integer factorization, a measurement result $y$ obtained from an $m$-qubit register is used to form the fraction $\\frac{y}{2^m}$. This fraction serves as an approximation of an unknown rational number $\\frac{c}{r}$, where $r$ is the desired period of a modular exponentiation function and $c$ is an integer coprime to $r$. The continued fraction algorithm provides a highly efficient method for recovering the period $r$ by finding the best rational approximations of $\\frac{y}{2^m}$.\n\nSuppose that in an attempt to factor a large integer, the Quantum Phase Estimation subroutine of Shor's algorithm utilizes an ancillary register of $m=11$ qubits. A measurement on this register yields the integer value $y=381$. It is known from the theoretical guarantees of the algorithm that the period $r$ must be less than 60.\n\nYour task is to analyze this measurement outcome. Apply the continued fraction algorithm to the value $\\frac{y}{2^m}$ to generate the sequence of its rational approximations (convergents). From this sequence, identify the \"best\" rational approximation $\\frac{p}{q}$, which is defined for this problem as the convergent with the largest denominator $q$ that still satisfies the known constraint $q  60$. Report this denominator $q$ as your final answer.",
            "solution": "We form the measured rational number using the given data. With $m=11$ and $y=381$, we have\n$$\nx=\\frac{y}{2^{m}}=\\frac{381}{2^{11}}=\\frac{381}{2048}.\n$$\nTo obtain the continued fraction of $x$, apply the Euclidean algorithm to the pair $(2048,381)$ to extract the partial quotients. Perform the divisions:\n$$\n2048=5\\cdot 381+143,\\quad 381=2\\cdot 143+95,\\quad 143=1\\cdot 95+48,\n$$\n$$\n95=1\\cdot 48+47,\\quad 48=1\\cdot 47+1,\\quad 47=47\\cdot 1+0.\n$$\nThus the continued fraction of $\\frac{2048}{381}$ is $[5;2,1,1,1,47]$, and therefore the continued fraction of $x=\\frac{381}{2048}$ is\n$$\n[0;5,2,1,1,1,47].\n$$\nCompute the convergents $p_{k}/q_{k}$ via the standard recurrences with $a_{0}=0$, $a_{1}=5$, $a_{2}=2$, $a_{3}=1$, $a_{4}=1$, $a_{5}=1$, $a_{6}=47$, and initial conditions $p_{-2}=0$, $p_{-1}=1$, $q_{-2}=1$, $q_{-1}=0$:\n$$\np_{k}=a_{k}p_{k-1}+p_{k-2},\\quad q_{k}=a_{k}q_{k-1}+q_{k-2}.\n$$\nStep by step:\n- $k=0$: $p_{0}=0\\cdot 1+0=0$, $q_{0}=0\\cdot 0+1=1$, so $\\frac{p_{0}}{q_{0}}=\\frac{0}{1}$.\n- $k=1$: $p_{1}=5\\cdot 0+1=1$, $q_{1}=5\\cdot 1+0=5$, so $\\frac{p_{1}}{q_{1}}=\\frac{1}{5}$.\n- $k=2$: $p_{2}=2\\cdot 1+0=2$, $q_{2}=2\\cdot 5+1=11$, so $\\frac{p_{2}}{q_{2}}=\\frac{2}{11}$.\n- $k=3$: $p_{3}=1\\cdot 2+1=3$, $q_{3}=1\\cdot 11+5=16$, so $\\frac{p_{3}}{q_{3}}=\\frac{3}{16}$.\n- $k=4$: $p_{4}=1\\cdot 3+2=5$, $q_{4}=1\\cdot 16+11=27$, so $\\frac{p_{4}}{q_{4}}=\\frac{5}{27}$.\n- $k=5$: $p_{5}=1\\cdot 5+3=8$, $q_{5}=1\\cdot 27+16=43$, so $\\frac{p_{5}}{q_{5}}=\\frac{8}{43}$.\n- $k=6$: $p_{6}=47\\cdot 8+5=381$, $q_{6}=47\\cdot 43+27=2048$, so $\\frac{p_{6}}{q_{6}}=\\frac{381}{2048}$.\n\nThe convergents thus have denominators $1,5,11,16,27,43,2048$. Under the constraint $q60$, the convergent with the largest denominator is $\\frac{8}{43}$, so the required denominator is $q=43$.",
            "answer": "$$\\boxed{43}$$"
        }
    ]
}