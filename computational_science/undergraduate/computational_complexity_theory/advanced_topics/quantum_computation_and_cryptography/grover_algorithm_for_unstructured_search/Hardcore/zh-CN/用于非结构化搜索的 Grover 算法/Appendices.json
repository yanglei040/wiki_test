{
    "hands_on_practices": [
        {
            "introduction": "Grover 算法的核心在于一个被称为“神谕”（Oracle）的黑盒操作，它能识别并“标记”出搜索目标。但这个“神谕”并非真正神秘，它可以由基本的量子门构成。这个练习将带你亲手构建一个神谕 ，让你了解如何将抽象的算法步骤转化为具体的量子电路，这是连接理论与实践的关键一步。",
            "id": "1426395",
            "problem": "在开发一个用于3量子比特系统的量子搜索算法时，一个关键组成部分是“神谕”（oracle）算符 $U_w$。该算符旨在通过对一个特定的“标记”计算基态 $|w\\rangle$ 施加-1的相移来识别它，同时保持所有其他基态不变。神谕的作用由变换 $U_w|x\\rangle = (-1)^{f(x)}|x\\rangle$ 形式化描述，其中如果输入态 $|x\\rangle$ 是标记态 $|w\\rangle$，则 $f(x)=1$，否则 $f(x)=0$。\n\n考虑一个3量子比特寄存器，其中量子比特从右到左索引，因此一个通用的基态写为 $|q_2 q_1 q_0\\rangle$。我们搜索问题的标记态是 $|w\\rangle = |110\\rangle$。\n\n你将获得一个基本量子门库来构建此神谕。该库包括：\n1.  单量子比特泡利-X门，记作 $X_k$，作用于量子比特 $k$。此门翻转量子比特的状态，使得 $X_k|0\\rangle = |1\\rangle$ 且 $X_k|1\\rangle = |0\\rangle$。\n2.  三量子比特双控-Z门，记作 $CCZ_{i,j,k}$。当且仅当两个控制量子比特 $i$ 和 $j$ 都处于 $|1\\rangle$ 态时，此门对目标量子比特 $k$ 施加一个泡利-Z门。泡利-Z门对 $|1\\rangle$ 态施加一个相位翻转（$Z|1\\rangle = -|1\\rangle$），并保持 $|0\\rangle$ 态不变（$Z|0\\rangle = |0\\rangle$）。因此，$CCZ_{i,j,k}$ 门仅对量子比特 $i, j, k$ 全为 $|1\\rangle$ 的基态施加-1的相位。\n\n门序列按从右到左的施加顺序书写。例如，序列 $A \\cdot B \\cdot C$ 意味着首先施加门 $C$，然后是门 $B$，最后是门 $A$。\n\n下列哪个门序列正确地实现了标记态 $|w\\rangle = |110\\rangle$ 所需的神谕？\n\nA. $CCZ_{2,1,0}$\n\nB. $X_0 \\cdot CCZ_{2,1,0} \\cdot X_0$\n\nC. $X_2 \\cdot CCZ_{2,1,0} \\cdot X_2$\n\nD. $X_1 \\cdot CCZ_{2,1,0} \\cdot X_1$\n\nE. $X_2 \\cdot X_1 \\cdot CCZ_{2,1,0} \\cdot X_1 \\cdot X_2$",
            "solution": "我们需要一个神谕 $U_{w}$，它对计算基态的作用如下：\n$$\nU_{w}|q_{2}q_{1}q_{0}\\rangle =\n\\begin{cases}\n-\\,|q_{2}q_{1}q_{0}\\rangle,  \\text{如果 } |q_{2}q_{1}q_{0}\\rangle=|110\\rangle,\\\\\n\\;\\;|q_{2}q_{1}q_{0}\\rangle,  \\text{否则}。\n\\end{cases}\n$$\n等价地，对于比特值 $q_{k}\\in\\{0,1\\}$，这可以表示为\n$$\nU_{w}|q_{2}q_{1}q_{0}\\rangle = (-1)^{q_{2}q_{1}(1-q_{0})}|q_{2}q_{1}q_{0}\\rangle,\n$$\n因此只有当 $q_{2}=1$, $q_{1}=1$, $q_{0}=0$ 时，该状态才会获得-1的相位。\n\n可用的 $CCZ_{2,1,0}$ 门仅对 $|111\\rangle$ 施加-1的相位，即：\n$$\nCCZ_{2,1,0}|q_{2}q_{1}q_{0}\\rangle = (-1)^{q_{2}q_{1}q_{0}}|q_{2}q_{1}q_{0}\\rangle.\n$$\n为了将标记模式从 $|111\\rangle$ 变为 $|110\\rangle$，我们用 $X_{0}$ 对 $CCZ_{2,1,0}$ 进行共轭操作，即在前后翻转第三个量子比特（目标比特）：\n$$\nU := X_{0}\\cdot CCZ_{2,1,0}\\cdot X_{0}.\n$$\n作用于一个通用的基态，\n1) 最右边的 $X_{0}$ 将 $|q_{2}q_{1}q_{0}\\rangle$ 映射到 $|q_{2}q_{1}\\bar{q}_{0}\\rangle$，其中 $\\bar{q}_{0}=1-q_{0}$。\n2) 然后 $CCZ_{2,1,0}$ 施加一个-1的相位，当且仅当 $q_{2}=1$，$q_{1}=1$ 且 $\\bar{q}_{0}=1$，也就是说，恰好在 $q_{2}=1$, $q_{1}=1$, $q_{0}=0$ 时。\n3) 最左边的 $X_{0}$ 恢复第三个量子比特，得到原始基态和预期的相位。\n\n因此\n$$\n\\left(X_{0}\\cdot CCZ_{2,1,0}\\cdot X_{0}\\right)|q_{2}q_{1}q_{0}\\rangle\n= (-1)^{q_{2}q_{1}(1-q_{0})}|q_{2}q_{1}q_{0}\\rangle,\n$$\n这正是标记态 $|110\\rangle$ 所需的神谕。\n\n验证其他选项：\n- 单独的 $CCZ_{2,1,0}$ 标记 $|111\\rangle$，而不是 $|110\\rangle$。\n- $X_{2}\\cdot CCZ_{2,1,0}\\cdot X_{2}$ 标记 $q_{2}=0, q_{1}=1, q_{0}=1$ 的状态，即 $|011\\rangle$。\n- $X_{1}\\cdot CCZ_{2,1,0}\\cdot X_{1}$ 标记 $|101\\rangle$。\n- $X_{2}\\cdot X_{1}\\cdot CCZ_{2,1,0}\\cdot X_{1}\\cdot X_{2}$ 标记 $|001\\rangle$。\n\n因此，正确的序列是 $X_{0}\\cdot CCZ_{2,1,0}\\cdot X_{0}$，即选项B。",
            "answer": "$$\\boxed{B}$$"
        },
        {
            "introduction": "构建了神谕之后，下一步是理解一次完整的“Grover 迭代”（即神谕加上扩散操作）如何改变量子态。本题通过一个简单的小规模数据库 ，让你追踪量子态的演化，并亲手计算一次迭代后成功概率的变化。这个练习有助于你直观地感受振幅放大的过程是如何运作的。",
            "id": "1426401",
            "problem": "一个小型量子信息处理器在一个2量子比特寄存器上运行，该寄存器代表一个包含 $N=4$ 个项目（基态为 $|00\\rangle, |01\\rangle, |10\\rangle, \\text{和 } |11\\rangle$）的数据库。在这个数据库中，其中两个项目，对应于状态 $|01\\rangle$ 和 $|10\\rangle$，被认为是“标记”的。该处理器执行一次搜索算法的迭代。该过程始于将寄存器初始化为所有四个基态的均匀叠加态。然后，执行一个两步操作：\n\n1.  应用一个“神谕”（oracle）算符，它选择性地反转与两个标记项目相对应的基态的符号（即，将振幅乘以 -1），而其他状态保持不变。\n2.  应用一个“扩散”（diffusion）算符。该算符定义为关于初始均匀叠加态的反转。具体来说，对于任何状态 $|\\psi\\rangle$，该算符将其转换为 $U_s |\\psi\\rangle = 2|s\\rangle\\langle s|\\psi\\rangle - |\\psi\\rangle$，其中 $|s\\rangle$ 是初始均匀叠加态。\n\n在这一系列两步操作执行一次之后，在计算基 $\\{|00\\rangle, |01\\rangle, |10\\rangle, |11\\rangle\\}$ 下进行测量。测量到两个标记状态中任意一个的总概率是多少？\n\n请用精确分数表示你的答案。",
            "solution": "该问题要求计算一个量子搜索算法在一次迭代后，对于一个大小为 $N=4$ 且有 $M=2$ 个标记项的数据库的成功概率。\n\n这个2量子比特系统的希尔伯特空间由四个基态张成：$\\{|00\\rangle, |01\\rangle, |10\\rangle, |11\\rangle\\}$。\n\n初始状态 $|s\\rangle$ 是所有基态的均匀叠加：\n$$|s\\rangle = \\frac{1}{\\sqrt{N}} \\sum_{x=0}^{N-1} |x\\rangle = \\frac{1}{\\sqrt{4}}(|00\\rangle + |01\\rangle + |10\\rangle + |11\\rangle) = \\frac{1}{2}(|00\\rangle + |01\\rangle + |10\\rangle + |11\\rangle)$$\n\n标记项对应于状态 $|w_1\\rangle = |01\\rangle$ 和 $|w_2\\rangle = |10\\rangle$。其余的状态 $|u_1\\rangle = |00\\rangle$ 和 $|u_2\\rangle = |11\\rangle$ 是未标记的。\n\n在由两个正交态张成的二维子空间中分析该算法的动力学是很有用的：一个态代表所有未标记状态的叠加，另一个态代表所有标记状态的叠加。\n\n设 $|\\mathcal{U}\\rangle$ 是未标记状态的归一化叠加：\n$$|\\mathcal{U}\\rangle = \\frac{1}{\\sqrt{N-M}} \\sum_{x \\text{ is unmarked}} |x\\rangle = \\frac{1}{\\sqrt{4-2}}(|00\\rangle + |11\\rangle) = \\frac{1}{\\sqrt{2}}(|00\\rangle + |11\\rangle)$$\n\n设 $|\\mathcal{W}\\rangle$ 是标记状态的归一化叠加：\n$$|\\mathcal{W}\\rangle = \\frac{1}{\\sqrt{M}} \\sum_{x \\text{ is marked}} |x\\rangle = \\frac{1}{\\sqrt{2}}(|01\\rangle + |10\\rangle)$$\n\n状态 $|\\mathcal{U}\\rangle$ 和 $|\\mathcal{W}\\rangle$ 是正交的，$\\langle \\mathcal{U} | \\mathcal{W} \\rangle = 0$，并构成一个二维子空间的正交归一基。\n\n我们可以在这个新基中表示初始状态 $|s\\rangle$：\n$$|s\\rangle = \\sqrt{\\frac{N-M}{N}} |\\mathcal{U}\\rangle + \\sqrt{\\frac{M}{N}} |\\mathcal{W}\\rangle$$\n代入 $N=4$ 和 $M=2$：\n$$|s\\rangle = \\sqrt{\\frac{4-2}{4}} |\\mathcal{U}\\rangle + \\sqrt{\\frac{2}{4}} |\\mathcal{W}\\rangle = \\sqrt{\\frac{1}{2}} |\\mathcal{U}\\rangle + \\sqrt{\\frac{1}{2}} |\\mathcal{W}\\rangle = \\frac{1}{\\sqrt{2}} (|\\mathcal{U}\\rangle + |\\mathcal{W}\\rangle)$$\n这可以写成标准形式 $|s\\rangle = \\cos(\\theta)|\\mathcal{U}\\rangle + \\sin(\\theta)|\\mathcal{W}\\rangle$，其中 $\\sin(\\theta) = \\sqrt{M/N} = \\sqrt{2/4} = 1/\\sqrt{2}$。这得出 $\\theta = \\frac{\\pi}{4}$。\n\n第一步是应用神谕算符 $U_w$。该算符反转标记状态的符号。由于 $|\\mathcal{W}\\rangle$ 仅是标记状态的叠加，因此 $U_w|\\mathcal{W}\\rangle = -|\\mathcal{W}\\rangle$。由于 $|\\mathcal{U}\\rangle$ 仅是未标记状态的叠加，因此 $U_w|\\mathcal{U}\\rangle = |\\mathcal{U}\\rangle$。将神谕算符应用于初始状态 $|s\\rangle$：\n$$|\\psi_1\\rangle = U_w |s\\rangle = U_w (\\cos(\\theta)|\\mathcal{U}\\rangle + \\sin(\\theta)|\\mathcal{W}\\rangle) = \\cos(\\theta)|\\mathcal{U}\\rangle - \\sin(\\theta)|\\mathcal{W}\\rangle$$\n\n第二步是应用扩散算符 $U_s = 2|s\\rangle\\langle s| - I$。此操作对应于关于状态 $|s\\rangle$ 的反射。组合操作 $U_s U_w$ 导致状态向量在 $|\\mathcal{U}\\rangle-|\\mathcal{W}\\rangle$ 平面内旋转一个角度 $2\\theta$。\n\n初始状态向量与 $|\\mathcal{U}\\rangle$ 轴成 $\\theta$ 角。经过一次完整的迭代后，新的状态向量 $|\\psi_2\\rangle$ 将与 $|\\mathcal{U}\\rangle$ 轴成 $\\theta + 2\\theta = 3\\theta$ 角。\n$$|\\psi_2\\rangle = \\cos(3\\theta)|\\mathcal{U}\\rangle + \\sin(3\\theta)|\\mathcal{W}\\rangle$$\n\n我们有 $\\theta = \\frac{\\pi}{4}$。因此，一次迭代后的角度为 $3\\theta = \\frac{3\\pi}{4}$。系统的状态为：\n$$|\\psi_2\\rangle = \\cos\\left(\\frac{3\\pi}{4}\\right)|\\mathcal{U}\\rangle + \\sin\\left(\\frac{3\\pi}{4}\\right)|\\mathcal{W}\\rangle$$\n\n测量到标记状态的概率是标记分量 $|\\mathcal{W}\\rangle$ 的振幅的模平方。\n$$P(\\text{标记}) = |\\langle \\mathcal{W} | \\psi_2 \\rangle|^2 = \\left|\\sin\\left(\\frac{3\\pi}{4}\\right)\\right|^2$$\n\n我们计算正弦项：\n$$\\sin\\left(\\frac{3\\pi}{4}\\right) = \\sin\\left(\\pi - \\frac{\\pi}{4}\\right) = \\sin\\left(\\frac{\\pi}{4}\\right) = \\frac{1}{\\sqrt{2}}$$\n\n最后，我们计算概率：\n$$P(\\text{标记}) = \\left(\\frac{1}{\\sqrt{2}}\\right)^2 = \\frac{1}{2}$$\n\n因此，经过一次迭代，测量到两个标记状态之一的概率是 $\\frac{1}{2}$。",
            "answer": "$$\\boxed{\\frac{1}{2}}$$"
        },
        {
            "introduction": "单次 Grover 迭代能够放大目标态的振幅，但我们应该重复这个过程多少次呢？这个练习  解决了在实际应用中至关重要的问题：如何确定最优的迭代次数以最大化搜索的成功率。它揭示了在量子算法中“过犹不及”的现象，并让你实践算法优化这一核心概念。",
            "id": "1426405",
            "problem": "一个网络安全团队正在使用量子计算机搜索一个密码系统中的漏洞。总搜索空间包含 $N = 2^{10}$ 种可能的配置。由于一个设计缺陷，已知其中恰好有 $M=4$ 个配置是“弱”配置，如果找到它们，将会危及系统的安全。该团队采用 Grover 搜索算法来寻找这些弱配置中的一个。\n\n在 Grover 算法中，一系列量子操作（统称为“Grover 迭代”）会重复地应用于一个量子态。经过一定次数的迭代后，会进行一次测量。测量到弱配置的概率取决于所执行的迭代次数。\n\n确定该团队应执行的最佳 Grover 迭代次数 $k$，以在测量时有最高的概率识别出弱配置。迭代次数必须为整数。",
            "solution": "设 $N$ 为总项目数，$M$ 为标记（弱）项目数。在 Grover 算法中，定义角度 $\\theta$ 为\n$$\n\\sin(\\theta)=\\sqrt{\\frac{M}{N}}.\n$$\n经过 $k$ 次 Grover 迭代后，成功概率为\n$$\nP(k)=\\sin^{2}\\big((2k+1)\\theta\\big).\n$$\n当 $(2k+1)\\theta$ 尽可能接近 $\\frac{\\pi}{2}$ 时，该概率达到最大值，由此得出最佳迭代次数\n$$\nk^{\\ast}=\\left\\lfloor \\frac{\\pi}{4\\theta}-\\frac{1}{2}\\right\\rfloor.\n$$\n对于给定的值 $N=2^{10}$ 和 $M=4$，\n$$\n\\sqrt{\\frac{M}{N}}=\\sqrt{\\frac{4}{2^{10}}}=\\sqrt{\\frac{1}{256}}=\\frac{1}{16},\n$$\n所以\n$$\n\\theta=\\arcsin\\!\\left(\\frac{1}{16}\\right).\n$$\n因此，\n$$\nk^{\\ast}=\\left\\lfloor \\frac{\\pi}{4\\arcsin\\!\\left(\\frac{1}{16}\\right)}-\\frac{1}{2}\\right\\rfloor.\n$$\n为了选择正确的整数，进行近似评估。使用 $\\arcsin(x)$ 在 $x=\\frac{1}{16}$ 处的级数展开，\n$$\n\\arcsin(x)=x+\\frac{x^{3}}{6}+\\frac{3x^{5}}{40}+\\frac{5x^{7}}{112}+\\cdots,\n$$\n可得\n$$\n\\theta=\\arcsin\\!\\left(\\frac{1}{16}\\right)\\approx 0.062540761796,\n$$\n因此\n$$\n\\frac{\\pi}{4\\theta}\\approx \\frac{3.141592653589793}{4\\times 0.062540761796}\\approx 12.5581803,\n$$\n于是\n$$\n\\frac{\\pi}{4\\theta}-\\frac{1}{2}\\approx 12.0581803.\n$$\n取底函数得到 $k^{\\ast}=12$。等价地，使用常用近似公式 $k\\approx \\left\\lfloor \\frac{\\pi}{4}\\sqrt{\\frac{N}{M}} \\right\\rfloor$ 可得 $\\left\\lfloor \\frac{\\pi}{4}\\cdot 16 \\right\\rfloor=\\left\\lfloor 4\\pi \\right\\rfloor=12$，这与更精确的计算结果一致。",
            "answer": "$$\\boxed{12}$$"
        }
    ]
}