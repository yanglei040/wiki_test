{
    "hands_on_practices": [
        {
            "introduction": "要理解分层页表，第一步是掌握它如何将虚拟地址空间划分为可管理的单元。这个练习将帮助你建立一个基础模型，探讨如何计算覆盖一个特定大小的连续内存区域所需的最少顶级页表条目数。通过解决这个问题 ，你将学会如何将高层次的内存需求（映射一个大小为 $R$ 的区域）与页表结构的具体实现（顶级条目所覆盖的地址范围 $A$）联系起来。",
            "id": "3647771",
            "problem": "考虑一个由虚拟内存子系统使用的两级分层分页方案。顶层结构是页目录（Page Directory, PD），第二层结构是页表（Page Table, PT）。页目录（PD）中有多个条目，每个条目恰好引用一个页表（PT）。每个页表（PT）包含 $E_{2}$ 个条目。每个页表条目映射一个大小为 $P$ 字节的页面。根据构造，单个页目录条目因此管理一段大小为 $A$ 的连续虚拟地址，其中 $A = E_{2} \\times P$。由页目录条目管理的地址范围互不重叠，并在作为 $A$ 整数倍的边界上对虚拟地址空间进行分区。\n\n假设一个进程需要映射一个大小为 $R$ 字节的连续虚拟内存区域。该区域的起始地址与 $A$ 对齐，意味着起始地址是 $A$ 的整数倍。任何覆盖该区域至少一个字节的页目录条目都必须存在（它可能引用一个部分填充的页表），并且即使其对应的页表仅被部分使用，页目录条目也会被计入总数。假设 $R > 0$ 且 $A > 0$。\n\n仅使用上面给出的分层分页的定义以及起始地址与 $A$ 对齐会将区域的起始点置于页目录边界这一事实，推导出一个用于覆盖整个区域所需的最少顶层条目数（表示为 $n_{\\text{top}}$）的闭式解析表达式。最终答案仅用 $R$ 和 $A$ 表示。不需要进行数值舍入。",
            "solution": "用户请求解答一个关于虚拟内存系统中分层分页的问题。第一步是验证问题陈述。\n\n### 步骤1：提取已知条件\n- 系统使用两级分层分页方案。\n- 顶层结构是页目录（PD）。\n- 第二层结构是页表（PT）。\n- 每个PD条目引用一个PT。\n- 每个PT包含 $E_{2}$ 个条目。\n- 每个PT条目映射一个大小为 $P$ 字节的页面。\n- 单个PD条目管理一段大小为 $A$ 的连续虚拟地址，其中 $A = E_{2} \\times P$。\n- PD条目所管理的地址范围互不重叠，并在作为 $A$ 整数倍的边界上对虚拟地址空间进行分区。\n- 一个进程需要映射一个大小为 $R$ 字节的连续虚拟内存区域。\n- 该区域的起始地址与 $A$ 对齐（即，它是 $A$ 的整数倍）。\n- 任何覆盖该区域至少一个字节的PD条目都必须存在。\n- $R > 0$ 且 $A > 0$。\n- 目标是找到覆盖该区域所需的最少顶层条目数 $n_{\\text{top}}$ 的闭式表达式，用 $R$ 和 $A$ 表示。\n\n### 步骤2：使用提取的已知条件进行验证\n根据指定的标准对问题进行验证。\n\n- **科学基础**：该问题描述了一个简化但标准的分层分页模型，这是操作系统中的一个基本概念。页目录、页表、页面大小和地址空间分区之间的关系与既定的计算机体系结构和操作系统原理一致。该问题在科学上是合理的。\n- **适定性**：该问题要求在明确的约束条件（连续区域、特定大小 $R$ 以及起始地址与 $A$ 对齐）下所需的最少条目数。参数 $R$ 和 $A$ 已给出，目标是找到 $n_{\\text{top}}$。对齐约束简化了情景，确保了唯一最小解的存在。\n- **客观性**：问题陈述使用了精确的技术语言（例如，“连续虚拟内存区域”、“与 $A$ 对齐”、“互不重叠”）。没有主观或模棱两可的术语。\n- **不完整或矛盾的设置**：该问题提供了确定顶层条目数量所需的所有必要信息。需要映射的区域大小（$R$）和单个顶层条目所跨越的地址空间大小（$A$）是计算所需的唯二变量，并且都以符号形式给出。起始地址的对齐是一个关键且不矛盾的约束。\n- **不切实际或不可行**：该模型是一个抽象，但它在物理上并非不可能，在科学上也不是难以置信的。它代表了一个有效但理想化的内存管理情景。\n- **其他缺陷**：该问题不是隐喻性的、琐碎的、同义反复的，也不在科学可验证性范围之外。这是一个需要基于所提供模型进行逻辑推导的形式化问题。\n\n### 步骤3：结论与行动\n问题是有效的。可以进行严格的解答推导。\n\n### 解答推导\n\n目标是找到映射一个大小为 $R$ 字节的连续内存区域所需的最小顶层页目录条目数 $n_{\\text{top}}$。\n\n我们将虚拟地址空间表示为从地址 $0$ 开始的数轴。顶层页目录条目将此空间划分为连续、不重叠的块。每个块或范围的大小为 $A$。这些范围的边界出现在地址 $0, A, 2A, 3A, \\dots, kA, \\dots$ 处，其中 $k$ 为非负整数。第 $k$ 个这样的范围（对于 $k \\ge 0$）覆盖了虚拟地址区间 $[kA, (k+1)A)$。\n\n问题陈述指出，要映射的内存区域大小为 $R$，其起始地址与 $A$ 对齐。设该区域的起始地址为 $S$。对齐约束意味着 $S$ 是 $A$ 的整数倍。因此，我们可以写成 $S = m \\cdot A$，其中 $m$ 是某个非负整数。\n\n从地址 $S$ 开始的大小为 $R$ 的连续区域占据了虚拟地址的半开区间 $[S, S+R)$。代入 $S = m \\cdot A$，该区域为 $[m \\cdot A, m \\cdot A + R)$。\n\n我们需要找到覆盖整个区域所需的最少顶层条目数 $n_{\\text{top}}$。由于该区域的起始点恰好位于一个由页目录条目管理的地址范围的边界上，因此所需的第一个条目就是覆盖从 $S = m \\cdot A$ 开始的那个范围的条目。\n\n设 $n_{\\text{top}}$ 为所使用的连续顶层条目数。这些条目将从用于范围 $[m \\cdot A, (m+1)A)$ 的那个条目开始，总共持续 $n_{\\text{top}}$ 个条目。这 $n_{\\text{top}}$ 个连续条目所覆盖的总虚拟地址范围将从起始地址 $S$ 到 $S + n_{\\text{top}} \\cdot A$。也就是说，它们覆盖了地址区间 $[S, S + n_{\\text{top}} \\cdot A)$。\n\n为了映射大小为 $R$ 的整个区域，它所占据的地址范围 $[S, S+R)$ 必须是已分配的页目录条目所覆盖的地址范围 $[S, S + n_{\\text{top}} \\cdot A)$ 的子集。\n$$[S, S+R) \\subseteq [S, S + n_{\\text{top}} \\cdot A)$$\n当且仅当区域区间的终点小于或等于所覆盖区间的终点时，此子集条件才成立。\n$$S + R \\le S + n_{\\text{top}} \\cdot A$$\n从不等式两边减去 $S$ 可得：\n$$R \\le n_{\\text{top}} \\cdot A$$\n由于问题指定 $A > 0$，我们可以用 $A$ 去除不等式两边而不改变不等号的方向：\n$$n_{\\text{top}} \\ge \\frac{R}{A}$$\n变量 $n_{\\text{top}}$ 代表页目录条目的数量，因此它必须是一个整数。我们正在寻找*最少*的条目数，这意味着我们必须找到满足条件 $n_{\\text{top}} \\ge \\frac{R}{A}$ 的最小整数 $n_{\\text{top}}$。\n\n根据定义，大于或等于实数 $x$ 的最小整数是 $x$ 的向上取整，表示为 $\\lceil x \\rceil$。因此，所需的最少顶层条目数为：\n$$n_{\\text{top}} = \\left\\lceil \\frac{R}{A} \\right\\rceil$$\n该表达式是仅用 $R$ 和 $A$ 表示的闭式解析表达式，符合要求。",
            "answer": "$$\n\\boxed{\\left\\lceil \\frac{R}{A} \\right\\rceil}\n$$"
        },
        {
            "introduction": "在掌握了区域覆盖的基础知识后，我们来深入探究整个页表层次结构的成本和复杂性。这个练习  提出了一个实际场景：操作系统为了兼容性或效率而限制了虚拟地址宽度，尽管硬件支持更宽的地址。你需要计算这种限制如何改变页表的深度，并量化其对页表自身所占内存的巨大影响，这揭示了操作系统设计中的一个关键权衡。",
            "id": "3647721",
            "problem": "某个操作系统在一套支持最大虚拟地址宽度为 $v = 57$ 位的硬件上实现了分层分页，但该操作系统将进程的最大虚拟地址宽度限制为 $v' = 48$ 位。该系统使用的页面大小为 $4$ KiB，页表条目大小为 $8$ 字节，并且每个页表页都是一个单独的硬件页面。假设所有页表级别的分支因子均一，且该层次结构使用足以索引所有非偏移位所需的级别数，不使用大页面。页面遍历深度定义为从根开始遍历以到达叶子页表条目所经过的页表级别数。页面偏移量宽度 $p$ 由页面大小定义，并假设每个级别的索引位数由每个页表页中的条目数决定。假设操作系统使用足以索引所有非偏移位的最少级别数。\n\n仅使用以下基本事实：\n- 虚拟地址被划分为 $p$ 个页面偏移位和在层次结构各级中消耗的 $(v - p)$ 个索引位。\n- 一个大小为 $S$ 字节的页表页，其中包含大小为 $E$ 字节的页表条目，总共可以容纳 $S/E$ 个条目；因此，每个级别消耗 $\\log_{2}(S/E)$ 个索引位。\n- 为了覆盖所有索引位，级别数 $L$ 必须满足 $L \\cdot \\log_{2}(S/E) \\geq v - p$，其中 $L$ 为满足条件的最小整数。\n\n计算以下两项：\n1. 在操作系统限制下的页面遍历深度，记为 $L'$。\n2. 在完全且密集地映射操作系统允许的整个最大进程虚拟地址空间与硬件支持的最大虚拟地址空间时，上层分配的减少量。此处，“上层分配”指完全映射整个最大虚拟地址空间所需的非叶子页表页的总数（即，严格位于最后一级页表条目之上的每一级的所有页表页）。将此减少量报告为绝对差值 $U - U'$，其中 $U$ 是在 $v$ 条件下的非叶子页表页总数，$U'$ 是在 $v'$ 条件下的总数。\n\n将最终答案表示为行矩阵 $(\\text{减少量}, L')$。不需要单位。不要四舍五入，请给出精确值。",
            "solution": "该问题陈述经核实具有科学依据、提法得当且客观。它提供了一套完整且一致的参数，用于建模和解决一个关于操作系统中分层页表结构的标准问题。满足有效问题的所有条件。因此，我们可以进行正式求解。\n\n目标是计算两个值：操作系统虚拟地址约束下的页面遍历深度 $L'$，以及在完全、密集地映射操作系统约束的地址空间与硬件最大地址空间时，非叶子页表页数量的减少量 $U - U'$。\n\n首先，我们根据所提供的数据确定分页系统的基本参数。\n页面大小给定为 $S = 4$ KiB。以字节为单位，即 $S = 4 \\times 2^{10} = 2^2 \\times 2^{10} = 2^{12}$ 字节。\n页面偏移位数 $p$ 由页面大小决定：\n$$p = \\log_{2}(S) = \\log_{2}(2^{12}) = 12 \\text{ bits}$$\n页表条目 (PTE) 的大小给定为 $E = 8$ 字节，即 $2^3$ 字节。\n由于每个页表都包含在单个硬件页面内，因此一个页表的大小为 $S = 2^{12}$ 字节。单个页表中可以存储的 PTE 数量为：\n$$N_{entries} = \\frac{S}{E} = \\frac{2^{12}}{2^3} = 2^9 = 512$$\n页表层次结构每个级别消耗的索引位数是统一的，并对应于每个页表中条目数的对数：\n$$i = \\log_{2}(N_{entries}) = \\log_{2}(2^9) = 9 \\text{ bits}$$\n\n确定了这些参数后，我们可以分析两种指定的虚拟地址空间配置。\n\n**1. 操作系统约束的虚拟地址空间 ($v'$)**\n\n操作系统将虚拟地址宽度限制为 $v' = 48$ 位。\n必须由页表层次结构索引的总位数为虚拟地址宽度减去偏移位数：\n$$\\text{索引位数}' = v' - p = 48 - 12 = 36 \\text{ bits}$$\n页表级别数 $L'$ 是满足条件 $L' \\cdot i \\geq \\text{索引位数}'$ 的最小整数。\n$$L' \\cdot 9 \\geq 36 \\implies L' \\geq \\frac{36}{9} \\implies L' \\geq 4$$\n满足此条件的最小整数是 $L' = 4$。这是操作系统约束系统的页面遍历深度。\n\n接下来，我们计算完全映射这整个 $48$ 位地址空间所需的非叶子（上层）页表页的总数 $U'$。对于一个 4 级层次结构，非叶子级别是第 1、2 和 3 级。完全映射需要在每个级别上进行几何扩展。\n-   第 1 级（根页表）：$N'_1 = 1$ 页。\n-   第 2 级：第 1 级的表有 $2^9$ 个条目，因此完全映射需要 $N'_2 = 2^9$ 页。\n-   第 3 级：$2^9$ 个第 2 级表中的每一个都有 $2^9$ 个条目，需要 $N'_3 = 2^9 \\times 2^9 = 2^{18}$ 页。\n第 4 级是叶子级别，包含指向数据页的 PTE，因此不计入上层分配的数量中。\n非叶子页的总数是以下各项之和：\n$$U' = N'_1 + N'_2 + N'_3 = 1 + 2^9 + 2^{18}$$\n\n**2. 硬件最大虚拟地址空间 ($v$)**\n\n硬件支持的最大虚拟地址宽度为 $v = 57$ 位。\n需要索引的总位数为：\n$$\\text{索引位数} = v - p = 57 - 12 = 45 \\text{ bits}$$\n页表级别数 $L$ 是满足 $L \\cdot i \\geq \\text{索引位数}$ 的最小整数。\n$$L \\cdot 9 \\geq 45 \\implies L \\geq \\frac{45}{9} \\implies L \\geq 5$$\n满足此条件的最小整数是 $L = 5$。硬件支持一个 5 级页表层次结构。\n\n完全映射 57 位地址空间所需的非叶子页表页总数 $U$，是通过将非叶子级别（即第 1、2、3 和 4 级）的页数相加来计算的。\n-   第 1 级：$N_1 = 1$ 页。\n-   第 2 级：$N_2 = 2^9$ 页。\n-   第 3 级：$N_3 = 2^9 \\times 2^9 = 2^{18}$ 页。\n-   第 4 级：$N_4 = 2^{18} \\times 2^9 = 2^{27}$ 页。\n第 5 级是叶子级别，不计入在内。\n非叶子页的总数是以下各项之和：\n$$U = N_1 + N_2 + N_3 + N_4 = 1 + 2^9 + 2^{18} + 2^{27}$$\n\n**3. 最终计算**\n\n现在我们可以计算所需的两个量。\n首先，操作系统限制下的页面遍历深度 $L'$ 为 $4$。\n其次，上层分配的减少量 $U - U'$ 为：\n$$U - U' = (1 + 2^9 + 2^{18} + 2^{27}) - (1 + 2^9 + 2^{18})$$\n$$U - U' = 2^{27}$$\n其数值为：\n$$2^{27} = 134,217,728$$\n\n问题要求将结果表示为行矩阵 $(\\text{减少量}, L')$。\n减少量为 $134,217,728$，$L'$ 为 $4$。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n134217728 & 4\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "标准的分层页表虽然灵活，但在映射大块连续内存时可能因需要大量页表条目（PTE）而变得低效。现代操作系统通过支持混合页面大小（即“大页”或“巨页”）来解决这个问题。这个练习  让你扮演操作系统设计者的角色，要求你使用不同大小的页面（$4 \\text{ KiB}$、$2 \\text{ MiB}$ 和 $1 \\text{ GiB}$）来优化内存映射，以最小化PTE的数量。这是一个高级实践，它将引导你思考如何利用对齐和连续性约束，通过贪心策略实现性能优化。",
            "id": "3647756",
            "problem": "一个操作系统 (OS) 在 $64$位架构上使用四级分层页表，并支持来自集合 $S=\\{4 \\text{ KiB}, 2 \\text{ MiB}, 1 \\text{ GiB}\\}$ 的混合页面大小。一个大小为 $p \\in S$ 的页面只有在其虚拟基地址与 $p$ 字节对齐，并且整个 $p$ 字节区域被连续映射且无空洞时，才能用作叶映射。考虑映射一个大小为 $R$ 字节的连续虚拟区域，其中该区域的一部分（比例为 $f$，表示为 $[0,1)$ 内的小数）以 $4 \\text{ KiB}$ 的基本页面粒度被有意地留作未映射的空洞。假设如下：\n\n- $R$ 是 $4 \\text{ KiB}$ 的正整数倍，即对于某个整数 $n \\geq 1$，有 $R = n \\cdot 4 \\text{ KiB}$。\n- 未映射的基本页面数量恰好是 $f n$，因此 $(1-f)R$ 也是 $4 \\text{ KiB}$ 的整数倍。\n- 操作系统可以选择区域内空洞的位置以及区域的基虚拟地址。特别地，它可以将区域基地址在 $1 \\text{ GiB}$ 边界上对齐，以最小化叶项的数量。\n- 此处页表项 (PTE) 定义为其各自级别上的单个叶映射：级别 $1$ 的 $4 \\text{ KiB}$ PTE，级别 $2$ 的 $2 \\text{ MiB}$ PTE，或级别 $3$ 的 $1 \\text{ GiB}$ PTE。不计算非叶项。\n\n仅使用分层页表的基本属性（对齐和连续性约束）以及页面大小 $4 \\text{ KiB}=2^{12}$ 字节、$2 \\text{ MiB}=2^{21}$ 字节和 $1 \\text{ GiB}=2^{30}$ 字节，推导出一个关于 $R$ 和 $f$ 的闭式表达式，表示在上述约束下映射该区域所需的最少叶 PTE 数量。您可以使用向下取整函数 $\\lfloor \\cdot \\rfloor$、向上取整函数 $\\lceil \\cdot \\rceil$ 和模运算 $\\bmod$。您的最终答案必须是单一的解析表达式。不需要四舍五入，最终表达式中不应包含单位。",
            "solution": "该问题是有效的，因为它科学地基于操作系统内存管理的原理，特别是分层页表和大型页面（巨页）的使用。该问题定义明确、客观，并包含足够的信息来推导出唯一的最小解。\n\n目标是找到映射一个大小为 $R$ 的虚拟内存区域所需的最少叶页表项 (PTE) 数量。该区域包含未映射的空洞，已映射部分的总大小为 $(1-f)R$。操作系统可以自由选择区域的基虚拟地址和空洞的位置。为了最小化 PTE 的数量，必须最大化使用可用的最大页面大小。\n\n可用的页面大小为 $P_3 = 1\\ \\text{GiB} = 2^{30}$ 字节，$P_2 = 2\\ \\text{MiB} = 2^{21}$ 字节，以及 $P_1 = 4\\ \\text{KiB} = 2^{12}$ 字节。一个大小为 $p$ 的页面只有在大小为 $p$ 的虚拟地址块在 $p$ 字节边界上对齐且被完全映射（连续，无空洞）时才能使用。\n\n为了在最小化 PTE 数量的同时满足这些约束，操作系统的最优策略如下：\n1.  **对齐区域**：操作系统应将大小为 $R$ 的整个虚拟区域的基地址在 $1\\ \\text{GiB}$ 边界上对齐。这能确保区域的起始地址对于最大页面大小 $P_3$ 是最优对齐的。为简单起见，不失一般性，我们假设该区域从虚拟地址 $0$ 开始。\n2.  **合并空洞**：为了最大化连续已映射内存的大小，操作系统应将所有未映射的 $4\\ \\text{KiB}$ 页面（即空洞）放在一起。最佳位置是区域的末尾。这会在区域的开头创建一个单一的、连续的已映射内存块。任何其他空洞的排列方式都会使已映射区域碎片化，从而破坏潜在的大页面映射，进而增加 PTE 的总数。\n\n采用此策略后，我们得到一个大小为 $M = (1-f)R$ 的单一连续已映射块。该块从虚拟地址 $0$（这是 $1\\ \\text{GiB}$ 对齐的）开始，延伸到地址 $M-1$。区域的剩余部分，从地址 $M$ 到 $R-1$，是未映射的。\n\n现在，我们可以贪心地使用最大的页面优先来覆盖这个大小为 $M$ 的已映射块。\n\n**步骤 1：使用 $1\\ \\text{GiB}$ 页面 ($P_3$) 进行映射**\n已映射区域为 $[0, M-1]$。由于该区域从一个 $1\\ \\text{GiB}$ 对齐的地址开始，我们可以使用尽可能多的完整 $1\\ \\text{GiB}$ 页面。此类页面的数量 $N_3$ 是 $P_3$ 完全装入 $M$ 的次数。\n$$N_3 = \\left\\lfloor \\frac{M}{P_3} \\right\\rfloor = \\left\\lfloor \\frac{(1-f)R}{2^{30}} \\right\\rfloor$$\n这些页面覆盖了从地址 $0$ 到 $N_3 \\cdot P_3 - 1$ 的内存范围。\n\n**步骤 2：使用 $2\\ \\text{MiB}$ 页面 ($P_2$) 进行映射**\n在使用 $1\\ \\text{GiB}$ 页面映射后，剩余待映射的内存大小为 $M_{\\text{rem},2} = M - N_3 \\cdot P_3 = M \\bmod P_3$。这个剩余块的起始地址为 $N_3 \\cdot P_3$，该地址与 $P_3 = 2^9 \\cdot P_2$ 对齐，因此也与 $P_2$ 对齐。我们可以贪心地用 $2\\ \\text{MiB}$ 页面来覆盖这个剩余块。$2\\ \\text{MiB}$ 页面的数量 $N_2$ 是：\n$$N_2 = \\left\\lfloor \\frac{M_{\\text{rem},2}}{P_2} \\right\\rfloor = \\left\\lfloor \\frac{M \\bmod P_3}{P_2} \\right\\rfloor = \\left\\lfloor \\frac{((1-f)R) \\bmod 2^{30}}{2^{21}} \\right\\rfloor$$\n这些页面覆盖了从地址 $N_3 \\cdot P_3$ 到 $N_3 \\cdot P_3 + N_2 \\cdot P_2 - 1$ 的内存范围。\n\n**步骤 3：使用 $4\\ \\text{KiB}$ 页面 ($P_1$) 进行映射**\n在使用 $2\\ \\text{MiB}$ 页面后，最后剩余待映射的内存部分大小为 $M_{\\text{rem},1} = M_{\\text{rem},2} - N_2 \\cdot P_2 = M_{\\text{rem},2} \\bmod P_2$。由于 $P_3$ 是 $P_2$ 的整数倍，因此 $(M \\bmod P_3) \\bmod P_2 = M \\bmod P_2$。所以，$M_{\\text{rem},1} = M \\bmod P_2$。这个剩余块的起始地址为 $N_3 \\cdot P_3 + N_2 \\cdot P_2$，该地址与 $P_2=2^9 \\cdot P_1$ 对齐，因此也与 $P_1$ 对齐。问题陈述保证了总的已映射内存 $M=(1-f)R$ 是基本页面大小 $P_1 = 4\\ \\text{KiB}$ 的整数倍。由于被 $P_3$ 和 $P_2$ 页面覆盖的部分也是 $P_1$ 的倍数，所以剩余大小 $M_{\\text{rem},1}$ 也必须是 $P_1$ 的倍数。因此，这最后的剩余部分可以用 $4\\ \\text{KiB}$ 页面完美地覆盖。此类页面的数量 $N_1$ 是：\n$$N_1 = \\frac{M_{\\text{rem},1}}{P_1} = \\frac{M \\bmod P_2}{P_1} = \\frac{((1-f)R) \\bmod 2^{21}}{2^{12}}$$\n\n**总叶 PTE 数量**\n最少的总叶 PTE 数量 $N_{PTE}$ 是各级 PTE 的总和：\n$$N_{PTE} = N_3 + N_2 + N_1$$\n代入上面推导出的表达式，我们得到关于 $R$ 和 $f$ 的最终闭式表达式：\n$$N_{PTE}(R, f) = \\left\\lfloor \\frac{(1-f)R}{2^{30}} \\right\\rfloor + \\left\\lfloor \\frac{((1-f)R) \\bmod 2^{30}}{2^{21}} \\right\\rfloor + \\frac{((1-f)R) \\bmod 2^{21}}{2^{12}}$$\n此表达式代表了最优贪心覆盖策略的结果，该策略之所以可行，是由于操作系统能够对齐内存区域并合并未映射的空洞。",
            "answer": "$$\\boxed{\\left\\lfloor \\frac{(1-f)R}{2^{30}} \\right\\rfloor + \\left\\lfloor \\frac{((1-f)R) \\bmod 2^{30}}{2^{21}} \\right\\rfloor + \\frac{((1-f)R) \\bmod 2^{21}}{2^{12}}}$$"
        }
    ]
}