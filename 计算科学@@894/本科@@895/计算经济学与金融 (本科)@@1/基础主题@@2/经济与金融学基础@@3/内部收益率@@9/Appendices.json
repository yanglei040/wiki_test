{"hands_on_practices": [{"introduction": "计算一个给定项目的内部收益率（IRR）是基本功，但反向设计一个项目来达到特定的回报率目标则能带来更深的洞察。本练习 [@problem_id:2403035] 让你从一个给定的 IRR ($r=100\\%$) 出发，反向推导出实现该回报率所需的现金流结构。这不仅能锻炼你处理几何级数的代数技巧，还能让你对现金流的规模及时机如何影响回报率形成更深刻的直观认识。", "id": "2403035", "problem": "一个项目在整数时间 $t=0,1,\\dots,n$ 产生现金流。在时间 $t=0$ 时，现金流为 $-I$，其中 $I>0$。在每个时间 $t=1,2,\\dots,n$，该项目支付一笔恒定的现金流 $A$。内部收益率 (IRR) 定义为使净现值满足以下条件的收益率 $r$：\n$$\\sum_{t=0}^{n} \\frac{\\mathrm{CF}_t}{(1+r)^{t}}=0,$$\n其中 $\\mathrm{CF}_t$ 表示在时间 $t$ 的现金流。假设 IRR 等于 $r=1$。请求出比率 $A/I$ 的值，以 $n$ 的闭式解析表达式表示。提供的答案应为一个简化的单一表达式，不带单位，也无需四舍五入。", "solution": "问题陈述科学严谨、定义明确、客观，并包含足够的信息以得出唯一解。我们继续进行推导。\n\n内部收益率 (IRR)，记作 $r$，其定义为使一系列现金流 $\\mathrm{CF}_t$ 的净现值 (NPV) 为零的条件。NPV 的计算公式如下：\n$$ \\sum_{t=0}^{n} \\frac{\\mathrm{CF}_t}{(1+r)^{t}}=0 $$\n问题指明了一个项目在 $n+1$ 个时期内的现金流。在时间 $t=0$ 时，现金流为初始投资，因此 $\\mathrm{CF}_0 = -I$，其中 $I > 0$。在随后的时间 $t=1, 2, \\dots, n$，该项目产生恒定的回报，因此 $\\mathrm{CF}_t = A$。\n\n将这些具体的现金流代入 NPV 方程，我们得到：\n$$ \\frac{\\mathrm{CF}_0}{(1+r)^{0}} + \\sum_{t=1}^{n} \\frac{\\mathrm{CF}_t}{(1+r)^{t}} = 0 $$\n$$ \\frac{-I}{1} + \\sum_{t=1}^{n} \\frac{A}{(1+r)^{t}} = 0 $$\n我们可以将恒定的现金流 $A$ 从求和项中提出：\n$$ -I + A \\sum_{t=1}^{n} \\frac{1}{(1+r)^{t}} = 0 $$\n问题陈述该项目的 IRR 为 $r=1$。我们必须将这个值代入我们的方程中：\n$$ -I + A \\sum_{t=1}^{n} \\frac{1}{(1+1)^{t}} = 0 $$\n$$ -I + A \\sum_{t=1}^{n} \\left(\\frac{1}{2}\\right)^{t} = 0 $$\n求和项是一个有限几何级数。一个有限几何级数 $\\sum_{k=1}^{n} x^k$ 的和为 $x \\frac{1-x^n}{1-x}$。在我们的例子中，公比为 $x = \\frac{1}{2}$。应用此公式，我们求得该和的值：\n$$ \\sum_{t=1}^{n} \\left(\\frac{1}{2}\\right)^{t} = \\left(\\frac{1}{2}\\right) \\frac{1 - \\left(\\frac{1}{2}\\right)^n}{1 - \\frac{1}{2}} = \\left(\\frac{1}{2}\\right) \\frac{1 - \\frac{1}{2^n}}{\\frac{1}{2}} = 1 - \\frac{1}{2^n} $$\n现在，我们将此结果代回主方程中：\n$$ -I + A \\left(1 - \\frac{1}{2^n}\\right) = 0 $$\n我们的目标是确定比率 $A/I$。我们重新整理方程以求解该比率：\n$$ A \\left(1 - \\frac{1}{2^n}\\right) = I $$\n两边同除以 $I$ 得到：\n$$ \\frac{A}{I} \\left(1 - \\frac{1}{2^n}\\right) = 1 $$\n分离出比率 $A/I$ 可得：\n$$ \\frac{A}{I} = \\frac{1}{1 - \\frac{1}{2^n}} $$\n为了将其表示为一个简化的闭式表达式，我们合并分母中的各项：\n$$ \\frac{A}{I} = \\frac{1}{\\frac{2^n - 1}{2^n}} $$\n最后，取分母的倒数得到结果：\n$$ \\frac{A}{I} = \\frac{2^n}{2^n - 1} $$\n这就是比率 $A/I$ 作为 $n$ 的函数的闭式解析表达式。", "answer": "$$\\boxed{\\frac{2^n}{2^n - 1}}$$"}, {"introduction": "在现实世界中，公司常常需要评估由多个独立项目构成的投资组合。此练习 [@problem_id:2403026] 揭示了 IRR 的一个关键却非直观的特性：投资组合的 IRR 并非各项目 IRR 的简单加权平均值。这背后的原因是净现值（NPV）与折现率之间的非线性关系，通过本练习的计算和论证，你将学会避免这一常见误区，并理解为何必须基于组合后的总现金流来重新计算回报率。", "id": "2403026", "problem": "一家公司评估两个独立的、规模固定的项目，其年度现金流如下。时间以年为单位，现金流发生在每年年末。项目A的现金流为 $C^{A}_{0}=-100$，$C^{A}_{1}=+60$，$C^{A}_{2}=+60$。项目B的现金流为 $C^{B}_{0}=-100$，$C^{B}_{1}=+0$，$C^{B}_{2}=+130$。该公司通过投资一个单位的项目A和一个单位的项目B来构建一个投资组合，因此该投资组合的现金流为 $C^{P}_{t}=C^{A}_{t}+C^{B}_{t}$，其中 $t\\in\\{0,1,2\\}$。\n\n根据定义，内部收益率 (IRR) 是使净现值 (NPV) 为零的数值 $r$，即对于给定的现金流序列 $\\{C_{t}\\}_{t=0}^{T}$，有 $\\sum_{t=0}^{T}\\frac{C_{t}}{(1+r)^{t}}=0$。\n\n仅使用此定义，计算该投资组合的IRR，并使用基于NPV定义的方程来证明，为什么该投资组合的IRR不是以初始投资额为权重的各单个项目IRR的简单加权平均。仅报告投资组合的IRR，以小数形式表示，并将答案四舍五入到四位有效数字。不要使用百分号。", "solution": "问题陈述已经过验证，被认为是科学合理的、形式完善且客观的。这是一个计算金融学中的标准问题。\n\n首先，我们确定投资组合的现金流。该投资组合包含一个单位的项目A和一个单位的项目B。在时间 $t$ 的投资组合现金流（记作 $C^{P}_{t}$）是各个项目现金流的总和，即 $C^{P}_{t} = C^{A}_{t} + C^{B}_{t}$。\n\n给定的现金流如下：\n项目A：$C^{A}_{0}=-100$，$C^{A}_{1}=+60$，$C^{A}_{2}=+60$。\n项目B：$C^{B}_{0}=-100$，$C^{B}_{1}=+0$，$C^{B}_{2}=+130$。\n\n由此产生的投资组合现金流为：\n$C^{P}_{0} = C^{A}_{0} + C^{B}_{0} = -100 + (-100) = -200$。\n$C^{P}_{1} = C^{A}_{1} + C^{B}_{1} = 60 + 0 = 60$。\n$C^{P}_{2} = C^{A}_{2} + C^{B}_{2} = 60 + 130 = 190$。\n\n投资组合的内部收益率 (IRR)，我们记为 $r_{P}$，是使该投资组合现金流的净现值 (NPV) 为零的折现率。投资组合的NPV由以下方程给出：\n$$\n\\text{NPV}_{P}(r) = \\sum_{t=0}^{2} \\frac{C^{P}_{t}}{(1+r)^{t}} = C^{P}_{0} + \\frac{C^{P}_{1}}{1+r} + \\frac{C^{P}_{2}}{(1+r)^{2}}\n$$\n令 $\\text{NPV}_{P}(r_{P}) = 0$：\n$$\n-200 + \\frac{60}{1+r_{P}} + \\frac{190}{(1+r_{P})^{2}} = 0\n$$\n为了解出 $r_{P}$，我们引入换元 $x = \\frac{1}{1+r_{P}}$。方程变为关于 $x$ 的二次方程：\n$$\n190x^{2} + 60x - 200 = 0\n$$\n方程两边同除以 $10$ 可简化为：\n$$\n19x^{2} + 6x - 20 = 0\n$$\n我们使用二次方程求根公式 $x = \\frac{-b \\pm \\sqrt{b^{2}-4ac}}{2a}$ 来求解 $x$：\n$$\nx = \\frac{-6 \\pm \\sqrt{6^{2} - 4(19)(-20)}}{2(19)} = \\frac{-6 \\pm \\sqrt{36 + 1520}}{38} = \\frac{-6 \\pm \\sqrt{1556}}{38}\n$$\n由于 $r_{P}$ 代表一项常规投资的利率，我们预期 $1+r_{P} > 0$，这意味着 $x = \\frac{1}{1+r_{P}}$ 必须为正。因此，我们取正根：\n$$\nx = \\frac{-6 + \\sqrt{1556}}{38} = \\frac{-6 + 2\\sqrt{389}}{38} = \\frac{-3 + \\sqrt{389}}{19}\n$$\n使用数值近似 $\\sqrt{389} \\approx 19.72308$，我们得到：\n$$\nx \\approx \\frac{-3 + 19.72308}{19} = \\frac{16.72308}{19} \\approx 0.880162\n$$\n现在我们从换元式 $x = \\frac{1}{1+r_{P}}$ 中解出 $r_{P}$：\n$$\n1+r_{P} = \\frac{1}{x} \\approx \\frac{1}{0.880162} \\approx 1.136154\n$$\n$$\nr_{P} \\approx 1.136154 - 1 = 0.136154\n$$\n四舍五入到四位有效数字，投资组合的IRR为 $0.1362$。\n\n接下来，我们必须证明为什么投资组合的IRR不是各单个项目IRR的简单加权平均。设 $r_{A}$ 和 $r_{B}$ 分别为项目A和项目B的IRR。它们由各自NPV方程的根定义：\n$$\n\\text{NPV}_{A}(r_{A}) = \\sum_{t=0}^{2} \\frac{C^{A}_{t}}{(1+r_{A})^{t}} = -100 + \\frac{60}{1+r_{A}} + \\frac{60}{(1+r_{A})^{2}} = 0\n$$\n$$\n\\text{NPV}_{B}(r_{B}) = \\sum_{t=0}^{2} \\frac{C^{B}_{t}}{(1+r_{B})^{t}} = -100 + \\frac{0}{1+r_{B}} + \\frac{130}{(1+r_{B})^{2}} = 0\n$$\n投资组合的IRR，$r_{P}$，由该投资组合NPV方程的根定义：\n$$\n\\text{NPV}_{P}(r_{P}) = \\sum_{t=0}^{2} \\frac{C^{P}_{t}}{(1+r_{P})^{t}} = \\sum_{t=0}^{2} \\frac{C^{A}_{t} + C^{B}_{t}}{(1+r_{P})^{t}} = 0\n$$\n根据求和的可加性，这可以表示为：\n$$\n\\sum_{t=0}^{2} \\frac{C^{A}_{t}}{(1+r_{P})^{t}} + \\sum_{t=0}^{2} \\frac{C^{B}_{t}}{(1+r_{P})^{t}} = 0\n$$\n这等价于表述为 $\\text{NPV}_{A}(r_{P}) + \\text{NPV}_{B}(r_{P}) = 0$。\n\n各个IRR的加权平均值，其权重 $w_{A}$ 和 $w_{B}$ 与初始投资额 $|C^{A}_{0}|=100$ 和 $|C^{B}_{0}|=100$ 成正比，应为 $r_{\\text{avg}} = w_{A}r_{A} + w_{B}r_{B}$。由于初始投资额相等，权重为 $w_A=w_B=0.5$，平均值为 $r_{\\text{avg}} = \\frac{r_{A}+r_{B}}{2}$。\n\n$r_{P} = r_{\\text{avg}}$ 的断言是不正确的。根本原因在于NPV函数相对于折现率 $r$ 的非线性。IRR是方程 $\\text{NPV}(r)=0$ 的一个根。两个非线性函数之和的方程 $\\text{NPV}_{A}(r) + \\text{NPV}_{B}(r) = 0$ 的根，通常不是各单个函数方程 $\\text{NPV}_{A}(r_{A})=0$ 和 $\\text{NPV}_{B}(r_{B})=0$ 的根的简单平均值。\n\n准确地说，NPV和 $r$ 之间的关系涉及 $(1+r)^{-t}$ 形式的项，这些是关于 $r$ 的非线性函数。要使根具有加权平均这样的性质，函数需要是关于变量的线性函数。例如，如果 $\\text{NPV}(r)$ 是 $r$ 的线性函数，比如 $\\text{NPV}_{i}(r) = k_{i}(r_{i}-r)$，那么 $\\text{NPV}_{P}(r) = k_{A}(r_{A}-r) + k_{B}(r_{B}-r)$。令其为零将得到 $r_{P} = \\frac{k_{A}}{k_{A}+k_{B}}r_{A} + \\frac{k_{B}}{k_{A}+k_{B}}r_{B}$，这是一个加权平均值。然而，NPV函数显然不是关于 $r$ 的线性函数。\n\n因此，方程 $\\text{NPV}_{A}(r_{P}) + \\text{NPV}_{B}(r_{P}) = 0$ 必须直接求解 $r_{P}$，其解不能被假定为 $r_{A}$ 和 $r_{B}$ 的线性组合。对于非线性函数而言，求根运算与函数求和运算不满足交换律。这就构成了对“投资组合IRR是其组成部分IRR的简单加权平均”这一观点的形式上的反驳。\n\n计算出的投资组合IRR是 $r_{P} \\approx 0.136154$。为完整起见，单个项目的IRR分别为 $r_{A} = \\frac{6}{\\sqrt{69}-3}-1 \\approx 0.1307$ 和 $r_{B} = \\sqrt{1.3}-1 \\approx 0.1402$。加权平均值为 $r_{\\text{avg}} \\approx \\frac{0.1307+0.1402}{2} \\approx 0.1355$。正如形式论证和显式计算所表明的那样，$r_{P} \\neq r_{\\text{avg}}$。\n最终答案是四舍五入到四位有效数字的投资组合IRR。\n$r_{P} \\approx 0.1362$。", "answer": "$$\n\\boxed{0.1362}\n$$"}, {"introduction": "IRR 的一个核心应用是在资本预算中，帮助决策者判断项目是否值得投资。本练习 [@problem_id:2403010] 将 IRR 的计算与这一实际决策场景相结合，要求你将其与代表最低可接受回报率的“门槛收益率”（$h$）进行比较。这项实践将使你掌握如何确定一个项目在保持财务吸引力的情况下所能承受的最大初始投资 ($C_0$)，这是将理论回报率转化为实际投资上限的关键一步。", "id": "2403010", "problem": "一个项目在时间 $t=0$ 时需要一笔等于 $C_{0}$ 美元的初始支出（现金流出）。此后，在第 $t=1,2,3,4,5$ 年年末，它产生净现金流入，每年为 $A(1+g)^{t-1}$ 美元，其中 $A=1.2\\times 10^{6}$ 且 $g=0.03$。在 $t=5$ 时，还有一笔额外的残值流入，为 $S=0.5\\times 10^{6}$ 美元。假设按年离散复利，并且 $t=0$ 之后的所有现金流都是非负的。设 $h\\in(0,1)$ 是一个给定的门槛收益率（以小数形式表示），且满足 $h\\neq g$。\n\n仅使用内部收益率（IRR）是使净现值等于零的任意利率 $r$ 这一定义，求出使得该项目的内部收益率超过门槛收益率 $h$ 的初始投资上确界 $C_{0}^{\\ast}(h)$（以美元为单位）的闭式解。将您的最终结果表示为仅含 $h$ 的单一解析表达式。不要进行近似或四舍五入。以美元表示答案。", "solution": "该问题要求找到一个项目的初始投资上确界，记为 $C_{0}^{\\ast}(h)$，使得其内部收益率（$IRR$）严格大于给定的门槛收益率 $h$。\n\n首先，我们必须验证问题陈述的有效性。\n已知条件如下：\n- 时间 $t=0$ 时的初始支出：$C_{0}$（流出）。\n- 在第 $t \\in \\{1, 2, 3, 4, 5\\}$ 年年末的净现金流入为每年 $A(1+g)^{t-1}$ 美元。\n- 常数 $A = 1.2 \\times 10^{6}$。\n- 增长率 $g = 0.03$。\n- 在 $t=5$ 时有一笔额外的残值流入，为 $S = 0.5 \\times 10^{6}$ 美元。\n- 门槛收益率 $h \\in (0,1)$，且满足约束条件 $h \\neq g$。\n- IRR 的定义是使净现值（$NPV$）为零的利率 $r$。\n- 目标是找到上确界 $C_{0}^{\\ast}(h)$，使得项目的 $IRR > h$。\n\n此问题在科学上基于金融数学原理，特别是贴现现金流分析。这是一个适定问题，因为其现金流结构（单次流出后跟一系列流入）确保了贴现率与 $NPV$ 之间的单调关系，从而得到唯一的正 $IRR$。该问题是客观的，并提供了所有必要信息，包括避免奇点的关键约束 $h \\neq g$。此问题是有效的。\n\n我们开始求解。项目的净现值（$NPV$）是所有现金流入的现值与初始现金流出 $C_{0}$ 之间的差额。时间 $t$ 的现金流记为 $CF_{t}$。\n该项目的现金流如下：\n- $CF_{0} = -C_{0}$\n- 对于 $t \\in \\{1, 2, 3, 4\\}$，$CF_{t} = A(1+g)^{t-1}$。\n- $CF_{5} = A(1+g)^{4} + S$。\n\n$NPV$ 作为贴现率 $r$ 的函数，由下式给出：\n$$NPV(r) = -C_{0} + \\sum_{t=1}^{5} \\frac{CF_t}{(1+r)^t}$$\n我们可以将增长年金支付流与残值分离开来：\n$$NPV(r) = -C_{0} + \\left( \\sum_{t=1}^{5} \\frac{A(1+g)^{t-1}}{(1+r)^{t}} \\right) + \\frac{S}{(1+r)^{5}}$$\n求和项是一个有限几何级数。我们来分析它：\n$$ \\sum_{t=1}^{5} \\frac{A(1+g)^{t-1}}{(1+r)^{t}} = \\frac{A}{1+g} \\sum_{t=1}^{5} \\frac{(1+g)^{t}}{(1+r)^{t}} = \\frac{A}{1+g} \\sum_{t=1}^{5} \\left(\\frac{1+g}{1+r}\\right)^{t} $$\n这是一个首项为 $a = \\frac{A}{1+g} \\left(\\frac{1+g}{1+r}\\right)$、公比为 $q = \\frac{1+g}{1+r}$ 的几何级数。该级数前 $n=5$ 项的和为 $a \\frac{1-q^n}{1-q}$。\n其和为：\n$$ \\frac{A}{1+r} \\frac{1 - \\left(\\frac{1+g}{1+r}\\right)^{5}}{1 - \\frac{1+g}{1+r}} = \\frac{A}{1+r} \\frac{1 - \\left(\\frac{1+g}{1+r}\\right)^{5}}{\\frac{1+r-(1+g)}{1+r}} = A \\frac{1 - \\left(\\frac{1+g}{1+r}\\right)^{5}}{r-g} $$\n此公式在 $r \\neq g$ 时有效。\n\n将此结果代回 $NPV$ 表达式：\n$$NPV(r) = -C_{0} + A \\frac{1 - \\left(\\frac{1+g}{1+r}\\right)^{5}}{r-g} + \\frac{S}{(1+r)^{5}}$$\n根据定义，内部收益率（我们记为 $r_{IRR}$）是使 $NPV(r) = 0$ 的利率 $r$。\n$$0 = -C_{0} + A \\frac{1 - \\left(\\frac{1+g}{1+r_{IRR}}\\right)^{5}}{r_{IRR}-g} + \\frac{S}{(1+r_{IRR})^{5}}$$\n这个方程隐式地将 $r_{IRR}$ 定义为 $C_{0}$ 的函数。整理得到 $C_{0}$：\n$$C_{0} = A \\frac{1 - \\left(\\frac{1+g}{1+r_{IRR}}\\right)^{5}}{r_{IRR}-g} + \\frac{S}{(1+r_{IRR})^{5}}$$\n让我们将流入的现值定义为函数 $P(r)$：\n$$P(r) = A \\frac{1 - \\left(\\frac{1+g}{1+r}\\right)^{5}}{r-g} + \\frac{S}{(1+r)^{5}}$$\n因此，IRR 的方程变为 $C_{0} = P(r_{IRR})$。\n函数 $P(r)$ 代表未来正现金流流的现值。对于任何正的贴现率 $r>0$，现值计算中的每一项都是 $r$ 的递减函数。因此，$P(r)$ 是 $r$ 在 $r \\in (-1, \\infty)$ 区间上的严格递减函数。\n\n问题要求项目的 IRR 超过门槛收益率 $h$：\n$$r_{IRR} > h$$\n由于 $P(r)$ 是一个严格递减函数，将其应用于不等式两边会反转不等号的方向：\n$$P(r_{IRR}) < P(h)$$\n代入 $C_{0} = P(r_{IRR})$，我们得到关于 $C_{0}$ 的条件：\n$$C_{0} < P(h)$$\n$$C_{0} < A \\frac{1 - \\left(\\frac{1+g}{1+h}\\right)^{5}}{h-g} + \\frac{S}{(1+h)^{5}}$$\n满足此条件的所有可能初始投资 $C_{0}$ 的集合是区间 $(0, P(h))$。问题要求的是这个集合的上确界。区间 $(0, P(h))$ 的上确界（或最小上界）是 $P(h)$。\n因此，初始投资的上确界 $C_{0}^{\\ast}(h)$ 为：\n$$C_{0}^{\\ast}(h) = P(h) = A \\frac{1 - \\left(\\frac{1+g}{1+h}\\right)^{5}}{h-g} + \\frac{S}{(1+h)^{5}}$$\n现在，我们代入给定的数值：$A = 1.2 \\times 10^{6}$，$g = 0.03$ 和 $S = 0.5 \\times 10^{6} = 5 \\times 10^5$。\n$$C_{0}^{\\ast}(h) = (1.2 \\times 10^{6}) \\frac{1 - \\left(\\frac{1+0.03}{1+h}\\right)^{5}}{h-0.03} + \\frac{5 \\times 10^{5}}{(1+h)^{5}}$$\n化简后得到关于 $h$ 的 $C_{0}^{\\ast}(h)$ 的最终解析表达式：\n$$C_{0}^{\\ast}(h) = (1.2 \\times 10^{6}) \\frac{1 - \\left(\\frac{1.03}{1+h}\\right)^{5}}{h-0.03} + \\frac{5 \\times 10^{5}}{(1+h)^{5}}$$\n这就是最终的闭式表达式。根据 $A$ 和 $S$ 的单位，其值的单位是美元。", "answer": "$$\n\\boxed{(1.2 \\times 10^{6}) \\frac{1 - \\left(\\frac{1.03}{1+h}\\right)^{5}}{h-0.03} + \\frac{5 \\times 10^{5}}{(1+h)^{5}}}\n$$"}]}