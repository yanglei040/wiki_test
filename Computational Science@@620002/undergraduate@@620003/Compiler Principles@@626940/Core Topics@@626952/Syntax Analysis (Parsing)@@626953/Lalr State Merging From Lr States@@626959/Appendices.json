{"hands_on_practices": [{"introduction": "To truly understand how LALR(1) parsers balance efficiency and power, we must start with the fundamental mechanics of their construction. This first practice guides you through the complete process of building the canonical LR(1) item sets for a simple grammar and then merging them. By working through this example [@problem_id:3648903], you will see a successful merge in action, where core-equivalent states are combined to create a more compact parser without introducing any shift-reduce or reduce-reduce conflicts.", "problem": "Consider the augmented grammar with productions $S' \\to S$, $S \\to C C$, and $C \\to c C \\mid d$. Using the foundational definitions of Look-Ahead Left-to-right, Rightmost derivation with $1$ lookahead symbol (LR($1$)) and Look-Ahead LR($1$) (LALR($1$)), where an LR($1$) item has the form $[A \\to \\alpha \\cdot \\beta, a]$ and the canonical collection is constructed by the standard $\\operatorname{closure}$ and $\\operatorname{goto}$ operations, do the following:\n\n- Construct the canonical LR($1$) item sets for the augmented grammar starting from $[S' \\to \\cdot S, \\$]$ using the standard definitions of $\\operatorname{closure}$ and $\\operatorname{goto}$.\n- Identify all pairs or groups of LR($1$) item sets that are core-equivalent, where the core of a set is obtained by erasing lookaheads from its LR($1$) items, that is, treating them as LR($0$) items.\n- Form the LALR($1$) automaton by merging each set of core-equivalent states, and justify from first principles of parser actions why merging does not introduce shift-reduce or reduce-reduce conflicts for this grammar.\n\nProvide the final answer as the exact total number of distinct LALR($1$) states obtained after merging core-equivalent LR($1$) states. Express the final answer as an exact integer. No rounding is required.", "solution": "The problem requires the construction of the LALR($1$) automaton for a given grammar, starting from the canonical LR($1$) item sets. This involves three main steps: first, constructing the complete collection of LR($1$) item sets; second, identifying which of these sets are core-equivalent; and third, merging these equivalent sets to form the LALR($1$) states and justifying that this merging process does not introduce parsing conflicts for this specific grammar.\n\nThe augmented grammar is given by the productions:\n1. $S' \\to S$\n2. $S \\to C C$\n3. $C \\to c C$\n4. $C \\to d$\n\nAn LR($1$) item is of the form $[A \\to \\alpha \\cdot \\beta, a]$, where $A \\to \\alpha\\beta$ is a production and $a$ is a terminal symbol serving as a lookahead. For brevity, we will represent a collection of items that differ only in their lookahead, such as $\\{[A \\to \\alpha \\cdot \\beta, a_1], [A \\to \\alpha \\cdot \\beta, a_2], \\dots \\}$, as a single entry $[A \\to \\alpha \\cdot \\beta, a_1/a_2/\\dots]$.\n\nFirst, we must determine the $\\operatorname{FIRST}$ sets for the nonterminals, which are needed for the $\\operatorname{closure}$ operation.\n$\\operatorname{FIRST}(C)$ is derived from its productions $C \\to cC$ and $C \\to d$. Thus, $\\operatorname{FIRST}(C) = \\{c, d\\}$.\n$\\operatorname{FIRST}(S)$ is derived from $S \\to CC$. Thus, $\\operatorname{FIRST}(S) = \\operatorname{FIRST}(C) = \\{c, d\\}$.\n\nWe now construct the canonical collection of LR($1$) sets of items, starting with the closure of the initial item $[S' \\to \\cdot S, \\$]$.\n\n$I_0 = \\operatorname{closure}(\\{[S' \\to \\cdot S, \\$]\\})$\nThe item $[S' \\to \\cdot S, \\$]$ implies we might see a string derived from $S$. The lookahead after $S$ is $\\$$. So, we add items for $S$'s productions with lookahead $\\$$.\n$[S \\to \\cdot CC, \\$]$. Since the dot is before a nonterminal $C$, we add items for $C$'s productions. The lookahead for these new items is $\\operatorname{FIRST}(C\\$)$, which is $\\operatorname{FIRST}(C)$ since $C$ is not nullable. So, the lookaheads are $c$ and $d$.\n$I_0 = \\{[S' \\to \\cdot S, \\$], [S \\to \\cdot CC, \\$], [C \\to \\cdot cC, c/d], [C \\to \\cdot d, c/d]\\}$\n\nNext, we compute the $\\operatorname{goto}$ function for $I_0$ on all grammar symbols $S, C, c, d$.\n\n$\\operatorname{goto}(I_0, S) = \\operatorname{closure}(\\{[S' \\to S \\cdot, \\$]\\}) = I_1$\n$I_1 = \\{[S' \\to S \\cdot, \\$]\\}$ (Accepting state)\n\n$\\operatorname{goto}(I_0, C) = \\operatorname{closure}(\\{[S \\to C \\cdot C, \\$]\\}) = I_2$\nFor $[S \\to C \\cdot C, \\$]$, the dot precedes $C$. The lookahead is $\\operatorname{FIRST}(\\epsilon\\$) = \\{\\$\\}$.\n$I_2 = \\{[S \\to C \\cdot C, \\$], [C \\to \\cdot cC, \\$], [C \\to \\cdot d, \\$]\\}$\n\n$\\operatorname{goto}(I_0, c) = \\operatorname{closure}(\\{[C \\to c \\cdot C, c/d]\\}) = I_3$\nFor $[C \\to c \\cdot C, c/d]$, the dot precedes $C$. The lookahead is $\\operatorname{FIRST}(\\epsilon(c/d)) = \\{c, d\\}$.\n$I_3 = \\{[C \\to c \\cdot C, c/d], [C \\to \\cdot cC, c/d], [C \\to \\cdot d, c/d]\\}$\n\n$\\operatorname{goto}(I_0, d) = \\operatorname{closure}(\\{[C \\to d \\cdot, c/d]\\}) = I_4$\n$I_4 = \\{[C \\to d \\cdot, c/d]\\}$ (Reduce state)\n\nNow we compute transitions for the new states $I_2, I_3, I_4$.\n\nFrom $I_2$:\n$\\operatorname{goto}(I_2, C) = \\operatorname{closure}(\\{[S \\to CC \\cdot, \\$]\\}) = I_5$\n$I_5 = \\{[S \\to CC \\cdot, \\$]\\}$ (Reduce state)\n\n$\\operatorname{goto}(I_2, c) = \\operatorname{closure}(\\{[C \\to c \\cdot C, \\$]\\}) = I_6$\nFor $[C \\to c \\cdot C, \\$]$, the lookahead for new $C$-productions is $\\operatorname{FIRST}(\\epsilon\\$) = \\{\\$\\}$.\n$I_6 = \\{[C \\to c \\cdot C, \\$], [C \\to \\cdot cC, \\$], [C \\to \\cdot d, \\$]\\}$\n\n$\\operatorname{goto}(I_2, d) = \\operatorname{closure}(\\{[C \\to d \\cdot, \\$]\\}) = I_7$\n$I_7 = \\{[C \\to d \\cdot, \\$]\\}$ (Reduce state)\n\nFrom $I_3$:\n$\\operatorname{goto}(I_3, C) = \\operatorname{closure}(\\{[C \\to cC \\cdot, c/d]\\}) = I_8$\n$I_8 = \\{[C \\to cC \\cdot, c/d]\\}$ (Reduce state)\n\n$\\operatorname{goto}(I_3, c) = \\operatorname{closure}(\\{[C \\to c \\cdot C, c/d]\\}) = I_3$ (A loop back to itself)\n\n$\\operatorname{goto}(I_3, d) = \\operatorname{closure}(\\{[C \\to d \\cdot, c/d]\\}) = I_4$\n\nFrom $I_4$: This is a reduce state, so no outgoing transitions.\n\nFrom $I_5$: This is a reduce state, so no outgoing transitions.\n\nFrom $I_6$:\n$\\operatorname{goto}(I_6, C) = \\operatorname{closure}(\\{[C \\to cC \\cdot, \\$]\\}) = I_9$\n$I_9 = \\{[C \\to cC \\cdot, \\$]\\}$ (Reduce state)\n\n$\\operatorname{goto}(I_6, c) = \\operatorname{closure}(\\{[C \\to c \\cdot C, \\$]\\}) = I_6$ (A loop back to itself)\n\n$\\operatorname{goto}(I_6, d) = \\operatorname{closure}(\\{[C \\to d \\cdot, \\$]\\}) = I_7$\n\nStates $I_7, I_8, I_9$ are reduce states, so there are no further states to generate. We have found all $10$ LR($1$) states ($I_0$ through $I_9$).\n\nThe canonical LR($1$) item sets are:\n$I_0 = \\{[S' \\to \\cdot S, \\$], [S \\to \\cdot CC, \\$], [C \\to \\cdot cC, c/d], [C \\to \\cdot d, c/d]\\}$\n$I_1 = \\{[S' \\to S \\cdot, \\$]\\}$\n$I_2 = \\{[S \\to C \\cdot C, \\$], [C \\to \\cdot cC, \\$], [C \\to \\cdot d, \\$]\\}$\n$I_3 = \\{[C \\to c \\cdot C, c/d], [C \\to \\cdot cC, c/d], [C \\to \\cdot d, c/d]\\}$\n$I_4 = \\{[C \\to d \\cdot, c/d]\\}$\n$I_5 = \\{[S \\to CC \\cdot, \\$]\\}$\n$I_6 = \\{[C \\to c \\cdot C, \\$], [C \\to \\cdot cC, \\$], [C \\to \\cdot d, \\$]\\}$\n$I_7 = \\{[C \\to d \\cdot, \\$]\\}$\n$I_8 = \\{[C \\to cC \\cdot, c/d]\\}$\n$I_9 = \\{[C \\to cC \\cdot, \\$]\\}$\n\nNext, we identify core-equivalent sets. The core of an LR($1$) item set is the set of LR($0$) items obtained by removing the lookahead symbols.\n$\\operatorname{core}(I_0) = \\{S' \\to \\cdot S, S \\to \\cdot CC, C \\to \\cdot cC, C \\to \\cdot d\\}$\n$\\operatorname{core}(I_1) = \\{S' \\to S \\cdot\\}$\n$\\operatorname{core}(I_2) = \\{S \\to C \\cdot C, C \\to \\cdot cC, C \\to \\cdot d\\}$\n$\\operatorname{core}(I_3) = \\{C \\to c \\cdot C, C \\to \\cdot cC, C \\to \\cdot d\\}$\n$\\operatorname{core}(I_4) = \\{C \\to d \\cdot\\}$\n$\\operatorname{core}(I_5) = \\{S \\to CC \\cdot\\}$\n$\\operatorname{core}(I_6) = \\{C \\to c \\cdot C, C \\to \\cdot cC, C \\to \\cdot d\\}$\n$\\operatorname{core}(I_7) = \\{C \\to d \\cdot\\}$\n$\\operatorname{core}(I_8) = \\{C \\to cC \\cdot\\}$\n$\\operatorname{core}(I_9) = \\{C \\to cC \\cdot\\}$\n\nBy comparing the cores, we identify the following groups of core-equivalent states:\n1. $\\operatorname{core}(I_3) = \\operatorname{core}(I_6)$\n2. $\\operatorname{core}(I_4) = \\operatorname{core}(I_7)$\n3. $\\operatorname{core}(I_8) = \\operatorname{core}(I_9)$\n\nThe LALR($1$) automaton is formed by merging these core-equivalent sets. The new state is the union of the items in the original states.\n$I_{36} = I_3 \\cup I_6 = \\{[C \\to c \\cdot C, c/d/\\$], [C \\to \\cdot cC, c/d/\\$], [C \\to \\cdot d, c/d/\\$]\\}$\n$I_{47} = I_4 \\cup I_7 = \\{[C \\to d \\cdot, c/d/\\$]\\}$\n$I_{89} = I_8 \\cup I_9 = \\{[C \\to cC \\cdot, c/d/\\$]\\}$\n\nThe distinct LALR($1$) states are: $I_0, I_1, I_2, I_5$ and the three new merged states $I_{36}, I_{47}, I_{89}$.\nThe total number of LALR($1$) states is $4 + 3 = 7$.\n\nFinally, we must justify why this merging does not introduce conflicts. Conflicts in LALR($1$) parsers arise if the merging process leads to a state where, for a single lookahead symbol, more than one action (shift or reduce) is possible.\nThe original LR($1$) automaton is conflict-free, as verified during construction.\nLet's analyze the merged states:\n- **$I_{36}$**: This state contains only shift-type items (the dot is not at the end of a production). Merging such states cannot create reduce-reduce or shift-reduce conflicts, as there are no reduce items involved. The parser will perform a shift on input $c$ or $d$.\n- **$I_{47}$**: Merging $I_4 = \\{[C \\to d \\cdot, c/d]\\}$ and $I_7 = \\{[C \\to d \\cdot, \\$]\\}$. The resulting state is $I_{47} = \\{[C \\to d \\cdot, c/d/\\$]\\}$. In this state, the parser action is to reduce by production $C \\to d$ on lookaheads $c$, $d$, or $\\$$. Since there is only one production rule in this state, no reduce-reduce conflict can occur. Also, there are no shift items, so no shift-reduce conflict can occur. A conflict could have arisen if the lookahead sets were not disjoint and the production rules were different, but here the rule is the same ($C \\to d$).\n- **$I_{89}$**: Merging $I_8 = \\{[C \\to cC \\cdot, c/d]\\}$ and $I_9 = \\{[C \\to cC \\cdot, \\$]\\}$. The resulting state is $I_{89} = \\{[C \\to cC \\cdot, c/d/\\$]\\}$. The action here is to reduce by production $C \\to cC$ on lookaheads $c$, $d$, or $\\$$. Similar to the case for $I_{47}$, there is only one production rule, so no conflicts are introduced.\n\nIn summary, the merging of core-equivalent states for this grammar is safe. In the cases involving reduce items ($I_4$ and $I_7$; $I_8$ and $I_9$), the production rule for the reduction is identical in both states being merged, and their original lookahead sets were disjoint. Therefore, their union simply expands the set of lookaheads for a single, unambiguous reduce action. The merge of shift-only states ($I_3$ and $I_6$) is also inherently safe. This confirms that the resulting LALR($1$) parser is free of conflicts.\n\nThe final count of distinct LALR($1$) states is $7$.", "answer": "$$\\boxed{7}$$", "id": "3648903"}, {"introduction": "While state merging often simplifies a parser without issue, it can sometimes introduce new problems. This exercise [@problem_id:3648846] explores the potential downside of LALR(1) construction using a grammar specifically designed to create conflicts upon merging. By tracking how lookahead sets from different LR(1) contexts are combined, you will uncover the precise conditions that give rise to a reduce-reduce conflict, demonstrating why some grammars are LR(1) but not LALR(1).", "problem": "Consider a context-free grammar in the domain of compiler principles designed to examine the relationship between canonical LookAhead Left-to-right (LR(1)) item sets and their merged counterparts in LookAhead Left-to-right with merged states (LALR(1)). The grammar contains the required productions and is extended to create distinct LR(1) contexts that merge under LALR(1) while preserving the LR(0) core. Let terminals be $p$, $q$, $a$, $b$, $c$, and nonterminals be $S$, $X$, $Y$, $A$, $B$, with start symbol $S$. The productions are:\n$$\n\\begin{align*}\nS &\\to p X \\mid q Y \\\\\nX &\\to A a \\mid B b \\\\\nY &\\to A b \\mid B a \\\\\nA &\\to c \\\\\nB &\\to c\n\\end{align*}\n$$\nUse the canonical LR(1) construction based on the fundamental definitions of items, $\\operatorname{closure}$, and $\\operatorname{goto}$:\n- An LR(1) item is written as $[N \\to \\gamma \\cdot \\delta, t]$, where $N$ is a nonterminal, $\\gamma$ and $\\delta$ are (possibly empty) strings of grammar symbols, $\\cdot$ denotes the dot position, and $t$ is a lookahead terminal.\n- The $\\operatorname{closure}$ operation adds items for nonterminals immediately after the dot with lookaheads given by the $\\operatorname{FIRST}$ set of the suffix that follows the nonterminal.\n- The $\\operatorname{goto}$ operation shifts the dot across a grammar symbol.\n\nTask:\n1. Starting from the initial LR(1) item set for the augmented grammar with $S' \\to S$, symbolically construct the LR(1) item sets that correspond to the reduction of $A$ and $B$ immediately after scanning $c$, in the contexts reached by scanning $p$ first and by scanning $q$ first. Explicitly identify for each such LR(1) state its LR(0) core and the lookahead sets attached to $[A \\to c \\cdot]$ and $[B \\to c \\cdot]$.\n2. Perform the LALR(1) state merging for states that share the same LR(0) core by taking the union of lookahead sets for corresponding LR(0) items.\n3. Define a reduce/reduce conflict as the presence of two distinct complete items with overlapping lookahead applicability for the same terminal in a single merged state. Count how many terminals in $\\{a,b\\}$ produce such a reduce/reduce conflict in the merged LALR(1) state for the reductions of $A$ and $B$.\n\nYour final answer must be a single real-valued number equal to the total number of reduce/reduce conflicts across $\\{a,b\\}$ that arise due to LALR(1) merging. No rounding is required.", "solution": "The solution proceeds by constructing the required LR($1$) states, performing the LALR($1$) merge, and analyzing the resulting state for conflicts.\n\nFirst, we augment the grammar with a new start symbol $S'$ and production $S' \\to S$. The initial item set is the closure of $[S' \\to \\cdot S, \\$]$.\n\nTo compute closures, we need the $\\operatorname{FIRST}$ sets for the relevant nonterminals.\n$\\operatorname{FIRST}(A) = \\operatorname{FIRST}(c) = \\{c\\}$.\n$\\operatorname{FIRST}(B) = \\operatorname{FIRST}(c) = \\{c\\}$.\n$\\operatorname{FIRST}(X) = \\operatorname{FIRST}(Aa) \\cup \\operatorname{FIRST}(Bb) = \\operatorname{FIRST}(A) \\cup \\operatorname{FIRST}(B) = \\{c\\}$.\n$\\operatorname{FIRST}(Y) = \\operatorname{FIRST}(Ab) \\cup \\operatorname{FIRST}(Ba) = \\operatorname{FIRST}(A) \\cup \\operatorname{FIRST}(B) = \\{c\\}$.\n$\\operatorname{FIRST}(S) = \\operatorname{FIRST}(pX) \\cup \\operatorname{FIRST}(qY) = \\{p, q\\}$.\n\nThe initial LR($1$) item set $I_0$ is:\n$I_0 = \\operatorname{closure}(\\{[S' \\to \\cdot S, \\$]\\}) = \\{ [S' \\to \\cdot S, \\$], [S \\to \\cdot pX, \\$], [S \\to \\cdot qY, \\$] \\}$.\n\nThe problem asks for states reached after first scanning $p$ and $q$.\nLet $I_1 = \\operatorname{goto}(I_0, p)$ and $I_2 = \\operatorname{goto}(I_0, q)$.\n\n**Construction of state $I_1$:**\n$I_1 = \\operatorname{goto}(I_0, p) = \\operatorname{closure}(\\{[S \\to p \\cdot X, \\$]\\})$.\nTo compute the closure, we add items for $X$. The lookahead is inherited from the parent item $[S \\to p \\cdot X, \\$]$, which is $\\$$.\n-   $[X \\to \\cdot Aa, \\$]$\n-   $[X \\to \\cdot Bb, \\$]$\nNow, we add items for $A$ and $B$.\n-   For $[X \\to \\cdot A a, \\$]$, the symbol following $A$ is $a$. The lookahead is $\\operatorname{FIRST}(a\\$) = \\{a\\}$. So, we add $[A \\to \\cdot c, a]$.\n-   For $[X \\to \\cdot B b, \\$]$, the symbol following $B$ is $b$. The lookahead is $\\operatorname{FIRST}(b\\$) = \\{b\\}$. So, we add $[B \\to \\cdot c, b]$.\nThus, the state $I_1$ is:\n$I_1 = \\{ [S \\to p \\cdot X, \\$], [X \\to \\cdot Aa, \\$], [X \\to \\cdot Bb, \\$], [A \\to \\cdot c, a], [B \\to \\cdot c, b] \\}$\n\n**Construction of state $I_2$:**\n$I_2 = \\operatorname{goto}(I_0, q) = \\operatorname{closure}(\\{[S \\to q \\cdot Y, \\$]\\})$.\nTo compute the closure, we add items for $Y$ with lookahead $\\$$.\n-   $[Y \\to \\cdot Ab, \\$]$\n-   $[Y \\to \\cdot Ba, \\$]$\nNow, we add items for $A$ and $B$.\n-   For $[Y \\to \\cdot A b, \\$]$, the symbol following $A$ is $b$. The lookahead is $\\operatorname{FIRST}(b\\$) = \\{b\\}$. So, we add $[A \\to \\cdot c, b]$.\n-   For $[Y \\to \\cdot B a, \\$]$, the symbol following $B$ is $a$. The lookahead is $\\operatorname{FIRST}(a\\$) = \\{a\\}$. So, we add $[B \\to \\cdot c, a]$.\nThus, the state $I_2$ is:\n$I_2 = \\{ [S \\to q \\cdot Y, \\$], [Y \\to \\cdot Ab, \\$], [Y \\to \\cdot Ba, \\$], [A \\to \\cdot c, b], [B \\to \\cdot c, a] \\}$\n\n**Part 1: Constructing the Target LR(1) Reduction States**\n\nWe now compute the states reached after scanning the terminal $c$ from states $I_1$ and $I_2$.\n\nLet $I_3 = \\operatorname{goto}(I_1, c)$. We look for items in $I_1$ with the dot before $c$: $[A \\to \\cdot c, a]$ and $[B \\to \\cdot c, b]$.\n$I_3 = \\operatorname{closure}(\\{ [A \\to c \\cdot, a], [B \\to c \\cdot, b] \\})$. Since the dots are at the end of the productions, the closure is the set itself.\n$I_3 = \\{ [A \\to c \\cdot, a], [B \\to c \\cdot, b] \\}$.\n-   The LR($0$) core of $I_3$ is $\\{ A \\to c \\cdot, B \\to c \\cdot \\}$.\n-   The lookahead set for the item $[A \\to c \\cdot]$ is $\\{a\\}$.\n-   The lookahead set for the item $[B \\to c \\cdot]$ is $\\{b\\}$.\n\nLet $I_4 = \\operatorname{goto}(I_2, c)$. We look for items in $I_2$ with the dot before $c$: $[A \\to \\cdot c, b]$ and $[B \\to \\cdot c, a]$.\n$I_4 = \\operatorname{closure}(\\{ [A \\to c \\cdot, b], [B \\to c \\cdot, a] \\})$. Again, the closure is the set itself.\n$I_4 = \\{ [A \\to c \\cdot, b], [B \\to c \\cdot, a] \\}$.\n-   The LR($0$) core of $I_4$ is $\\{ A \\to c \\cdot, B \\to c \\cdot \\}$.\n-   The lookahead set for the item $[A \\to c \\cdot]$ is $\\{b\\}$.\n-   The lookahead set for the item $[B \\to c \\cdot]$ is $\\{a\\}$.\n\n**Part 2: LALR(1) State Merging**\n\nStates $I_3$ and $I_4$ have the same LR($0$) core: $\\{ A \\to c \\cdot, B \\to c \\cdot \\}$. In the LALR($1$) construction, these two states are merged into a single state, let's call it $I_{34}$. The items in this new state are formed by taking the union of the lookahead sets for each corresponding LR($0$) item.\n\n-   For the core item $A \\to c \\cdot$:\n    The lookahead in $I_3$ is $\\{a\\}$. The lookahead in $I_4$ is $\\{b\\}$.\n    The merged lookahead set is $\\{a\\} \\cup \\{b\\} = \\{a, b\\}$.\n    The resulting LALR($1$) item is $[A \\to c \\cdot, a / b]$.\n\n-   For the core item $B \\to c \\cdot$:\n    The lookahead in $I_3$ is $\\{b\\}$. The lookahead in $I_4$ is $\\{a\\}$.\n    The merged lookahead set is $\\{b\\} \\cup \\{a\\} = \\{a, b\\}$.\n    The resulting LALR($1$) item is $[B \\to c \\cdot, a / b]$.\n\nThe merged LALR($1$) state $I_{34}$ is:\n$I_{34} = \\{ [A \\to c \\cdot, a / b], [B \\to c \\cdot, a / b] \\}$.\n\n**Part 3: Counting Reduce/Reduce Conflicts**\n\nA reduce/reduce conflict occurs in a state if, for a given lookahead terminal, there are two or more distinct productions by which the parser could reduce. The state $I_{34}$ contains two complete items indicating reductions:\n1.  Reduce by $A \\to c$ on lookaheads $\\{a, b\\}$.\n2.  Reduce by $B \\to c$ on lookaheads $\\{a, b\\}$.\n\nThe productions $A \\to c$ and $B \\to c$ are distinct. We check for conflicts for each terminal in the set $\\{a, b\\}$.\n\n-   **For terminal $a$**:\n    - The terminal $a$ is in the lookahead set $\\{a, b\\}$ for the reduction $A \\to c$.\n    - The terminal $a$ is also in the lookahead set $\\{a, b\\}$ for the reduction $B \\to c$.\n    - Consequently, upon seeing the lookahead terminal $a$, the parser has two choices: reduce by $A \\to c$ or reduce by $B \\to c$. This constitutes a reduce/reduce conflict.\n\n-   **For terminal $b$**:\n    - The terminal $b$ is in the lookahead set $\\{a, b\\}$ for the reduction $A \\to c$.\n    - The terminal $b$ is also in the lookahead set $\\{a, b\\}$ for the reduction $B \\to c$.\n    - Similarly, upon seeing the lookahead terminal $b$, the parser has two choices, which is a reduce/reduce conflict.\n\nThe question asks for the total number of terminals in $\\{a,b\\}$ that produce a reduce/reduce conflict. Since both terminals $a$ and $b$ cause a conflict, the count is 2.", "answer": "$$\n\\boxed{2}\n$$", "id": "3648846"}, {"introduction": "After seeing how conflicts can arise from a full grammar, we can generalize this analysis into a more direct and formal tool. This final practice [@problem_id:3648837] moves away from grammar derivation and focuses on a \"local check\" for merge safety. You will apply a defined \"merge-blocker criterion\" to a pair of hypothetical, core-equivalent LR(1) states to quantify the resulting conflict, sharpening your ability to diagnose the root cause of LALR(1) parsing conflicts by analyzing lookahead set intersections.", "problem": "Consider the standard construction of Look-Ahead Left-to-right Rightmost derivation with one-symbol lookahead (LALR(1)) parsing tables by merging Look-Ahead Left-to-right Rightmost derivation with one-symbol lookahead (LR(1)) states that share the same core. An $\\text{LR}(1)$ item is written as $[A \\to \\alpha \\cdot \\beta, a]$, where $A \\to \\alpha\\beta$ is a production, the dot indicates the position in the right-hand side, and $a$ is a terminal lookahead symbol. A reduce item is any item of the form $[A \\to \\alpha \\cdot, a]$. The core of a state is the set of its items with lookaheads erased.\n\nTwo $\\text{LR}(1)$ states are core-equivalent if they have the same set of items when lookaheads are ignored. When merging core-equivalent $\\text{LR}(1)$ states into a single $\\text{LALR}(1)$ state, the lookahead sets of corresponding items are unioned. A reduce/reduce conflict arises in a state if there exist two distinct reduce items that both prescribe a reduce action on the same terminal.\n\nDefine a local merge-blocker criterion for a pair of core-equivalent $\\text{LR}(1)$ states $I_{1}$ and $I_{2}$ with a common core. For each distinct reduce item $r_{i}$ in the core, let $L_{i}^{(1)}$ and $L_{i}^{(2)}$ be its lookahead sets in $I_{1}$ and $I_{2}$, respectively. In the merged state, the reduce item $r_{i}$ has lookahead set $L_{i} = L_{i}^{(1)} \\cup L_{i}^{(2)}$. Let the conflict set be\n$$\nC = \\left\\{\\, t \\in \\Sigma \\;\\middle|\\; \\text{there exist distinct reduce items } r_{i} \\neq r_{j} \\text{ with } t \\in L_{i} \\text{ and } t \\in L_{j} \\,\\right\\},\n$$\nwhere $\\Sigma$ is the set of terminals. The merge is blocked if $|C| > 0$. The merge-blocker conflict index is defined to be the cardinality $|C|$.\n\nNow consider the following two core-equivalent $\\text{LR}(1)$ states $I_{1}$ and $I_{2}$ whose common core consists of exactly two reduce items, $r_{A}$ and $r_{B}$:\n- Core $K = \\{ [A \\to \\alpha \\cdot, \\_],\\; [B \\to \\beta \\cdot, \\_] \\}$, where the underscore denotes an erased lookahead.\n- In $I_{1}$, the lookahead sets are $L_{A}^{(1)} = \\{ a \\}$ and $L_{B}^{(1)} = \\{ b, c \\}$.\n- In $I_{2}$, the lookahead sets are $L_{A}^{(2)} = \\{ b \\}$ and $L_{B}^{(2)} = \\{ a \\}$.\n\nAssume $I_{1}$ and $I_{2}$ are individually conflict-free (that is, for each state, the lookahead sets of its distinct reduce items are disjoint). Using the local merge-blocker criterion defined above, compute the merge-blocker conflict index $|C|$ for the merged state formed from $I_{1}$ and $I_{2}$. Provide the final value of $|C|$ as a single integer. No rounding is necessary.", "solution": "The objective is to compute the merge-blocker conflict index, $|C|$, for the LALR(1) state formed by merging the two core-equivalent LR(1) states, $I_{1}$ and $I_{2}$.\n\nThe problem states that the states are individually conflict-free. We can verify this:\n- In state $I_{1}$, the lookahead sets for the two distinct reduce items are $L_{A}^{(1)} = \\{ a \\}$ and $L_{B}^{(1)} = \\{ b, c \\}$. Their intersection is $L_{A}^{(1)} \\cap L_{B}^{(1)} = \\{ a \\} \\cap \\{ b, c \\} = \\emptyset$. Thus, $I_{1}$ is conflict-free.\n- In state $I_{2}$, the lookahead sets are $L_{A}^{(2)} = \\{ b \\}$ and $L_{B}^{(2)} = \\{ a \\}$. Their intersection is $L_{A}^{(2)} \\cap L_{B}^{(2)} = \\{ b \\} \\cap \\{ a \\} = \\emptyset$. Thus, $I_{2}$ is conflict-free.\n\nThe common core of the states contains two distinct reduce items, which we denote by their corresponding productions: $r_{A}$ for $A \\to \\alpha$ and $r_{B}$ for $B \\to \\beta$.\n\nFirst, we compute the lookahead sets for each reduce item in the merged state. According to the problem definition, the lookahead set for an item in the merged state is the union of its lookahead sets from the original states.\n\nFor the reduce item $r_{A}$ (from production $A \\to \\alpha$), the lookahead set in the merged state, $L_{A}$, is:\n$$\nL_{A} = L_{A}^{(1)} \\cup L_{A}^{(2)} = \\{ a \\} \\cup \\{ b \\} = \\{ a, b \\}\n$$\n\nFor the reduce item $r_{B}$ (from production $B \\to \\beta$), the lookahead set in the merged state, $L_{B}$, is:\n$$\nL_{B} = L_{B}^{(1)} \\cup L_{B}^{(2)} = \\{ b, c \\} \\cup \\{ a \\} = \\{ a, b, c \\}\n$$\n\nNow we have the full set of reduce items and their associated lookahead sets in the proposed merged $\\text{LALR}(1)$ state:\n- Reduce by $A \\to \\alpha$ on lookaheads $\\{ a, b \\}$.\n- Reduce by $B \\to \\beta$ on lookaheads $\\{ a, b, c \\}$.\n\nNext, we must find the conflict set $C$. The problem defines $C$ as the set of terminals $t$ for which there exist distinct reduce items ($r_A$ and $r_B$ in this case) such that $t$ is in both of their lookahead sets. Therefore, the conflict set $C$ is the intersection of the two lookahead sets:\n$$\nC = L_{A} \\cap L_{B} = \\{ a, b \\} \\cap \\{ a, b, c \\} = \\{ a, b \\}\n$$\n\nFinally, the merge-blocker conflict index is defined as the cardinality of the conflict set, $|C|$.\n$$\n|C| = |\\{ a, b \\}| = 2\n$$\nThe merge of states $I_{1}$ and $I_{2}$ introduces a reduce/reduce conflict on terminals $a$ and $b$. The number of such conflicting terminals is $2$.", "answer": "$$\\boxed{2}$$", "id": "3648837"}]}