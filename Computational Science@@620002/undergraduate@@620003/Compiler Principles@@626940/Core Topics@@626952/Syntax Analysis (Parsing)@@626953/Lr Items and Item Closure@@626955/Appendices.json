{"hands_on_practices": [{"introduction": "To build an LR parser, we must first construct its state machine, known as the canonical collection of LR item sets. This process relies on two fundamental operations: `closure` and `goto`. This first exercise provides essential practice in applying these core algorithms to a grammar that includes an empty string ($\\epsilon$) production, a common feature in language design. Mastering these mechanics is the first step toward understanding how a parser recognizes the structure of a program. [@problem_id:3655618]", "problem": "Consider the context-free grammar with productions $S \\to AB$, $A \\to a \\mid \\epsilon$, and $B \\to b$. Work in the framework of Left-to-right, Rightmost derivation in reverse (LR) parsing with $LR(0)$ items. Let $I$ be the closure of the singleton set that initially contains the item $[S \\to \\cdot AB]$. Using only the core definitions of $LR(0)$ items, item closure, and the $\\operatorname{goto}$ function, construct $\\operatorname{goto}(I, A)$ by first forming all items obtained by advancing the dot over $A$ in items of $I$ and then taking the closure. Let $n$ denote the cardinality $|\\operatorname{goto}(I, A)|$. Provide a concise interpretation of the items contained in $\\operatorname{goto}(I, A)$ in terms of what portion of the right-hand sides has been recognized and what symbols are expected next, and then report the exact value of $n$. Your final answer should be the single integer value of $n$.", "solution": "The problem asks for the cardinality of the set of $LR(0)$ items, $\\operatorname{goto}(I, A)$, for a given context-free grammar. The grammar productions are $S \\to AB$, $A \\to a \\mid \\epsilon$, and $B \\to b$. The set $I$ is defined as the closure of the initial item set $\\{[S \\to \\cdot AB]\\}$.\n\nLet the given context-free grammar be $G$. The set of non-terminals is $V = \\{S, A, B\\}$, the set of terminals is $\\Sigma = \\{a, b\\}$, and the set of productions $P$ is:\n$1.$ $S \\to AB$\n$2.$ $A \\to a$\n$3.$ $A \\to \\epsilon$\n$4.$ $B \\to b$\n\nAn $LR(0)$ item is a production with a dot ($\\cdot$) at some position on the right-hand side (RHS). The problem requires two main computations: first, the construction of the set of items $I$, and second, the construction of the set of items $\\operatorname{goto}(I, A)$.\n\nFirst, we compute the set $I$ by applying the closure operation to the initial set $\\{[S \\to \\cdot AB]\\}$.\nThe closure of a set of items $J$, denoted $\\operatorname{closure}(J)$, is computed as follows:\n$1.$ Initially, every item in $J$ is in $\\operatorname{closure}(J)$.\n$2.$ If an item $[X \\to \\alpha \\cdot Y \\beta]$ is in $\\operatorname{closure}(J)$ and $Y \\to \\gamma$ is a production, then add the item $[Y \\to \\cdot \\gamma]$ to $\\operatorname{closure}(J)$, if it is not already there.\n$3.$ Repeat step $2$ until no more new items can be added to $\\operatorname{closure}(J)$.\n\nLet's compute $I = \\operatorname{closure}(\\{[S \\to \\cdot AB]\\})$.\n$1.$ We start with the initial set of items, which is $\\{[S \\to \\cdot AB]\\}$.\n$2.$ The item $[S \\to \\cdot AB]$ has the non-terminal $A$ immediately to the right of the dot. Therefore, we must add all items corresponding to the productions for $A$. The productions for $A$ are $A \\to a$ and $A \\to \\epsilon$. This gives us the new items $[A \\to \\cdot a]$ and $[A \\to \\cdot]$ (for $A \\to \\epsilon$).\n$3.$ Our current set of items is $\\{[S \\to \\cdot AB], [A \\to \\cdot a], [A \\to \\cdot]\\}$.\n$4.$ We now examine the newly added items.\n   - For $[A \\to \\cdot a]$, the symbol to the right of the dot is the terminal $a$. This does not cause any new items to be added.\n   - For $[A \\to \\cdot]$, there is no symbol to the right of the dot. This is a reduce item and also does not cause any new items to be added.\n$5.$ Since no new items can be added, the closure operation is complete. The resulting set of items is:\n$$I = \\{[S \\to \\cdot AB], [A \\to \\cdot a], [A \\to \\cdot]\\}$$\n\nNext, we compute the set $\\operatorname{goto}(I, A)$. The $\\operatorname{goto}$ function is defined as follows: for a set of items $J$ and a grammar symbol $X$, $\\operatorname{goto}(J, X)$ is the closure of the set of all items $[P \\to \\alpha X \\cdot \\beta]$ such that $[P \\to \\alpha \\cdot X \\beta]$ is in $J$.\n\nTo compute $\\operatorname{goto}(I, A)$, we first identify the \"kernel\" of the new set. This kernel consists of all items in $I$ where the non-terminal $A$ is to the right of the dot, with the dot advanced over $A$.\nLooking at the set $I = \\{[S \\to \\cdot AB], [A \\to \\cdot a], [A \\to \\cdot]\\}$, only the item $[S \\to \\cdot AB]$ is of the form $[P \\to \\alpha \\cdot A \\beta]$. Here, $P=S$, $\\alpha=\\epsilon$, and $\\beta=B$.\nBy advancing the dot over $A$, we get the item $[S \\to A \\cdot B]$.\nThe kernel of the $\\operatorname{goto}$ set is therefore $\\{[S \\to A \\cdot B]\\}$.\n\nNow, we must compute the closure of this kernel set: $\\operatorname{goto}(I, A) = \\operatorname{closure}(\\{[S \\to A \\cdot B]\\})$.\n$1.$ We start with the set $\\{[S \\to A \\cdot B]\\}$.\n$2.$ The item $[S \\to A \\cdot B]$ has the non-terminal $B$ immediately to the right of the dot. Therefore, we must add all items for the productions of $B$. The only production for $B$ is $B \\to b$. This gives the new item $[B \\to \\cdot b]$.\n$3.$ Our current set of items is $\\{[S \\to A \\cdot B], [B \\to \\cdot b]\\}$.\n$4.$ We examine the newly added item $[B \\to \\cdot b]$. The symbol to the right of the dot is the terminal $b$, so no new items are added.\n$5.$ The closure operation is complete. The resulting set of items is:\n$$\\operatorname{goto}(I, A) = \\{[S \\to A \\cdot B], [B \\to \\cdot b]\\}$$\n\nThe interpretation of the items in this set is as follows. The set $\\operatorname{goto}(I, A)$ represents a state in the LR automaton reached after recognizing a sequence of input terminals that can be reduced to the non-terminal $A$.\n- The kernel item $[S \\to A \\cdot B]$ signifies that a part of the input corresponding to non-terminal $A$ has been successfully parsed, and the parser now expects to see a sequence of terminals that can be reduced to the non-terminal $B$ to complete the production $S \\to AB$.\n- The closure item $[B \\to \\cdot b]$ indicates how the parser can begin to recognize the expected $B$: by seeing the terminal symbol $b$.\n\nFinally, the problem asks for the value of $n$, which is the cardinality of the set $\\operatorname{goto}(I, A)$.\n$$n = |\\operatorname{goto}(I, A)| = |\\{[S \\to A \\cdot B], [B \\to \\cdot b]\\}|$$\nThe set contains two distinct items. Therefore, the cardinality is $2$.\n$n = 2$.", "answer": "$$\\boxed{2}$$", "id": "3655618"}, {"introduction": "Once we can construct item sets, we can use them to analyze a grammar's suitability for a particular parsing method. An item set reveals the decisions a parser might face at a given point in the input stream. This practice problem focuses on identifying a classic parsing dilemma—a shift/reduce conflict—which arises when an item set contains instructions to both shift the next input symbol and reduce a completed grammar rule. Recognizing such conflicts is a critical skill for a compiler developer. [@problem_id:3655684]", "problem": "Consider the context-free grammar with start symbol $S$ and productions $S \\to aS \\mid Sb \\mid \\epsilon$. Augment the grammar by introducing a new start symbol $S'$ with the production $S' \\to S$. Using only the standard definitions of $LR(0)$ items, item closure, and the $goto$ function, construct the initial $LR(0)$ item set $I_0 = \\mathrm{CLOSURE}(\\{\\,S' \\to \\cdot S\\,\\})$. From first principles, identify within $I_0$ an item set that simultaneously contains the completed item $[\\,S \\to \\epsilon \\cdot\\,]$ and at least one item whose dot precedes a terminal symbol $a$ or $b$, thereby making a shift possible on that terminal. Explain why this situation constitutes a shift/reduce conflict in the $LR(0)$ parsing framework. Finally, compute the total number of distinct $LR(0)$ shift/reduce conflicts present in that item set. Express your final answer as a single integer with no units. No rounding is required.", "solution": "The user has provided a problem from the domain of compiler theory, specifically concerning the construction of $LR(0)$ item sets and the identification of parsing conflicts. This problem is valid as it is scientifically grounded in established formal language theory, is well-posed with a clear objective, and contains all necessary information for a deterministic solution.\n\nThe problem asks us to analyze a given context-free grammar, construct its initial $LR(0)$ item set $I_0$, and determine the number of shift/reduce conflicts within this set.\n\nThe grammar $G$ has the start symbol $S$ and the following productions:\n$1$. $S \\to aS$\n$2$. $S \\to Sb$\n$3$. $S \\to \\epsilon$\n\nFirst, we augment the grammar by introducing a new start symbol $S'$ and a new production $S' \\to S$. The augmented grammar $G'$ is:\n$0$. $S' \\to S$\n$1$. $S \\to aS$\n$2$. $S \\to Sb$\n$3$. $S \\to \\epsilon$\n\nThe next step is to construct the initial $LR(0)$ item set, denoted as $I_0$. This set is defined as the closure of the initial item derived from the augmented production, $I_0 = \\mathrm{CLOSURE}(\\{\\,[S' \\to \\cdot S]\\,\\})$.\n\nThe $\\mathrm{CLOSURE}$ operation is defined as follows:\nIf an item $[A \\to \\alpha \\cdot B \\beta]$ is in an item set, and $B \\to \\gamma$ is a production in the grammar, then the item $[B \\to \\cdot \\gamma]$ must also be in the closure of that set. This process is repeated until no new items can be added.\n\nLet's compute $I_0$:\n$1$. We begin with the initial item set containing only the item from the augmented production: $\\{[S' \\to \\cdot S]\\}$.\n\n$2$. The dot in $[S' \\to \\cdot S]$ precedes the non-terminal $S$. Therefore, we must add all items corresponding to the productions of $S$, with the dot at the beginning of the right-hand side. The productions for $S$ are $S \\to aS$, $S \\to Sb$, and $S \\to \\epsilon$. Adding the corresponding items, our set becomes:\n$\\{ [S' \\to \\cdot S], [S \\to \\cdot aS], [S \\to \\cdot Sb], [S \\to \\epsilon \\cdot] \\}$\nNote that the production $S \\to \\epsilon$ gives rise to the item $[S \\to \\cdot]$, which we write as $[S \\to \\epsilon \\cdot]$ for clarity as per the problem's notation.\n\n$3$. We now check if any new items can be added by applying the closure rule to the newly added items:\n- For $[S \\to \\cdot aS]$, the dot is before a terminal symbol ($a$), so no new items are added.\n- For $[S \\to \\cdot Sb]$, the dot is before the non-terminal $S$. We must add items for the productions of $S$. However, the items $[S \\to \\cdot aS]$, $[S \\to \\cdot Sb]$, and $[S \\to \\epsilon \\cdot]$ are already in our set. So, no new items are added.\n- For $[S \\to \\epsilon \\cdot]$, the dot is at the end (this is a completed or reduce item), so no new items are added.\n\nThe closure process is complete. The initial $LR(0)$ item set is:\n$$ I_0 = \\{ [S' \\to \\cdot S], [S \\to \\cdot aS], [S \\to \\cdot Sb], [S \\to \\epsilon \\cdot] \\} $$\n\nThe problem asks us to identify a situation within $I_0$ that constitutes a shift/reduce conflict. An $LR(0)$ shift/reduce conflict occurs in an item set if it contains both:\n- A *shift* item, which is of the form $[A \\to \\alpha \\cdot t \\beta]$ where $t$ is a terminal symbol. This indicates that the parser can shift the terminal $t$ from the input onto the stack.\n- A *reduce* item, which is a completed item of the form $[B \\to \\gamma \\cdot]$. In the $LR(0)$ framework, this indicates that the parser can perform a reduction using the production $B \\to \\gamma$, regardless of the next input symbol.\n\nLet's analyze the item set $I_0$ in this context. The terminals of the grammar are $a$ and $b$.\n\n- **Analysis for terminal $a$:**\n  - The item $[S \\to \\cdot aS]$ is present in $I_0$. The dot is before the terminal $a$. This corresponds to a **shift** action on input $a$.\n  - The item $[S \\to \\epsilon \\cdot]$ is also present in $I_0$. This is a completed item. In an $LR(0)$ parser, this item dictates a **reduce** action (by production $S \\to \\epsilon$) for any lookahead terminal. Thus, it specifies a reduce action for input $a$.\n  - Since the set $I_0$ directs the parser to both `shift` and `reduce` on the input terminal $a$, there is a **shift/reduce conflict** for the terminal $a$.\n\n- **Analysis for terminal $b$:**\n  - Is there an item of the form $[A \\to \\alpha \\cdot b \\beta]$ in $I_0$? No. The item $[S \\to \\cdot Sb]$ has the dot before the non-terminal $S$, not the terminal $b$. Therefore, there is no shift action on input $b$.\n  - The item $[S \\to \\epsilon \\cdot]$ is present in $I_0$, which dictates a **reduce** action on input $b$.\n  - For terminal $b$, there is only one defined action: `reduce`. There is no conflict.\n\nA distinct shift/reduce conflict is defined for each pair of (state, terminal) where the conflict occurs. In our case, the state is $I_0$.\n- For the pair $(I_0, a)$, a shift/reduce conflict exists.\n- For the pair $(I_0, b)$, no conflict exists.\n\nTherefore, there is exactly one distinct shift/reduce conflict in the item set $I_0$.\n\nThe final task is to compute the total number of distinct $LR(0)$ shift/reduce conflicts present in the item set $I_0$. Based on the analysis above, this number is $1$.", "answer": "$$\\boxed{1}$$", "id": "3655684"}, {"introduction": "This final practice moves from analysis to synthesis, challenging you to think like a language designer. Instead of simply processing a given grammar, you will design one with a specific limitation: a shift/reduce conflict that is inherent to the LR(0) model but resolvable by a slightly more powerful SLR(1) parser. This exercise deepens your understanding of why different parsing techniques exist and highlights how the choice of grammar directly impacts the feasibility of parsing. [@problem_id:3655655]", "problem": "You are to work entirely from first principles: the definitions of an LR(0) item, the item closure operation, the goto function, and the construction of the canonical LR(0) collection for an augmented grammar. Here, LR stands for Left-to-right input scan, Rightmost derivation in reverse (LR), and LR(0) denotes LR parsing with $0$ symbols of lookahead; Simple LR with one lookahead symbol (SLR(1)) uses FOLLOW sets to restrict reductions.\n\nDesign a context-free grammar $G$ that satisfies all of the following constraints simultaneously:\n- The terminal alphabet is $\\{a\\}$.\n- There is exactly one nonterminal, the start symbol $S$.\n- There are exactly $2$ productions.\n- The language generated by $G$ is $\\{\\epsilon, a\\}$.\n- The canonical LR(0) collection of the augmented grammar $G'$ (obtained by adding a fresh start symbol $S'$ with production $S' \\to S$) exhibits a shift/reduce conflict that arises purely from LR(0) limitations, meaning that when constructing an SLR(1) parsing table for the same grammar using FOLLOW sets, the conflict disappears.\n\nUsing only the core definitions of LR(0) items, item closure, and goto, proceed as follows:\n1. Specify your grammar $G$ satisfying the constraints.\n2. Augment it to $G'$ with the new start production $S' \\to S$.\n3. Construct the initial LR(0) item set $I_{0} = \\operatorname{closure}(\\{S' \\to \\cdot S\\})$ and identify within the canonical LR(0) collection the specific item set $I_{c}$ that produces the shift/reduce conflict.\n4. Justify, directly from the definitions, why the identified conflict is shift/reduce under LR(0), and why it vanishes under SLR(1) by appeal to FOLLOW sets.\n5. Let $k$ be the cardinality of the conflicting item set $I_{c}$. Report $k$ as your final answer.\n\nYour final answer must be the single real-valued number $k$. No units are required, and no rounding is necessary.", "solution": "The problem requires designing a context-free grammar $G$ with specific properties, and then analyzing it using the formal definitions of LR(0) and SLR(1) parsing to identify a shift/reduce conflict and determine the cardinality of the item set where this conflict occurs.\n\n**1. Grammar Specification**\n\nThe constraints for the grammar $G$ are:\n- The terminal alphabet is $\\{a\\}$.\n- There is exactly one nonterminal, the start symbol $S$.\n- There are exactly $2$ productions.\n- The language generated is $L(G) = \\{\\epsilon, a\\}$, where $\\epsilon$ denotes the empty string.\n\nA grammar that satisfies all these constraints is:\n$$\n\\begin{aligned}\nS & \\to a \\\\\nS & \\to \\epsilon\n\\end{aligned}\n$$\nThis grammar has one nonterminal $S$, one terminal $a$, and two productions. It clearly generates the language containing only the strings $a$ and $\\epsilon$.\n\n**2. Augmented Grammar**\n\nTo construct an LR parser, we first augment the grammar $G$ to produce $G'$. A new start symbol, $S'$, is introduced along with a new production $S' \\to S$. The productions for $G'$ are numbered for later reference in reduce actions:\n1. $S' \\to S$\n2. $S \\to a$\n3. $S \\to \\epsilon$\n\n**3. Canonical LR(0) Collection and Conflict Identification**\n\nWe construct the canonical collection of LR(0) item sets. An LR(0) item is a production with a dot ($\\cdot$) somewhere on the right-hand side. The process starts with the item set $I_{0}$, which is the closure of the initial item $\\{S' \\to \\cdot S\\}$.\n\nThe $\\operatorname{closure}$ operation on a set of items $I$ is computed as follows:\n- Initially, every item in $I$ is in $\\operatorname{closure}(I)$.\n- If an item $A \\to \\alpha \\cdot B \\beta$ is in $\\operatorname{closure}(I)$, where $B$ is a nonterminal, then for each production $B \\to \\gamma$, the item $B \\to \\cdot \\gamma$ is added to $\\operatorname{closure}(I)$.\n- This process is repeated until no more new items can be added to $\\operatorname{closure}(I)$.\n\nLet's compute $I_{0} = \\operatorname{closure}(\\{S' \\to \\cdot S\\})$:\n- The initial set contains the item $S' \\to \\cdot S$.\n- The dot is before the nonterminal $S$. Therefore, we must add all items corresponding to productions for $S$, with the dot at the beginning. The productions for $S$ are $S \\to a$ and $S \\to \\epsilon$.\n- This adds the items $S \\to \\cdot a$ and $S \\to \\cdot \\epsilon$.\n- The item $S \\to \\cdot \\epsilon$ can also be written as $S \\to \\epsilon \\cdot$. Since the dot is at the end of the right-hand side, no further items are added from it. The closure process terminates.\n\nThe initial item set is:\n$$ I_{0} = \\{ S' \\to \\cdot S, S \\to \\cdot a, S \\to \\cdot \\epsilon \\} $$\nThis item set $I_{0}$ represents the initial state of the LR(0) automaton. We must analyze this state for conflicts. A shift/reduce conflict occurs in an item set if it contains both a shift item ($A \\to \\alpha \\cdot t \\beta$, where $t$ is a terminal) and a reduce item ($B \\to \\gamma \\cdot$).\n\nIn $I_{0}$, we have:\n- The item $S \\to \\cdot a$: This is a shift item. It dictates that if the parser is in the state corresponding to $I_{0}$ and the next input symbol is $a$, the parser should perform a SHIFT action.\n- The item $S \\to \\cdot \\epsilon$: This item can be written as $S \\to \\epsilon \\cdot$, indicating that the production's right-hand side has been fully recognized. This is a reduce item. In LR(0) parsing, a state containing such an item mandates a REDUCE action for *any* lookahead symbol.\n\nSince for the lookahead symbol $a$, the item set $I_{0}$ suggests both a SHIFT action (from $S \\to \\cdot a$) and a REDUCE action (from $S \\to \\epsilon \\cdot$), this state has a shift/reduce conflict. The grammar is therefore not LR(0). The conflicting item set is $I_{c} = I_{0}$.\n\n**4. Conflict Resolution under SLR(1)**\n\nSLR(1) parsing resolves such conflicts by making the reduce action more selective. A reduce action for a production $B \\to \\gamma$ is performed only if the lookahead symbol is in the set $\\operatorname{FOLLOW}(B)$. We must compute the FOLLOW set for the nonterminal $S$.\n\nThe FOLLOW set is calculated based on the grammar $G'$.\n1.  For the augmented production $S' \\to S$, the nonterminal $S$ is followed by the end of the production. Therefore, everything in $\\operatorname{FOLLOW}(S')$ is in $\\operatorname{FOLLOW}(S)$. By definition, $\\operatorname{FOLLOW}(S')$ contains the end-of-input marker, which we denote as $\\$$. So, $\\$ \\in \\operatorname{FOLLOW}(S)$.\n2.  We search for other occurrences of $S$ on the right-hand side of productions. There are no other such occurrences.\n\nThus, the FOLLOW set for $S$ is $\\operatorname{FOLLOW}(S) = \\{ \\$ \\}$.\n\nNow we reconsider the actions in state $I_{0}$ under SLR(1) rules:\n- **SHIFT action**: The item $S \\to \\cdot a$ still indicates that on lookahead symbol $a$, the parser should SHIFT.\n- **REDUCE action**: The item $S \\to \\epsilon \\cdot$ corresponds to a reduction by production $S \\to \\epsilon$. This action is now only valid if the lookahead symbol is in $\\operatorname{FOLLOW}(S)$. Since $\\operatorname{FOLLOW}(S) = \\{ \\$\\}$, the reduce action is only performed on lookahead $\\$$.\n\nThe parsing actions for state $I_{0}$ become:\n- If the lookahead is $a$: Perform SHIFT.\n- If the lookahead is $\\$$: Perform REDUCE by $S \\to \\epsilon$.\n\nThe sets of lookahead symbols for the shift and reduce actions ($\\{a\\}$ and $\\{ \\$\\}$) are disjoint. Consequently, the shift/reduce conflict is resolved. The grammar is SLR(1).\n\n**5. Cardinality of the Conflicting Set**\n\nThe problem asks for $k$, the cardinality of the conflicting item set $I_{c}$. We have identified this set as $I_{0}$.\n$$ I_{c} = I_{0} = \\{ S' \\to \\cdot S, S \\to \\cdot a, S \\to \\cdot \\epsilon \\} $$\nThe set contains $3$ distinct LR(0) items. Therefore, the cardinality is $k = 3$.", "answer": "$$\\boxed{3}$$", "id": "3655655"}]}