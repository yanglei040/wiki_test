{"hands_on_practices": [{"introduction": "To master page replacement algorithms, it is essential to understand both the theoretical ideal and the practical reality. This exercise puts you in the driver's seat for two foundational policies: the Optimal (OPT) algorithm, which provides an unbeatable performance benchmark by looking into the future, and the Least Recently Used (LRU) algorithm, a highly effective and widely studied real-world strategy. By manually tracing both algorithms side-by-side, you will gain a concrete feel for their decision-making logic and quantify the performance gap between them on a given workload [@problem_id:3663525].", "problem": "Consider a virtual memory system with a fixed number of physical frames and a single process generating a page reference string. The system uses demand paging, and on each access, if the referenced page is not in any physical frame, a page fault occurs. When a replacement is needed, the system may use different page replacement policies with the following core definitions.\n\nFundamental definitions to use:\n- A page reference string is an ordered sequence of page numbers, denoted by $R = (r_{1}, r_{2}, \\dots, r_{N})$, where $N$ is the length of the sequence and each $r_{i}$ is a positive integer label for a page.\n- A physical memory has $F$ frames that can each hold one page.\n- A page fault occurs whenever a referenced page $r_{i}$ is not resident in any of the $F$ frames at the time of reference.\n- Least Recently Used (LRU) replacement evicts the page whose most recent past use (backward in the reference string) is farthest in the past among the pages currently resident.\n- Optimal Page Replacement (OPT) evicts the page whose next use (forward in the reference string) occurs farthest in the future, or that is never used again. To make the procedure well-defined in case of ties in next-use distance, when two or more pages have equal farthest next use, evict the page with the smallest numerical label.\n\nYou are given $F = 3$ frames and the page reference string\n$$\nR = (2, 3, 2, 1, 5, 2, 4, 1, 2, 3, 7, 2, 6, 1, 2, 5, 3, 2, 4, 1).\n$$\n\nTasks:\n1. Execute the Optimal Page Replacement (OPT) policy step-by-step over $R$ with $F = 3$, computing at each replacement the next-use time for each page currently resident and choosing the victim accordingly, with the tie-break rule described above.\n2. Execute the Least Recently Used (LRU) policy step-by-step over $R$ with $F = 3$, choosing the victim based on recency of past use.\n3. Let $P_{\\text{OPT}}$ be the total number of page faults under OPT and $P_{\\text{LRU}}$ be the total number of page faults under LRU. Compute the difference\n$$\n\\Delta = P_{\\text{LRU}} - P_{\\text{OPT}}.\n$$\n\nProvide the single numerical value of $\\Delta$ as your final answer. No rounding is necessary. No physical units apply.", "solution": "The problem is valid. It is a standard, well-defined problem in the field of computer architecture and operating systems, dealing with the analysis of page replacement algorithms. The problem statement provides all necessary information: the number of frames $F$, the page reference string $R$, and unambiguous definitions for the Optimal (OPT) and Least Recently Used (LRU) algorithms, including a specific tie-breaking rule for OPT. The problem is scientifically grounded, self-contained, and objective.\n\nThe task is to compute the difference $\\Delta = P_{\\text{LRU}} - P_{\\text{OPT}}$, where $P_{\\text{LRU}}$ and $P_{\\text{OPT}}$ are the total number of page faults for the LRU and OPT algorithms, respectively, given $F=3$ frames and the reference string $R = (2, 3, 2, 1, 5, 2, 4, 1, 2, 3, 7, 2, 6, 1, 2, 5, 3, 2, 4, 1)$.\n\nWe will simulate each algorithm step-by-step to find the total number of page faults.\n\n### Optimal (OPT) Page Replacement Simulation\nThe OPT algorithm evicts the page that will not be used for the longest period of time. If multiple pages have the same farthest future use (including never being used again), the tie is broken by evicting the page with the smallest numerical label. The physical memory has $F=3$ frames.\n\nLet's trace the execution:\n$R = (2, 3, 2, 1, 5, 2, 4, 1, 2, 3, 7, 2, 6, 1, 2, 5, 3, 2, 4, 1)$\n\n-   $t=1$: Ref $2$. Frames: $\\{2\\}$. Page Fault (1).\n-   $t=2$: Ref $3$. Frames: $\\{2, 3\\}$. Page Fault (2).\n-   $t=3$: Ref $2$. Frames: $\\{2, 3\\}$. Hit.\n-   $t=4$: Ref $1$. Frames: $\\{1, 2, 3\\}$. Page Fault (3).\n-   $t=5$: Ref $5$. Frames: $\\{1, 2, 3\\}$. Page Fault (4). Frames are full.\n    -   Future uses: $1$ at $t=8$, $2$ at $t=6$, $3$ at $t=10$.\n    -   Farthest is $3$. Victim: $3$. Frames: $\\{1, 2, 5\\}$.\n-   $t=6$: Ref $2$. Frames: $\\{1, 2, 5\\}$. Hit.\n-   $t=7$: Ref $4$. Frames: $\\{1, 2, 5\\}$. Page Fault (5).\n    -   Future uses: $1$ at $t=8$, $2$ at $t=9$, $5$ at $t=16$.\n    -   Farthest is $5$. Victim: $5$. Frames: $\\{1, 2, 4\\}$.\n-   $t=8$: Ref $1$. Frames: $\\{1, 2, 4\\}$. Hit.\n-   $t=9$: Ref $2$. Frames: $\\{1, 2, 4\\}$. Hit.\n-   $t=10$: Ref $3$. Frames: $\\{1, 2, 4\\}$. Page Fault (6).\n    -   Future uses: $1$ at $t=14$, $2$ at $t=12$, $4$ at $t=19$.\n    -   Farthest is $4$. Victim: $4$. Frames: $\\{1, 2, 3\\}$.\n-   $t=11$: Ref $7$. Frames: $\\{1, 2, 3\\}$. Page Fault (7).\n    -   Future uses: $1$ at $t=14$, $2$ at $t=12$, $3$ at $t=17$.\n    -   Farthest is $3$. Victim: $3$. Frames: $\\{1, 2, 7\\}$.\n-   $t=12$: Ref $2$. Frames: $\\{1, 2, 7\\}$. Hit.\n-   $t=13$: Ref $6$. Frames: $\\{1, 2, 7\\}$. Page Fault (8).\n    -   Future uses: $1$ at $t=14$, $2$ at $t=15$, $7$ is never used again.\n    -   Farthest is $7$. Victim: $7$. Frames: $\\{1, 2, 6\\}$.\n-   $t=14$: Ref $1$. Frames: $\\{1, 2, 6\\}$. Hit.\n-   $t=15$: Ref $2$. Frames: $\\{1, 2, 6\\}$. Hit.\n-   $t=16$: Ref $5$. Frames: $\\{1, 2, 6\\}$. Page Fault (9).\n    -   Future uses: $1$ at $t=20$, $2$ at $t=18$, $6$ is never used again.\n    -   Farthest is $6$. Victim: $6$. Frames: $\\{1, 2, 5\\}$.\n-   $t=17$: Ref $3$. Frames: $\\{1, 2, 5\\}$. Page Fault (10).\n    -   Future uses: $1$ at $t=20$, $2$ at $t=18$, $5$ is never used again.\n    -   Farthest is $5$. Victim: $5$. Frames: $\\{1, 2, 3\\}$.\n-   $t=18$: Ref $2$. Frames: $\\{1, 2, 3\\}$. Hit.\n-   $t=19$: Ref $4$. Frames: $\\{1, 2, 3\\}$. Page Fault (11).\n    -   Future uses: $1$ at $t=20$, $2$ is never used again, $3$ is never used again.\n    -   Tie between $2$ and $3$ (both never used). Tie-break rule: evict page with smallest label.\n    -   Victim: $2$. Frames: $\\{1, 3, 4\\}$.\n-   $t=20$: Ref $1$. Frames: $\\{1, 3, 4\\}$. Hit.\n\nThe total number of page faults for the OPT algorithm is $P_{\\text{OPT}} = 11$.\n\n### Least Recently Used (LRU) Page Replacement Simulation\nThe LRU algorithm evicts the page that has not been used for the longest period of time in the past. We can track this using a recency list, where the least recently used page is at the head and the most recently used page is at the tail.\n\n-   $t=1$: Ref $2$. Frames: $\\{2\\}$. Recency: $(2)$. Page Fault (1).\n-   $t=2$: Ref $3$. Frames: $\\{2, 3\\}$. Recency: $(2, 3)$. Page Fault (2).\n-   $t=3$: Ref $2$. Frames: $\\{2, 3\\}$. Hit. Recency: $(3, 2)$.\n-   $t=4$: Ref $1$. Frames: $\\{1, 2, 3\\}$. Recency: $(3, 2, 1)$. Page Fault (3).\n-   $t=5$: Ref $5$. Frames: $\\{1, 2, 3\\}$. Page Fault (4).\n    -   LRU page is $3$. Victim: $3$. Frames: $\\{1, 2, 5\\}$. Recency: $(2, 1, 5)$.\n-   $t=6$: Ref $2$. Frames: $\\{1, 2, 5\\}$. Hit. Recency: $(1, 5, 2)$.\n-   $t=7$: Ref $4$. Frames: $\\{1, 2, 5\\}$. Page Fault (5).\n    -   LRU page is $1$. Victim: $1$. Frames: $\\{2, 4, 5\\}$. Recency: $(5, 2, 4)$.\n-   $t=8$: Ref $1$. Frames: $\\{2, 4, 5\\}$. Page Fault (6).\n    -   LRU page is $5$. Victim: $5$. Frames: $\\{1, 2, 4\\}$. Recency: $(2, 4, 1)$.\n-   $t=9$: Ref $2$. Frames: $\\{1, 2, 4\\}$. Hit. Recency: $(4, 1, 2)$.\n-   $t=10$: Ref $3$. Frames: $\\{1, 2, 4\\}$. Page Fault (7).\n    -   LRU page is $4$. Victim: $4$. Frames: $\\{1, 2, 3\\}$. Recency: $(1, 2, 3)$.\n-   $t=11$: Ref $7$. Frames: $\\{1, 2, 3\\}$. Page Fault (8).\n    -   LRU page is $1$. Victim: $1$. Frames: $\\{2, 3, 7\\}$. Recency: $(2, 3, 7)$.\n-   $t=12$: Ref $2$. Frames: $\\{2, 3, 7\\}$. Hit. Recency: $(3, 7, 2)$.\n-   $t=13$: Ref $6$. Frames: $\\{2, 3, 7\\}$. Page Fault (9).\n    -   LRU page is $3$. Victim: $3$. Frames: $\\{2, 6, 7\\}$. Recency: $(7, 2, 6)$.\n-   $t=14$: Ref $1$. Frames: $\\{2, 6, 7\\}$. Page Fault (10).\n    -   LRU page is $7$. Victim: $7$. Frames: $\\{1, 2, 6\\}$. Recency: $(2, 6, 1)$.\n-   $t=15$: Ref $2$. Frames: $\\{1, 2, 6\\}$. Hit. Recency: $(6, 1, 2)$.\n-   $t=16$: Ref $5$. Frames: $\\{1, 2, 6\\}$. Page Fault (11).\n    -   LRU page is $6$. Victim: $6$. Frames: $\\{1, 2, 5\\}$. Recency: $(1, 2, 5)$.\n-   $t=17$: Ref $3$. Frames: $\\{1, 2, 5\\}$. Page Fault (12).\n    -   LRU page is $1$. Victim: $1$. Frames: $\\{2, 3, 5\\}$. Recency: $(2, 5, 3)$.\n-   $t=18$: Ref $2$. Frames: $\\{2, 3, 5\\}$. Hit. Recency: $(5, 3, 2)$.\n-   $t=19$: Ref $4$. Frames: $\\{2, 3, 5\\}$. Page Fault (13).\n    -   LRU page is $5$. Victim: $5$. Frames: $\\{2, 3, 4\\}$. Recency: $(3, 2, 4)$.\n-   $t=20$: Ref $1$. Frames: $\\{2, 3, 4\\}$. Page Fault (14).\n    -   LRU page is $3$. Victim: $3$. Frames: $\\{1, 2, 4\\}$. Recency: $(2, 4, 1)$.\n\nThe total number of page faults for the LRU algorithm is $P_{\\text{LRU}} = 14$.\n\n### Final Calculation\nThe problem asks for the difference $\\Delta = P_{\\text{LRU}} - P_{\\text{OPT}}$.\nSubstituting the calculated values:\n$$\n\\Delta = 14 - 11 = 3\n$$\nThe difference in the number of page faults is $3$.", "answer": "$$\n\\boxed{3}\n$$", "id": "3663525"}, {"introduction": "While the LRU algorithm offers excellent performance, implementing it perfectly requires significant hardware support to track page usage precisely. A more common and efficient approach is the Second-Chance, or Clock, algorithm, which provides a low-cost approximation of LRU. This practice challenges you to simulate both LRU and Clock on a workload specifically designed to expose a performance pitfall known as thrashing, where frequent page faults degrade system performance [@problem_id:3663508]. This comparison will illuminate the trade-offs between algorithmic purity and implementation efficiency.", "problem": "Consider a virtual memory system with $N$ physical page frames, initially empty, and a process that generates a cyclic memory reference string composed of $k$ hot pages and $m$ cold pages. The hot pages are denoted by $H_1, H_2, \\dots, H_k$, and the cold pages are denoted by $C_1, C_2, \\dots, C_m$. A single cycle of the reference string consists of the hot block followed immediately by the cold block in order. The cycle then repeats. Specifically, take $k=3$, $m=4$, and $N=4$, and consider exactly $2$ complete cycles of the following reference string:\n$$H_1, H_2, H_3, C_1, C_2, C_3, C_4, H_1, H_2, H_3, C_1, C_2, C_3, C_4.$$\nUse the following foundational definitions and rules:\n- A page fault occurs whenever a referenced page is not currently resident in any of the $N$ frames.\n- Least Recently Used (LRU) evicts on a fault the resident page whose most recent reference time is the oldest among all resident pages; on a hit it updates the page’s recency to the current time.\n- The Second-Chance Clock algorithm (Clock) arranges the $N$ frames in a fixed circular order with a clock hand that points to a current candidate frame. Each frame has a reference bit that is set to $1$ on any hit of that frame’s page. On a fault, the algorithm scans frames starting at the hand: if the frame’s reference bit is $1$, it resets the bit to $0$ and advances the hand; if the bit is $0$, it evicts that frame’s page and inserts the faulting page into that frame with its reference bit set to $1$, then advances the hand to the next frame and stops. Initially, the hand points to frame $1$, all frames are empty with reference bits $0$, and empty frames are treated as immediately evictable (reference bit $0$).\nStarting from these definitions alone and without invoking any shortcut formulas, determine the exact number of page faults produced by both LRU and Clock over the specified $14$-reference string, and then compute the difference $F_{\\mathrm{LRU}} - F_{\\mathrm{Clock}}$, where $F_{\\mathrm{LRU}}$ and $F_{\\mathrm{Clock}}$ denote the total fault counts under LRU and Clock, respectively. Provide a single exact integer for $F_{\\mathrm{LRU}} - F_{\\mathrm{Clock}}$. No rounding is required, and no units are needed.", "solution": "The problem as stated is formally sound, self-contained, and scientifically grounded in the principles of computer architecture and operating systems. All necessary parameters and definitions are provided and are consistent. Therefore, the problem is valid and a solution can be determined.\n\nThe objective is to compute the difference in the total number of page faults, $F_{\\mathrm{LRU}} - F_{\\mathrm{Clock}}$, for a given memory reference string using the Least Recently Used (LRU) and Second-Chance Clock (Clock) page replacement algorithms.\n\nThe provided parameters are:\n- Number of physical page frames: $N=4$.\n- Number of \"hot\" pages: $k=3$ ($H_1, H_2, H_3$).\n- Number of \"cold\" pages: $m=4$ ($C_1, C_2, C_3, C_4$).\n- The total reference string consists of two complete cycles: $S = (H_1, H_2, H_3, C_1, C_2, C_3, C_4, H_1, H_2, H_3, C_1, C_2, C_3, C_4)$.\nThe length of this string is $14$ references. The set of unique pages in one cycle is $\\{H_1, H_2, H_3, C_1, C_2, C_3, C_4\\}$, which has a size of $k+m = 3+4=7$.\n\n**Analysis of the Least Recently Used (LRU) Algorithm**\n\nThe LRU algorithm replaces the page that has not been used for the longest period of time. We simulate the algorithm with $N=4$ frames, initially empty.\n\n1.  **References $1$ through $4$**: The first $4$ references are to distinct pages ($H_1, H_2, H_3, C_1$). Since the frames are initially empty, these are all compulsory page faults.\n    -   After reference $1$ to $H_1$: Frames contain $\\{H_1\\}$.\n    -   After reference $2$ to $H_2$: Frames contain $\\{H_1, H_2\\}$.\n    -   After reference $3$ to $H_3$: Frames contain $\\{H_1, H_2, H_3\\}$.\n    -   After reference $4$ to $C_1$: Frames contain $\\{H_1, H_2, H_3, C_1\\}$. The frames are now full.\n    At this point, there have been $4$ page faults. The recency order is $C_1$ (most recent), $H_3, H_2, H_1$ (least recent).\n\n2.  **Subsequent References**: Consider any page $P$ in the unique set of $7$ pages. The reference string is a strict periodic sequence with a period of $7$. The next time $P$ is referenced, $6$ other distinct pages will have been referenced in the interim ($P_1, P_2, \\dots, P_7, P_1, \\dots$).\n    For LRU, a page remains in memory only if it is one of the $N$ most recently accessed pages. If a page $P$ is accessed, and then $N$ or more other distinct pages are accessed before $P$ is accessed again, $P$ is guaranteed to be evicted.\n    In this problem, $N=4$. The number of intervening distinct references between two consecutive accesses to any given page is $6$. Since $6 \\ge N$, every page referenced will have been evicted from the frames by the time it is referenced again.\n\n    Let's verify this for the $5^{th}$ reference to $C_2$:\n    -   The frames contain $\\{H_1, H_2, H_3, C_1\\}$. The LRU page is $H_1$.\n    -   The reference to $C_2$ is a fault. $H_1$ is evicted. Frames now contain $\\{H_2, H_3, C_1, C_2\\}$. This is the $5^{th}$ fault.\n    This logic continues for every subsequent access. For example, the next reference is to $C_3$. The LRU page is now $H_2$. $H_2$ is evicted. This is the $6^{th}$ fault. This pattern, known as thrashing, persists for the entire string.\n\nTherefore, every one of the $14$ references results in a page fault.\nThe total number of page faults for LRU is $F_{\\mathrm{LRU}} = 14$.\n\n**Analysis of the Second-Chance Clock Algorithm**\n\nThe Clock algorithm uses a reference bit for each frame to approximate LRU. We simulate the algorithm with $N=4$ frames, all initially empty with reference bits $0$, and the clock hand pointing to frame $1$.\n\n1.  **References $1$ through $4$**: These are compulsory faults, which fill the frames.\n    -   Ref $1$ ($H_1$): Fault. Place $H_1$ in frame $1$. Set its bit to $1$. Hand advances to frame $2$. State: $F_1(H_1,1)$.\n    -   Ref $2$ ($H_2$): Fault. Place $H_2$ in frame $2$. Set bit to $1$. Hand advances to frame $3$. State: $F_1(H_1,1), F_2(H_2,1)$.\n    -   Ref $3$ ($H_3$): Fault. Place $H_3$ in frame $3$. Set bit to $1$. Hand advances to frame $4$. State: $F_1(H_1,1), F_2(H_2,1), F_3(H_3,1)$.\n    -   Ref $4$ ($C_1$): Fault. Place $C_1$ in frame $4$. Set bit to $1$. Hand advances to frame $1$. State: $F_1(H_1,1), F_2(H_2,1), F_3(H_3,1), F_4(C_1,1)$.\n    At this point, there have been $4$ page faults. All reference bits are $1$.\n\n2.  **Subsequent References**: Consider the $5^{th}$ reference to $C_2$.\n    -   This is a fault. The hand is at frame $1$.\n    -   The algorithm scans for a victim frame (a frame with reference bit $0$).\n    -   Scan $F_1(H_1,1)$: Bit is $1$. Set bit to $0$. Advance hand to $F_2$.\n    -   Scan $F_2(H_2,1)$: Bit is $1$. Set bit to $0$. Advance hand to $F_3$.\n    -   Scan $F_3(H_3,1)$: Bit is $1$. Set bit to $0$. Advance hand to $F_4$.\n    -   Scan $F_4(C_1,1)$: Bit is $1$. Set bit to $0$. Advance hand to $F_1$.\n    -   The hand has made a full circle. All bits are now $0$. The hand is back at $F_1$.\n    -   Scan $F_1(H_1,0)$: Bit is $0$. This is the victim. Evict $H_1$. Place $C_2$ in $F_1$, set its bit to $1$. Advance hand to $F_2$.\n    This is the $5^{th}$ fault. The page evicted is $H_1$, the first page brought in.\n\nIn this specific access pattern (a sequential scan of pages where the number of unique pages is greater than the number of frames), all resident pages are referenced with equal recency from the algorithm's perspective (all bits are $1$ prior to a fault). The clock hand sweeps through, giving every page one \"second chance\" by clearing its bit, and then on the second pass, replaces pages in the order they were loaded. This behavior is identical to the First-In, First-Out (FIFO) algorithm.\n\nJust like LRU, the FIFO algorithm will also fault on every access in this scenario. The number of intervening distinct pages ($6$) is larger than the number of frames ($4$), so by the time any page is requested again, it has already been evicted.\n\nTherefore, every one of the $14$ references results in a page fault under the Clock algorithm as well.\nThe total number of page faults for Clock is $F_{\\mathrm{Clock}} = 14$.\n\n**Final Calculation**\n\nThe difference between the number of page faults for LRU and Clock is:\n$$F_{\\mathrm{LRU}} - F_{\\mathrm{Clock}} = 14 - 14 = 0$$", "answer": "$$\\boxed{0}$$", "id": "3663508"}, {"introduction": "No single page replacement algorithm is perfect for every situation; even a strong performer like LRU has well-known vulnerabilities. One critical weakness is its susceptibility to \"cache pollution\" from large, sequential scans that evict valuable, frequently-used pages from the working set. This advanced exercise moves from simple analysis to algorithmic design, asking you to evaluate a \"filtered\" LRU policy that intelligently protects the core working set from such transient scans [@problem_id:3663470]. By quantifying the reduction in the page fault rate, you will see firsthand how a small enhancement can lead to a more robust and adaptive memory management system.", "problem": "A virtual memory system uses a main memory with $F=5$ page frames and serves a process whose reference string is constructed to expose the vulnerability of Least Recently Used (LRU) to short scans. The following references occur in order:\n- A steady working set $W=\\{1,2,3,4\\}$ is accessed as the sequence $(1,2,3,4)$ repeated for $3$ complete cycles, producing $12$ references.\n- A short scan of $4$ distinct, never-to-be-reused pages $(5,6,7,8)$ follows, each referenced exactly once.\n- The working set $W$ resumes for $2$ further complete cycles, producing $8$ more references.\n\nAssume all page frames are initially empty. Define the page fault rate as the ratio of total page faults to total references.\n\nConsider two policies:\n1. Vanilla Least Recently Used (LRU), which evicts the page whose most recent reference is furthest in the past.\n2. A filtered LRU that applies a sliding-window hot-set protector with window size $w=12$: for each reference at time $t$, define the hot set $H(t)$ to be the set of pages that have appeared at least twice in the immediately preceding $w$ references. On a page fault at time $t$, the victim is chosen by LRU among the frames currently holding pages not in $H(t)$; if every resident page is in $H(t)$, choose the overall LRU. After servicing the fault, the newly loaded page is treated as protected if and only if it belongs to $H(t)$, where $H(t)$ is computed from the $w$ references immediately preceding time $t$.\n\nStarting only from the fundamental definitions of page faults, LRU recency ordering, and the stated window-based protection rule, derive the fault counts for both policies on the specified reference string. Then compute the decrease in page fault rate achieved by the filtered LRU compared to vanilla LRU. Express your final answer as a single exact fraction. No rounding is required.", "solution": "The problem requires an analysis of two page replacement algorithms, vanilla Least Recently Used (LRU) and a custom filtered LRU, on a specified reference string. We must first validate the problem statement. The problem provides all necessary parameters: the number of page frames $F=5$, a complete and unambiguous reference string, the initial state of memory (all frames empty), and explicit, formalizable rules for both algorithms. The problem is scientifically grounded in the domain of computer architecture, is well-posed, and objective. Therefore, the problem is valid and we may proceed to the solution.\n\nThe total reference string is constructed from three segments.\n1.  The working set $W=\\{1,2,3,4\\}$ is accessed in a cycle $(1,2,3,4)$ repeated $3$ times, yielding the sequence $(1,2,3,4,1,2,3,4,1,2,3,4)$. This is a total of $12$ references.\n2.  A scan of $4$ new pages $(5,6,7,8)$. This is $4$ references.\n3.  The working set $W$ is accessed in a cycle $(1,2,3,4)$ repeated $2$ times, yielding $(1,2,3,4,1,2,3,4)$. This is $8$ references.\n\nThe complete reference string $S$ is therefore $(1,2,3,4,1,2,3,4,1,2,3,4,5,6,7,8,1,2,3,4,1,2,3,4)$.\nThe total number of references is $N_{ref} = 12 + 4 + 8 = 24$.\nThe number of available page frames is $F=5$.\n\n### 1. Vanilla Least Recently Used (LRU) Analysis\n\nWith LRU, on a page fault, the page that has not been used for the longest amount of time is evicted. We trace the state of the $5$ page frames over the $24$ references. A page fault occurs when a referenced page is not in memory. Initially, all frames are empty.\n\n-   **References 1-4: (1, 2, 3, 4)**\n    These are all compulsory misses, as the frames are initially empty.\n    -   Ref 1 (1): Fault. Memory: $\\{1\\}$. Fault count: $1$.\n    -   Ref 2 (2): Fault. Memory: $\\{1, 2\\}$. Fault count: $2$.\n    -   Ref 3 (3): Fault. Memory: $\\{1, 2, 3\\}$. Fault count: $3$.\n    -   Ref 4 (4): Fault. Memory: $\\{1, 2, 3, 4\\}$. Fault count: $4$.\n    At this point, the recency ordering is $(4, 3, 2, 1)$ from most to least recent.\n\n-   **References 5-12: (1, 2, 3, 4, 1, 2, 3, 4)**\n    All pages $\\{1, 2, 3, 4\\}$ are in memory. These $8$ references are all hits. The fault count remains $4$.\n\n-   **Reference 13: (5)**\n    Page $5$ is not in memory. This is a fault. The memory contains $\\{1, 2, 3, 4\\}$ and has one empty frame. Page $5$ is loaded into the empty frame.\n    -   Ref 13 (5): Fault. Memory: $\\{1, 2, 3, 4, 5\\}$. Fault count: $5$.\n    The recency ordering is now $(5, 4, 3, 2, 1)$.\n\n-   **References 14-16: (6, 7, 8)**\n    These references cause faults, and since memory is full, they trigger evictions. The LRU page is the victim.\n    -   Ref 14 (6): Fault. LRU page is $1$. Evict $1$, load $6$. Memory: $\\{2, 3, 4, 5, 6\\}$. Fault count: $6$. Recency: $(6, 5, 4, 3, 2)$.\n    -   Ref 15 (7): Fault. LRU page is $2$. Evict $2$, load $7$. Memory: $\\{3, 4, 5, 6, 7\\}$. Fault count: $7$. Recency: $(7, 6, 5, 4, 3)$.\n    -   Ref 16 (8): Fault. LRU page is $3$. Evict $3$, load $8$. Memory: $\\{4, 5, 6, 7, 8\\}$. Fault count: $8$. Recency: $(8, 7, 6, 5, 4)$.\n    The short scan has now evicted pages $1, 2, 3$ from the original working set.\n\n-   **References 17-20: (1, 2, 3, 4)**\n    The working set references resume, but the pages have been evicted.\n    -   Ref 17 (1): Fault. LRU page is $4$. Evict $4$, load $1$. Memory: $\\{1, 5, 6, 7, 8\\}$. Fault count: $9$. Recency: $(1, 8, 7, 6, 5)$.\n    -   Ref 18 (2): Fault. LRU page is $5$. Evict $5$, load $2$. Memory: $\\{1, 2, 6, 7, 8\\}$. Fault count: $10$. Recency: $(2, 1, 8, 7, 6)$.\n    -   Ref 19 (3): Fault. LRU page is $6$. Evict $6$, load $3$. Memory: $\\{1, 2, 3, 7, 8\\}$. Fault count: $11$. Recency: $(3, 2, 1, 8, 7)$.\n    -   Ref 20 (4): Fault. LRU page is $7$. Evict $7$, load $4$. Memory: $\\{1, 2, 3, 4, 8\\}$. Fault count: $12$. Recency: $(4, 3, 2, 1, 8)$.\n\n-   **References 21-24: (1, 2, 3, 4)**\n    The working set pages $\\{1, 2, 3, 4\\}$ are now back in memory. These $4$ references are hits. The fault count remains $12$.\n\nThe total number of page faults for the vanilla LRU policy is $N_{faults, LRU} = 12$.\nThe page fault rate is $R_{LRU} = \\frac{N_{faults, LRU}}{N_{ref}} = \\frac{12}{24} = \\frac{1}{2}$.\n\n### 2. Filtered LRU Analysis\n\nThis policy uses a sliding window of size $w=12$ to define a hot set, $H(t)$, which contains pages referenced at least twice in the $w$ references preceding time $t$. On a fault, the victim is the LRU page among resident pages not in $H(t)$.\n\n-   **References 1-12: (1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4)**\n    -   For references $1$ to $4$, we have $4$ compulsory misses. Memory: $\\{1,2,3,4\\}$. Fault count: $4$.\n    -   For references $5$ to $12$, the pages are in memory, so these are all hits.\n    -   During this phase, the hot set $H(t)$ evolves. For $t \\le 5$, no page is referenced twice, so $H(t)=\\emptyset$. For $t \\ge 9$, the window contains two full cycles of $(1,2,3,4)$, so $H(t)=\\{1,2,3,4\\}$.\n    -   At the end of this phase (after reference $12$), the fault count is $4$.\n\n-   **Reference 13: (5)**\n    -   Time $t=13$. The preceding $w=12$ references are $(1,2,3,4,1,2,3,4,1,2,3,4)$. Each page in $\\{1,2,3,4\\}$ has been referenced $3$ times. So, $H(13)=\\{1,2,3,4\\}$.\n    -   Page $5$ is not in memory (which contains $\\{1,2,3,4\\}$). This is a fault.\n    -   There is one empty frame, so page $5$ is loaded without eviction.\n    -   Memory: $\\{1,2,3,4,5\\}$. Fault count: $4+1=5$.\n\n-   **Reference 14: (6)**\n    -   Time $t=14$. The window is $S_{2:13} = (2,3,4,1,2,3,4,1,2,3,4,5)$. The pages $\\{1,2,3,4\\}$ have frequency $\\ge 2$. So, $H(14)=\\{1,2,3,4\\}$.\n    -   Page $6$ is not in memory. This is a fault. Memory is full.\n    -   The set of resident pages is $P=\\{1,2,3,4,5\\}$.\n    -   The set of protected resident pages is $P \\cap H(14) = \\{1,2,3,4\\}$.\n    -   The set of evictable pages is $P \\setminus H(14) = \\{5\\}$.\n    -   The victim must be page $5$. Evict $5$, load $6$.\n    -   Memory: $\\{1,2,3,4,6\\}$. Fault count: $5+1=6$.\n\n-   **Reference 15: (7)**\n    -   Time $t=15$. The window is $S_{3:14} = (3,4,1,2,3,4,1,2,3,4,5,6)$. $H(15)=\\{1,2,3,4\\}$.\n    -   Page $7$ is not in memory. Fault.\n    -   Resident pages $P=\\{1,2,3,4,6\\}$. Protected pages $P \\cap H(15)=\\{1,2,3,4\\}$.\n    -   Evictable pages $P \\setminus H(15)=\\{6\\}$. Victim is $6$.\n    -   Evict $6$, load $7$. Memory: $\\{1,2,3,4,7\\}$. Fault count: $6+1=7$.\n\n-   **Reference 16: (8)**\n    -   Time $t=16$. The window is $S_{4:15} = (4,1,2,3,4,1,2,3,4,5,6,7)$. Each page in $\\{1,2,3,4\\}$ appears at least twice. $H(16)=\\{1,2,3,4\\}$.\n    -   Page $8$ is not in memory. Fault.\n    -   Resident pages $P=\\{1,2,3,4,7\\}$. Protected $P \\cap H(16)=\\{1,2,3,4\\}$.\n    -   Evictable pages $P \\setminus H(16)=\\{7\\}$. Victim is $7$.\n    -   Evict $7$, load $8$. Memory: $\\{1,2,3,4,8\\}$. Fault count: $7+1=8$.\n    At this point, the working set pages $\\{1,2,3,4\\}$ are still resident, protected by the hot-set filter. The scan pages $\\{5,6,7\\}$ were loaded and evicted in turn.\n\n-   **References 17-24: (1, 2, 3, 4, 1, 2, 3, 4)**\n    -   The memory state is $\\{1,2,3,4,8\\}$.\n    -   All references in this sequence are to pages $\\{1,2,3,4\\}$. Since these pages are all resident in memory, all $8$ references are hits.\n    -   The hot sets $H(t)$ during this phase will continue to contain $\\{1,2,3,4\\}$ as these pages continue to be referenced frequently within the sliding window.\n    -   The fault count does not increase.\n\nThe total number of page faults for the filtered LRU policy is $N_{faults, FIL-LRU} = 8$.\nThe page fault rate is $R_{FIL-LRU} = \\frac{N_{faults, FIL-LRU}}{N_{ref}} = \\frac{8}{24} = \\frac{1}{3}$.\n\n### 3. Decrease in Page Fault Rate\n\nThe problem asks for the decrease in page fault rate achieved by the filtered LRU compared to vanilla LRU. This is the difference $\\Delta R = R_{LRU} - R_{FIL-LRU}$.\n\n$R_{LRU} = \\frac{1}{2}$\n$R_{FIL-LRU} = \\frac{1}{3}$\n\n$\\Delta R = \\frac{1}{2} - \\frac{1}{3} = \\frac{3}{6} - \\frac{2}{6} = \\frac{1}{6}$.\n\nThe filtered LRU policy reduces the page fault rate by $\\frac{1}{6}$.", "answer": "$$\\boxed{\\frac{1}{6}}$$", "id": "3663470"}]}