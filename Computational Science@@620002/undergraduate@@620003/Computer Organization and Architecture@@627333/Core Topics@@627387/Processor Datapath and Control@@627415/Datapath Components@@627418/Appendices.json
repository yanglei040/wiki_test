{"hands_on_practices": [{"introduction": "In modern processor design, a single functional unit like the Arithmetic Logic Unit (ALU) must be incredibly versatile, accepting data from numerous sources such as the register file, immediate values from instructions, or the Program Counter. Connecting all these sources directly to the ALU requires a massive multiplexer (MUX) with a correspondingly large number of control lines. This practice explores a more elegant and scalable solution: a hierarchical multiplexer network. By analyzing the control logic for such a structure, you will apply the fundamental principle for determining MUX select lines, $S = \\lceil \\log_2(N) \\rceil$, to calculate the total control complexity of a practical datapath design. [@problem_id:3633232]", "problem": "A datapath designer is revising the input selection network for the first operand port of the Arithmetic Logic Unit (ALU). The current design uses a flat $k$-input multiplexer (MUX) to select among $k$ existing sources, all distinct and disjoint from the planned additions described below. To enable new operations, five additional source options must be available at this ALU input: the Program Counter (PC), a register file output $A$, a sign-extended immediate $imm$, a hardwired constant $zero$, and the special registers $HI$ and $LO$ as two separate selectable sources.\n\nYou must determine how many control (select) lines are required to (i) support a flat design that directly multiplexes all options into a single MUX, and (ii) reduce fan-in by proposing a two-level hierarchy that combines these new sources so that only a single aggregated input representing the new sources is presented to the existing top-level selector. Specifically, propose and analyze a hierarchy with the following constraints:\n- First select between $HI$ and $LO$ using a $2$-to-$1$ MUX.\n- Then select among the five new sources $\\{PC, A, imm, zero, \\text{the } HI/LO \\text{ selection}\\}$ using a single MUX.\n- Finally, select between the aggregated new-source output and the $k$ existing sources using a single top-level MUX.\n\nAssume each MUX is controlled by the minimal number of select lines needed to uniquely choose one of its inputs. Using fundamental principles about binary encoding and control signal minimization, derive the exact total count of select lines required across all multiplexers in this hierarchical design as a function of $k$. Express your final answer as a single closed-form analytic expression in terms of $k$. No rounding is required.", "solution": "The problem is first subjected to validation.\n\n### Step 1: Extract Givens\n- There is an existing datapath with a $k$-input multiplexer (MUX) for the first operand port of the ALU.\n- There are $k$ existing, distinct, and disjoint sources.\n- Five additional source options are to be added, specified as: Program Counter ($PC$), register file output $A$, sign-extended immediate $imm$, hardwired constant $zero$, and the special registers $HI$ and $LO$ as two separate selectable sources.\n- A two-level hierarchical design is proposed with the following structure:\n    1. A $2$-to-$1$ MUX selects between $HI$ and $LO$.\n    2. A second MUX selects among five sources: $\\{PC, A, imm, zero, \\text{the output of the } HI/LO \\text{ selection}\\}$.\n    3. A top-level MUX selects between the aggregated new-source output (from the second MUX) and the $k$ existing sources.\n- Assumption: Each MUX uses the minimal number of select lines required.\n- Objective: Derive the exact total count of select lines for the entire hierarchical design as a function of $k$.\n\n### Step 2: Validate Using Extracted Givens\nThe problem is scientifically grounded in the principles of digital logic design and computer architecture, specifically concerning datapath components like multiplexers. The terminology ($ALU, PC, MUX, HI, LO$, etc.) is standard in this field. The problem is well-posed, providing a clear and unambiguous specification for the hierarchical MUX structure to be analyzed. Although the initial description of \"five additional source options\" might seem ambiguous when six signals ($PC, A, imm, zero, HI, LO$) are listed, the subsequent detailed constraints on the hierarchy clarify the structure precisely. The problem is objective and free of speculative or subjective claims. It is complete, containing all necessary information to derive a unique solution. The required task is a direct application of fundamental principles and is mathematically formalizable.\n\n### Step 3: Verdict and Action\nThe problem is deemed **valid**. A solution will be derived based on the provided specifications.\n\n### Derivation\nThe fundamental principle governing multiplexer design is that an $N$-input MUX requires a minimum of $S$ select lines, where $S$ is the smallest integer satisfying the inequality $2^S \\ge N$. This is expressed mathematically using the ceiling function:\n$$S = \\lceil \\log_2(N) \\rceil$$\nWe apply this principle to each multiplexer in the specified hierarchical design to determine its required number of select lines. The total count will be the sum of the select lines for each MUX, as their control signals are independent.\n\nThe hierarchical design consists of three distinct multiplexers. Let's analyze them one by one.\n\n1.  **First-level MUX for HI/LO Selection:**\n    This MUX is specified to select between the two special registers, $HI$ and $LO$.\n    - The number of inputs is $N_1 = 2$.\n    - The number of select lines, $S_1$, is therefore:\n      $$S_1 = \\lceil \\log_2(N_1) \\rceil = \\lceil \\log_2(2) \\rceil = \\lceil 1 \\rceil = 1$$\n    This $2$-to-$1$ MUX requires $1$ select line.\n\n2.  **First-level MUX for New Source Aggregation:**\n    This MUX aggregates the new sources. Its inputs are specified as the set $\\{PC, A, imm, zero, \\text{the } HI/LO \\text{ selection}\\}$. The fifth input is the single-bit output from the first MUX.\n    - The number of inputs is $N_2 = 5$.\n    - The number of select lines, $S_2$, is:\n      $$S_2 = \\lceil \\log_2(N_2) \\rceil = \\lceil \\log_2(5) \\rceil$$\n      Since $2^2 = 4$ and $2^3 = 8$, the smallest integer power of $2$ that is greater than or equal to $5$ is $8$. Thus, we need $3$ select lines.\n      $$S_2 = 3$$\n    This $5$-to-$1$ MUX (practically implemented as an $8$-to-$1$ MUX with $3$ unused inputs) requires $3$ select lines.\n\n3.  **Top-level MUX for Final Selection:**\n    This MUX makes the final selection for the ALU operand port. Its inputs consist of the $k$ existing sources and the single aggregated output from the new-source aggregation MUX described in the previous step.\n    - The total number of inputs is $N_3 = k + 1$.\n    - The number of select lines, $S_3$, is a function of $k$:\n      $$S_3 = \\lceil \\log_2(N_3) \\rceil = \\lceil \\log_2(k+1) \\rceil$$\n    This expression cannot be simplified further without knowing the specific value of $k$.\n\n**Total Select Lines:**\nThe total number of select lines for the entire hierarchical design, $S_{total}$, is the sum of the select lines for the three independent multiplexers.\n$$S_{total} = S_1 + S_2 + S_3$$\nSubstituting the derived values:\n$$S_{total} = 1 + 3 + \\lceil \\log_2(k+1) \\rceil$$\n$$S_{total} = 4 + \\lceil \\log_2(k+1) \\rceil$$\nThis is the final closed-form analytic expression for the total number of control lines required for the specified hierarchical datapath structure, as a function of the number of existing sources, $k$.", "answer": "$$\n\\boxed{4 + \\lceil \\log_2(k+1) \\rceil}\n$$", "id": "3633232"}, {"introduction": "While we often model datapath operations in terms of logic gates, the physical reality of chip design includes delays from the wires connecting these components. This routing delay can be significant, especially in high-speed processors. This exercise provides a hands-on opportunity to quantify the performance impact of an operation that is often considered \"free\": forming an address by concatenating bit fields, which is accomplished purely through wiring. By comparing the delay of this wiring-based operation to the delay of active logic components like an adder and a multiplexer, you will gain a deeper appreciation for the different sources of latency that architects must consider. [@problem_id:3677861]", "problem": "A $32$-bit single-cycle datapath for an architecture that uses a fixed-format jump instruction forms the jump target address by combining the high-order bits of the Program Counter (PC) and the low-order bits from the Instruction Register (IR), with word-aligned low bits. Concretely, the target bus is assembled as $ \\{ PC[31:28],\\, IR[25:0],\\, 00 \\} $, where $IR[25:0]$ is shifted left by $2$ (to account for word alignment), the two low-order bits are zeros, and the top four bits come from $PC[31:28]$. This datapath includes a $32$-bit adder that computes $PC + 4$ and a $32$-bit $2$-to-$1$ Multiplexer (MUX) that selects either $PC + 4$ or the formed jump target to feed the next $PC$.\n\nUsing first principles for synchronous combinational timing—namely that total propagation delay through serially composed combinational stages is the sum of the stage delays—and the hardware fact that fixed left-shifts and bit-concatenations can be realized by wiring (with no logic gates), construct the bit-concatenation hardware at the bus level and model its delay as the sum of routing contributions. Then, quantify how the delay to form the jump target by concatenation compares to the combined delay of the $PC$ adder and the output-selection MUX.\n\nAssume the following physically reasonable delays:\n- $t_{\\text{add}} = 0.36\\,\\text{ns}$ for the $32$-bit adder that produces $PC+4$,\n- $t_{\\text{mux}} = 0.11\\,\\text{ns}$ for the $32$-bit $2$-to-$1$ MUX,\n- $t_{\\text{shift}} = 0.02\\,\\text{ns}$ for routing $IR[25:0]$ into bus positions $[27:2]$ (wired left-shift by $2$),\n- $t_{\\text{top}} = 0.01\\,\\text{ns}$ for routing $PC[31:28]$ into bus positions $[31:28]$,\n- $t_{\\text{concat}} = 0.03\\,\\text{ns}$ for stitching the three sub-buses $\\{ PC[31:28] \\}$, $\\{ IR[25:0] \\ll 2 \\}$, and $\\{ 00 \\}$ into one $32$-bit target bus.\n\nDefine the relative delay $R$ to be the ratio of the delay solely attributable to forming the jump target by bit-concatenation to the sum of the adder and MUX delays. Derive $R$ from the stated principles and compute its numerical value using the parameters above. Round your answer to four significant figures. The answer is unitless; provide the final value of $R$ with no units.", "solution": "The problem statement has been critically validated and found to be scientifically grounded, well-posed, objective, and internally consistent. It presents a standard problem in computer datapath timing analysis with all necessary parameters and a clear objective. Therefore, a formal solution can be constructed.\n\nThe objective is to determine the relative delay $R$, defined as the ratio of the delay to form the jump target address to the combined delay of the Program Counter ($PC$) adder and the output-selection multiplexer (MUX). The problem is situated within the context of a $32$-bit single-cycle datapath.\n\nThe relative delay $R$ is given by the formula:\n$$\nR = \\frac{T_{\\text{jump\\_formation}}}{T_{\\text{adder\\_mux}}}\n$$\nwhere $T_{\\text{jump\\_formation}}$ is the delay solely attributable to forming the jump target address, and $T_{\\text{adder\\_mux}}$ is the sum of the adder and MUX delays. We will calculate these two quantities separately.\n\nFirst, we determine the delay for forming the jump target, $T_{\\text{jump\\_formation}}$. The problem specifies that the jump target address is assembled by concatenating three fields: $\\{ PC[31:28], IR[25:0] \\ll 2, 00_2 \\}$. The problem models the total delay for this operation as the sum of the routing and stitching contributions. The given delays are:\n-   $t_{\\text{top}} = 0.01\\,\\text{ns}$: The delay to route the high-order bits of the program counter, $PC[31:28]$, to positions $[31:28]$ of the target bus.\n-   $t_{\\text{shift}} = 0.02\\,\\text{ns}$: The delay for the wired left-shift of the instruction register bits, $IR[25:0]$, into positions $[27:2]$ of the target bus.\n-   $t_{\\text{concat}} = 0.03\\,\\text{ns}$: The delay to stitch the three sub-buses ($PC$ bits, shifted $IR$ bits, and the hardwired low bits $00_2$) into the final $32$-bit bus.\n\nAccording to the principle of summing serial stage delays, which the problem directs us to apply to the contributions, the total delay for jump target formation is:\n$$\nT_{\\text{jump\\_formation}} = t_{\\text{top}} + t_{\\text{shift}} + t_{\\text{concat}}\n$$\nSubstituting the given numerical values:\n$$\nT_{\\text{jump\\_formation}} = 0.01\\,\\text{ns} + 0.02\\,\\text{ns} + 0.03\\,\\text{ns} = 0.06\\,\\text{ns}\n$$\n\nNext, we calculate the combined delay of the adder and the MUX, $T_{\\text{adder\\_mux}}$. This path involves two serial components in the datapath's control flow for non-jump instructions: the $32$-bit adder that computes $PC+4$, and the $2$-to-$1$ MUX that selects the next $PC$ value. The problem asks for the sum of their individual delays, not the critical path time through them. The given delays are:\n-   $t_{\\text{add}} = 0.36\\,\\text{ns}$: The propagation delay of the $32$-bit adder.\n-   $t_{\\text{mux}} = 0.11\\,\\text{ns}$: The propagation delay of the $32$-bit $2$-to-$1$ MUX.\n\nThe sum of these delays is:\n$$\nT_{\\text{adder\\_mux}} = t_{\\text{add}} + t_{\\text{mux}}\n$$\nSubstituting the given numerical values:\n$$\nT_{\\text{adder\\_mux}} = 0.36\\,\\text{ns} + 0.11\\,\\text{ns} = 0.47\\,\\text{ns}\n$$\n\nFinally, we compute the relative delay $R$ by taking the ratio of $T_{\\text{jump\\_formation}}$ to $T_{\\text{adder\\_mux}}$:\n$$\nR = \\frac{T_{\\text{jump\\_formation}}}{T_{\\text{adder\\_mux}}} = \\frac{0.06\\,\\text{ns}}{0.47\\,\\text{ns}}\n$$\nThe units of nanoseconds ($\\text{ns}$) cancel out, leaving a dimensionless ratio.\n$$\nR = \\frac{0.06}{0.47} \\approx 0.12765957...\n$$\nThe problem requires the answer to be rounded to four significant figures.\n$$\nR \\approx 0.1277\n$$\nThis result quantifies that the delay to form the jump address via wiring and concatenation is approximately $12.77\\%$ of the combined delay of the adder and selection MUX stages.", "answer": "$$\n\\boxed{0.1277}\n$$", "id": "3677861"}, {"introduction": "Computer architecture is a field defined by trade-offs, where designers must constantly balance performance, cost, and complexity. This practice places you in the role of a datapath designer facing a classic dilemma: where to place the sign-extension logic for immediate operands. You will analyze two competing designs: one that extends the immediate value early and uses a wider, potentially slower, multiplexer, and another that uses a smaller multiplexer first before performing the extension. By applying a realistic delay model that accounts for both gate latency and bit-width, you will learn how to make a quantitative, evidence-based decision that optimizes the datapath's critical path. [@problem_id:3633277]", "problem": "A thirty-two-bit datapath implements an Arithmetic Logic Unit (ALU) whose two inputs are each driven by a set of sources selected by input Multiplexers (MUXes). One ALU input, denoted as the $B$ input, can be driven by either the Register File (RF) output or an immediate field from the instruction. The immediate field is $16$ bits and must be either sign-extended or zero-extended to $32$ bits depending on the instruction.\n\nConsider two design options for placing the sign/zero-extension hardware relative to the ALU $B$-input MUX:\n\n- Option $\\mathcal{P}$ (extension before MUX): The datapath contains two separate $32$-bit extension sources, one for sign-extension and one for zero-extension, both feeding a single $B$-input MUX that also receives the $32$-bit RF output. Thus the $B$-input MUX in this option has $m_{\\mathcal{P}} = 3$ inputs, each of width $w_{\\text{ALU}} = 32$ bits.\n\n- Option $\\mathcal{Q}$ (extension after immediate selection and before ALU input MUX): The datapath first uses a $16$-bit MUX to select between the raw $16$-bit immediate field and a $16$-bit zero constant and then applies a single $32$-bit extension unit that produces either sign-extension or zero-extension under instruction control. The $32$-bit output of this extension unit then feeds a $2$-input $B$-input MUX together with the $32$-bit RF output. Thus the immediate-selection MUX has $m_{\\text{imm}} = 2$ inputs of width $w_{\\text{imm}} = 16$ bits, and the $B$-input MUX has $m_{\\mathcal{Q}} = 2$ inputs of width $w_{\\text{ALU}} = 32$ bits.\n\nAssume the following fundamental combinational models:\n\n1. Any $m$-to-$1$ MUX is built from a tree of $2$-to-$1$ bit-slice stages, requiring $n = \\lceil \\log_{2}(m) \\rceil$ cascaded stages on the data path. The propagation delay across cascaded stages is the sum of stage delays.\n\n2. A $2$-to-$1$ MUX bit-slice stage has a data-path propagation delay composed of a gate term $t_{\\text{bit}}$ and a select-load term linear in the bit-width $w$, namely $k \\cdot w$. Hence the per-stage delay is $t_{\\text{stage}}(w) = t_{\\text{bit}} + k \\cdot w$.\n\n3. Sign/zero-extension hardware is purely combinational; its data-path delay is $t_{\\text{ext}}$ regardless of the extension mode. Replicating the Most Significant Bit (MSB) for sign-extension or inserting zeros for zero-extension incurs the same delay.\n\nNeglect wire delays and any ALU-internal delay; focus only on the path up to the ALU input. Use the following parameter values for numerical evaluation:\n\n- $t_{\\text{bit}} = 45 \\,\\text{ps}$,\n- $k = 0.12 \\,\\text{ps}$,\n- $t_{\\text{ext}} = 20 \\,\\text{ps}$,\n- $w_{\\text{imm}} = 16$,\n- $w_{\\text{ALU}} = 32$.\n\nUsing these models, derive expressions for the worst-case immediate-operand path delay to the ALU $B$ input for Option $\\mathcal{P}$ and Option $\\mathcal{Q}$, and compute the difference $\\Delta t = t_{\\mathcal{P}} - t_{\\mathcal{Q}}$. Express the final delay difference in picoseconds and round your answer to four significant figures. Do not include units in your final boxed answer.", "solution": "The problem has been validated as scientifically sound and well-posed, presenting a standard comparative analysis in computer architecture. The objective is to compute the difference in the worst-case propagation delay for the immediate operand, $\\Delta t = t_{\\mathcal{P}} - t_{\\mathcal{Q}}$, between two datapath design options, $\\mathcal{P}$ and $\\mathcal{Q}$. The analysis will focus solely on the path from the immediate field to the ALU's $B$ input, as specified.\n\nThe fundamental delay model for an $m$-to-$1$ MUX is based on a tree of $2$-to-$1$ bit-slice stages. The number of cascaded stages is $n = \\lceil \\log_{2}(m) \\rceil$. The delay of a single $w$-bit $2$-to-$1$ stage is $t_{\\text{stage}}(w) = t_{\\text{bit}} + k \\cdot w$. Therefore, the total MUX delay is $t_{\\text{MUX}}(m, w) = \\lceil \\log_{2}(m) \\rceil \\cdot (t_{\\text{bit}} + k \\cdot w)$. The delay of the extension hardware is a constant, $t_{\\text{ext}}$.\n\nFirst, we analyze the total path delay for Option $\\mathcal{P}$. In this design, the $16$-bit immediate is first extended to $32$ bits, incurring a delay of $t_{\\text{ext}}$. This $32$-bit value then enters a $3$-input MUX. The MUX has $m_{\\mathcal{P}} = 3$ inputs and a width of $w_{\\text{ALU}} = 32$ bits, requiring $n_{\\mathcal{P}} = \\lceil \\log_{2}(3) \\rceil = 2$ stages. The MUX delay is $t_{\\text{MUX}, \\mathcal{P}} = 2(t_{\\text{bit}} + k \\cdot w_{\\text{ALU}})$. The total path delay is the sum of the extension and MUX delays:\n$$t_{\\mathcal{P}} = t_{\\text{ext}} + t_{\\text{MUX}, \\mathcal{P}} = t_{\\text{ext}} + 2(t_{\\text{bit}} + k \\cdot w_{\\text{ALU}})$$\n\nNext, we analyze the total path delay for Option $\\mathcal{Q}$. The $16$-bit immediate first passes through a $2$-input MUX ($n_{\\text{imm}} = 1$) of width $w_{\\text{imm}} = 16$. This MUX has a delay of $t_{\\text{MUX, imm}} = t_{\\text{bit}} + k \\cdot w_{\\text{imm}}$. The output is then extended to $32$ bits (delay $t_{\\text{ext}}$) and fed into a final $2$-input MUX ($n_{\\mathcal{Q}} = 1$) of width $w_{\\text{ALU}} = 32$. This second MUX has a delay of $t_{\\text{MUX}, \\mathcal{Q}} = t_{\\text{bit}} + k \\cdot w_{\\text{ALU}}$. The total path delay is the sum of these three serial components:\n$$t_{\\mathcal{Q}} = t_{\\text{MUX, imm}} + t_{\\text{ext}} + t_{\\text{MUX}, \\mathcal{Q}} = (t_{\\text{bit}} + k \\cdot w_{\\text{imm}}) + t_{\\text{ext}} + (t_{\\text{bit}} + k \\cdot w_{\\text{ALU}})$$\n$$t_{\\mathcal{Q}} = t_{\\text{ext}} + 2t_{\\text{bit}} + k(w_{\\text{imm}} + w_{\\text{ALU}})$$\n\nNow, we compute the difference $\\Delta t = t_{\\mathcal{P}} - t_{\\mathcal{Q}}$:\n$$\\Delta t = (t_{\\text{ext}} + 2t_{\\text{bit}} + 2k \\cdot w_{\\text{ALU}}) - (t_{\\text{ext}} + 2t_{\\text{bit}} + k(w_{\\text{imm}} + w_{\\text{ALU}}))$$\nThe $t_{\\text{ext}}$ and $2t_{\\text{bit}}$ terms cancel, simplifying the expression significantly:\n$$\\Delta t = 2k \\cdot w_{\\text{ALU}} - k(w_{\\text{imm}} + w_{\\text{ALU}}) = k \\cdot w_{\\text{ALU}} - k \\cdot w_{\\text{imm}}$$\n$$\\Delta t = k(w_{\\text{ALU}} - w_{\\text{imm}})$$\nThis reveals that the delay difference arises purely from the width-dependent component of the MUX delay across the different architectures.\n\nFinally, we substitute the numerical values: $k = 0.12 \\,\\text{ps}$, $w_{\\text{ALU}} = 32$, and $w_{\\text{imm}} = 16$.\n$$\\Delta t = 0.12 \\cdot (32 - 16) = 0.12 \\cdot 16 = 1.92 \\,\\text{ps}$$\nRounding to four significant figures as required, the result is $1.920$. A positive value for $\\Delta t$ indicates that Option $\\mathcal{P}$ has a longer delay for the immediate operand path than Option $\\mathcal{Q}$.", "answer": "$$\n\\boxed{1.920}\n$$", "id": "3633277"}]}