{
    "hands_on_practices": [
        {
            "introduction": "The divergence theorem is the mathematical foundation of the Finite Volume Method, allowing us to convert a volume integral of a divergence into a sum of fluxes across cell faces. This first exercise provides a direct, hands-on application of this principle, demonstrating the equivalence at the heart of all cell balances . By manually calculating the flux of a given vector field $\\boldsymbol{F}$ across each face of a unit cube, you will compute the total production within the cell, solidifying your geometric and analytical understanding of the theorem.",
            "id": "3364056",
            "problem": "In the Finite Volume Method (FVM) for a stationary scalar conservation law in three space dimensions, the control-volume balance over a cell reduces the volume integral of the divergence of a flux field to the net outward flux across the cell boundary. Consider the unit cube control volume $V=[0,1]^{3}$ with boundary $\\partial V$, outward unit normal $\\boldsymbol{n}$, and the smooth flux field $\\boldsymbol{F}(x,y,z)=(x^{2},\\,xy,\\,z)$. Using only the integral control-volume statement of conservation and the geometric interpretation of outward flux across oriented faces, compute the total production in the cell as the integral $\\int_{V}\\nabla\\cdot \\boldsymbol{F}\\,dV$ by evaluating and summing the outward fluxes across the six planar faces of $V$ with correct normal orientations.\n\nExpress your final value as an exact fraction with no rounding. No units are required. Define and use the outward-pointing normals for each face explicitly in your reasoning.",
            "solution": "The problem requires the computation of the total production term $\\int_{V}\\nabla\\cdot \\boldsymbol{F}\\,dV$ for a given flux field $\\boldsymbol{F}$ over a unit cube control volume $V$. The problem specifies that this is to be done by evaluating the net outward flux across the boundary $\\partial V$ of the cell, which is an application of the Divergence Theorem (also known as Gauss's theorem). The theorem states that for a continuously differentiable vector field $\\boldsymbol{F}$ defined on a region $V$ with a piecewise smooth boundary $\\partial V$ and outward-pointing unit normal vector $\\boldsymbol{n}$, the following equality holds:\n$$ \\int_{V} (\\nabla \\cdot \\boldsymbol{F}) \\, dV = \\oint_{\\partial V} \\boldsymbol{F} \\cdot \\boldsymbol{n} \\, dS $$\nThe term on the right-hand side represents the total outward flux of $\\boldsymbol{F}$ through the surface $\\partial V$. In the context of the Finite Volume Method, this equality allows the volume integral of the divergence (representing sources or sinks within the volume) to be replaced by a sum of fluxes over the faces of the control volume.\n\nThe control volume is the unit cube $V = [0,1]^3$, defined by $0 \\le x \\le 1$, $0 \\le y \\le 1$, and $0 \\le z \\le 1$. The flux field is given as $\\boldsymbol{F}(x,y,z) = (x^2, xy, z)$. We must compute the surface integral by summing the contributions from the six planar faces of the cube.\n\nThe six faces of the boundary $\\partial V$ and their corresponding outward-pointing unit normal vectors $\\boldsymbol{n}$ are:\n\n1.  **Right Face ($x=1$):** This face is defined by $x=1$, $0 \\le y \\le 1$, $0 \\le z \\le 1$. The outward normal vector is $\\boldsymbol{n}_R = (1, 0, 0)$. On this face, the flux field is $\\boldsymbol{F}(1,y,z) = (1^2, 1\\cdot y, z) = (1, y, z)$. The dot product is $\\boldsymbol{F} \\cdot \\boldsymbol{n}_R = (1, y, z) \\cdot (1, 0, 0) = 1$. The flux across this face is:\n    $$ \\Phi_R = \\int_{0}^{1}\\int_{0}^{1} (\\boldsymbol{F} \\cdot \\boldsymbol{n}_R) \\, dy \\, dz = \\int_{0}^{1}\\int_{0}^{1} 1 \\, dy \\, dz = 1 $$\n\n2.  **Left Face ($x=0$):** This face is defined by $x=0$, $0 \\le y \\le 1$, $0 \\le z \\le 1$. The outward normal vector is $\\boldsymbol{n}_L = (-1, 0, 0)$. On this face, the flux field is $\\boldsymbol{F}(0,y,z) = (0^2, 0\\cdot y, z) = (0, 0, z)$. The dot product is $\\boldsymbol{F} \\cdot \\boldsymbol{n}_L = (0, 0, z) \\cdot (-1, 0, 0) = 0$. The flux across this face is:\n    $$ \\Phi_L = \\int_{0}^{1}\\int_{0}^{1} (\\boldsymbol{F} \\cdot \\boldsymbol{n}_L) \\, dy \\, dz = \\int_{0}^{1}\\int_{0}^{1} 0 \\, dy \\, dz = 0 $$\n\n3.  **Top Face ($y=1$):** This face is defined by $y=1$, $0 \\le x \\le 1$, $0 \\le z \\le 1$. The outward normal vector is $\\boldsymbol{n}_T = (0, 1, 0)$. On this face, the flux field is $\\boldsymbol{F}(x,1,z) = (x^2, x\\cdot 1, z) = (x^2, x, z)$. The dot product is $\\boldsymbol{F} \\cdot \\boldsymbol{n}_T = (x^2, x, z) \\cdot (0, 1, 0) = x$. The flux across this face is:\n    $$ \\Phi_T = \\int_{0}^{1}\\int_{0}^{1} (\\boldsymbol{F} \\cdot \\boldsymbol{n}_T) \\, dx \\, dz = \\int_{0}^{1}\\int_{0}^{1} x \\, dx \\, dz = \\left( \\int_{0}^{1} x \\, dx \\right) \\left( \\int_{0}^{1} 1 \\, dz \\right) = \\left[ \\frac{x^2}{2} \\right]_{0}^{1} \\cdot [z]_0^1 = \\frac{1}{2} \\cdot 1 = \\frac{1}{2} $$\n\n4.  **Bottom Face ($y=0$):** This face is defined by $y=0$, $0 \\le x \\le 1$, $0 \\le z \\le 1$. The outward normal vector is $\\boldsymbol{n}_B = (0, -1, 0)$. On this face, the flux field is $\\boldsymbol{F}(x,0,z) = (x^2, x\\cdot 0, z) = (x^2, 0, z)$. The dot product is $\\boldsymbol{F} \\cdot \\boldsymbol{n}_B = (x^2, 0, z) \\cdot (0, -1, 0) = 0$. The flux across this face is:\n    $$ \\Phi_B = \\int_{0}^{1}\\int_{0}^{1} (\\boldsymbol{F} \\cdot \\boldsymbol{n}_B) \\, dx \\, dz = \\int_{0}^{1}\\int_{0}^{1} 0 \\, dx \\, dz = 0 $$\n\n5.  **Front Face ($z=1$):** This face is defined by $z=1$, $0 \\le x \\le 1$, $0 \\le y \\le 1$. The outward normal vector is $\\boldsymbol{n}_F = (0, 0, 1)$. On this face, the flux field is $\\boldsymbol{F}(x,y,1) = (x^2, xy, 1)$. The dot product is $\\boldsymbol{F} \\cdot \\boldsymbol{n}_F = (x^2, xy, 1) \\cdot (0, 0, 1) = 1$. The flux across this face is:\n    $$ \\Phi_F = \\int_{0}^{1}\\int_{0}^{1} (\\boldsymbol{F} \\cdot \\boldsymbol{n}_F) \\, dx \\, dy = \\int_{0}^{1}\\int_{0}^{1} 1 \\, dx \\, dy = 1 $$\n\n6.  **Back Face ($z=0$):** This face is defined by $z=0$, $0 \\le x \\le 1$, $0 \\le y \\le 1$. The outward normal vector is $\\boldsymbol{n}_{Bk} = (0, 0, -1)$. On this face, the flux field is $\\boldsymbol{F}(x,y,0) = (x^2, xy, 0)$. The dot product is $\\boldsymbol{F} \\cdot \\boldsymbol{n}_{Bk} = (x^2, xy, 0) \\cdot (0, 0, -1) = 0$. The flux across this face is:\n    $$ \\Phi_{Bk} = \\int_{0}^{1}\\int_{0}^{1} (\\boldsymbol{F} \\cdot \\boldsymbol{n}_{Bk}) \\, dx \\, dy = \\int_{0}^{1}\\int_{0}^{1} 0 \\, dx \\, dy = 0 $$\n\nThe total production is the sum of these six outward fluxes:\n$$ \\int_{V} (\\nabla \\cdot \\boldsymbol{F}) \\, dV = \\Phi_R + \\Phi_L + \\Phi_T + \\Phi_B + \\Phi_F + \\Phi_{Bk} $$\nSubstituting the computed values:\n$$ \\int_{V} (\\nabla \\cdot \\boldsymbol{F}) \\, dV = 1 + 0 + \\frac{1}{2} + 0 + 1 + 0 = 2 + \\frac{1}{2} = \\frac{5}{2} $$\nThe total production in the cell, computed as the net outward flux, is $\\frac{5}{2}$.",
            "answer": "$$ \\boxed{\\frac{5}{2}} $$"
        },
        {
            "introduction": "Real-world systems often involve composite materials with varying properties. This practice problem extends the cell balance concept to handle interfaces between two regions with different conductivities, a common scenario in heat transfer and porous media flow . You will derive and apply a two-point flux approximation that enforces the physical condition of flux continuity, yielding an expression for the interface flux that correctly accounts for the jump in material properties.",
            "id": "3363983",
            "problem": "Consider a dimensionless one-dimensional steady diffusion problem governed by the partial differential equation (PDE) $-\\frac{d}{dx}\\left(\\kappa(x)\\frac{du}{dx}\\right)=0$ on the union of two adjacent finite volume cells. The left cell is $C_{L}=[-1,0]$ with piecewise-constant conductivity $\\kappa(x)=\\kappa_{L}=1$, and the right cell is $C_{R}=[0,1]$ with piecewise-constant conductivity $\\kappa(x)=\\kappa_{R}=4$. The cell-centered primary variables are $u_{L}=0$ at $x=-\\frac{1}{2}$ and $u_{R}=1$ at $x=\\frac{1}{2}$. The common interface is at $x=0$, and both cells have equal width $h=1$, so the distances from the cell centers to the interface are $d_{L}=d_{R}=\\frac{h}{2}=\\frac{1}{2}$.\n\nUsing the divergence theorem applied to each cell balance and enforcing the physical jump condition that the normal flux is continuous across the material interface, derive a two-point flux approximation (TPFA) for the interface flux $F$ across $x=0$ expressed only in terms of $\\kappa_{L}$, $\\kappa_{R}$, $u_{L}$, $u_{R}$, $d_{L}$, and $d_{R}$. Then, evaluate $F$ for the given data $\\kappa_{L}=1$, $\\kappa_{R}=4$, $u_{L}=0$, $u_{R}=1$, $d_{L}=d_{R}=\\frac{1}{2}$. Interpret the sign of $F$ with the convention that the unit normal at the interface points from $C_{L}$ to $C_{R}$ (i.e., in the positive $x$-direction). Provide the final value of $F$ as your answer. No rounding is required, and all quantities are dimensionless, so no units are needed.",
            "solution": "The governing partial differential equation (PDE) for one-dimensional steady diffusion is given as:\n$$ -\\frac{d}{dx}\\left(\\kappa(x)\\frac{du}{dx}\\right) = 0 $$\nThe flux, $F(x)$, is defined as:\n$$ F(x) = -\\kappa(x)\\frac{du}{dx} $$\nSubstituting the definition of flux into the PDE gives $\\frac{dF}{dx} = 0$, which implies that the flux $F(x)$ is constant throughout the domain. We denote this constant flux by $F$.\n\nTo derive the two-point flux approximation (TPFA) for the interface flux, we relate the cell-centered values to the value at the interface, $u_f = u(0)$. This is done by integrating the flux definition, $F = -\\kappa \\frac{du}{dx}$, over the appropriate segments within each cell, assuming $\\kappa$ is piecewise constant.\n\nFor the left cell, $C_L$, the conductivity is $\\kappa_L$. Integrating from the cell center $x_L = -1/2$ to the interface at $x=0$:\n$$ \\int_{x_L}^{0} du = \\int_{x_L}^{0} \\left(-\\frac{F}{\\kappa_L}\\right) dx \\implies u(0) - u(x_L) = -\\frac{F}{\\kappa_L} (0 - x_L) $$\nGiven $u(x_L) = u_L$ and the distance $d_L = |0 - x_L| = -x_L$, we have:\n$$ u_f - u_L = -\\frac{F d_L}{\\kappa_L} \\quad (1) $$\n\nFor the right cell, $C_R$, the conductivity is $\\kappa_R$. Integrating from the interface at $x=0$ to the cell center $x_R = 1/2$:\n$$ \\int_{0}^{x_R} du = \\int_{0}^{x_R} \\left(-\\frac{F}{\\kappa_R}\\right) dx \\implies u(x_R) - u(0) = -\\frac{F}{\\kappa_R} (x_R - 0) $$\nGiven $u(x_R) = u_R$ and the distance $d_R = |x_R - 0| = x_R$, we have:\n$$ u_R - u_f = -\\frac{F d_R}{\\kappa_R} \\quad (2) $$\n\nWe now have a system of two linear equations for the unknowns, $u_f$ and $F$. We can eliminate the unknown interface value $u_f$. From (1), $u_f = u_L - \\frac{F d_L}{\\kappa_L}$, and from (2), $u_f = u_R + \\frac{F d_R}{\\kappa_R}$. Equating these gives:\n$$ u_L - \\frac{F d_L}{\\kappa_L} = u_R + \\frac{F d_R}{\\kappa_R} $$\nSolving for the interface flux $F$:\n$$ u_L - u_R = F \\left( \\frac{d_L}{\\kappa_L} + \\frac{d_R}{\\kappa_R} \\right) \\implies F = \\frac{u_L - u_R}{\\frac{d_L}{\\kappa_L} + \\frac{d_R}{\\kappa_R}} $$\nThis is the desired two-point flux approximation.\n\nNow, we substitute the given numerical values: $\\kappa_L = 1$, $\\kappa_R = 4$, $u_L = 0$, $u_R = 1$, $d_L = 1/2$, and $d_R = 1/2$.\n$$ F = \\frac{0 - 1}{\\frac{1/2}{1} + \\frac{1/2}{4}} = \\frac{-1}{\\frac{1}{2} + \\frac{1}{8}} $$\nTo sum the fractions in the denominator, we find a common denominator, which is 8:\n$$ F = \\frac{-1}{\\frac{4}{8} + \\frac{1}{8}} = \\frac{-1}{\\frac{5}{8}} = - \\frac{8}{5} $$\nThe sign of the flux $F$ indicates its direction. The convention is that the unit normal at the interface points from $C_L$ to $C_R$ (positive $x$-direction). A positive flux would therefore indicate flow from left to right. Our calculated flux is $F = -8/5$, which is negative. This signifies that the net flow is from right to left (from $C_R$ to $C_L$). This is physically consistent, as the potential is higher in the right cell ($u_R = 1$) than in the left cell ($u_L = 0$), driving a flow from a region of high potential to low potential.",
            "answer": "$$\\boxed{-\\frac{8}{5}}$$"
        },
        {
            "introduction": "After mastering interior interfaces, the final step is to correctly impose conditions at the domain's edge. This problem focuses on incorporating a Neumann boundary condition, where the flux itself is specified, into the finite volume framework . You will determine how a prescribed normal derivative, $\\partial_{n} u$, on a boundary face translates into a known constant term in the cell balance equation, a critical step in assembling the final algebraic system for a well-posed problem.",
            "id": "3363998",
            "problem": "Consider a steady diffusion Partial Differential Equation (PDE) in conservation form on a two-dimensional domain with constant conductivity, given by $-\\nabla \\cdot (\\kappa \\nabla u) = s$ in a neighborhood of the left boundary $x=0$. Let a single finite volume control cell $V$ of unit area abut the boundary $x=0$, so that its left face coincides with a segment of the boundary and has unit length. Adopt the Finite Volume Method (FVM) with the divergence theorem to derive the integral balance over $V$ in terms of face fluxes. Let the outward unit normal on the boundary $x=0$ be $\\boldsymbol{n} = (-1,0)$, and impose a Neumann boundary condition $\\partial_{n} u = \\boldsymbol{\\nabla} u \\cdot \\boldsymbol{n} = 1$ on that face. Assume $\\kappa = 2$ is constant, and that the remaining faces of the control volume are interior faces whose contributions will be retained symbolically and not evaluated numerically here.\n\nStarting from the divergence theorem and the definition of diffusive flux, express the cell balance as a sum of face fluxes equal to the integrated source. Then, isolate the contribution of the Neumann boundary face and move this known contribution to the right-hand side of the algebraic equation for the cell. What is the exact scalar value that must be added to the right-hand side entry for this cell due solely to the Neumann boundary face on $x=0$? Provide your answer as a single real number with no units. Do not round.",
            "solution": "The Finite Volume Method (FVM) begins by integrating the governing steady-state diffusion PDE, $-\\nabla \\cdot (\\kappa \\nabla u) = s$, over the control volume $V$:\n$$ \\int_V -\\nabla \\cdot (\\kappa \\nabla u) \\, dV = \\int_V s \\, dV $$\nThe diffusive flux vector is defined as $\\mathbf{q} = -\\kappa \\nabla u$. Substituting this into the equation gives:\n$$ \\int_V \\nabla \\cdot \\mathbf{q} \\, dV = \\int_V s \\, dV $$\nApplying the divergence theorem to the left-hand side transforms the volume integral into a surface integral over the boundary of the cell, $\\partial V$:\n$$ \\oint_{\\partial V} \\mathbf{q} \\cdot \\mathbf{n}_{out} \\, dS = \\int_V s \\, dV $$\nwhere $\\mathbf{n}_{out}$ is the outward-pointing unit normal vector on the surface element $dS$. This equation represents the integral balance: the net flux out of the volume equals the total source within it.\n\nThe surface integral is a sum of fluxes over each face of the cell. We are interested in the flux through the specific face $f_{BC}$ that lies on the domain boundary $x=0$. The contribution from this face is:\n$$ \\text{Flux}_{BC} = \\int_{f_{BC}} \\mathbf{q} \\cdot \\mathbf{n}_{BC} \\, dS = \\int_{f_{BC}} (-\\kappa \\nabla u) \\cdot \\mathbf{n}_{BC} \\, dS $$\nThe problem states that for this boundary face, the outward unit normal is $\\mathbf{n}_{BC} = (-1, 0)$, the conductivity is constant $\\kappa = 2$, and the Neumann boundary condition is $\\partial_n u = \\nabla u \\cdot \\mathbf{n}_{BC} = 1$. Substituting these knowns:\n$$ \\text{Flux}_{BC} = \\int_{f_{BC}} (-\\kappa) (\\nabla u \\cdot \\mathbf{n}_{BC}) \\, dS = \\int_{f_{BC}} (-2)(1) \\, dS = -2 \\int_{f_{BC}} dS $$\nThe integral $\\int_{f_{BC}} dS$ is the area (length in 2D) of the face, which is given as 1. Therefore, the flux through the boundary face is a constant value:\n$$ \\text{Flux}_{BC} = -2 \\times 1 = -2 $$\nThe full cell balance equation is the sum of the boundary flux and the fluxes through the interior faces:\n$$ \\text{Flux}_{BC} + \\sum_{f \\in \\text{interior faces}} \\text{Flux}_{f} = \\int_V s \\, dV $$\nSubstituting the calculated value for $\\text{Flux}_{BC}$:\n$$ -2 + \\sum_{f \\in \\text{interior faces}} \\text{Flux}_{f} = \\int_V s \\, dV $$\nIn the standard FVM algebraic system, known constant terms are moved to the right-hand side (RHS). Moving the constant term $-2$ to the RHS results in:\n$$ \\sum_{f \\in \\text{interior faces}} \\text{Flux}_{f} = \\int_V s \\, dV + 2 $$\nThus, the exact scalar value that must be added to the right-hand side for this cell due to the Neumann boundary condition is $2$.",
            "answer": "$$\n\\boxed{2}\n$$"
        }
    ]
}