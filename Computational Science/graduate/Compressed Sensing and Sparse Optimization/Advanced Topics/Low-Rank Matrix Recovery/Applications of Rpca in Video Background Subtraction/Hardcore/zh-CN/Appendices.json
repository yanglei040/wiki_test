{
    "hands_on_practices": [
        {
            "introduction": "鲁棒主成分分析（RPCA）的核心思想是将视频数据矩阵分解为一个低秩的背景矩阵 $L$ 和一个稀疏的前景矩阵 $S$。要真正理解这个模型，关键在于建立对“低秩”和“稀疏”在视频背景减除情境下物理意义的直观认识。下面的练习  将通过一个简化的理想场景，帮助你将视频的物理特性（静态背景和移动物体）与矩阵 $L$ 和 $S$ 的数学性质（秩和稀疏度）直接联系起来。",
            "id": "3431810",
            "problem": "考虑以下使用鲁棒主成分分析（RPCA）进行视频背景减除的风格化模型。一段灰度视频由 $n$ 帧组成，每一帧在向量化后有 $m$ 个像素。将向量化的帧作为列堆叠，形成一个数据矩阵 $D \\in \\mathbb{R}^{m \\times n}$。假设 $D$ 可以分解为 $D = L + S$，其中 $L$ 汇集了各帧的背景分量并且是低秩的，而 $S$ 汇集了各帧的前景分量并且是稀疏的。场景具有严格静态的背景：背景在每一帧中的外观都是相同的。有一个单一的移动物体，并且在每一帧中，它都恰好占据了 $5\\%$ 的像素。假设背景向量非零，并且物体的支撑模式可能逐帧变化，但每次都保持相同的被占据像素比例。\n\n仅使用以下基本定义：(i) 矩阵的秩是其列空间的维度，以及 (ii) 稀疏性指的是非零元素的数量，并将严格静态的背景建模为在各帧中重复的相同背景向量，推导出：\n- 用 $m$ 和 $n$ 表示的 $\\operatorname{rank}(L)$ 的一个合理估计。\n- 用 $m$ 和 $n$ 表示的 $S$ 的每帧稀疏度水平（$S$ 的一列中非零元素的数量）的一个合理估计。\n\n将你的最终答案表示为一个单行矩阵 $(\\operatorname{rank}(L), s_{\\text{per-frame}})$，其中 $s_{\\text{per-frame}}$ 是 $S$ 的一列中非零元素的数量。无需四舍五入。不包括单位。最终答案不得使用百分号，并且必须用精确的分数或小数书写。",
            "solution": "问题要求基于一个使用鲁棒主成分分析（RPCA）进行视频背景减除的风格化模型，给出背景矩阵 $L$ 的秩和前景矩阵 $S$ 的每帧稀疏度水平的合理估计。数据矩阵 $D \\in \\mathbb{R}^{m \\times n}$ 是通过将 $n$ 个向量化的帧（每帧有 $m$ 个像素）作为其列堆叠而形成的。该矩阵被分解为 $D = L + S$，其中 $L$ 是低秩背景分量，$S$ 是稀疏前景分量。\n\n首先，我们将确定背景矩阵的秩，即 $\\operatorname{rank}(L)$。\n问题指明场景具有“严格静态的背景”，这被建模为“在各帧中重复的相同背景向量”。设该背景向量表示为 $b \\in \\mathbb{R}^{m \\times 1}$。问题还指出该背景向量非零，即 $b \\neq 0$。\n由于背景在每一帧中都是相同的，所以矩阵 $L \\in \\mathbb{R}^{m \\times n}$ 的 $n$ 列中的每一列都是相同的向量 $b$。因此，矩阵 $L$ 可以写为：\n$$L = \\begin{pmatrix} b  b  \\cdots  b \\end{pmatrix}$$\n其中向量 $b$ 重复了 $n$ 次。\n\n矩阵的秩被定义为其列空间的维度。$L$ 的列空间，记为 $\\operatorname{col}(L)$，是由其列向量生成的向量空间。在本例中，所有列都与向量 $b$ 相同。因此，列空间是这些列的所有线性组合的集合，这可以简化为单个向量 $b$ 的所有标量倍数的集合。\n$$\\operatorname{col}(L) = \\operatorname{span}\\{b, b, \\dots, b\\} = \\operatorname{span}\\{b\\}$$\n列空间的维度是该空间基中线性无关向量的数量。由于 $b$ 是一个非零向量，它构成了 $\\operatorname{span}\\{b\\}$ 的一个基。因此，这个空间的维度是 $1$。\n$$\\operatorname{rank}(L) = \\dim(\\operatorname{col}(L)) = \\dim(\\operatorname{span}\\{b\\}) = 1$$\n因此，背景矩阵 $L$ 的秩的一个合理估计是 $1$。\n\n接下来，我们将确定前景矩阵 $S$ 的每帧稀疏度水平。这被定义为 $s_{\\text{per-frame}}$，即 $S$ 的单个列中非零元素的数量。\n矩阵 $S$ 代表前景分量，被描述为一个“单一的移动物体”。设 $s_j$ 是 $S$ 的第 $j$ 列，对应于第 $j$ 帧中的前景。$s_j$ 中非零元素的数量是该帧中前景物体占据的像素数。\n问题陈述“在每一帧中它[物体]都恰好占据了 $5\\%$ 的像素”。每一帧总共有 $m$ 个像素。因此，在任何给定帧中，物体占据的像素数是 $m$ 的 $5\\%$。\n因此，$S$ 的一列中非零元素的数量是：\n$$s_{\\text{per-frame}} = 5\\% \\times m$$\n问题要求答案以小数或分数表示，而不是百分比。将 $5\\%$ 转换为小数得到 $0.05$。\n$$s_{\\text{per-frame}} = 0.05m$$\n这个值对每一帧都是恒定的，正如问题所述：“物体的支撑模式可能逐帧变化，但每次都保持相同的被占据像素比例。”\n\n结合这两个结果，我们得到了 $L$ 的秩和 $S$ 的每帧稀疏度。最终答案要求以单行矩阵 $(\\operatorname{rank}(L), s_{\\text{per-frame}})$ 的形式给出。",
            "answer": "$$\\boxed{\\begin{pmatrix} 1  0.05m \\end{pmatrix}}$$"
        },
        {
            "introduction": "理解了RPCA模型的基本假设后，下一个关键问题是：如何从给定的视频数据 $M$ 中计算出背景 $L$ 和前景 $S$？主成分追踪（PCP）问题通常通过交替方向乘子法（ADMM）等迭代算法求解。这个练习  将引导你手动完成一次ADMM迭代，让你亲手体验奇异值阈值化和软阈值化操作如何分别更新低秩和稀疏分量，从而揭开优化算法的神秘面纱。",
            "id": "3431817",
            "problem": "在通过鲁棒主成分分析 (RPCA) 进行视频背景减除时，每个视频帧被向量化并堆叠起来，形成一个数据矩阵 $M$。该矩阵可以分解为一个低秩背景分量 $L$ 和一个稀疏前景分量 $S$。经典的主成分追踪 (PCP) 公式为\n$$\n\\min_{L,S}\\ \\|L\\|_{*}+\\lambda\\|S\\|_{1}\\quad\\text{subject to}\\quad L+S=M,\n$$\n其中 $\\|L\\|_{*}$ 是核范数，$\\|S\\|_{1}$ 是逐元素 $\\ell_{1}$ 范数。考虑用于 PCP 的缩放的交替方向乘子法 (ADMM)，其惩罚参数为 $\\rho$，缩放的对偶变量为 $Y^{k}$。从零初始化 $L^{0}=0$，$S^{0}=0$ 和 $Y^{0}=0$ 开始，对以下模拟两像素两帧背景-前景混合的玩具实例执行一次迭代：\n$$\nM=\\begin{pmatrix}3  0\\\\ 0  1\\end{pmatrix},\\qquad \\lambda=\\frac{3}{5},\\qquad \\rho=2.\n$$\n仅使用邻近算子和增广拉格朗日量的基本定义，通过奇异值阈值法推导第一次迭代的更新 $L^{1}$，通过逐元素软阈值法推导 $S^{1}$，以及更新后的缩放对偶变量 $Y^{1}$。最后，将更新后的缩放对偶变量 $Y^{1}$ 的弗罗贝尼乌斯范数的平方报告为一个精确的实数。不要四舍五入；提供精确值。",
            "solution": "该问题要求对主成分追踪 (PCP) 优化问题执行一次缩放的交替方向乘子法 (ADMM) 的迭代。目标是计算更新后的变量 $L^{1}$、$S^{1}$ 和 $Y^{1}$，并最终报告更新后的缩放对偶变量的弗罗贝尼乌斯范数的平方，即 $\\|Y^{1}\\|_F^2$。\n\nPCP 优化问题表述为：\n$$\n\\min_{L,S} \\|L\\|_{*} + \\lambda\\|S\\|_{1} \\quad \\text{subject to} \\quad L+S=M\n$$\n缩放的 ADMM 通过最小化增广拉格朗日量来解决此问题，对于缩放的对偶变量 $Y$ 和惩罚参数 $\\rho$，其形式为：\n$$\n\\mathcal{L}_{\\rho}(L, S, Y) = \\|L\\|_{*} + \\lambda\\|S\\|_{1} + \\frac{\\rho}{2}\\|L+S-M+Y\\|_{F}^{2} - \\frac{\\rho}{2}\\|Y\\|_{F}^{2}\n$$\n在第 $k+1$ 次迭代中，ADMM 方案包括三个顺序更新步骤：\n1.  **L-更新：** $L^{k+1} = \\arg\\min_L \\left( \\|L\\|_{*} + \\frac{\\rho}{2} \\|L + S^k - M + Y^k\\|_F^2 \\right)$\n2.  **S-更新：** $S^{k+1} = \\arg\\min_S \\left( \\lambda\\|S\\|_{1} + \\frac{\\rho}{2} \\|L^{k+1} + S - M + Y^k\\|_F^2 \\right)$\n3.  **Y-更新：** $Y^{k+1} = Y^k + (L^{k+1} + S^{k+1} - M)$\n\n这些更新可以使用邻近算子来表示。$L$-更新是核范数的邻近算子，也就是奇异值阈值 (SVT) 算子 $\\mathcal{D}_{\\tau}$。$S$-更新是 $\\ell_1$ 范数的邻近算子，也就是逐元素软阈值算子 $\\mathcal{S}_{\\tau}$。\n\n具体的更新规则是：\n1.  $L^{k+1} = \\mathcal{D}_{1/\\rho}(M - S^k - Y^k)$\n2.  $S^{k+1} = \\mathcal{S}_{\\lambda/\\rho}(M - L^{k+1} - Y^k)$\n3.  $Y^{k+1} = Y^k + L^{k+1} + S^{k+1} - M$\n\n我们给定的初始条件是 $L^{0}=0$、$S^{0}=0$、$Y^{0}=0$，以及参数 $\\lambda = \\frac{3}{5}$、$\\rho=2$。数据矩阵为 $M=\\begin{pmatrix} 3  0 \\\\ 0  1 \\end{pmatrix}$。\n\n我们进行第一次迭代（从 $k=0$ 到 $k+1=1$）。\n\n**步骤 1：计算 $L^1$**\n更新公式为 $L^1 = \\mathcal{D}_{1/\\rho}(M - S^0 - Y^0)$。\n由于 $S^0=0$ 和 $Y^0=0$，我们有 $L^1 = \\mathcal{D}_{1/\\rho}(M)$。\nSVT 的阈值是 $\\tau_L = \\frac{1}{\\rho} = \\frac{1}{2}$。\n要应用 SVT 算子，我们需要矩阵 $M = \\begin{pmatrix} 3  0 \\\\ 0  1 \\end{pmatrix}$ 的奇异值分解 (SVD)。\n由于 $M$ 是一个对角矩阵，其 SVD 是平凡的：$M = U\\Sigma V^T$，其中 $U = V = I = \\begin{pmatrix} 1  0 \\\\ 0  1 \\end{pmatrix}$，奇异值矩阵为 $\\Sigma = \\begin{pmatrix} 3  0 \\\\ 0  1 \\end{pmatrix}$。奇异值为 $\\sigma_1 = 3$ 和 $\\sigma_2 = 1$。\n\nSVT 算子作用于奇异值：$\\sigma'_i = \\max(0, \\sigma_i - \\tau_L)$。\n$$ \\sigma'_1 = \\max\\left(0, 3 - \\frac{1}{2}\\right) = \\frac{5}{2} $$\n$$ \\sigma'_2 = \\max\\left(0, 1 - \\frac{1}{2}\\right) = \\frac{1}{2} $$\n新的奇异值矩阵是 $\\Sigma' = \\begin{pmatrix} \\frac{5}{2}  0 \\\\ 0  \\frac{1}{2} \\end{pmatrix}$。\n重构矩阵 $L^1$ 得到：\n$$ L^1 = U \\Sigma' V^T = I \\Sigma' I^T = \\Sigma' = \\begin{pmatrix} \\frac{5}{2}  0 \\\\ 0  \\frac{1}{2} \\end{pmatrix} $$\n\n**步骤 2：计算 $S^1$**\n更新公式为 $S^1 = \\mathcal{S}_{\\lambda/\\rho}(M - L^1 - Y^0)$。\n软阈值的阈值是 $\\tau_S = \\frac{\\lambda}{\\rho} = \\frac{3/5}{2} = \\frac{3}{10}$。\n算子的参数是 $M - L^1 - Y^0$：\n$$ M - L^1 - Y^0 = \\begin{pmatrix} 3  0 \\\\ 0  1 \\end{pmatrix} - \\begin{pmatrix} \\frac{5}{2}  0 \\\\ 0  \\frac{1}{2} \\end{pmatrix} - \\begin{pmatrix} 0  0 \\\\ 0  0 \\end{pmatrix} = \\begin{pmatrix} 3 - \\frac{5}{2}  0 \\\\ 0  1 - \\frac{1}{2} \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{2}  0 \\\\ 0  \\frac{1}{2} \\end{pmatrix} $$\n软阈值算子 $\\mathcal{S}_{\\tau}(x)$ 逐元素应用：$\\mathcal{S}_{\\tau}(x_{ij}) = \\text{sign}(x_{ij}) \\max(0, |x_{ij}| - \\tau)$。\n$$ (\\mathcal{S}_{\\frac{3}{10}})_{11} = \\text{sign}\\left(\\frac{1}{2}\\right) \\max\\left(0, \\left|\\frac{1}{2}\\right| - \\frac{3}{10}\\right) = 1 \\cdot \\left(\\frac{5}{10} - \\frac{3}{10}\\right) = \\frac{2}{10} = \\frac{1}{5} $$\n$$ (\\mathcal{S}_{\\frac{3}{10}})_{12} = \\text{sign}(0) \\max(0, |0| - \\frac{3}{10}) = 0 $$\n$$ (\\mathcal{S}_{\\frac{3}{10}})_{21} = \\text{sign}(0) \\max(0, |0| - \\frac{3}{10}) = 0 $$\n$$ (\\mathcal{S}_{\\frac{3}{10}})_{22} = \\text{sign}\\left(\\frac{1}{2}\\right) \\max\\left(0, \\left|\\frac{1}{2}\\right| - \\frac{3}{10}\\right) = 1 \\cdot \\left(\\frac{5}{10} - \\frac{3}{10}\\right) = \\frac{2}{10} = \\frac{1}{5} $$\n因此，更新后的稀疏分量是：\n$$ S^1 = \\begin{pmatrix} \\frac{1}{5}  0 \\\\ 0  \\frac{1}{5} \\end{pmatrix} $$\n\n**步骤 3：计算 $Y^1$**\n更新公式为 $Y^1 = Y^0 + L^1 + S^1 - M$。\n使用先前计算的 $L^1$ 和 $S^1$，并给定 $Y^0=0$：\n$$ Y^1 = 0 + \\begin{pmatrix} \\frac{5}{2}  0 \\\\ 0  \\frac{1}{2} \\end{pmatrix} + \\begin{pmatrix} \\frac{1}{5}  0 \\\\ 0  \\frac{1}{5} \\end{pmatrix} - \\begin{pmatrix} 3  0 \\\\ 0  1 \\end{pmatrix} $$\n$$ Y^1 = \\begin{pmatrix} \\frac{5}{2} + \\frac{1}{5} - 3  0 + 0 - 0 \\\\ 0 + 0 - 0  \\frac{1}{2} + \\frac{1}{5} - 1 \\end{pmatrix} = \\begin{pmatrix} \\frac{25+2-30}{10}  0 \\\\ 0  \\frac{5+2-10}{10} \\end{pmatrix} = \\begin{pmatrix} -\\frac{3}{10}  0 \\\\ 0  -\\frac{3}{10} \\end{pmatrix} $$\n\n**步骤 4：计算 $\\|Y^1\\|_F^2$**\n最后一步是计算 $Y^1$ 的弗罗贝尼乌斯范数的平方。矩阵的弗罗贝尼乌斯范数的平方是其所有元素平方的和。\n$$ \\|Y^1\\|_F^2 = \\sum_{i,j} |(Y^1)_{ij}|^2 = \\left(-\\frac{3}{10}\\right)^2 + 0^2 + 0^2 + \\left(-\\frac{3}{10}\\right)^2 $$\n$$ \\|Y^1\\|_F^2 = \\frac{9}{100} + \\frac{9}{100} = \\frac{18}{100} = \\frac{9}{50} $$\n\n结果要求为精确的实数。$\\frac{9}{50}$ 是精确值。",
            "answer": "$$\n\\boxed{\\frac{9}{50}}\n$$"
        },
        {
            "introduction": "在成功地将视频分解为背景和前景之后，我们如何客观地评价分离效果的好坏？在机器学习和计算机视觉中，任何算法的实用性都取决于其性能是否可被量化评估。这个练习  聚焦于算法评估这一重要环节，它将帮助你巩固如何正确使用精确率（precision）、召回率（recall）和 F1-score 等标准检测理论指标，来衡量RPCA模型的前景检测准确性。",
            "id": "3431823",
            "problem": "考虑一个基于鲁棒主成分分析 (RPCA) 的视频背景减除流程。设视频表示为一个张量 $X \\in \\mathbb{R}^{m \\times n \\times T}$，根据模型 $X = L + S + E$ 分解为一个低秩背景 $L$、一个稀疏前景 $S$ 和残差噪声 $E$。在估计出 $S$ 后，通过在非负水平 $\\tau$ 上对 $S$ 进行阈值处理，生成逐像素的前景预测，从而得到一个由时空索引组成的预测前景支撑集。存在一个二元真值掩码 $G \\in \\{0,1\\}^{m \\times n \\times T}$，用于指示真实的前景像素。\n\n使用检测论中的基本概念——真正例、假正例、假反例，及其与集合运算和基数的关系，选择唯一一个正确定义了逐像素的精确率、召回率和 $F$-度量（特别是 $F_1$-度量），并解释了在这种基于 RPCA 的设置下，如何根据对 $S$ 进行阈值 $\\tau$ 处理后得到的支撑集来计算这些量的选项。\n\nA. 通过以下方式定义阈值化支撑集和真值支撑集\n$$\\Omega_{\\tau}(S) = \\{p \\in [m] \\times [n] \\times [T] : |S_p| > \\tau\\}, \\qquad \\Omega_G = \\{p \\in [m] \\times [n] \\times [T] : G_p = 1\\}.$$\n通过以下方式计算计数\n$$\\mathrm{TP} = |\\Omega_{\\tau}(S) \\cap \\Omega_G|, \\quad \\mathrm{FP} = |\\Omega_{\\tau}(S) \\setminus \\Omega_G|, \\quad \\mathrm{FN} = |\\Omega_G \\setminus \\Omega_{\\tau}(S)|.$$\n则精确率、召回率和 $F_1$ 为\n$$P = \\frac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FP}}, \\qquad R = \\frac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FN}}, \\qquad F_1 = \\frac{2 P R}{P + R}.$$\n\nB. 通过单边阈值处理定义阈值化支撑集\n$$\\Omega_{\\tau}(S) = \\{p \\in [m] \\times [n] \\times [T] : S_p \\ge \\tau\\}$$\n真值支撑 $\\Omega_G$ 如上定义。计算\n$$\\mathrm{TP} = |\\Omega_{\\tau}(S) \\cap \\Omega_G|, \\quad \\mathrm{FP} = |\\Omega_{\\tau}(S) \\setminus \\Omega_G|, \\quad \\mathrm{FN} = |\\Omega_G \\setminus \\Omega_{\\tau}(S)|, \\quad \\mathrm{TN} = |\\Omega_{\\tau}(S)^c \\cap \\Omega_G^c|.$$\n然后定义\n$$P = \\frac{\\mathrm{TP} + \\mathrm{TN}}{\\mathrm{TP} + \\mathrm{FP} + \\mathrm{TN}}, \\qquad R = \\frac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FN} + \\mathrm{TN}}, \\qquad F_1 = \\frac{P + R}{2}.$$\n\nC. 如选项 A 中定义 $\\Omega_{\\tau}(S)$ 和 $\\Omega_G$ 并计算\n$$\\mathrm{TP} = |\\Omega_{\\tau}(S) \\cap \\Omega_G|, \\quad \\mathrm{FP} = |\\Omega_{\\tau}(S) \\setminus \\Omega_G|, \\quad \\mathrm{FN} = |\\Omega_G \\setminus \\Omega_{\\tau}(S)|.$$\n然后设置\n$$P = \\frac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FP}}, \\qquad R = \\frac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FP}}, \\qquad F_1 = \\frac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FP} + \\mathrm{FN}}.$$\n\nD. 通过以下方式定义阈值化支撑集和真值支撑集\n$$\\Omega_{\\tau}(S) = \\{p \\in [m] \\times [n] \\times [T] : |S_p| \\ge \\tau\\}, \\qquad \\Omega_G = \\{p \\in [m] \\times [n] \\times [T] : G_p = 1\\}.$$\n计算\n$$\\mathrm{TP} = |\\Omega_{\\tau}(S) \\cap \\Omega_G|, \\quad \\mathrm{FP} = |\\Omega_G^c \\cap \\Omega_{\\tau}(S)^c|, \\quad \\mathrm{FN} = |\\Omega_G \\cap \\Omega_{\\tau}(S)^c|.$$\n然后定义\n$$P = \\frac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FP}}, \\qquad R = \\frac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FN}}, \\qquad F_1 = \\sqrt{P R}.$$\n\nE. 通过以下方式定义阈值化支撑集和真值支撑集\n$$\\Omega_{\\tau}(S) = \\{p \\in [m] \\times [n] \\times [T] : |S_p| > \\tau\\}, \\qquad \\Omega_G = \\{p \\in [m] \\times [n] \\times [T] : G_p = 1\\}.$$\n然后直接通过基数设置度量\n$$P = \\frac{|\\Omega_{\\tau}(S)|}{|\\Omega_G|}, \\qquad R = \\frac{|\\Omega_{\\tau}(S)|}{|\\Omega_G \\cup \\Omega_{\\tau}(S)|}, \\qquad F_1 = \\frac{|\\Omega_{\\tau}(S) \\cap \\Omega_G|}{|\\Omega_{\\tau}(S) \\cup \\Omega_G|}.$$\n选择唯一正确的选项。",
            "solution": "问题陈述清晰、科学严谨且客观。它描述了计算机视觉中的一个标准任务——使用检测论中的既定度量来评估一种基于鲁棒主成分分析 (RPCA) 的视频背景减除算法。给定的条件充分且一致，足以得出一个唯一解。我们可以开始分析。\n\n问题的核心是在二元分类的背景下正确定义精确率、召回率和 $F_1$-度量，其中像素被分为前景（正类）或背景（负类）。\n\n让我们从第一性原理出发，建立基本定义。\n正实例（前景像素）的真值集由掩码 $G$ 的支撑集给出：\n$$ \\Omega_G = \\{p \\in [m] \\times [n] \\times [T] : G_p = 1\\} $$\n预测的正实例集是通过对估计的稀疏前景分量 $S$ 进行阈值处理得到的。由于前景物体可能比背景更亮或更暗，其在 $S$ 中的对应项可以有很大的正值或负值。因此，预测必须基于 $S_p$ 的绝对值。因此，对于一个阈值 $\\tau \\ge 0$，预测的前景集 $\\Omega_{\\tau}(S)$ 定义为：\n$$ \\Omega_{\\tau}(S) = \\{p \\in [m] \\times [n] \\times [T] : |S_p| > \\tau\\} $$\n使用严格不等式 `>` 或非严格不等式 `\\ge` 是一个次要的实现细节；两者都是定义该集合的有效方法。\n\n给定真值正集 $\\Omega_G$ 和预测正集 $\\Omega_{\\tau}(S)$，我们可以定义每个像素四种可能结果的基数：\n- **真正例 (TP)**：被正确识别为前景的像素。它们属于两个集合。\n$$ \\mathrm{TP} = |\\Omega_{\\tau}(S) \\cap \\Omega_G| $$\n- **假正例 (FP)**：被错误识别为前景的像素（即它们是背景像素）。它们属于预测集，但不属于真值集。\n$$ \\mathrm{FP} = |\\Omega_{\\tau}(S) \\setminus \\Omega_G| = |\\Omega_{\\tau}(S) \\cap \\Omega_G^c| $$\n- **假反例 (FN)**：被检测器漏掉的前景像素。它们属于真值集，但不属于预测集。\n$$ \\mathrm{FN} = |\\Omega_G \\setminus \\Omega_{\\tau}(S)| = |\\Omega_G \\cap \\Omega_{\\tau}(S)^c| $$\n- **真反例 (TN)**：被正确识别为背景的背景像素。它们不属于任何一个集合。\n$$ \\mathrm{TN} = |(\\Omega_{\\tau}(S) \\cup \\Omega_G)^c| = |\\Omega_{\\tau}(S)^c \\cap \\Omega_G^c| $$\n\n从这些计数中，可以推导出精确率、召回率和 $F_1$-度量的标准定义：\n- **精确率 ($P$)**：预测为前景的像素中，实际是前景的像素所占的比例。它衡量正例预测的准确性。\n$$ P = \\frac{\\text{正确的正例预测数}}{\\text{总的正例预测数}} = \\frac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FP}} $$\n- **召回率 ($R$)**：所有实际为前景的像素中，被正确识别的比例。它衡量检测器的完备性或灵敏度。\n$$ R = \\frac{\\text{正确的正例预测数}}{\\text{总的实际正例数}} = \\frac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FN}} $$\n- **$F_1$-度量 ($F_1$)**：精确率和召回率的调和平均值。它提供了一个平衡这两个度量的单一分数。\n$$ F_1 = \\frac{2}{\\frac{1}{P} + \\frac{1}{R}} = \\frac{2PR}{P+R} $$\n代入 $P$ 和 $R$ 的表达式，可以得到用 TP、FP 和 FN 表示的公式：\n$$ F_1 = \\frac{2 \\left( \\frac{\\mathrm{TP}}{\\mathrm{TP}+\\mathrm{FP}} \\right) \\left( \\frac{\\mathrm{TP}}{\\mathrm{TP}+\\mathrm{FN}} \\right)}{\\frac{\\mathrm{TP}}{\\mathrm{TP}+\\mathrm{FP}} + \\frac{\\mathrm{TP}}{\\mathrm{TP}+\\mathrm{FN}}} = \\frac{2 \\mathrm{TP}}{2\\mathrm{TP} + \\mathrm{FP} + \\mathrm{FN}} $$\n\n现在，我们根据这些正确的基本定义来评估每个选项。\n\n**选项 A:**\n- 定义 $\\Omega_{\\tau}(S) = \\{p : |S_p| > \\tau\\}$ 和 $\\Omega_G = \\{p : G_p = 1\\}$。这是正确的。\n- 定义 $\\mathrm{TP} = |\\Omega_{\\tau}(S) \\cap \\Omega_G|$、$\\mathrm{FP} = |\\Omega_{\\tau}(S) \\setminus \\Omega_G|$ 和 $\\mathrm{FN} = |\\Omega_G \\setminus \\Omega_{\\tau}(S)|$。这些定义都是正确的。\n- 定义 $P = \\frac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FP}}$、$R = \\frac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FN}}$ 和 $F_1 = \\frac{2 P R}{P + R}$。这些公式是精确率、召回率和 $F_1$-分数的标准、正确定义。\n- **结论：** 正确。此选项中的每个定义和公式都是正确的。\n\n**选项 B:**\n- 定义 $\\Omega_{\\tau}(S) = \\{p : S_p \\ge \\tau\\}$。这种单边阈值处理对于基于 RPCA 的背景减除不是最优的，因为它将无法检测到比背景暗的前景物体（在 S 中表现为大的负值）。\n- 定义 $P = \\frac{\\mathrm{TP} + \\mathrm{TN}}{\\mathrm{TP} + \\mathrm{FP} + \\mathrm{TN}}$。这是错误的。这不是精确率的定义。\n- 定义 $R = \\frac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FN} + \\mathrm{TN}}$。这是错误的。召回率的分母是 $\\mathrm{TP} + \\mathrm{FN}$。\n- 定义 $F_1 = \\frac{P + R}{2}$。这是算术平均值，而不是定义 $F_1$-分数的调和平均值。\n- **结论：** 错误。\n\n**选项 C:**\n- 正确定义了 $\\Omega_{\\tau}(S)$ 和 $\\Omega_G$，与选项 A 相同。\n- 正确定义了 TP、FP 和 FN。\n- 定义 $P = \\frac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FP}}$。正确。\n- 定义 $R = \\frac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FP}}$。这是错误的。这是精确率的公式，不是召回率的公式。召回率的正确公式是 $R = \\frac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FN}}$。\n- 定义 $F_1 = \\frac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FP} + \\mathrm{FN}}$。这是错误的。这个量是杰卡德指数（或交并比，IoU），而不是 $F_1$-分数。正确的 $F_1$-分数是 $\\frac{2 \\mathrm{TP}}{2\\mathrm{TP} + \\mathrm{FP} + \\mathrm{FN}}$。\n- **结论：** 错误。\n\n**选项 D:**\n- 定义 $\\Omega_{\\tau}(S) = \\{p : |S_p| \\ge \\tau\\}$，这是一个有效的定义。\n- 定义 $\\mathrm{FP} = |\\Omega_G^c \\cap \\Omega_{\\tau}(S)^c|$。这是错误的。这是真反例 (TN) 的定义。假正例的正确定义是 $\\mathrm{FP} = |\\Omega_{\\tau}(S) \\cap \\Omega_G^c|$。\n- 定义 $F_1 = \\sqrt{P R}$。这是错误的。这是 $P$ 和 $R$ 的几何平均值。$F_1$-分数是调和平均值。\n- **结论：** 错误。\n\n**选项 E:**\n- 正确定义了 $\\Omega_{\\tau}(S)$ 和 $\\Omega_G$，与选项 A 相同。\n- 定义 $P = \\frac{|\\Omega_{\\tau}(S)|}{|\\Omega_G|}$。这是错误的。分子是 $\\mathrm{TP}+\\mathrm{FP}$，分母是 $\\mathrm{TP}+\\mathrm{FN}$。这不是精确率。\n- 定义 $R = \\frac{|\\Omega_{\\tau}(S)|}{|\\Omega_G \\cup \\Omega_{\\tau}(S)|}$。这是错误的。分子是 $\\mathrm{TP}+\\mathrm{FP}$，分母是 $\\mathrm{TP}+\\mathrm{FP}+\\mathrm{FN}$。这不是召回率。\n- 定义 $F_1 = \\frac{|\\Omega_{\\tau}(S) \\cap \\Omega_G|}{|\\Omega_{\\tau}(S) \\cup \\Omega_G|}$。如选项 C 的分析中所述，这是杰卡德指数 (IoU)，而不是 $F_1$-分数。\n- **结论：** 错误。\n\n基于这个严谨的、分步的分析，只有选项 A 提出了一套完全正确的定义和公式。",
            "answer": "$$\\boxed{A}$$"
        }
    ]
}