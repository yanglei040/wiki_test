{
    "hands_on_practices": [
        {
            "introduction": "为了将各向同性与各向异性全变分 (TV) 的抽象定义具体化，第一个练习将引导你进行一次基础的、亲自动手的计算 。通过为一个小的 $3 \\times 3$ 图像块显式计算两种 TV 范数，你将能够直接观察到数值差异的来源，并将其与梯度向量的 $\\ell_1$ 和 $\\ell_2$ 范数的几何特性联系起来。这个练习旨在夯实你对 TV 定义的理解，并为你分析更复杂图像结构中的 TV 特性打下基础。",
            "id": "3491268",
            "problem": "考虑一个单位间距的笛卡尔网格上的离散图像模型。令像素点 $(i,j)$ 处的离散梯度由前向差分算子定义，并采用齐次诺伊曼边界条件（即，任何会访问越界像素的前向差分都设为零）。具体来说，$(i,j)$ 处的离散梯度是一个由 $(i,j)$ 处的前向水平差分和垂直差分组成的二维向量。一个离散图像的各向异性全变分 (TV) 是所有像素点上离散梯度向量的 $\\ell_{1}$ 范数之和。各向同性全变分是所有像素点上离散梯度向量的 $\\ell_{2}$ 范数之和。\n\n给定一个 $3\\times 3$ 的图像块，其像素值为\n$$\nU \\;=\\;\n\\begin{pmatrix}\n1  2  2 \\\\\n1  3  5 \\\\\n2  3  6\n\\end{pmatrix}.\n$$\n仅使用上述基本定义和给定的边界模型，完成以下任务：\n- 明确计算 $U$ 的各向异性全变分和各向同性全变分。\n- 从向量范数的基本原理出发，简要解释为什么对于这个图像块，这两个值在数值上有所不同，并指出在像素层面造成这种差异的结构性来源。\n\n令 $D$ 表示各向异性全变分与各向同性全变分之间的精确差值，\n$$\nD \\;=\\; \\mathrm{TV}_{\\mathrm{anisotropic}}(U) \\;-\\; \\mathrm{TV}_{\\mathrm{isotropic}}(U).\n$$\n将 $D$ 以单一的闭式解析表达式形式报告。不要对答案进行四舍五入。",
            "solution": "设离散图像由矩阵 $U$ 表示，其中 $U_{i,j}$ 是第 $i$ 行、第 $j$ 列的像素值。网格是一个 $3 \\times 3$ 的笛卡尔网格，因此索引 $(i,j)$ 的范围从 $(1,1)$ 到 $(3,3)$。给定的图像是：\n$$\nU =\n\\begin{pmatrix}\n1  2  2 \\\\\n1  3  5 \\\\\n2  3  6\n\\end{pmatrix}\n$$\n像素点 $(i,j)$ 处的离散梯度是一个向量 $\\nabla U_{i,j} = \\begin{pmatrix} (D_x U)_{i,j} \\\\ (D_y U)_{i,j} \\end{pmatrix}$。其分量由前向差分定义，与文章主体部分保持一致：\n$$\n(D_x U)_{i,j} = U_{i+1,j} - U_{i,j} \\quad (\\text{垂直差分})\n$$\n$$\n(D_y U)_{i,j} = U_{i,j+1} - U_{i,j} \\quad (\\text{水平差分})\n$$\n齐次诺伊曼边界条件意味着任何需要越界像素的差分都设为零。对于一个 $3 \\times 3$ 的图像，这意味着当 $i \\in \\{1,2,3\\}$ 时，$(D_y U)_{i,3} = 0$；当 $j \\in \\{1,2,3\\}$ 时，$(D_x U)_{3,j} = 0$。\n\n首先，我们计算这 $9$ 个像素中每一个的离散梯度向量：\n- 在点 $(1,1)$ 处： $\\nabla U_{1,1} = \\begin{pmatrix} U_{2,1} - U_{1,1} \\\\ U_{1,2} - U_{1,1} \\end{pmatrix} = \\begin{pmatrix} 1 - 1 \\\\ 2 - 1 \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}$\n- 在点 $(1,2)$ 处： $\\nabla U_{1,2} = \\begin{pmatrix} U_{2,2} - U_{1,2} \\\\ U_{1,3} - U_{1,2} \\end{pmatrix} = \\begin{pmatrix} 3 - 2 \\\\ 2 - 2 \\end{pmatrix} = \\begin{pmatrix} 1 \\\\ 0 \\end{pmatrix}$\n- 在点 $(1,3)$ 处： $\\nabla U_{1,3} = \\begin{pmatrix} U_{2,3} - U_{1,3} \\\\ 0 \\end{pmatrix} = \\begin{pmatrix} 5 - 2 \\\\ 0 \\end{pmatrix} = \\begin{pmatrix} 3 \\\\ 0 \\end{pmatrix}$\n- 在点 $(2,1)$ 处： $\\nabla U_{2,1} = \\begin{pmatrix} U_{3,1} - U_{2,1} \\\\ U_{2,2} - U_{2,1} \\end{pmatrix} = \\begin{pmatrix} 2 - 1 \\\\ 3 - 1 \\end{pmatrix} = \\begin{pmatrix} 1 \\\\ 2 \\end{pmatrix}$\n- 在点 $(2,2)$ 处： $\\nabla U_{2,2} = \\begin{pmatrix} U_{3,2} - U_{2,2} \\\\ U_{2,3} - U_{2,2} \\end{pmatrix} = \\begin{pmatrix} 3 - 3 \\\\ 5 - 3 \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ 2 \\end{pmatrix}$\n- 在点 $(2,3)$ 处： $\\nabla U_{2,3} = \\begin{pmatrix} U_{3,3} - U_{2,3} \\\\ 0 \\end{pmatrix} = \\begin{pmatrix} 6 - 5 \\\\ 0 \\end{pmatrix} = \\begin{pmatrix} 1 \\\\ 0 \\end{pmatrix}$\n- 在点 $(3,1)$ 处： $\\nabla U_{3,1} = \\begin{pmatrix} 0 \\\\ U_{3,2} - U_{3,1} \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ 3 - 2 \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}$\n- 在点 $(3,2)$ 处： $\\nabla U_{3,2} = \\begin{pmatrix} 0 \\\\ U_{3,3} - U_{3,2} \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ 6 - 3 \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ 3 \\end{pmatrix}$\n- 在点 $(3,3)$ 处： $\\nabla U_{3,3} = \\begin{pmatrix} 0 \\\\ 0 \\end{pmatrix}$\n\n接下来，我们计算各向异性全变分 $\\mathrm{TV}_{\\mathrm{anisotropic}}(U)$，它是这些梯度向量的 $\\ell_1$ 范数之和。对于一个向量 $v = \\begin{pmatrix} v_x \\\\ v_y \\end{pmatrix}$，其 $\\ell_1$ 范数为 $\\|v\\|_1 = |v_x| + |v_y|$。\n$$\n\\mathrm{TV}_{\\mathrm{anisotropic}}(U) = \\sum_{i=1}^{3} \\sum_{j=1}^{3} \\|\\nabla U_{i,j}\\|_1\n$$\n$$\n\\mathrm{TV}_{\\mathrm{anisotropic}}(U) = (|0|+|1|) + (|1|+|0|) + (|3|+|0|) + (|1|+|2|) + (|0|+|2|) + (|1|+|0|) + (|0|+|1|) + (|0|+|3|) + (|0|+|0|)\n$$\n$$\n\\mathrm{TV}_{\\mathrm{anisotropic}}(U) = 1 + 1 + 3 + 3 + 2 + 1 + 1 + 3 + 0 = 15\n$$\n\n然后，我们计算各向同性全变分 $\\mathrm{TV}_{\\mathrm{isotropic}}(U)$，它是 $\\ell_2$ 范数之和。对于一个向量 $v = \\begin{pmatrix} v_x \\\\ v_y \\end{pmatrix}$，其 $\\ell_2$ 范数为 $\\|v\\|_2 = \\sqrt{v_x^2 + v_y^2}$。\n$$\n\\mathrm{TV}_{\\mathrm{isotropic}}(U) = \\sum_{i=1}^{3} \\sum_{j=1}^{3} \\|\\nabla U_{i,j}\\|_2\n$$\n$$\n\\mathrm{TV}_{\\mathrm{isotropic}}(U) = \\sqrt{0^2+1^2} + \\sqrt{1^2+0^2} + \\sqrt{3^2+0^2} + \\sqrt{1^2+2^2} + \\sqrt{0^2+2^2} + \\sqrt{1^2+0^2} + \\sqrt{0^2+1^2} + \\sqrt{0^2+3^2} + \\sqrt{0^2+0^2}\n$$\n$$\n\\mathrm{TV}_{\\mathrm{isotropic}}(U) = 1 + 1 + 3 + \\sqrt{5} + 2 + 1 + 1 + 3 + 0 = 12 + \\sqrt{5}\n$$\n\n这两个值之所以不同，是由于 $\\ell_1$ 和 $\\ell_2$ 范数的基本性质。对于 $\\mathbb{R}^n$ 中的任意向量 $v$，不等式 $\\|v\\|_1 \\ge \\|v\\|_2$ 恒成立。在我们的例子中，对于一个二维梯度向量 $v = \\begin{pmatrix} v_x \\\\ v_y \\end{pmatrix}$，我们有 $\\|v\\|_1 = |v_x|+|v_y|$ 和 $\\|v\\|_2 = \\sqrt{v_x^2+v_y^2}$。等式 $|v_x|+|v_y| = \\sqrt{v_x^2+v_y^2}$ 成立的充要条件是至少有一个分量 $v_x$ 或 $v_y$ 为零。这对应于一个纯水平或纯垂直的梯度。\n\n$\\mathrm{TV}_{\\mathrm{anisotropic}}(U)$ 和 $\\mathrm{TV}_{\\mathrm{isotropic}}(U)$ 之间的数值差异源于所有像素点上 $\\|\\nabla U_{i,j}\\|_1 - \\|\\nabla U_{i,j}\\|_2$ 的差值之和。只有在梯度向量的两个分量都非零的像素点上，这个差值才非零。\n检查我们计算出的梯度，只有点 $(2,1)$ 处的像素具有两个非零分量的梯度向量：$\\nabla U_{2,1} = \\begin{pmatrix} 1 \\\\ 2 \\end{pmatrix}$。对于所有其他像素点，梯度向量至少有一个零分量，这意味着对于所有 $(i,j) \\neq (2,1)$，都有 $\\|\\nabla U_{i,j}\\|_1 = \\|\\nabla U_{i,j}\\|_2$。\n因此，差异的结构性来源完全位于像素点 $(2,1)$ 处，它代表一个角点或一个图像强度在水平和垂直方向上同时变化的点。\n\n最后，我们计算精确差值 $D$：\n$$\nD = \\mathrm{TV}_{\\mathrm{anisotropic}}(U) - \\mathrm{TV}_{\\mathrm{isotropic}}(U)\n$$\n这个差值是逐项差值的和，可以简化为单个有贡献的像素点上的差值：\n$$\nD = (\\|\\nabla U_{2,1}\\|_1 - \\|\\nabla U_{2,1}\\|_2) = (|1|+|2|) - \\sqrt{1^2+2^2} = 3 - \\sqrt{5}\n$$\n或者，使用计算出的总值：\n$$\nD = 15 - (12 + \\sqrt{5}) = 3 - \\sqrt{5}\n$$\n结果是一致的。",
            "answer": "$$\n\\boxed{3 - \\sqrt{5}}\n$$"
        },
        {
            "introduction": "在掌握了基础计算之后，下一个练习将挑战你从计算转向简单的结构设计 。这个练习要求你构建两个特定的图像，它们具有相同的各向同性 TV，但各向异性 TV 不同。通过这个过程，你将深刻体会到这两种 TV 定义在惩罚不同方向的图像特征（特别是轴对齐特征与对角线特征）时存在的根本差异，从而揭示各向异性 TV 对网格方向的内在敏感性。",
            "id": "3453942",
            "problem": "考虑定义在 $2 \\times 2$ 网格上的两个灰度图像，其像素强度分别为 $u_{i,j}$ 和 $v_{i,j}$，$i,j \\in \\{1,2\\}$。使用标准的无环绕梯度前向差分格式：对于图像 $w$，定义 $D_{x} w_{i,j} = w_{i+1,j} - w_{i,j}$ (若 $i+1 \\leq 2$) 否则 $D_{x} w_{i,j} = 0$；类似地，定义 $D_{y} w_{i,j} = w_{i,j+1} - w_{i,j}$ (若 $j+1 \\leq 2$) 否则 $D_{y} w_{i,j} = 0$。各向同性全变分 (TV) 为\n$$\n\\mathrm{TV}_{\\mathrm{iso}}(w) = \\sum_{i=1}^{2} \\sum_{j=1}^{2} \\sqrt{\\left(D_{x} w_{i,j}\\right)^{2} + \\left(D_{y} w_{i,j}\\right)^{2}},\n$$\n各向异性全变分为\n$$\n\\mathrm{TV}_{\\mathrm{aniso}}(w) = \\sum_{i=1}^{2} \\sum_{j=1}^{2} \\left| D_{x} w_{i,j} \\right| + \\left| D_{y} w_{i,j} \\right|.\n$$\n构建以下两个由固定振幅 $A  0$ 参数化的图像。\n- 图像 $u$：设置 $u_{1,1} = 0$, $u_{2,1} = A$, $u_{1,2} = 0$, $u_{2,2} = A$。\n- 图像 $v$：设置 $v_{1,1} = 0$, $v_{2,1} = t$, $v_{1,2} = t$, $v_{2,2} = t + s$，其中 $t  0$ 和 $s  0$ 的选择需满足 $t = s$ 和 $\\mathrm{TV}_{\\mathrm{iso}}(v) = \\mathrm{TV}_{\\mathrm{iso}}(u)$。\n\n仅从这些定义出发，首先在约束 $t=s$ 下确定使 $\\mathrm{TV}_{\\mathrm{iso}}(v) = \\mathrm{TV}_{\\mathrm{iso}}(u)$ 成立的 $t$ 值。然后计算比率\n$$\nR \\equiv \\frac{\\mathrm{TV}_{\\mathrm{aniso}}(v)}{\\mathrm{TV}_{\\mathrm{aniso}}(u)}.\n$$\n给出 $R$ 的最终答案，形式为精确的封闭形式表达式。在您的推导中，简要解释导致即使在 $\\mathrm{TV}_{\\mathrm{iso}}$ 相等的情况下 $\\mathrm{TV}_{\\mathrm{aniso}}$ 仍不相同的那两个图像的结构特征。无需四舍五入。",
            "solution": "问题要求我们在两个图像 $u$ 和 $v$ 的各向同性全变分相等的约束下，计算它们的各向异性全变分之比。我们首先分别分析每个图像。\n\n我们将图像 $w$ 解释为一个矩阵，其中第一个索引 $i$ 表示行，第二个索引 $j$ 表示列：\n$$\nw = \\begin{pmatrix} w_{1,1}  w_{1,2} \\\\ w_{2,1}  w_{2,2} \\end{pmatrix}\n$$\n根据所提供的定义，算子 $D_x$ 计算行之间的差异（垂直梯度分量），而 $D_y$ 计算列之间的差异（水平梯度分量）。\n\n**1. 图像 $u$ 的分析**\n图像 $u$ 的像素值给定为 $u_{1,1} = 0$, $u_{2,1} = A$, $u_{1,2} = 0$, $u_{2,2} = A$。矩阵形式为：\n$$\nu = \\begin{pmatrix} 0  0 \\\\ A  A \\end{pmatrix}\n$$\n我们计算每个像素 $(i,j)$ 处的梯度分量 $(D_x u_{i,j}, D_y u_{i,j})$：\n-   在 $(1,1)$ 处：$D_x u_{1,1} = u_{2,1} - u_{1,1} = A - 0 = A$。$D_y u_{1,1} = u_{1,2} - u_{1,1} = 0 - 0 = 0$。梯度：$(A, 0)$。\n-   在 $(1,2)$ 处：$D_x u_{1,2} = u_{2,2} - u_{1,2} = A - 0 = A$。$D_y u_{1,2} = 0$ (边界)。梯度：$(A, 0)$。\n-   在 $(2,1)$ 处：$D_x u_{2,1} = 0$ (边界)。$D_y u_{2,1} = u_{2,2} - u_{2,1} = A - A = 0$。梯度：$(0, 0)$。\n-   在 $(2,2)$ 处：$D_x u_{2,2} = 0$ (边界)。$D_y u_{2,2} = 0$ (边界)。梯度：$(0, 0)$。\n\n现在我们计算图像 $u$ 的全变分度量，给定 $A  0$：\n$$\n\\mathrm{TV}_{\\mathrm{iso}}(u) = \\sqrt{A^2 + 0^2} + \\sqrt{A^2 + 0^2} + \\sqrt{0^2 + 0^2} + \\sqrt{0^2 + 0^2} = A + A = 2A\n$$\n$$\n\\mathrm{TV}_{\\mathrm{aniso}}(u) = (|A| + |0|) + (|A| + |0|) + (|0| + |0|) + (|0| + |0|) = A + A = 2A\n$$\n\n**2. 图像 $v$ 的分析**\n带有约束 $s=t$ 的图像 $v$ 的像素值为 $v_{1,1} = 0$, $v_{2,1} = t$, $v_{1,2} = t$, $v_{2,2} = 2t$。矩阵形式为：\n$$\nv = \\begin{pmatrix} 0  t \\\\ t  2t \\end{pmatrix}\n$$\n我们计算每个像素 $(i,j)$ 处的梯度分量 $(D_x v_{i,j}, D_y v_{i,j})$：\n-   在 $(1,1)$ 处：$D_x v_{1,1} = v_{2,1} - v_{1,1} = t - 0 = t$。$D_y v_{1,1} = v_{1,2} - v_{1,1} = t - 0 = t$。梯度：$(t, t)$。\n-   在 $(1,2)$ 处：$D_x v_{1,2} = v_{2,2} - v_{1,2} = 2t - t = t$。$D_y v_{1,2} = 0$ (边界)。梯度：$(t, 0)$。\n-   在 $(2,1)$ 处：$D_x v_{2,1} = 0$ (边界)。$D_y v_{2,1} = v_{2,2} - v_{2,1} = 2t - t = t$。梯度：$(0, t)$。\n-   在 $(2,2)$ 处：$D_x v_{2,2} = 0$ (边界)。$D_y v_{2,2} = 0$ (边界)。梯度：$(0, 0)$。\n\n首先，我们计算图像 $v$ 的各向同性 TV。给定 $t  0$：\n$$\n\\mathrm{TV}_{\\mathrm{iso}}(v) = \\sqrt{t^2 + t^2} + \\sqrt{t^2 + 0^2} + \\sqrt{0^2 + t^2} + \\sqrt{0^2 + 0^2} = \\sqrt{2t^2} + \\sqrt{t^2} + \\sqrt{t^2} = \\sqrt{2}t + t + t = (2 + \\sqrt{2})t\n$$\n\n**3. 确定参数 $t$**\n问题施加了约束 $\\mathrm{TV}_{\\mathrm{iso}}(v) = \\mathrm{TV}_{\\mathrm{iso}}(u)$。使用我们推导出的表达式：\n$$\n(2 + \\sqrt{2})t = 2A\n$$\n解出 $t$ 关于 $A$ 的表达式：\n$$\nt = \\frac{2A}{2 + \\sqrt{2}} = \\frac{2A(2 - \\sqrt{2})}{(2 + \\sqrt{2})(2 - \\sqrt{2})} = \\frac{2A(2 - \\sqrt{2})}{4 - 2} = \\frac{2A(2 - \\sqrt{2})}{2} = A(2 - \\sqrt{2})\n$$\n\n**4. 计算比率 $R$**\n接下来，我们计算图像 $v$ 的各向异性 TV：\n$$\n\\mathrm{TV}_{\\mathrm{aniso}}(v) = (|t| + |t|) + (|t| + |0|) + (|0| + |t|) + (|0| + |0|) = 2t + t + t = 4t\n$$\n最后，我们计算所求的比率 $R$：\n$$\nR = \\frac{\\mathrm{TV}_{\\mathrm{aniso}}(v)}{\\mathrm{TV}_{\\mathrm{aniso}}(u)} = \\frac{4t}{2A} = \\frac{2t}{A}\n$$\n代入 $t$ 的表达式：\n$$\nR = \\frac{2 \\cdot A(2 - \\sqrt{2})}{A} = 2(2 - \\sqrt{2}) = 4 - 2\\sqrt{2}\n$$\n\n**结构差异的简要解释**\n$R \\neq 1$ 的核心原因在于各向同性和各向异性 TV 如何惩罚不同的梯度方向。$\\mathrm{TV}_{\\mathrm{iso}}$ 计算梯度向量的 $\\ell_2$ 范数之和 $(\\| \\nabla w_{i,j} \\|_2 = \\sqrt{(D_x w_{i,j})^2 + (D_y w_{i,j})^2})$，而 $\\mathrm{TV}_{\\mathrm{aniso}}$ 计算 $\\ell_1$ 范数之和 $(\\| \\nabla w_{i,j} \\|_1 = |D_x w_{i,j}| + |D_y w_{i,j}|)$。\n\n这些范数的比率 $\\frac{\\| \\nabla w_{i,j} \\|_1}{\\| \\nabla w_{i,j} \\|_2}$ 取决于梯度的方向。对于像 $(g, 0)$ 这样的轴对齐梯度，这个比率是 $\\frac{|g|}{ \\sqrt{g^2}} = 1$。对于像 $(g, g)$ 这样的对角线梯度，这个比率是 $\\frac{|g| + |g|}{\\sqrt{g^2 + g^2}} = \\frac{2|g|}{\\sqrt{2}|g|} = \\sqrt{2}$。\n\n图像 $u$ 是由纯粹的轴对齐梯度（在我们的坐标系中具体是垂直梯度）构成的，因此对于其非零梯度分量，$\\ell_1$ 和 $\\ell_2$ 范数是相同的。因此，$\\mathrm{TV}_{\\mathrm{aniso}}(u) = \\mathrm{TV}_{\\mathrm{iso}}(u) = 2A$。\n\n然而，图像 $v$ 包含了混合的梯度方向：一个在 $(1,1)$ 处的对角线梯度，以及两个轴对齐梯度。相对于其 $\\ell_2$ 范数的贡献，$\\ell_1$ 范数（各向异性 TV）对对角线梯度的惩罚更重。通过强制使各向同性 TV（$\\ell_2$ 范数之和）相等，不同的惩罚结构确保了各向异性 TV（$\\ell_1$ 范数之和）不会相等。具体来说，图像 $v$ 中对角线特征的存在，使其各向异性 TV 值相对于图像 $u$ 的值有所提高。",
            "answer": "$$\n\\boxed{4 - 2\\sqrt{2}}\n$$"
        },
        {
            "introduction": "最后一个练习将你的理解从离散的像素网格提升到连续的函数空间 。通过分析一个在连续域中旋转的棋盘格图案，你将推导在离散化网格无限精细的极限下，各向异性与各向同性 TV 之比如何依赖于图像特征的旋转角度。这个练习不仅连接了离散计算与连续理论，还让你能够量化各向异性 TV 定义中固有的“网格偏好”或各向异性程度。",
            "id": "3453907",
            "problem": "考虑一个具有周期性边界条件的有界方形区域 $\\Omega = [0,L] \\times [0,L]$，其中 $L  0$。设 $a  0$ 满足 $L/a \\in \\mathbb{N}$，使得边长为 $a$ 的未旋转方形瓦片组成的棋盘格能够完美地填充 $\\Omega$。将一个对比度幅度为 $A  0$ 的二值图像 $u_{\\theta} : \\Omega \\to \\{0,A\\}$ 定义为一个旋转棋盘格的特征函数：对于边长为 $a$ 的交替方块，其边界由两族正交的平行线构成，每一族线相对于 $x$ 轴旋转一个角度 $\\theta \\in [0,\\pi/2]$，在这些方块上 $u_{\\theta}(x,y) = A$；而在互补的方块上 $u_{\\theta}(x,y) = 0$。因此，集合 $\\{(x,y) \\in \\Omega : u_{\\theta}(x,y) = A\\}$ 的边界是方向角为 $\\theta$ 和 $\\theta + \\pi/2$ 的直线段的并集，并周期性地铺满 $\\Omega$。\n\n对于一个间距为 $h = L/N$（其中 $N \\in \\mathbb{N}$）的均匀笛卡尔网格，在网格节点 $(i h, j h)$（其中 $i,j \\in \\{0,1,\\dots,N-1\\}$）处对 $u_{\\theta}$ 进行采样，并定义具有周期性环绕的离散前向差分。离散各向异性全变分为\n$$\nTV_{\\mathrm{aniso}}^{h}(u_{\\theta}) \\;=\\; \\sum_{i=0}^{N-1}\\sum_{j=0}^{N-1} \\Big( \\big|u_{\\theta}((i+1)h,jh) - u_{\\theta}(ih,jh)\\big| \\;+\\; \\big|u_{\\theta}(ih,(j+1)h) - u_{\\theta}(ih,jh)\\big| \\Big),\n$$\n离散各向同性全变分为\n$$\nTV_{\\mathrm{iso}}^{h}(u_{\\theta}) \\;=\\; \\sum_{i=0}^{N-1}\\sum_{j=0}^{N-1} \\sqrt{ \\big(u_{\\theta}((i+1)h,jh) - u_{\\theta}(ih,jh)\\big)^{2} \\;+\\; \\big(u_{\\theta}(ih,(j+1)h) - u_{\\theta}(ih,jh)\\big)^{2} }.\n$$\n\n仅使用全变分的基本定义以及关于离散全变分泛函在 $h \\to 0$ 时收敛到其连续对应物的成熟结论，推导这些泛函在旋转棋盘格构型下的连续极限，并计算极限比值\n$$\nR(\\theta) \\;=\\; \\lim_{h \\to 0} \\frac{TV_{\\mathrm{aniso}}^{h}(u_{\\theta})}{TV_{\\mathrm{iso}}^{h}(u_{\\theta})}\n$$\n的精确闭式表达式，该表达式是 $\\theta \\in [0,\\pi/2]$ 上的一个解析函数。你的最终答案必须是 $R(\\theta)$ 的一个尽可能简化的单个闭式表达式。不需要进行数值取整。",
            "solution": "问题要求计算当网格间距 $h$ 趋近于 $0$ 时，两个离散全变分 (TV) 泛函的极限比值。所使用的核心原理是这些离散泛函会收敛到它们的连续对应物。\n\n对于一个函数 $u \\in L^1(\\Omega)$，离散泛函 $TV_{\\mathrm{aniso}}^{h}(u)$ 和 $TV_{\\mathrm{iso}}^{h}(u)$（在经过 $h$ 的适当缩放后）在极限 $h \\to 0$ 时收敛到连续全变分泛函。极限泛函是基于分布梯度 $\\nabla u$ 定义的。\n\n连续各向同性全变分，通常记为 $TV(u)$，对应于梯度的 $L^2$-范数。对于一个足够光滑的函数 $u$，它由 $TV_{\\mathrm{iso}}(u) = \\int_{\\Omega} \\|\\nabla u\\|_2 \\,dx\\,dy = \\int_{\\Omega} \\sqrt{(\\frac{\\partial u}{\\partial x})^2 + (\\frac{\\partial u}{\\partial y})^2} \\,dx\\,dy$ 给出。\n连续各向异性全变分对应于梯度分量的 $L^1$-范数：$TV_{\\mathrm{aniso}}(u) = \\int_{\\Omega} \\|\\nabla u\\|_1 \\,dx\\,dy = \\int_{\\Omega} (|\\frac{\\partial u}{\\partial x}| + |\\frac{\\partial u}{\\partial y}|) \\,dx\\,dy$。\n\n比值 $R(\\theta)$ 是这些连续泛函对函数 $u_\\theta$ 求值后的比值：\n$$ R(\\theta) = \\frac{TV_{\\mathrm{aniso}}(u_{\\theta})}{TV_{\\mathrm{iso}}(u_{\\theta})} $$\n\n函数 $u_{\\theta}$ 是一个分段常数函数，取值为 $0$ 和 $A$。对于这类有界变差 (BV) 函数，其梯度 $\\nabla u_\\theta$ 是一个集中在不连续点集（我们记为 $S$）上的测度。集合 $S$ 是棋盘格黑白区域之间所有边界线段的并集。\n对于一个跳跃集为 $S$ 的分段常数函数，连续 TV 泛函可以用 BV 函数的余面积公式表示：\n$$ TV_{\\mathrm{iso}}(u_{\\theta}) = \\int_S |[u_{\\theta}]| \\,d\\mathcal{H}^1 $$\n$$ TV_{\\mathrm{aniso}}(u_{\\theta}) = \\int_S |[u_{\\theta}]| (|\\nu_x| + |\\nu_y|) \\,d\\mathcal{H}^1 $$\n在这里，$[u_{\\theta}]$ 是函数值在界面 $S$ 上的跳跃量，$\\nu = (\\nu_x, \\nu_y)$ 是界面的单位法向量，$\\mathcal{H}^1$ 是一维 Hausdorff 测度，它对应于界面 $S$ 的弧长。\n\n对于给定的棋盘格函数 $u_{\\theta}$，跳跃量在整个界面 $S$ 上是恒定的：$|[u_{\\theta}]| = |A - 0| = A$。\n\n下一步是分析界面 $S$ 的几何形状。该界面由一个周期性的线段网格组成。在区域 $\\Omega = [0,L] \\times [0,L]$ 内，这个网格由两个正交的平行线族构成。对于间距为 $a$ 的未旋转网格，其在 x 方向上的线密度为 $1/a$，在 y 方向上的线密度也为 $1/a$，因此单位面积内的总线长为 $2/a$。旋转不改变大面积内线段的总长度。因此，区域 $\\Omega$ 内界面 $S$ 的总长度为：\n$$ \\mathcal{L}(S) = \\int_S d\\mathcal{H}^1 = \\frac{2}{a} \\times (\\text{Area of } \\Omega) = \\frac{2L^2}{a} $$\n\n现在，我们可以计算连续各向同性 TV：\n$$ TV_{\\mathrm{iso}}(u_{\\theta}) = \\int_S A \\,d\\mathcal{H}^1 = A \\int_S d\\mathcal{H}^1 = A \\cdot \\mathcal{L}(S) = \\frac{2AL^2}{a} $$\n值得注意的是，这个值与旋转角度 $\\theta$ 无关，因为它只依赖于界面的总长度。\n\n接下来，我们计算连续各向异性 TV。界面 $S$ 由两组线段组成：\n1. $S_1$：方向角为 $\\theta$ 的线段。这些线段的法向量方向为 $\\theta \\pm \\pi/2$。我们取 $\\nu_1 = (\\cos(\\theta+\\pi/2), \\sin(\\theta+\\pi/2)) = (-\\sin\\theta, \\cos\\theta)$。其分量的绝对值为 $|\\nu_{1,x}| = |\\sin\\theta|$ 和 $|\\nu_{1,y}| = |\\cos\\theta|$。\n2. $S_2$：方向角为 $\\theta+\\pi/2$ 的线段。这些线段的法向量方向为 $(\\theta+\\pi/2) \\pm \\pi/2$，即 $\\theta$ 或 $\\theta+\\pi$。我们取 $\\nu_2 = (\\cos\\theta, \\sin\\theta)$。其分量的绝对值为 $|\\nu_{2,x}| = |\\cos\\theta|$ 和 $|\\nu_{2,y}| = |\\sin\\theta|$。\n\n由于棋盘格是由正方形组成的，线段族 $S_1$ 的总长度等于线段族 $S_2$ 的总长度。\n$$ \\mathcal{L}(S_1) = \\mathcal{L}(S_2) = \\frac{1}{2}\\mathcal{L}(S) = \\frac{L^2}{a} $$\n各向异性 TV 可以分解为在 $S_1$ 和 $S_2$ 上的积分：\n$$ TV_{\\mathrm{aniso}}(u_{\\theta}) = \\int_{S_1} A (|\\nu_{1,x}| + |\\nu_{1,y}|) \\,d\\mathcal{H}^1 + \\int_{S_2} A (|\\nu_{2,x}| + |\\nu_{2,y}|) \\,d\\mathcal{H}^1 $$\n由于在每个线段族上法向量的分量是常数，我们可以将积分项从积分中提出来：\n$$ TV_{\\mathrm{aniso}}(u_{\\theta}) = A (|\\sin\\theta| + |\\cos\\theta|) \\int_{S_1} d\\mathcal{H}^1 + A (|\\cos\\theta| + |\\sin\\theta|) \\int_{S_2} d\\mathcal{H}^1 $$\n$$ TV_{\\mathrm{aniso}}(u_{\\theta}) = A (|\\sin\\theta| + |\\cos\\theta|) \\mathcal{L}(S_1) + A (|\\cos\\theta| + |\\sin\\theta|) \\mathcal{L}(S_2) $$\n代入长度 $\\mathcal{L}(S_1) = \\mathcal{L}(S_2) = L^2/a$：\n$$ TV_{\\mathrm{aniso}}(u_{\\theta}) = A (|\\sin\\theta| + |\\cos\\theta|) \\frac{L^2}{a} + A (|\\cos\\theta| + |\\sin\\theta|) \\frac{L^2}{a} $$\n$$ TV_{\\mathrm{aniso}}(u_{\\theta}) = 2A (|\\sin\\theta| + |\\cos\\theta|) \\frac{L^2}{a} $$\n问题指定 $\\theta \\in [0, \\pi/2]$。在此区间内，$\\sin\\theta \\ge 0$ 和 $\\cos\\theta \\ge 0$ 均成立。因此，可以去掉绝对值符号。\n$$ TV_{\\mathrm{aniso}}(u_{\\theta}) = \\frac{2AL^2}{a} (\\sin\\theta + \\cos\\theta) $$\n\n最后，我们计算比值 $R(\\theta)$：\n$$ R(\\theta) = \\frac{TV_{\\mathrm{aniso}}(u_{\\theta})}{TV_{\\mathrm{iso}}(u_{\\theta})} = \\frac{\\frac{2AL^2}{a} (\\sin\\theta + \\cos\\theta)}{\\frac{2AL^2}{a}} $$\n所有常数 $A$、$L$ 和 $a$ 都抵消了，得到最终表达式：\n$$ R(\\theta) = \\sin\\theta + \\cos\\theta $$\n这个函数量化了 $TV_{\\mathrm{aniso}}$ 泛函的各向异性程度。当 $\\theta=0$ 和 $\\theta=\\pi/2$（轴对齐特征）时，它达到最小值 $1$；当 $\\theta=\\pi/4$（对角线特征）时，它达到最大值 $\\sqrt{2}$。这反映了各向异性 TV 对对角线边缘的惩罚比对轴对齐边缘的惩罚更重。",
            "answer": "$$\\boxed{\\sin(\\theta) + \\cos(\\theta)}$$"
        }
    ]
}