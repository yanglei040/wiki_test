{
    "hands_on_practices": [
        {
            "introduction": "在许多优化问题中，目标函数是凸函数与仿射变换的复合。本练习将引导你运用次梯度的链式法则，这是一个处理此类复合函数的关键工具。通过在特定点计算一个由$\\ell_{1}$范数和线性算子构成的函数  的次微分，你将掌握如何处理当非光滑项的参数为零时出现的不确定性，并学会如何精确地刻画整个次梯度集合。",
            "id": "3188856",
            "problem": "考虑由 $f(x) = \\|B(Ax - c)\\|_{1}$ 定义的凸函数 $f:\\mathbb{R}^{2} \\to \\mathbb{R}$，其中 $A \\in \\mathbb{R}^{3 \\times 2}$、$B \\in \\mathbb{R}^{3 \\times 3}$ 和 $c \\in \\mathbb{R}^{3}$ 由下式给出\n$$\nA = \\begin{pmatrix}\n1  0 \\\\\n0  1 \\\\\n1  -1\n\\end{pmatrix}, \n\\quad\nB = \\begin{pmatrix}\n2  0  0 \\\\\n0  1  0 \\\\\n0  0  -1\n\\end{pmatrix},\n\\quad\nc = \\begin{pmatrix}\n1 \\\\\n0 \\\\\n0\n\\end{pmatrix}.\n$$\n设 $x_{0} = \\begin{pmatrix} 1 \\\\ 1 \\end{pmatrix}$。仅使用凸次梯度和次微分的定义，以及 1-范数（也称 $\\ell_{1}$ 范数）满足 $\\partial \\|z\\|_{1} = \\{s \\in \\mathbb{R}^{m} : s_{i} = \\operatorname{sign}(z_{i}) \\text{ if } z_{i} \\neq 0,\\ \\ s_{i} \\in [-1,1] \\text{ if } z_{i} = 0\\}$ 这一事实，并利用凸函数与仿射映射复合的第一性原理，推导次微分 $\\partial f(x_{0})$ 的有效表达式。具体而言，通过将集合 $\\partial f(x_{0})$ 显式地刻画为 $\\mathbb{R}^{2}$ 中的一个集合，来确定在 $x_{0}$ 处的所有可能的次梯度。\n\n将您的最终答案表示为单个闭式集合表达式。无需四舍五入。不涉及物理单位。",
            "solution": "所述问题是有效的。它在科学上基于凸分析的既定原则，问题是适定的，有唯一解，并以客观、明确的数学语言表述。所有必要的数据和定义都已提供，且没有内部矛盾。因此，我们可以进行推导。\n\n函数由 $f(x) = \\|B(Ax - c)\\|_{1}$ 给出，其中 $x \\in \\mathbb{R}^{2}$。这是一个 $\\ell_{1}$-范数（一个凸函数）与一个仿射变换的复合。我们记 $h(z) = \\|z\\|_{1}$，仿射映射为 $g(x) = B(Ax - c) = (BA)x - Bc$。因此，$f(x) = h(g(x))$。\n\n次微分的链式法则指出，对于形如 $f(x) = h(Lx + d)$ 的函数，其中 $h$ 是一个凸函数，$x \\mapsto Lx+d$ 是一个仿射映射，则 $f$ 的次微分由下式给出：\n$$\n\\partial f(x) = L^{T} \\partial h(Lx + d)\n$$\n在我们的例子中，仿射映射的线性部分是 $L = BA$。因此，函数 $f$ 在点 $x$ 处的次微分是：\n$$\n\\partial f(x) = (BA)^{T} \\partial h(B(Ax - c)) = A^{T}B^{T} \\partial \\|B(Ax-c)\\|_{1}\n$$\n我们需要计算在特定点 $x_{0} = \\begin{pmatrix} 1 \\\\ 1 \\end{pmatrix}$ 处的次微分。该过程包括三个步骤：\n1.  计算范数的向量参数，$z_{0} = B(Ax_{0} - c)$。\n2.  确定 $\\ell_{1}$-范数在 $z_{0}$ 处的次微分，记为 $\\partial \\|z_{0}\\|_{1}$。\n3.  将线性变换 $A^{T}B^{T}$ 应用于集合 $\\partial \\|z_{0}\\|_{1}$。\n\n第1步：计算 $z_{0} = B(Ax_{0} - c)$。\n首先，我们计算仿射部分 $Ax_{0} - c$：\n$$\nA x_{0} = \\begin{pmatrix} 1  0 \\\\ 0  1 \\\\ 1  -1 \\end{pmatrix} \\begin{pmatrix} 1 \\\\ 1 \\end{pmatrix} = \\begin{pmatrix} 1 \\cdot 1 + 0 \\cdot 1 \\\\ 0 \\cdot 1 + 1 \\cdot 1 \\\\ 1 \\cdot 1 - 1 \\cdot 1 \\end{pmatrix} = \\begin{pmatrix} 1 \\\\ 1 \\\\ 0 \\end{pmatrix}\n$$\n$$\nAx_{0} - c = \\begin{pmatrix} 1 \\\\ 1 \\\\ 0 \\end{pmatrix} - \\begin{pmatrix} 1 \\\\ 0 \\\\ 0 \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ 1 \\\\ 0 \\end{pmatrix}\n$$\n现在，我们应用矩阵 $B$：\n$$\nz_{0} = B(Ax_{0} - c) = \\begin{pmatrix} 2  0  0 \\\\ 0  1  0 \\\\ 0  0  -1 \\end{pmatrix} \\begin{pmatrix} 0 \\\\ 1 \\\\ 0 \\end{pmatrix} = \\begin{pmatrix} 2 \\cdot 0 \\\\ 1 \\cdot 1 \\\\ -1 \\cdot 0 \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ 1 \\\\ 0 \\end{pmatrix}\n$$\n\n第2步：确定 $\\partial \\|z_{0}\\|_{1}$。\n题目提供了 $\\ell_{1}$-范数次微分的法则：\n$\\partial \\|z\\|_{1} = \\{s \\in \\mathbb{R}^{m} : s_{i} = \\operatorname{sign}(z_{i}) \\text{ if } z_{i} \\neq 0, \\text{ and } s_{i} \\in [-1,1] \\text{ if } z_{i} = 0\\}$。\n我们的向量是 $z_{0} = (z_{0,1}, z_{0,2}, z_{0,3})^{T} = (0, 1, 0)^{T}$。\n对于一个次梯度向量 $s = (s_{1}, s_{2}, s_{3})^{T} \\in \\partial \\|z_{0}\\|_{1}$：\n- 对于第一个分量，$z_{0,1} = 0$，所以 $s_{1}$ 可以是区间 $[-1, 1]$ 内的任意值。\n- 对于第二个分量，$z_{0,2} = 1 \\neq 0$，所以 $s_{2} = \\operatorname{sign}(1) = 1$。\n- 对于第三个分量，$z_{0,3} = 0$，所以 $s_{3}$ 可以是区间 $[-1, 1]$ 内的任意值。\n我们引入参数 $\\alpha = s_{1}$ 和 $\\beta = s_{3}$。范数在 $z_{0}$ 处的次梯度集合是：\n$$\n\\partial \\|z_{0}\\|_{1} = \\left\\{ \\begin{pmatrix} \\alpha \\\\ 1 \\\\ \\beta \\end{pmatrix} \\, \\middle| \\, \\alpha \\in [-1, 1], \\, \\beta \\in [-1, 1] \\right\\}\n$$\n\n第3步：应用变换 $A^{T}B^{T}$。\n首先，我们计算矩阵 $A^{T}B^{T}$：\n$$\nA^{T} = \\begin{pmatrix} 1  0  1 \\\\ 0  1  -1 \\end{pmatrix}, \\quad B^{T} = B = \\begin{pmatrix} 2  0  0 \\\\ 0  1  0 \\\\ 0  0  -1 \\end{pmatrix}\n$$\n$$\nA^{T}B^{T} = \\begin{pmatrix} 1  0  1 \\\\ 0  1  -1 \\end{pmatrix} \\begin{pmatrix} 2  0  0 \\\\ 0  1  0 \\\\ 0  0  -1 \\end{pmatrix} = \\begin{pmatrix} 2  0  -1 \\\\ 0  1  1 \\end{pmatrix}\n$$\n现在，我们求集合 $\\partial f(x_{0}) = A^{T}B^{T} \\partial \\|z_{0}\\|_{1}$。$\\partial f(x_{0})$ 中的任意元素 $g$ 可通过将 $A^{T}B^{T}$ 与 $\\partial \\|z_{0}\\|_{1}$ 中的一个元素 $s$ 相乘得到：\n$$\ng = \\begin{pmatrix} 2  0  -1 \\\\ 0  1  1 \\end{pmatrix} \\begin{pmatrix} \\alpha \\\\ 1 \\\\ \\beta \\end{pmatrix} = \\begin{pmatrix} 2\\alpha - \\beta \\\\ 1 + \\beta \\end{pmatrix}\n$$\n其中 $\\alpha \\in [-1, 1]$ 且 $\\beta \\in [-1, 1]$。\n这就给出了次微分集合 $\\partial f(x_{0})$ 的显式刻画。在 $x_{0}$ 处的每个次梯度都是 $\\mathbb{R}^{2}$ 中的一个向量，可以通过从各自的区间中选择 $\\alpha$ 和 $\\beta$ 的值来生成。\n\n$f$ 在 $x_{0}$ 处的所有次梯度的集合因此是：\n$$\n\\partial f(x_{0}) = \\left\\{ \\begin{pmatrix} 2\\alpha - \\beta \\\\ 1 + \\beta \\end{pmatrix} \\, \\middle| \\, \\alpha \\in [-1, 1], \\, \\beta \\in [-1, 1] \\right\\}\n$$\n这个集合是 $\\mathbb{R}^{2}$ 中的一个平行四边形，由 $(\\alpha, \\beta)$ 平面中的正方形 $[-1,1] \\times [-1,1]$ 的线性映射定义。",
            "answer": "$$\n\\boxed{\\left\\{ \\begin{pmatrix} 2\\alpha - \\beta \\\\ 1 + \\beta \\end{pmatrix} \\, \\middle| \\, \\alpha \\in [-1, 1], \\, \\beta \\in [-1, 1] \\right\\}}\n$$"
        },
        {
            "introduction": "现代稀疏优化中的目标函数常常是多个凸函数的和，例如数据保真项和正则化项。本练习建立在前一个练习的基础上，引入了次微分的求和法则，并探讨了一个在算法设计中至关重要的问题：如何从次微分集合中选择一个特定的次梯度。你将计算一个混合范数函数  的最小欧几里得范数次梯度，这是在实现最速下降等方法时的一个常见步骤。",
            "id": "3483561",
            "problem": "考虑在压缩感知和稀疏优化中使用的稀疏正则化目标函数，对于 $x \\in \\mathbb{R}^{3}$，该函数定义为 $F(x) = \\|A x\\|_{1} + \\alpha \\|x\\|_{\\infty}$，其中 $\\alpha  0$ 是一个给定的标量，$A \\in \\mathbb{R}^{3 \\times 3}$ 是线性算子\n$$\nA = \\begin{pmatrix}\n1  0  1 \\\\\n0  1  0 \\\\\n0  0  1\n\\end{pmatrix}.\n$$\n令 $x^{\\star} = \\begin{pmatrix} 1 \\\\ 0 \\\\ -2 \\end{pmatrix}$。请仅使用凸函数次梯度的基本定义以及通过其对偶范数对范数次梯度进行的基本刻画，来确定 $\\partial F(x^{\\star})$ 中具有最小欧几里得范数 $\\|g\\|_{2}$ 的元素 $g^{\\star}$。将最终答案以精确符号形式表示为行向量。无需进行四舍五入。",
            "solution": "问题要求在函数 $F(x) = \\|A x\\|_{1} + \\alpha \\|x\\|_{\\infty}$ 于点 $x^{\\star} = \\begin{pmatrix} 1 \\\\ 0 \\\\ -2 \\end{pmatrix}$ 的次微分 $\\partial F(x^{\\star})$ 中，找出具有最小欧几里得范数的次梯度 $g^{\\star}$。给定的矩阵 $A$ 为 $A = \\begin{pmatrix} 1  0  1 \\\\ 0  1  0 \\\\ 0  0  1 \\end{pmatrix}$ 且 $\\alpha  0$。\n\n函数 $F(x)$ 是两个凸函数 $f_1(x) = \\|Ax\\|_{1}$ 和 $f_2(x) = \\alpha \\|x\\|_{\\infty}$ 的和。函数 $f_1(x)$ 是凸的 $\\ell_1$-范数与一个线性变换的复合，因此是凸的。函数 $f_2(x)$ 是凸的 $\\ell_\\infty$-范数乘以一个正常数 $\\alpha$，因此也是凸的。两个凸函数的和是凸的，所以 $F(x)$ 是凸的。\n\n对于凸函数 $F$，其在点 $x$ 的次微分是一个非空、紧致的凸集。我们可以使用次微分的求和法则（Fenchel-Moreau 定理的一个推论），该法则指出，如果函数是凸的且其中一个是连续的，那么它们的和的次微分是它们各自次微分的闵可夫斯基和 (Minkowski sum)：\n$$\n\\partial F(x^{\\star}) = \\partial f_1(x^{\\star}) + \\partial f_2(x^{\\star}) = \\partial (\\|Ax\\|_{1})|_{x=x^{\\star}} + \\partial (\\alpha \\|x\\|_{\\infty})|_{x=x^{\\star}}\n$$\n\n首先，我们刻画 $f_1(x) = \\|Ax\\|_{1}$ 在 $x^{\\star}$ 处的次微分。我们应用带线性映射的次微分链式法则：\n$$\n\\partial f_1(x^{\\star}) = A^T \\partial(\\|\\cdot\\|_{1})|_{y=Ax^{\\star}}\n$$\n我们来计算 $y^{\\star} = Ax^{\\star}$：\n$$\ny^{\\star} = A x^{\\star} = \\begin{pmatrix} 1  0  1 \\\\ 0  1  0 \\\\ 0  0  1 \\end{pmatrix} \\begin{pmatrix} 1 \\\\ 0 \\\\ -2 \\end{pmatrix} = \\begin{pmatrix} 1(1) + 0(0) + 1(-2) \\\\ 0(1) + 1(0) + 0(-2) \\\\ 0(1) + 0(0) + 1(-2) \\end{pmatrix} = \\begin{pmatrix} -1 \\\\ 0 \\\\ -2 \\end{pmatrix}\n$$\n$\\ell_1$-范数 $\\|y\\|_{1}$ 在点 $y$ 的次微分是向量 $v$ 的集合，其中分量 $v_i$ 满足：\n$$\nv_i = \\begin{cases} \\mathrm{sgn}(y_i)  \\text{若 } y_i \\neq 0 \\\\ c_i \\in [-1, 1]  \\text{若 } y_i = 0 \\end{cases}\n$$\n对于 $y^{\\star} = \\begin{pmatrix} -1 \\\\ 0 \\\\ -2 \\end{pmatrix}$：\n\\begin{itemize}\n    \\item $y^{\\star}_1 = -1$，所以 $v_1 = \\mathrm{sgn}(-1) = -1$。\n    \\item $y^{\\star}_2 = 0$，所以 $v_2$ 可以是 $[-1, 1]$ 中的任意值。我们用参数 $s_1$ 表示，其中 $s_1 \\in [-1, 1]$。\n    \\item $y^{\\star}_3 = -2$，所以 $v_3 = \\mathrm{sgn}(-2) = -1$。\n\\end{itemize}\n因此，$\\ell_1$-范数在 $y^{\\star}$ 处的次微分是集合：\n$$\n\\partial (\\|y^{\\star}\\|_{1}) = \\left\\{ \\begin{pmatrix} -1 \\\\ s_1 \\\\ -1 \\end{pmatrix} \\;\\middle|\\; s_1 \\in [-1, 1] \\right\\}\n$$\n现在，我们通过乘以 $A^T$ 来计算 $\\partial f_1(x^{\\star})$：\n$$\nA^T = \\begin{pmatrix} 1  0  0 \\\\ 0  1  0 \\\\ 1  0  1 \\end{pmatrix}\n$$\n$$\n\\partial f_1(x^{\\star}) = A^T \\partial(\\|y^{\\star}\\|_{1}) = \\left\\{ \\begin{pmatrix} 1  0  0 \\\\ 0  1  0 \\\\ 1  0  1 \\end{pmatrix} \\begin{pmatrix} -1 \\\\ s_1 \\\\ -1 \\end{pmatrix} \\;\\middle|\\; s_1 \\in [-1, 1] \\right\\} = \\left\\{ \\begin{pmatrix} -1 \\\\ s_1 \\\\ -2 \\end{pmatrix} \\;\\middle|\\; s_1 \\in [-1, 1] \\right\\}\n$$\n\n接下来，我们刻画 $f_2(x) = \\alpha \\|x\\|_{\\infty}$ 在 $x^{\\star}$ 处的次微分。使用次微分的数乘法则 ($\\alpha  0$)：\n$$\n\\partial f_2(x^{\\star}) = \\alpha \\, \\partial (\\|x\\|_{\\infty})|_{x=x^{\\star}}\n$$\n$\\ell_\\infty$-范数的对偶范数是 $\\ell_1$-范数。次微分 $\\partial \\|x\\|_{\\infty}$ 是满足 $\\|v\\|_{1} \\le 1$ 和 $v^T x = \\|x\\|_{\\infty}$ 的向量 $v$ 的集合。\n对于 $x^{\\star} = \\begin{pmatrix} 1 \\\\ 0 \\\\ -2 \\end{pmatrix}$，我们有 $\\|x^{\\star}\\|_{\\infty} = \\max(|1|, |0|, |-2|) = 2$。\n我们寻找满足以下条件的向量 $v = (v_1, v_2, v_3)^T$：\n\\begin{enumerate}\n    \\item $|v_1| + |v_2| + |v_3| \\le 1$\n    \\item $v^T x^{\\star} = v_1(1) + v_2(0) + v_3(-2) = v_1 - 2v_3 = 2$\n\\end{enumerate}\n根据条件2，由三角不等式可得，$2 = |v_1 - 2v_3| \\le |v_1| + 2|v_3|$。\n根据条件1，我们有 $|v_1| + |v_3| \\le |v_1| + |v_2| + |v_3| \\le 1$。\n所以，$|v_1| \\le 1$ 且 $|v_3| \\le 1$。\n$|v_1| + 2|v_3|$ 的最大值是 $1 + 2(1) = 3$。条件 $2 \\le |v_1| + 2|v_3|$ 是可能成立的。\n我们结合 $|v_1| + |v_3| \\le 1$ 与 $2 \\le |v_1| + 2|v_3|$。\n$2 \\le |v_1| + 2|v_3| = |v_1| + |v_3| + |v_3| \\le 1 + |v_3|$。这意味着 $|v_3| \\ge 1$。\n因为必须有 $|v_3| \\le 1$，所以唯一可能性是 $|v_3| = 1$。\n如果 $|v_3|=1$，那么 $1+|v_3| = 2$。为了使不等式 $2 \\le 1+|v_3|$ 成立，所有中间的不等式都必须是等式。具体来说，$|v_1|+|v_2|+|v_3|=1$。因为 $|v_3|=1$，这要求 $|v_1|=0$ 和 $|v_2|=0$，所以 $v_1=0$ 和 $v_2=0$。\n我们检查 $v_1=0, v_2=0, |v_3|=1$ 是否为解。\n将 $v_1=0$ 代入 $v_1 - 2v_3 = 2$，得到 $-2v_3=2$，所以 $v_3=-1$。这满足 $|v_3|=1$。\n所以唯一可能的向量是 $v = \\begin{pmatrix} 0 \\\\ 0 \\\\ -1 \\end{pmatrix}$。该向量满足 $\\|v\\|_1 = 1 \\le 1$ 和 $v^T x^{\\star} = 0(1) + 0(0) + (-1)(-2) = 2 = \\|x^{\\star}\\|_\\infty$。\n因此，次微分是一个单点集：\n$$\n\\partial (\\|x^{\\star}\\|_{\\infty}) = \\left\\{ \\begin{pmatrix} 0 \\\\ 0 \\\\ -1 \\end{pmatrix} \\right\\}\n$$\n并且\n$$\n\\partial f_2(x^{\\star}) = \\alpha \\left\\{ \\begin{pmatrix} 0 \\\\ 0 \\\\ -1 \\end{pmatrix} \\right\\} = \\left\\{ \\begin{pmatrix} 0 \\\\ 0 \\\\ -\\alpha \\end{pmatrix} \\right\\}\n$$\n\n现在我们通过闵可夫斯基和求总的次微分 $\\partial F(x^{\\star})$：\n$$\n\\partial F(x^{\\star}) = \\left\\{ \\begin{pmatrix} -1 \\\\ s_1 \\\\ -2 \\end{pmatrix} \\;\\middle|\\; s_1 \\in [-1, 1] \\right\\} + \\left\\{ \\begin{pmatrix} 0 \\\\ 0 \\\\ -\\alpha \\end{pmatrix} \\right\\} = \\left\\{ \\begin{pmatrix} -1 \\\\ s_1 \\\\ -2-\\alpha \\end{pmatrix} \\;\\middle|\\; s_1 \\in [-1, 1] \\right\\}\n$$\n这个集合描述了 $\\mathbb{R}^3$ 中的一条线段。我们需要找到 $\\partial F(x^{\\star})$ 中欧几里得范数 $\\|g\\|_{2}$ 最小的元素 $g$。这等价于最小化 $\\|g\\|_{2}^2$。\n令 $g(s_1) = \\begin{pmatrix} -1 \\\\ s_1 \\\\ -2-\\alpha \\end{pmatrix}$。\n$$\n\\|g(s_1)\\|_{2}^2 = (-1)^2 + s_1^2 + (-2-\\alpha)^2 = 1 + s_1^2 + (2+\\alpha)^2\n$$\n为了在 $s_1 \\in [-1, 1]$ 上最小化这个量，我们需要最小化 $s_1^2$。在区间 $[-1, 1]$ 上，$s_1^2$ 的最小值是 $0$，在 $s_1 = 0$ 处取得。\n因此，具有最小欧几里得范数的次梯度 $g^{\\star}$ 对应于 $s_1=0$。\n$$\ng^{\\star} = \\begin{pmatrix} -1 \\\\ 0 \\\\ -2-\\alpha \\end{pmatrix}\n$$\n问题要求答案以行向量形式给出。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n-1  0  -2-\\alpha\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "计算次梯度是基础，但理解它们如何指导优化算法的进程则更为关键。这个练习  提供了一个具体案例，让你通过模拟次梯度下降法的迭代步骤，直观地感受算法在遇到不可微点（或“扭结”点）时的行为。通过观察算法如何在不同的函数分支之间“切换”，你将深化对次梯度方法如何有效探索非光滑函数最小值的理解。",
            "id": "3113754",
            "problem": "考虑由 $f(x)=\\max\\{x^{2},|x|\\}$ 定义的函数 $f:\\mathbb{R}\\to\\mathbb{R}$。仅使用凸函数的核心定义和次梯度的定义（即，向量 $g$ 是 $f$ 在 $x$ 处的次梯度，当且仅当对于所有 $y\\in\\mathbb{R}$，都有 $f(y)\\geq f(x)+g(y-x)$），完成以下任务：\n\n1. 从凸性的定义出发，论证为什么 $f$ 是凸函数，并确定对于哪些 $x$ 值，$x^{2}$ 分支是活跃分支，对于哪些 $x$ 值，$|x|$ 分支是活跃分支。利用这一点分析 $f$ 在 $x=0$ 和 $x=1$ 处的可微性。\n2. 使用次梯度的定义，描述次微分 $\\partial f(1)$ 和 $\\partial f(0)$。\n3. 考虑使用次梯度下降法在 $\\mathbb{R}$ 上最小化 $f$，固定步长为 $\\alpha=\\frac{1}{4}$，初始点为 $x_{0}=2$。在 $f$ 可微的点，取唯一的梯度作为次梯度。在 $f$ 不可微的点，从 $\\partial f(x_{k})$ 中选择欧几里得范数最小的次梯度。执行两次迭代以获得 $x_{1}$ 和 $x_{2}$，并简要解释路径中发生的任何分支切换。\n\n提供你的最终数值答案，即 $x_{2}$ 的值。不需要四舍五入。",
            "solution": "该问题要求对函数 $f(x) = \\max\\{x^2, |x|\\}$ 进行三部分分析。我们将严格遵守所提供的定义，按顺序处理每个部分。\n\n### 第一部分：凸性、活跃分支和可微性\n\n**$f(x)$ 的凸性**\n问题要求从核心定义证明凸性。一个函数 $\\phi:\\mathbb{R} \\to \\mathbb{R}$是凸的，如果对于所有 $x_1, x_2 \\in \\mathbb{R}$ 和任何 $\\lambda \\in [0, 1]$，以下不等式成立：\n$$ \\phi((1-\\lambda)x_1 + \\lambda x_2) \\leq (1-\\lambda)\\phi(x_1) + \\lambda\\phi(x_2) $$\n函数 $f(x)$ 是两个函数 $g(x) = x^2$ 和 $h(x) = |x|$ 的逐点最大值。我们首先证明 $g(x)$ 和 $h(x)$ 的凸性。\n\n1.  **$g(x) = x^2$ 的凸性**：\n    我们必须证明对于任何 $x_1, x_2 \\in \\mathbb{R}$ 和 $\\lambda \\in [0, 1]$，$g((1-\\lambda)x_1 + \\lambda x_2) \\leq (1-\\lambda)g(x_1) + \\lambda g(x_2)$。\n    该不等式为 $((1-\\lambda)x_1 + \\lambda x_2)^2 \\leq (1-\\lambda)x_1^2 + \\lambda x_2^2$。\n    让我们考虑右侧和左侧之差：\n    $$ ((1-\\lambda)x_1^2 + \\lambda x_2^2) - ((1-\\lambda)x_1 + \\lambda x_2)^2 $$\n    $$ = (1-\\lambda)x_1^2 + \\lambda x_2^2 - \\left( (1-\\lambda)^2 x_1^2 + 2\\lambda(1-\\lambda)x_1 x_2 + \\lambda^2 x_2^2 \\right) $$\n    $$ = ((1-\\lambda) - (1-\\lambda)^2)x_1^2 + (\\lambda - \\lambda^2)x_2^2 - 2\\lambda(1-\\lambda)x_1 x_2 $$\n    $$ = (1-\\lambda)(1 - (1-\\lambda))x_1^2 + \\lambda(1-\\lambda)x_2^2 - 2\\lambda(1-\\lambda)x_1 x_2 $$\n    $$ = \\lambda(1-\\lambda)x_1^2 + \\lambda(1-\\lambda)x_2^2 - 2\\lambda(1-\\lambda)x_1 x_2 $$\n    $$ = \\lambda(1-\\lambda)(x_1^2 - 2x_1 x_2 + x_2^2) $$\n    $$ = \\lambda(1-\\lambda)(x_1 - x_2)^2 $$\n    由于 $\\lambda \\in [0, 1]$，所以 $\\lambda \\ge 0$ 且 $1-\\lambda \\ge 0$，因此 $\\lambda(1-\\lambda) \\ge 0$。同时，$(x_1 - x_2)^2 \\ge 0$。因此，该差值为非负，这证明了 $g(x)=x^2$ 是凸函数。\n\n2.  **$h(x) = |x|$ 的凸性**：\n    使用三角不等式和绝对值的性质：\n    $$ h((1-\\lambda)x_1 + \\lambda x_2) = |(1-\\lambda)x_1 + \\lambda x_2| \\leq |(1-\\lambda)x_1| + |\\lambda x_2| $$\n    由于 $\\lambda \\in [0, 1]$，所以 $1-\\lambda \\ge 0$ 且 $\\lambda \\ge 0$。因此， $|1-\\lambda| = 1-\\lambda$ 且 $|\\lambda| = \\lambda$。\n    $$ |(1-\\lambda)x_1| + |\\lambda x_2| = (1-\\lambda)|x_1| + \\lambda|x_2| = (1-\\lambda)h(x_1) + \\lambda h(x_2) $$\n    这表明 $h((1-\\lambda)x_1 + \\lambda x_2) \\leq (1-\\lambda)h(x_1) + \\lambda h(x_2)$，所以 $h(x)=|x|$ 是凸函数。\n\n3.  **$f(x) = \\max\\{g(x), h(x)\\}$ 的凸性**：\n    设 $x_1, x_2 \\in \\mathbb{R}$ 且 $\\lambda \\in [0, 1]$。根据 $g$ 和 $h$ 的凸性：\n    $$ g((1-\\lambda)x_1 + \\lambda x_2) \\leq (1-\\lambda)g(x_1) + \\lambda g(x_2) $$\n    $$ h((1-\\lambda)x_1 + \\lambda x_2) \\leq (1-\\lambda)h(x_1) + \\lambda h(x_2) $$\n    根据定义，$g(x_1) \\leq \\max\\{g(x_1), h(x_1)\\} = f(x_1)$ 且 $g(x_2) \\leq f(x_2)$。所以，\n    $$ (1-\\lambda)g(x_1) + \\lambda g(x_2) \\leq (1-\\lambda)f(x_1) + \\lambda f(x_2) $$\n    类似地，$h(x_1) \\leq f(x_1)$ 且 $h(x_2) \\leq f(x_2)$，所以，\n    $$ (1-\\lambda)h(x_1) + \\lambda h(x_2) \\leq (1-\\lambda)f(x_1) + \\lambda f(x_2) $$\n    结合这些，我们得到：\n    $$ g((1-\\lambda)x_1 + \\lambda x_2) \\leq (1-\\lambda)f(x_1) + \\lambda f(x_2) $$\n    $$ h((1-\\lambda)x_1 + \\lambda x_2) \\leq (1-\\lambda)f(x_1) + \\lambda f(x_2) $$\n    左侧各项的最大值也必须小于或等于共同的右侧：\n    $$ f((1-\\lambda)x_1 + \\lambda x_2) = \\max\\{g((1-\\lambda)x_1 + \\lambda x_2), h((1-\\lambda)x_1 + \\lambda x_2)\\} \\leq (1-\\lambda)f(x_1) + \\lambda f(x_2) $$\n    这证实了 $f(x)$ 是一个凸函数。\n\n**活跃分支**\n我们需要确定对于哪些 $x$ 值，每个分支（$x^2$ 或 $|x|$）是活跃的。这意味着要找出 $x^2 \\geq |x|$ 和 $|x|  x^2$ 的区间。我们分析方程 $x^2 = |x|$。\n- 当 $x \\geq 0$ 时，方程为 $x^2 = x$，得到 $x(x-1)=0$，所以 $x=0$ 或 $x=1$。\n- 当 $x  0$ 时，方程为 $x^2 = -x$，得到 $x(x+1)=0$，所以 $x=-1$（因为 $x  0$）。\n交点是 $x=-1, 0, 1$。\n- 对于 $x \\in (-\\infty, -1] \\cup [1, \\infty)$，我们有 $x^2 \\geq |x|$。活跃分支是 $f(x)=x^2$。\n- 对于 $x \\in (-1, 0) \\cup (0, 1)$，我们有 $x^2  |x|$。活跃分支是 $f(x)=|x|$。\n在交点 $x \\in \\{-1, 0, 1\\}$ 处，两个函数相等，所以 $f(x)=x^2=|x|$。我们可以将函数总结为：\n$$ f(x) = \\begin{cases} x^2  \\text{if } x \\in (-\\infty, -1] \\cup [1, \\infty) \\\\ |x|  \\text{if } x \\in (-1, 1) \\end{cases} $$\n\n**可微性分析**\n- **在 $x=0$ 处**：对于 $0$ 邻域内的 $x$，特别地对于 $x \\in (-1, 1)$，$f(x) = |x|$。函数 $|x|$ 在 $x=0$ 处不可微。左导数是 $f'_-(0) = \\lim_{h\\to 0^-} \\frac{|0+h|-|0|}{h} = \\lim_{h\\to 0^-} \\frac{-h}{h} = -1$。右导数是 $f'_+(0) = \\lim_{h\\to 0^+} \\frac{|0+h|-|0|}{h} = \\lim_{h\\to 0^+} \\frac{h}{h} = 1$。由于 $f'_-(0) \\neq f'_+(0)$，$f$ 在 $x=0$ 处不可微。\n\n- **在 $x=1$ 处**：对于 $x>1$，$f(x)=x^2$。对于 $x1$（但接近 $1$），$f(x)=|x|=x$。\n左导数是 $f'_-(1) = \\lim_{h\\to 0^-} \\frac{f(1+h)-f(1)}{h} = \\lim_{h\\to 0^-} \\frac{|1+h|-1}{h} = \\lim_{h\\to 0^-} \\frac{1+h-1}{h} = 1$。\n右导数是 $f'_+(1) = \\lim_{h\\to 0^+} \\frac{f(1+h)-f(1)}{h} = \\lim_{h\\to 0^+} \\frac{(1+h)^2-1}{h} = \\lim_{h\\to 0^+} \\frac{1+2h+h^2-1}{h} = \\lim_{h\\to 0^+} (2+h) = 2$。\n由于 $f'_-(1) \\neq f'_+(1)$，$f$ 在 $x=1$ 处不可微。\n\n### 第二部分：次微分的描述\n\n次微分 $\\partial f(x)$ 是所有满足 $f(y) \\geq f(x) + g(y-x)$（对于所有 $y \\in \\mathbb{R}$）的次梯度 $g$ 的集合。\n\n**在 $x=1$ 处的次微分**：\n$f(1) = \\max\\{1^2, |1|\\} = 1$。我们需要找到所有 $g$，使得对于所有 $y$，都有 $f(y) \\geq 1 + g(y-1)$。\n在 $x=1$ 处，有两个函数是活跃的：$g_1(x) = x^2$ 和 $g_2(x)=|x|$。对于接近 $1$ 的 $x$，$g_2(x)=x$。这些函数在 $x=1$ 处的梯度是 $g'_1(1)=2x|_{x=1}=2$ 和 $g'_2(1)=1$。凸函数最大值的次微分是活跃函数梯度的凸包。\n因此，$\\partial f(1) = \\text{conv}\\{1, 2\\} = [1, 2]$。\n\n**在 $x=0$ 处的次微分**：\n$f(0) = \\max\\{0^2, |0|\\} = 0$。我们需要找到所有 $g$，使得对于所有 $y \\in \\mathbb{R}$，都有 $f(y) \\geq 0 + g(y-0)$，这可以简化为 $f(y) \\geq gy$。\n在 $x=0$ 的邻域内，$f(x)=|x|$。所以我们需要找到 $g$，使得对于所有 $y$ 都有 $|y| \\geq gy$。\n- 如果 $y > 0$，不等式为 $y \\geq gy$，这意味着 $1 \\geq g$。\n- 如果 $y  0$，不等式为 $-y \\geq gy$。两边同除以 $y$（一个负数）会反转不等号，得到 $-1 \\leq g$。\n结合这两个条件，我们必须有 $-1 \\leq g \\leq 1$。\n因此，$\\partial f(0) = [-1, 1]$。\n\n### 第三部分：次梯度下降\n\n次梯度下降的更新规则是 $x_{k+1} = x_k - \\alpha g_k$，其中 $\\alpha = 1/4$，起始点为 $x_0 = 2$。\n\n**第一次迭代：计算 $x_1$**\n- 我们从 $x_0 = 2$ 开始。\n- 在 $x=2$ 处，我们有 $|x| = 2$ 和 $x^2 = 4$。由于 $x^2  |x|$，活跃分支是 $f(x)=x^2$。\n- 函数在 $x=2$ 处是可微的。次梯度是唯一的梯度：$f'(x) = 2x$。\n- 所以，$g_0 = f'(2) = 2(2) = 4$。\n- 第一次更新是：\n  $$ x_1 = x_0 - \\alpha g_0 = 2 - \\frac{1}{4}(4) = 2 - 1 = 1 $$\n\n**第二次迭代：计算 $x_2$**\n- 我们现在在 $x_1 = 1$。\n- 正如第一部分所确定的，$f(x)$ 在 $x=1$ 处不可微。\n- 在该点的次微分是 $\\partial f(1) = [1, 2]$，正如第二部分所找到的。\n- 问题指定选择欧几里得范数最小的次梯度。在一维情况下，这是绝对值最小的元素。我们需要找到 $\\min_{g \\in [1, 2]} |g|$。\n- 由于 $[1, 2]$ 中的所有元素都是正的，最小绝对值对应于区间中的最小值，即 $g=1$。\n- 所以，我们选择 $g_1 = 1$。\n- 第二次更新是：\n  $$ x_2 = x_1 - \\alpha g_1 = 1 - \\frac{1}{4}(1) = 1 - \\frac{1}{4} = \\frac{3}{4} $$\n\n**分支切换**\n算法从 $x_0 = 2$ 开始，该点位于 $f(x) = x^2$ 分支上。第一次迭代将算法带到点 $x_1 = 1$，这是一个“拐点”或不可微点，是 $f(x)=x^2$ 和 $f(x)=|x|$ 两个分支的交汇处。从这一点开始，第二次迭代将算法移动到 $x_2 = 3/4$。对于 $x \\in (-1, 1)$，活跃分支是 $f(x)=|x|$。由于 $x_2=3/4$ 在这个区间内，发生了一次分支切换。优化路径已经从二次分支转移到了绝对值分支。\n\n所要求的最终数值答案是 $x_2$ 的值。",
            "answer": "$$\\boxed{\\frac{3}{4}}$$"
        }
    ]
}