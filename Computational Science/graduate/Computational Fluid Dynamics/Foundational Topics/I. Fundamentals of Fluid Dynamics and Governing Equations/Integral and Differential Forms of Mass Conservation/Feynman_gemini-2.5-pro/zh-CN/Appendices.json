{
    "hands_on_practices": [
        {
            "introduction": "理解质量守恒的积分形式和微分形式之间的联系是至关重要的。本练习提供了一次分析性推导训练，从积分形式出发，推导局域的微分连续性方程。通过将该方程应用于一个给定的流场，你将实践如何确定一个流场满足物理有效性所需的条件，并探索诸如不可压缩性和物质导数等关键概念 。",
            "id": "3335730",
            "problem": "三维空间中的一个空间平滑流体由密度场 $\\rho(\\mathbf{x},t)$ 和速度场 $\\mathbf{u}(\\mathbf{x},t)$ 描述。设密度规定为 $\\rho(\\mathbf{x},t)=\\rho_{0}\\exp(-\\beta t)$，其中 $\\rho_{0}>0$ 且 $\\beta$ 为常数，速度在空间上是仿射的，$\\mathbf{u}(\\mathbf{x},t)=(a x, b y, c z)$，其中 $a$、$b$ 和 $c$ 为常数。从任意固定控制体积 $V$（其边界为 $\\partial V$）的质量守恒积分表达式出发，\n$$\\frac{d}{dt}\\int_{V}\\rho\\,dV+\\int_{\\partial V}\\rho\\,\\mathbf{u}\\cdot\\mathbf{n}\\,dS=0,$$\n推导出相应的局部微分表达式，并将其简化为密度物质导数与速度散度之间的关系。然后，仅使用这一基本基础，确定给定的 $(\\rho,\\mathbf{u})$ 对在任何地方都满足质量守恒所需的关联 $a$、$b$、$c$ 和 $\\beta$ 的精确代数条件。在该条件下，通过提供 $\\nabla\\cdot\\mathbf{u}=0$ 的充要参数关系，判断流动是否为运动学不可压缩的，并计算由给定 $\\rho$ 所隐含的物质导数 $D\\rho/Dt$。\n\n按以下顺序报告你的最终结果：(i) 质量守恒所需的代数参数条件，(ii) 运动学不可压缩性的参数条件，以及 (iii) $D\\rho/Dt$ 的闭合形式表达式。最终答案必须是单一的闭合形式解析表达式。无需四舍五入，最终表达式中不应包含单位。",
            "solution": "用户希望我解决一个流体动力学问题。\n\n### 步骤 1：提取已知条件\n\n-   流体密度场：$\\rho(\\mathbf{x},t)=\\rho_{0}\\exp(-\\beta t)$，其中 $\\rho_{0}>0$ 且 $\\beta$ 为常数。\n-   流体速度场：$\\mathbf{u}(\\mathbf{x},t)=(a x, b y, c z)$，其中 $a$、$b$ 和 $c$ 为常数。\n-   任意固定控制体积 $V$（其边界为 $\\partial V$）的质量守恒积分表达式：\n    $$\\frac{d}{dt}\\int_{V}\\rho\\,dV+\\int_{\\partial V}\\rho\\,\\mathbf{u}\\cdot\\mathbf{n}\\,dS=0$$\n-   任务：\n    1.  推导相应的质量守恒局部微分表达式。\n    2.  将微分表达式简化为密度物质导数与速度散度之间的关系。\n    3.  确定给定的 $(\\rho, \\mathbf{u})$ 对满足质量守恒所需的关联 $a$、$b$、$c$ 和 $\\beta$ 的代数条件。\n    4.  确定流动为运动学不可压缩的条件（$\\nabla\\cdot\\mathbf{u}=0$）。\n    5.  计算由给定 $\\rho$ 所隐含的物质导数 $D\\rho/Dt$。\n\n### 步骤 2：使用提取的已知条件进行验证\n\n-   科学依据：该问题牢固地植根于连续介质力学的基本原理，特别是质量守恒定律（连续性方程）。所提供的积分形式是正确的。从积分形式推导微分形式是流体动力学中的一个标准核心步骤。\n-   适定性：该问题是适定的。它为密度场和速度场提供了具体的函数形式，并要求找出它们满足基本物理定律的条件。要遵循的步骤清晰明确，能够导出一个唯一且有意义的解。\n-   客观性：该问题以精确、客观的数学语言陈述。\n-   完整性：提供了所有必要的信息（场 $\\rho$ 和 $\\mathbf{u}$，控制积分方程）。\n-   无其他缺陷：该问题并非微不足道、不切实际或自相矛盾。给定的场虽然简单，却是用于说明所涉物理原理的有效数学构造。\n\n### 步骤 3：结论与行动\n\n问题有效。我将继续进行求解。\n\n求解过程按照问题陈述的要求分为三个连续部分。\n\n首先，我们从给定的积分形式推导质量守恒的局部微分形式。对于固定的控制体积 $V$，积分形式为：\n$$\\frac{d}{dt}\\int_{V}\\rho\\,dV+\\int_{\\partial V}\\rho\\,\\mathbf{u}\\cdot\\mathbf{n}\\,dS=0$$\n由于控制体积 $V$ 在空间中是固定的，时间导数可以移到体积积分内部，作用于密度场 $\\rho(\\mathbf{x},t)$：\n$$\\int_{V}\\frac{\\partial\\rho}{\\partial t}\\,dV+\\int_{\\partial V}\\rho\\,\\mathbf{u}\\cdot\\mathbf{n}\\,dS=0$$\n第二项是质量通量 $\\rho\\mathbf{u}$ 在边界 $\\partial V$ 上的面积分。我们应用散度定理（也称为高斯定理）将此面积分转换为在 $V$ 上的体积分：\n$$\\int_{\\partial V}(\\rho\\mathbf{u})\\cdot\\mathbf{n}\\,dS = \\int_{V}\\nabla\\cdot(\\rho\\mathbf{u})\\,dV$$\n将其代回守恒方程得到：\n$$\\int_{V}\\frac{\\partial\\rho}{\\partial t}\\,dV + \\int_{V}\\nabla\\cdot(\\rho\\mathbf{u})\\,dV = 0$$\n合并两个体积分得到：\n$$\\int_{V}\\left(\\frac{\\partial\\rho}{\\partial t} + \\nabla\\cdot(\\rho\\mathbf{u})\\right)\\,dV = 0$$\n该方程必须对任意控制体积 $V$ 成立。这只有在被积函数处处恒为零时才可能。这就得到了质量守恒方程的局部微分形式，也称为连续性方程：\n$$\\frac{\\partial\\rho}{\\partial t} + \\nabla\\cdot(\\rho\\mathbf{u}) = 0$$\n接下来，我们将其简化为一个涉及物质导数的关系。第二项，即质量通量的散度，可以使用散度的乘积法则展开：$\\nabla\\cdot(f\\mathbf{A}) = (\\nabla f)\\cdot\\mathbf{A} + f(\\nabla\\cdot\\mathbf{A})$。将此应用于 $f=\\rho$ 和 $\\mathbf{A}=\\mathbf{u}$：\n$$\\nabla\\cdot(\\rho\\mathbf{u}) = (\\nabla\\rho)\\cdot\\mathbf{u} + \\rho(\\nabla\\cdot\\mathbf{u})$$\n将此展开式代入连续性方程：\n$$\\frac{\\partial\\rho}{\\partial t} + (\\nabla\\rho)\\cdot\\mathbf{u} + \\rho(\\nabla\\cdot\\mathbf{u}) = 0$$\n密度的物质导数（或全导数），记作 $\\frac{D\\rho}{Dt}$，定义为随流体运动的流体质点的密度变化率。其表达式为：\n$$\\frac{D\\rho}{Dt} \\equiv \\frac{\\partial\\rho}{\\partial t} + \\mathbf{u}\\cdot\\nabla\\rho$$\n认识到我们展开的连续性方程中的前两项就是物质导数，我们可以将方程写成：\n$$\\frac{D\\rho}{Dt} + \\rho(\\nabla\\cdot\\mathbf{u}) = 0$$\n这就是所求的密度物质导数与速度散度之间的关系。\n\n现在，我们使用这一基本基础来分析给定的场。密度场为 $\\rho(\\mathbf{x},t) = \\rho_0 \\exp(-\\beta t)$，速度场为 $\\mathbf{u}(\\mathbf{x},t) = (ax, by, cz)$。我们必须确定这些场满足质量守恒的条件。我们可以将它们代入微分连续性方程 $\\frac{\\partial\\rho}{\\partial t} + \\nabla\\cdot(\\rho\\mathbf{u}) = 0$。\n\n首先，我们计算密度的偏时间导数：\n$$\\frac{\\partial\\rho}{\\partial t} = \\frac{\\partial}{\\partial t}\\left(\\rho_0 \\exp(-\\beta t)\\right) = -\\beta \\rho_0 \\exp(-\\beta t) = -\\beta \\rho$$\n接下来，我们计算质量通量的散度 $\\nabla\\cdot(\\rho\\mathbf{u})$。质量通量矢量为 $\\rho\\mathbf{u} = (\\rho_0 \\exp(-\\beta t)ax, \\rho_0 \\exp(-\\beta t)by, \\rho_0 \\exp(-\\beta t)cz)$。\n$$\\nabla\\cdot(\\rho\\mathbf{u}) = \\frac{\\partial}{\\partial x}(\\rho_0 \\exp(-\\beta t)ax) + \\frac{\\partial}{\\partial y}(\\rho_0 \\exp(-\\beta t)by) + \\frac{\\partial}{\\partial z}(\\rho_0 \\exp(-\\beta t)cz)$$\n由于 $\\rho$ 仅是 $t$ 的函数，因此在空间求导时它被视为常数：\n$$\\nabla\\cdot(\\rho\\mathbf{u}) = \\rho_0 \\exp(-\\beta t) \\left(\\frac{\\partial(ax)}{\\partial x} + \\frac{\\partial(by)}{\\partial y} + \\frac{\\partial(cz)}{\\partial z}\\right) = \\rho (a+b+c)$$\n将 $\\frac{\\partial\\rho}{\\partial t}$ 和 $\\nabla\\cdot(\\rho\\mathbf{u})$ 代入连续性方程：\n$$-\\beta\\rho + \\rho(a+b+c) = 0$$\n我们可以提出因子 $\\rho$：\n$$\\rho(-\\beta + a + b + c) = 0$$\n由于 $\\rho_0 > 0$，密度 $\\rho = \\rho_0 \\exp(-\\beta t)$ 永远不为零。因此，为使方程成立，括号内的项必须为零。这给出了关联参数的代数条件：\n$$a+b+c = \\beta$$\n\n接下来，我们确定流动为运动学不可压缩的条件。如果一个流动的速度场是无散度的，即 $\\nabla\\cdot\\mathbf{u}=0$，则该流动被定义为运动学不可压缩的。对于给定的速度场 $\\mathbf{u} = (ax, by, cz)$，其散度为：\n$$\\nabla\\cdot\\mathbf{u} = \\frac{\\partial(ax)}{\\partial x} + \\frac{\\partial(by)}{\\partial y} + \\frac{\\partial(cz)}{\\partial z} = a+b+c$$\n因此，运动学不可压缩的条件是：\n$$a+b+c = 0$$\n\n最后，我们计算物质导数 $\\frac{D\\rho}{Dt}$。我们可以使用前面推导出的关系：$\\frac{D\\rho}{Dt} = -\\rho(\\nabla\\cdot\\mathbf{u})$。代入 $\\rho$ 和 $\\nabla\\cdot\\mathbf{u}$ 的表达式：\n$$\\frac{D\\rho}{Dt} = -(\\rho_0 \\exp(-\\beta t))(a+b+c)$$\n为了使流动物理上有效，它必须满足质量守恒，这要求 $a+b+c=\\beta$。将这个条件代入物质导数的表达式中：\n$$\\frac{D\\rho}{Dt} = -(\\rho_0 \\exp(-\\beta t))(\\beta) = -\\beta\\rho_0\\exp(-\\beta t)$$\n或者，我们可以直接从定义 $\\frac{D\\rho}{Dt} = \\frac{\\partial\\rho}{\\partial t} + \\mathbf{u}\\cdot\\nabla\\rho$ 计算。我们已经求得 $\\frac{\\partial\\rho}{\\partial t} = -\\beta\\rho_0\\exp(-\\beta t)$。密度的梯度是：\n$$\\nabla\\rho = \\left(\\frac{\\partial\\rho}{\\partial x}, \\frac{\\partial\\rho}{\\partial y}, \\frac{\\partial\\rho}{\\partial z}\\right)$$\n由于 $\\rho$ 只依赖于 $t$，它的空间导数为零。因此，$\\nabla\\rho = \\mathbf{0}$。\n对流项为 $\\mathbf{u}\\cdot\\nabla\\rho = (ax, by, cz) \\cdot (0,0,0) = 0$。\n因此，物质导数为：\n$$\\frac{D\\rho}{Dt} = \\frac{\\partial\\rho}{\\partial t} + 0 = -\\beta\\rho_0\\exp(-\\beta t)$$\n两种方法得到相同的结果，证实了该框架的一致性。\n\n最终结果按顺序为：\n(i) 质量守恒的代数条件：$a+b+c = \\beta$。\n(ii) 运动学不可压缩的条件：$a+b+c = 0$。\n(iii) 物质导数 $D\\rho/Dt$ 的表达式：$-\\beta\\rho_0\\exp(-\\beta t)$。",
            "answer": "$$\n\\boxed{ a+b+c=\\beta, \\quad a+b+c=0, \\quad -\\beta \\rho_{0} \\exp(-\\beta t) }\n$$"
        },
        {
            "introduction": "计算流体动力学通常依赖于直接建立在积分守恒律之上的有限体积法 (FVM)。这个实践问题提供了一个亲身实践的机会，让你了解在离散的数值环境中质量守恒是如何被处理的 。通过在一个简单的周期性网格上对质量通量求和，你将验证守恒数值格式的一个核心原则：在封闭区域上，总质量是完全守恒的，这一特性直接源于界面通量的对消特性。",
            "id": "3335691",
            "problem": "考虑一个二维周期性域 $\\Omega = [0,1]\\times[0,1]$，其平面外厚度为单位厚度 $h=1\\,\\mathrm{m}$。该域被划分为一个均匀的 $2\\times 2$ 控制体网格，用于有限体积法 (FVM)，这是计算流体动力学 (CFD) 中的一种标准方法。因此，每个控制体的边长为 $\\Delta x=\\Delta y = 0.5\\,\\mathrm{m}$，面面积为 $A_{\\mathrm{face}}=\\Delta \\ell \\, h$，其中 $\\Delta \\ell\\in\\{\\Delta x,\\Delta y\\}$。流场在 $\\partial\\Omega$上是周期性的，这意味着相对的域边界是重合的；物理上，这形成了一个没有净边界的环形拓扑结构。\n\n密度场和速度场是光滑且周期性的：\n$$\n\\rho(x,y) \\;=\\; \\rho_{0} + \\alpha \\cos(2\\pi x)\\cos(2\\pi y),\\quad\nu(x,y) \\;=\\; U_{0}\\,\\sin(2\\pi y),\\quad\nv(x,y) \\;=\\; V_{0}\\,\\sin(2\\pi x),\n$$\n其中常数 $\\rho_{0}=1.2\\,\\mathrm{kg/m^{3}}$，$\\alpha=0.8\\,\\mathrm{kg/m^{3}}$，$U_{0}=3\\,\\mathrm{m/s}$ 和 $V_{0}=2\\,\\mathrm{m/s}$。\n\n仅从控制体 $V$ 上的质量守恒积分形式出发，\n$$\n\\frac{\\mathrm{d}}{\\mathrm{d}t}\\int_{V}\\rho\\,\\mathrm{d}V + \\oint_{\\partial V} \\rho \\,\\boldsymbol{u}\\cdot \\boldsymbol{n}\\,\\mathrm{d}A \\;=\\; 0,\n$$\n构建离散的 FVM 平衡方程，其中面积分通过使用中点（面心）求积法对所有面求和来近似：\n$$\n\\sum_{f\\in \\partial V} \\rho(\\boldsymbol{x}_{f})\\,\\boldsymbol{u}(\\boldsymbol{x}_{f})\\cdot \\boldsymbol{n}_{f}\\,A_{f}.\n$$\n然后，在具有周期性边界的 $2\\times 2$ 网格上，定义全局面通量和 $S$，其为所有控制体面上离散的面法向质量通量之和，其中法向量取相对于每个控制体的外法线。通过计算网格和周期性边界识别所隐含的所有不同面心求积点的贡献，显式地计算 $S$。使用给定的场和常数，并根据情况取每个面面积为 $A_{f}=\\Delta \\ell \\, h$，其中 $\\Delta \\ell=\\Delta x$ 或 $\\Delta y$。\n\n以千克/秒为单位，给出 $S$ 的最终数值。给出精确值，无需四舍五入。答案以 $\\mathrm{kg/s}$ 表示。",
            "solution": "该问题要求在一个计算流体动力学的背景下，对一个划分域的所有面上的离散质量通量进行全局求和。在进行求解之前，必须对问题陈述进行验证。\n\n### 步骤 1：提取已知条件\n-   **域：** 一个二维周期性域 $\\Omega = [0,1]\\times[0,1]$，其平面外厚度为单位厚度 $h=1\\,\\mathrm{m}$。\n-   **网格：** 一个均匀的 $2\\times 2$ 控制体 (CV) 网格。\n-   **控制体尺寸：** 边长 $\\Delta x = \\Delta y = 0.5\\,\\mathrm{m}$。\n-   **面面积：** $A_{\\mathrm{face}}=\\Delta \\ell \\, h$，其中 $\\Delta \\ell\\in\\{\\Delta x,\\Delta y\\}$。\n-   **边界条件：** 流场在 $\\partial\\Omega$ 上是周期性的。\n-   **密度场：** $\\rho(x,y) = \\rho_{0} + \\alpha \\cos(2\\pi x)\\cos(2\\pi y)$，其中 $\\rho_{0}=1.2\\,\\mathrm{kg/m^{3}}$ 和 $\\alpha=0.8\\,\\mathrm{kg/m^{3}}$。\n-   **速度场：** $\\boldsymbol{u}(x,y) = (u(x,y), v(x,y))$，其中 $u(x,y) = U_{0}\\,\\sin(2\\pi y)$ 和 $v(x,y) = V_{0}\\,\\sin(2\\pi x)$。常数为 $U_{0}=3\\,\\mathrm{m/s}$ 和 $V_{0}=2\\,\\mathrm{m/s}$。\n-   **质量守恒积分形式：** $\\frac{\\mathrm{d}}{\\mathrm{d}t}\\int_{V}\\rho\\,\\mathrm{d}V + \\oint_{\\partial V} \\rho \\,\\boldsymbol{u}\\cdot \\boldsymbol{n}\\,\\mathrm{d}A = 0$。\n-   **离散面通量：** 面积分使用中点求积法近似为 $\\sum_{f\\in \\partial V} \\rho(\\boldsymbol{x}_{f})\\,\\boldsymbol{u}(\\boldsymbol{x}_{f})\\cdot \\boldsymbol{n}_{f}\\,A_{f}$。\n-   **待计算量：** 全局面通量和 $S$，定义为所有控制体面上离散的面法向质量通量之和，其中法线 $\\boldsymbol{n}_{f}$ 是每个相应控制体的外法线。\n\n### 步骤 2：使用提取的已知条件进行验证\n-   **科学依据：** 该问题基于质量守恒基本原理及其使用有限体积法 (FVM) 的离散化，FVM 是计算流体动力学中一种标准且成熟的技术。守恒定律的积分形式及其数值近似都得到了正确陈述。使用周期性边界条件和光滑的解析场是验证数值格式的常用且有效设置。该问题在科学上是合理的。\n-   **适定性：** 所有必要信息——域的几何形状、网格结构、物理常数、场的解析形式以及待计算量（$S$）的精确定义——均已提供。任务是一个直接的、确定性的计算。该问题是适定的。\n-   **客观性：** 问题使用精确的数学和物理术语进行表述。所有量都得到了明确定义。没有主观或基于观点的陈述。\n\n### 步骤 3：结论与行动\n该问题有效。将提供一个完整的、有理有据的解答。\n\n### 解\n问题要求计算全局面通量和 $S$。该和定义为网格中所有控制体所有面上的离散质量通量之总和，其中对每个控制体，均使用向外的法线。设控制体集合为 $\\{\\mathrm{CV}_i\\}_{i=1}^4$。则和 $S$ 由下式给出：\n$$\nS = \\sum_{i=1}^4 \\left( \\sum_{f \\in \\partial \\mathrm{CV}_i} \\rho(\\boldsymbol{x}_f) \\boldsymbol{u}(\\boldsymbol{x}_f) \\cdot \\boldsymbol{n}_f A_f \\right)\n$$\n其中 $\\boldsymbol{x}_f$ 是面 $f$ 的中心，$A_f$ 是其面积，$\\boldsymbol{n}_f$ 是相对于 $\\mathrm{CV}_i$ 的外法线。\n\n这个和可以按网格中独特的几何面进行重组。对于由两个相邻控制体（例如 $\\mathrm{CV}_i$ 和 $\\mathrm{CV}_j$）共享的任何内部面，该面在全局和 $S$ 中被计算两次。设该面为 $f_{ij}$。$\\mathrm{CV}_i$ 的外法线是 $\\boldsymbol{n}_{ij}$，而 $\\mathrm{CV}_j$ 的外法线是 $\\boldsymbol{n}_{ji}$。根据定义，$\\boldsymbol{n}_{ji} = -\\boldsymbol{n}_{ij}$。面心 $\\boldsymbol{x}_{f_{ij}}$ 和面积 $A_{f_{ij}}$ 对两者是相同的。因此，该面对 $S$ 的总贡献为：\n$$\n\\rho(\\boldsymbol{x}_{f_{ij}}) \\boldsymbol{u}(\\boldsymbol{x}_{f_{ij}}) \\cdot \\boldsymbol{n}_{ij} A_{f_{ij}} + \\rho(\\boldsymbol{x}_{f_{ij}}) \\boldsymbol{u}(\\boldsymbol{x}_{f_{ij}}) \\cdot \\boldsymbol{n}_{ji} A_{f_{ij}} = \\rho(\\boldsymbol{x}_{f_{ij}}) \\boldsymbol{u}(\\boldsymbol{x}_{f_{ij}}) \\cdot \\boldsymbol{n}_{ij} A_{f_{ij}} - \\rho(\\boldsymbol{x}_{f_{ij}}) \\boldsymbol{u}(\\boldsymbol{x}_{f_{ij}}) \\cdot \\boldsymbol{n}_{ij} A_{f_{ij}} = 0\n$$\n对于每个内部面，都会发生这种抵消。\n\n对于域边界 $\\partial\\Omega$ 上的面，周期性边界条件意味着域一侧的面与另一侧的面是重合的。例如，边界 $x=1$ 上的一个面实际上与边界 $x=0$ 上的一个面相邻。位于 $x=1$ 的控制体的外法线指向正 $x$ 方向，而位于 $x=0$ 的相应周期性控制体的外法线指向负 $x$ 方向。由于场 $\\rho$ 和 $\\boldsymbol{u}$ 是周期性的，它们在相对边界上对应点的值是相同的。因此，这些周期性面对应对的通量贡献也相互抵消。\n\n由于该域是封闭的（由于周期性而成为一个环形），没有净边界，因此每个面的贡献都与一个大小相等、方向相反的贡献配对。因此，全局和 $S$ 必须恰好为零。这是封闭域上守恒离散化方法的一个基本属性。\n\n为了满足问题对显式计算的要求，我们现在将计算每个不同面心的通量。\n域 $\\Omega=[0,1]\\times[0,1]$ 被划分为四个控制体：\n$\\mathrm{CV}_1: [0, 0.5]\\times[0, 0.5]$，$\\mathrm{CV}_2: [0.5, 1]\\times[0, 0.5]$，$\\mathrm{CV}_3: [0, 0.5]\\times[0.5, 1]$，$\\mathrm{CV}_4: [0.5, 1]\\times[0.5, 1]$。\n垂直面的面积为 $A_x = \\Delta y \\cdot h = 0.5 \\cdot 1 = 0.5\\,\\mathrm{m^2}$，水平面的面积为 $A_y = \\Delta x \\cdot h = 0.5 \\cdot 1 = 0.5\\,\\mathrm{m^2}$。\n\n用于中点求积的面心坐标是：\n-   垂直面：$(0.5, 0.25)$、$(0.5, 0.75)$、$(0, 0.25)$（与 $(1, 0.25)$ 重合）和 $(0, 0.75)$（与 $(1, 0.75)$ 重合）。\n-   水平面：$(0.25, 0.5)$、$(0.75, 0.5)$、$(0.25, 0)$（与 $(0.25, 1)$ 重合）和 $(0.75, 0)$（与 $(0.75, 1)$ 重合）。\n\n在这些面心 $(x_f, y_f)$ 中的任意一个，要么 $x_f$ 要么 $y_f$ 是 $0.25$ 的倍数但不是 $0.5$ 的倍数。因此，$2\\pi x_f$ 或 $2\\pi y_f$ 是 $\\pi/2$ 的奇数倍。这意味着 $\\cos(2\\pi x_f)=0$ 或 $\\cos(2\\pi y_f)=0$。在这两种情况下，乘积 $\\cos(2\\pi x_f)\\cos(2\\pi y_f)$ 都为零。\n因此，在所有面心处，密度计算结果为：\n$$\n\\rho(x_f, y_f) = \\rho_0 + \\alpha \\cdot 0 = \\rho_0 = 1.2\\,\\mathrm{kg/m^3}\n$$\n\n我们来计算通量。穿过一个面的质量通量为 $\\dot{m}_f = (\\rho \\boldsymbol{u} \\cdot \\boldsymbol{n} A)_f$。\n1.  **位于 $x=0.5$，$y=0$ 和 $y=0.5$ 之间的内部垂直面**：中心 $\\boldsymbol{x}_f=(0.5, 0.25)$。\n    $u(0.5, 0.25) = U_0 \\sin(2\\pi \\cdot 0.25) = 3 \\sin(\\pi/2) = 3$。\n    -   从 $\\mathrm{CV}_1$（右面，$\\boldsymbol{n}=(1,0)$）：$\\dot{m}_1 = (1.2)(3)(1)(0.5) = 1.8\\,\\mathrm{kg/s}$。\n    -   从 $\\mathrm{CV}_2$（左面，$\\boldsymbol{n}=(-1,0)$）：$\\dot{m}_2 = (1.2)(3)(-1)(0.5) = -1.8\\,\\mathrm{kg/s}$。和：$0$。\n\n2.  **位于 $x=0.5$，$y=0.5$ 和 $y=1$ 之间的内部垂直面**：中心 $\\boldsymbol{x}_f=(0.5, 0.75)$。\n    $u(0.5, 0.75) = U_0 \\sin(2\\pi \\cdot 0.75) = 3 \\sin(3\\pi/2) = -3$。\n    -   从 $\\mathrm{CV}_3$（右面，$\\boldsymbol{n}=(1,0)$）：$\\dot{m}_3 = (1.2)(-3)(1)(0.5) = -1.8\\,\\mathrm{kg/s}$。\n    -   从 $\\mathrm{CV}_4$（左面，$\\boldsymbol{n}=(-1,0)$）：$\\dot{m}_4 = (1.2)(-3)(-1)(0.5) = 1.8\\,\\mathrm{kg/s}$。和：$0$。\n\n3.  **位于 $y=0.5$，$x=0$ 和 $x=0.5$ 之间的内部水平面**：中心 $\\boldsymbol{x}_f=(0.25, 0.5)$。\n    $v(0.25, 0.5) = V_0 \\sin(2\\pi \\cdot 0.25) = 2 \\sin(\\pi/2) = 2$。\n    -   从 $\\mathrm{CV}_1$（顶面，$\\boldsymbol{n}=(0,1)$）：$\\dot{m}_5 = (1.2)(2)(1)(0.5) = 1.2\\,\\mathrm{kg/s}$。\n    -   从 $\\mathrm{CV}_3$（底面，$\\boldsymbol{n}=(0,-1)$）：$\\dot{m}_6 = (1.2)(2)(-1)(0.5) = -1.2\\,\\mathrm{kg/s}$。和：$0$。\n\n4.  **位于 $y=0.5$，$x=0.5$ 和 $x=1$ 之间的内部水平面**：中心 $\\boldsymbol{x}_f=(0.75, 0.5)$。\n    $v(0.75, 0.5) = V_0 \\sin(2\\pi \\cdot 0.75) = 2 \\sin(3\\pi/2) = -2$。\n    -   从 $\\mathrm{CV}_2$（顶面，$\\boldsymbol{n}=(0,1)$）：$\\dot{m}_7 = (1.2)(-2)(1)(0.5) = -1.2\\,\\mathrm{kg/s}$。\n    -   从 $\\mathrm{CV}_4$（底面，$\\boldsymbol{n}=(0,-1)$）：$\\dot{m}_8 = (1.2)(-2)(-1)(0.5) = 1.2\\,\\mathrm{kg/s}$。和：$0$。\n\n所有内部面的贡献总和为零。现在看周期性边界面：\n5.  **位于 $x=0$ 和 $x=1$ 的周期性垂直面（下半部分）**：中心 $\\boldsymbol{x}_f=(0, 0.25)$ 或 $(1, 0.25)$。\n    $u(0, 0.25) = u(1, 0.25) = U_0 \\sin(2\\pi \\cdot 0.25) = 3$。\n    -   从 $\\mathrm{CV}_1$（左面，$\\boldsymbol{n}=(-1,0)$）：$\\dot{m}_9 = (1.2)(3)(-1)(0.5) = -1.8\\,\\mathrm{kg/s}$。\n    -   从 $\\mathrm{CV}_2$（右面，$\\boldsymbol{n}=(1,0)$）：$\\dot{m}_{10} = (1.2)(3)(1)(0.5) = 1.8\\,\\mathrm{kg/s}$。和：$0$。\n\n6.  **位于 $x=0$ 和 $x=1$ 的周期性垂直面（上半部分）**：中心 $\\boldsymbol{x}_f=(0, 0.75)$ 或 $(1, 0.75)$。\n    $u(0, 0.75) = u(1, 0.75) = U_0 \\sin(2pi \\cdot 0.75) = -3$。\n    -   从 $\\mathrm{CV}_3$（左面，$\\boldsymbol{n}=(-1,0)$）：$\\dot{m}_{11} = (1.2)(-3)(-1)(0.5) = 1.8\\,\\mathrm{kg/s}$。\n    -   从 $\\mathrm{CV}_4$（右面，$\\boldsymbol{n}=(1,0)$）：$\\dot{m}_{12} = (1.2)(-3)(1)(0.5) = -1.8\\,\\mathrm{kg/s}$。和：$0$。\n\n7.  **位于 $y=0$ 和 $y=1$ 的周期性水平面（左半部分）**：中心 $\\boldsymbol{x}_f=(0.25, 0)$ 或 $(0.25, 1)$。\n    $v(0.25, 0) = v(0.25, 1) = V_0 \\sin(2\\pi \\cdot 0.25) = 2$。\n    -   从 $\\mathrm{CV}_1$（底面，$\\boldsymbol{n}=(0,-1)$）：$\\dot{m}_{13} = (1.2)(2)(-1)(0.5) = -1.2\\,\\mathrm{kg/s}$。\n    -   从 $\\mathrm{CV}_3$（顶面，$\\boldsymbol{n}=(0,1)$）：$\\dot{m}_{14} = (1.2)(2)(1)(0.5) = 1.2\\,\\mathrm{kg/s}$。和：$0$。\n\n8.  **位于 $y=0$ 和 $y=1$ 的周期性水平面（右半部分）**：中心 $\\boldsymbol{x}_f=(0.75, 0)$ 或 $(0.75, 1)$。\n    $v(0.75, 0) = v(0.75, 1) = V_0 \\sin(2\\pi \\cdot 0.75) = -2$。\n    -   从 $\\mathrm{CV}_2$（底面，$\\boldsymbol{n}=(0,-1)$）：$\\dot{m}_{15} = (1.2)(-2)(-1)(0.5) = 1.2\\,\\mathrm{kg/s}$。\n    -   从 $\\mathrm{CV}_4$（顶面，$\\boldsymbol{n}=(0,1)$）：$\\dot{m}_{16} = (1.2)(-2)(1)(0.5) = -1.2\\,\\mathrm{kg/s}$。和：$0$。\n\n全局和 $S$ 是所有 $16$ 个通量贡献的总和：\n$$\nS = \\sum_{k=1}^{16} \\dot{m}_k = (1.8-1.8) + (-1.8+1.8) + (1.2-1.2) + (-1.2+1.2) + (-1.8+1.8) + (1.8-1.8) + (-1.2+1.2) + (1.2-1.2) = 0\n$$\n显式计算证实了理论结果。在封闭的周期性域中，所有控制体所有面上的离散通量总和为零。",
            "answer": "$$\\boxed{0}$$"
        },
        {
            "introduction": "在实际的工程和研究中，我们如何信任一个复杂 CFD 模拟的结果？最基本的健全性检查之一就是审计全局质量守恒。这个问题将你置于 CFD 分析师的角色，使用模拟的原始输出数据进行质量平衡审计 。你将应用质量守恒定律的时间积分形式来量化数值误差，并评估求解器是否满足其文档中声称的精度标准。",
            "id": "3335728",
            "problem": "考虑一个非定常可压缩流模拟，流体流经一个固定的控制体。该控制体由两个平面截面（一个入口和一个出口）界定，控制面上的单位法向量向外。在整个模拟时长内，求解器记录了每个时间步长内穿过每个边界的时间积分质量通量。该控制体的体积为 $V=3.000\\ \\mathrm{m}^{3}$。初始时刻的体积平均密度为 $\\bar{\\rho}(0)=1.200\\ \\mathrm{kg}\\ \\mathrm{m}^{-3}$，最终时刻的体积平均密度为 $\\bar{\\rho}(T)=1.250\\ \\mathrm{kg}\\ \\mathrm{m}^{-3}$。总时长为 $T=0.500\\ \\mathrm{s}$，分为5个相等的时间步长，每个时间步长为 $\\Delta t=0.100\\ \\mathrm{s}$。对于每个时间步长 $k=0,1,2,3,4$，求解器报告了以下入口和出口的时间积分质量通量，分别记为 $G_{\\mathrm{in},k}$ 和 $G_{\\mathrm{out},k}$。每个 $G$ 的单位为千克，其定义为在相应边界上 $\\rho\\,\\boldsymbol{u}\\cdot\\boldsymbol{n}$ 的面积分在一个时间步长内的时间积分。约定流入控制体的流量 $G_{\\mathrm{in},k}>0$，流出控制体的流量 $G_{\\mathrm{out},k}>0$：\n- $G_{\\mathrm{in},0}=2.400\\ \\mathrm{kg}$, $G_{\\mathrm{out},0}=2.370\\ \\mathrm{kg}$。\n- $G_{\\mathrm{in},1}=2.520\\ \\mathrm{kg}$, $G_{\\mathrm{out},1}=2.430\\ \\mathrm{kg}$。\n- $G_{\\mathrm{in},2}=2.430\\ \\mathrm{kg}$, $G_{\\mathrm{out},2}=2.410\\ \\mathrm{kg}$。\n- $G_{\\mathrm{in},3}=2.460\\ \\mathrm{kg}$, $G_{\\mathrm{out},3}=2.490\\ \\mathrm{kg}$。\n- $G_{\\mathrm{in},4}=2.508\\ \\mathrm{kg}$, $G_{\\mathrm{out},4}=2.471\\ \\mathrm{kg}$。\n\n仅使用固定控制体的质量守恒积分形式，计算在 $[0,T]$ 时间段内的累积质量平衡误差。该误差定义为控制体中的净累积量与净流入减去净流出的差值的绝对值，并由总处理质量 $M_{\\mathrm{proc}}=G_{\\mathrm{in,tot}}+G_{\\mathrm{out,tot}}$ 进行归一化，其中 $G_{\\mathrm{in,tot}}=\\sum_{k=0}^{4}G_{\\mathrm{in},k}$ 且 $G_{\\mathrm{out,tot}}=\\sum_{k=0}^{4}G_{\\mathrm{out},k}$。求解器的文档指出，对于此配置，归一化的累积质量平衡误差应小于 $2.0\\times 10^{-4}$。以小数形式报告无量纲归一化误差 $\\varepsilon$。将答案四舍五入至四位有效数字。",
            "solution": "该问题要求计算一个固定控制体上可压缩流模拟的累积质量平衡误差。这可以通过应用质量守恒方程的积分形式来实现。\n\n对于一个具有控制面 $S$ 的固定控制体 $V$，质量守恒方程的积分形式为：\n$$\n\\frac{d}{dt} \\int_{V} \\rho \\, dV + \\oint_{S} \\rho (\\boldsymbol{u} \\cdot \\boldsymbol{n}) \\, dS = 0\n$$\n其中 $\\rho$ 是流体密度，$\\boldsymbol{u}$ 是速度矢量，$\\boldsymbol{n}$ 是控制面 $S$ 上指向外部的单位法向量。\n\n为了求得在总时长 $T$ 内的累积变化，我们将此方程从 $t=0$ 到 $t=T$ 对时间进行积分：\n$$\n\\int_{0}^{T} \\left( \\frac{d}{dt} \\int_{V} \\rho \\, dV \\right) dt + \\int_{0}^{T} \\left( \\oint_{S} \\rho (\\boldsymbol{u} \\cdot \\boldsymbol{n}) \\, dS \\right) dt = 0\n$$\n对第一项应用微积分基本定理，得到控制体内质量的净变化，我们将其记为净累积量 $\\Delta M_{CV}$：\n$$\n\\Delta M_{CV} = \\left[ \\int_{V} \\rho \\, dV \\right]_{0}^{T} = \\int_{V} \\rho(T) \\, dV - \\int_{V} \\rho(0) \\, dV\n$$\n第二项表示在时长 $T$ 内流出控制体的总净质量。问题以入口和出口的一系列时间积分通量的形式提供了此信息。根据给定的约定（$G_{\\mathrm{in}}>0$ 表示流入，$G_{\\mathrm{out}}>0$ 表示流出），流入控制体的总净质量 $M_{\\mathrm{net,in}}$ 是所有流入量之和减去所有流出量之和。因此，守恒方程可以写为：\n$$\n\\Delta M_{CV} - M_{\\mathrm{net,in}} = 0\n$$\n在数值模拟中，会存在一些误差，所以这个等式不会精确成立。质量平衡残差 $E_{\\mathrm{mass}}$ 定义为与零的偏差：\n$$\nE_{\\mathrm{mass}} = \\Delta M_{CV} - M_{\\mathrm{net,in}}\n$$\n\n首先，我们计算控制体内的质量净累积量 $\\Delta M_{CV}$。问题提供了体积平均密度 $\\bar{\\rho}(t) = \\frac{1}{V}\\int_V \\rho(t) dV$。因此，在时间 $t$ 时控制体内的质量为 $M(t) = \\bar{\\rho}(t)V$。\n已知：\n- 控制体体积 $V = 3.000\\ \\mathrm{m}^3$。\n- 初始平均密度 $\\bar{\\rho}(0) = 1.200\\ \\mathrm{kg}\\ \\mathrm{m}^{-3}$。\n- 最终平均密度 $\\bar{\\rho}(T) = 1.250\\ \\mathrm{kg}\\ \\mathrm{m}^{-3}$。\n净累积量为：\n$$\n\\Delta M_{CV} = M(T) - M(0) = \\bar{\\rho}(T)V - \\bar{\\rho}(0)V = (\\bar{\\rho}(T) - \\bar{\\rho}(0))V\n$$\n$$\n\\Delta M_{CV} = (1.250\\ \\mathrm{kg}\\ \\mathrm{m}^{-3} - 1.200\\ \\mathrm{kg}\\ \\mathrm{m}^{-3}) \\times 3.000\\ \\mathrm{m}^3 = 0.050\\ \\mathrm{kg}\\ \\mathrm{m}^{-3} \\times 3.000\\ \\mathrm{m}^3 = 0.150\\ \\mathrm{kg}\n$$\n\n接下来，我们根据求解器报告的边界通量计算流入控制体的净质量 $M_{\\mathrm{net,in}}$。这是总流入量减去总流出量。\n总流入量 $G_{\\mathrm{in,tot}}$ 是所有5个时间步长的流入量之和：\n$$\nG_{\\mathrm{in,tot}} = \\sum_{k=0}^{4} G_{\\mathrm{in},k} = 2.400 + 2.520 + 2.430 + 2.460 + 2.508 = 12.318\\ \\mathrm{kg}\n$$\n总流出量 $G_{\\mathrm{out,tot}}$ 是所有5个时间步长的流出量之和：\n$$\nG_{\\mathrm{out,tot}} = \\sum_{k=0}^{4} G_{\\mathrm{out},k} = 2.370 + 2.430 + 2.410 + 2.490 + 2.471 = 12.171\\ \\mathrm{kg}\n$$\n净流入质量为：\n$$\nM_{\\mathrm{net,in}} = G_{\\mathrm{in,tot}} - G_{\\mathrm{out,tot}} = 12.318\\ \\mathrm{kg} - 12.171\\ \\mathrm{kg} = 0.147\\ \\mathrm{kg}\n$$\n\n现在我们计算质量平衡残差（不平衡量）$E_{\\mathrm{mass}}$：\n$$\nE_{\\mathrm{mass}} = \\Delta M_{CV} - M_{\\mathrm{net,in}} = 0.150\\ \\mathrm{kg} - 0.147\\ \\mathrm{kg} = 0.003\\ \\mathrm{kg}\n$$\n\n问题要求用总处理质量 $M_{\\mathrm{proc}}$ 对这个误差进行归一化，其中 $M_{\\mathrm{proc}} = G_{\\mathrm{in,tot}} + G_{\\mathrm{out,tot}}$。\n$$\nM_{\\mathrm{proc}} = 12.318\\ \\mathrm{kg} + 12.171\\ \\mathrm{kg} = 24.489\\ \\mathrm{kg}\n$$\n归一化的累积质量平衡误差 $\\varepsilon$ 是残差的绝对值除以总处理质量：\n$$\n\\varepsilon = \\frac{|E_{\\mathrm{mass}}|}{M_{\\mathrm{proc}}} = \\frac{|0.003\\ \\mathrm{kg}|}{24.489\\ \\mathrm{kg}}\n$$\n$$\n\\varepsilon \\approx 0.000122503981\n$$\n问题要求答案四舍五入到四位有效数字。前四位有效数字是 $1$、$2$、$2$ 和 $5$。第五位有效数字是 $0$，所以我们不向上取整。\n$$\n\\varepsilon \\approx 0.0001225\n$$\n用标准科学记数法表示，这是 $1.225 \\times 10^{-4}$。",
            "answer": "$$\\boxed{1.225 \\times 10^{-4}}$$"
        }
    ]
}