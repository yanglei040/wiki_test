{
    "hands_on_practices": [
        {
            "introduction": "A cornerstone of fluid dynamics is understanding the relationship between the field-based (Eulerian) description of flow and the particle-following (Lagrangian) perspective. This exercise challenges you to start from the integral statement of mass conservation, derive its differential form, and connect it to the material derivative, $\\frac{D\\rho}{Dt}$. By applying these principles to a hypothetical flow, you will determine the conditions under which the flow is physically realizable and explore the distinction between a compressible flow and a kinematically incompressible one . This practice sharpens your ability to manipulate the governing equations and interpret their physical meaning.",
            "id": "3335730",
            "problem": "A spatially smooth fluid in three-dimensional space is described by a density field $\\rho(\\mathbf{x},t)$ and a velocity field $\\mathbf{u}(\\mathbf{x},t)$. Let the density be prescribed as $\\rho(\\mathbf{x},t)=\\rho_{0}\\exp(-\\beta t)$ with $\\rho_{0}>0$ and $\\beta$ constant, and the velocity be affine in space, $\\mathbf{u}(\\mathbf{x},t)=(a x, b y, c z)$ with constants $a$, $b$, and $c$. Starting from the integral statement of mass conservation for an arbitrary fixed control volume $V$ with boundary $\\partial V$,\n$$\\frac{d}{dt}\\int_{V}\\rho\\,dV+\\int_{\\partial V}\\rho\\,\\mathbf{u}\\cdot\\mathbf{n}\\,dS=0,$$\nderive the corresponding local differential statement and reduce it to a relation between the material derivative of density and the velocity divergence. Then, using only this fundamental base, determine the precise algebraic condition relating $a$, $b$, $c$, and $\\beta$ that is required for the given pair $(\\rho,\\mathbf{u})$ to satisfy mass conservation everywhere. Under that condition, decide whether the flow is kinematically incompressible by providing the necessary and sufficient parameter relation for $\\nabla\\cdot\\mathbf{u}=0$, and compute the material derivative $D\\rho/Dt$ implied by the given $\\rho$. \n\nReport your final result as, in order: (i) the algebraic parameter condition required by mass conservation, (ii) the parameter condition for kinematic incompressibility, and (iii) the closed-form expression for $D\\rho/Dt$. The final answer must be a single closed-form analytic expression. No rounding is required and no units should be included in the final expression.",
            "solution": "The user wants me to solve a fluid dynamics problem.\n\n### Step 1: Extract Givens\n\n-   Fluid density field: $\\rho(\\mathbf{x},t)=\\rho_{0}\\exp(-\\beta t)$, with $\\rho_{0}>0$ and $\\beta$ constant.\n-   Fluid velocity field: $\\mathbf{u}(\\mathbf{x},t)=(a x, b y, c z)$, with $a$, $b$, and $c$ constant.\n-   Integral statement of mass conservation for an arbitrary fixed control volume $V$ with boundary $\\partial V$:\n    $$\\frac{d}{dt}\\int_{V}\\rho\\,dV+\\int_{\\partial V}\\rho\\,\\mathbf{u}\\cdot\\mathbf{n}\\,dS=0$$\n-   Tasks:\n    1.  Derive the corresponding local differential statement of mass conservation.\n    2.  Reduce the differential statement to a relation between the material derivative of density and the velocity divergence.\n    3.  Determine the algebraic condition relating $a$, $b$, $c$, and $\\beta$ for the given $(\\rho, \\mathbf{u})$ pair to satisfy mass conservation.\n    4.  Determine the condition for the flow to be kinematically incompressible ($\\nabla\\cdot\\mathbf{u}=0$).\n    5.  Compute the material derivative $D\\rho/Dt$ implied by the given $\\rho$.\n\n### Step 2: Validate Using Extracted Givens\n\n-   **Scientifically Grounded:** The problem is firmly rooted in the fundamental principles of continuum mechanics, specifically the law of mass conservation (the continuity equation). The integral form provided is correct. The derivation of the differential form from the integral form is a standard and central procedure in fluid dynamics.\n-   **Well-Posed:** The problem is well-posed. It provides specific functional forms for the density and velocity fields and asks for the conditions under which they satisfy a fundamental physical law. The steps to follow are clearly outlined, leading to a unique and meaningful solution.\n-   **Objective:** The problem is stated in precise, objective mathematical language.\n-   **Completeness:** All necessary information (fields $\\rho$ and $\\mathbf{u}$, the governing integral equation) is provided.\n-   **No other flaws:** The problem is not trivial, unrealistic, or contradictory. The given fields, while simple, are valid mathematical constructs for illustrating the physical principles involved.\n\n### Step 3: Verdict and Action\n\nThe problem is valid. I will proceed with the solution.\n\nThe solution process involves three sequential parts as requested by the problem statement.\n\nFirst, we derive the local differential form of mass conservation from the given integral form. The integral form for a fixed control volume $V$ is:\n$$\\frac{d}{dt}\\int_{V}\\rho\\,dV+\\int_{\\partial V}\\rho\\,\\mathbf{u}\\cdot\\mathbf{n}\\,dS=0$$\nSince the control volume $V$ is fixed in space, the time derivative can be moved inside the volume integral, acting on the density field $\\rho(\\mathbf{x},t)$:\n$$\\int_{V}\\frac{\\partial\\rho}{\\partial t}\\,dV+\\int_{\\partial V}\\rho\\,\\mathbf{u}\\cdot\\mathbf{n}\\,dS=0$$\nThe second term is a surface integral of the mass flux, $\\rho\\mathbf{u}$, over the boundary $\\partial V$. We apply the divergence theorem (also known as Gauss's theorem) to convert this surface integral into a volume integral over $V$:\n$$\\int_{\\partial V}(\\rho\\mathbf{u})\\cdot\\mathbf{n}\\,dS = \\int_{V}\\nabla\\cdot(\\rho\\mathbf{u})\\,dV$$\nSubstituting this back into the conservation equation gives:\n$$\\int_{V}\\frac{\\partial\\rho}{\\partial t}\\,dV + \\int_{V}\\nabla\\cdot(\\rho\\mathbf{u})\\,dV = 0$$\nCombining the two volume integrals yields:\n$$\\int_{V}\\left(\\frac{\\partial\\rho}{\\partial t} + \\nabla\\cdot(\\rho\\mathbf{u})\\right)\\,dV = 0$$\nThis equation must hold for any arbitrary control volume $V$. This is only possible if the integrand is identically zero everywhere. This gives the local differential form of the mass conservation equation, also known as the continuity equation:\n$$\\frac{\\partial\\rho}{\\partial t} + \\nabla\\cdot(\\rho\\mathbf{u}) = 0$$\nNext, we reduce this to a relation involving the material derivative. The second term, the divergence of the mass flux, can be expanded using the product rule for divergence: $\\nabla\\cdot(f\\mathbf{A}) = (\\nabla f)\\cdot\\mathbf{A} + f(\\nabla\\cdot\\mathbf{A})$. Applying this with $f=\\rho$ and $\\mathbf{A}=\\mathbf{u}$:\n$$\\nabla\\cdot(\\rho\\mathbf{u}) = (\\nabla\\rho)\\cdot\\mathbf{u} + \\rho(\\nabla\\cdot\\mathbf{u})$$\nSubstituting this expansion into the continuity equation:\n$$\\frac{\\partial\\rho}{\\partial t} + (\\nabla\\rho)\\cdot\\mathbf{u} + \\rho(\\nabla\\cdot\\mathbf{u}) = 0$$\nThe material derivative (or total derivative) of the density, denoted $\\frac{D\\rho}{Dt}$, is defined as the rate of change of density for a fluid particle moving with the flow. It is given by:\n$$\\frac{D\\rho}{Dt} \\equiv \\frac{\\partial\\rho}{\\partial t} + \\mathbf{u}\\cdot\\nabla\\rho$$\nRecognizing the first two terms in our expanded continuity equation as the material derivative, we can write the equation as:\n$$\\frac{D\\rho}{Dt} + \\rho(\\nabla\\cdot\\mathbf{u}) = 0$$\nThis is the desired relation between the material derivative of density and the velocity divergence.\n\nNow, we use this fundamental base to analyze the given fields. The density field is $\\rho(\\mathbf{x},t) = \\rho_0 \\exp(-\\beta t)$, and the velocity field is $\\mathbf{u}(\\mathbf{x},t) = (ax, by, cz)$. We must determine the condition for these fields to satisfy mass conservation. We can substitute them into the differential continuity equation $\\frac{\\partial\\rho}{\\partial t} + \\nabla\\cdot(\\rho\\mathbf{u}) = 0$.\n\nFirst, we compute the partial time derivative of the density:\n$$\\frac{\\partial\\rho}{\\partial t} = \\frac{\\partial}{\\partial t}\\left(\\rho_0 \\exp(-\\beta t)\\right) = -\\beta \\rho_0 \\exp(-\\beta t) = -\\beta \\rho$$\nNext, we compute the divergence of the mass flux, $\\nabla\\cdot(\\rho\\mathbf{u})$. The mass flux vector is $\\rho\\mathbf{u} = (\\rho_0 \\exp(-\\beta t)ax, \\rho_0 \\exp(-\\beta t)by, \\rho_0 \\exp(-\\beta t)cz)$.\n$$\\nabla\\cdot(\\rho\\mathbf{u}) = \\frac{\\partial}{\\partial x}(\\rho_0 \\exp(-\\beta t)ax) + \\frac{\\partial}{\\partial y}(\\rho_0 \\exp(-\\beta t)by) + \\frac{\\partial}{\\partial z}(\\rho_0 \\exp(-\\beta t)cz)$$\nSince $\\rho$ is a function of $t$ only, it is treated as a constant with respect to the spatial derivatives:\n$$\\nabla\\cdot(\\rho\\mathbf{u}) = \\rho_0 \\exp(-\\beta t) \\left(\\frac{\\partial(ax)}{\\partial x} + \\frac{\\partial(by)}{\\partial y} + \\frac{\\partial(cz)}{\\partial z}\\right) = \\rho (a+b+c)$$\nSubstituting $\\frac{\\partial\\rho}{\\partial t}$ and $\\nabla\\cdot(\\rho\\mathbf{u})$ into the continuity equation:\n$$-\\beta\\rho + \\rho(a+b+c) = 0$$\nWe can factor out $\\rho$:\n$$\\rho(-\\beta + a + b + c) = 0$$\nSince $\\rho_0 > 0$, the density $\\rho = \\rho_0 \\exp(-\\beta t)$ is never zero. Therefore, for the equation to hold, the term in the parentheses must be zero. This gives the algebraic condition relating the parameters:\n$$a+b+c = \\beta$$\n\nNext, we determine the condition for the flow to be kinematically incompressible. A flow is defined as kinematically incompressible if its velocity field is divergence-free, i.e., $\\nabla\\cdot\\mathbf{u}=0$. For the given velocity field $\\mathbf{u} = (ax, by, cz)$, the divergence is:\n$$\\nabla\\cdot\\mathbf{u} = \\frac{\\partial(ax)}{\\partial x} + \\frac{\\partial(by)}{\\partial y} + \\frac{\\partial(cz)}{\\partial z} = a+b+c$$\nThus, the condition for kinematic incompressibility is:\n$$a+b+c = 0$$\n\nFinally, we compute the material derivative $\\frac{D\\rho}{Dt}$. We can use the relation derived earlier: $\\frac{D\\rho}{Dt} = -\\rho(\\nabla\\cdot\\mathbf{u})$. Substituting the expressions for $\\rho$ and $\\nabla\\cdot\\mathbf{u}$:\n$$\\frac{D\\rho}{Dt} = -(\\rho_0 \\exp(-\\beta t))(a+b+c)$$\nFor the flow to be physically valid, it must satisfy mass conservation, which requires $a+b+c=\\beta$. Substituting this condition into the expression for the material derivative:\n$$\\frac{D\\rho}{Dt} = -(\\rho_0 \\exp(-\\beta t))(\\beta) = -\\beta\\rho_0\\exp(-\\beta t)$$\nAlternatively, we can compute it directly from the definition $\\frac{D\\rho}{Dt} = \\frac{\\partial\\rho}{\\partial t} + \\mathbf{u}\\cdot\\nabla\\rho$. We have already found $\\frac{\\partial\\rho}{\\partial t} = -\\beta\\rho_0\\exp(-\\beta t)$. The gradient of the density is:\n$$\\nabla\\rho = \\left(\\frac{\\partial\\rho}{\\partial x}, \\frac{\\partial\\rho}{\\partial y}, \\frac{\\partial\\rho}{\\partial z}\\right)$$\nSince $\\rho$ depends only on $t$, its spatial derivatives are zero. Thus, $\\nabla\\rho = \\mathbf{0}$.\nThe advective term is $\\mathbf{u}\\cdot\\nabla\\rho = (ax, by, cz) \\cdot (0,0,0) = 0$.\nTherefore, the material derivative is:\n$$\\frac{D\\rho}{Dt} = \\frac{\\partial\\rho}{\\partial t} + 0 = -\\beta\\rho_0\\exp(-\\beta t)$$\nBoth methods yield the same result, confirming the consistency of the framework.\n\nThe final results are, in order:\n(i) The algebraic condition for mass conservation: $a+b+c = \\beta$.\n(ii) The condition for kinematic incompressibility: $a+b+c = 0$.\n(iii) The expression for the material derivative $D\\rho/Dt$: $-\\beta\\rho_0\\exp(-\\beta t)$.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\na+b+c=\\beta & a+b+c=0 & -\\beta \\rho_{0} \\exp(-\\beta t)\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "The Finite Volume Method (FVM) is built upon the integral form of conservation laws, ensuring that quantities like mass are conserved at the discrete level, up to machine precision. This exercise provides a concrete demonstration of this crucial property on a simple periodic computational grid . By manually calculating and summing the mass fluxes across all control volume faces, you will directly observe the flux cancellation that guarantees global mass conservation in a closed domain, a foundational concept for building robust CFD solvers.",
            "id": "3335691",
            "problem": "Consider a two-dimensional periodic domain $\\Omega = [0,1]\\times[0,1]$ with unit out-of-plane thickness $h=1\\,\\mathrm{m}$. The domain is partitioned into a uniform $2\\times 2$ mesh of control volumes for use with the Finite Volume Method (FVM), a standard approach in Computational Fluid Dynamics (CFD). Each control volume thus has side lengths $\\Delta x=\\Delta y = 0.5\\,\\mathrm{m}$ and face area $A_{\\mathrm{face}}=\\Delta \\ell \\, h$ with $\\Delta \\ell\\in\\{\\Delta x,\\Delta y\\}$. The flow is periodic on $\\partial\\Omega$, meaning that opposite domain boundaries are identified; physically, this creates a toroidal topology with no net boundary.\n\nThe density and velocity fields are smooth and periodic:\n$$\n\\rho(x,y) \\;=\\; \\rho_{0} + \\alpha \\cos(2\\pi x)\\cos(2\\pi y),\\quad\nu(x,y) \\;=\\; U_{0}\\,\\sin(2\\pi y),\\quad\nv(x,y) \\;=\\; V_{0}\\,\\sin(2\\pi x),\n$$\nwith constants $\\rho_{0}=1.2\\,\\mathrm{kg/m^{3}}$, $\\alpha=0.8\\,\\mathrm{kg/m^{3}}$, $U_{0}=3\\,\\mathrm{m/s}$, and $V_{0}=2\\,\\mathrm{m/s}$.\n\nStarting only from the integral form of mass conservation over a control volume $V$,\n$$\n\\frac{\\mathrm{d}}{\\mathrm{d}t}\\int_{V}\\rho\\,\\mathrm{d}V + \\oint_{\\partial V} \\rho \\,\\boldsymbol{u}\\cdot \\boldsymbol{n}\\,\\mathrm{d}A \\;=\\; 0,\n$$\nconstruct the discrete FVM balance in which the surface integral is approximated by a sum over the faces using midpoint (face-center) quadrature:\n$$\n\\sum_{f\\in \\partial V} \\rho(\\boldsymbol{x}_{f})\\,\\boldsymbol{u}(\\boldsymbol{x}_{f})\\cdot \\boldsymbol{n}_{f}\\,A_{f}.\n$$\nThen, on the $2\\times 2$ mesh with periodic boundaries, define the global face-flux sum $S$ as the sum of these discrete face-normal mass fluxes over all control-volume faces with outward normals taken with respect to each control volume. Evaluate $S$ explicitly by computing the contributions at all distinct face-center quadrature points implied by the mesh and the periodic boundary identification. Use the given fields and constants, and take each face area as $A_{f}=\\Delta \\ell \\, h$ with $\\Delta \\ell=\\Delta x$ or $\\Delta y$ as appropriate.\n\nState the final numerical value of $S$ in kilograms per second. Give an exact value; no rounding is required.",
            "solution": "The problem requires the evaluation of a global sum of discrete mass fluxes over all faces of a partitioned domain in a computational fluid dynamics context. Before proceeding to the solution, a validation of the problem statement is mandatory.\n\n### Step 1: Extract Givens\n-   **Domain:** A two-dimensional periodic domain $\\Omega = [0,1]\\times[0,1]$ with unit out-of-plane thickness $h=1\\,\\mathrm{m}$.\n-   **Mesh:** A uniform $2\\times 2$ mesh of control volumes (CVs).\n-   **CV Dimensions:** Side lengths $\\Delta x = \\Delta y = 0.5\\,\\mathrm{m}$.\n-   **Face Area:** $A_{\\mathrm{face}}=\\Delta \\ell \\, h$ with $\\Delta \\ell\\in\\{\\Delta x,\\Delta y\\}$.\n-   **Boundary Conditions:** The flow is periodic on $\\partial\\Omega$.\n-   **Density Field:** $\\rho(x,y) = \\rho_{0} + \\alpha \\cos(2\\pi x)\\cos(2\\pi y)$, with $\\rho_{0}=1.2\\,\\mathrm{kg/m^{3}}$ and $\\alpha=0.8\\,\\mathrm{kg/m^{3}}$.\n-   **Velocity Field:** $\\boldsymbol{u}(x,y) = (u(x,y), v(x,y))$, with $u(x,y) = U_{0}\\,\\sin(2\\pi y)$ and $v(x,y) = V_{0}\\,\\sin(2\\pi x)$. The constants are $U_{0}=3\\,\\mathrm{m/s}$ and $V_{0}=2\\,\\mathrm{m/s}$.\n-   **Integral Mass Conservation:** $\\frac{\\mathrm{d}}{\\mathrm{d}t}\\int_{V}\\rho\\,\\mathrm{d}V + \\oint_{\\partial V} \\rho \\,\\boldsymbol{u}\\cdot \\boldsymbol{n}\\,\\mathrm{d}A = 0$.\n-   **Discrete Face Flux:** The surface integral is approximated using midpoint quadrature as $\\sum_{f\\in \\partial V} \\rho(\\boldsymbol{x}_{f})\\,\\boldsymbol{u}(\\boldsymbol{x}_{f})\\cdot \\boldsymbol{n}_{f}\\,A_{f}$.\n-   **Quantity to Compute:** The global face-flux sum $S$, defined as the sum of the discrete face-normal mass fluxes over all control-volume faces, where the normal $\\boldsymbol{n}_{f}$ is the outward normal for each respective control volume.\n\n### Step 2: Validate Using Extracted Givens\n-   **Scientifically Grounded:** The problem is based on the fundamental principle of mass conservation and its discretization using the Finite Volume Method (FVM), a standard and well-established technique in computational fluid dynamics. The integral form of the conservation law and its numerical approximation are correctly stated. The use of periodic boundary conditions and smooth analytical fields is a common and valid setup for verifying numerical schemes. The problem is scientifically sound.\n-   **Well-Posed:** All necessary information—domain geometry, mesh structure, physical constants, analytical forms for fields, and the precise definition of the quantity to be calculated ($S$)—is provided. The task is a direct, deterministic calculation. The problem is well-posed.\n-   **Objective:** The problem is formulated using precise mathematical and physical terminology. All quantities are defined unambiguously. There are no subjective or opinion-based statements.\n\n### Step 3: Verdict and Action\nThe problem is valid. A complete, reasoned solution will be provided.\n\n### Solution\nThe problem asks for the evaluation of the global face-flux sum, $S$. This sum is defined as the total sum of discrete mass fluxes over all faces of all control volumes in the mesh, where for each control volume, the outward-pointing normal is used. Let the set of control volumes be $\\{\\mathrm{CV}_i\\}_{i=1}^4$. The sum $S$ is given by:\n$$\nS = \\sum_{i=1}^4 \\left( \\sum_{f \\in \\partial \\mathrm{CV}_i} \\rho(\\boldsymbol{x}_f) \\boldsymbol{u}(\\boldsymbol{x}_f) \\cdot \\boldsymbol{n}_f A_f \\right)\n$$\nwhere $\\boldsymbol{x}_f$ is the center of face $f$, $A_f$ is its area, and $\\boldsymbol{n}_f$ is the outward normal with respect to $\\mathrm{CV}_i$.\n\nThis sum can be regrouped by unique geometric faces in the mesh. For any interior face shared by two adjacent control volumes, say $\\mathrm{CV}_i$ and $\\mathrm{CV}_j$, the face is counted twice in the global sum $S$. Let the face be $f_{ij}$. The outward normal for $\\mathrm{CV}_i$ is $\\boldsymbol{n}_{ij}$, and the outward normal for $\\mathrm{CV}_j$ is $\\boldsymbol{n}_{ji}$. By definition, $\\boldsymbol{n}_{ji} = -\\boldsymbol{n}_{ij}$. The face center $\\boldsymbol{x}_{f_{ij}}$ and area $A_{f_{ij}}$ are the same for both. Therefore, the combined contribution to $S$ from this face is:\n$$\n\\rho(\\boldsymbol{x}_{f_{ij}}) \\boldsymbol{u}(\\boldsymbol{x}_{f_{ij}}) \\cdot \\boldsymbol{n}_{ij} A_{f_{ij}} + \\rho(\\boldsymbol{x}_{f_{ij}}) \\boldsymbol{u}(\\boldsymbol{x}_{f_{ij}}) \\cdot \\boldsymbol{n}_{ji} A_{f_{ij}} = \\rho(\\boldsymbol{x}_{f_{ij}}) \\boldsymbol{u}(\\boldsymbol{x}_{f_{ij}}) \\cdot \\boldsymbol{n}_{ij} A_{f_{ij}} - \\rho(\\boldsymbol{x}_{f_{ij}}) \\boldsymbol{u}(\\boldsymbol{x}_{f_{ij}}) \\cdot \\boldsymbol{n}_{ij} A_{f_{ij}} = 0\n$$\nThis cancellation occurs for every interior face.\n\nFor faces on the domain boundary $\\partial\\Omega$, the periodic boundary conditions imply that a face on one side of the domain is identified with a face on the opposite side. For example, a face on the boundary $x=1$ is effectively adjacent to a face on the boundary $x=0$. The outward normal for a CV at $x=1$ is in the positive $x$-direction, while the outward normal for the corresponding periodic CV at $x=0$ is in the negative $x$-direction. Since the fields $\\rho$ and $\\boldsymbol{u}$ are periodic, their values at corresponding points on opposite boundaries are identical. Thus, the flux contributions from these periodic face pairs also cancel each other out.\n\nAs the domain is closed (a torus, due to periodicity) and has no net boundary, every face contribution is paired with an equal and opposite contribution. Consequently, the global sum $S$ must be exactly zero. This is a fundamental property of conservative discretizations on closed domains.\n\nTo fulfill the problem's requirement for an explicit evaluation, we will now compute the flux at each distinct face center.\nThe domain $\\Omega=[0,1]\\times[0,1]$ is divided into four control volumes:\n$\\mathrm{CV}_1: [0, 0.5]\\times[0, 0.5]$, $\\mathrm{CV}_2: [0.5, 1]\\times[0, 0.5]$, $\\mathrm{CV}_3: [0, 0.5]\\times[0.5, 1]$, $\\mathrm{CV}_4: [0.5, 1]\\times[0.5, 1]$.\nFace areas are $A_x = \\Delta y \\cdot h = 0.5 \\cdot 1 = 0.5\\,\\mathrm{m^2}$ for vertical faces and $A_y = \\Delta x \\cdot h = 0.5 \\cdot 1 = 0.5\\,\\mathrm{m^2}$ for horizontal faces.\n\nThe face-center coordinates for the midpoint quadrature are:\n-   Vertical faces: $(0.5, 0.25)$, $(0.5, 0.75)$, $(0, 0.25)$ (identified with $(1, 0.25)$), and $(0, 0.75)$ (identified with $(1, 0.75)$).\n-   Horizontal faces: $(0.25, 0.5)$, $(0.75, 0.5)$, $(0.25, 0)$ (identified with $(0.25, 1)$), and $(0.75, 0)$ (identified with $(0.75, 1)$).\n\nAt any of these face centers $(x_f, y_f)$, either $x_f$ or $y_f$ is a multiple of $0.25$ but not $0.5$. Thus, either $2\\pi x_f$ or $2\\pi y_f$ is an odd multiple of $\\pi/2$. This means $\\cos(2\\pi x_f)=0$ or $\\cos(2\\pi y_f)=0$. In both cases, the product $\\cos(2\\pi x_f)\\cos(2\\pi y_f)$ is zero.\nTherefore, at all face centers, the density evaluates to:\n$$\n\\rho(x_f, y_f) = \\rho_0 + \\alpha \\cdot 0 = \\rho_0 = 1.2\\,\\mathrm{kg/m^3}\n$$\n\nLet's compute the fluxes. The mass flux across a face is $\\dot{m}_f = (\\rho \\boldsymbol{u} \\cdot \\boldsymbol{n} A)_f$.\n1.  **Interior vertical face at $x=0.5$ between $y=0$ and $y=0.5$**: Center $\\boldsymbol{x}_f=(0.5, 0.25)$.\n    $u(0.5, 0.25) = U_0 \\sin(2\\pi \\cdot 0.25) = 3 \\sin(\\pi/2) = 3$.\n    -   From $\\mathrm{CV}_1$ (right face, $\\boldsymbol{n}=(1,0)$): $\\dot{m}_1 = (1.2)(3)(1)(0.5) = 1.8\\,\\mathrm{kg/s}$.\n    -   From $\\mathrm{CV}_2$ (left face, $\\boldsymbol{n}=(-1,0)$): $\\dot{m}_2 = (1.2)(3)(-1)(0.5) = -1.8\\,\\mathrm{kg/s}$. Sum: $0$.\n\n2.  **Interior vertical face at $x=0.5$ between $y=0.5$ and $y=1$**: Center $\\boldsymbol{x}_f=(0.5, 0.75)$.\n    $u(0.5, 0.75) = U_0 \\sin(2\\pi \\cdot 0.75) = 3 \\sin(3\\pi/2) = -3$.\n    -   From $\\mathrm{CV}_3$ (right face, $\\boldsymbol{n}=(1,0)$): $\\dot{m}_3 = (1.2)(-3)(1)(0.5) = -1.8\\,\\mathrm{kg/s}$.\n    -   From $\\mathrm{CV}_4$ (left face, $\\boldsymbol{n}=(-1,0)$): $\\dot{m}_4 = (1.2)(-3)(-1)(0.5) = 1.8\\,\\mathrm{kg/s}$. Sum: $0$.\n\n3.  **Interior horizontal face at $y=0.5$ between $x=0$ and $x=0.5$**: Center $\\boldsymbol{x}_f=(0.25, 0.5)$.\n    $v(0.25, 0.5) = V_0 \\sin(2\\pi \\cdot 0.25) = 2 \\sin(\\pi/2) = 2$.\n    -   From $\\mathrm{CV}_1$ (top face, $\\boldsymbol{n}=(0,1)$): $\\dot{m}_5 = (1.2)(2)(1)(0.5) = 1.2\\,\\mathrm{kg/s}$.\n    -   From $\\mathrm{CV}_3$ (bottom face, $\\boldsymbol{n}=(0,-1)$): $\\dot{m}_6 = (1.2)(2)(-1)(0.5) = -1.2\\,\\mathrm{kg/s}$. Sum: $0$.\n\n4.  **Interior horizontal face at $y=0.5$ between $x=0.5$ and $x=1$**: Center $\\boldsymbol{x}_f=(0.75, 0.5)$.\n    $v(0.75, 0.5) = V_0 \\sin(2\\pi \\cdot 0.75) = 2 \\sin(3\\pi/2) = -2$.\n    -   From $\\mathrm{CV}_2$ (top face, $\\boldsymbol{n}=(0,1)$): $\\dot{m}_7 = (1.2)(-2)(1)(0.5) = -1.2\\,\\mathrm{kg/s}$.\n    -   From $\\mathrm{CV}_4$ (bottom face, $\\boldsymbol{n}=(0,-1)$): $\\dot{m}_8 = (1.2)(-2)(-1)(0.5) = 1.2\\,\\mathrm{kg/s}$. Sum: $0$.\n\nThe contributions from all interior faces sum to zero. Now for the periodic boundary faces:\n5.  **Periodic vertical face at $x=0$ and $x=1$ (lower half)**: Center $\\boldsymbol{x}_f=(0, 0.25)$ or $(1, 0.25)$.\n    $u(0, 0.25) = u(1, 0.25) = U_0 \\sin(2\\pi \\cdot 0.25) = 3$.\n    -   From $\\mathrm{CV}_1$ (left face, $\\boldsymbol{n}=(-1,0)$): $\\dot{m}_9 = (1.2)(3)(-1)(0.5) = -1.8\\,\\mathrm{kg/s}$.\n    -   From $\\mathrm{CV}_2$ (right face, $\\boldsymbol{n}=(1,0)$): $\\dot{m}_{10} = (1.2)(3)(1)(0.5) = 1.8\\,\\mathrm{kg/s}$. Sum: $0$.\n\n6.  **Periodic vertical face at $x=0$ and $x=1$ (upper half)**: Center $\\boldsymbol{x}_f=(0, 0.75)$ or $(1, 0.75)$.\n    $u(0, 0.75) = u(1, 0.75) = U_0 \\sin(2\\pi \\cdot 0.75) = -3$.\n    -   From $\\mathrm{CV}_3$ (left face, $\\boldsymbol{n}=(-1,0)$): $\\dot{m}_{11} = (1.2)(-3)(-1)(0.5) = 1.8\\,\\mathrm{kg/s}$.\n    -   From $\\mathrm{CV}_4$ (right face, $\\boldsymbol{n}=(1,0)$): $\\dot{m}_{12} = (1.2)(-3)(1)(0.5) = -1.8\\,\\mathrm{kg/s}$. Sum: $0$.\n\n7.  **Periodic horizontal face at $y=0$ and $y=1$ (left half)**: Center $\\boldsymbol{x}_f=(0.25, 0)$ or $(0.25, 1)$.\n    $v(0.25, 0) = v(0.25, 1) = V_0 \\sin(2\\pi \\cdot 0.25) = 2$.\n    -   From $\\mathrm{CV}_1$ (bottom face, $\\boldsymbol{n}=(0,-1)$): $\\dot{m}_{13} = (1.2)(2)(-1)(0.5) = -1.2\\,\\mathrm{kg/s}$.\n    -   From $\\mathrm{CV}_3$ (top face, $\\boldsymbol{n}=(0,1)$): $\\dot{m}_{14} = (1.2)(2)(1)(0.5) = 1.2\\,\\mathrm{kg/s}$. Sum: $0$.\n\n8.  **Periodic horizontal face at $y=0$ and $y=1$ (right half)**: Center $\\boldsymbol{x}_f=(0.75, 0)$ or $(0.75, 1)$.\n    $v(0.75, 0) = v(0.75, 1) = V_0 \\sin(2\\pi \\cdot 0.75) = -2$.\n    -   From $\\mathrm{CV}_2$ (bottom face, $\\boldsymbol{n}=(0,-1)$): $\\dot{m}_{15} = (1.2)(-2)(-1)(0.5) = 1.2\\,\\mathrm{kg/s}$.\n    -   From $\\mathrm{CV}_4$ (top face, $\\boldsymbol{n}=(0,1)$): $\\dot{m}_{16} = (1.2)(-2)(1)(0.5) = -1.2\\,\\mathrm{kg/s}$. Sum: $0$.\n\nThe global sum $S$ is the sum of all $16$ flux contributions:\n$$\nS = \\sum_{k=1}^{16} \\dot{m}_k = (1.8-1.8) + (-1.8+1.8) + (1.2-1.2) + (-1.2+1.2) + (-1.8+1.8) + (1.8-1.8) + (-1.2+1.2) + (1.2-1.2) = 0\n$$\nThe explicit calculation confirms the theoretical result. The total sum of discrete fluxes over all faces of all control volumes in the closed periodic domain is zero.",
            "answer": "$$\\boxed{0}$$"
        },
        {
            "introduction": "In practical CFD, numerical schemes inevitably introduce errors that can lead to a \"drift\" in globally conserved quantities. A critical task for any CFD practitioner is to perform a mass balance audit to quantify this error and validate the simulation's integrity. This problem places you in the role of an engineer analyzing solver output . Using the integral conservation law as an accounting tool, you will calculate the cumulative mass balance error from reported boundary fluxes and density changes, assessing whether the simulation meets a specified accuracy tolerance.",
            "id": "3335728",
            "problem": "Consider an unsteady, compressible flow simulation through a fixed control volume bounded by two planar cross-sections, an inlet and an outlet, with outward unit normal to the control surface. The solver records time-integrated mass fluxes across each boundary over each time step for a total duration. The control volume has volume $V=3.000\\ \\mathrm{m}^{3}$. The volume-averaged density at the initial time is $\\bar{\\rho}(0)=1.200\\ \\mathrm{kg}\\ \\mathrm{m}^{-3}$ and at the final time is $\\bar{\\rho}(T)=1.250\\ \\mathrm{kg}\\ \\mathrm{m}^{-3}$. The total duration is $T=0.500\\ \\mathrm{s}$ with $5$ equal time steps of $\\Delta t=0.100\\ \\mathrm{s}$. For each time step $k=0,1,2,3,4$, the solver reports the following inlet and outlet time-integrated mass fluxes, denoted $G_{\\mathrm{in},k}$ and $G_{\\mathrm{out},k}$, respectively, where each $G$ has units of kilograms and is defined as the time integral over the step of the surface integral of $\\rho\\,\\boldsymbol{u}\\cdot\\boldsymbol{n}$ across the corresponding boundary, with the convention that $G_{\\mathrm{in},k}>0$ for inflow directed into the control volume and $G_{\\mathrm{out},k}>0$ for outflow directed out of the control volume:\n- $G_{\\mathrm{in},0}=2.400\\ \\mathrm{kg}$, $G_{\\mathrm{out},0}=2.370\\ \\mathrm{kg}$.\n- $G_{\\mathrm{in},1}=2.520\\ \\mathrm{kg}$, $G_{\\mathrm{out},1}=2.430\\ \\mathrm{kg}$.\n- $G_{\\mathrm{in},2}=2.430\\ \\mathrm{kg}$, $G_{\\mathrm{out},2}=2.410\\ \\mathrm{kg}$.\n- $G_{\\mathrm{in},3}=2.460\\ \\mathrm{kg}$, $G_{\\mathrm{out},3}=2.490\\ \\mathrm{kg}$.\n- $G_{\\mathrm{in},4}=2.508\\ \\mathrm{kg}$, $G_{\\mathrm{out},4}=2.471\\ \\mathrm{kg}$.\n\nUsing only the integral form of mass conservation for a fixed control volume, compute the cumulative mass balance error over $[0,T]$, defined as the absolute value of the difference between the net accumulation in the control volume and the net inflow minus outflow, normalized by the total processed mass $M_{\\mathrm{proc}}=G_{\\mathrm{in,tot}}+G_{\\mathrm{out,tot}}$, where $G_{\\mathrm{in,tot}}=\\sum_{k=0}^{4}G_{\\mathrm{in},k}$ and $G_{\\mathrm{out,tot}}=\\sum_{k=0}^{4}G_{\\mathrm{out},k}$. The solver’s documentation states that for this configuration the normalized cumulative mass balance error should be less than $2.0\\times 10^{-4}$. Report the dimensionless normalized error $\\varepsilon$ as a decimal. Round your answer to four significant figures.",
            "solution": "The problem requires the calculation of the cumulative mass balance error for a compressible flow simulation over a fixed control volume. This is achieved by applying the integral form of the mass conservation equation.\n\nThe integral form of the mass conservation equation for a fixed control volume $V$ with control surface $S$ is:\n$$\n\\frac{d}{dt} \\int_{V} \\rho \\, dV + \\oint_{S} \\rho (\\boldsymbol{u} \\cdot \\boldsymbol{n}) \\, dS = 0\n$$\nwhere $\\rho$ is the fluid density, $\\boldsymbol{u}$ is the velocity vector, and $\\boldsymbol{n}$ is the outward-pointing unit normal vector on the control surface $S$.\n\nTo find the cumulative change over the total duration $T$, we integrate this equation with respect to time from $t=0$ to $t=T$:\n$$\n\\int_{0}^{T} \\left( \\frac{d}{dt} \\int_{V} \\rho \\, dV \\right) dt + \\int_{0}^{T} \\left( \\oint_{S} \\rho (\\boldsymbol{u} \\cdot \\boldsymbol{n}) \\, dS \\right) dt = 0\n$$\nApplying the fundamental theorem of calculus to the first term yields the net change in mass within the control volume, which we denote as the net accumulation, $\\Delta M_{CV}$:\n$$\n\\Delta M_{CV} = \\left[ \\int_{V} \\rho \\, dV \\right]_{0}^{T} = \\int_{V} \\rho(T) \\, dV - \\int_{V} \\rho(0) \\, dV\n$$\nThe second term represents the total net mass that has flowed out of the control volume over the duration $T$. The problem provides this information as a series of time-integrated fluxes for an inlet and an outlet. With the given convention ($G_{\\mathrm{in}}>0$ for inflow, $G_{\\mathrm{out}}>0$ for outflow), the total net mass flowing into the control volume, $M_{\\mathrm{net,in}}$, is the sum of all inflows minus the sum of all outflows. The conservation equation can thus be written as:\n$$\n\\Delta M_{CV} - M_{\\mathrm{net,in}} = 0\n$$\nIn a numerical simulation, there will be some error, so this equality will not be exact. The mass balance residual, $E_{\\mathrm{mass}}$, is defined as the departure from zero:\n$$\nE_{\\mathrm{mass}} = \\Delta M_{CV} - M_{\\mathrm{net,in}}\n$$\n\nFirst, we calculate the net accumulation of mass in the control volume, $\\Delta M_{CV}$. The problem provides the volume-averaged density $\\bar{\\rho}(t) = \\frac{1}{V}\\int_V \\rho(t) dV$. Therefore, the mass in the volume at time $t$ is $M(t) = \\bar{\\rho}(t)V$.\nGiven:\n- Control volume $V = 3.000\\ \\mathrm{m}^3$.\n- Initial average density $\\bar{\\rho}(0) = 1.200\\ \\mathrm{kg}\\ \\mathrm{m}^{-3}$.\n- Final average density $\\bar{\\rho}(T) = 1.250\\ \\mathrm{kg}\\ \\mathrm{m}^{-3}$.\nThe net accumulation is:\n$$\n\\Delta M_{CV} = M(T) - M(0) = \\bar{\\rho}(T)V - \\bar{\\rho}(0)V = (\\bar{\\rho}(T) - \\bar{\\rho}(0))V\n$$\n$$\n\\Delta M_{CV} = (1.250\\ \\mathrm{kg}\\ \\mathrm{m}^{-3} - 1.200\\ \\mathrm{kg}\\ \\mathrm{m}^{-3}) \\times 3.000\\ \\mathrm{m}^3 = 0.050\\ \\mathrm{kg}\\ \\mathrm{m}^{-3} \\times 3.000\\ \\mathrm{m}^3 = 0.150\\ \\mathrm{kg}\n$$\n\nNext, we calculate the net mass that has flowed into the control volume, $M_{\\mathrm{net,in}}$, based on the solver's reported boundary fluxes. This is the total inflow minus the total outflow.\nTotal inflow, $G_{\\mathrm{in,tot}}$, is the sum of inflows over all $5$ time steps:\n$$\nG_{\\mathrm{in,tot}} = \\sum_{k=0}^{4} G_{\\mathrm{in},k} = 2.400 + 2.520 + 2.430 + 2.460 + 2.508 = 12.318\\ \\mathrm{kg}\n$$\nTotal outflow, $G_{\\mathrm{out,tot}}$, is the sum of outflows over all $5$ time steps:\n$$\nG_{\\mathrm{out,tot}} = \\sum_{k=0}^{4} G_{\\mathrm{out},k} = 2.370 + 2.430 + 2.410 + 2.490 + 2.471 = 12.171\\ \\mathrm{kg}\n$$\nThe net mass inflow is:\n$$\nM_{\\mathrm{net,in}} = G_{\\mathrm{in,tot}} - G_{\\mathrm{out,tot}} = 12.318\\ \\mathrm{kg} - 12.171\\ \\mathrm{kg} = 0.147\\ \\mathrm{kg}\n$$\n\nNow we compute the mass balance residual (imbalance), $E_{\\mathrm{mass}}$:\n$$\nE_{\\mathrm{mass}} = \\Delta M_{CV} - M_{\\mathrm{net,in}} = 0.150\\ \\mathrm{kg} - 0.147\\ \\mathrm{kg} = 0.003\\ \\mathrm{kg}\n$$\n\nThe problem asks for this error to be normalized by the total processed mass, $M_{\\mathrm{proc}}$, defined as $M_{\\mathrm{proc}} = G_{\\mathrm{in,tot}} + G_{\\mathrm{out,tot}}$.\n$$\nM_{\\mathrm{proc}} = 12.318\\ \\mathrm{kg} + 12.171\\ \\mathrm{kg} = 24.489\\ \\mathrm{kg}\n$$\nThe normalized cumulative mass balance error, $\\varepsilon$, is the absolute value of the residual divided by the total processed mass:\n$$\n\\varepsilon = \\frac{|E_{\\mathrm{mass}}|}{M_{\\mathrm{proc}}} = \\frac{|0.003\\ \\mathrm{kg}|}{24.489\\ \\mathrm{kg}}\n$$\n$$\n\\varepsilon \\approx 0.000122503981\n$$\nThe problem requires the answer rounded to four significant figures. The first four significant figures are $1$, $2$, $2$, and $5$. The fifth significant digit is $0$, so we do not round up.\n$$\n\\varepsilon \\approx 0.0001225\n$$\nIn standard scientific notation, this is $1.225 \\times 10^{-4}$.",
            "answer": "$$\\boxed{1.225 \\times 10^{-4}}$$"
        }
    ]
}