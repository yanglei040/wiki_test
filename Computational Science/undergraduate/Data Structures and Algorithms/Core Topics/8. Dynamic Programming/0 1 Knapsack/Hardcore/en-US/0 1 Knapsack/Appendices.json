{
    "hands_on_practices": [
        {
            "introduction": "A natural first impulse when approaching the 0/1 knapsack problem is to use a greedy strategy: repeatedly pick the item with the best value-to-weight ratio. While this approach is optimal for the *fractional* knapsack problem, it can lead to surprisingly poor results for the 0/1 version. This exercise challenges you to analyze several scenarios and identify the one that exposes the worst-case performance of this greedy heuristic , providing a powerful motivation for why more sophisticated methods like dynamic programming are essential.",
            "id": "3202339",
            "problem": "You are given the zero-one knapsack problem, where there is a set of items, each item $i$ has a positive integer weight $w_i$ and a positive integer value $v_i$, and a knapsack with capacity $C$. The goal is to choose a subset of items that maximizes the sum of values subject to the total weight not exceeding $C$. Consider the greedy-by-ratio heuristic that repeatedly selects the remaining item with maximum value-to-weight ratio $v_i / w_i$ that still fits, until no more items can be added. Using only the core definitions of the problem and the greedy selection rule, determine which of the following parameterized families of instances causes the greedy-by-ratio heuristic to have the worst possible asymptotic performance, in the sense that the ratio of the heuristicâ€™s objective value to the optimal objective value tends to $0$ as the parameter grows.\n\nEach option describes a family indexed by an integer parameter $m$ with capacity and items specified. In every option, all weights and values are integers.\n\nA. For each integer $m \\ge 2$: capacity $C = m$. Items:\n- Item $H$: weight $w_H = m$, value $v_H = 2m - 1$.\n- Item $D$: weight $w_D = 1$, value $v_D = 2$.\nNo other items.\n\nB. For each integer $m \\ge 2$: capacity $C = m$. Items:\n- $m$ items, each with weight $w = 1$ and value $v = 1$.\n- Item $H$: weight $w_H = m$, value $v_H = m - 1$.\nNo other items.\n\nC. For each integer $m \\ge 4$: capacity $C = m$. Items:\n- Item $H$: weight $w_H = m$, value $v_H = m$.\n- Item $D$: weight $w_D = \\lfloor m/2 \\rfloor + 1$, value $v_D = \\lfloor m/2 \\rfloor + 2$.\nNo other items.\n\nD. For each integer $m \\ge 3$: capacity $C = m$. Items:\n- Item $H$: weight $w_H = m - 1$, value $v_H = m$.\n- Item $S$: weight $w_S = 1$, value $v_S = 1$.\nNo other items.\n\nWhich option exhibits the worst possible asymptotic performance for the greedy-by-ratio heuristic as $m \\to \\infty$?",
            "solution": "The problem asks us to analyze the asymptotic performance of the greedy-by-ratio heuristic for the 0/1 knapsack problem on four different families of instances, parameterized by an integer $m$. The performance metric is the ratio of the value obtained by the greedy heuristic, $V_{greedy}$, to the value obtained by an optimal solution, $V_{optimal}$. We are looking for the family of instances where this ratio, $R(m) = V_{greedy} / V_{optimal}$, tends to $0$ as $m \\to \\infty$.\n\nLet's analyze each option.\n\n**A. For each integer $m \\ge 2$: capacity $C = m$.**\nItems:\n- Item $H$: weight $w_H = m$, value $v_H = 2m - 1$\n- Item $D$: weight $w_D = 1$, value $v_D = 2$\n\nFirst, we calculate the value-to-weight ratios:\n- Ratio for item $H$: $\\frac{v_H}{w_H} = \\frac{2m - 1}{m} = 2 - \\frac{1}{m}$\n- Ratio for item $D$: $\\frac{v_D}{w_D} = \\frac{2}{1} = 2$\n\nFor any $m \\ge 2$, we have $2 > 2 - \\frac{1}{m}$. Thus, item $D$ has a strictly higher ratio. The greedy heuristic selects item $D$, obtaining a value of $V_{greedy} = 2$. The remaining capacity is $m-1$, which is not enough to fit item $H$. The optimal solution is to take only item $H$, with a value of $V_{optimal} = 2m - 1$ (since $2m-1 > 2$ for $m \\ge 2$).\n\nThe performance ratio is $R_A(m) = \\frac{V_{greedy}}{V_{optimal}} = \\frac{2}{2m - 1}$.\nThe asymptotic performance is the limit of this ratio as $m \\to \\infty$:\n$$ \\lim_{m \\to \\infty} R_A(m) = \\lim_{m \\to \\infty} \\frac{2}{2m - 1} = 0 $$\nThe ratio tends to $0$. This family of instances exhibits the described worst-case asymptotic behavior.\n\n**B. For each integer $m \\ge 2$: capacity $C = m$.**\nItems:\n- $m$ items, each with weight $w = 1$ and value $v = 1$.\n- Item $H$: weight $w_H = m$, value $v_H = m - 1$.\n\nThe value-to-weight ratios are $1$ for the small items and $1 - \\frac{1}{m}$ for item $H$. The greedy heuristic selects the $m$ small items, filling the knapsack for a total value of $V_{greedy} = m$. This is also the optimal solution, as taking item $H$ would only yield a value of $m-1$. Thus, $V_{optimal} = m$.\n\nThe performance ratio is $R_B(m) = \\frac{m}{m} = 1$. This ratio does not tend to $0$.\n\n**C. For each integer $m \\ge 4$: capacity $C = m$.**\nItems:\n- Item $H$: weight $w_H = m$, value $v_H = m$.\n- Item $D$: weight $w_D = \\lfloor m/2 \\rfloor + 1$, value $v_D = \\lfloor m/2 \\rfloor + 2$.\n\nThe value-to-weight ratios are $1$ for item $H$ and $\\frac{\\lfloor m/2 \\rfloor + 2}{\\lfloor m/2 \\rfloor + 1} = 1 + \\frac{1}{\\lfloor m/2 \\rfloor + 1} > 1$ for item $D$. The greedy heuristic selects item $D$, yielding a value of $V_{greedy} = \\lfloor m/2 \\rfloor + 2$. The optimal solution is to take item $H$ for a value of $V_{optimal} = m$ (since $m \\ge \\lfloor m/2 \\rfloor + 2$ for $m \\ge 4$).\n\nThe performance ratio is $R_C(m) = \\frac{\\lfloor m/2 \\rfloor + 2}{m}$. As $m \\to \\infty$, this ratio tends to $\\frac{1}{2}$. This ratio does not tend to $0$.\n\n**D. For each integer $m \\ge 3$: capacity $C = m$.**\nItems:\n- Item $H$: weight $w_H = m - 1$, value $v_H = m$.\n- Item $S$: weight $w_S = 1$, value $v_S = 1$.\n\nThe value-to-weight ratios are $\\frac{m}{m-1} = 1 + \\frac{1}{m-1}$ for item $H$ and $1$ for item $S$. The greedy heuristic selects item $H$ first, then adds item $S$ into the remaining capacity of $1$. This packs all items, achieving a total value of $V_{greedy} = m+1$. This is also the optimal solution.\n\nThe performance ratio is $R_D(m) = \\frac{m+1}{m+1} = 1$. This ratio does not tend to $0$.\n\n**Conclusion**\nOnly the family of instances in option A causes the performance ratio of the greedy-by-ratio heuristic to tend to $0$ as the parameter $m$ grows. This represents the worst possible asymptotic performance as defined in the problem statement.",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "Having established that simple heuristics can fail, we now delve into the intricate nature of optimal solutions. The structure of an optimal packing can be highly sensitive to the available items, and what seems best locally may not be part of the global optimum. In this practice , you will analyze an instance where adding just one small item causes the optimal solution to shift dramatically, revealing the complex trade-offs that a correct algorithm must navigate.",
            "id": "3202249",
            "problem": "Consider the classical $0/1$ knapsack problem: given a set of items indexed by $i \\in \\{1, 2, \\dots, n\\}$, each with an integer weight $w_i$ and an integer value $v_i$, and a knapsack capacity $W$, choose a subset to maximize the total value subject to the total weight not exceeding $W$. Formally, choose binary decision variables $x_i \\in \\{0,1\\}$ to maximize $\\sum_{i=1}^{n} v_i x_i$ subject to $\\sum_{i=1}^{n} w_i x_i \\leq W$. A foundational solution approach uses Dynamic Programming (DP), where the value function for the first $i$ items and capacity $c$ satisfies the recurrence $F[i,c] = \\max\\{F[i-1,c], F[i-1, c - w_i] + v_i\\}$ for $c \\geq w_i$, and $F[i,c] = F[i-1,c]$ otherwise, with boundary condition $F[0,c] = 0$.\n\nDesign and analyze the following instance to demonstrate that adding one more item type with small weight but modest value can change the optimal solution from packing a few large-weight items to packing many small-weight items. Let the initial capacity be $W = 16$. The initial item set consists of two large items and seven small items:\n- Large items: $L_1$ with $(w, v) = (9, 18)$ and $L_2$ with $(w, v) = (7, 13)$.\n- Small items: $S_j$ for $j \\in \\{1, 2, \\dots, 7\\}$, each with $(w, v) = (2, 4)$.\n\nCompute the optimal total value, denoted $V_{\\text{before}}$, for this initial instance. Then augment the instance by adding one more item type $S_8$ with $(w, v) = (2, 4)$ (so there are now eight small items in total). Compute the optimal total value, denoted $V_{\\text{after}}$, for the augmented instance. Finally, provide the single real-valued number $V_{\\text{after}} - V_{\\text{before}}$ as your final answer. No rounding is required; provide the exact integer value as your final answer.",
            "solution": "The problem requires us to solve two instances of the 0/1 knapsack problem and find the difference in their optimal values. The capacity of the knapsack is $W=16$.\n\nThe items consist of two distinct large items, $L_1$ and $L_2$, and a set of identical small items, $S_j$. Since the number of large items is small ($2$), we can solve this problem by considering all possible combinations of including or excluding these large items. For each combination, we calculate the remaining capacity and fill it with the maximum possible number of small items.\n\n**Part 1: Initial Instance ($V_{\\text{before}}$)**\n\nThe item set consists of $L_1$ with $(w,v)=(9,18)$, $L_2$ with $(w,v)=(7,13)$, and $7$ small items $S_j$ with $(w,v)=(2,4)$. The total capacity is $W=16$.\n\nWe analyze the four mutually exclusive cases based on the selection of the large items:\n\n- **Case A: No large items are selected.**\n  The available capacity is $W = 16$. The small items each have a weight of $w_S = 2$. We have $7$ such items. The number of small items that can fit is $\\min(\\lfloor \\frac{16}{2} \\rfloor, 7) = \\min(8, 7) = 7$.\n  The total weight is $7 \\times 2 = 14 \\leq 16$.\n  The total value is $V_A = 7 \\times 4 = 28$.\n\n- **Case B: Only item $L_1$ is selected.**\n  The weight of $L_1$ is $w_{L_1} = 9$. The value is $v_{L_1} = 18$.\n  The remaining capacity is $W' = 16 - 9 = 7$.\n  The number of small items that can fit in the remaining capacity is $\\lfloor \\frac{7}{2} \\rfloor = 3$.\n  The total value is $V_B = v_{L_1} + 3 \\times v_S = 18 + 3 \\times 4 = 18 + 12 = 30$.\n  The total weight is $9 + 3 \\times 2 = 15 \\leq 16$.\n\n- **Case C: Only item $L_2$ is selected.**\n  The weight of $L_2$ is $w_{L_2} = 7$. The value is $v_{L_2} = 13$.\n  The remaining capacity is $W' = 16 - 7 = 9$.\n  The number of small items that can fit is $\\lfloor \\frac{9}{2} \\rfloor = 4$.\n  The total value is $V_C = v_{L_2} + 4 \\times v_S = 13 + 4 \\times 4 = 13 + 16 = 29$.\n  The total weight is $7 + 4 \\times 2 = 15 \\leq 16$.\n\n- **Case D: Both items $L_1$ and $L_2$ are selected.**\n  The combined weight is $w_{L_1} + w_{L_2} = 9 + 7 = 16$. This exactly fills the knapsack capacity.\n  The total value is $V_D = v_{L_1} + v_{L_2} = 18 + 13 = 31$.\n  The remaining capacity is $16 - 16 = 0$, so no small items can be added.\n\nThe optimal value for the initial instance, $V_{\\text{before}}$, is the maximum of the values from these four cases:\n$$V_{\\text{before}} = \\max\\{V_A, V_B, V_C, V_D\\} = \\max\\{28, 30, 29, 31\\} = 31$$\nThe optimal solution is to select both large items, $L_1$ and $L_2$.\n\n**Part 2: Augmented Instance ($V_{\\text{after}}$)**\n\nNow, one more small item is added, so there are $8$ items $S_j$ with $(w,v)=(2,4)$. The large items and capacity remain unchanged. We re-evaluate the four cases.\n\n- **Case A': No large items are selected.**\n  The available capacity is $W = 16$. We now have $8$ small items.\n  The number of small items that can fit is $\\min(\\lfloor \\frac{16}{2} \\rfloor, 8) = \\min(8, 8) = 8$.\n  The total weight is $8 \\times 2 = 16$.\n  The total value is $V_{A'} = 8 \\times 4 = 32$.\n\n- **Case B': Only item $L_1$ is selected.**\n  This case is identical to Case B in the initial instance, as the number of available small items ($8$) exceeds the number that can fit ($3$).\n  The total value is $V_{B'} = 30$.\n\n- **Case C': Only item $L_2$ is selected.**\n  This case is identical to Case C in the initial instance, as the number of available small items ($8$) exceeds the number that can fit ($4$).\n  The total value is $V_{C'} = 29$.\n\n- **Case D': Both items $L_1$ and $L_2$ are selected.**\n  This case is identical to Case D in the initial instance.\n  The total value is $V_{D'} = 31$.\n\nThe optimal value for the augmented instance, $V_{\\text{after}}$, is the maximum of the values from these new cases:\n$$V_{\\text{after}} = \\max\\{V_{A'}, V_{B'}, V_{C'}, V_{D'}\\} = \\max\\{32, 30, 29, 31\\} = 32$$\nThe optimal solution has now shifted to selecting only the $8$ small items.\n\n**Part 3: Final Calculation**\n\nThe problem asks for the value of $V_{\\text{after}} - V_{\\text{before}}$.\n$$V_{\\text{after}} - V_{\\text{before}} = 32 - 31 = 1$$\nThe addition of one small item with value $4$ improved the maximum achievable value not by $4$, but only by $1$, by enabling a completely different combination of items to become optimal.",
            "answer": "$$\\boxed{1}$$"
        },
        {
            "introduction": "While dynamic programming provides a correct solution, its pseudo-polynomial time complexity makes it inefficient when the knapsack capacity $W$ is very large. This practice introduces a powerful alternative: the meet-in-the-middle algorithm. By splitting the item set in half, generating solutions for each part, and then intelligently combining them, this technique can solve problems that are intractable for the standard DP approach. You will work through this method step-by-step , from enumerating subsets to pruning dominated pairs, gaining hands-on experience with an elegant divide-and-conquer strategy.",
            "id": "3202355",
            "problem": "Consider the $0/1$ knapsack problem defined as follows: given a set of $n$ items, each item $i$ has a nonnegative integer weight $w_i$ and value $v_i$, and a knapsack capacity $W$. The goal is to select a subset $S \\subseteq \\{1,\\dots,n\\}$ that maximizes the total value $\\sum_{i \\in S} v_i$ subject to the capacity constraint $\\sum_{i \\in S} w_i \\leq W$. Work from the fundamental definition of this combinatorial optimization problem and its feasible solution set. In particular, use the following core idea: the feasible set is all subsets of items, and for any partition of the item set into two halves, the set of all subset-weight-and-value pairs from each half can be constructed and then combined to recover the global optimum.\n\nYou are given $n = 10$ items, split into two halves $A$ and $B$ with $5$ items each, and knapsack capacity $W = 50$. The items have the following weights and values:\n- Half $A$: item $A_1$ has $(w,v) = (9,16)$, item $A_2$ has $(12,24)$, item $A_3$ has $(7,13)$, item $A_4$ has $(14,28)$, item $A_5$ has $(6,11)$.\n- Half $B$: item $B_1$ has $(w,v) = (8,15)$, item $B_2$ has $(10,19)$, item $B_3$ has $(5,9)$, item $B_4$ has $(11,23)$, item $B_5$ has $(4,7)$.\n\nA pair $(w,v)$ is said to be dominated if there exists another pair $(w',v')$ with $w' \\leq w$ and $v' \\geq v$, with at least one strict inequality, so that the dominated pair can never lead to a better feasible solution than the dominating one. In a meet-in-the-middle approach, one enumerates all subset pairs $(w,v)$ for each half, prunes dominated pairs to obtain a frontier that preserves optimality under combination, and then searches across the two frontiers for the optimal feasible combination.\n\nStarting solely from the foundational definition of the feasible set and the capacity constraint, and reasoning carefully about enumerations and dominance without assuming any shortcut formulas, determine the maximum achievable total value under capacity $W = 50$ for the given items by:\n1. Constructing all subset $(w,v)$ pairs for each half.\n2. Pruning dominated pairs to form a strictly improving frontier in value as weight increases.\n3. Combining the two frontiers under the capacity constraint to find the optimal feasible total value.\n\nAdditionally, explain why this meet-in-the-middle construction uses $O(2^{n/2})$ time and $O(2^{n/2})$ memory in terms of the number of enumerated subsets and stored pairs for each half. The final answer must be the single real-valued maximum total value achieved; no rounding is required.",
            "solution": "The meet-in-the-middle algorithm provides an efficient way to solve the 0/1 knapsack problem, improving upon the $O(n \\cdot 2^n)$ complexity of a full brute-force search. The approach involves splitting the item set into two halves, enumerating all possible subset sums (weight and value) for each half, pruning these lists to keep only non-dominated pairs, and then combining the results to find the global optimum. We apply this method step-by-step to the given instance.\n\n**Step 1: Enumeration and Pruning for Each Half**\n\nFor each half of the item set ($A$ and $B$), we generate all $2^5 = 32$ possible subsets and their corresponding total weight and value pairs $(w,v)$. After generating these pairs, we must prune them. A pair $(w,v)$ is dominated if there exists another pair $(w',v')$ with $w' \\leq w$ and $v' \\geq v$ (with at least one inequality being strict). To prune, we sort the pairs by weight and then iterate through them, keeping only pairs that have a higher value than all preceding pairs. This creates a \"frontier\" of non-dominated pairs, where both weight and value are strictly increasing.\n\n*   **For Half A:** After generating all 32 pairs from items $A_1$ to $A_5$ and pruning the dominated ones, we obtain the following frontier of 24 non-dominated pairs, sorted by weight:\n    $P_A = [(0,0), (6,11), (7,13), (9,16), (12,24), (14,28), (16,29), (18,35), (19,37), (20,39), (21,41), (23,44), (25,48), (26,52), (28,53), (29,55), (30,57), (32,63), (33,65), (35,68), (39,76), (41,79), (42,81), (48,92)]$\n\n*   **For Half B:** Similarly, after generating and pruning the 32 pairs from items $B_1$ to $B_5$, we obtain a frontier of 25 non-dominated pairs:\n    $P_B = [(0,0), (4,7), (5,9), (8,15), (9,16), (10,19), (11,23), (13,24), (14,26), (15,30), (16,32), (18,34), (19,38), (20,39), (21,42), (23,45), (24,47), (25,49), (26,51), (28,54), (29,57), (30,58), (33,64), (34,66), (38,73)]$\n\n**Step 2: Combining the Frontiers**\n\nWith the two frontiers $P_A$ and $P_B$, we aim to find a pair $(w_A, v_A) \\in P_A$ and a pair $(w_B, v_B) \\in P_B$ that maximize the total value $v_A + v_B$ subject to the total weight constraint $w_A + w_B \\leq W = 50$.\n\nThis can be done efficiently in linear time using a two-pointer approach. We initialize a pointer $i$ to the beginning of $P_A$ (smallest weight) and a pointer $j$ to the end of $P_B$ (largest weight).\n\n1.  Initialize `max_value = 0`.\n2.  While pointer $i$ is within bounds of $P_A$ and pointer $j$ is within bounds of $P_B$:\n    *   If $P_A[i].w + P_B[j].w \\leq 50$, we have a valid combination. We update `max_value = max(max_value, P_A[i].v + P_B[j].v)` and increment $i$ to seek a potentially higher value from set $A$.\n    *   If $P_A[i].w + P_B[j].w > 50$, the combined weight is too high. We must decrease the total weight by choosing a lighter pair from set $B$, so we decrement $j$.\n\nApplying this process, we find that the maximum achievable value is $99$. This value is achieved, for instance, by combining the pair $(26, 52)$ from $P_A$ (items $\\{A_2, A_4\\}$) with the pair $(24, 47)$ from $P_B$ (items $\\{B_1, B_3, B_4\\}$). The total weight is $26+24=50$, and the total value is $52+47=99$.\n\n**Complexity Analysis**\n\nThe problem also asks for an explanation of the algorithm's time and space complexity.\n*   **Time Complexity:** The primary cost comes from generating the subsets for each half. For a set of $n$ items split into two halves of size $n/2$, there are $2^{n/2}$ subsets for each half. Enumerating them takes time proportional to this number. Subsequent steps like sorting take $O(n \\cdot 2^{n/2})$, and merging the frontiers takes $O(2^{n/2})$. The overall time complexity is dominated by the exponential term from enumeration and sorting, which is a significant improvement over the $O(n \\cdot 2^n)$ of a full brute-force search. The number of enumerated subsets, $2^{n/2}$, dictates this running time.\n*   **Space Complexity:** To perform the algorithm, we must store the lists of $(w,v)$ pairs for each half. The number of such pairs is $2^{n/2}$ for each half before pruning. Therefore, the memory requirement is proportional to the number of stored pairs, making the space complexity $O(2^{n/2})$.\n\nThe maximum total value is 99.",
            "answer": "$$\\boxed{99}$$"
        }
    ]
}