{
    "hands_on_practices": [
        {
            "introduction": "我们首先重温经典的滑雪租赁问题，它是在线算法分析的基石。本练习将该模型扩展到一个更真实的“租购”场景，其中租金可以累积以抵扣购买价格 。通过在这个新设定下分析一个确定性阈值算法，你将练习定义算法成本和最优成本、通过最坏情况分析推导竞争比，并优化算法参数以获得最佳性能保证等基本技能。",
            "id": "3257188",
            "problem": "一个由对手控制的用户打算滑雪未知天数 $T \\in \\mathbb{R}_{\\ge 0}$。您面临以下在线决策问题。每天，可以以每天 $c > 0$ 的成本租赁滑雪板。也可以一次性支付 $B > 0$ 的成本直接购买滑雪板。这是一个租购模式：每天的租赁都会为所有权贡献 $\\alpha c$ 的抵扣额，其中 $\\alpha \\in [0,1]$ 是算法已知的一个固定参数。在任何时间 $t \\ge 0$，您可以决定支付剩余款项 $B - \\alpha c t$（如果为正）以立即获得所有权；一旦获得所有权（无论是通过支付余款还是当抵扣额达到 $B$ 时），未来的使用都是免费的。如果在时间 $t_{0} = \\frac{B}{\\alpha c}$ 时抵扣额达到 $B$，则自动获得所有权，无需额外支付。\n\n设计并分析一个由时间 $\\tau \\ge 0$ 参数化的确定性阈值在线算法族，该算法族在时间 $\\tau$ 之前一直租赁，如果在时间 $\\tau$ 时尚未通过抵扣额累积获得所有权，则支付余款购买。对手在看到您选择的 $\\tau$ 之后选择 $T$。使用在线算法竞争比的正式定义，推导此阈值算法的最坏情况竞争比，作为 $\\tau$、 $B$、 $c$ 和 $\\alpha$ 的函数，然后选择 $\\tau$ 以最小化此最坏情况比率。您的最终答案必须是仅以 $\\alpha$ 的闭式函数表示的最优竞争比。最终表达式中无需四舍五入，也不应包含任何物理单位。此外，简要说明当 $\\alpha = 0$ 时，您的表达式与经典滑雪租赁问题设置的比较情况。",
            "solution": "用户希望解决一个带有租购机制的滑雪租赁问题的修改版本。\n\n### 步骤1：提取已知条件\n-   总滑雪天数：$T \\in \\mathbb{R}_{\\ge 0}$，由对手选择。\n-   每日租赁成本：$c > 0$。\n-   直接购买成本：$B > 0$。\n-   租购抵扣参数：$\\alpha \\in [0,1]$。每天的租赁为购买价格 $B$ 贡献 $\\alpha c$ 的抵扣额。\n-   购买选项：在任何时间 $t \\ge 0$，用户可以支付剩余款项 $B - \\alpha c t$（如果为正）来购买滑雪板。\n-   自动获得所有权：如果在时间 $t_0 = \\frac{B}{\\alpha c}$ 时累积的抵扣额 $\\alpha c t$ 达到 $B$，则自动获得所有权。\n-   算法族：由 $\\tau \\ge 0$ 参数化的确定性阈值算法。该算法在时间 $\\tau$ 之前一直租赁，然后如果尚未获得所有权，则支付余款购买。\n-   目标：推导该算法的最坏情况竞争比，作为 $\\tau, B, c, \\alpha$ 的函数。然后，找到最小化该比率的最优 $\\tau$，并将所得的最优竞争比表示为仅关于 $\\alpha$ 的函数。\n\n### 步骤2：使用提取的已知条件进行验证\n该问题在科学上和数学上是合理的。它是在线算法和竞争分析领域中一个明确定义的问题。所有术语都有定义，前提条件是自洽且一致的。问题是客观的，不含任何非形式化或主观的元素。\n\n-   **科学依据：** 是。这是一个计算机科学领域的理论问题。\n-   **良态问题：** 是。目标明确，且问题设置允许唯一解。\n-   **客观性：** 是。语言精确且数学化。\n-   **完整性：** 是。所有必要的参数（$B, c, \\alpha, \\tau, T$）都已定义。\n-   **一致性：** 是。没有内部矛盾。\n\n### 步骤3：结论与行动\n问题有效。开始求解。\n\n### 形式化分析\n\n令 $C_{\\text{ALG}}(T, \\tau)$ 为参数为 $\\tau$ 的在线算法在总滑雪天数为 $T$ 时的成本。令 $C_{\\text{OPT}}(T)$ 为天数为 $T$ 的最优离线算法的成本。\n\n**最优离线算法成本 ($C_{\\text{OPT}}$)**\n最优离线算法预先知道 $T$。它有两种主要策略：\n1.  在时间 $t=0$ 时以成本 $B$ 购买滑雪板。\n2.  在整个 $T$ 期间租赁滑雪板。成本为 $cT$。\n\n最优策略是选择这两种成本中的较小者。租购特性不改变最优决策框架。如果最优选择是购买，那么总是在 $t=0$ 时购买最好，因为将购买延迟到时间 $t > 0$ 会导致成本为 $ct + (B - \\alpha c t) = B + ct(1-\\alpha)$，对于 $t>0$ 和 $\\alpha  1$，这大于 $B$。如果 $\\alpha=1$，成本为 $B$，因此在 $t=0$ 时购买仍然是最优的。只有在连续租赁时，才会在 $t_0 = \\frac{B}{\\alpha c}$ 时自动获得所有权。对于最优算法，只有当 $cT  B$ 时才倾向于租赁。由于 $B \\le B/(\\alpha c)$，条件 $cT  B$ 意味着 $T  B/c \\le t_0$，因此自动获得所有权不是最优算法决策中的一个因素。\n因此，最优成本是：\n$$ C_{\\text{OPT}}(T) = \\min(cT, B) $$\n\n**在线算法成本 ($C_{\\text{ALG}}$)**\n在线算法在时间 $\\tau$ 之前一直租赁，然后如果尚未自动获得所有权，则购买。令 $t_0 = \\frac{B}{\\alpha c}$ 为自动获得所有权的时间。\n\n成本取决于总滑雪时间 $T$ 与算法阈值 $\\tau$ 之间的关系。\n1.  如果 $T  \\tau$：算法的决策点 $\\tau$ 未达到。算法仅在 $T$ 期间租赁。然而，如果 $T$ 足够大以触发自动所有权（$T \\ge t_0$），则成本上限为支付到 $t_0$ 的总租金，即 $c t_0 = c \\frac{B}{\\alpha c} = \\frac{B}{\\alpha}$。\n    所以，对于 $T  \\tau$，成本为 $C_{\\text{ALG}}(T, \\tau) = \\min(cT, \\frac{B}{\\alpha})$。\n\n2.  如果 $T \\ge \\tau$：算法达到其决策点 $\\tau$。\n    -   如果 $\\tau  t_0$：尚未自动获得所有权。算法已支付了 $c\\tau$ 的租金，现在支付余款 $B - \\alpha c \\tau$。总成本为 $c\\tau + (B - \\alpha c \\tau) = B + c\\tau(1-\\alpha)$。\n    -   如果 $\\tau \\ge t_0$：在时间 $t_0$ 时已经自动获得了所有权。算法只支付了到 $t_0$ 为止的租金。总成本为 $c t_0 = \\frac{B}{\\alpha}$。\n    结合这些情况，对于 $T \\ge \\tau$，成本是恒定的：$C_{\\text{ALG}}(T, \\tau) = \\min(B + c\\tau(1-\\alpha), \\frac{B}{\\alpha})$。\n\n**竞争比 $\\mathcal{R}(\\tau)$**\n竞争比是对手所有可能的 $T$ 选择下，成本比率的上确界：\n$$ \\mathcal{R}(\\tau) = \\sup_{T \\ge 0} \\frac{C_{\\text{ALG}}(T, \\tau)}{C_{\\text{OPT}}(T)} $$\n我们可以根据 $T$ 来分情况分析：\n$$ \\mathcal{R}(\\tau) = \\max \\left( \\sup_{0 \\le T  \\tau} \\frac{C_{\\text{ALG}}(T, \\tau)}{C_{\\text{OPT}}(T)}, \\sup_{T \\ge \\tau} \\frac{C_{\\text{ALG}}(T, \\tau)}{C_{\\text{OPT}}(T)} \\right) $$\n\n让我们分析这两个部分。令 $t_B = B/c$。\n**第一部分：$\\sup_{0 \\le T  \\tau} \\frac{\\min(cT, B/\\alpha)}{\\min(cT, B)}$**\n-   如果 $\\tau \\le t_B$，则对于任何 $T  \\tau$，我们有 $T  t_B$，所以 $cT  B$。比率为 $\\frac{cT}{cT} = 1$。上确界为 $1$。\n-   如果 $t_B  \\tau \\le t_0$，对手可以选择 $T$ 在范围 $[t_B, \\tau)$ 内。对于这样的 $T$，$cT \\ge B$。比率为 $\\frac{\\min(cT, B/\\alpha)}{B}$。由于 $T \\le t_0 = B/(\\alpha c)$，$cT \\le B/\\alpha$，所以比率为 $\\frac{cT}{B}$。当 $T \\to \\tau^{-}$ 时，该比率最大化，上确界为 $\\frac{c\\tau}{B}$。\n-   如果 $\\tau > t_0$，对手可以选择 $T$ 在 $[t_0, \\tau)$ 内。对于这样的 $T$，$C_{\\text{ALG}} = B/\\alpha$ 且 $C_{\\text{OPT}}=B$。比率为 $\\frac{B/\\alpha}{B} = \\frac{1}{\\alpha}$。对于 $T \\in [t_B, t_0)$，比率为 $cT/B$，在 $T \\to t_0^-$ 时最大化，得到 $ct_0/B = (B/\\alpha)/B = 1/\\alpha$。所以上确界是 $1/\\alpha$。\n\n**第二部分：$\\sup_{T \\ge \\tau} \\frac{\\min(B + c\\tau(1-\\alpha), B/\\alpha)}{\\min(cT, B)}$**\n分子相对于 $T$ 是一个常数。为了使比率最大化，对手必须最小化分母 $C_{\\text{OPT}}(T) = \\min(cT, B)$，其中 $T \\ge \\tau$。最小值在 $T=\\tau$ 时达到，此时 $C_{\\text{OPT}}(\\tau) = \\min(c\\tau, B)$。\n所以，上确界为 $\\frac{\\min(B + c\\tau(1-\\alpha), B/\\alpha)}{\\min(c\\tau, B)}$。\n\n**组合并寻找最优 $\\tau$**\n让我们用归一化阈值 $x = \\frac{c\\tau}{B}$ 来表示竞争比 $\\mathcal{R}$，因此 $\\tau = \\frac{xB}{c}$。关键点是 $x=1$（对应于 $\\tau=t_B$）和 $x=1/\\alpha$（对应于 $\\tau=t_0$）。我们分析 $\\mathcal{R}(x)$。\n\n-   **情况1：$0  x \\le 1$ (即 $0  \\tau \\le t_B$)**\n    $\\sup_{T\\tau}$ 是 $1$。\n    $\\sup_{T\\ge\\tau}$ 是 $\\frac{B+c\\tau(1-\\alpha)}{c\\tau} = \\frac{B}{c\\tau} + 1-\\alpha = \\frac{1}{x} + 1-\\alpha$。\n    由于 $x \\le 1$，$1/x \\ge 1$。由于 $\\alpha \\le 1$，$1-\\alpha \\ge 0$。所以 $\\frac{1}{x} + 1-\\alpha \\ge 1$。\n    $\\mathcal{R}(x) = \\frac{1}{x} + 1-\\alpha$。这个函数在 $x$ 上是递减的。它在此区间内的最小值在 $x=1$ 时出现，得到 $\\mathcal{R}(1) = 1 + 1 - \\alpha = 2-\\alpha$。\n\n-   **情况2：$1  x \\le 1/\\alpha$ (即 $t_B  \\tau \\le t_0$)**\n    $\\sup_{T\\tau}$ 是 $\\frac{c\\tau}{B} = x$。\n    $\\sup_{T\\ge\\tau}$ 是 $\\frac{B+c\\tau(1-\\alpha)}{B} = 1 + \\frac{c\\tau}{B}(1-\\alpha) = 1 + x(1-\\alpha)$。\n    $\\mathcal{R}(x) = \\max(x, 1+x(1-\\alpha))$。\n    我们比较 $x$ 和 $1+x(1-\\alpha) = 1+x-\\alpha x$。不等式 $x \\le 1+x-\\alpha x$ 简化为 $0 \\le 1-\\alpha x$，或 $\\alpha x \\le 1$，这是成立的，因为 $x \\le 1/\\alpha$。\n    因此，$\\mathcal{R}(x) = 1+x(1-\\alpha)$。这是 $x$ 的一个增函数（对于 $\\alpha1$）。它在此区间上的最小值在 $x \\to 1^{+}$ 时接近，即 $1+(1-\\alpha) = 2-\\alpha$。\n\n-   **情况3：$x > 1/\\alpha$ (即 $\\tau > t_0$)**\n    $\\sup_{T\\tau}$ 是 $1/\\alpha$。\n    $\\sup_{T\\ge\\tau}$ 是 $\\frac{B/\\alpha}{B} = \\frac{1}{\\alpha}$。\n    $\\mathcal{R}(x) = \\max(1/\\alpha, 1/\\alpha) = \\frac{1}{\\alpha}$。\n\n**关于最优比率的结论**\n函数 $\\mathcal{R}(x)$ 在 $x \\in (0,1]$ 上递减，在 $x \\in (1, 1/\\alpha]$ 上递增，并在 $x > 1/\\alpha$ 时为常数 $1/\\alpha$。\n$\\mathcal{R}(x)$ 的最小值在 $x=1$ 时达到，对应于设置阈值 $\\tau = \\tau_{\\text{opt}} = B/c$。\n最小的最坏情况竞争比是此最小值点的值：\n$$ \\mathcal{R}_{\\text{opt}} = \\mathcal{R}(\\tau_{\\text{opt}}) = \\mathcal{R}(x=1) = 2-\\alpha $$\n\n**与经典滑雪租赁问题的比较 ($\\alpha=0$)**\n在经典的滑雪租赁问题中，没有租购抵扣，这对应于 $\\alpha=0$。将 $\\alpha=0$ 代入我们推导出的最优竞争比，得到 $2-0=2$。这与经典问题中最优确定性算法众所周知的2-竞争性相匹配。策略 $\\tau=B/c$（租赁直到总租赁成本等于购买价格，然后购买）在经典设置中也是最优的确定性策略。我们的结果正确地推广了经典问题。此外，如果 $\\alpha=1$，每一元的租金都会被抵扣。比率变为 $2-1=1$，表明这是一个完美的算法。这是合乎逻辑的，因为先租后买没有任何惩罚；获得滑雪板的总支出总是被限制在 $B$。",
            "answer": "$$\\boxed{2-\\alpha}$$"
        },
        {
            "introduction": "虽然确定性算法为我们提供了坚实的基础，但随机化策略通常能让我们在对抗性环境中取得更优的性能。下一个练习将探讨滑雪租赁问题的一个变体，其中购买的物品具有转售价值 。你的挑战是确定任何随机算法所能达成的最优竞争比，这项任务要求你从简单的代数分析转向应用微积分和概率论，以推导在线算法领域的一个著名结果。",
            "id": "3257106",
            "problem": "考虑以下在线决策问题，它是经典滑雪租赁模型的扩展。时间是连续的，用非负实数衡量。有一种资源，可以以每单位时间 $r \\gt 0$ 的速率租用，或者以一次性成本 $B \\gt 0$ 购买。如果在任何时候购买了该资源，之后停止使用，购买者可以将其转售，并收回购买价格的一个固定比例 $\\alpha \\in [0,1)$，该比例与拥有时间的长短无关。因此，如果购买并最终停止使用，净购买成本为 $(1-\\alpha)B$。使用期限 $T \\in [0,\\infty)$ 由一个无所察觉的对手选择，在线算法事先不知道。\n\n一个在线算法指定一个购买时间 $\\tau \\in [0,\\infty]$，该时间可能是随机的，并且不依赖于任何未来的信息。如果 $T \\le \\tau$，算法在整个期间内租用，产生的成本为 $rT$。如果 $T \\gt \\tau$，算法租用到时间 $\\tau$，然后购买并稍后转售，总成本为 $r \\tau + (1-\\alpha)B$。设 $\\text{ALG}(T)$ 表示算法在使用期限 $T$ 上的（可能随机的）成本，设 $\\text{OPT}(T)$ 表示在完全知晓 $T$ 的情况下的离线最优成本。一个随机化在线算法的竞争比定义为 $\\sup_{T \\ge 0} \\mathbb{E}[\\text{ALG}(T)]/\\text{OPT}(T)$，其中上确界取遍所有 $T \\in [0,\\infty)$，期望是关于算法内部随机性的。\n\n从在线算法和竞争性分析的核心定义出发，并且不假设任何目标公式，确定任何随机化在线算法对该问题可达到的最佳竞争比。将你的最终答案表示为一个仅含通用常数的闭式解析表达式。不需要也不允许进行数值四舍五入。你的最终答案必须是单一表达式。",
            "solution": "用户要求我解决一个在线算法和竞争性分析领域的问题。\n\n### 步骤 1：提取已知条件\n- 时间是连续且非负的：$t \\in [0, \\infty)$。\n- 租用速率：$r  0$。\n- 购买成本：$B  0$。\n- 转售回收比例：$\\alpha \\in [0, 1)$。\n- 净购买成本：$(1-\\alpha)B$。\n- 使用期限（在线算法未知）：$T \\in [0, \\infty)$。\n- 一个在线算法指定一个购买时间 $\\tau \\in [0, \\infty]$。\n- 算法成本 $\\text{ALG}(T)$:\n  - 如果 $T \\le \\tau$，$\\text{ALG}(T) = rT$。\n  - 如果 $T  \\tau$，$\\text{ALG}(T) = r\\tau + (1-\\alpha)B$。\n- 知道 $T$ 的离线最优成本：$\\text{OPT}(T)$。\n- 随机化在线算法的竞争比为 $c = \\sup_{T \\ge 0} \\frac{\\mathbb{E}[\\text{ALG}(T)]}{\\text{OPT}(T)}$。\n- 目标是找到所有随机化在线算法中可能的最小竞争比。\n\n### 步骤 2：使用提取的已知条件进行验证\n该问题是理论计算机科学领域中一个明确定义的数学问题，特别是在线算法。它是经典滑雪租赁问题的推广。所有术语都得到了正式定义，参数及其有效范围已指定，目标明确。问题是自洽的，在其领域内有科学依据，没有矛盾或歧义。它没有违反任何指定的无效性标准。\n\n### 步骤 3：结论与行动\n问题有效。将提供完整解答。\n\n### 解题推导\n\n首先，我们确定最优离线算法的成本 $\\text{OPT}(T)$，该算法预先知道总使用时长 $T$。离线算法有两个选择：在整个期间租用，总成本为 $rT$；或者在时间 $0$ 立即购买资源，并在时间 $T$ 转售，净成本为 $(1-\\alpha)B$。最优策略是选择更便宜的选项。\n$$ \\text{OPT}(T) = \\min(rT, (1-\\alpha)B) $$\n这两种成本在一个盈亏平衡时间 $T_0$ 相等，定义为 $rT_0 = (1-\\alpha)B$。因此，$T_0 = \\frac{(1-\\alpha)B}{r}$。最优离线成本可以表示为：\n$$ \\text{OPT}(T) = \\begin{cases} rT  \\text{if } 0 \\le T \\le T_0 \\\\ (1-\\alpha)B = rT_0  \\text{if } T > T_0 \\end{cases} $$\n\n接下来，我们考虑一个随机化在线算法。这种算法的特点是购买时间 $\\tau$ 的概率分布。设 $F(t) = P(\\tau \\le t)$ 为购买时间 $\\tau$ 的累积分布函数（CDF）。我们假设 $F(0) = 0$（在时间 $0$ 购买的概率不为有限值）且 $F$ 是连续的。对于给定的使用期限 $T$，算法的期望成本，记为 $\\mathbb{E}[\\text{ALG}(T)]$，是：\n$$ \\mathbb{E}[\\text{ALG}(T)] = \\int_0^\\infty \\text{cost}(\\tau, T) dF(\\tau) $$\n其中 $\\text{cost}(\\tau, T)$ 是确定性购买时间 $\\tau$ 的成本。我们可以根据 $\\tau \\le T$ 或 $\\tau > T$ 来划分积分：\n$$ \\mathbb{E}[\\text{ALG}(T)] = \\int_0^T (r\\tau + (1-\\alpha)B) dF(\\tau) + \\int_T^\\infty rT dF(\\tau) $$\n使用 $1 - F(T) = \\int_T^\\infty dF(\\tau)$，这变为：\n$$ \\mathbb{E}[\\text{ALG}(T)] = rT(1 - F(T)) + \\int_0^T (r\\tau + rT_0) dF(\\tau) $$\n$$ \\mathbb{E}[\\text{ALG}(T)] = rT(1 - F(T)) + r\\int_0^T \\tau dF(\\tau) + rT_0 F(T) $$\n\n竞争比为 $c = \\sup_{T \\ge 0} \\frac{\\mathbb{E}[\\text{ALG}(T)]}{\\text{OPT}(T)}$。我们寻求能最小化这个上确界的算法（即CDF $F$）。对于最优随机化算法，对于所有“困难”输入 $T$，其竞争比预期为一个常数 $c$。我们假设困难输入的集合是 $T \\in [0, \\infty)$，并建立等式：\n$$ \\mathbb{E}[\\text{ALG}(T)] = c \\cdot \\text{OPT}(T) \\quad \\forall T \\ge 0 $$\n根据 $\\text{OPT}(T)$ 的定义，这给出了两个不同的方程。\n\n情况 1：$0 \\le T \\le T_0$。\n此处，$\\text{OPT}(T) = rT$。条件变为：\n$$ rT(1 - F(T)) + r\\int_0^T \\tau dF(\\tau) + rT_0 F(T) = c \\cdot rT $$\n两边除以 $r$ 并对 $T$ 求导（假设 $F$ 有密度函数 $f=F'$）得到：\n$$ (1-F(T)) - TF'(T) + TF'(T) + T_0F'(T) = c $$\n$$ T_0 F'(T) - F(T) = c - 1 $$\n这是一个关于 $F(T)$ 的一阶线性常微分方程。其解的形式为 $F(T) = K\\exp(T/T_0) - (c-1)$，其中 $K$ 是某个常数。使用边界条件 $F(0)=0$，我们得到 $0 = K - (c-1)$，所以 $K=c-1$。因此，对于 $T \\in [0, T_0]$：\n$$ F(T) = (c-1)(\\exp(T/T_0) - 1) $$\n要使 $F(T)$ 成为一个有效的CDF，必须有 $F'(T) \\ge 0$。由于 $F'(T) = \\frac{c-1}{T_0}\\exp(T/T_0)$，这要求 $c \\ge 1$。\n\n情况 2：$T > T_0$。\n此处，$\\text{OPT}(T) = rT_0$。条件变为：\n$$ rT(1 - F(T)) + r\\int_0^T \\tau dF(\\tau) + rT_0 F(T) = c \\cdot rT_0 $$\n对 $T$ 求导：\n$$ (1-F(T)) - TF'(T) + TF'(T) + T_0F'(T) = 0 $$\n$$ T_0 F'(T) + 1 - F(T) = 0 $$\n这个常微分方程的解的形式为 $F(T) = 1 - C\\exp(-T/T_0)$，其中 $C$ 是某个常数。要使 $F(T)$ 成为一个有效的CDF，必须有 $\\lim_{T \\to \\infty} F(T) = 1$，这个函数形式满足此条件。\n\n如果租金变得任意昂贵，在线算法不应无限期推迟购买。具体来说，在时间 $\\tau > T_0$ 购买是次优的。对手可以选择 $T=\\tau$，此时 $\\text{ALG}(T)=r\\tau$ 而 $\\text{OPT}(T)=rT_0$。比率将为 $\\tau/T_0 > 1$。如果对手选择 $T=\\tau+\\epsilon$（对于某个小的 $\\epsilon>0$），成本为 $r\\tau + rT_0$，比率为 $(r\\tau+rT_0)/(rT_0) = 1+\\tau/T_0$。一个可能在 $\\tau > T_0$ 时购买的算法，其竞争比会比一个保证在 $T_0$ 之前购买的算法更差。这表明最优随机化策略对 $\\tau$ 的支撑集包含在 $[0, T_0]$ 内。\n因此，我们假设对于所有 $T \\ge T_0$ 都有 $F(T)=1$。\n通过在情况1中得到的 $F(T)$ 表达式中设置 $T=T_0$，这提供了一个关键条件：\n$$ F(T_0) = 1 $$\n$$ (c-1)(\\exp(T_0/T_0) - 1) = 1 $$\n$$ (c-1)(e - 1) = 1 $$\n求解 $c$，我们得到最优竞争比：\n$$ c-1 = \\frac{1}{e-1} \\implies c = 1 + \\frac{1}{e-1} = \\frac{e-1+1}{e-1} = \\frac{e}{e-1} $$\n\n相应的最优随机化策略是在区间 $[0, T_0]$ 上根据以下CDF选择购买时间 $\\tau$：\n$$ F(\\tau) = \\frac{\\exp(\\tau/T_0) - 1}{e - 1} \\quad \\text{for } \\tau \\in [0, T_0] $$\n我们必须验证该策略对于所有 $T \\ge 0$ 都能达到竞争比 $c = e/(e-1)$。通过构造，我们已经对 $T \\in [0, T_0]$ 证明了这一点。对于 $T > T_0$，算法总是在某个 $\\tau \\in [0, T_0]$ 时购买，所以成本总是 $r\\tau + (1-\\alpha)B = r\\tau + rT_0$。期望成本是：\n$$ \\mathbb{E}[\\text{ALG}(T)] = \\mathbb{E}[r\\tau + rT_0] = r\\mathbb{E}[\\tau] + rT_0 $$\n$\\tau$ 的期望值是：\n$$ \\mathbb{E}[\\tau] = \\int_0^{T_0} \\tau F'(\\tau) d\\tau = \\int_0^{T_0} \\tau \\frac{\\exp(\\tau/T_0)}{T_0(e-1)} d\\tau $$\n使用分部积分法，并进行替换 $u=\\tau/T_0$ 和 $d\\tau = T_0 du$：\n$$ \\mathbb{E}[\\tau] = \\frac{T_0}{e-1} \\int_0^1 u \\exp(u) du = \\frac{T_0}{e-1} [u\\exp(u) - \\exp(u)]_0^1 $$\n$$ \\mathbb{E}[\\tau] = \\frac{T_0}{e-1} [(1\\cdot e^1 - e^1) - (0 \\cdot e^0 - e^0)] = \\frac{T_0}{e-1} [0 - (-1)] = \\frac{T_0}{e-1} $$\n将此结果代回到 $T > T_0$ 的期望成本中：\n$$ \\mathbb{E}[\\text{ALG}(T)] = r \\frac{T_0}{e-1} + rT_0 = rT_0 \\left(\\frac{1}{e-1} + 1\\right) = rT_0 \\frac{e}{e-1} $$\n对于 $T > T_0$ 的竞争比是：\n$$ \\frac{\\mathbb{E}[\\text{ALG}(T)]}{\\text{OPT}(T)} = \\frac{rT_0 \\frac{e}{e-1}}{rT_0} = \\frac{e}{e-1} $$\n对于所有 $T \\ge 0$，竞争比是恒定的，等于 $e/(e-1)$。通过构造，这是任何随机化算法对抗无所察觉的对手时可能达到的最低竞争比。参数 $r$、$B$ 和 $\\alpha$ 被封装在盈亏平衡时间 $T_0$ 中，但它们不出现在竞争比的最终表达式中，该表达式只依赖于通用常数 $e$。这一结果是滑雪租赁系列问题中的一个著名发现。",
            "answer": "$$\\boxed{\\frac{e}{e-1}}$$"
        },
        {
            "introduction": "竞争性分析的原则远不止适用于简单的“租或买”决策。最后的这个练习将我们的注意力转移到在线资源分配问题上，通过装箱问题的一个变体来审视这一领域：带“追索权”的装箱 。在这里，你可以支付一定代价来移动箱子里的物品，从而修正过去不理想的放置决策。通过分析一个特定算法在精心设计的对抗序列上的表现，你将理解追索权如何影响算法设计，以及如何在竞争性分析框架中核算这些新的成本。",
            "id": "3257046",
            "problem": "考虑一个具有追索权的在线装箱问题，其精确模型如下。有若干容量为 $1$ 的箱子。物品逐一到达；每个物品的大小在 $(0,1]$ 范围内。每次物品到达时，在线算法必须将该物品放入某个箱子中，使得任何箱子中物品的总大小不超过 $1$。允许追索：算法可以在任何物品到达时，在箱子之间移动先前放置的物品，但每次移动物品都会产生固定的惩罚成本。定义任何算法在给定输入序列上的总成本为两个组成部分之和：最终装箱所使用的箱子数量，加上等于 $\\beta  0$ 乘以整个序列中移动物品总数的惩罚。对于竞争力分析，将在线算法的成本与最优离线算法 (OPT) 的成本进行比较，后者预先知道整个序列，并用相同的成本函数来衡量。\n\n固定参数 $\\alpha \\in (0, \\tfrac{1}{2})$，$\\beta  0$，以及一个正整数 $m$，该整数是 $4$ 的倍数。考虑一个对抗序列，该序列首先由 $m$ 个大小为 $\\alpha$ 的物品到达，然后是 $m$ 个大小为 $1-\\alpha$ 的物品到达。\n\n分析以下名为“局部修复”(Local Fix, LF)的确定性在线算法。当大小为 $s$ 的物品到达时：\n- 如果存在一个有足够剩余容量的箱子可以放置该物品而不违反容量限制，则将其放入该箱子。\n- 否则，如果到达的物品大小为 $1-\\alpha$，并且存在一个当前装有两个大小为 $\\alpha$ 的物品的箱子，则选择这样一个箱子，将其中一个大小为 $\\alpha$ 的物品移出（为该移动的物品支付惩罚），并将到达的大小为 $1-\\alpha$ 的物品与剩余的大小为 $\\alpha$ 的物品一同放入腾出的箱子中。\n- 如果以上两种情况都不适用，则开启一个新箱子并将物品放入其中。\n被移出的大小为 $\\alpha$ 的物品会被 LF 收集并重新装箱，每个箱子最多放置两个大小为 $\\alpha$ 的物品，且需遵守箱子容量限制。\n\n从在线算法、装箱可行性和竞争力比率 $R$ 的基本定义出发，推导局部修复算法在所述序列上的确切竞争力比率，结果表示为关于 $\\beta$ 的封闭形式表达式。你的最终答案必须是 $R$ 的解析表达式，不得进行四舍五入或近似。",
            "solution": "该问题要求推导局部修复 (LF) 算法在特定对抗序列上的确切竞争力比率。竞争力比率 $R$ 定义为在线算法 (ALG) 在相同输入序列上产生的成本与最优离线算法 (OPT) 产生的成本之比。任何算法的成本函数定义为所用箱子数量与一个与移动物品数量成正比的惩罚项之和，公式如下：\n$$ \\text{成本} = (\\text{使用的箱子数量}) + \\beta \\times (\\text{移动物品总数}) $$\n其中 $\\beta  0$ 是一个固定的惩罚参数。\n\n对抗序列包含两个阶段：首先， $m$ 个大小为 $\\alpha$ 的物品到达，然后是 $m$ 个大小为 $1-\\alpha$ 的物品到达。参数受限于 $\\alpha \\in (0, \\frac{1}{2})$ 且 $m$ 是一个 $4$ 的倍数的正整数。每个箱子的容量为 $1$。约束条件 $\\alpha  \\frac{1}{2}$ 确保了 $2\\alpha  1$，因此两个大小为 $\\alpha$ 的物品可以放入同一个箱子。\n\n我们将分别分析局部修复算法的成本 ($\\text{Cost}_{\\text{LF}}$) 和最优离线算法的成本 ($\\text{Cost}_{\\text{OPT}}$)。\n\n**局部修复 (LF) 算法的成本分析**\n\n我们追踪 LF 算法在指定序列上的执行过程。\n\n**第一阶段：$m$ 个大小为 $\\alpha$ 的物品到达。**\n最先到达的 $m$ 个物品大小均为 $\\alpha$。\n- 第一个物品被放入一个新箱子 $B_1$。\n- 第二个物品到达。$B_1$ 的剩余容量为 $1 - \\alpha$。由于 $\\alpha \\in (0, \\frac{1}{2})$，我们有 $1 - \\alpha > \\frac{1}{2} > \\alpha$。因此，$B_1$ 有足够容量容纳第二个物品。LF 根据其第一条规则将其放入。箱子 $B_1$ 现在包含两个大小为 $\\alpha$ 的物品，内容为 $\\{\\alpha, \\alpha\\}$。\n- LF 继续这个过程，在开启新箱子之前，先将每个箱子填满两个大小为 $\\alpha$ 的物品。\n- 由于 $m$ 是一个偶数（因为它是 $4$ 的倍数），所有 $m$ 个物品都可以完美配对。\n- 在此阶段结束时，LF 使用了 $\\frac{m}{2}$ 个箱子。每个箱子包含两个大小为 $\\alpha$ 的物品。\n- 此阶段使用的箱子数量为 $\\frac{m}{2}$。\n- 移动的物品数量为 $0$。\n\n**第二阶段：$m$ 个大小为 $1-\\alpha$ 的物品到达。**\n接下来，$m$ 个大小为 $1-\\alpha$ 的物品逐一到达。我们来分析算法的决策。\n- 考虑第一个大小为 $1-\\alpha$ 的物品的到达。\n- LF 的第一条规则是检查是否有具有足够容量的箱子。所有 $\\frac{m}{2}$ 个现有箱子都包含两个大小为 $\\alpha$ 的物品，因此它们的剩余容量为 $1 - 2\\alpha$。要装入一个大小为 $1-\\alpha$ 的物品，需要 $1 - 2\\alpha \\ge 1 - \\alpha$，化简后为 $0 \\ge \\alpha$。这是错误的，因为 $\\alpha > 0$。因此，规则1不适用。\n- 检查 LF 的第二条规则：到达的物品大小为 $1-\\alpha$，并且存在装有两个大小为 $\\alpha$ 的物品的箱子。此规则适用。LF 选择一个这样的箱子，移出一个大小为 $\\alpha$ 的物品，并将 $1-\\alpha$ 的物品放入。此操作构成 $1$ 次移动。该箱子现在包含 $\\{\\alpha, 1-\\alpha\\}$ 并且已满。\n- 只要还有类型为 $\\{\\alpha, \\alpha\\}$ 的箱子可用，这个过程就会对每个到达的大小为 $1-\\alpha$ 的物品重复。最初有 $\\frac{m}{2}$ 个这样的箱子。\n- 因此，对于最先到达的 $\\frac{m}{2}$ 个大小为 $1-\\alpha$ 的物品：\n    - LF 应用其局部修复规则 $\\frac{m}{2}$ 次。\n    - 每次应用将一个类型为 $\\{\\alpha, \\alpha\\}$ 的箱子转换为类型为 $\\{\\alpha, 1-\\alpha\\}$ 的箱子。\n    - 每次应用导致一个大小为 $\\alpha$ 的物品被移出，并计为一次移动。\n- 在处理完这首批 $\\frac{m}{2}$ 个大小为 $1-\\alpha$ 的物品后：\n    - 所有原始的 $\\frac{m}{2}$ 个箱子现在都变成了类型为 $\\{\\alpha, 1-\\alpha\\}$ 并且已满。\n    - 总共发生了 $\\frac{m}{2}$ 次移动。\n    - 总共有 $\\frac{m}{2}$ 个大小为 $\\alpha$ 的物品被移出并被“收集”起来。\n- 现在，剩下的 $m - \\frac{m}{2} = \\frac{m}{2}$ 个大小为 $1-\\alpha$ 的物品到达。\n    - LF 检查规则1：所有现有箱子都已满，因此没有足够的容量。\n    - LF 检查规则2：没有更多装有两个大小为 $\\alpha$ 的物品的箱子了。\n    - 因此，LF 必须应用其第三条规则：为每个到达的物品开启一个新箱子。\n- 这导致产生了 $\\frac{m}{2}$ 个新箱子，每个箱子包含一个大小为 $1-\\alpha$ 的物品。\n\n**第三阶段：重新装箱被移出的 $\\alpha$ 物品。**\n问题陈述，被移出的物品按照特定规则重新装箱：“每个箱子最多放置两个大小为 $\\alpha$ 的物品”。\n- 从第二阶段可知，有 $\\frac{m}{2}$ 个被移出的大小为 $\\alpha$ 的物品。\n- 将这些物品每两个装入一个箱子需要 $\\frac{m/2}{2} = \\frac{m}{4}$ 个新箱子。$m$ 是 $4$ 的倍数的约束确保了 $\\frac{m}{4}$ 是一个整数。\n\n**LF 总成本 ($\\text{Cost}_{\\text{LF}}$) 总结：**\n- **总共使用的箱子：**\n    - $\\frac{m}{2}$ 个类型为 $\\{\\alpha, 1-\\alpha\\}$ 的箱子。\n    - $\\frac{m}{2}$ 个类型为 $\\{1-\\alpha\\}$ 的箱子。\n    - $\\frac{m}{4}$ 个类型为 $\\{\\alpha, \\alpha\\}$ 的箱子，用于重新装箱的物品。\n    - 总箱数$_{\\text{LF}} = \\frac{m}{2} + \\frac{m}{2} + \\frac{m}{4} = m + \\frac{m}{4} = \\frac{5m}{4}$。\n- **总共移动的物品：**\n    - 局部修复规则被应用了 $\\frac{m}{2}$ 次，每次导致一次移动。\n    - 总移动次数$_{\\text{LF}} = \\frac{m}{2}$。\n- **总成本：**\n    - $\\text{Cost}_{\\text{LF}} = \\text{Bins}_{\\text{LF}} + \\beta \\times \\text{Moves}_{\\text{LF}} = \\frac{5m}{4} + \\beta \\frac{m}{2} = m(\\frac{5}{4} + \\frac{\\beta}{2})$。\n\n**最优离线算法成本 ($\\text{Cost}_{\\text{OPT}}$) 分析**\n\n最优离线算法 (OPT) 预先知道整个序列，包含 $m$ 个大小为 $\\alpha$ 的物品和 $m$ 个大小为 $1-\\alpha$ 的物品。其目标是最小化相同的成本函数。\n- **最优装箱：** 装箱这些物品最有效的方式是创建 $\\{\\alpha, 1-\\alpha\\}$ 对。这样一对的大小为 $\\alpha + (1-\\alpha) = 1$，正好填满一个箱子。由于两种大小的物品各有 $m$ 个，OPT 可以精确地形成 $m$ 对这样的组合。这种装箱方式使用 $m$ 个箱子，且没有物品未被装箱。物品总体积为 $m\\alpha + m(1-\\alpha) = m$，因此使用 $m$ 个容量为 $1$ 的箱子是绝对可能的最小值。\n- **最优追索策略：** OPT 必须选择如何以最小成本实现这种装箱。\n    - **策略1（无移动）：** OPT 可以在没有任何移动的情况下装箱物品。例如，它可以将最先到达的 $m$ 个大小为 $\\alpha$ 的物品放入 $m$ 个不同的箱子中。然后，当 $m$ 个大小为 $1-\\alpha$ 的物品到达时，它将每个物品放入 $m$ 个箱子中的一个。最终配置是 $m$ 个类型为 $\\{\\alpha, 1-\\alpha\\}$ 的箱子。\n        - 使用的箱子数 = $m$。\n        - 移动次数 = $0$。\n        - 成本 = $m + \\beta \\times 0 = m$。\n    - **策略2（有移动）：** OPT 可以初步将 $m$ 个大小为 $\\alpha$ 的物品装入 $\\frac{m}{2}$ 个箱子（每箱两个）。然后，为了创建最优的最终装箱，它需要拆分这些箱子，这将需要移动。为了形成 $m$ 个类型为 $\\{\\alpha, 1-\\alpha\\}$ 的箱子，它需要从 $\\frac{m}{2}$ 个初始箱子中各移出一个大小为 $\\alpha$ 的物品。这相当于 $\\frac{m}{2}$ 次移动。最终的箱子数量仍为 $m$。\n        - 使用的箱子数 = $m$。\n        - 移动次数 = $\\frac{m}{2}$。\n        - 成本 = $m + \\beta \\times \\frac{m}{2} = m(1 + \\frac{\\beta}{2})$。\n- **OPT 的结论：** OPT 会选择成本最低的策略。我们比较成本：$m$ 与 $m(1 + \\frac{\\beta}{2})$。由于 $\\beta > 0$，我们有 $1 + \\frac{\\beta}{2} > 1$，这意味着 $m(1 + \\frac{\\beta}{2}) > m$。因此，最优策略是无移动的策略。\n- 离线算法的最小可能成本为 $\\text{Cost}_{\\text{OPT}} = m$。\n\n**竞争力比率 (R) 的推导**\n\n竞争力比率 $R$ 是在线算法成本与最优离线成本之比。\n$$ R = \\frac{\\text{Cost}_{\\text{LF}}}{\\text{Cost}_{\\text{OPT}}} $$\n代入推导出的成本：\n$$ R = \\frac{m(\\frac{5}{4} + \\frac{\\beta}{2})}{m} $$\n因子 $m$ 可以消去，只要 $m \\ne 0$，这是成立的。\n$$ R = \\frac{5}{4} + \\frac{\\beta}{2} $$\n这就是局部修复算法在给定序列上的确切竞争力比率，表示为关于 $\\beta$ 的封闭形式表达式。",
            "answer": "$$\n\\boxed{\\frac{5}{4} + \\frac{\\beta}{2}}\n$$"
        }
    ]
}