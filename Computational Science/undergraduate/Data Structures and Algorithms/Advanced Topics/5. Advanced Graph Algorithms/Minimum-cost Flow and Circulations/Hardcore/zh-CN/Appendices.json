{
    "hands_on_practices": [
        {
            "introduction": "最小成本流算法的核心在于迭代地寻找成本最低的增广路径。本练习将此关键步骤独立出来，要求你在给定一个可行流的基础上，找出增加一单位流量所需的最小附加成本。通过构建和分析相应的残差网络，你将深入理解残差图的概念，特别是带有负成本的反向边如何帮助我们找到优化流的路径。",
            "id": "3253528",
            "problem": "考虑一个有向网络 $G=(V,E)$，其顶点集为 $V=\\{s,a,b,t\\}$，有向边为 $(u,v)\\in E$。每条边都有一个非负整数容量和一个实数单位成本。一个流的总成本是所有有向边 $(u,v)\\in E$ 上，边 $(u,v)$ 的流量与其单位成本的乘积之和。该网络由以下边的规格定义：\n- $(s,a)$ 的容量为 $1$，单位成本为 $1$。\n- $(s,b)$ 的容量为 $1$，单位成本为 $1$。\n- $(a,b)$ 的容量为 $1$，单位成本为 $3$。\n- $(a,t)$ 的容量为 $1$，单位成本为 $0$。\n- $(b,t)$ 的容量为 $1$，单位成本为 $0$。\n\n给定一个值为 $1$ 的可行 $s$–$t$ 流 $f$，其非零边流量定义如下：\n- $f(s,a)=1$，\n- $f(a,b)=1$，\n- $f(b,t)=1$，\n且在所有其他边上 $f(u,v)=0$。\n\n确定从给定的流 $f$ 开始，将总 $s$–$t$ 流量值恰好增加 $1$ 个单位所需的最小额外成本。请用实数表示你的答案。无需四舍五入。",
            "solution": "为了确定增加一单位流量的最小额外成本，我们需要在给定流 $f$ 的残差网络 $G_f$ 中，找到从源点 $s$ 到汇点 $t$ 的成本最短的路径。\n\n1.  **构建残差网络 $G_f$**：\n    - **前向边**（原网络中流量小于容量的边）：\n        - 边 $(s,b)$: 流量为 0，容量为 1。因此，残差网络中存在边 $(s,b)$，其残差容量为 $1-0=1$，成本为 $1$。\n        - 边 $(a,t)$: 流量为 0，容量为 1。因此，残差网络中存在边 $(a,t)$，其残差容量为 $1-0=1$，成本为 $0$。\n    - **后向边**（原网络中流量大于零的边）：\n        - 边 $(s,a)$: 流量为 1。因此，残差网络中存在后向边 $(a,s)$，其残差容量为 $1$，成本为 $-c(s,a) = -1$。\n        - 边 $(a,b)$: 流量为 1。因此，残差网络中存在后向边 $(b,a)$，其残差容量为 $1$，成本为 $-c(a,b) = -3$。\n        - 边 $(b,t)$: 流量为 1。因此，残差网络中存在后向边 $(t,b)$，其残差容量为 $1$，成本为 $-c(b,t) = 0$。\n\n2.  **在 $G_f$ 中寻找最短路径**：\n    我们需要在包含以下边的残差网络中，找到从 $s$ 到 $t$ 的最短路径：\n    - $(s,b)$，成本 1\n    - $(a,t)$，成本 0\n    - $(a,s)$，成本 -1\n    - $(b,a)$，成本 -3\n    - $(t,b)$，成本 0\n\n    通过检查，可以发现一条从 $s$ 到 $t$ 的路径：$s \\to b \\to a \\to t$。\n    - 路径上的边为 $(s,b)$，$(b,a)$ 和 $(a,t)$。\n    - 这条路径的总成本为：$c(s,b) + c(b,a) + c(a,t) = 1 + (-3) + 0 = -2$。\n\n3.  **结论**：\n    残差网络中从 $s$ 到 $t$ 的最短路径成本为 -2。这代表了增加一单位流量所带来的最小成本变化。因此，将总流量增加 1 个单位所需的最小额外成本是 -2。",
            "answer": "$$\n\\boxed{-2}\n$$"
        },
        {
            "introduction": "在将理论应用于实际问题时，我们常常需要对网络模型进行转换，以适应标准算法。本练习将引导你实践一种核心建模技巧——节点分裂——来处理网络中节点（而非边）的容量限制。通过这个练习，你将学会如何将一个看似复杂的约束转化为一个标准的、仅有边容量的网络流问题，这对于解决物流枢纽或网络路由器等场景的流量限制至关重要。",
            "id": "3253512",
            "problem": "给定一个带有顶点容量的最小费用流（MCF）问题的有向网络。形式上，设 $G=(V,E)$ 是一个有向图，其中有 $|V|=n$ 个顶点和 $|E|=m$ 条边。每条边 $(u,v)\\in E$ 都有一个非负容量和一个单位流量的实值费用。顶点的一个子集 $K\\subseteq V$ 受到容量限制：每个 $v\\in K$ 都有一个有限的顶点容量 $U_v\\in\\mathbb{R}_{\\ge 0}$，该容量是经过 $v$ 的总流量的上限。$V\\setminus K$ 中的顶点具有无限的顶点容量。假设顶点上指定了供给和需求，其指定方式保证了可行流的存在，并且每条边上的费用与流量大小成线性关系。问题要求使用标准的顶点分裂缩减法，将此实例转换为一个仅包含边容量（无顶点容量）的等价实例：\n\n- 对于每个 $v\\in K$，将 $v$ 替换为两个顶点 $v^{\\mathrm{in}}$ 和 $v^{\\mathrm{out}}$，添加一条内部边 $(v^{\\mathrm{in}},v^{\\mathrm{out}})$，其容量为 $U_v$，费用为零，将每条原始的入边 $(u,v)$ 重定向：如果 $u\\in K$，则重定向为 $(u^{\\mathrm{out}},v^{\\mathrm{in}})$；如果 $u\\notin K$，则重定向为 $(u,v^{\\mathrm{in}})$，并将每条原始的出边 $(v,w)$ 重定向：如果 $w\\in K$，则重定向为 $(v^{\\mathrm{out}},w^{\\mathrm{in}})$；如果 $w\\notin K$，则重定向为 $(v^{\\mathrm{out}},w)$。$V\\setminus K$ 中的顶点保持不变，重定向后的边的费用与原始边保持一致。对于每个分裂的顶点 $v\\in K$，其供给和需求附加到 $v^{\\mathrm{in}}$ 上；对于 $V\\setminus K$ 中的顶点，其供给和需求保持不变。\n- 转换后的图记为 $G'=(V',E')$，它不包含顶点容量。\n\n基于上述 MCF 的基本定义和所述的缩减方法，推导以 $n$、$m$ 和 $k=|K|$ 表示的 $|V'|$ 和 $|E'|$ 的精确表达式。使用这些表达式计算图的大小变化绝对值，其中图的大小度量为 $S(G)=|V|+|E|$，即\n$$\n\\Delta S \\;=\\; \\bigl(|V'|+|E'|\\bigr)\\;-\\;\\bigl(|V|+|E|\\bigr).\n$$\n\n然后，对于 $n=18$、$m=44$ 和 $k=13$ 的具体实例，使用上述仅分裂受容量限制顶点的缩减策略，计算 $\\Delta S$ 的值。请以单个整数形式给出最终答案。无需四舍五入。",
            "solution": "问题陈述已经过验证，被认为是合理的。这是一个在网络流算法领域内定义明确的问题，基于已有的图变换准则。所提供的定义是自洽且一致的。\n\n任务是确定当一个带有顶点容量的图 $G=(V,E)$ 被转换为一个仅有边容量的等价图 $G'=(V',E')$ 时，顶点和边的总数变化量 $\\Delta S = (|V'|+|E'|) - (|V|+|E|)$。该变换是为具有有限容量的 $k=|K|$ 个顶点子集定义的。\n\n设原始图 $G$ 中的顶点数为 $n = |V|$，边数为 $m = |E|$。设具有有限容量的顶点数为 $k = |K|$。\n\n首先，我们推导转换后图 $G'$ 中的顶点数 $|V'|$ 的表达式。\n顶点集 $V$ 被划分为两个不相交的子集：容量受限的顶点集 $K$（其中 $|K|=k$）和无容量限制的顶点集 $V \\setminus K$（其中 $|V \\setminus K| = n-k$）。\n转换规则规定：\n- $K$ 中的 $k$ 个顶点中的每一个都被替换为两个新顶点 $v^{\\mathrm{in}}$ 和 $v^{\\mathrm{out}}$。这为 $V'$ 贡献了 $2k$ 个顶点。\n- $V \\setminus K$ 中的 $n-k$ 个顶点保持不变。这些顶点也是 $V'$ 的一部分。\n新的顶点集 $V'$ 是所有 $v\\in K$ 对应的 $v^{\\mathrm{in}}$ 和 $v^{\\mathrm{out}}$ 的集合与集合 $V\\setminus K$ 的并集。这些集合是不相交的。\n因此，$G'$ 中的顶点总数为：\n$$|V'| = 2k + (n-k) = n+k$$\n\n接下来，我们推导转换后图 $G'$ 中的边数 $|E'|$ 的表达式。\n边集 $E'$ 由两种不同类型的边组成：\n1.  **新的内部边**：对于被分裂的 $K$ 中的 $k$ 个顶点中的每一个 $v$，一条新的“内部”边 $(v^{\\mathrm{in}}, v^{\\mathrm{out}})$ 被添加到图中。由于有 $k$ 个这样的顶点，这恰好增加了 $k$ 条新边。\n2.  **重定向的原始边**：该转换指定了重定向 $E$ 中每条原始边的规则。我们来分析一条任意边 $(u,v) \\in E$：\n    - 如果 $u \\notin K$ 且 $v \\notin K$，边保持为 $(u,v)$。\n    - 如果 $u \\notin K$ 且 $v \\in K$，边被重定向为 $(u, v^{\\mathrm{in}})$。\n    - 如果 $u \\in K$ 且 $v \\notin K$，边被重定向为 $(u^{\\mathrm{out}}, v)$。\n    - 如果 $u \\in K$ 且 $v \\in K$，边被重定向为 $(u^{\\mathrm{out}}, v^{\\mathrm{in}})$。\n在所有情况下，$E$ 中的 $m$ 条原始边中的每一条都恰好映射到 $E'$ 中的一条边。复杂的重定向规则只是定义了新的端点，但没有改变这些边的数量。因此，在 $E'$ 中有 $m$ 条这样的边。\n\n将这两个部分组合起来， $G'$ 中的总边数是新的内部边和重定向的原始边之和：\n$$|E'| = k + m$$\n\n现在，我们可以计算图大小的变化量 $\\Delta S$，其定义为 $S(G') - S(G)$，其中图 $G$ 的大小 $S(G)$ 由 $|V|+|E|$ 给出。\n原始图的大小为 $S(G) = |V| + |E| = n+m$。\n转换后图的大小为 $S(G') = |V'| + |E'| = (n+k) + (m+k) = n+m+2k$。\n\n因此，图大小的绝对变化量为：\n$$\n\\Delta S = S(G') - S(G) = \\bigl(|V'|+|E'|\\bigr) - \\bigl(|V|+|E|\\bigr)\n$$\n$$\n\\Delta S = (n+m+2k) - (n+m) = 2k\n$$\n有趣的是，大小的变化量仅取决于受容量限制的顶点数 $k$，而与顶点或边的总数无关。\n\n最后，我们被要求计算特定实例 $n=18$，$m=44$ 和 $k=13$ 下的 $\\Delta S$ 值。\n将 $k=13$ 代入我们推导出的 $\\Delta S$ 表达式中：\n$$\n\\Delta S = 2k = 2 \\times 13 = 26\n$$\n\n图的总大小，以顶点数和边数之和来衡量，增加了26。",
            "answer": "$$\\boxed{26}$$"
        },
        {
            "introduction": "最优解是相对于一组特定参数而言的。如果其中一个参数（例如某条边的成本）发生变化，我们如何调整以重新达到最优？本练习将带你探讨最小成本流的敏感性分析，即当一条边的成本显著降低后，如何重新优化。通过在残差网络中寻找并利用新产生的负成本环路，你将学会量化成本的潜在减少量，并深刻理解最优性条件在动态变化中的应用。",
            "id": "3253618",
            "problem": "考虑一个处于最优可行状态的有向网络上的最小费用流实例。设其对应的残留网络（Residual Network (RN)）的节点集为 $\\{A,B,C,D\\}$，并包含以下有向残留边，每条边都标注有残留容量和费用，格式为（残留容量，费用）：\n- $(A,B)$，其值为 $(3, 4)$，\n- $(B,C)$，其值为 $(2, 1)$，\n- $(C,A)$，其值为 $(1, 2)$，\n- $(B,D)$，其值为 $(2, 1)$，\n- $(D,A)$，其值为 $(2, 5)$。\n\n假设没有其他残留边，并且此残留网络中没有负费用有向圈。残留网络中前向边的费用等于相应原始边的费用，而后向边（此处未列出）的费用等于相应原始边费用的负值。已知当前的可行流是最优的。\n\n现在，将单一边 $(A,B)$ 的原始费用减少一个非负值 $\\Delta$，其中 $\\Delta = 9$。改变之后，系统可以重新优化以得到一个新的最小费用可行流。\n\n仅使用最小费用流最优性的基本定义（即残留网络中不存在负费用圈）以及沿负费用圈进行增广的效果，确定因边 $(A,B)$ 的费用减少 $\\Delta$ 而可能导致的最优总费用的精确最大可能减少量。请以单个实数形式给出你的答案。无需四舍五入。",
            "solution": "用户希望我解决一个关于最小费用流的问题。\n\n### 步骤 1：提取已知条件\n- 网络的节点集为 $\\{A, B, C, D\\}$。\n- 问题从一个最优可行流开始，其残留网络（RN）已给出。\n- 有向残留边及其（残留容量，费用）为：\n  - $(A,B)$: $(3, 4)$\n  - $(B,C)$: $(2, 1)$\n  - $(C,A)$: $(1, 2)$\n  - $(B,D)$: $(2, 1)$\n  - $(D,A)$: $(2, 5)$\n- 没有其他残留边。\n- 初始残留网络中没有负费用有向圈。这与初始流是最优的这一条件相符。\n- 原始边 $(A,B)$ 的费用减少一个非负值 $\\Delta = 9$。\n- 目标是找出系统重新优化后，最优总费用的最大可能减少量。\n\n### 步骤 2：使用已知条件进行验证\n1.  **科学依据与客观性**：该问题在网络流理论，特别是最小费用流和循环流的框架内定义明确。它使用了残留网络、最优性条件（不存在负费用圈）和圈增广的标准定义。语言客观而精确。\n\n2.  **自洽性与一致性**：\n    - 问题陈述指明了完整的节点集 $\\{A,B,C,D\\}$，并断言“没有其他残留边”。这意味着网络是封闭的，任何可行流都是一个循环流，因为没有指定带有外部需求的源节点或汇节点。\n    - 该问题是一个最小费用循环流问题。\n    - 所有给定残留边的费用都是正的。问题指出，残留前向边的费用等于原始边的费用。这意味着与这些残留边——$(A,B), (B,C), (C,A), (B,D), (D,A)$——相对应的原始图中的边都具有正费用。\n    - 在一个所有边费用均为非负的最小费用循环流问题中，任何非零循环流的总费用都必须大于或等于零。零流，即对所有边 $e$ 都有 $f_0(e)=0$，是一个总费用为 $0$ 的有效循环流。因此，初始问题的唯一最优解是零流，$f_0 = 0$。\n    - 这个推论唯一地确定了初始最优状态。每条边上的初始流均为 $0$，初始总费用为 $C_{\\text{old}} = 0$。\n    - 这使得问题成为良定的，因为关于初始流的模糊性已经消除。“最大可能减少量”这个说法可能是多余的，因为只有一个可能的初始最优状态。\n\n3.  **结论**：问题是有效的。它需要仔细推导得出初始最优流必须是零流。\n\n### 步骤 3：进行求解\n\n设 $c(u,v)$ 为原始网络中边 $(u,v)$ 的费用。初始状态是一个最优流 $f_0$，其总费用为 $C_{\\text{old}}$。正如在验证阶段所确定的，该问题是一个边费用非负的最小费用循环流问题。唯一的最优流是零流，即对所有边 $e$ 都有 $f_0(e) = 0$。因此，边 $(A,B)$ 上的初始流为 $f_0(A,B) = 0$，初始总费用为 $C_{\\text{old}} = 0$。\n\n前向边 $(u,v)$ 的残留容量由 $u_{f_0}(u,v) = \\text{capacity}(u,v) - f_0(u,v)$ 给出。由于 $f_0=0$，给定的残留容量就是原始边的容量。例如，$\\text{capacity}(A,B) = 3$。\n\n边 $(A,B)$ 的费用减少了 $\\Delta = 9$。残留边 $(A,B)$ 的初始费用为 $4$，所以原始边的费用是 $c(A,B) = 4$。新的费用是 $c'(A,B) = c(A,B) - \\Delta = 4 - 9 = -5$。\n\n这个费用变化影响了残留网络中的费用。对于流 $f_0=0$ 而言，其残留网络就是原始网络本身。残留边 $(A,B)$ 的费用从 $4$ 变为 $-5$。所有其他残留边的费用保持不变。\n\n新的残留网络不再是最优的，因为费用变化可能引入了负费用圈。我们来检查涉及边 $(A,B)$ 的圈：\n1.  圈 $\\gamma_1 = A \\to B \\to C \\to A$。该圈的新费用为：\n    $$C'(\\gamma_1) = c'(A,B) + c(B,C) + c(C,A) = -5 + 1 + 2 = -2$$\n    这是一个负费用圈。\n\n2.  圈 $\\gamma_2 = A \\to B \\to D \\to A$。该圈的新费用为：\n    $$C'(\\gamma_2) = c'(A,B) + c(B,D) + c(D,A) = -5 + 1 + 5 = 1$$\n    这个圈的费用不为负。\n\n为了恢复最优性，我们必须沿所有负费用圈增广流，直到不再有负费用圈为止。唯一的负费用圈是 $\\gamma_1$。\n\n我们可以沿 $\\gamma_1$ 推送的流量 $k$ 受其各边瓶颈残留容量的限制：\n$$k = \\min(u_{f_0}(A,B), u_{f_0}(B,C), u_{f_0}(C,A)) = \\min(3, 2, 1) = 1$$\n我们沿圈 $A \\to B \\to C \\to A$ 发送 $k=1$ 单位的流来增广流。\n\n新的流 $f_1$ 是通过将此循环流加到初始零流上得到的：\n- $f_1(A,B) = f_0(A,B) + k = 0 + 1 = 1$\n- $f_1(B,C) = f_0(B,C) + k = 0 + 1 = 1$\n- $f_1(C,A) = f_0(C,A) + k = 0 + 1 = 1$\n- 所有其他流保持为 $0$。\n\n此次增广后，边 $(C,A)$ 的残留容量变为 $u_{f_1}(C,A) = u_{f_0}(C,A) - k = 1 - 1 = 0$。这使得边 $(C,A)$ 饱和，并打破了圈 $\\gamma_1$。没有其他负费用圈存在。因此，流 $f_1$ 是新的最优流。\n\n新的最优总费用 $C_{\\text{new}}$ 是用新的边费用 $c'$ 评估流 $f_1$ 的费用：\n$$C_{\\text{new}} = \\sum_e c'(e) f_1(e)$$\n$$C_{\\text{new}} = c'(A,B)f_1(A,B) + c(B,C)f_1(B,C) + c(C,A)f_1(C,A)$$\n$$C_{\\text{new}} = (-5)(1) + (1)(1) + (2)(1) = -5 + 1 + 2 = -2$$\n\n最优总费用的减少量是旧的最优费用与新的最优费用之差：\n$$\\text{减少量} = C_{\\text{old}} - C_{\\text{new}} = 0 - (-2) = 2$$\n\n最终验证：费用的变化也可以通过增广流量与负费用圈费用的乘积来计算：$k \\times |C'(\\gamma_1)| = 1 \\times |-2| = 2$。这代表了从总费用为 $C'_{0}$（即流 $f_0$ 在新费用 $c'$ 下的费用，由于 $f_0=0$ 此费用为 $0$）的状态开始的总费用减少量。\n\n从初始状态（在费用 $c$ 下的总费用为 $C_{\\text{old}}$）到最终状态（在新费用 $c'$ 下的总费用为 $C_{\\text{new}}$）的总费用减少量确实是 $2$。",
            "answer": "$$\\boxed{2}$$"
        }
    ]
}