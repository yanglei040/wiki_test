{
    "hands_on_practices": [
        {
            "introduction": "We begin with the simplest possible scenario: optimizing a function in one dimension. This problem uses an intuitive physical analogy of forces to illustrate the fundamental KKT condition at a boundary optimum. By visualizing the objective function's 'push' against the constraint's 'wall', we can directly see how the gradients must oppose each other at the solution. ",
            "id": "2175825",
            "problem": "A particle is constrained to move along the x-axis only within the closed interval $[0, 2]$. The particle is subject to a potential energy field described by the function $U(x) = (x-a)^2$, where the constant $a=5$. The particle will naturally settle at an equilibrium position $x^*$ within the interval that minimizes its potential energy.\n\nAt this equilibrium position, the force exerted by the potential field, defined as $F_{pot} = -\\frac{dU}{dx}$, is balanced by the forces exerted by the boundaries of the interval. A boundary exerts a non-zero \"contact\" force only when the particle is pressed against it.\n\nCalculate the magnitude of the contact force exerted by the active boundary on the particle at its equilibrium position $x^*$.",
            "solution": "The potential energy is $U(x)=(x-a)^{2}$ with $a=5$. The unconstrained equilibrium satisfies $F_{pot}=-\\frac{dU}{dx}=0$, which requires $\\frac{dU}{dx}=0$. Compute the derivative:\n$$\n\\frac{dU}{dx}=2(x-a)=2(x-5).\n$$\nSetting $\\frac{dU}{dx}=0$ gives $x=5$, which is not in the allowed interval $[0,2]$. On the interval $[0,2]$, since for $x\\in[0,2]$ one has $x-50$, it follows that\n$$\n\\frac{dU}{dx}=2(x-5)0,\n$$\nso $U(x)$ is strictly decreasing on $[0,2]$. Therefore, the constrained minimizer is at the right boundary:\n$$\nx^{*}=2.\n$$\nThe force from the potential is\n$$\nF_{pot}=-\\frac{dU}{dx}=-2(x-5)=10-2x.\n$$\nAt $x^*=2$,\n$$\nF_{pot}(2)=10-2\\cdot 2=6.\n$$\nAt equilibrium with an active boundary, the contact force $F_{c}$ from the boundary balances the potential force so that the net force is zero:\n$$\nF_{c}+F_{pot}=0 \\quad \\Rightarrow \\quad F_{c}=-F_{pot}.\n$$\nHence the magnitude of the contact force is\n$$\n|F_{c}|=|F_{pot}(2)|=6.\n$$",
            "answer": "$$\\boxed{6}$$"
        },
        {
            "introduction": "Moving into two dimensions, we explore what happens when an optimal solution lies at a corner or vertex of the feasible region. This problem demonstrates a crucial geometric insight: the negative gradient of the objective function must lie within the cone formed by the gradients of the active constraints. Calculating the KKT multipliers reveals exactly how to combine these gradient vectors to achieve this balance. ",
            "id": "2175840",
            "problem": "Consider an optimization problem in a two-dimensional space. The goal is to find a point $\\mathbf{x} = (x_1, x_2)$ within a specific feasible region that is closest, in the standard Euclidean distance, to a given external point.\n\nThe feasible region, denoted by $C$, is a closed rectangular set defined by the constraints:\n$-2 \\le x_1 \\le 2$\n$-1 \\le x_2 \\le 1$\n\nThe external point is $\\mathbf{p} = (3, 5)$.\n\nThe problem is formally stated as:\n$$ \\text{Minimize} \\quad f(\\mathbf{x}) = \\|\\mathbf{x} - \\mathbf{p}\\|_2^2 $$\n$$ \\text{Subject to} \\quad \\mathbf{x} \\in C $$\n\nThis is a convex optimization problem, and its solution can be characterized by the Karush-Kuhn-Tucker (KKT) conditions. At the optimal solution $\\mathbf{x}^*$, the stationarity condition of KKT states that the negative gradient of the objective function, $-\\nabla f(\\mathbf{x}^*)$, can be expressed as a non-negative linear combination of the gradients of the active constraints:\n$$-\\nabla f(\\mathbf{x}^*) = \\sum_{i \\in \\mathcal{A}(\\mathbf{x}^*)} \\mu_i \\nabla g_i(\\mathbf{x}^*)$$\nwhere $\\mathcal{A}(\\mathbf{x}^*)$ is the set of indices of active constraints (i.e., $g_i(\\mathbf{x}^*) = 0$), and $\\mu_i \\ge 0$ are the corresponding KKT multipliers.\n\nYour task is to determine the sum of all non-zero KKT multipliers, $\\sum \\mu_i$, for this optimization problem. Provide the final answer as a single real number.",
            "solution": "We are projecting the external point $\\mathbf{p}=(3,5)$ onto the closed rectangle $C=\\{(x_1, x_2): -2 \\le x_1 \\le 2, -1 \\le x_2 \\le 1\\}$. Because the Euclidean projection onto a box is obtained by clamping each coordinate to its interval, the optimal point is\n$$x_1^*=\\min\\{\\max\\{3,-2\\},2\\}=2, \\quad x_2^*=\\min\\{\\max\\{5,-1\\},1\\}=1,$$\nso $\\mathbf{x}^{*}=(2,1)$.\n\nThe objective is $f(\\mathbf{x})=\\|\\mathbf{x}-\\mathbf{p}\\|_{2}^{2}=(x_1-3)^{2}+(x_2-5)^{2}$ with gradient\n$$\n\\nabla f(\\mathbf{x})=2\\begin{pmatrix}x_1-3\\\\ x_2-5\\end{pmatrix}.\n$$\nAt $\\mathbf{x}^{*}$, this gives\n$$\n\\nabla f(\\mathbf{x}^{*})=2\\begin{pmatrix}2-3\\\\ 1-5\\end{pmatrix}=2\\begin{pmatrix}-1\\\\ -4\\end{pmatrix}=\\begin{pmatrix}-2\\\\ -8\\end{pmatrix},\\quad -\\nabla f(\\mathbf{x}^{*})=\\begin{pmatrix}2\\\\ 8\\end{pmatrix}.\n$$\n\nWrite the four inequality constraints as\n$$\ng_1(\\mathbf{x})=x_1-2\\leq 0,\\quad g_2(\\mathbf{x})=-x_1-2\\leq 0,\\quad g_3(\\mathbf{x})=x_2-1\\leq 0,\\quad g_4(\\mathbf{x})=-x_2-1\\leq 0.\n$$\nAt $\\mathbf{x}^{*}=(2,1)$, the active constraints are $g_1(\\mathbf{x}^{*})=0$ and $g_3(\\mathbf{x}^{*})=0$, while $g_2(\\mathbf{x}^{*})0$ and $g_4(\\mathbf{x}^{*})0$. Their gradients are\n$$\n\\nabla g_1(\\mathbf{x}^{*})=\\begin{pmatrix}1\\\\ 0\\end{pmatrix},\\quad \\nabla g_3(\\mathbf{x}^{*})=\\begin{pmatrix}0\\\\ 1\\end{pmatrix},\\quad \\nabla g_2(\\mathbf{x}^{*})=\\begin{pmatrix}-1\\\\ 0\\end{pmatrix},\\quad \\nabla g_4(\\mathbf{x}^{*})=\\begin{pmatrix}0\\\\ -1\\end{pmatrix}.\n$$\n\nBy the KKT stationarity condition with multipliers $\\mu_{i}\\geq 0$ and complementary slackness, we have $\\mu_{2}=\\mu_{4}=0$ and\n$$\n-\\nabla f(\\mathbf{x}^{*})=\\mu_{1}\\nabla g_{1}(\\mathbf{x}^{*})+\\mu_{3}\\nabla g_{3}(\\mathbf{x}^{*}).\n$$\nThus\n$$\n\\begin{pmatrix}2\\\\ 8\\end{pmatrix}=\\mu_{1}\\begin{pmatrix}1\\\\ 0\\end{pmatrix}+\\mu_{3}\\begin{pmatrix}0\\\\ 1\\end{pmatrix}=\\begin{pmatrix}\\mu_{1}\\\\ \\mu_{3}\\end{pmatrix},\n$$\nwhich yields $\\mu_{1}=2$ and $\\mu_{3}=8$. The sum of all non-zero KKT multipliers is therefore\n$$\n\\mu_{1}+\\mu_{3}=2+8=10.\n$$",
            "answer": "$$\\boxed{10}$$"
        },
        {
            "introduction": "This practice tackles a more general nonlinear problem with curved boundaries, a common scenario in many applications. Solving it requires a systematic application of the full KKT conditions, including case analysis to determine which constraints are active at the optimum. This exercise solidifies your understanding of how the KKT framework provides a powerful and methodical approach to solving complex, constrained optimization problems. ",
            "id": "2175829",
            "problem": "A particle's position $(x_1, x_2)$ in a two-dimensional plane is confined to a region defined by the inequalities $2x_1^2 \\le x_2$ and $x_2 \\le x_1^2 + 1$. We are interested in finding the point within this allowed region that is closest to a fixed observation point $P=(0, 2)$. To simplify the calculation, you are to minimize the squared Euclidean distance between the particle and the point $P$.\n\nIf more than one point satisfies this condition, provide the coordinates of the point that has a positive $x_1$ coordinate. Your final answer should be a pair of numbers $(x_1, x_2)$ in exact, analytic form.",
            "solution": "The problem is to find the point $(x_1, x_2)$ that minimizes the squared Euclidean distance to the point $P=(0,2)$, subject to a set of constraints.\n\nFirst, we formulate the optimization problem. The objective function to minimize is the squared distance from $(x_1, x_2)$ to $(0, 2)$:\n$$f(x_1, x_2) = (x_1 - 0)^2 + (x_2 - 2)^2 = x_1^2 + (x_2 - 2)^2$$\n\nThe feasible region is defined by two inequality constraints. We write them in the standard form $g_i(x_1, x_2) \\le 0$:\n1.  $2x_1^2 \\le x_2 \\implies g_1(x_1, x_2) = 2x_1^2 - x_2 \\le 0$\n2.  $x_2 \\le x_1^2 + 1 \\implies g_2(x_1, x_2) = x_2 - x_1^2 - 1 \\le 0$\n\nThis is a nonlinear programming problem, which can be solved using the Karush-Kuhn-Tucker (KKT) conditions. We define the Lagrangian function $L(x_1, x_2, \\mu_1, \\mu_2)$ with Lagrange multipliers $\\mu_1$ and $\\mu_2$:\n$$L(x_1, x_2, \\mu_1, \\mu_2) = f(x_1, x_2) + \\mu_1 g_1(x_1, x_2) + \\mu_2 g_2(x_1, x_2)$$\n$$L(x_1, x_2, \\mu_1, \\mu_2) = x_1^2 + (x_2 - 2)^2 + \\mu_1(2x_1^2 - x_2) + \\mu_2(x_2 - x_1^2 - 1)$$\n\nThe KKT conditions for a minimum at $(x_1^*, x_2^*)$ are:\n1.  **Stationarity**: The gradient of the Lagrangian with respect to $x_1$ and $x_2$ must be zero.\n    - $\\frac{\\partial L}{\\partial x_1} = 2x_1 + 4\\mu_1 x_1 - 2\\mu_2 x_1 = 2x_1(1 + 2\\mu_1 - \\mu_2) = 0$\n    - $\\frac{\\partial L}{\\partial x_2} = 2(x_2 - 2) - \\mu_1 + \\mu_2 = 0$\n2.  **Primal Feasibility**: The point must satisfy the original constraints.\n    - $2x_1^2 - x_2 \\le 0$\n    - $x_2 - x_1^2 - 1 \\le 0$\n3.  **Dual Feasibility**: The Lagrange multipliers for inequality constraints must be non-negative.\n    - $\\mu_1 \\ge 0$\n    - $\\mu_2 \\ge 0$\n4.  **Complementary Slackness**: The product of each multiplier and its corresponding constraint function must be zero.\n    - $\\mu_1(2x_1^2 - x_2) = 0$\n    - $\\mu_2(x_2 - x_1^2 - 1) = 0$\n\nWe analyze the stationarity conditions. From $\\frac{\\partial L}{\\partial x_1} = 0$, we have two cases:\n\n**Case 1: $x_1 = 0$**\nIf $x_1 = 0$, the primal feasibility constraints become $0 \\le x_2$ and $x_2 \\le 1$. So, $x_2$ is in the interval $[0, 1]$.\nThe objective function becomes $f(0, x_2) = (x_2-2)^2$. We need to find the minimum of this function for $x_2 \\in [0,1]$. The function $(x_2-2)^2$ is a parabola with its vertex (minimum) at $x_2=2$. Since this is outside the interval $[0,1]$, the minimum on the interval will occur at the boundary point closest to $x_2=2$, which is $x_2=1$.\nSo, a candidate for the optimal point is $(0, 1)$. Let's check if it satisfies the other KKT conditions.\nAt $(x_1, x_2) = (0, 1)$:\n- $g_1(0, 1) = 2(0)^2 - 1 = -1  0$. The first constraint is inactive.\n- $g_2(0, 1) = 1 - 0^2 - 1 = 0$. The second constraint is active.\nFrom complementary slackness, since $g_1  0$, we must have $\\mu_1 = 0$.\nNow we use the second stationarity condition: $2(x_2 - 2) - \\mu_1 + \\mu_2 = 0$.\nSubstituting $(x_1, x_2) = (0, 1)$ and $\\mu_1 = 0$:\n$2(1 - 2) - 0 + \\mu_2 = 0 \\implies -2 + \\mu_2 = 0 \\implies \\mu_2 = 2$.\nThe multipliers are $\\mu_1 = 0$ and $\\mu_2 = 2$. Both satisfy dual feasibility ($\\ge 0$). All KKT conditions are met.\nThe point $(0, 1)$ is a KKT point. The value of the objective function is $f(0, 1) = 0^2 + (1-2)^2 = 1$.\n\n**Case 2: $1 + 2\\mu_1 - \\mu_2 = 0$**\nThis implies $\\mu_2 = 1 + 2\\mu_1$. Since $\\mu_1 \\ge 0$ (dual feasibility), it follows that $\\mu_2 \\ge 1$.\nBecause $\\mu_2 > 0$, the complementary slackness condition $\\mu_2(x_2 - x_1^2 - 1) = 0$ requires that the second constraint must be active: $x_2 - x_1^2 - 1 = 0$, which means $x_2 = x_1^2 + 1$.\n\nNow, we consider the first constraint, $g_1 = 2x_1^2 - x_2 \\le 0$.\n- **Subcase 2a: $g_1$ is inactive** ($2x_1^2 - x_2  0$).\nBy complementary slackness, this implies $\\mu_1 = 0$.\nUsing the relation from this case, $\\mu_2 = 1 + 2\\mu_1 = 1 + 2(0) = 1$.\nNow, substitute $\\mu_1=0$, $\\mu_2=1$ into the second stationarity condition:\n$2(x_2 - 2) - 0 + 1 = 0 \\implies 2x_2 - 4 + 1 = 0 \\implies 2x_2 = 3 \\implies x_2 = \\frac{3}{2}$.\nSince we are in the subcase where $g_2$ is active, we use $x_2 = x_1^2 + 1$:\n$\\frac{3}{2} = x_1^2 + 1 \\implies x_1^2 = \\frac{1}{2} \\implies x_1 = \\pm \\frac{1}{\\sqrt{2}} = \\pm \\frac{\\sqrt{2}}{2}$.\nLet's check our assumption that $g_1$ is inactive for these points:\n$g_1 = 2x_1^2 - x_2 = 2\\left(\\frac{1}{2}\\right) - \\frac{3}{2} = 1 - \\frac{3}{2} = -\\frac{1}{2}  0$. The assumption is valid.\nSo we have two more KKT points: $(\\frac{\\sqrt{2}}{2}, \\frac{3}{2})$ and $(-\\frac{\\sqrt{2}}{2}, \\frac{3}{2})$.\nThe objective function value at these points is:\n$f(\\pm\\frac{\\sqrt{2}}{2}, \\frac{3}{2}) = (\\pm\\frac{\\sqrt{2}}{2})^2 + (\\frac{3}{2} - 2)^2 = \\frac{2}{4} + (-\\frac{1}{2})^2 = \\frac{1}{2} + \\frac{1}{4} = \\frac{3}{4}$.\n\n- **Subcase 2b: $g_1$ is active** ($2x_1^2 - x_2 = 0$).\nIn this subcase, both constraints are active: $x_2=2x_1^2$ and $x_2=x_1^2+1$.\nSolving this system gives $2x_1^2 = x_1^2 + 1 \\implies x_1^2 = 1 \\implies x_1 = \\pm 1$. Then $x_2 = 2(1)^2=2$.\nThe points are $(1, 2)$ and $(-1, 2)$.\nLet's check the stationarity conditions. We have $\\mu_2 = 1 + 2\\mu_1$.\nThe second stationarity equation with $x_2=2$ is:\n$2(2 - 2) - \\mu_1 + \\mu_2 = 0 \\implies \\mu_2 = \\mu_1$.\nSubstituting this into $\\mu_2 = 1 + 2\\mu_1$ gives $\\mu_1 = 1 + 2\\mu_1 \\implies -\\mu_1 = 1 \\implies \\mu_1 = -1$.\nThis violates the dual feasibility condition $\\mu_1 \\ge 0$. Thus, this subcase does not yield any valid solutions.\n\n**Comparison of Candidate Points**\nWe have found three KKT points and their corresponding objective function values:\n1.  $(0, 1)$ with $f(0, 1) = 1$.\n2.  $(\\frac{\\sqrt{2}}{2}, \\frac{3}{2})$ with $f(\\frac{\\sqrt{2}}{2}, \\frac{3}{2}) = \\frac{3}{4}$.\n3.  $(-\\frac{\\sqrt{2}}{2}, \\frac{3}{2})$ with $f(-\\frac{\\sqrt{2}}{2}, \\frac{3}{2}) = \\frac{3}{4}$.\n\nThe minimum value of the objective function is $\\frac{3}{4}$, which occurs at two points: $(\\frac{\\sqrt{2}}{2}, \\frac{3}{2})$ and $(-\\frac{\\sqrt{2}}{2}, \\frac{3}{2})$.\nThe problem asks for the point with a positive $x_1$ coordinate. This is $(\\frac{\\sqrt{2}}{2}, \\frac{3}{2})$.\n\nThe final answer is the coordinates $(x_1, x_2) = (\\frac{\\sqrt{2}}{2}, \\frac{3}{2})$.",
            "answer": "$$\\boxed{\\left( \\frac{\\sqrt{2}}{2}, \\frac{3}{2} \\right)}$$"
        }
    ]
}