{
    "hands_on_practices": [
        {
            "introduction": "掌握拉格朗日乘数法的第一步是解决一个基本但具有代表性的问题。这个练习  将带你进入一个经典的资源分配场景，你需要在一个固定的总资源下，最小化两个过程的组合成本。通过这个例子，你将实践构建拉格朗日函数并求解其一阶条件的核心步骤，这是所有更复杂应用的基石。",
            "id": "2216747",
            "problem": "考虑将一个固定的、归一化的资源分配给两个独立过程的问题。令 $x$ 和 $y$ 分别表示分配给第一个和第二个过程的资源分数，满足 $x \\geq 0$ 和 $y \\geq 0$。总资源必须被完全利用，这施加了一个约束，即分配的总和必须为一。与此分配相关的成本由函数 $f(x,y) = \\alpha x^2 + \\beta y^2$ 给出，其中 $\\alpha$ 和 $\\beta$ 是给定的正常数，分别代表每个过程的成本系数。\n\n你的任务是找到最优分配 $(x^*, y^*)$，使得在满足完全利用约束的条件下，总成本最小。你还必须找到在该最优点上的拉格朗日乘子 $\\lambda^*$ 的值。\n\n请用常数 $\\alpha$ 和 $\\beta$ 表示这个三元组 $(x^*, y^*, \\lambda^*)$。",
            "solution": "该问题是在等式约束 $g(x,y) = x+y-1=0$ 的条件下，最小化目标函数 $f(x,y) = \\alpha x^2 + \\beta y^2$。我们可以使用拉格朗日乘子法来解决这个问题。\n\n首先，我们定义拉格朗日函数 $\\mathcal{L}(x, y, \\lambda)$，其表达式为：\n$$\n\\mathcal{L}(x, y, \\lambda) = f(x,y) - \\lambda g(x,y)\n$$\n代入给定的函数，我们得到：\n$$\n\\mathcal{L}(x, y, \\lambda) = \\alpha x^2 + \\beta y^2 - \\lambda(x+y-1)\n$$\n为了找到拉格朗日函数的驻点（这些驻点对应于目标函数的约束极值），我们必须找到 $\\mathcal{L}$ 的梯度为零的点。通过求 $\\mathcal{L}$ 关于 $x$、$y$ 和 $\\lambda$ 的偏导数并令它们为零，我们得到一个包含三个方程的方程组。这些是最优性的一阶必要条件。\n\n1.  关于 $x$ 的偏导数：\n    $$\n    \\frac{\\partial \\mathcal{L}}{\\partial x} = 2\\alpha x - \\lambda = 0\n    $$\n    从此方程中，我们可以用 $\\lambda$ 表示 $x$：\n    $$\n    x = \\frac{\\lambda}{2\\alpha}\n    $$\n\n2.  关于 $y$ 的偏导数：\n    $$\n    \\frac{\\partial \\mathcal{L}}{\\partial y} = 2\\beta y - \\lambda = 0\n    $$\n    类似地，我们用 $\\lambda$ 表示 $y$：\n    $$\n    y = \\frac{\\lambda}{2\\beta}\n    $$\n\n3.  关于 $\\lambda$ 的偏导数：\n    $$\n    \\frac{\\partial \\mathcal{L}}{\\partial \\lambda} = -(x+y-1) = 0\n    $$\n    这恰好恢复了我们原来的约束方程：\n    $$\n    x+y=1\n    $$\n\n现在，我们得到了一个关于三个未知数 $x$、$y$ 和 $\\lambda$ 的三元线性方程组。我们可以通过将前两个方程中 $x$ 和 $y$ 的表达式代入第三个方程来求解这个方程组。\n\n将 $x = \\frac{\\lambda}{2\\alpha}$ 和 $y = \\frac{\\lambda}{2\\beta}$ 代入 $x+y=1$：\n$$\n\\frac{\\lambda}{2\\alpha} + \\frac{\\lambda}{2\\beta} = 1\n$$\n从左边提出因子 $\\lambda$：\n$$\n\\lambda \\left( \\frac{1}{2\\alpha} + \\frac{1}{2\\beta} \\right) = 1\n$$\n为了解出 $\\lambda$，我们首先对括号内的项进行通分：\n$$\n\\lambda \\left( \\frac{\\beta + \\alpha}{2\\alpha\\beta} \\right) = 1\n$$\n现在，我们可以分离出 $\\lambda$ 以求得其最优值 $\\lambda^*$：\n$$\n\\lambda^* = \\frac{2\\alpha\\beta}{\\alpha+\\beta}\n$$\n求得 $\\lambda^*$ 的值后，我们现在可以通过将 $\\lambda^*$ 代回到 $x$ 和 $y$ 的表达式中来找到最优分配 $x^*$ 和 $y^*$。\n\n对于 $x^*$：\n$$\nx^* = \\frac{\\lambda^*}{2\\alpha} = \\frac{1}{2\\alpha} \\left( \\frac{2\\alpha\\beta}{\\alpha+\\beta} \\right) = \\frac{\\beta}{\\alpha+\\beta}\n$$\n\n对于 $y^*$：\n$$\ny^* = \\frac{\\lambda^*}{2\\beta} = \\frac{1}{2\\beta} \\left( \\frac{2\\alpha\\beta}{\\alpha+\\beta} \\right) = \\frac{\\alpha}{\\alpha+\\beta}\n$$\n由于 $\\alpha$ 和 $\\beta$ 是正常数，因此 $x^* > 0$ 和 $y^* > 0$，满足问题中提到的非负性条件。因此，最优值的三元组为 $(x^*, y^*, \\lambda^*) = \\left(\\frac{\\beta}{\\alpha+\\beta}, \\frac{\\alpha}{\\alpha+\\beta}, \\frac{2\\alpha\\beta}{\\alpha+\\beta}\\right)$。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} \\frac{\\beta}{\\alpha+\\beta}  \\frac{\\alpha}{\\alpha+\\beta}  \\frac{2\\alpha\\beta}{\\alpha+\\beta} \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "在掌握了基础知识后，让我们将拉格朗日方法应用到一个更复杂的几何优化问题中。在这个练习  中，你的任务是确定一个内接于椭球体的矩形房间的最佳尺寸，以最大化其“宜居性分数”。此问题不仅将方法扩展到三维空间，还巧妙地引入了对数变换技巧来简化乘法形式的目标函数，展示了该方法在处理非线性问题时的灵活性。",
            "id": "2216756",
            "problem": "一位建筑师正在设计一栋带有大型椭球穹顶的建筑内的特殊展览室。该展览室必须是一个长方体，其边与椭球的轴平行。该长方体的八个顶点必须位于椭球表面上，该椭球由方程 $\\frac{x^2}{a^2} + \\frac{y^2}{b^2} + \\frac{z^2}{c^2} = 1$ 描述。参数 $a, b, c$ 是椭球的正半轴。\n\n房间的“宜居性分数”是衡量其美学和功能质量的指标，由其半维度 $(x, y, z)$ 的加权乘积决定。该分数由函数 $S(x,y,z) = x^{\\alpha} y^{\\beta} z^{\\gamma}$ 给出，其中 $\\alpha, \\beta, \\gamma$ 是正常实数常量，分别代表对长度、宽度和高度的设计优先级。\n\n使用拉格朗日乘数法，确定使该宜居性分数最大化的长方体的半维度 $(x, y, z)$。您的答案应为一组关于 $x$、$y$ 和 $z$ 的解析表达式，用 $a, b, c, \\alpha, \\beta,$ 和 $\\gamma$ 表示。",
            "solution": "我们要最大化加权乘积 $S(x,y,z) = x^{\\alpha} y^{\\beta} z^{\\gamma}$，约束条件为椭球约束\n$$\n\\frac{x^{2}}{a^{2}} + \\frac{y^{2}}{b^{2}} + \\frac{z^{2}}{c^{2}} = 1,\n$$\n其中 $x,y,z > 0$ 为半维度。因为 $\\ln$ 是严格递增的，最大化 $S$ 等价于最大化\n$$\nf(x,y,z) = \\alpha \\ln x + \\beta \\ln y + \\gamma \\ln z\n$$\n在相同的约束条件下。\n\n为约束条件 $g(x,y,z) = \\frac{x^{2}}{a^{2}} + \\frac{y^{2}}{b^{2}} + \\frac{z^{2}}{c^{2}} - 1 = 0$ 引入一个拉格朗日乘子 $\\lambda$，并构造拉格朗日函数\n$$\n\\mathcal{L}(x,y,z,\\lambda) = \\alpha \\ln x + \\beta \\ln y + \\gamma \\ln z - \\lambda \\left( \\frac{x^{2}}{a^{2}} + \\frac{y^{2}}{b^{2}} + \\frac{z^{2}}{c^{2}} - 1 \\right).\n$$\n平稳性要求关于 $x,y,z$ 的偏导数为零：\n$$\n\\frac{\\partial \\mathcal{L}}{\\partial x} = \\frac{\\alpha}{x} - \\lambda \\frac{2x}{a^{2}} = 0,\\quad\n\\frac{\\partial \\mathcal{L}}{\\partial y} = \\frac{\\beta}{y} - \\lambda \\frac{2y}{b^{2}} = 0,\\quad\n\\frac{\\partial \\mathcal{L}}{\\partial z} = \\frac{\\gamma}{z} - \\lambda \\frac{2z}{c^{2}} = 0.\n$$\n分别求解 $x^{2}, y^{2}, z^{2}$ 得到\n$$\nx^{2} = \\frac{\\alpha a^{2}}{2\\lambda},\\quad\ny^{2} = \\frac{\\beta b^{2}}{2\\lambda},\\quad\nz^{2} = \\frac{\\gamma c^{2}}{2\\lambda}.\n$$\n将这些代入约束条件：\n$$\n\\frac{x^{2}}{a^{2}} + \\frac{y^{2}}{b^{2}} + \\frac{z^{2}}{c^{2}} = \\frac{\\alpha}{2\\lambda} + \\frac{\\beta}{2\\lambda} + \\frac{\\gamma}{2\\lambda} = \\frac{\\alpha + \\beta + \\gamma}{2\\lambda} = 1,\n$$\n这意味着\n$$\n\\lambda = \\frac{\\alpha + \\beta + \\gamma}{2}.\n$$\n因此，\n$$\nx^{2} = \\frac{\\alpha a^{2}}{\\alpha + \\beta + \\gamma},\\quad\ny^{2} = \\frac{\\beta b^{2}}{\\alpha + \\beta + \\gamma},\\quad\nz^{2} = \\frac{\\gamma c^{2}}{\\alpha + \\beta + \\gamma}.\n$$\n由于 $x,y,z$ 代表半维度，我们取正平方根：\n$$\nx = a \\sqrt{\\frac{\\alpha}{\\alpha + \\beta + \\gamma}},\\quad\ny = b \\sqrt{\\frac{\\beta}{\\alpha + \\beta + \\gamma}},\\quad\nz = c \\sqrt{\\frac{\\gamma}{\\alpha + \\beta + \\gamma}}.\n$$\n因为 $f(x,y,z)$ 在 $x,y,z>0$ 上是严格凹函数，并且可行集与正卦限平滑相交，所以这些一阶条件在 $x,y,z>0$ 的椭球面上给出了唯一的最大值点。",
            "answer": "$$\\boxed{\\begin{pmatrix}\na \\sqrt{\\frac{\\alpha}{\\alpha+\\beta+\\gamma}}  b \\sqrt{\\frac{\\beta}{\\alpha+\\beta+\\gamma}}  c \\sqrt{\\frac{\\gamma}{\\alpha+\\beta+\\gamma}}\n\\end{pmatrix}}$$"
        },
        {
            "introduction": "现实世界中的许多优化问题都包含不等式约束，例如资源使用不能“超过”某个限制。这个练习  引导你从等式约束迈向更普遍的不等式约束，你需要应用卡罗需-库恩-塔克（KKT）条件来求解一个二次规划问题。你将学习如何识别哪些约束在最优点上是“活动的”，并理解拉格朗日乘子在这种情况下的关键作用，这是现代优化理论中的一个核心概念。",
            "id": "3192411",
            "problem": "考虑一个包含两个决策变量 $x_1$ 和 $x_2$ 的凸二次规划问题：\n最小化 $f(x_1,x_2) = (x_1 - 3.5)^2 + (x_2 - 1.5)^2$，并满足以下四个不等式约束\n$g_1(x_1,x_2) = x_1 + x_2 - 3 \\leq 0$， $g_2(x_1,x_2) = x_1 - 2 \\leq 0$， $g_3(x_1,x_2) = -x_1 \\leq 0$，以及 $g_4(x_1,x_2) = -x_2 \\leq 0$。\n使用分别与 $g_1, g_2, g_3, g_4$ 相关联的非负乘子 $\\lambda_1, \\lambda_2, \\lambda_3, \\lambda_4$ 来构建拉格朗日函数。根据凸优化的基本原理，推导必要的最优性条件，并求解最优原始变量 $(x_1^{\\star}, x_2^{\\star})$ 和最优乘子 $(\\lambda_1^{\\star}, \\lambda_2^{\\star}, \\lambda_3^{\\star}, \\lambda_4^{\\star})$。通过解释最优乘子的符号和大小来确定哪些约束是紧约束，并使用互补松弛性来验证你的判断。将你的最终答案表示为单行向量 $\\begin{pmatrix} x_1^{\\star}  x_2^{\\star}  \\lambda_1^{\\star}  \\lambda_2^{\\star}  \\lambda_3^{\\star}  \\lambda_4^{\\star} \\end{pmatrix}$。",
            "solution": "用户提供了一个凸二次规划问题，需要使用拉格朗日函数和相关的最优性条件来求解。\n\n### 步骤1：提取已知条件\n- 待最小化的目标函数：$f(x_1,x_2) = (x_1 - 3.5)^2 + (x_2 - 1.5)^2$。\n- 决策变量：$x_1$, $x_2$。\n- 不等式约束：\n  - $g_1(x_1,x_2) = x_1 + x_2 - 3 \\leq 0$\n  - $g_2(x_1,x_2) = x_1 - 2 \\leq 0$\n  - $g_3(x_1,x_2) = -x_1 \\leq 0$\n  - $g_4(x_1,x_2) = -x_2 \\leq 0$\n- 非负拉格朗日乘子：$\\lambda_1, \\lambda_2, \\lambda_3, \\lambda_4$。\n\n### 步骤2：使用提取的已知条件进行验证\n该问题是一个标准的凸优化问题。目标函数 $f(x_1, x_2)$ 是一个严格凸的二次函数（其海森矩阵是正定的）。约束 $g_i(x_1, x_2)$ 都是线性的，因此是凸的，定义了一个凸可行域（$\\mathbb{R}^2$ 中的一个多边形）。在一个非空、闭合的凸集上最小化一个严格凸函数，其解是唯一的。该问题具有科学依据，是适定的，并且陈述客观。这是优化中 Karush-Kuhn-Tucker (KKT) 条件的一个经典应用，它与拉格朗日函数直接相关。该问题是有效的。\n\n### 步骤3：进行求解\n\n首先，我们构建拉格朗日函数 $L(x_1, x_2, \\lambda_1, \\lambda_2, \\lambda_3, \\lambda_4)$。拉格朗日函数定义为目标函数加上拉格朗日乘子与约束函数乘积之和。\n$$L(x_1, x_2, \\boldsymbol{\\lambda}) = f(x_1, x_2) + \\sum_{i=1}^{4} \\lambda_i g_i(x_1, x_2)$$\n$$L(x_1, x_2, \\boldsymbol{\\lambda}) = (x_1 - 3.5)^2 + (x_2 - 1.5)^2 + \\lambda_1(x_1 + x_2 - 3) + \\lambda_2(x_1 - 2) + \\lambda_3(-x_1) + \\lambda_4(-x_2)$$\n其中 $\\boldsymbol{\\lambda} = (\\lambda_1, \\lambda_2, \\lambda_3, \\lambda_4)$。\n\n对于一个具有可微函数的凸问题，Karush-Kuhn-Tucker (KKT) 条件是最优性的充分必要条件。KKT 条件如下：\n1.  **平稳性 (Stationarity)**：拉格朗日函数对原始变量的梯度必须为零。\n    $$ \\frac{\\partial L}{\\partial x_1} = 2(x_1 - 3.5) + \\lambda_1 + \\lambda_2 - \\lambda_3 = 0 $$\n    $$ \\frac{\\partial L}{\\partial x_2} = 2(x_2 - 1.5) + \\lambda_1 - \\lambda_4 = 0 $$\n2.  **原始可行性 (Primal Feasibility)**：必须满足所有约束。\n    $$ x_1 + x_2 - 3 \\leq 0 $$\n    $$ x_1 - 2 \\leq 0 $$\n    $$ -x_1 \\leq 0 \\implies x_1 \\geq 0 $$\n    $$ -x_2 \\leq 0 \\implies x_2 \\geq 0 $$\n3.  **对偶可行性 (Dual Feasibility)**：拉格朗日乘子必须为非负。\n    $$ \\lambda_1 \\geq 0, \\quad \\lambda_2 \\geq 0, \\quad \\lambda_3 \\geq 0, \\quad \\lambda_4 \\geq 0 $$\n4.  **互补松弛性 (Complementary Slackness)**：每个拉格朗日乘子与其对应约束的乘积必须为零。\n    $$ \\lambda_1(x_1 + x_2 - 3) = 0 $$\n    $$ \\lambda_2(x_1 - 2) = 0 $$\n    $$ \\lambda_3(-x_1) = 0 $$\n    $$ \\lambda_4(-x_2) = 0 $$\n\n我们求解这个由方程和不等式组成的系统。一个系统性的方法是根据哪些约束是起作用的（即等式成立）来分情况讨论。\n$f(x_1, x_2)$ 的无约束最小值点在 $(x_1, x_2) = (3.5, 1.5)$。我们来检查该点是否可行。\n- $g_1(3.5, 1.5) = 3.5 + 1.5 - 3 = 2 > 0$。第一个约束被违反。\n- $g_2(3.5, 1.5) = 3.5 - 2 = 1.5 > 0$。第二个约束被违反。\n- $g_3(3.5, 1.5) = -3.5 \\leq 0$。满足。\n- $g_4(3.5, 1.5) = -1.5 \\leq 0$。满足。\n\n由于无约束最小值点不可行，最优解必须位于可行域的边界上。最可能的情况是，在最优点处，被无约束最小值点违反的那些约束是起作用的。我们假设约束 $g_1$ 和 $g_2$ 是起作用的。\n\n情况：$g_1$ 和 $g_2$ 是起作用的（$g_1=0, g_2=0$）。\n这意味着 $x_1 + x_2 - 3 = 0$ 且 $x_1 - 2 = 0$。从第二个方程我们得到 $x_1 = 2$。将此代入第一个方程得到 $2 + x_2 - 3 = 0$，解得 $x_2 = 1$。因此，最优原始变量的候选解为 $(x_1^{\\star}, x_2^{\\star}) = (2, 1)$。\n\n由于 $g_1$ 和 $g_2$ 是起作用的，对于任意的 $\\lambda_1, \\lambda_2$，互补松弛性条件 $\\lambda_1 g_1 = 0$ 和 $\\lambda_2 g_2 = 0$ 都得到满足。\n对于 $(x_1, x_2) = (2,1)$，约束 $g_3$ 和 $g_4$ 是不起作用的：\n- $g_3(2, 1) = -2  0$。\n- $g_4(2, 1) = -1  0$。\n根据互补松弛性（$\\lambda_3 g_3 = 0, \\lambda_4 g_4 = 0$），我们必须有 $\\lambda_3 = 0$ 和 $\\lambda_4 = 0$。\n\n现在我们使用平稳性条件来求解 $\\lambda_1$ 和 $\\lambda_2$。\n当 $x_1=2, x_2=1, \\lambda_3=0, \\lambda_4=0$ 时，平稳性方程变为：\n$$ \\frac{\\partial L}{\\partial x_1} = 2(2 - 3.5) + \\lambda_1 + \\lambda_2 - 0 = 0 \\implies -3 + \\lambda_1 + \\lambda_2 = 0 $$\n$$ \\frac{\\partial L}{\\partial x_2} = 2(1 - 1.5) + \\lambda_1 - 0 = 0 \\implies -1 + \\lambda_1 = 0 $$\n从第二个方程，我们得到 $\\lambda_1 = 1$。\n将 $\\lambda_1 = 1$ 代入第一个方程：$-3 + 1 + \\lambda_2 = 0 \\implies -2 + \\lambda_2 = 0$，所以 $\\lambda_2 = 2$。\n\n我们的完整最优解候选为 $(x_1^{\\star}, x_2^{\\star}, \\lambda_1^{\\star}, \\lambda_2^{\\star}, \\lambda_3^{\\star}, \\lambda_4^{\\star}) = (2, 1, 1, 2, 0, 0)$。\n我们来验证该解是否满足所有 KKT 条件：\n1.  **平稳性**：\n    - $\\frac{\\partial L}{\\partial x_1}: 2(2 - 3.5) + 1 + 2 - 0 = -3 + 3 = 0$。（成立）\n    - $\\frac{\\partial L}{\\partial x_2}: 2(1 - 1.5) + 1 - 0 = -1 + 1 = 0$。（成立）\n2.  **原始可行性**：\n    - $g_1: 2 + 1 - 3 = 0 \\leq 0$。（成立）\n    - $g_2: 2 - 2 = 0 \\leq 0$。（成立）\n    - $g_3: -2 \\leq 0$。（成立）\n    - $g_4: -1 \\leq 0$。（成立）\n3.  **对偶可行性**：\n    - $\\lambda_1 = 1 \\geq 0$。（成立）\n    - $\\lambda_2 = 2 \\geq 0$。（成立）\n    - $\\lambda_3 = 0 \\geq 0$。（成立）\n    - $\\lambda_4 = 0 \\geq 0$。（成立）\n4.  **互补松弛性**：\n    - $\\lambda_1 g_1 = 1 \\times 0 = 0$。（成立）\n    - $\\lambda_2 g_2 = 2 \\times 0 = 0$。（成立）\n    - $\\lambda_3 g_3 = 0 \\times (-2) = 0$。（成立）\n    - $\\lambda_4 g_4 = 0 \\times (-1) = 0$。（成立）\n\n由于所有 KKT 条件都得到满足，且问题是凸的，因此解 $(x_1^{\\star}, x_2^{\\star})=(2, 1)$ 以及乘子 $(\\lambda_1^{\\star}, \\lambda_2^{\\star}, \\lambda_3^{\\star}, \\lambda_4^{\\star})=(1, 2, 0, 0)$ 是唯一的全局最优解。\n\n最后，我们通过解释最优乘子来确定哪些是紧约束。如果对应的乘子 $\\lambda_i^{\\star}$ 严格为正，那么约束 $g_i \\leq 0$ 是紧的（或起作用的）。\n- $\\lambda_1^{\\star} = 1 > 0$：约束 $g_1(x_1, x_2) = x_1 + x_2 - 3 \\leq 0$ 是紧约束。\n- $\\lambda_2^{\\star} = 2 > 0$：约束 $g_2(x_1, x_2) = x_1 - 2 \\leq 0$ 是紧约束。\n- $\\lambda_3^{\\star} = 0$：约束 $g_3(x_1, x_2) = -x_1 \\leq 0$ 不是紧约束。\n- $\\lambda_4^{\\star} = 0$：约束 $g_4(x_1, x_2) = -x_2 \\leq 0$ 不是紧约束。\n\n使用互补松弛性进行验证：\n- 对于紧约束，我们检查是否 $g_i(x_1^{\\star}, x_2^{\\star})=0$：\n  - $g_1(2, 1) = 2 + 1 - 3 = 0$。已验证。\n  - $g_2(2, 1) = 2 - 2 = 0$。已验证。\n- 对于非紧约束，我们检查是否 $g_i(x_1^{\\star}, x_2^{\\star})  0$：\n  - $g_3(2, 1) = -2  0$。已验证。\n  - $g_4(2, 1) = -1  0$。已验证。\n\n分析结果一致。最终答案是最优原始变量和对偶变量组成的向量。",
            "answer": "$$ \\boxed{ \\begin{pmatrix} 2  1  1  2  0  0 \\end{pmatrix} } $$"
        }
    ]
}