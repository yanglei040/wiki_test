{
    "hands_on_practices": [
        {
            "introduction": "这个练习提供了一个经典的资源分配场景，你需要将实习生分配给导师，以最大化总体的技能兼容性得分。这个练习旨在帮助你建立对指派问题目标和结构的直观理解，它也揭示了在某些情况下，我们甚至无需动用复杂的算法，仅通过逻辑推理就能找到最优解。",
            "id": "2223397",
            "problem": "一家名为 Code-Forge Solutions 的科技公司正在启动其年度导师计划。四名新晋实习开发者——Ben、Chloe、David和Emily——将与四位可用的高级工程师进行一对一的指导配对。这些高级工程师是Alvarez博士、Borges博士、Chen博士和Dupont博士。为确保最有效的指导，项目主管为每一种可能的实习生-导师配对评估了“技能兼容性得分”。分数范围为0到100，如下表所示。\n\n| 实习生 | Alvarez博士 | Borges博士 | Chen博士 | Dupont博士 |\n| :---------- | :---------- | :--------- | :------- | :--------- |\n| Ben         | 82          | 85         | 70       | 90         |\n| Chloe       | 78          | 82         | 81       | 75         |\n| David       | 75          | 77         | 92       | 80         |\n| Emily       | 88          | 79         | 73       | 84         |\n\n每位实习生必须被分配给且仅分配给一位高级工程师，每位高级工程师也必须指导且仅指导一位实习生。您的任务是确定实习生与导师的分配方案，以使技能兼容性得分之和最大化。这个可能的最大总分是多少？",
            "solution": "设 $S$ 表示得分矩阵，其行由实习生 $\\{ \\text{Ben}, \\text{Chloe}, \\text{David}, \\text{Emily} \\}$ 索引，列由导师 $\\{ \\text{Alvarez}, \\text{Borges}, \\text{Chen}, \\text{Dupont} \\}$ 索引。一个分配方案是从实习生到导师的一一对应（双射） $\\sigma$，其总分 $T(\\sigma)$ 为\n$$\nT(\\sigma)=\\sum_{\\text{apprentice } a} S\\bigl(a,\\sigma(a)\\bigr).\n$$\n对于任何分配方案，每位实习生贡献的分数最多为其所在行的最大值，因此\n$$\nT(\\sigma) \\leq \\sum_{\\text{apprentice } a} \\max_{\\text{mentor } m} S(a,m).\n$$\n计算各行的最大值：\n- Ben：$\\max\\{82,85,70,90\\}=90$，在与Dupont配对时达到。\n- Chloe：$\\max\\{78,82,81,75\\}=82$，在与Borges配对时达到。\n- David：$\\max\\{75,77,92,80\\}=92$，在与Chen配对时达到。\n- Emily：$\\max\\{88,79,73,84\\}=88$，在与Alvarez配对时达到。\n\n这些最大值出现在不同的列中（Dupont、Borges、Chen、Alvarez），因此以下分配方案\n$$\n\\text{Ben} \\to \\text{Dupont},\\quad \\text{Chloe} \\to \\text{Borges},\\quad \\text{David} \\to \\text{Chen},\\quad \\text{Emily} \\to \\text{Alvarez}\n$$\n是可行的，并且达到了上界。其总分为\n$$\nT=90+82+92+88=352.\n$$\n因此，通过一个可行的分配方案达到了上界，该值即为可能的最大总分。",
            "answer": "$$\\boxed{352}$$"
        },
        {
            "introduction": "指派问题的威力远不止于简单的资源分配。这个练习通过将其应用于一个类似于数独的组合谜题，展示了其模型的灵活性。你将学习如何将一个包含“各不相同”约束和偏好得分的问题，转化为一个规范的成本矩阵，并将一个最大化偏好的问题转化为一个最小化成本的问题，这是优化建模中的一项关键技能。",
            "id": "3099201",
            "problem": "一个标准的数独谜题要求每一行必须包含从 $1$ 到 $9$ 的每个数字，且每个数字只出现一次。考虑一个包含九个单元格的单行，其中位置 $1$、$4$、$7$ 和 $9$ 的数字已分别固定为 $2$、$7$、$3$ 和 $9$。剩下的位置 $2$、$3$、$5$、$6$ 和 $8$ 的单元格必须用余下的数字 $\\{1,4,5,6,8\\}$ 填充，每个数字恰好使用一次。根据列和九宫格的可行性，假设每个空单元格的允许数字及其偏好分数 $s_{i,j}$（分数越高表示越偏好）如下：\n- 第 $2$ 列的单元格：允许的数字为 $\\{1,4,5\\}$，其偏好分数为 $s_{2,1}=9$，$s_{2,4}=6$，$s_{2,5}=4$。\n- 第 $3$ 列的单元格：允许的数字为 $\\{4,5,6\\}$，其偏好分数为 $s_{3,4}=8$，$s_{3,5}=7$，$s_{3,6}=5$。\n- 第 $5$ 列的单元格：允许的数字为 $\\{1,5,8\\}$，其偏好分数为 $s_{5,1}=5$，$s_{5,5}=9$，$s_{5,8}=7$。\n- 第 $6$ 列的单元格：允许的数字为 $\\{6,8,4\\}$，其偏好分数为 $s_{6,6}=9$，$s_{6,8}=6$，$s_{6,4}=3$。\n- 第 $8$ 列的单元格：允许的数字为 $\\{1,8,4\\}$，其偏好分数为 $s_{8,1}=4$，$s_{8,8}=9$，$s_{8,4}=5$。\n\n将这一行的填充问题建模为空单元格集合 $\\{2,3,5,6,8\\}$ 与数字集合 $\\{1,4,5,6,8\\}$ 之间的指派问题，其中一个指派决定了哪个数字填入哪个单元格，并强制要求每个单元格只填入一个数字，且每个数字只使用一次。根据规则\n$$\nc_{i,j}=\\begin{cases}\nH - s_{i,j}  \\text{如果数字 } j \\text{ 在单元格 } i \\text{ 中是允许的,}\\\\\n\\Gamma  \\text{如果数字 } j \\text{ 在单元格 } i \\text{ 中是禁止的,}\n\\end{cases}\n$$\n从偏好分数构造代价矩阵 $c_{i,j}$，其中 $H=10$ 且 $\\Gamma=10^{4}$。然后，使用从第一性原理推导出的指派问题公式，确定此行的最小总指派代价。\n\n在你的推导中，从优化方法中指派问题的基本定义开始，解释行级数独约束如何在此框架内表示，并评论该公式如何捕捉约束规划（CP）中著名的“all-different”约束的精髓。报告最小总代价，结果应为一个精确整数，不进行四舍五入，不带单位。",
            "solution": "首先验证问题，以确保其科学基础扎实、提法恰当、客观且完整。\n\n### 问题验证\n1.  **提取已知条件**：\n    -   一组空单元格（代理），按其列位置索引：$\\mathcal{I} = \\{2, 3, 5, 6, 8\\}$。\n    -   一组待指派的可用数字（任务）：$\\mathcal{J} = \\{1, 4, 5, 6, 8\\}$。\n    -   将数字 $j$ 指派给单元格 $i$ 的允许指派的偏好分数 $s_{i,j}$：\n        -   $i=2$: $s_{2,1}=9$, $s_{2,4}=6$, $s_{2,5}=4$。\n        -   $i=3$: $s_{3,4}=8$, $s_{3,5}=7$, $s_{3,6}=5$。\n        -   $i=5$: $s_{5,1}=5$, $s_{5,5}=9$, $s_{5,8}=7$。\n        -   $i=6$: $s_{6,4}=3$, $s_{6,6}=9$, $s_{6,8}=6$。\n        -   $i=8$: $s_{8,1}=4$, $s_{8,4}=5$, $s_{8,8}=9$。\n    -   代价函数 $c_{i,j}$ 定义为：\n        $$\n        c_{i,j}=\\begin{cases}\n        H - s_{i,j}  \\text{如果数字 } j \\text{ 在单元格 } i \\text{ 中是允许的,}\\\\\n        \\Gamma  \\text{如果数字 } j \\text{ 在单元格 } i \\text{ 中是禁止的,}\n        \\end{cases}\n        $$\n    -   常数：$H=10$ 和 $\\Gamma=10^{4}$。\n    -   任务是找到最小的总指派代价。\n\n2.  **使用提取的已知条件进行验证**：\n    -   该问题具有**科学基础**，因为它将运筹学中的标准方法（指派问题）应用于逻辑谜题（数独）。\n    -   该问题是**提法恰当的**。它提供了一套完整的数据（代理、任务、代价）和一个明确的目标（最小化），这保证了解的存在性。\n    -   该问题是**客观的**，没有任何主观或模棱两可的语言。\n\n3.  **结论与行动**：该问题被判定为有效。将提供完整解答。\n\n### 解题推导\n将可用数字 $\\{1, 4, 5, 6, 8\\}$ 中的每一个指派给一个唯一的空单元格 $\\{2, 3, 5, 6, 8\\}$ 以最小化总代价的问题，是指派问题的一个经典实例。\n\n指派问题是一个基本的组合优化问题。在其一般形式中，它考虑一组代理和一组任务，以及将每个代理指派给每个任务的相关代价。目标是找到代理到任务的一一对应指派，以使总代价最小化。\n\n设空单元格集合为代理，$\\mathcal{I}=\\{2,3,5,6,8\\}$，可用数字集合为任务，$\\mathcal{J}=\\{1,4,5,6,8\\}$。问题的规模为 $n=|\\mathcal{I}|=|\\mathcal{J}|=5$。我们首先使用给定的规则 $c_{i,j} = H-s_{i,j}$（对于允许的指派）和 $c_{i,j} = \\Gamma$（对于禁止的指派）来构造 $5 \\times 5$ 的代价矩阵 $C = [c_{i,j}]$，其中 $i \\in \\mathcal{I}$ 且 $j \\in \\mathcal{J}$。$H=10$ 且 $\\Gamma=10^{4}$：\n\n-   **单元格 $i=2$ 的行**：允许数字 $\\{1,4,5\\}$。\n    $c_{2,1} = 10-9 = 1$；$c_{2,4} = 10-6 = 4$；$c_{2,5} = 10-4 = 6$。其他代价为 $\\Gamma$。\n-   **单元格 $i=3$ 的行**：允许数字 $\\{4,5,6\\}$。\n    $c_{3,4} = 10-8 = 2$；$c_{3,5} = 10-7 = 3$；$c_{3,6} = 10-5 = 5$。其他代价为 $\\Gamma$。\n-   **单元格 $i=5$ 的行**：允许数字 $\\{1,5,8\\}$。\n    $c_{5,1} = 10-5 = 5$；$c_{5,5} = 10-9 = 1$；$c_{5,8} = 10-7 = 3$。其他代价为 $\\Gamma$。\n-   **单元格 $i=6$ 的行**：允许数字 $\\{4,6,8\\}$。\n    $c_{6,4} = 10-3 = 7$；$c_{6,6} = 10-9 = 1$；$c_{6,8} = 10-6 = 4$。其他代价为 $\\Gamma$。\n-   **单元格 $i=8$ 的行**：允许数字 $\\{1,8,4\\}$。\n    $c_{8,1} = 10-4 = 6$；$c_{8,4} = 10-5 = 5$；$c_{8,8} = 10-9 = 1$。其他代价为 $\\Gamma$。\n\n得到的代价矩阵 $C$ 如下，其行由单元格 $\\{2,3,5,6,8\\}$ 索引，列由数字 $\\{1,4,5,6,8\\}$ 索引：\n$$\nC =\n\\begin{pmatrix}\n1   4   6   10^4   10^4 \\\\\n10^4   2   3   5   10^4 \\\\\n5   10^4   1   10^4   3 \\\\\n10^4   7   10^4   1   4 \\\\\n6   5   10^4   10^4   1\n\\end{pmatrix}\n$$\n\n指派问题的数学公式如下。设 $x_{i,j}$ 为一个二元变量，如果单元格 $i$ 被指派数字 $j$，则 $x_{i,j}=1$，否则 $x_{i,j}=0$。目标是最小化总代价 $Z$：\n$$\n\\text{最小化 } Z = \\sum_{i \\in \\mathcal{I}} \\sum_{j \\in \\mathcal{J}} c_{i,j} x_{i,j}\n$$\n满足以下约束条件：\n$$\n\\sum_{j \\in \\mathcal{J}} x_{i,j} = 1 \\quad \\forall i \\in \\mathcal{I} \\quad (\\text{每个单元格获得一个数字})\n$$\n$$\n\\sum_{i \\in \\mathcal{I}} x_{i,j} = 1 \\quad \\forall j \\in \\mathcal{J} \\quad (\\text{每个数字使用一次})\n$$\n$$\nx_{i,j} \\in \\{0, 1\\} \\quad \\forall i \\in \\mathcal{I}, j \\in \\mathcal{J}\n$$\n\n我们可以使用匈牙利算法来解决这个问题。\n**第1步：行化简。**从每一行的所有元素中减去该行的最小值。\n-   第 $1$ 行最小值为 $1$：$[1, 4, 6, 10^4, 10^4] \\rightarrow [0, 3, 5, 10^4-1, 10^4-1]$\n-   第 $2$ 行最小值为 $2$：$[10^4, 2, 3, 5, 10^4] \\rightarrow [10^4-2, 0, 1, 3, 10^4-2]$\n-   第 $3$ 行最小值为 $1$：$[5, 10^4, 1, 10^4, 3] \\rightarrow [4, 10^4-1, 0, 10^4-1, 2]$\n-   第 $4$ 行最小值为 $1$：$[10^4, 7, 10^4, 1, 4] \\rightarrow [10^4-1, 6, 10^4-1, 0, 3]$\n-   第 $5$ 行最小值为 $1$：$[6, 5, 10^4, 10^4, 1] \\rightarrow [5, 4, 10^4-1, 10^4-1, 0]$\n\n化简后的矩阵 $C'$ 为：\n$$\nC' =\n\\begin{pmatrix}\n0   3   5   9999   9999 \\\\\n9998   0   1   3   9998 \\\\\n4   9999   0   9999   2 \\\\\n9999   6   9999   0   3 \\\\\n5   4   9999   9999   0\n\\end{pmatrix}\n$$\n\n**第2步：列化简。**从 $C'$ 的每一列的所有元素中减去该列的最小值。\n-   第 $1$ 列最小值为 $0$。\n-   第 $2$ 列最小值为 $0$。\n-   第 $3$ 列最小值为 $0$。\n-   第 $4$ 列最小值为 $0$。\n-   第 $5$ 列最小值为 $0$。\n此步骤后矩阵保持不变。\n\n**第3步：确定最优指派。**我们寻找一个包含 $n=5$ 个独立零的集合（每行每列各一个）。通过检查矩阵 $C'$，我们可以在以下位置识别出这样一个集合：\n-   位置 $(1,1)$，对应于 $x_{2,1}$。\n-   位置 $(2,2)$，对应于 $x_{3,4}$。\n-   位置 $(3,3)$，对应于 $x_{5,5}$。\n-   位置 $(4,4)$，对应于 $x_{6,6}$。\n-   位置 $(5,5)$，对应于 $x_{8,8}$。\n等等，在匈牙利算法的这一步，我们应该尝试覆盖所有的0。\n通过检查，我们可以找到一个由5个独立的零组成的集合： $(2,1), (3,4), (5,5), (6,6), (8,8)$。（注意：索引是 (单元格, 数字)，在矩阵中是 (行, 列)）。\n\n由于我们已经找到了一个包含 $5$ 个独立零的完整集合，这构成了一个最优指派。最优指派为：\n-   单元格 $2$ 指派给数字 $1$。\n-   单元格 $3$ 指派给数字 $4$。\n-   单元格 $5$ 指派给数字 $5$。\n-   单元格 $6$ 指派给数字 $6$。\n-   单元格 $8$ 指派给数字 $8$。\n\n最小总代价是原始代价矩阵 $C$ 中这些指派的代价之和：\n$$\nZ_{min} = c_{2,1} + c_{3,4} + c_{5,5} + c_{6,6} + c_{8,8}\n$$\n$$\nZ_{min} = 1 + 2 + 1 + 1 + 1 = 6\n$$\n\n**关于“all-different”约束的评论**：\n在约束规划（CP）中，这样的问题将使用代表每个单元格的变量来建模，这些变量的定义域是允许的数字。例如，变量 $V_2, V_3, V_5, V_6, V_8$ 将代表单元格 $2, 3, 5, 6, 8$ 中的数字。核心约束将是 $\\text{alldifferent}(V_2, V_3, V_5, V_6, V_8)$，它强制所有这些变量必须取唯一的值。\n指派问题的公式内在地捕捉了这一约束。两组等式约束 $\\sum_j x_{i,j} = 1$ 和 $\\sum_i x_{i,j} = 1$ 共同强制单元格和数字之间的一一对应（双射）关系。这正是 `alldifferent` 约束的语义。对禁止的指派使用一个非常大的代价 $\\Gamma$，起到了硬约束的作用，有效地将这些配对从考虑中移除，这类似于在CP中指定定义域的方式。因此，指派问题提供了一个基于优化的框架，来解决本质上是带有目标函数的约束满足问题。",
            "answer": "$$\n\\boxed{6}\n$$"
        },
        {
            "introduction": "在整数规划的世界里，为什么指派问题被认为是“表现良好”的？这个高级练习将深入探讨其理论基础，正是这些理论保证了其线性规划松弛能够得到整数解。你将探索“完全幺模性”（Total Unimodularity）这一概念，并亲眼见证在一个密切相关的非二分图匹配问题中，当该性质失效时，会导致分数解和一个非零的“整数性差距”。",
            "id": "3099237",
            "problem": "考虑优化方法中的经典指派问题：给定一组由 $i \\in \\{1,2,3\\}$ 索引的工人和一组由 $j \\in \\{1,2,3\\}$ 索引的工作，将工人 $i$ 分配给工作 $j$ 的收益为 $c_{ij} \\in \\mathbb{R}$。目标是在满足排他性约束的条件下，选择分配方案以最大化总收益。标准的整数规划形式使用决策变量 $x_{ij} \\in \\{0,1\\}$，其中 $x_{ij} = 1$ 表示工人 $i$ 被分配给工作 $j$，否则 $x_{ij} = 0$。线性规划 (LP) 松弛将整数要求放宽为 $x_{ij} \\in [0,1]$。\n\n从以下基础出发：\n- 指派问题的基本模型由以下线性约束定义：对每个 $i \\in \\{1,2,3\\}$，有 $\\sum_{j=1}^{3} x_{ij} = 1$；对每个 $j \\in \\{1,2,3\\}$，有 $\\sum_{i=1}^{3} x_{ij} = 1$。目标是最大化 $\\sum_{i=1}^{3}\\sum_{j=1}^{3} c_{ij} x_{ij}$。\n- 完全幺模性 (TUM) 的概念是：如果矩阵 $A$ 的每个方子阵的行列式值都在 $\\{0, \\pm 1\\}$ 中，则称矩阵 $A$ 是完全幺模的。当约束矩阵是完全幺模的且右端向量是整数向量时，可行域的每个极点都是整数点。\n\n第一部分（二分图基线）：考虑由 $c_{11} = 5$, $c_{22} = 5$, $c_{33} = 5$ 以及所有 $i \\neq j$ 的 $(i,j)$ 的 $c_{ij} = 1$ 定义的收益。定义上述标准指派模型及其 LP 松弛。使用完全幺模性的定义和工人-工作约束的二分图关联结构，从第一性原理出发，解释为什么在这种二分图设置下，LP 松弛具有整数极点。\n\n第二部分（破坏整数性的最小改动）：现在将约束修改为在单个包含三个实体 $V = \\{1,2,3\\}$ 的集合上的非二分匹配结构，决策变量为 $y_{12}, y_{23}, y_{31} \\in [0,1]$，表示是否选择无向对 $\\{p,q\\}$。对每个 $v \\in V$ 施加度约束 $\\sum_{e \\in \\delta(v)} y_{e} \\leq 1$，其中 $\\delta(v)$ 是与顶点 $v$ 关联的边的集合。设三条边上的收益为 $c_{12} = 3$, $c_{23} = 3$, $c_{31} = 3$，并同时考虑 $y_{e} \\in \\{0,1\\}$ 的整数线性规划 (ILP) 版本和 $y_{e} \\in [0,1]$ 的 LP 松弛版本。\n\n使用核心定义，通过计算一个合适的方子阵的行列式来检验非二分图的约束矩阵是否是完全幺模的。然后，计算此非二分实例的 ILP 和 LP 松弛的最优值。最后，报告此非二分实例的整数性差距，定义为 $Z_{\\text{LP}} - Z_{\\text{ILP}}$。将最终答案表示为一个实数。如果选择四舍五入，请将答案保留四位有效数字。无需单位。",
            "solution": "这个问题包含两部分。第一部分要求解释为什么标准指派问题的线性规划 (LP) 松弛具有整数极点。第二部分要求计算一个相关但非二分的匹配问题的整数性差距。\n\n### 第一部分：二分指派问题与整数性\n\n指派问题定义在一组工人 $i \\in \\{1, 2, 3\\}$ 和一组工作 $j \\in \\{1, 2, 3\\}$上。决策变量为 $x_{ij}$，其中如果工人 $i$ 被分配给工作 $j$，则 $x_{ij} = 1$，否则 $x_{ij} = 0$。目标是最大化总收益 $\\sum_{i=1}^{3}\\sum_{j=1}^{3} c_{ij} x_{ij}$。\n\n约束条件如下：\n1. 每个工人必须恰好被分配到一个工作：对每个 $i \\in \\{1, 2, 3\\}$，有 $\\sum_{j=1}^{3} x_{ij} = 1$。\n2. 每个工作必须恰好被分配给一个工人：对每个 $j \\in \\{1, 2, 3\\}$，有 $\\sum_{i=1}^{3} x_{ij} = 1$。\n\n整数线性规划 (ILP) 要求 $x_{ij} \\in \\{0, 1\\}$。LP 松弛将其替换为 $x_{ij} \\in [0, 1]$，或者更简单地是 $x_{ij} \\geq 0$，因为约束条件已经蕴含了 $x_{ij} \\leq 1$。\n\n这些约束可以写成矩阵形式 $A\\mathbf{x} = \\mathbf{b}$，其中 $\\mathbf{x}$ 是包含 9 个变量 $x_{ij}$ 的列向量，$A$ 是 $6 \\times 9$ 的约束矩阵，$\\mathbf{b}$ 是包含六个 1 的列向量。$A$ 的每一列对应一个变量 $x_{ij}$，并且恰好有两个非零项，均为 1。一个 1 出现在对应工人 $i$ 约束的行中，另一个 1 出现在对应工作 $j$ 约束的行中。\n\n这个结构是关键。矩阵 $A$ 是完全二分图 $K_{3,3}$ 的点边关联矩阵，其中一组顶点代表工人，另一组代表工作。$A$ 的列对应图的边，行对应图的顶点。如果一个矩阵的每个方子阵的行列式值都在集合 $\\{0, 1, -1\\}$ 中，则该矩阵是完全幺模的 (TUM)。一个图的关联矩阵是 TUM 的当且仅当该图是二分图。由于指派问题的约束矩阵是二分图的关联矩阵，因此它是 TUM。\n\n为了从第一性原理证明这一点，我们考虑 $A$ 的一个任意 $k \\times k$ 子矩阵 $S$。我们可以通过对 $k$ 进行数学归纳法来证明 $\\det(S) \\in \\{0, 1, -1\\}$。\n- **基础情况 ($k=1$)：** 一个 $1 \\times 1$ 的子矩阵就是 $A$ 的一个元素。$A$ 的元素是 $0$ 或 $1$。因此，行列式为 $0$ 或 $1$。\n- **归纳步骤 ($k  1$)：** 假设所有 $(k-1) \\times (k-1)$ 子矩阵的行列式都在 $\\{0, 1, -1\\}$ 中。考虑一个 $k \\times k$ 的子矩阵 $S$。\n    1. 如果 $S$ 有一列全为零，则 $\\det(S) = 0$。\n    2. 如果 $S$ 有一列恰好只有一个非零项（该项必须为 1），我们可以沿此列展开行列式。行列式等于 $\\pm 1$ 乘以 $A$ 的一个 $(k-1) \\times (k-1)$ 子矩阵的行列式。根据归纳假设，这个子式的值在 $\\{0, 1, -1\\}$ 中，所以 $\\det(S) \\in \\{0, 1, -1\\}$。\n    3. 如果 $S$ 的每一列至少有两个非零项，由于 $A$ 的每一列恰好有两个 1，那么 $S$ 的每一列也必须恰好有两个 1。$A$ 的行可以划分为工人约束的行集 ($U$) 和工作约束的行集 ($V$)。$A$ 的任何一列在 $U$ 行中有一个 1，在 $V$ 行中有一个 1。相应地，将 $S$ 的行划分为 $S_U$ 和 $S_V$。如果我们将 $S_U$ 中的行相加，得到一个行向量。如果我们将 $S_V$ 中的行相加，得到另一个行向量。对于 $S$ 中的任何一列，它的两个 1 必须分布在来自 $S_U$ 和 $S_V$ 的行之间。由于图是二分的，对于任何列，其两个 1 分别位于代表工人的行和代表工作的行。因此，对 $S$ 中对应于 $U$ 的所有行求和，其结果与对 $S$ 中对应于 $V$ 的所有行求和的结果相等。这意味着 $S$ 的行是线性相关的，所以 $\\det(S) = 0$。\n\n由于 $A$ 是 TUM 且右端向量 $\\mathbf{b}$ 是整数向量（所有项均为 1），线性规划的一个基本定理指出，由 $\\{ \\mathbf{x} | A\\mathbf{x} = \\mathbf{b}, \\mathbf{x} \\geq 0 \\}$定义的可行域的所有极点都是整数点。因为 LP 的最优解总可以在一个极点上找到，所以指派问题的 LP 松弛的最优解将由整数值组成。\n\n### 第二部分：非二分匹配与整数性差距\n\n我们现在考虑一个非二分图上的匹配问题，具体来说是一个顶点集为 $V=\\{1,2,3\\}$、边集为 $\\{1,2\\},\\{2,3\\},\\{3,1\\}$ 的 3-圈。决策变量是 $y_{12}, y_{23}, y_{31}$。约束条件是对于每个顶点 $v$，有 $\\sum_{e \\in \\delta(v)} y_e \\leq 1$，其中 $\\delta(v)$ 是与 $v$ 关联的边的集合。\n约束条件是：\n$y_{12} + y_{31} \\leq 1$ (对于顶点 1)\n$y_{12} + y_{23} \\leq 1$ (对于顶点 2)\n$y_{23} + y_{31} \\leq 1$ (对于顶点 3)\n目标是最大化 $Z = 3y_{12} + 3y_{23} + 3y_{31}$。\n\n首先，我们检验约束矩阵是否为 TUM。矩阵 $A$ 是：\n$$ A = \\begin{pmatrix} 1   0   1 \\\\ 1   1   0 \\\\ 0   1   1 \\end{pmatrix} $$\n这个矩阵是一个 $3 \\times 3$ 的方阵，所以它本身就是一个子矩阵。它的行列式是：\n$$ \\det(A) = 1(1 \\cdot 1 - 0 \\cdot 1) - 0(1 \\cdot 1 - 0 \\cdot 1) + 1(1 \\cdot 1 - 1 \\cdot 0) = 1(1) + 1(1) = 2 $$\n由于 $\\det(A) = 2$，不在 $\\{0, 1, -1\\}$ 集合中，所以矩阵 $A$ 不是完全幺模的。这是符合预期的，因为它是奇圈 ($C_3$) 的关联矩阵，而奇圈是非二分图。\n\n接下来，我们计算 ILP 的最优值 $Z_{\\text{ILP}}$，其中 $y_e \\in \\{0,1\\}$。我们需要找到一个总权重最大的匹配（没有公共顶点的边集）。我们最多只能选择一条边。例如，如果我们选择边 $\\{1,2\\}$（即 $y_{12}=1$），那么顶点 1 和顶点 2 都被覆盖。约束 $y_{12} + y_{31} \\leq 1$ 和 $y_{12} + y_{23} \\leq 1$ 迫使 $y_{31}=0$ 且 $y_{23}=0$。解 $(y_{12},y_{23},y_{31})=(1,0,0)$ 是可行的。目标值为 $3(1) + 3(0) + 3(0) = 3$。根据对称性，选择任何一条边得到的目标值都是 3。我们不能选择两条或更多的边，因为它们会共享顶点。因此，整数规划的最优值是 $Z_{\\text{ILP}} = 3$。\n\n现在，我们计算 LP 松弛的最优值 $Z_{\\text{LP}}$，其中 $y_e \\in [0,1]$。\n考虑可行点 $y_{12} = 0.5$, $y_{23} = 0.5$, $y_{31} = 0.5$。\n检验约束条件：\n$y_{12} + y_{31} = 0.5 + 0.5 = 1 \\leq 1$\n$y_{12} + y_{23} = 0.5 + 0.5 = 1 \\leq 1$\n$y_{23} + y_{31} = 0.5 + 0.5 = 1 \\leq 1$\n该点是可行的。此时的目标值为 $Z = 3(0.5 + 0.5 + 0.5) = 3(1.5) = 4.5$。\n为了证明这是最优解，我们将三个约束相加：\n$(y_{12} + y_{31}) + (y_{12} + y_{23}) + (y_{23} + y_{31}) \\leq 1 + 1 + 1$\n$2(y_{12} + y_{23} + y_{31}) \\leq 3$\n$y_{12} + y_{23} + y_{31} \\leq 1.5$\n目标函数为 $Z = 3(y_{12} + y_{23} + y_{31})$。将推导出的不等式两边乘以 3，我们得到目标函数的一个上界：\n$Z = 3(y_{12} + y_{23} + y_{31}) \\leq 3(1.5) = 4.5$。\n由于我们找到了一个达到此上界的可行解，因此 LP 松弛的最优值为 $Z_{\\text{LP}} = 4.5$。\n\n最后，整数性差距是 LP 最优值与 ILP 最优值之差：\n整数性差距 = $Z_{\\text{LP}} - Z_{\\text{ILP}} = 4.5 - 3 = 1.5$。",
            "answer": "$$ \\boxed{1.5} $$"
        }
    ]
}