{
    "hands_on_practices": [
        {
            "introduction": "掌握确定性全局优化的第一步是理解如何为非凸函数创建一个可靠的下界。这个练习将指导你为一个简单的非凸函数构建凸松弛，这是分支定界法中的一项基本技能。你将学习如何用连接函数端点的割线（即其凸包络）来替换一个非凸函数，从而计算出一个有效的下界，这是分支定界算法中“定界”步骤的核心。",
            "id": "3118809",
            "problem": "考虑一个标量决策变量 $x$，其约束在区间 $[l,u]$ 内，其中 $0  l  u$。目标是最小化 $J(x) = (\\min\\{M, x^2\\} - b)^2$。请通过凸松弛方法，为该问题的全局最优值推导出一个闭式下界。然后，使用此公式计算当 $l=1, u=3, M=6, b=8$ 时的下界值。将您的最终答案四舍五入到四位有效数字。",
            "solution": "该问题要求使用凸松弛为一个非凸优化问题推导下界，这是分支定界法等确定性全局优化方法的基石。推导将按要求从第一性原理出发。\n\n首先，我们建立必要的定义。一个定义在凸集 $C \\subseteq \\mathbb{R}^n$ 上的函数 $f: C \\to \\mathbb{R}$ 被称为凸函数，如果对于任意两点 $x_1, x_2 \\in C$ 和任意标量 $\\lambda \\in [0, 1]$，以下不等式成立：\n$$f(\\lambda x_1 + (1-\\lambda)x_2) \\le \\lambda f(x_1) + (1-\\lambda)f(x_2)$$\n一个集合 $S \\subseteq \\mathbb{R}^n$ 的凸包，记作 $\\text{conv}(S)$，是包含 $S$ 的最小凸集。它是所有包含 $S$ 的凸集的交集。\n\n优化问题是在区间 $x \\in [l, u]$ 上找到目标函数 $J(x) = (\\min\\{M, x^2\\} - b)^2$ 的全局最小值。由于项 $\\min\\{M, x^2\\}$ 的存在，函数 $J(x)$ 是非凸的。为了应用凸优化技术，我们通过引入一个辅助变量 $y$ 来重新表述该问题。原问题等价于：\n$$ \\min_{x,y} (y-b)^2 $$\n约束条件为：\n$$ y = \\min\\{M, x^2\\} $$\n$$ x \\in [l, u] $$\n等式约束可以分解为一组定义 $(x,y)$ 空间中可行域的约束：\n$$ y \\le x^2 $$\n$$ y \\le M $$\n$$ l \\le x \\le u $$\n约束 $y=x^2$ 是非凸的。（更准确地说，是集合 $\\{(x,y) | y=\\min(M, x^2)\\}$ 是非凸的。）在分支定界法的背景下，我们寻求在由 $x \\in [l, u]$ 定义的域上目标函数的下界。这通过将非凸可行域替换为一个更大的凸区域（称为凸松弛）来实现。关键在于松弛非凸约束 $y \\le x^2$。\n\n函数 $f(x)=x^2$ 是一个凸函数。对于 $x \\in [l, u]$，非凸约束 $y \\le x^2$ 定义了一个非凸区域。其凸松弛是通过用连接端点 $(l, f(l))$ 和 $(u, f(u))$ 的割线来替换上界 $y=x^2$ 得到的。\n给定 $f(x)=x^2$，割线的端点是 $(l, l^2)$ 和 $(u, u^2)$。割线的斜率是：\n$$ m = \\frac{u^2 - l^2}{u - l} = \\frac{(u-l)(u+l)}{u-l} = u+l $$\n割线方程 $y_s(x)$ 由点斜式给出：\n$$ y_s(x) - l^2 = (u+l)(x-l) $$\n$$ y_s(x) = (u+l)x - lu - l^2 + l^2 = (u+l)x - lu $$\n因此，对于 $x \\in [l, u]$，约束 $y=x^2$ 的凸松弛是以下不等式对：\n$$ y \\ge x^2 $$\n$$ y \\le (u+l)x - lu $$\n这是一个错误。正确的凸松弛是用凸函数的下界和割线的上界来包围原区域。原始约束是 $y = \\min\\{M, x^2\\}$。等价于 $y \\le M$ 和 $y \\le x^2$。我们还必须找到一个下界。我们可以将 $y=x^2$ 松弛为 $y \\ge x^2$ （因为 $f(x)=x^2$ 是凸函数）吗？不，那不是松弛。正确的做法是，用一个辅助变量 $z=x^2$ 替换 $x^2$，然后松弛 $z=x^2$。\n$$ \\min_{x,y,z} (y-b)^2 $$\n$$ y = \\min\\{M, z\\}, \\quad z=x^2, \\quad x \\in [l,u] $$\n等价于 $y \\le M, y \\le z, z=x^2$ 吗？不。$y=\\min$ 不能这样分解。\n让我们回到原解的思路。\n原问题是 $\\min_{x,y} (y-b)^2$ s.t. $y=x^2$, $y \\le M$, $l \\le x \\le u$。\n约束 $y=x^2$ 是非凸的。其凸包络是 $y \\ge x^2$ 和 $y \\le (l+u)x - lu$。\n所以松弛的可行集 $\\mathcal{R}$ 定义为：\n$$ \\mathcal{R} = \\{ (x,y) \\in \\mathbb{R}^2 \\mid l \\le x \\le u, \\quad y \\ge x^2, \\quad y \\le (u+l)x - lu, \\quad y \\le M \\} $$\n松弛后的优化问题提供了原问题的下界，其形式为：\n$$ L_B = \\min_{(x,y) \\in \\mathcal{R}} (y-b)^2 $$\n目标函数 $(y-b)^2$ 只依赖于变量 $y$。因此，我们可以通过首先确定集合 $\\mathcal{R}$ 中 $y$ 的可行值范围，然后在这个范围上最小化目标函数来找到解。令 $Y$ 为 $\\mathcal{R}$ 在 $y$ 轴上的投影。\n$$ Y = \\{ y \\mid \\exists x \\text{ s.t. } (x,y) \\in \\mathcal{R} \\} $$\n对于一个给定的 $y$ 要在 $Y$ 中，必须存在一个 $x$ 满足：\n1. $l \\le x \\le u$\n2. $y \\le M$\n3. $y \\ge x^2 \\implies x \\in [-\\sqrt{y}, \\sqrt{y}]$\n4. $y \\le (u+l)x - lu \\implies x \\ge \\frac{y+lu}{u+l}$\n\n结合3和4，对于一个给定的 $y$，有效的 $x$ 区间为 $[\\frac{y+lu}{u+l}, \\sqrt{y}]$（因为 $x>l>0$）。\n这个区间必须与 $[l,u]$ 有交集。\n首先，为使区间非空，我们需要 $\\frac{y+lu}{u+l} \\le \\sqrt{y}$，这等价于 $y - (u+l)\\sqrt{y} + lu \\le 0$。令 $z = \\sqrt{y}$，这变成二次不等式 $z^2 - (u+l)z + lu \\le 0$。二次方程 $z^2 - (u+l)z + lu = 0$ 的根是 $z=l$ 和 $z=u$。因此，该不等式对于 $z \\in [l, u]$ 成立，这意味着 $\\sqrt{y} \\in [l,u]$，或者 $y \\in [l^2, u^2]$。\n对于任意 $y \\in [l^2, u^2]$，有效的 $x$ 值区间 $[\\frac{y+lu}{u+l}, \\sqrt{y}]$ 是非空的，并且是 $[l,u]$ 的一个子区间。因此，存在一个可行的 $x$。\n将此与约束 $y \\le M$ 结合，$y$ 的所有可能值的集合是区间 $Y = [l^2, u^2] \\cap (-\\infty, M]$，可以简化为：\n$$ Y = [l^2, \\min(M, u^2)] $$\n下界问题简化为一维最小化问题：\n$$ L_B = \\min_{y \\in [l^2, \\min(M, u^2)]} (y-b)^2 $$\n$(y-b)^2$ 的无约束最小值在 $y=b$ 处取得。约束问题的解是通过将点 $b$ 投影到区间 $[l^2, \\min(M, u^2)]$ 上找到的。\n令 $y_{min} = l^2$ 和 $y_{max} = \\min(M, u^2)$。目标函数的最小值在区间 $[y_{min}, y_{max}]$ 中最接近 $b$ 的点 $y^*$ 处取得。\n因此，下界 $L_B$ 由以下分情况表达式给出：\n$$ L_B = \\begin{cases} (l^2-b)^2  \\text{若 } b  l^2 \\\\ 0  \\text{若 } l^2 \\le b \\le \\min(M, u^2) \\\\ (\\min(M, u^2)-b)^2  \\text{若 } b > \\min(M, u^2) \\end{cases} $$\n这个表达式就是所要求的闭式下界。\n\n现在我们对给定的数值 $l=1, u=3, M=6, b=8$ 计算这个下界。\n首先，我们确定松弛问题中 $y$ 的区间：\n$$ y_{min} = l^2 = 1^2 = 1 $$\n$$ u^2 = 3^2 = 9 $$\n$$ y_{max} = \\min(M, u^2) = \\min(6, 9) = 6 $$\n该区间为 $Y = [1, 6]$。\n目标值为 $b=8$。我们将 $b$ 与此区间进行比较。\n因为 $b = 8 > 6$（即 $y_{max}$），我们属于下界公式的第三种情况。\n下界 $L_B$ 是：\n$$ L_B = (y_{max} - b)^2 = (6 - 8)^2 = (-2)^2 = 4 $$\n$\\min_{x\\in[1,3]} \\left(\\min\\{6,x^{2}\\}-8\\right)^{2}$ 的数值下界是 $4$。四舍五入到四位有效数字得到 $4.000$。",
            "answer": "$$\\boxed{4.000}$$"
        },
        {
            "introduction": "在掌握了为单变量函数创建下界的方法之后，下一步是处理更复杂的多变量问题。这个练习展示了一种处理具有“可分离”结构问题的强大技术，这类问题的目标函数可以表示为多个单变量函数的和。你将学习如何通过对每个非凸部分构建凸包络来为整个问题创建一个下界，并解决由此产生的松弛问题。此外，本练习还引入了分支策略的关键概念，即如何根据“包络间隙”智能地选择分支变量以有效缩小搜索空间。",
            "id": "3118759",
            "problem": "考虑一个确定性全局最小化问题，其目标函数可分，定义在一个含单一线性耦合约束的箱式区域上。其目标函数为\n$$\nf(x) \\;=\\; \\sum_{i=1}^{3} f_i(x_i),\n$$\n其中\n$$\nf_1(x_1) \\;=\\; \\sqrt{x_1}, \\quad f_2(x_2) \\;=\\; \\ln(x_2), \\quad f_3(x_3) \\;=\\; \\arctan(x_3),\n$$\n可行集为\n$$\n\\mathcal{X} \\;=\\; \\left\\{ x \\in \\mathbb{R}^{3} \\;:\\; x_1 \\in [1,3],\\; x_2 \\in [2,5],\\; x_3 \\in [0,4],\\; x_1 + x_2 + x_3 \\;=\\; 7 \\right\\}.\n$$\n所有三角函数均以弧度为单位。\n\n从凸包络的定义和分支定界 (BnB) 的定界原理出发，利用可分性，通过将 $f_i$ 在相应坐标区间上的单变量凸包络求和，并仅通过这些包络进行松弛，来构建一个有效的根节点下界。然后，利用线性耦合约束计算根节点上该箱式区域内最紧的可分下界。\n\n接着，将在基于包络的最优解 $x^{\\star}$ 处的坐标方向上的包络间隙定义为\n$$\ng_i \\;=\\; f_i\\!\\left(x_i^{\\star}\\right) \\;-\\; f_i^{\\mathrm{env}}\\!\\left(x_i^{\\star}\\right),\n$$\n其中 $f_i^{\\mathrm{env}}$ 表示 $f_i$ 在其区间上的单变量凸包络。将最大化 $g_i$ 的索引 $i$ 确定为要分支的“最差”坐标。\n\n提供：\n- 计算出的根节点下界，以单一精确解析表达式表示。\n- 根据上述规则确定的最差坐标的索引（以整数形式）。\n\n请使用精确形式（例如 $\\ln(5)$、$\\arctan(4)$）表达您的最终答案。不要四舍五入。您的最终答案框必须包含这两个值，形式为单行矩阵。",
            "solution": "任务的核心是在分支定界树的根节点处，构建并求解原始非凸问题的凸松弛问题。该松弛是通过将每个非凸函数分量 $f_i(x_i)$ 替换为其在给定区间上的凸包络 $f_i^{\\mathrm{env}}(x_i)$ 来构造的。\n\n**1. 构造单变量凸包络**\n\n函数在某个区间上的凸包络是可能的最紧的凸下估函数。对于区间 $[a, b]$ 上的凹函数，其凸包络是连接点 $(a, f(a))$ 和 $(b, f(b))$ 的线段（弦）。我们首先通过检查每个 $f_i(x_i)$ 的二阶导数来判断其凹性。\n\n- 对于在 $[1,3]$ 上的 $f_1(x_1) = \\sqrt{x_1}$：\n二阶导数为 $f_1''(x_1) = \\frac{d^2}{dx_1^2}(\\sqrt{x_1}) = -\\frac{1}{4}x_1^{-3/2}$。对于 $x_1 \\in [1,3]$，$f_1''(x_1)  0$，因此 $f_1$ 是严格凹函数。其凸包络 $f_1^{\\mathrm{env}}$ 是连接 $(1, f_1(1))$ 和 $(3, f_1(3))$ 的线段。\n$f_1(1) = \\sqrt{1} = 1$。\n$f_1(3) = \\sqrt{3}$。\n$$f_1^{\\mathrm{env}}(x_1) = f_1(1) + \\frac{f_1(3) - f_1(1)}{3-1}(x_1 - 1) = 1 + \\frac{\\sqrt{3} - 1}{2}(x_1 - 1)$$\n\n- 对于在 $[2,5]$ 上的 $f_2(x_2) = \\ln(x_2)$：\n二阶导数为 $f_2''(x_2) = \\frac{d^2}{dx_2^2}(\\ln(x_2)) = -\\frac{1}{x_2^2}$。对于 $x_2 \\in [2,5]$，$f_2''(x_2)  0$，因此 $f_2$ 是严格凹函数。其凸包络 $f_2^{\\mathrm{env}}$ 是连接 $(2, f_2(2))$ 和 $(5, f_2(5))$ 的线段。\n$f_2(2) = \\ln(2)$。\n$f_2(5) = \\ln(5)$。\n$$f_2^{\\mathrm{env}}(x_2) = f_2(2) + \\frac{f_2(5) - f_2(2)}{5-2}(x_2 - 2) = \\ln(2) + \\frac{\\ln(5) - \\ln(2)}{3}(x_2 - 2)$$\n\n- 对于在 $[0,4]$ 上的 $f_3(x_3) = \\arctan(x_3)$：\n二阶导数为 $f_3''(x_3) = \\frac{d^2}{dx_3^2}(\\arctan(x_3)) = -\\frac{2x_3}{(1+x_3^2)^2}$。对于 $x_3 \\in (0,4]$，$f_3''(x_3)  0$。在 $x_3=0$ 处，$f_3''(0)=0$。该函数在 $[0,4]$ 上是凹函数。其凸包络 $f_3^{\\mathrm{env}}$ 是连接 $(0, f_3(0))$ 和 $(4, f_3(4))$ 的线段。\n$f_3(0) = \\arctan(0) = 0$。\n$f_3(4) = \\arctan(4)$。\n$$f_3^{\\mathrm{env}}(x_3) = f_3(0) + \\frac{f_3(4) - f_3(0)}{4-0}(x_3 - 0) = \\frac{\\arctan(4)}{4}x_3$$\n\n**2. 求解松弛问题以获得下界**\n\n松弛问题是在原始约束条件下最小化凸包络之和：\n$$ \\min_{x} \\quad L(x) = f_1^{\\mathrm{env}}(x_1) + f_2^{\\mathrm{env}}(x_2) + f_3^{\\mathrm{env}}(x_3) $$\n$$ \\text{s.t.} \\quad x_1 \\in [1,3], \\quad x_2 \\in [2,5], \\quad x_3 \\in [0,4], \\quad x_1+x_2+x_3 = 7. $$\n目标函数 $L(x)$ 是线性的，因为每个 $f_i^{\\mathrm{env}}$ 都是线性函数。我们可以将 $L(x)$ 写成 $L(x) = m_1 x_1 + c_1 + m_2 x_2 + c_2 + m_3 x_3 + c_3$，其中斜率 $m_i$ 为：\n$$ m_1 = \\frac{\\sqrt{3} - 1}{2} \\approx 0.366 $$\n$$ m_2 = \\frac{\\ln(5) - \\ln(2)}{3} = \\frac{\\ln(2.5)}{3} \\approx 0.305 $$\n$$ m_3 = \\frac{\\arctan(4)}{4} \\approx \\frac{1.326}{4} = 0.3315 $$\n该问题是在一个多胞体上最小化一个线性函数 $\\sum m_i x_i$。最小值将在一个顶点处取得。为了找到解，我们应用一个基于斜率的贪心策略：为了最小化总和，我们必须将最大可能的值赋给斜率最小的变量，将最小可能的值赋给斜率最大的变量。\n斜率的顺序为 $m_2  m_3  m_1$。\n因此，我们设置：\n- 将 $x_2$ 设为其最大值，因为 $m_2$ 是最小的斜率：$x_2^{\\star} = 5$。\n- 将 $x_1$ 设为其最小值，因为 $m_1$ 是最大的斜率：$x_1^{\\star} = 1$。\n$x_3$ 的值则由耦合约束确定：\n$$ x_3^{\\star} = 7 - x_1^{\\star} - x_2^{\\star} = 7 - 1 - 5 = 1. $$\n我们验证解 $x^{\\star} = (1, 5, 1)$ 是可行的：\n- $x_1^{\\star} = 1 \\in [1,3]$ （在下界）。\n- $x_2^{\\star} = 5 \\in [2,5]$ （在上界）。\n- $x_3^{\\star} = 1 \\in [0,4]$ （在内部）。\n点 $x^{\\star}$ 是可行的。根节点下界是松弛目标函数 $L(x)$ 在 $x^{\\star}$ 处的值：\n$$ \\text{下界} = f_1^{\\mathrm{env}}(x_1^{\\star}) + f_2^{\\mathrm{env}}(x_2^{\\star}) + f_3^{\\mathrm{env}}(x_3^{\\star}). $$\n- $f_1^{\\mathrm{env}}(1) = 1 + \\frac{\\sqrt{3}-1}{2}(1-1) = 1$。这是预料之中的，因为 $x_1^\\star$ 是一个端点。\n- $f_2^{\\mathrm{env}}(5) = \\ln(2) + \\frac{\\ln(5)-\\ln(2)}{3}(5-2) = \\ln(2) + \\ln(5) - \\ln(2) = \\ln(5)$。这也是预料之中的。\n- $f_3^{\\mathrm{env}}(1) = \\frac{\\arctan(4)}{4}(1) = \\frac{\\arctan(4)}{4}$。\n根节点下界是这些值的和：\n$$ \\text{下界} = 1 + \\ln(5) + \\frac{\\arctan(4)}{4}. $$\n\n**3. 确定分支变量**\n\n分支变量被选为在松弛解 $x^{\\star} = (1, 5, 1)$ 处具有最大包络间隙 $g_i = f_i(x_i^{\\star}) - f_i^{\\mathrm{env}}(x_i^{\\star})$ 的那个变量。\n\n- 对于 $i=1$：$x_1^{\\star} = 1$。由于这是区间 $[1,3]$ 的一个端点，函数与其包络在此处重合。\n$$ g_1 = f_1(1) - f_1^{\\mathrm{env}}(1) = \\sqrt{1} - 1 = 0. $$\n- 对于 $i=2$：$x_2^{\\star} = 5$。这是区间 $[2,5]$ 的一个端点。\n$$ g_2 = f_2(5) - f_2^{\\mathrm{env}}(5) = \\ln(5) - \\ln(5) = 0. $$\n- 对于 $i=3$：$x_3^{\\star} = 1$。该点位于区间 $[0,4]$ 的内部。\n$$ f_3(1) = \\arctan(1) = \\frac{\\pi}{4}. $$\n$$ f_3^{\\mathrm{env}}(1) = \\frac{\\arctan(4)}{4}. $$\n间隙为：\n$$ g_3 = f_3(1) - f_3^{\\mathrm{env}}(1) = \\frac{\\pi}{4} - \\frac{\\arctan(4)}{4}. $$\n由于 $f_3$ 在 $(0,4)$ 上是严格凹函数，其在任何内点的值都严格大于其凸包络的值。因此，$g_3 > 0$。\n比较这些间隙，$g_1=0$，$g_2=0$，且 $g_3 > 0$。最大间隙是 $g_3$。\n因此，要分支的坐标是 $i=3$。\n\n所要求的两个值是根节点下界和最差坐标的索引。\n- 根节点下界：$1 + \\ln(5) + \\frac{\\arctan(4)}{4}$。\n- 最差坐标的索引：3。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n1 + \\ln(5) + \\frac{\\arctan(4)}{4}  3\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "许多实际优化问题都包含诸如 $w = xy$ 这样的“双线性”项，这是非凸性的常见来源。本练习聚焦于处理此类项的标准方法——McCormick包络松弛。你将探索分支定界算法中一个至关重要的实践问题：如何选择最佳的分支变量以最快地收紧界限，从而加速算法收敛。通过比较不同分支选择带来的上界紧致程度，你将深入理解分支策略对算法效率的巨大影响。",
            "id": "3118754",
            "problem": "考虑具有单一双线性项的非凸最大化问题：\n最大化 $w$，约束条件为 $w = x y$，$x + y = 1$，$x \\in [0, 10]$ 和 $y \\in [0, 0.1]$。您将使用分支定界 (BnB) 法分析确定性全局优化的单一步骤，其中线性连续松弛是基于双线性项的 McCormick 包络构建的。\n\n仅使用以下基本要素：\n- 分支定界 (BnB) 的定义：一种分割方法，通过求解子区域上的松弛问题来计算最大化问题的上界，分支后的全局上界由子节点松弛最优值的最大值给出。\n- 双线性项 $w = x y$ 在矩形 $[x_L, x_U] \\times [y_L, y_U]$ 上的 McCormick 凸包络和凹包络，即线性不等式\n  $$\n  \\begin{aligned}\n  w \\ge x_L y + x y_L - x_L y_L, \\\\\n  w \\ge x_U y + x y_U - x_U y_U, \\\\\n  w \\le x_U y + x y_L - x_U y_L, \\\\\n  w \\le x_L y + x y_U - x_L y_U.\n  \\end{aligned}\n  $$\n这些是 $w = x y$ 唯一允许的松弛。\n\n在根节点，连续松弛使用 $x \\in [0, 10]$，$y \\in [0, 0.1]$，以及 $x + y = 1$。接下来，比较两种分支策略：\n- 在 $x$ 的中点进行分支，创建两个子区域 $x \\in [0, 5]$ 和 $x \\in [5, 10]$（$y \\in [0, 0.1]$ 保持不变）。\n- 在 $y$ 的中点进行分支，创建两个子区域 $y \\in [0, 0.05]$ 和 $y \\in [0.05, 0.1]$（$x \\in [0, 10]$ 保持不变）。\n\n对于每种策略，使用更新了变量边界和线性约束 $x + y = 1$ 的 McCormick 包络，计算由两个子节点连续松弛最优值的最大值给出的分支后全局上界。然后，根据“选择使该分支后全局上界最小化的分支变量”的启发式规则，确定应对哪个变量进行分支。最后，报告比率\n$$\n\\frac{\\text{对 } x \\text{ 分支后的全局上界}}{\\text{对 } y \\text{ 分支后的全局上界}}。\n$$\n请以单个精确数值（不要四舍五入）的形式提供最终答案。无需单位。",
            "solution": "目标是在 $w = xy$、$x+y=1$、$x \\in [0, 10]$ 和 $y \\in [0, 0.1]$ 的约束下最大化 $w$。我们使用基于双线性项 $w=xy$ 在矩形 $[x_L, x_U] \\times [y_L, y_U]$ 上的 McCormick 包络的连续松弛。由于这是一个最大化问题，我们关心的是提供 $w$ 上界的凹上估计量：\n$$w \\le x_L y + x y_U - x_L y_U$$\n$$w \\le x_U y + x y_L - x_U y_L$$\n给定子矩形的松弛问题是找到满足这两个不等式以及线性约束 $x+y=1$ 和区域约束 $x \\in [x_L, x_U]$ 及 $y \\in [y_L, y_U]$ 的 $w$ 的最大值。\n\n我们可以将 $x = 1-y$ 代入 McCormick 不等式，将 $w$ 的上界表示为仅关于 $y$ 的函数：\n$w \\le x_L y + (1-y) y_U - x_L y_U = (x_L - y_U)y + y_U(1 - x_L)$。令其为 $W_1(y)$。\n$w \\le x_U y + (1-y) y_L - x_U y_L = (x_U - y_L)y + y_L(1 - x_U)$。令其为 $W_2(y)$。\n松弛后的目标是最大化 $w = \\min(W_1(y), W_2(y))$。这个关于 $y$ 的函数是凹函数，因为它是两个线性函数的最小值。$W_1(y)$ 的斜率为 $m_1 = x_L - y_U  0$，$W_2(y)$ 的斜率为 $m_2 = x_U - y_L > 0$。因此，函数 $\\min(W_1(y), W_2(y))$ 在交点 $y_{int}$ 处有唯一的峰值，该点满足 $W_1(y_{int}) = W_2(y_{int})$。\n\n$y$ 的可行域受到区域边界 $[y_L, y_U]$ 和 $x$ 的区域边界推论的共同约束，$x \\in [x_L, x_U] \\implies 1-y \\in [x_L, x_U] \\implies y \\in [1-x_U, 1-x_L]$。$y$ 的有效可行区间为 $I_y = [\\max(y_L, 1-x_U), \\min(y_U, 1-x_L)]$。如果这个区间包含 $y_{int}$，则松弛的最大值在 $y_{int}$ 处取得。\n\n策略 1：在 $x$ 的中点 $x=5$ 处进行分支。\n\n子节点 1.1：$x \\in [0, 5]$，$y \\in [0, 0.1]$。\n此处，$x_L=0$，$x_U=5$，$y_L=0$，$y_U=0.1$。$y$ 的可行区间为 $I_y = [\\max(0, 1-5), \\min(0.1, 1-0)] = [\\max(0, -4), \\min(0.1, 1)] = [0, 0.1]$。\n两个边界函数为：\n$W_1(y) = (0 - 0.1)y + 0.1(1-0) = -0.1y + 0.1$\n$W_2(y) = (5 - 0)y + 0(1-5) = 5y$\n交点满足 $-0.1y_{int} + 0.1 = 5y_{int}$，解得 $5.1y_{int} = 0.1$，所以 $y_{int} = \\frac{0.1}{5.1} = \\frac{1}{51}$。\n由于 $y_{int} = \\frac{1}{51} \\approx 0.0196$ 在区间 $[0, 0.1]$ 内，最大值在此点取得。\n上界为 $w_{ub,1}^x = 5y_{int} = 5(\\frac{1}{51}) = \\frac{5}{51}$。\n\n子节点 1.2：$x \\in [5, 10]$，$y \\in [0, 0.1]$。\n此处，$x_L=5$，$x_U=10$，$y_L=0$，$y_U=0.1$。$y$ 的可行区间为 $I_y = [\\max(0, 1-10), \\min(0.1, 1-5)] = [\\max(0, -9), \\min(0.1, -4)] = [0, -4]$。\n由于区间的下界大于上界，该区间为空。该子问题是不可行的，其最优值为 $w_{ub,2}^x = -\\infty$。\n\n对 $x$ 分支后的全局上界为 $UB_x = \\max(w_{ub,1}^x, w_{ub,2}^x) = \\max(\\frac{5}{51}, -\\infty) = \\frac{5}{51}$。\n\n策略 2：在 $y$ 的中点 $y=0.05$ 处进行分支。\n\n子节点 2.1：$x \\in [0, 10]$，$y \\in [0, 0.05]$。\n此处，$x_L=0$，$x_U=10$，$y_L=0$，$y_U=0.05$。$y$ 的可行区间为 $I_y = [\\max(0, 1-10), \\min(0.05, 1-0)] = [0, 0.05]$。\n两个边界函数为：\n$W_1(y) = (0 - 0.05)y + 0.05(1-0) = -0.05y + 0.05$\n$W_2(y) = (10 - 0)y + 0(1-10) = 10y$\n交点满足 $-0.05y_{int} + 0.05 = 10y_{int}$，解得 $10.05y_{int} = 0.05$，所以 $y_{int} = \\frac{0.05}{10.05} = \\frac{5}{1005} = \\frac{1}{201}$。\n由于 $y_{int} = \\frac{1}{201} \\approx 0.004975$ 在 $[0, 0.05]$ 内，最大值为 $w_{ub,1}^y = 10y_{int} = 10(\\frac{1}{201}) = \\frac{10}{201}$。\n\n子节点 2.2：$x \\in [0, 10]$，$y \\in [0.05, 0.1]$。\n此处，$x_L=0$，$x_U=10$，$y_L=0.05$，$y_U=0.1$。$y$ 的可行区间为 $I_y = [\\max(0.05, 1-10), \\min(0.1, 1-0)] = [0.05, 0.1]$。\n两个边界函数为：\n$W_1(y) = (0 - 0.1)y + 0.1(1-0) = -0.1y + 0.1$\n$W_2(y) = (10 - 0.05)y + 0.05(1-10) = 9.95y - 0.45$\n交点满足 $-0.1y_{int} + 0.1 = 9.95y_{int} - 0.45$，解得 $10.05y_{int} = 0.55$，所以 $y_{int} = \\frac{0.55}{10.05} = \\frac{55}{1005} = \\frac{11}{201}$。\n由于 $y_{int} = \\frac{11}{201} \\approx 0.0547$ 在 $[0.05, 0.1]$ 内，最大值为 $w_{ub,2}^y = -0.1y_{int} + 0.1 = -0.1(\\frac{11}{201}) + 0.1 = 0.1(1 - \\frac{11}{201}) = \\frac{1}{10}(\\frac{190}{201}) = \\frac{19}{201}$。\n\n对 $y$ 分支后的全局上界为 $UB_y = \\max(w_{ub,1}^y, w_{ub,2}^y) = \\max(\\frac{10}{201}, \\frac{19}{201}) = \\frac{19}{201}$。\n\n比较与最终计算：\n为了比较这两个上界：\n$UB_x = \\frac{5}{51} = \\frac{5 \\times 67}{51 \\times 67} = \\frac{335}{3417}$。\n$UB_y = \\frac{19}{201} = \\frac{19 \\times 17}{201 \\times 17} = \\frac{323}{3417}$。\n由于 $UB_y  UB_x$，启发式规则会选择对 $y$ 进行分支。\n\n问题要求计算比率 $\\frac{UB_x}{UB_y}$：\n$$ \\frac{UB_x}{UB_y} = \\frac{5/51}{19/201} = \\frac{5}{51} \\times \\frac{201}{19} = \\frac{5}{3 \\times 17} \\times \\frac{3 \\times 67}{19} = \\frac{5 \\times 67}{17 \\times 19} = \\frac{335}{323} $$",
            "answer": "$$\n\\boxed{\\frac{335}{323}}\n$$"
        }
    ]
}