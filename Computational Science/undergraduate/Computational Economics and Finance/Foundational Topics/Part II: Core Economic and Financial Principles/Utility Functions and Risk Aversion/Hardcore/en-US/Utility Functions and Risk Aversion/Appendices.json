{
    "hands_on_practices": [
        {
            "introduction": "Theoretical models of risk aversion are most powerful when they can be connected to observable actions. This practice challenges you to work backward from an observed financial decision—an investor's allocation to stocks—to infer their underlying risk preference. By applying the foundational Merton's portfolio problem, you will see how the optimal balance between a risky and a risk-free asset directly reveals the investor's coefficient of relative risk aversion, $\\gamma$ .",
            "id": "2445855",
            "problem": "An investor allocates a constant fraction of wealth to the Standard and Poor's (SP) $500$ index and the remainder to a risk-free money market account. The investor has constant relative risk aversion (CRRA) preferences over terminal wealth with utility $U(W) = \\frac{W^{1-\\gamma}}{1-\\gamma}$ for $\\gamma  0$, $\\gamma \\neq 1$. The SP $500$ index price $S_t$ follows a Geometric Brownian Motion (GBM) given by $\\mathrm{d}S_t/S_t = \\mu \\,\\mathrm{d}t + \\sigma \\,\\mathrm{d}B_t$, where $\\mu$ and $\\sigma$ are constants and $B_t$ is a standard Brownian motion. The risk-free rate is a constant $r$. The investor maintains a constant portfolio weight $\\omega$ in the SP $500$ at all times over the horizon $[0,T]$, investing $1-\\omega$ in the risk-free asset.\n\nYou observe that $\\omega = 0.60$. Assume the annualized parameters are $\\mu = 0.07$, $\\sigma = 0.20$, and $r = 0.02$, all expressed in per-year units. Under the maintained assumptions, infer the investor’s implied coefficient of relative risk aversion $\\gamma$. Round your answer to three significant figures.",
            "solution": "The problem requires the inference of the coefficient of relative risk aversion, $\\gamma$, from an investor's observed optimal portfolio allocation. We begin by validating the problem statement.\n\nStep 1: Extract Givens.\n- Investor utility function: $U(W) = \\frac{W^{1-\\gamma}}{1-\\gamma}$ for $\\gamma  0$, $\\gamma \\neq 1$. This is a constant relative risk aversion (CRRA) utility function.\n- Risky asset (SP 500) price dynamics: $\\frac{\\mathrm{d}S_t}{S_t} = \\mu \\,\\mathrm{d}t + \\sigma \\,\\mathrm{d}B_t$.\n- Risk-free asset return rate: constant $r$.\n- Portfolio allocation: A constant fraction $\\omega$ is invested in the risky asset, and $1-\\omega$ in the risk-free asset.\n- Observed and given parameters:\n  - $\\omega = 0.60$\n  - $\\mu = 0.07$ (annualized expected return of the risky asset)\n  - $\\sigma = 0.20$ (annualized volatility of the risky asset)\n  - $r = 0.02$ (annualized risk-free rate)\n  - Investment horizon: $[0,T]$.\n\nStep 2: Validate Using Extracted Givens.\nThe problem is scientifically grounded as it is a direct application of Merton's portfolio problem, a classical and fundamental topic in mathematical finance. It is well-posed, as a unique value for $\\gamma$ can be determined from the provided parameters and the established theoretical model. The problem is stated objectively with precise numerical values and functional forms. It is self-contained and free of contradictions. The parameter values provided are realistic for financial markets. Therefore, the problem is deemed valid and a solution may be constructed.\n\nStep 3: Proceed with Solution.\nThe investor's objective is to maximize the expected utility of terminal wealth, $E[U(W_T)]$. For an investor with a CRRA utility function operating in a market with a single risky asset following a Geometric Brownian Motion and a constant risk-free rate, the optimal proportion of wealth to allocate to the risky asset, $\\omega^*$, is constant over time. This is a standard result from Merton's portfolio theory.\n\nLet $W_t$ be the investor's wealth at time $t$. The dynamics of the wealth process are determined by the returns on the portfolio components. The change in wealth, $dW_t$, is given by the sum of the returns from the risky and risk-free positions:\n$$ dW_t = (\\omega W_t) \\frac{dS_t}{S_t} + ((1-\\omega)W_t) r dt $$\nSubstituting the stochastic differential equation (SDE) for the risky asset, $\\frac{dS_t}{S_t} = \\mu dt + \\sigma dB_t$:\n$$ dW_t = \\omega W_t (\\mu dt + \\sigma dB_t) + (1-\\omega)W_t r dt $$\nWe can rearrange this by grouping the deterministic ($dt$) and stochastic ($dB_t$) terms:\n$$ dW_t = [\\omega \\mu + (1-\\omega)r] W_t dt + \\omega \\sigma W_t dB_t $$\nDividing by $W_t$ gives the SDE for the rate of return of the wealth portfolio:\n$$ \\frac{dW_t}{W_t} = [\\omega(\\mu - r) + r] dt + \\omega \\sigma dB_t $$\nThe solution to the optimization problem $\\max_{\\omega} E\\left[\\frac{W_T^{1-\\gamma}}{1-\\gamma}\\right]$ yields the optimal allocation $\\omega^*$. The coefficient of relative risk aversion for the given utility function is defined as $RRA(W) = - \\frac{W U''(W)}{U'(W)}$. For the specified utility function, $U'(W) = W^{-\\gamma}$ and $U''(W) = -\\gamma W^{-\\gamma-1}$, which gives $RRA(W) = - \\frac{W (-\\gamma W^{-\\gamma-1})}{W^{-\\gamma}} = \\gamma$.\n\nThe well-known Merton's ratio gives the optimal allocation as:\n$$ \\omega^* = \\frac{\\mu - r}{\\gamma \\sigma^2} $$\nHere, $\\mu - r$ is the market price of risk, or the equity risk premium. The term $\\gamma \\sigma^2$ is the product of the investor's risk aversion and the variance of the risky asset's returns.\n\nThe problem states that the investor maintains a constant allocation $\\omega = 0.60$. We equate this observed allocation to the investor's optimal allocation, so we set $\\omega^* = \\omega$. We are given the following parameter values:\n- $\\mu = 0.07$\n- $r = 0.02$\n- $\\sigma = 0.20$\n- $\\omega^* = 0.60$\n\nWe can now solve for the implied coefficient of relative risk aversion, $\\gamma$, by rearranging the formula for the optimal allocation:\n$$ \\gamma = \\frac{\\mu - r}{\\omega^* \\sigma^2} $$\nSubstituting the given numerical values into this expression:\n$$ \\gamma = \\frac{0.07 - 0.02}{0.60 \\times (0.20)^2} $$\nFirst, we compute the numerator and the terms in the denominator:\n- The equity risk premium: $\\mu - r = 0.05$.\n- The variance of the risky asset: $\\sigma^2 = (0.20)^2 = 0.04$.\n- The denominator product: $\\omega^* \\sigma^2 = 0.60 \\times 0.04 = 0.024$.\n\nNow, substitute these back into the expression for $\\gamma$:\n$$ \\gamma = \\frac{0.05}{0.024} $$\nTo compute the numerical value, we can express this as a fraction of integers:\n$$ \\gamma = \\frac{50}{24} = \\frac{25}{12} $$\nThis evaluates to approximately $2.08333...$. The problem requires the answer to be rounded to three significant figures.\n$$ \\gamma \\approx 2.08 $$\nThis value is a plausible measure of risk aversion.",
            "answer": "$$\n\\boxed{2.08}\n$$"
        },
        {
            "introduction": "While inferring risk aversion from a single data point is insightful, a more robust approach is to estimate it from a series of choices. This exercise guides you through a core task in modern econometrics: fitting a behavioral model to experimental data. You will use the principle of Maximum Likelihood Estimation (MLE) to find the risk aversion parameter $\\gamma$ that best explains a set of observed lottery choices, bridging the gap between utility theory and statistical inference .",
            "id": "2445881",
            "problem": "You are given a sequence of binary choices made by a single decision-maker between a certain payoff and a risky lottery, under the assumption that the decision-maker evaluates outcomes using a Constant Relative Risk Aversion (CRRA) power utility function. The utility of wealth is given by\n$$\nU(W) =\n\\begin{cases}\n\\dfrac{W^{1-\\gamma}}{1-\\gamma},  \\gamma \\neq 1, \\\\\n\\ln(W),  \\gamma = 1,\n\\end{cases}\n$$\nwhere $W$ is the payoff (assume $W$ is measured in the same monetary units across all tasks and that the initial wealth is $0$, so $W$ is the total wealth in each task), and $\\gamma$ is the risk aversion coefficient to be estimated. For each choice, the decision-maker selects between a certain payoff $S$ and a risky lottery that pays $x_h$ with probability $p$ and $x_\\ell$ with probability $1-p$, with $x_h  0$, $x_\\ell  0$, $S  0$, and $p \\in (0,1)$ given in decimal form. Assume a binary response model in which the probability of choosing the risky lottery is\n$$\nP_{\\text{risky}}(\\gamma) = \\frac{1}{1+\\exp\\left(-\\lambda \\cdot \\Delta(\\gamma)\\right)},\n$$\nwhere\n$$\n\\Delta(\\gamma) = \\left[p \\cdot U(x_h) + (1-p)\\cdot U(x_\\ell)\\right] - U(S),\n$$\nand $\\lambda  0$ is a given sensitivity parameter. The observed choice for each task is denoted by $c \\in \\{0,1\\}$, where $c=1$ indicates the risky lottery was chosen, and $c=0$ indicates the certain payoff was chosen. The log-likelihood contribution of one observation is\n$$\n\\ell(\\gamma) = c \\cdot \\ln\\left(P_{\\text{risky}}(\\gamma)\\right) + (1-c)\\cdot \\ln\\left(1 - P_{\\text{risky}}(\\gamma)\\right).\n$$\nYour task is to write a program that, for each dataset of choices, computes the value of $\\gamma$ within a closed interval $[\\underline{\\gamma},\\overline{\\gamma}]$ that maximizes the total log-likelihood, i.e., the sum of $\\ell(\\gamma)$ over all observations in that dataset.\n\nUse the following parameter values (these apply to all datasets):\n- Sensitivity parameter $\\lambda = 1.0$.\n- Risk aversion search interval $[\\underline{\\gamma},\\overline{\\gamma}] = [0.01, 3.0]$.\n\nTest Suite (each dataset is an ordered list of choice tuples $(S,p,x_h,x_\\ell,c)$, with $p$ expressed as a decimal):\n\n- Dataset A (general case, includes the $\\gamma=1$ boundary in the utility definition implicitly through the data):\n  1. $(4.0,\\, 0.5,\\, 10.0,\\, 2.0,\\, 1)$\n  2. $(5.0,\\, 0.5,\\, 10.0,\\, 2.0,\\, 0)$\n  3. $(8.0,\\, 0.5,\\, 20.0,\\, 4.0,\\, 1)$\n  4. $(9.5,\\, 0.5,\\, 20.0,\\, 4.0,\\, 0)$\n  5. $(2.0,\\, 0.5,\\, 5.0,\\, 1.0,\\, 1)$\n  6. $(2.8,\\, 0.5,\\, 5.0,\\, 1.0,\\, 0)$\n\n- Dataset B (lower risk aversion, near risk-neutral):\n  1. $(8.0,\\, 0.5,\\, 16.0,\\, 4.0,\\, 1)$\n  2. $(10.0,\\, 0.5,\\, 16.0,\\, 4.0,\\, 0)$\n  3. $(4.0,\\, 0.5,\\, 8.0,\\, 2.0,\\, 1)$\n  4. $(5.0,\\, 0.5,\\, 8.0,\\, 2.0,\\, 0)$\n  5. $(17.0,\\, 0.5,\\, 32.0,\\, 8.0,\\, 1)$\n  6. $(19.0,\\, 0.5,\\, 32.0,\\, 8.0,\\, 0)$\n\n- Dataset C (higher risk aversion):\n  1. $(4.0,\\, 0.5,\\, 12.0,\\, 3.0,\\, 1)$\n  2. $(5.2,\\, 0.5,\\, 12.0,\\, 3.0,\\, 0)$\n  3. $(9.0,\\, 0.5,\\, 24.0,\\, 6.0,\\, 1)$\n  4. $(10.0,\\, 0.5,\\, 24.0,\\, 6.0,\\, 0)$\n  5. $(2.2,\\, 0.5,\\, 6.0,\\, 1.5,\\, 1)$\n  6. $(2.6,\\, 0.5,\\, 6.0,\\, 1.5,\\, 0)$\n\nFinal Output Format:\n- Your program should produce a single line of output containing the estimated risk aversion coefficients for Dataset A, Dataset B, and Dataset C, in that order, as a comma-separated list enclosed in square brackets. Each estimate must be a floating-point number rounded to six decimal places. For example: \"[0.723456,1.234567,2.345678]\".",
            "solution": "The problem requires the estimation of a risk aversion parameter, $\\gamma$, by maximizing the log-likelihood of a series of observed binary choices. This is a standard problem in computational economics. Before proceeding, the problem statement must be validated for scientific soundness and consistency.\n\n**Step 1: Extract Givens**\n- **Utility Function**: The Constant Relative Risk Aversion (CRRA) power utility function is defined as $U(W) = \\frac{W^{1-\\gamma}}{1-\\gamma}$ for $\\gamma \\neq 1$, and $U(W) = \\ln(W)$ for $\\gamma = 1$. The initial wealth is assumed to be $0$, so the payoff $W$ represents total wealth. All payoffs $W0$.\n- **Choice Task**: A choice between a certain payoff $S$ and a risky lottery ($x_h$ with probability $p$, $x_\\ell$ with probability $1-p$).\n- **Choice Probability Model**: The probability of choosing the risky lottery is given by a logistic function, $P_{\\text{risky}}(\\gamma) = \\frac{1}{1+\\exp\\left(-\\lambda \\cdot \\Delta(\\gamma)\\right)}$.\n- **Utility Difference**: The argument of the logistic function is based on $\\Delta(\\gamma) = \\left[p \\cdot U(x_h) + (1-p)\\cdot U(x_\\ell)\\right] - U(S)$.\n- **Observation Data**: The observed choice for each task is $c \\in \\{0,1\\}$, where $c=1$ indicates the risky choice and $c=0$ indicates the certain choice.\n- **Log-Likelihood Function**: The log-likelihood for a single observation is $\\ell(\\gamma) = c \\cdot \\ln\\left(P_{\\text{risky}}(\\gamma)\\right) + (1-c)\\cdot \\ln\\left(1 - P_{\\text{risky}}(\\gamma)\\right)$.\n- **Objective**: Maximize the total log-likelihood, $\\sum_i \\ell_i(\\gamma)$, with respect to $\\gamma$.\n- **Parameters**: The sensitivity parameter is $\\lambda = 1.0$. The search for the optimal $\\gamma$ is constrained to the closed interval $[\\underline{\\gamma},\\overline{\\gamma}] = [0.01, 3.0]$.\n- **Test Suite**: Three datasets (A, B, C) are provided, each containing a list of choice tuples $(S,p,x_h,x_\\ell,c)$.\n\n**Step 2: Validate Using Extracted Givens**\n- **Scientific Grounding**: The problem is firmly grounded in microeconomic theory. The CRRA utility function is a cornerstone of decision theory for modeling choice under risk. The use of a logistic function to model probabilistic choice (a form of quantal response equilibrium) is a standard and well-accepted econometric technique. The problem is scientifically sound.\n- **Well-Posedness**: The objective is to maximize a function, the total log-likelihood, over a compact interval. The log-likelihood function for this model is generally well-behaved, and its maximization is a standard Maximum Likelihood Estimation (MLE) problem. A unique solution within the specified bounds is expected. The problem is well-posed.\n- **Objectivity and Completeness**: The problem is stated using precise mathematical definitions and objective numerical data. All parameters, functions, and data required for a solution are explicitly provided. The problem is self-contained and objective.\n\n**Step 3: Verdict and Action**\nThe problem is valid as it is scientifically sound, well-posed, objective, and complete. A solution will be constructed.\n\n**Solution Methodology**\n\nThe task is to find the value of the risk aversion parameter, $\\gamma$, that maximizes the total log-likelihood function $L(\\gamma) = \\sum_{i=1}^{N} \\ell_i(\\gamma)$ for a given set of $N$ observations. This is achieved through numerical optimization.\n\nThe utility function is:\n$$\nU(W, \\gamma) =\n\\begin{cases}\n\\dfrac{W^{1-\\gamma}}{1-\\gamma},  \\gamma \\neq 1 \\\\\n\\ln(W),  \\gamma = 1\n\\end{cases}\n$$\nFor each choice task $i$, defined by the tuple $(S_i, p_i, x_{h,i}, x_{\\ell,i}, c_i)$, we first compute the utility difference $\\Delta_i(\\gamma)$:\n$$\n\\Delta_i(\\gamma) = \\left[ p_i \\cdot U(x_{h,i}, \\gamma) + (1-p_i) \\cdot U(x_{\\ell,i}, \\gamma) \\right] - U(S_i, \\gamma)\n$$\nThe probability of having chosen the risky lottery is then:\n$$\nP_{\\text{risky},i}(\\gamma) = \\frac{1}{1+\\exp\\left(-\\lambda \\cdot \\Delta_i(\\gamma)\\right)}\n$$\nThe log-likelihood contribution from observation $i$ is:\n$$\n\\ell_i(\\gamma) = c_i \\cdot \\ln\\left(P_{\\text{risky},i}(\\gamma)\\right) + (1-c_i)\\cdot \\ln\\left(1 - P_{\\text{risky},i}(\\gamma)\\right)\n$$\nThe total log-likelihood for a dataset is $L(\\gamma) = \\sum_{i} \\ell_i(\\gamma)$. Our objective is to solve the following optimization problem for each dataset:\n$$\n\\hat{\\gamma} = \\arg\\max_{\\gamma \\in [0.01, 3.0]} L(\\gamma)\n$$\nThis is equivalent to minimizing the negative log-likelihood:\n$$\n\\hat{\\gamma} = \\arg\\min_{\\gamma \\in [0.01, 3.0]} -L(\\gamma)\n$$\nThis is a one-dimensional, bounded optimization problem. It can be solved efficiently using a standard numerical algorithm, such as the one provided by `scipy.optimize.minimize_scalar` with the `bounded` method.\n\nFor numerical stability, the log-likelihood calculation should avoid direct computation of $\\exp(-z)$ for large $z$ and $\\ln(p)$ for $p$ near $0$. Let $z_i = \\lambda \\Delta_i(\\gamma)$. The log-probability of choosing the risky and certain options can be expressed using the log-sigmoid function, which is often implemented in a numerically stable way. Specifically, $\\ln(P_{\\text{risky}}) = \\ln(\\sigma(z)) = -\\ln(1+e^{-z})$ and $\\ln(1-P_{\\text{risky}}) = \\ln(\\sigma(-z)) = -\\ln(1+e^{z})$. This avoids overflow and maintains precision.\n\nThe procedure is as follows:\n$1$. For each dataset, define an objective function that takes $\\gamma$ as input and returns the negative of the total log-likelihood, $-L(\\gamma)$.\n$2$. Use a numerical minimization routine to find the value of $\\gamma$ in the interval $[0.01, 3.0]$ that minimizes this objective function.\n$3$. The resulting value of $\\gamma$ is the Maximum Likelihood Estimate. This process is repeated for Datasets A, B, and C.",
            "answer": "```python\nimport numpy as np\nfrom scipy.optimize import minimize_scalar\n\ndef solve():\n    \"\"\"\n    Solves for the maximum likelihood estimate of the CRRA risk aversion parameter\n    for three given datasets of choices under risk.\n    \"\"\"\n    \n    # Define the utility function as per the problem statement.\n    def utility(W, gamma):\n        \"\"\"\n        Computes the CRRA utility for a given wealth W and risk aversion gamma.\n        Handles the special case where gamma is close to 1.\n        \"\"\"\n        # np.isclose is used for robust floating-point comparison.\n        if np.isclose(gamma, 1.0):\n            # The problem statement ensures W  0.\n            return np.log(W)\n        else:\n            return (W**(1 - gamma)) / (1 - gamma)\n\n    # Define the total log-likelihood function for a dataset.\n    def total_log_likelihood(gamma, dataset, lambda_param):\n        \"\"\"\n        Computes the total log-likelihood for a dataset given a value for gamma\n        and the sensitivity parameter lambda.\n        \"\"\"\n        log_likelihood_sum = 0.0\n\n        for S, p, x_h, x_l, c in dataset:\n            # Calculate expected utility of the lottery.\n            eu_lottery = p * utility(x_h, gamma) + (1 - p) * utility(x_l, gamma)\n            # Calculate utility of the certain amount.\n            u_certain = utility(S, gamma)\n\n            # Calculate the difference in utility.\n            delta_u = eu_lottery - u_certain\n            \n            z = lambda_param * delta_u\n            \n            # Use a numerically stable formulation for log-likelihood of a\n            # logistic model.\n            # log(sigmoid(z)) = -log(1 + exp(-z)) = -logaddexp(0, -z)\n            # log(1-sigmoid(z)) = log(sigmoid(-z)) = -log(1 + exp(z)) = -logaddexp(0, z)\n            # This avoids overflow/underflow issues.\n            log_p_risky = -np.logaddexp(0, -z)\n            log_p_certain = -np.logaddexp(0, z)\n            \n            log_likelihood_i = c * log_p_risky + (1 - c) * log_p_certain\n            \n            log_likelihood_sum += log_likelihood_i\n            \n        return log_likelihood_sum\n\n    # Define global parameters and test cases from the problem statement.\n    lambda_param = 1.0\n    gamma_bounds = (0.01, 3.0)\n\n    test_cases = [\n        # Dataset A\n        [\n          (4.0, 0.5, 10.0, 2.0, 1),\n          (5.0, 0.5, 10.0, 2.0, 0),\n          (8.0, 0.5, 20.0, 4.0, 1),\n          (9.5, 0.5, 20.0, 4.0, 0),\n          (2.0, 0.5, 5.0, 1.0, 1),\n          (2.8, 0.5, 5.0, 1.0, 0)\n        ],\n        # Dataset B\n        [\n          (8.0, 0.5, 16.0, 4.0, 1),\n          (10.0, 0.5, 16.0, 4.0, 0),\n          (4.0, 0.5, 8.0, 2.0, 1),\n          (5.0, 0.5, 8.0, 2.0, 0),\n          (17.0, 0.5, 32.0, 8.0, 1),\n          (19.0, 0.5, 32.0, 8.0, 0)\n        ],\n        # Dataset C\n        [\n          (4.0, 0.5, 12.0, 3.0, 1),\n          (5.2, 0.5, 12.0, 3.0, 0),\n          (9.0, 0.5, 24.0, 6.0, 1),\n          (10.0, 0.5, 24.0, 6.0, 0),\n          (2.2, 0.5, 6.0, 1.5, 1),\n          (2.6, 0.5, 6.0, 1.5, 0)\n        ]\n    ]\n    \n    results = []\n    \n    # Iterate through each dataset to find the optimal gamma.\n    for dataset in test_cases:\n        # The optimizer minimizes a function, so we minimize the negative\n        # log-likelihood to maximize the log-likelihood.\n        objective_function = lambda gamma: -total_log_likelihood(gamma, dataset, lambda_param)\n        \n        # Use scipy.optimize.minimize_scalar for 1D bounded optimization.\n        opt_result = minimize_scalar(\n            objective_function,\n            bounds=gamma_bounds,\n            method='bounded'\n        )\n        \n        estimated_gamma = opt_result.x\n        results.append(f\"{estimated_gamma:.6f}\")\n\n    # Print the final output in the specified format.\n    print(f\"[{','.join(results)}]\")\n\n# Execute the solver function.\nsolve()\n```"
        },
        {
            "introduction": "Why do some people simultaneously buy lottery tickets and insurance, exhibiting both risk-seeking and risk-averse behavior? Standard expected utility theory struggles with this paradox, which is where behavioral models like Cumulative Prospect Theory (CPT) shine. This practice requires you to implement the core components of CPT—loss aversion and probability weighting—to computationally demonstrate how these features can resolve this famous puzzle .",
            "id": "2445905",
            "problem": "Construct a complete program that evaluates choices under Cumulative Prospect Theory (CPT) to determine whether an individual simultaneously buys a lottery ticket and buys insurance. The evaluation must be conducted from first principles of CPT using a reference point of zero. For every test case, you are given parameters for the CPT value function and probability weighting functions, and descriptions of two binary decisions: buying a lottery ticket and buying insurance. Your program must output, for each test case, two integers indicating the strict preference to buy the lottery and to buy insurance, respectively.\n\nUse the following definitions.\n\n1. Value function. For outcome $x$ measured as a change relative to the reference point $0$,\n$$\nv(x) =\n\\begin{cases}\nx^{\\alpha},  \\text{if } x \\ge 0, \\\\\n-\\lambda \\, (-x)^{\\beta},  \\text{if } x  0,\n\\end{cases}\n$$\nwhere $\\alpha \\in (0,1]$, $\\beta \\in (0,1]$, and $\\lambda \\ge 1$.\n\n2. Probability weighting. For any probability $p \\in (0,1)$, define the gain-side weighting function $w^{+}(p)$ and the loss-side weighting function $w^{-}(p)$ as\n$$\nw^{+}(p) = \\frac{p^{\\gamma}}{\\left(p^{\\gamma} + (1-p)^{\\gamma}\\right)^{1/\\gamma}}, \\quad\nw^{-}(p) = \\frac{p^{\\delta}}{\\left(p^{\\delta} + (1-p)^{\\delta}\\right)^{1/\\delta}},\n$$\nwhere $\\gamma \\in (0,1]$ and $\\delta \\in (0,1]$.\n\n3. Decision evaluation under Cumulative Prospect Theory (CPT).\n- Lottery purchase decision: The agent chooses between not buying (sure outcome $0$) and buying a ticket. If the ticket is bought, the outcomes are a gain of $g-c$ with probability $p$ and a loss of $-c$ with probability $1-p$, where $g \\ge 0$ is the prize, $c \\ge 0$ is the ticket cost, and $p \\in (0,1)$. The CPT value of buying is\n$$\nV_{\\text{buy-lottery}} = w^{+}(p)\\, v(g-c) + w^{-}(1-p)\\, v(-c).\n$$\nThe agent strictly prefers buying the lottery if and only if $V_{\\text{buy-lottery}}  0$.\n\n- Insurance purchase decision: The agent chooses between remaining uninsured and buying full insurance. If uninsured, the outcomes are a loss $-L$ with probability $q$ and $0$ with probability $1-q$, where $L \\ge 0$ is the loss and $q \\in (0,1)$ is the loss probability. If insured, the outcome is the sure loss $-\\pi$, where $\\pi \\ge 0$ is the insurance premium. The CPT values are\n$$\nV_{\\text{uninsured}} = w^{-}(q)\\, v(-L), \\quad V_{\\text{insured}} = v(-\\pi).\n$$\nThe agent strictly prefers buying insurance if and only if $V_{\\text{insured}}  V_{\\text{uninsured}}$.\n\nYour program must implement the above definitions exactly. For numerical comparisons of strict inequalities, treat values as strictly greater if the left-hand side minus the right-hand side exceeds $10^{-12}$.\n\nTest Suite. Use the following four test cases, each specified by the tuple of parameters $(\\alpha,\\beta,\\lambda,\\gamma,\\delta,p,g,c,q,L,\\pi)$.\n\n- Case $1$: $(0.88, 0.88, 2.25, 0.61, 0.69, 0.01, 500, 5, 0.01, 500, 6)$.\n- Case $2$: $(1.0, 1.0, 1.0, 1.0, 1.0, 0.01, 500, 5, 0.01, 500, 5)$.\n- Case $3$: $(0.88, 0.88, 1.1, 0.4, 1.0, 0.01, 500, 5, 0.01, 500, 8)$.\n- Case $4$: $(0.6, 0.9, 3.5, 1.0, 0.5, 0.01, 500, 5, 0.01, 500, 6)$.\n\nAnswer Specification and Output Format. For each test case, compute two integers:\n- $b_{\\ell} \\in \\{0,1\\}$ equals $1$ if $V_{\\text{buy-lottery}}  0$, and $0$ otherwise.\n- $b_{i} \\in \\{0,1\\}$ equals $1$ if $V_{\\text{insured}}  V_{\\text{uninsured}}$, and $0$ otherwise.\n\nYour program should produce a single line of output containing the results as a comma-separated list of $8$ integers enclosed in square brackets, in the order $[b_{\\ell}^{(1)}, b_{i}^{(1)}, b_{\\ell}^{(2)}, b_{i}^{(2)}, b_{\\ell}^{(3)}, b_{i}^{(3)}, b_{\\ell}^{(4)}, b_{i}^{(4)}]$, where the superscript denotes the test case index. No additional text or whitespace is permitted in the output line.",
            "solution": "The problem requires the evaluation of decisions under Cumulative Prospect Theory (CPT) for a set of specified parameters. Before providing a solution, the problem statement must be validated for scientific soundness, completeness, and objectivity.\n\n**Step 1: Extract Givens**\n\nThe problem provides the following definitions and data:\n\n1.  **Value Function**: For an outcome $x$ relative to a reference point of $0$, the value function $v(x)$ is defined as:\n    $$\n    v(x) =\n    \\begin{cases}\n    x^{\\alpha},  \\text{if } x \\ge 0 \\\\\n    -\\lambda \\, (-x)^{\\beta},  \\text{if } x  0\n    \\end{cases}\n    $$\n    with parameters $\\alpha \\in (0,1]$, $\\beta \\in (0,1]$, and $\\lambda \\ge 1$.\n\n2.  **Probability Weighting Functions**: For a probability $p \\in (0,1)$, the weighting functions are:\n    $$\n    w^{+}(p) = \\frac{p^{\\gamma}}{\\left(p^{\\gamma} + (1-p)^{\\gamma}\\right)^{1/\\gamma}} \\quad (\\text{for gains})\n    $$\n    $$\n    w^{-}(p) = \\frac{p^{\\delta}}{\\left(p^{\\delta} + (1-p)^{\\delta}\\right)^{1/\\delta}} \\quad (\\text{for losses})\n    $$\n    with parameters $\\gamma \\in (0,1]$ and $\\delta \\in (0,1]$.\n\n3.  **Lottery Purchase Decision**: The choice is between not buying (outcome $0$) and buying a ticket. Buying yields a gain of $g-c$ with probability $p$ and a loss of $-c$ with probability $1-p$. The CPT value of buying is:\n    $$\n    V_{\\text{buy-lottery}} = w^{+}(p)\\, v(g-c) + w^{-}(1-p)\\, v(-c)\n    $$\n    A strict preference to buy exists if and only if $V_{\\text{buy-lottery}}  0$.\n\n4.  **Insurance Purchase Decision**: The choice is between being uninsured (loss of $-L$ with probability $q$, $0$ otherwise) and buying insurance (sure loss of $-\\pi$). The CPT values are:\n    $$\n    V_{\\text{uninsured}} = w^{-}(q)\\, v(-L)\n    $$\n    $$\n    V_{\\text{insured}} = v(-\\pi)\n    $$\n    A strict preference to buy insurance exists if and only if $V_{\\text{insured}}  V_{\\text{uninsured}}$.\n\n5.  **Numerical Tolerance**: A strict inequality $A  B$ is satisfied if $A - B  10^{-12}$.\n\n6.  **Test Cases**: Four cases are provided with parameter tuples $(\\alpha, \\beta, \\lambda, \\gamma, \\delta, p, g, c, q, L, \\pi)$:\n    *   Case $1$: $(0.88, 0.88, 2.25, 0.61, 0.69, 0.01, 500, 5, 0.01, 500, 6)$\n    *   Case $2$: $(1.0, 1.0, 1.0, 1.0, 1.0, 0.01, 500, 5, 0.01, 500, 5)$\n    *   Case $3$: $(0.88, 0.88, 1.1, 0.4, 1.0, 0.01, 500, 5, 0.01, 500, 8)$\n    *   Case $4$: $(0.6, 0.9, 3.5, 1.0, 0.5, 0.01, 500, 5, 0.01, 500, 6)$\n\n**Step 2: Validate Using Extracted Givens**\n\nThe problem is subjected to validation against the specified criteria.\n\n*   **Scientifically Grounded**: The problem is based on Cumulative Prospect Theory, a cornerstone of behavioral economics developed by Tversky and Kahneman. The value function exhibits diminishing sensitivity and loss aversion, and the probability weighting functions capture the overweighting of small probabilities, which are established empirical findings. The application to the lottery-insurance paradox is a classic use case for CPT. The formulas provided are correct applications of CPT for the specified simple prospects. The problem is scientifically sound.\n*   **Well-Posed**: The problem provides all necessary mathematical formulas, parameters for each test case, and unambiguous decision rules. The calculations are deterministic, ensuring a unique solution for each case. The problem is well-posed.\n*   **Objective**: The problem is formulated with precise, mathematical language. It contains no subjective or ambiguous terms.\n\nThe problem statement shows no flaws such as scientific unsoundness, incompleteness, contradiction, or ambiguity. It is a formal, solvable problem within the domain of computational economics.\n\n**Step 3: Verdict and Action**\n\nThe problem is **valid**. A solution will be constructed.\n\n**Principle-Based Design and Solution Algorithm**\n\nThe task\nis to implement the CPT framework as specified and apply it to the four test cases. For each case, we must determine two binary outcomes: the decision to buy a lottery ticket ($b_{\\ell}$) and the decision to buy insurance ($b_{i}$). The solution is a direct implementation of the provided formulae.\n\n**1. Implementation of Core CPT Functions**\n\nFirst, we must implement the three fundamental components of the model.\n\n*   **Value Function $v(x)$**: A function will be created to compute the value of an outcome $x$ given parameters $\\alpha$, $\\beta$, and $\\lambda$.\n    *   If $x \\ge 0$, the function returns $x^{\\alpha}$.\n    *   If $x  0$, the function returns $-\\lambda(-x)^{\\beta}$.\n    \n*   **Gain-Side Weighting Function $w^{+}(p)$**: A function will compute the decision weight for a gain probability $p$ given the parameter $\\gamma$. The formula is $w^{+}(p) = p^{\\gamma} / (p^{\\gamma} + (1-p)^{\\gamma})^{1/\\gamma}$.\n\n*   **Loss-Side Weighting Function $w^{-}(p)$**: A function will compute the decision weight for a loss probability $p$ given the parameter $\\delta$. The formula is $w^{-}(p) = p^{\\delta} / (p^{\\delta} + (1-p)^{\\delta})^{1/\\delta}$.\n\n**2. Evaluation of Lottery Decision**\n\nFor each test case, the decision to buy a lottery ticket is evaluated as follows:\n\n1.  Identify the parameters for the lottery decision: $\\alpha, \\beta, \\lambda, \\gamma, \\delta, p, g, c$.\n2.  Calculate the two possible outcomes relative to the reference point of $0$: a gain of $x_{g} = g-c$ and a loss of $x_{\\ell} = -c$.\n3.  Compute the value of these outcomes using the value function: $v(x_{g})$ and $v(x_{\\ell})$.\n4.  Compute the required decision weights. The gain $g-c$ occurs with probability $p$, so we need $w^{+}(p)$. The loss $-c$ occurs with probability $1-p$, so we need $w^{-}(1-p)$.\n5.  Calculate the CPT value of buying the lottery ticket using the provided formula:\n    $$\n    V_{\\text{buy-lottery}} = w^{+}(p) v(g-c) + w^{-}(1-p) v(-c)\n    $$\n6.  Apply the decision rule. The agent strictly prefers to buy the ticket if $V_{\\text{buy-lottery}}  0$. Using the specified tolerance, this is checked as $V_{\\text{buy-lottery}}  10^{-12}$.\n7.  Set the decision variable $b_{\\ell}$ to $1$ if the condition is met, and to $0$ otherwise.\n\n**3. Evaluation of Insurance Decision**\n\nSimilarly, for each test case, the decision to buy insurance is evaluated:\n\n1.  Identify the parameters for the insurance decision: $\\alpha, \\beta, \\lambda, \\delta, q, L, \\pi$. Note that $\\gamma$ is not used.\n2.  Calculate the CPT value of the \"uninsured\" prospect. This involves a single non-zero outcome, a loss of $-L$ with probability $q$. The value is:\n    $$\n    V_{\\text{uninsured}} = w^{-}(q) v(-L)\n    $$\n    This requires computing $v(-L)$ and the decision weight $w^{-}(q)$.\n3.  Calculate the CPT value of the \"insured\" prospect. This is a certain outcome: a loss of the premium, $-\\pi$. The value is simply:\n    $$\n    V_{\\text{insured}} = v(-\\pi)\n    $$\n4.  Apply the decision rule. The agent strictly prefers to buy insurance if $V_{\\text{insured}}  V_{\\text{uninsured}}$. This is checked as $V_{\\text{insured}} - V_{\\text{uninsured}}  10^{-12}$.\n5.  Set the decision variable $b_{i}$ to $1$ if the condition is met, and to $0$ otherwise.\n\n**4. Program Execution**\n\nA program will be constructed to execute this logic. It will iterate through the four test cases. In each iteration, it will unpack the $11$ parameters, call the functions implementing the logic described above to compute $b_{\\ell}$ and $b_{i}$, and store these two integer results. Finally, the program will format all $8$ computed integers from the four cases into a single comma-separated list enclosed in square brackets, as required.\n\nThis structured procedure ensures that the solution adheres strictly to the first principles of CPT as defined in the problem statement and produces the correct output in the specified format. The use of a numerical library like NumPy is appropriate for handling the exponentiation accurately.",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Evaluates lottery and insurance decisions under Cumulative Prospect Theory (CPT)\n    for a given set of test cases.\n    \"\"\"\n\n    # Define the test cases from the problem statement.\n    # Each case is a tuple: (alpha, beta, lam, gamma, delta, p, g, c, q, L, pi)\n    test_cases = [\n        (0.88, 0.88, 2.25, 0.61, 0.69, 0.01, 500, 5, 0.01, 500, 6),\n        (1.0, 1.0, 1.0, 1.0, 1.0, 0.01, 500, 5, 0.01, 500, 5),\n        (0.88, 0.88, 1.1, 0.4, 1.0, 0.01, 500, 5, 0.01, 500, 8),\n        (0.6, 0.9, 3.5, 1.0, 0.5, 0.01, 500, 5, 0.01, 500, 6),\n    ]\n\n    TOLERANCE = 1e-12\n    results = []\n\n    def value_func(x, alpha, beta, lam):\n        \"\"\"CPT value function v(x).\"\"\"\n        if x = 0:\n            return np.power(x, alpha)\n        else:\n            return -lam * np.power(-x, beta)\n\n    def weight_func_plus(p, gamma):\n        \"\"\"CPT gain-side probability weighting function w+(p).\"\"\"\n        if p == 0.0 or p == 1.0:\n            return p\n        p_gamma = np.power(p, gamma)\n        one_minus_p_gamma = np.power(1.0 - p, gamma)\n        return p_gamma / np.power(p_gamma + one_minus_p_gamma, 1.0 / gamma)\n\n    def weight_func_minus(p, delta):\n        \"\"\"CPT loss-side probability weighting function w-(p).\"\"\"\n        if p == 0.0 or p == 1.0:\n            return p\n        p_delta = np.power(p, delta)\n        one_minus_p_delta = np.power(1.0 - p, delta)\n        return p_delta / np.power(p_delta + one_minus_p_delta, 1.0 / delta)\n    \n    for case in test_cases:\n        alpha, beta, lam, gamma, delta, p, g, c, q, L, pi = case\n\n        # --- Lottery Decision ---\n        gain_outcome = g - c\n        loss_outcome = -c\n        \n        v_gain = value_func(gain_outcome, alpha, beta, lam)\n        v_loss = value_func(loss_outcome, alpha, beta, lam)\n        \n        w_plus_p = weight_func_plus(p, gamma)\n        w_minus_1_minus_p = weight_func_minus(1.0 - p, delta)\n        \n        V_buy_lottery = w_plus_p * v_gain + w_minus_1_minus_p * v_loss\n        \n        b_l = 1 if V_buy_lottery  TOLERANCE else 0\n        \n        # --- Insurance Decision ---\n        V_uninsured = weight_func_minus(q, delta) * value_func(-L, alpha, beta, lam)\n        V_insured = value_func(-pi, alpha, beta, lam)\n        \n        b_i = 1 if (V_insured - V_uninsured)  TOLERANCE else 0\n        \n        results.extend([b_l, b_i])\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```"
        }
    ]
}