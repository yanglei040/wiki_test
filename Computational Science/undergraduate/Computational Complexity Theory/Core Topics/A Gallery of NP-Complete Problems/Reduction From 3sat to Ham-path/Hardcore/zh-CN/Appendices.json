{
    "hands_on_practices": [
        {
            "introduction": "这项实践是理解3SAT到HAM-PATH归约的核心。我们将为一个简单但极具说明性的不可满足公式构建图。通过追踪其中必要的路径，我们将精确地看到图的结构如何使得寻找一条哈密顿路径成为不可能，这恰好反映了公式本身的逻辑矛盾。这个练习  揭示了将布尔逻辑编码为图遍历问题的精妙之处。",
            "id": "1442737",
            "problem": "在计算复杂性理论中，多项式时间归约的概念是问题分类的基础。一个常见的例子是从 3-可满足性 (3SAT) 问题到有向哈密顿路径 (HAM-PATH) 问题的归约。本问题要求您分析对于一个特定的、简单的 3SAT 实例，这种归约的结果。\n\n首先，让我们定义问题和归约过程。\n- **3-可满足性 (3SAT)**：给定一个 3-合取范式 (3-CNF) 的布尔公式，该公式是多个子句的合取 (AND)，其中每个子句是恰好三个文字（一个变量或其否定）的析取 (OR)，是否存在对变量的真值分配，使得整个公式为真？\n- **有向哈密顿路径 (HAM-PATH)**：给定一个有向图 $G=(V, E)$ 和两个指定的顶点 $s, t \\in V$，是否存在一条从 $s$ 到 $t$ 的有向路径，该路径恰好访问 $V$ 中的每个顶点一次？\n\n从一个 3SAT 公式 $\\phi$ 到一个有向图 $G$ 的归约如下：\n设 $\\phi$ 有 $n$ 个变量 $x_1, \\dots, x_n$ 和 $m$ 个子句 $c_1, \\dots, c_m$。\n\n1.  **全局结构**：创建一个特殊起始顶点 $s$ 和一个特殊结束顶点 $t$。\n2.  **变量构件**：对于每个变量 $x_i$（从 $i=1$ 到 $n$），创建一个菱形构件。该构件有一个入口顶点 $v_{i, \\text{in}}$ 和一个出口顶点 $v_{i, \\text{out}}$。在这两个顶点之间，创建两条并行的、由节点构成的有向路径：\n    - “真”路径，代表 $x_i = \\text{true}$，由 $2m$ 个中间顶点 $p_{i,1}^T, \\dots, p_{i,2m}^T$ 组成。添加边以形成路径：$(v_{i, \\text{in}}, p_{i,1}^T)$，然后是 $(p_{i,j}^T, p_{i,j+1}^T)$ 对于 $j=1, \\dots, 2m-1$，最后是 $(p_{i,2m}^T, v_{i, \\text{out}})$。\n    - “假”路径，代表 $x_i = \\text{false}$，是类似的，有 $2m$ 个顶点 $p_{i,1}^F, \\dots, p_{i,2m}^F$ 和相应的边。\n3.  **子句构件**：对于每个子句 $c_j$（从 $j=1$ 到 $m$），创建一个单一顶点 $C_j$。\n4.  **连接构件**：\n    - 串联变量构件：添加一条从 $s$ 到 $v_{1, \\text{in}}$ 的边。对于 $i=1, \\dots, n-1$，添加一条边 $(v_{i, \\text{out}}, v_{i+1, \\text{in}})$。最后，添加一条边 $(v_{n, \\text{out}}, t)$。\n    - 对于每个子句 $c_j$，将其连接到变量构件。如果文字 $x_i$ 出现在子句 $c_j$ 中，则添加有向边 $(p_{i,2j-1}^T, C_j)$ 和 $(C_j, p_{i,2j}^T)$。如果文字 $\\neg x_i$ 出现在子句 $c_j$ 中，则添加有向边 $(p_{i,2j-1}^F, C_j)$ 和 $(C_j, p_{i,2j}^F)$。请注意，即使一个文字在子句中多次出现，相应的边对也只添加一次。\n\n现在，考虑以下 3SAT 公式 $\\phi$：\n$$ \\phi = (x_1 \\lor x_1 \\lor x_1) \\land (\\neg x_1 \\lor \\neg x_1 \\lor \\neg x_1) $$\n设第一个子句为 $c_1 = (x_1 \\lor x_1 \\lor x_1)$，第二个子句为 $c_2 = (\\neg x_1 \\lor \\neg x_1 \\lor \\neg x_1)$。\n\n将上述归约方法应用于此公式 $\\phi$ 以构造一个有向图 $G$。关于生成的图 $G$，以下哪个陈述是正确的？\n\nA. 生成的图 $G$ 包含一条从 $s$ 到 $t$ 的哈密顿路径。\nB. 生成的图 $G$ 不包含从 $s$ 到 $t$ 的哈密顿路径，因为任何包含子句 $c_1$ 对应顶点的路径，无法同时包含子句 $c_2$ 对应的顶点。\nC. 对于该公式，此构造失败，并生成一个图中某些顶点与 $s$ 和 $t$ 之间的路径完全断开。\nD. 由于存在重复的文字，所提供的公式不是一个有效的 3-CNF 公式，因此该构造无法应用。\nE. 生成的图 $G$ 包含一条从 $s$ 到 $t$ 的哈密顿路径，但该路径不对应于变量 $x_1$ 的一个有效真值分配。",
            "solution": "问题要求我们分析使用标准归约方法从一个特定的 3SAT 公式 $\\phi$ 构造出的有向图 $G$，并判断它是否存在哈密顿路径。\n\n给定的 3SAT 公式是 $\\phi = (x_1 \\lor x_1 \\lor x_1) \\land (\\neg x_1 \\lor \\neg x_1 \\lor \\neg x_1)$。\n这个公式有 $n=1$ 个变量，$x_1$，和 $m=2$ 个子句，$c_1 = (x_1 \\lor x_1 \\lor x_1)$ 和 $c_2 = (\\neg x_1 \\lor \\neg x_1 \\lor \\neg x_1)$。\n\n让我们根据提供的规则来构造图 $G$。\n\n1.  **顶点**：\n    - 全局顶点：$s, t$。\n    - 子句顶点：$C_1, C_2$。\n    - 变量 $x_1$ 的构件（因为 $n=1, m=2$）：\n        - 入口/出口点：$v_{1, \\text{in}}, v_{1, \\text{out}}$。\n        - “真”路径顶点（$2m = 4$ 个）：$p_{1,1}^T, p_{1,2}^T, p_{1,3}^T, p_{1,4}^T$。\n        - “假”路径顶点（$2m = 4$ 个）：$p_{1,1}^F, p_{1,2}^F, p_{1,3}^F, p_{1,4}^F$。\n    图中顶点的总数是 $2 (\\text{全局}) + 2 (\\text{子句}) + 2 (\\text{入口/出口}) + 4 (\\text{真路径}) + 4 (\\text{假路径}) = 14$ 个顶点。一条哈密顿路径必须恰好访问这 14 个顶点中的每一个一次。\n\n2.  **边**：\n    - **骨干边**：由于 $n=1$，变量构件直接连接到 $s$ 和 $t$。边是 $(s, v_{1, \\text{in}})$ 和 $(v_{1, \\text{out}}, t)$。\n    - **变量 $x_1$ 的构件边**：\n        - 真路径：$(v_{1, \\text{in}}, p_{1,1}^T)$, $(p_{1,1}^T, p_{1,2}^T)$, $(p_{1,2}^T, p_{1,3}^T)$, $(p_{1,3}^T, p_{1,4}^T)$, $(p_{1,4}^T, v_{1, \\text{out}})$。\n        - 假路径：$(v_{1, \\text{in}}, p_{1,1}^F)$, $(p_{1,1}^F, p_{1,2}^F)$, $(p_{1,2}^F, p_{1,3}^F)$, $(p_{1,3}^F, p_{1,4}^F)$, $(p_{1,4}^F, v_{1, \\text{out}})$。\n    - **子句连接边**：\n        - 子句 $c_1 = (x_1 \\lor x_1 \\lor x_1)$。这个子句包含文字 $x_1$。该子句的索引是 $j=1$。根据规则，我们在位置 $2j-1=1$ 和 $2j=2$ 处添加连接到变量 $x_1$ 的“真”路径的边。这些边是 $(p_{1,1}^T, C_1)$ 和 $(C_1, p_{1,2}^T)$。\n        - 子句 $c_2 = (\\neg x_1 \\lor \\neg x_1 \\lor \\neg x_1)$。这个子句包含文字 $\\neg x_1$。该子句的索引是 $j=2$。我们在位置 $2j-1=3$ 和 $2j=4$ 处添加连接到变量 $x_1$ 的“假”路径的边。这些边是 $(p_{1,3}^F, C_2)$ 和 $(C_2, p_{1,4}^F)$。\n\n3.  **哈密顿路径分析**：\n    一条哈密顿路径必须从 $s$ 开始，到 $t$ 结束，并恰好访问每个其他顶点一次。\n    路径必须以边 $(s, v_{1, \\text{in}})$ 开始。在 $v_{1, \\text{in}}$ 处，路径有一个选择：要么通过 $p_{1,1}^T$ 进入“真”路径，要么通过 $p_{1,1}^F$ 进入“假”路径。单条路径不能同时遍历两者，因为它们是平行的，并且没有连接它们的边。这个选择对应于设定变量 $x_1$ 的真值。\n\n    **情况 1：路径选择“真”路径（模拟 $x_1=\\text{true}$）**。\n    路径必须遍历“真”路径的所有顶点：$p_{1,1}^T, p_{1,2}^T, p_{1,3}^T, p_{1,4}^T$。为此，路径的一部分必须看起来像 $v_{1, \\text{in}} \\to \\dots \\to v_{1, \\text{out}}$。为了访问图中的所有节点，这条路径还必须以某种方式访问 $C_1, C_2$ 以及所有“假”路径节点 $p_{1,j}^F$。\n    - **访问 $C_1$**：可以通过从“真”路径绕行来访问顶点 $C_1$：$... \\to p_{1,1}^T \\to C_1 \\to p_{1,2}^T \\to ...$。这是在保持在整体“真”路径轨迹上的同时访问 $C_1$ 的一种有效方式。\n    - **访问 $C_2$**：要访问顶点 $C_2$，路径必须使用通向它或来自它的边之一。唯一的这类边是 $(p_{1,3}^F, C_2)$ 和 $(C_2, p_{1,4}^F)$。这意味着路径必须遍历子路径 $p_{1,3}^F \\to C_2 \\to p_{1,4}^F$。这要求路径位于“假”路径上。\n    - **矛盾**：如果我们的路径选择了“真”路径，它就不能访问任何 $p_{1,j}^F$ 顶点。因此，它不能使用访问 $C_2$ 所需的边。所以，如果我们为 $x_1$ 选择“真”路径，我们可以访问 $C_1$ 但不能访问 $C_2$。该路径将错过 $C_2$ 和所有 $p_{1,j}^F$ 节点，因此它不是哈密顿路径。\n\n    **情况 2：路径选择“假”路径（模拟 $x_1=\\text{false}$）**。\n    路径必须遍历“假”路径的所有顶点：$p_{1,1}^F, p_{1,2}^F, p_{1,3}^F, p_{1,4}^F$。\n    - **访问 $C_2$**：可以通过绕行 $... \\to p_{1,3}^F \\to C_2 \\to p_{1,4}^F \\to ...$ 来访问顶点 $C_2$。这是一种访问 $C_2$ 的有效方式。\n    - **访问 $C_1$**：要访问顶点 $C_1$，路径必须遍历子路径 $p_{1,1}^T \\to C_1 \\to p_{1,2}^T$。这要求路径位于“真”路径上。\n    - **矛盾**：如果我们的路径选择了“假”路径，它就不能访问任何 $p_{1,j}^T$ 顶点。因此，它不能使用访问 $C_1$ 所需的边。所以，如果我们为 $x_1$ 选择“假”路径，我们可以访问 $C_2$ 但不能访问 $C_1$。该路径将错过 $C_1$ 和所有 $p_{1,j}^T$ 节点，因此它不是哈密顿路径。\n\n    **结论**：由于通过变量构件的任何路径选择都不能访问所有顶点，因此不存在从 $s$ 到 $t$ 的哈密顿路径。这反映了公式 $\\phi$ 是不可满足的（它要求 $x_1$ 同时为真和为假）。\n\n4.  **评估选项**：\n    - A. 生成的图 $G$ 包含一条从 $s$ 到 $t$ 的哈密顿路径。（错误）\n    - B. 生成的图 $G$ 不包含从 $s$ 到 $t$ 的哈密顿路径，因为任何包含子句 $c_1$ 对应顶点的路径，无法同时包含子句 $c_2$ 对应的顶点。（正确。如上所示，访问 $C_1$ 需要使用“真”路径，而访问 $C_2$ 需要使用“假”路径。单条路径无法同时做到这两点。）\n    - C. 对于该公式，此构造失败...并生成一个图中某些顶点与 $s$ 和 $t$ 之间的路径完全断开...（错误。图是完全连接的；例如，从任何节点都可以找到一条到 $t$ 的路径。）\n    - D. 由于存在重复的文字，所提供的公式不是一个有效的 3-CNF 公式...（错误。3-CNF 允许在子句内重复文字。其定义是子句的合取，其中每个子句是三个文字的析取。）\n    - E. 生成的图 $G$ 包含一条从 $s$ 到 $t$ 的哈密顿路径...，但该路径不对应于变量 $x_1$ 的一个有效真值分配...（错误。根本不存在哈密顿路径。）\n\n因此，正确的陈述是 B。",
            "answer": "$$\\boxed{B}$$"
        },
        {
            "introduction": "多项式时间归约的一个关键要求是，输出实例的大小必须是输入实例大小的多项式函数。这个练习  将我们的视角从正向构建图，转变为分析一个已知的归约结果。通过理解控制图中顶点数量的构造规则，我们可以反向推导出原始3SAT公式的参数，从而巩固我们对归约结构特性的量化理解。",
            "id": "1442708",
            "problem": "一名计算复杂性理论课程的学生得到了一个有向图 $G=(V, E)$。他被告知这个图是将一个3-可满足性 (3SAT) 公式 $\\phi$ 进行标准多项式时间归约到有向哈密顿路径问题后得到的结果。已知原始的布尔公式 $\\phi$ 有 $n$ 个变量和 $m$ 个子句。\n\n从公式 $\\phi$ 构造图 $G$ 的规则如下：\n\n1.  顶点集 $V$ 被划分为三个不相交的子集：用于“变量配件”的顶点集 $V_X$；用于“子句配件”的顶点集 $V_C$；以及一个包含两个特殊顶点 $\\{s, t\\}$ 的集合，其中 $s$ 是哈密顿路径的指定起始顶点，$t$ 是终止顶点。\n2.  集合 $V_X$ 是通过为 $\\phi$ 中的 $n$ 个变量中的每一个创建一个不同的子图或“配件”来构造的。这 $n$ 个变量配件中的每一个在结构上都是相同的，并包含特定数量的顶点，该数量取决于子句的数量 $m$。确切地说，每个变量配件都由恰好 $2m+2$ 个顶点组成。\n3.  集合 $V_C$ 是通过为 $\\phi$ 中的 $m$ 个子句中的每一个创建恰好一个顶点来构造的。\n4.  整个图 $G$ 中的顶点总数为 526。原始公式 $\\phi$ 中的变量数量为 $n=10$。\n\n根据提供的关于归约和结果图的信息，确定原始 3SAT 公式 $\\phi$ 中的子句数量 $m$。",
            "solution": "我们被告知顶点集被划分为 $V = V_{X} \\cup V_{C} \\cup \\{s,t\\}$，其中 $V_{X}$ 由 $n$ 个相同的变量配件组成，每个配件恰好有 $2m+2$ 个顶点，而 $V_{C}$ 恰好有 $m$ 个子句顶点。两个特殊顶点是 $s$ 和 $t$。因此，顶点总数满足\n$$\n|V| = |V_{X}| + |V_{C}| + 2 = n(2m+2) + m + 2.\n$$\n将 $|V| = 526$ 和 $n = 10$ 代入，我们得到\n$$\n526 = 10(2m+2) + m + 2.\n$$\n展开并合并同类项可得\n$$\n526 = 20m + 20 + m + 2 = 21m + 22.\n$$\n解出 $m$ 可得\n$$\n21m = 526 - 22 = 504 \\quad \\Rightarrow \\quad m = \\frac{504}{21} = 24.\n$$\n因此，原始公式中的子句数量为 $m=24$。",
            "answer": "$$\\boxed{24}$$"
        },
        {
            "introduction": "如果我们将归约应用于一个平凡的边界情况会发生什么？这个思想实验  探讨了一个拥有变量但没有任何约束（即零个子句）的公式。分析这种情况有助于我们将归约的“骨架”——即变量部件及其主干连接——与施加逻辑约束的子句部件分离开来，从而验证该构造即使在最简单的情况下也符合逻辑预期。",
            "id": "1442781",
            "problem": "在计算复杂性理论中，3-可满足性问题 (3SAT) 可以归约到有向哈密顿路径问题 (HAM-PATH)。考虑以下标准的​​多项式时间归约算法，该算法从一个包含 $n$ 个变量（$x_1, \\dots, x_n$）和 $m$ 个子句（$C_1, \\dots, C_m$）的 3SAT 公式 $\\phi$ 构造一个有向图 $G=(V, E)$。\n\n构造过程如下：\n1.  创建两个特殊顶点，一个起始顶点 $s$ 和一个终止顶点 $t$。\n2.  对每个变量 $x_i$（其中 $1 \\le i \\le n$），创建一个由 $2m+2$ 个顶点组成的路径构成的“变量构件”：$v_{i,0}, v_{i,1}, \\dots, v_{i,2m+1}$。对所有的 $j=0, \\dots, 2m$，添加有向边 $(v_{i,j}, v_{i,j+1})$。\n3.  通过添加“主干”有向边来顺序连接这些构件：一条从 $s$ 到 $v_{1,0}$ 的边，一条从 $v_{n,2m+1}$ 到 $t$ 的边，以及对所有的 $i=1, \\dots, n-1$，从 $v_{i,2m+1}$ 到 $v_{i+1,0}$ 的边。\n4.  对每个子句 $C_j$（其中 $1 \\le j \\le m$），创建一个单独的“子句顶点” $c_j$。\n5.  对每个子句 $C_j$，添加边将其特定的子句顶点连接到相应的变量构件。具体来说，如果文字 $x_i$ 出现在子句 $C_j$ 中，则添加有向边 $(v_{i,2j-1}, c_j)$ 和 $(c_j, v_{i,2j})$。如果文字 $\\neg x_i$ 出现在子句 $C_j$ 中，则添加有向边 $(v_{i,2j}, c_j)$ 和 $(c_j, v_{i,2j-1})$。\n\n现在，考虑一个特殊情况，一个 3SAT 公式 $\\phi$ 有 $n \\ge 1$ 个变量，但有 $m=0$ 个子句。根据上述构造算法，下列哪个陈述正确描述了生成的图 $G$ 以及从 $s$ 到 $t$ 的有向哈密顿路径的存在性？\n\nA. 图 $G$ 是一条包含所有 $2n+2$ 个顶点的单一有向路径。因此，从 $s$ 到 $t$ 的有向哈密顿路径总是存在。\nB. 图 $G$ 是一条单一有向路径，但其端点不是 $s$ 和 $t$。因此，从 $s$ 到 $t$ 的有向哈密顿路径不存在。\nC. 图 $G$ 由 $n$ 条不连通的有向边和两个孤立顶点 $s$ 和 $t$ 组成。因此，从 $s$ 到 $t$ 的有向哈密顿路径不存在。\nD. 图 $G$ 是一个包含所有 $2n+2$ 个顶点的有向环。因此，从 $s$ 到 $t$ 的有向哈密顿路径存在。\nE. 图 $G$ 是空图，包含 $2n+2$ 个顶点但没有边。因此，从 $s$ 到 $t$ 的有向哈密顿路径不存在。",
            "solution": "我们分析当 3SAT 实例有 $n \\ge 1$ 个变量和 $m=0$ 个子句时的归约情况。\n\n根据步骤1，创建了顶点 $s$ 和 $t$。\n\n根据步骤2，对每个变量 $x_{i}$，创建一个包含 $2m+2$ 个顶点的变量构件：当 $m=0$ 时，这恰好产生 $2$ 个顶点，即 $v_{i,0}$ 和 $v_{i,1}$。构件内部的有向边是为 $j=0,\\dots,2m$ 添加的；当 $m=0$ 时，唯一的边是 $(v_{i,0}, v_{i,1})$。因此，每个构件都是一条单一的有向边 $v_{i,0} \\to v_{i,1}$。\n\n根据步骤3，主干添加了边 $(s, v_{1,0})$，对所有 $i=1,\\dots,n-1$ 添加了边 $(v_{i,1}, v_{i+1,0})$，以及边 $(v_{n,1}, t)$。因此，所有的边\n$$\ns \\to v_{1,0} \\to v_{1,1} \\to v_{2,0} \\to v_{2,1} \\to \\cdots \\to v_{n,0} \\to v_{n,1} \\to t\n$$\n都存在。\n\n根据步骤4，由于 $m=0$，没有创建子句顶点 $c_{j}$。根据步骤5，没有添加子句边。\n\n因此，整个图恰好是一条有向路径，其顶点顺序为 $s, v_{1,0}, v_{1,1}, v_{2,0}, v_{2,1}, \\dots, v_{n,0}, v_{n,1}, t$。顶点总数是来自变量构件的 $2n$ 个，加上 $s$ 和 $t$ 这 $2$ 个，即 $2n+2$ 个。每个顶点在这条路径上恰好出现一次；$s$ 的入度为 $0$，出度为 $1$，$t$ 的入度为 $1$，出度为 $0$，其他每个顶点的入度和出度都为 $1$。因此，存在一条从 $s$ 到 $t$ 的有向哈密顿路径，且该图是覆盖所有 $2n+2$ 个顶点的单一有向路径。\n\n这与陈述 A 相符，并与所有其他选项矛盾：它不是一个环（所以不是 D），不是不连通的（所以不是 C 或 E），并且其端点确实是 $s$ 和 $t$（所以不是 B）。",
            "answer": "$$\\boxed{A}$$"
        }
    ]
}