{
    "hands_on_practices": [
        {
            "introduction": "理论知识需要通过实践来巩固。在计算科学和逻辑设计中，一项核心技能是构建满足精确规格的系统。本练习将让你扮演逻辑设计师的角色，你的任务是构建一个具有特定结构（3-合取范式）且仅有一个唯一解的布尔公式。通过这个练习，你将锻炼逻辑推理和基于约束的问题解决能力，这对于自动验证、数据库查询优化和电路设计等领域至关重要。",
            "id": "1413986",
            "problem": "一位计算机科学家正在设计一个逻辑电路，其行为由一个基于四个变量 $x_1, x_2, x_3, x_4$ 的 3-合取范式 (3-CNF) 布尔公式建模。一个公式是 3-CNF 形式的，如果它是一些子句的合取 (AND)，其中每个子句是恰好三个文字（一个变量或其否定）的析取 (OR)。最终公式记为 $\\Phi$，它必须有且仅有一个可满足的真值指派。\n\n公式 $\\Phi$ 是通过合取两个子公式来构造的：$\\Phi = \\Phi_{equiv} \\land \\Psi$。\n\n第一个子公式 $\\Phi_{equiv}$ 被设计用来在变量的一个子集上建立逻辑等价关系。具体来说，它强制 $x_1 \\leftrightarrow x_2$ 和 $x_2 \\leftrightarrow x_3$。这是通过将等价关系的 2-CNF 表示转换为 3-CNF 来实现的。将一个 2-文字子句 $(l_1 \\lor l_2)$ 转换为一组 3-文字子句的方法是，使用一个辅助变量 $x_k$ 将其替换为子句对 $(l_1 \\lor l_2 \\lor x_k) \\land (l_1 \\lor l_2 \\lor \\neg x_k)$。\n在这个具体的构造中：\n- 为了强制 $x_1 \\leftrightarrow x_2$，这等价于 $(\\neg x_1 \\lor x_2) \\land (x_1 \\lor \\neg x_2)$，变量 $x_4$ 被用作两个 2-文字子句的辅助变量。\n- 为了强制 $x_2 \\leftrightarrow x_3$，这等价于 $(\\neg x_2 \\lor x_3) \\land (x_2 \\lor \\neg x_3)$，变量 $x_1$ 被用作两个 2-文字子句的辅助变量。\n\n第二个子公式 $\\Psi$ 由一组也必须被满足的额外的 3-CNF 子句组成。\n\n结合两部分后，已知完整公式 $\\Phi$ 仅能被对这四个变量的一个真值指派所满足，即 $(x_1, x_2, x_3, x_4) = (\\text{假}, \\text{假}, \\text{假}, \\text{真})$。\n\n在此设计下，子公式 $\\Psi$ 必须包含的子句的最小数量是多少？",
            "solution": "根据构造，每个 2-文字子句通过恒等式\n$$(A \\lor z) \\land (A \\lor \\neg z) \\equiv A$$\n被一个辅助变量转换为两个 3-文字子句。\n这可由分配律得出：$(A \\lor z) \\land (A \\lor \\neg z) \\equiv A \\lor (z \\land \\neg z) \\equiv A \\lor \\bot \\equiv A$。因此，$\\Phi_{equiv}$ 逻辑上等价于 2-CNF\n$$(\\neg x_1 \\lor x_2) \\land (x_1 \\lor \\neg x_2) \\land (\\neg x_2 \\lor x_3) \\land (x_2 \\lor \\neg x_3),$$\n它强制了 $x_1 \\leftrightarrow x_2$ 和 $x_2 \\leftrightarrow x_3$，即 $x_1=x_2=x_3$。变量 $x_4$ 不受 $\\Phi_{equiv}$ 的约束。因此 $\\Phi_{equiv}$ 的可满足指派恰好是\n$$(0,0,0,0),\\quad (0,0,0,1),\\quad (1,1,1,0),\\quad (1,1,1,1),$$\n这里我们用 0 表示假，1 表示真。$\\Phi=\\Phi_{equiv}\\land\\Psi$ 的目标唯一模型是 $(0,0,0,1)$，所以 $\\Psi$ 必须排除其他三个指派，同时在 $(0,0,0,1)$ 上保持为真。\n\n一个 3-文字子句 $C=(\\ell_{1}\\lor \\ell_{2}\\lor \\ell_{3})$ 在一个指派上为假，当且仅当所有三个文字都为假。考虑一个子句是否能排除所有三个不需要的指派：\n- 没有子句可以同时在 $(0,0,0,0)$ 和 $(1,1,1,1)$ 上为假，因为对于每个变量 $x_{i}$，在 $(0,0,0,0)$ 处 $x_{i}$ 或 $\\neg x_{i}$ 中恰好有一个为假，而在 $(1,1,1,1)$ 处另一个为假，所以没有在两个指派中都为假的文字。\n- 对于变量 $x_1,x_2,x_3$，出于同样的原因，没有子句可以同时在 $(0,0,0,0)$ 和 $(1,1,1,0)$ 上为假；唯一共同的假文字是 $x_4$，而这是不够的，因为一个 3-子句需要三个文字都为假。\n- 一个子句可以通过选择文字 $\\neg x_1, \\neg x_2, \\neg x_3$ 来同时在 $(1,1,1,0)$ 和 $(1,1,1,1)$ 上为假，因为当 $x_1=x_2=x_3=1$ 时，不论 $x_4$ 为何，这些文字都为假。\n\n因此，任何单个 3-文字子句至多能排除三个不需要的指派中的两个，所以 $|\\Psi|\\geq 2$。\n\n剩下需要证明两个子句就足够了。取\n$$C_1=(\\neg x_1\\lor \\neg x_2\\lor \\neg x_3),\\qquad C_2=(x_4\\lor x_1\\lor x_2).$$\n那么：\n- 在 $(0,0,0,1)$ 处，$C_1$ 为真（因为 $\\neg x_1$ 为真），$C_2$ 也为真（因为 $x_4$ 为真）。\n- 在 $(0,0,0,0)$ 处，$C_1$ 为真，但 $C_2$ 为假（所有三个文字都为假），所以该指派被排除。\n- 在 $(1,1,1,0)$ 和 $(1,1,1,1)$ 处，$C_1$ 为假（所有三个文字都为假），所以这两个指派都被排除。\n\n因此 $\\Psi=\\{C_1,C_2\\}$ 恰好排除了三个非目标指派，同时保留了目标指派，与 $\\Phi_{equiv}$ 一起产生了一个唯一的满足指派。因此 $\\Psi$ 中子句的最小数量是 $2$。",
            "answer": "$$\\boxed{2}$$"
        },
        {
            "introduction": "除了构建单个公式，理解整类公式的共性是通往更深层次理论的关键。本练习聚焦于一种在现实世界中广泛应用的特殊逻辑约束——霍恩子句（Horn clauses）。通过分析一个假设系统中两个稳定配置之间的关系，你将揭示霍恩公式解集的一个深刻结构特性，正是这个特性使其相关的可满足性问题能够被高效解决。",
            "id": "1413994",
            "problem": "一个分布式计算系统由五个服务组成，由布尔变量 $v_1, v_2, v_3, v_4, v_5$ 表示。如果对应的服务是活动的，变量 $v_i$ 为真，否则为假。一个系统配置是对这五个变量的一组真值赋值。为了使系统稳定，一个配置必须满足一组规则，这些规则表示为一个合取范式（CNF）的单个布尔公式，该公式是子句的逻辑与，其中每个子句是变量或其否定的逻辑或。规则如下：\n1.  服务 $v_1$ 必须是活动的。\n2.  如果服务 $v_1$ 和 $v_2$ 都处于活动状态，那么服务 $v_3$ 也必须处于活动状态。\n3.  如果服务 $v_1$ 和 $v_4$ 都处于活动状态，那么服务 $v_5$ 也必须处于活动状态。\n\n设一个系统配置由一个真值向量 $(v_1, v_2, v_3, v_4, v_5)$ 表示，其中1代表真，0代表假。假设给定两个不同的稳定配置，配置A = $(1, 1, 1, 0, 0)$ 和配置B = $(1, 0, 0, 1, 1)$。我们通过对A和B进行逐分量逻辑与运算来定义一个新的配置C。也就是说，如果A = $(a_1, a_2, a_3, a_4, a_5)$ 且 B = $(b_1, b_2, b_3, b_4, b_5)$，那么 C = $(a_1 \\land b_1, a_2 \\land b_2, a_3 \\land b_3, a_4 \\land b_4, a_5 \\land b_5)$。\n\n以下关于配置C的陈述中，哪一项是正确的？\n\nA. 配置C与配置A相同。\n\nB. 配置C与配置B相同。\n\nC. 配置C是一个稳定的配置，但它与A和B都不同。\n\nD. 配置C不是一个稳定的配置。\n\nE. 没有足够的信息来确定配置C是否稳定。",
            "solution": "给定布尔变量 $v_{1},v_{2},v_{3},v_{4},v_{5}$ 以及与规则对应的表示为CNF子句的约束：\n1. 服务 $v_{1}$ 必须是活动的，即单位子句 $v_{1}$。\n2. 如果 $v_{1}$ 和 $v_{2}$ 都处于活动状态，那么 $v_{3}$ 必须是活动的，逻辑上表示为 $(v_{1} \\land v_{2}) \\Rightarrow v_{3}$，等价于 $\\neg(v_{1} \\land v_{2}) \\lor v_{3}$，即 $\\neg v_{1} \\lor \\neg v_{2} \\lor v_{3}$。\n3. 如果 $v_{1}$ 和 $v_{4}$ 都处于活动状态，那么 $v_{5}$ 必须是活动的，逻辑上表示为 $(v_{1} \\land v_{4}) \\Rightarrow v_{5}$，等价于 $\\neg v_{1} \\lor \\neg v_{4} \\lor v_{5}$。\n\n给定的稳定配置是 $A=(1,1,1,0,0)$ 和 $B=(1,0,0,1,1)$。通过 $c_{i}=a_{i} \\land b_{i}$（对于 $i \\in \\{1,2,3,4,5\\}$）逐分量定义 $C$。计算每个分量：\n- $c_{1}=1 \\land 1=1$,\n- $c_{2}=1 \\land 0=0$,\n- $c_{3}=1 \\land 0=0$,\n- $c_{4}=0 \\land 1=0$,\n- $c_{5}=0 \\land 1=0$。\n因此 $C=(1,0,0,0,0)$。\n\n检查 $C$ 是否等于 $A$ 或 $B$：\n- $C \\neq A$ 因为 $c_{2}=0 \\neq a_{2}=1$。\n- $C \\neq B$ 因为 $c_{4}=0 \\neq b_{4}=1$。\n因此，$C$ 与 $A$ 和 $B$ 都不同。\n\n验证 $C$ 是否满足所有CNF子句：\n- 子句 $v_{1}$ 的值为 $1$，因为在 $C$ 中 $v_{1}=1$。\n- 子句 $\\neg v_{1} \\lor \\neg v_{2} \\lor v_{3}$ 的值为 $\\neg 1 \\lor \\neg 0 \\lor 0 = 0 \\lor 1 \\lor 0 = 1$。\n- 子句 $\\neg v_{1} \\lor \\neg v_{4} \\lor v_{5}$ 的值为 $\\neg 1 \\lor \\neg 0 \\lor 0 = 0 \\lor 1 \\lor 0 = 1$。\n所有子句都为真，所以 $C$ 是一个稳定的配置。\n\n由于 $C$ 是稳定的且与 $A$ 和 $B$ 都不同，所以正确的选项是C。",
            "answer": "$$\\boxed{C}$$"
        },
        {
            "introduction": "现在，让我们将视角从公式的静态结构转向评估其值的动态过程。这个问题引入了“查询复杂度”的概念，它衡量了确定一个函数输出所需的最小信息量。在这个场景中，你需要为一个传感器网络设计最高效的诊断算法。为了证明你的算法在最坏情况下的最优性，你将学习使用“对抗论证”（adversary argument），这是计算复杂性理论中用于确立难度下界的一种经典而强大的思维工具。",
            "id": "1413978",
            "problem": "一个先进制造过程的故障安全机制依赖于5个独立的传感器，分别标记为 $X_1, X_2, X_3, X_4, X_5$。每个传感器输出一个二进制值：$0$ 代表“正常”状态，$1$ 代表“警报”状态。该系统被设计为，当且仅当五个传感器中至少有两个输出警报状态时，触发全面停机（由最终输出 $1$ 表示）。否则，系统保持运行（由最终输出 $0$ 表示）。\n\n您的任务是创建一个高效的诊断算法，以确定系统的最终状态。查询一个传感器以读取其值具有显著的成本。您的目标是通过查询尽可能少的传感器来确定系统的最终状态。\n\n在最坏的情况下，为了确定系统的最终状态，必须查询的传感器的绝对最小数量是多少？",
            "solution": "令 $X_{1},\\dots,X_{5}\\in\\{0,1\\}$ 为传感器输出，并令 $S=\\sum_{i=1}^{5}X_{i}$。系统的最终输出为 $1$ 当且仅当 $S\\ge 2$，否则为 $0$。\n\n当顺序查询时，在进行若干次查询后，令 $k$ 为观测到的 $1$ 的数量，$z$ 为观测到的 $0$ 的数量，而 $r=5-(k+z)$ 为未查询的传感器的数量。最终状态由以下停止条件确定：\n- 如果 $k\\ge 2$，那么 $S\\ge 2$，最终输出为 $1$。\n- 如果 $k\\le 1$ 并且即使所有剩余的 $r$ 个传感器都为 $1$ 时总数仍然小于 $2$，那么最终输出为 $0$。这个条件是 $k+r\\le 1$。具体来说，对于 $k=0$ 的情况，该条件为 $r\\le 1$（等价于 $z\\ge 4$）；对于 $k=1$ 的情况，该条件为 $r=0$。\n\n下界（对手论证）：考虑任何最多进行 $4$ 次查询的策略。一个对手可以这样回答这 $4$ 次查询，使得其中恰好一个是 $1$ 而三个是 $0$，即，在四次查询后，$k=1$，$z=3$，$r=1$。在这种情况下，两个停止条件都未满足：$k  2$ 且 $k+r=2$，因此结果取决于最后一个未查询的位。确实，存在两种与观测到的答案一致的补全方式：\n- 如果最后一个未查询的传感器是 $0$，那么 $S=1$，最终输出为 $0$。\n- 如果最后一个未查询的传感器是 $1$，那么 $S=2$，最终输出为 $1$。\n因此，在这种最坏情况下，没有算法能够在仅四次查询后确定最终状态。所以，在最坏情况下，至少需要 $5$ 次查询。\n\n上界（构造性策略）：逐个查询传感器，一旦看到两个 $1$（宣布输出为 $1$）或看到四个 $0$（宣布输出为 $0$）就停止。在最坏情况下，四次查询后恰好得到一个 $1$ 和三个 $0$，这不会触发任何停止规则，从而必须进行第五次查询。因此，该策略在最坏情况下最多使用 $5$ 次查询。\n\n结合下界和上界，在最坏情况下必须查询的传感器的绝对最小数量是 $5$。",
            "answer": "$$\\boxed{5}$$"
        }
    ]
}