{
    "hands_on_practices": [
        {
            "introduction": "要真正掌握积和式（permanent）带来的计算挑战，我们必须从其定义入手。这个练习  提供了一个直接的动手实践机会，让你将求和公式应用于一个小型矩阵。通过同时计算积和式与行列式，你将具体地感受到它们公式中一个看似微小的差异——符号项的存在与否——是如何导致截然不同的计算特性与复杂度的。",
            "id": "1435361",
            "problem": "在计算复杂性理论中，矩阵积和式的计算是复杂性类 $\\text{\\#P}$ 的一个典范问题。对于一个 $n \\times n$ 矩阵 $A = (a_{ij})$，其积和式由一个类似莱布尼茨的公式定义：\n$$\n\\text{perm}(A) = \\sum_{\\sigma \\in S_n} \\prod_{i=1}^{n} a_{i, \\sigma(i)}\n$$\n其中 $S_n$ 是集合 $\\{1, 2, \\dots, n\\}$ 的所有排列的集合。这个定义在结构上与行列式的定义非常相似：\n$$\n\\det(A) = \\sum_{\\sigma \\in S_n} \\text{sgn}(\\sigma) \\prod_{i=1}^{n} a_{i, \\sigma(i)}\n$$\n其中 $\\text{sgn}(\\sigma)$ 是排列 $\\sigma$ 的符号（如果 $\\sigma$ 是一个偶排列，则为 $+1$；如果是一个奇排列，则为 $-1$）。尽管有这种相似性，但计算积和式通常比计算行列式要困难得多。\n\n考虑以下 $3 \\times 3$ 的整数矩阵 $A$：\n$$\nA = \\begin{pmatrix}\n2  1  3 \\\\\n4  5  1 \\\\\n1  2  2\n\\end{pmatrix}\n$$\n计算 $A$ 的积和式（我们称之为 $p$）和 $A$ 的行列式（我们称之为 $d$）。\n\n你的任务是给出 $p$ 和 $d$ 的值。请将你的最终答案表示为包含两个整数值 $(p \\quad d)$ 的单行矩阵。",
            "solution": "我们使用以下定义：\n$$\n\\text{perm}(A) = \\sum_{\\sigma \\in S_{3}} \\prod_{i=1}^{3} a_{i,\\sigma(i)}, \\qquad \\det(A) = \\sum_{\\sigma \\in S_{3}} \\text{sgn}(\\sigma) \\prod_{i=1}^{3} a_{i,\\sigma(i)}.\n$$\n对于 $A=\\begin{pmatrix}2  1  3\\\\ 4  5  1\\\\ 1  2  2\\end{pmatrix}$，我们用单行表示法列出所有 $\\sigma \\in S_{3}$ 并计算相应的乘积：\n- $\\sigma=[1,2,3]$: $a_{1,1}a_{2,2}a_{3,3}=2\\cdot 5\\cdot 2=20$。\n- $\\sigma=[1,3,2]$: $a_{1,1}a_{2,3}a_{3,2}=2\\cdot 1\\cdot 2=4$。\n- $\\sigma=[2,1,3]$: $a_{1,2}a_{2,1}a_{3,3}=1\\cdot 4\\cdot 2=8$。\n- $\\sigma=[2,3,1]$: $a_{1,2}a_{2,3}a_{3,1}=1\\cdot 1\\cdot 1=1$。\n- $\\sigma=[3,1,2]$: $a_{1,3}a_{2,1}a_{3,2}=3\\cdot 4\\cdot 2=24$。\n- $\\sigma=[3,2,1]$: $a_{1,3}a_{2,2}a_{3,1}=3\\cdot 5\\cdot 1=15$。\n\n因此，\n$$\np=\\text{perm}(A)=20+4+8+1+24+15=72.\n$$\n对于行列式，我们需要考虑符号 $\\text{sgn}(\\sigma)$：$\\text{sgn}([1,2,3])=+1$，$\\text{sgn}([1,3,2])=-1$，$\\text{sgn}([2,1,3])=-1$，$\\text{sgn}([2,3,1])=+1$，$\\text{sgn}([3,1,2])=+1$，$\\text{sgn}([3,2,1])=-1$。因此，\n$$\nd=\\det(A)=20-4-8+1+24-15=18.\n$$\n作为交叉检验，我们按第一行进行余子式展开来计算 $d$：\n$$\nd=2\\,(5\\cdot 2-1\\cdot 2)-1\\,(4\\cdot 2-1\\cdot 1)+3\\,(4\\cdot 2-5\\cdot 1)=2\\cdot 8-1\\cdot 7+3\\cdot 3=16-7+9=18,\n$$\n该结果与基于排列的计算结果一致。\n\n因此，所求的数对是 $(p\\ d)=(72\\ 18)$。",
            "answer": "$$\\boxed{\\begin{pmatrix} 72  18 \\end{pmatrix}}$$"
        },
        {
            "introduction": "积和式的一般形式被认为是难以计算的（#P-完备问题），但当我们为输入矩阵引入特定结构时，情况又会如何呢？这个练习  邀请你通过研究上三角矩阵来探索这种情况。你会发现，这种结构性约束能够极大地简化问题，将复杂的排列求和过程简化为一个单一、易于计算的项，这是理解计算难度本质的关键一步。",
            "id": "1435400",
            "problem": "在计算复杂性理论中，矩阵的积和式（permanent）是一个与行列式（determinant）密切相关的函数。虽然计算行列式是高效的（属于复杂性类 P），但计算积和式通常被认为是困难的（它是#P完全的）。然而，对于某些特殊类型的矩阵，积和式可以被高效地计算。\n\n设 $A$ 是一个 $n \\times n$ 的方阵，其元素表示为 $a_{ij}$。矩阵 $A$ 是一个上三角矩阵，这意味着主对角线以下的所有元素都为零；即对于所有满足 $i > j$ 的索引 $i, j$，$a_{ij} = 0$。\n\n$A$ 的积和式，记为 $\\text{perm}(A)$，由以下公式定义：\n$$ \\text{perm}(A) = \\sum_{\\sigma \\in S_n} \\prod_{i=1}^{n} a_{i, \\sigma(i)} $$\n其中 $S_n$ 是集合 $\\{1, 2, \\dots, n\\}$ 的所有排列的集合。\n\n根据此定义，确定一个 $n \\times n$ 上三角矩阵 $A$ 的积和式的简单闭式表达式，用其元素表示。",
            "solution": "问题要求计算一个 $n \\times n$ 上三角矩阵 $A$ 的积和式。积和式的定义如下：\n$$ \\text{perm}(A) = \\sum_{\\sigma \\in S_n} \\prod_{i=1}^{n} a_{i, \\sigma(i)} $$\n这里，$S_n$ 是 $\\{1, 2, \\dots, n\\}$ 的所有排列的集合。求和遍及所有 $n!$ 种可能的排列。和中的每一项都是矩阵中 $n$ 个元素的乘积，每行每列各取一个。\n\n矩阵 $A$ 是上三角矩阵，这意味着对于所有 $i > j$，$a_{ij} = 0$。\n\n我们来分析和中的单项，它对应一个特定的排列 $\\sigma \\in S_n$：\n$$ P_{\\sigma} = \\prod_{i=1}^{n} a_{i, \\sigma(i)} = a_{1, \\sigma(1)} a_{2, \\sigma(2)} \\cdots a_{n, \\sigma(n)} $$\n要使这个乘积 $P_\\sigma$ 不为零，乘积中的每个因子 $a_{i, \\sigma(i)}$ 都必须不为零。\n鉴于 $A$ 是上三角矩阵，如果存在任何索引 $i$ 使得 $i > \\sigma(i)$，那么对应的元素 $a_{i, \\sigma(i)}$ 将为零，从而使整个乘积 $P_\\sigma$ 等于零。\n\n因此，我们只对那些乘积 $P_\\sigma$ 可能不为零的排列 $\\sigma$ 感兴趣。这要求对于每个 $i \\in \\{1, 2, \\dots, n\\}$，必须满足条件 $i \\le \\sigma(i)$。让我们确定哪些排列满足这个条件。\n\n考虑索引 $i=n$。条件是 $n \\le \\sigma(n)$。由于 $\\sigma(n)$ 必须是 $\\{1, 2, \\dots, n\\}$ 中的一个元素，唯一的可能性是 $\\sigma(n) = n$。\n\n现在考虑索引 $i=n-1$。条件是 $n-1 \\le \\sigma(n-1)$。由于 $\\sigma$ 是一个排列，并且我们已经知道 $\\sigma(n) = n$，所以 $\\sigma(n-1)$ 的值必须在集合 $\\{1, 2, \\dots, n-1\\}$ 中。满足 $n-1 \\le \\sigma(n-1)$ 的唯一方法是令 $\\sigma(n-1) = n-1$。\n\n我们可以通过归纳法继续这个推理。假设对于所有 $j > k$，我们已经证明了 $\\sigma(j) = j$。现在考虑索引 $i=k$。条件是 $k \\le \\sigma(k)$。由于 $\\sigma$ 是一个排列，并且值 $\\{k+1, \\dots, n\\}$ 已经分别赋给了 $\\sigma(k+1), \\dots, \\sigma(n)$，所以 $\\sigma(k)$ 的值必须从集合 $\\{1, 2, \\dots, k\\}$ 中选择。该集合中唯一满足 $k \\le \\sigma(k)$ 的值是 $\\sigma(k) = k$。\n\n通过从 $i=n$ 向下迭代到 $i=1$ 的这个过程，我们发现唯一一个对于所有 $i$ 都满足条件 $i \\le \\sigma(i)$ 的排列 $\\sigma$ 是单位排列，即对于所有 $i \\in \\{1, 2, \\dots, n\\}$，$ \\sigma(i) = i$。\n\n对于任何其他排列 $\\sigma$，必然存在至少一个索引 $i$ 使得 $i > \\sigma(i)$。这是因为如果 $\\sigma$ 不是单位排列，那么必然存在一个最大的索引 $k$ 使得 $\\sigma(k) \\neq k$。由于所有 $j>k$ 都有 $\\sigma(j)=j$，$\\sigma(k)$ 必须小于 $k$。对于这个排列，项 $a_{k, \\sigma(k)}$ 将为零，从而使整个乘积为零。\n\n因此，在积和式的和中的所有 $n!$ 项中，只有一项不为零：即对应于单位排列的那一项。\n\n对于单位排列 $\\sigma_{id}$，其中 $\\sigma_{id}(i) = i$，乘积为：\n$$ P_{\\sigma_{id}} = \\prod_{i=1}^{n} a_{i, \\sigma_{id}(i)} = \\prod_{i=1}^{n} a_{i,i} $$\n这是矩阵对角线元素的乘积。\n\n积和式是所有乘积 $P_\\sigma$ 的和。由于其中只有一个不为零，所以和就简化为这一个单项。\n$$ \\text{perm}(A) = \\sum_{\\sigma \\in S_n} P_\\sigma = P_{\\sigma_{id}} + \\sum_{\\sigma \\neq \\sigma_{id}} 0 = \\prod_{i=1}^{n} a_{i,i} $$\n因此，一个上三角矩阵的积和式是其对角线元素的乘积。",
            "answer": "$$ \\boxed{\\prod_{i=1}^{n} a_{ii}} $$"
        },
        {
            "introduction": "有时，转换看待问题的视角会揭示出令人惊奇的优雅联系。最后一个练习  将我们的焦点从计算积和式的精确值，转移到确定其奇偶性上。这个看似更简单的问题，引出了一个与行列式之间意想不到的深刻联系，它表明，尽管计算积和式的精确值非常困难，但确定其模 $2$ 的值却出人意料地简单。",
            "id": "1435370",
            "problem": "在计算复杂性理论中，我们研究解决计算问题所需的资源。一个核心问题是计算方阵的积和式。对于一个 $n \\times n$ 矩阵 $A = (a_{i,j})$，其积和式定义为：\n$$ \\text{perm}(A) = \\sum_{\\sigma \\in S_n} \\prod_{i=1}^{n} a_{i, \\sigma(i)} $$\n其中 $S_n$ 是数字 $\\{1, 2, \\dots, n\\}$ 的所有排列的集合。这与行列式的定义非常相似，行列式定义为：\n$$ \\det(A) = \\sum_{\\sigma \\in S_n} \\text{sgn}(\\sigma) \\prod_{i=1}^{n} a_{i, \\sigma(i)} $$\n其中 $\\text{sgn}(\\sigma)$ 是排列 $\\sigma$ 的符号。\n\n计算行列式已知属于复杂性类 P，这意味着它可以通过确定性算法在多项式时间内解决。相比之下，计算积和式是一个困难得多的问题。它是复杂性类 Sharp-P (#P) 的典型完全问题，#P 是计算非确定性图灵机接受路径数量的函数类。人们普遍认为 P 是 #P 的真子集。\n\n一名计算机科学专业的学生面临着计算一个大的 $n \\times n$ 矩阵的积和式的任务，该矩阵的元素为 0 或 1。知道这是一个 #P-完全问题，该学生决定通过计算模 2 的积和式来简化问题，即求 $\\text{perm}(A) \\pmod 2$。这个简化后的问题是求积和式的奇偶性。\n\n以下哪个陈述正确描述了计算 0-1 矩阵模 2 的积和式的计算复杂性？\n\nA. 该问题仍然是 #P-完全的。\n\nB. 该问题是 NP-完全的。\n\nC. 该问题属于 P (可在多项式时间内解决)。\n\nD. 该问题是 coNP-完全的。\n\nE. 该复杂性是一个开放问题，但据推测它不属于 P。",
            "solution": "题目要求我们确定计算 0-1 矩阵模 2 的积和式的计算复杂性。\n\n1. 根据定义，对于一个 $n \\times n$ 矩阵 $A = (a_{i,j})$，\n$$\n\\text{perm}(A) = \\sum_{\\sigma \\in S_{n}} \\prod_{i=1}^{n} a_{i,\\sigma(i)}, \\quad\n\\det(A) = \\sum_{\\sigma \\in S_{n}} \\text{sgn}(\\sigma) \\prod_{i=1}^{n} a_{i,\\sigma(i)}.\n$$\n\n2. 考虑这些表达式模 $2$ 的情况。在域 $\\mathbb{F}_{2}$ 上，有 $-1 \\equiv 1 \\pmod{2}$。因此，对于每个排列 $\\sigma$，其符号$\\text{sgn}(\\sigma)$（无论是 $+1$ 还是 $-1$）在模 $2$ 的意义下都等价于 $1$。\n\n3. 将行列式表达式模 $2$ 简化会去掉符号：\n$$\n\\det(A) \\bmod 2 \\;=\\; \\left(\\sum_{\\sigma \\in S_{n}} \\text{sgn}(\\sigma) \\prod_{i=1}^{n} a_{i,\\sigma(i)}\\right) \\bmod 2\n\\;=\\; \\sum_{\\sigma \\in S_{n}} \\left(\\prod_{i=1}^{n} a_{i,\\sigma(i)}\\right) \\bmod 2\n\\;=\\; \\text{perm}(A) \\bmod 2.\n$$\n\n4. 因此，对于任何整数矩阵（特别是任何 0-1 矩阵），\n$$\n\\text{perm}(A) \\equiv \\det(A) \\pmod{2}.\n$$\n\n5. 计算 $\\det(A) \\bmod 2$ 可以通过在 $\\mathbb{F}_{2}$ 上进行高斯消元法（或任何标准的多项式时间行列式算法）在多项式时间内完成。因此，计算 $\\text{perm}(A) \\bmod 2$ 属于 P。\n\n因此，正确的选项是该问题可在多项式时间内解决。",
            "answer": "$$\\boxed{C}$$"
        }
    ]
}