{
    "hands_on_practices": [
        {
            "introduction": "理论学习之后，最好的巩固方式莫过于亲手实践。我们将从一个基础练习开始，这个练习旨在揭示布尔范式与$AC^0$电路之间的直接联系。通过将一个给定的合取范式（CNF）公式转换为一个深度固定的电路，你将直观地理解为什么许多逻辑上结构简单的问题都属于$AC^0$复杂性类 。",
            "id": "1449580",
            "problem": "如果一个布尔电路具有常数深度、大小是输入数量的多项式，并且由与门、或门和非门构成，那么它就属于复杂度类 $AC^0$。允许与门和或门具有无界扇入（即，它们可以接受任意数量的输入）。为了计算深度，一个标准的约定是假设非门只能直接应用于输入变量，并且这层非门不计入电路的总深度。因此，深度是从任何输入（或其否定）到输出的路径上与门和或门的最大数量。\n\n考虑以下3-合取范式（3-CNF）的布尔公式 $\\Phi$，它是一些子句的合取（AND），其中每个子句是三个文字的析取（OR）：\n$$ \\Phi = (x_1 \\lor \\neg x_2 \\lor x_3) \\land (\\neg x_1 \\lor x_2 \\lor x_4) \\land (x_2 \\lor \\neg x_3 \\lor \\neg x_4) $$\n该公式定义在四个输入变量 $x_1, x_2, x_3, x_4$ 上。文字是变量或其否定。\n\n你的任务是根据 $AC^0$ 的结构原则，将此公式建模为一个电路。为 $\\Phi$ 构建一个直接反映其作为析取之合取结构的电路。确定该电路的深度 $D$ 和所需门的总数 $G$。门的总数应包括实现该公式所需的所有与门、或门和非门，从基本输入 $x_1, x_2, x_3, x_4$ 开始计算。\n\n将你的答案表示为一个行矩阵，其中依次包含两个整数 $D$ 和 $G$。",
            "solution": "我们要为3-CNF公式构建一个 $AC^{0}$ 电路\n$$\\Phi=(x_{1}\\lor\\neg x_{2}\\lor x_{3})\\land(\\neg x_{1}\\lor x_{2}\\lor x_{4})\\land(x_{2}\\lor\\neg x_{3}\\lor\\neg x_{4}).$$\n根据标准的 $AC^{0}$ 约定，非门只能出现在输入端，且不计入深度；深度是从输入（或其否定）到输出的与/或门层数。我们将 $\\Phi$ 直接实现为三个析取的合取。\n\n首先，为每个以否定形式出现的变量创建一个非门：$\\neg x_{1}$、$\\neg x_{2}$、$\\neg x_{3}$ 和 $\\neg x_{4}$。这需要4个非门。每个非门的输出可以扇出到任何需要它的子句；在这个公式中，每个非门输出被使用一次。\n\n接下来，为每个子句构建一个或门，每个或门的扇入为3：\n- 一个或门计算 $(x_{1}\\lor\\neg x_{2}\\lor x_{3})$，\n- 一个或门计算 $(\\neg x_{1}\\lor x_{2}\\lor x_{4})$，\n- 一个或门计算 $(x_{2}\\lor\\neg x_{3}\\lor\\neg x_{4})$。\n这部分需要3个或门。\n\n最后，将这三个或门的输出连接到一个单独的与门，以计算它们的合取，这需要1个与门。\n\n该电路的深度 $D$ 只计算与/或门层：输入（或通过输入非门层的其否定）馈入或门层（深度1），或门层再馈入顶层的与门（深度2）。因此 $D=2$。\n\n门的总数 $G$ 包括所有使用的非门、或门和与门。我们计算出有4个非门、3个或门和1个与门，所以\n$$G=4+3+1=8.$$\n\n因此，所需的深度和门数行矩阵为 $\\begin{pmatrix}2  8\\end{pmatrix}$。",
            "answer": "$$\\boxed{\\begin{pmatrix}2  8\\end{pmatrix}}$$"
        },
        {
            "introduction": "在掌握了如何将现成的逻辑公式转换为电路后，我们来挑战一个需要更多抽象思维的练习。这个任务要求你为一个描述性的属性——判断一个图是否为完全图（$K_k$）——设计一个$AC^0$电路。你需要首先将“完全图”这个概念转化为一个精确的布尔逻辑表达式，然后再将其实现为电路，这将锻炼你将高层概念转化为底层硬件逻辑的能力 。",
            "id": "1449560",
            "problem": "在布尔电路复杂性的研究中，电路由逻辑门构成。在本问题中，我们考虑由与门（AND）、或门（OR）和非门（NOT）构成的电路。与门和或门允许有无界扇入（即任意数量的输入），而非门的扇入为一。电路的**大小**是其包含的总门数。电路的**深度**是从任何输入变量到输出门的最长路径的长度。按照惯例，任何直接应用于输入变量的非门都被视为处于输入层，不计入电路的深度。\n\n一个具有 $k$ 个顶点的图可以用一个 $k \\times k$ 的邻接矩阵 $A$ 来表示，其中条目 $a_{ij}$（对于 $1 \\le i, j \\le k$）如果存在从顶点 $i$ 到顶点 $j$ 的边，则为 1，否则为 0。对于无向图，该矩阵是对称的，即 $a_{ij} = a_{ji}$。\n\n一个图被称为**完全图**（记作 $K_k$），当且仅当对于每一对不同的顶点，都恰好有一条边连接它们。根据标准定义，完全图没有自环（即没有从顶点到其自身的边）。\n\n对于一个固定的整数 $k \\ge 2$，你的任务是设计一个布尔电路，它以邻接矩阵 $A$ 的 $k^2$ 个条目作为输入，如果該图表示 $K_k$，则输出 1，否则输出 0。你的目标应该是设计一个深度尽可能小，且在深度最小的电路中大小也尽可能小的电路。\n\n这种电路的最小深度和最小大小之和是多少？请将你的答案表示为 $k$ 的函数。",
            "solution": "我们有 $k^{2}$ 个布尔输入 $\\{a_{ij}\\}_{1 \\le i,j \\le k}$，它们编码了一个具有 $k$ 个带标签顶点的图的邻接矩阵 $A$。输出应为 $1$ 当且仅当该图恰好是 $K_{k}$（没有自环，且每对不同顶点都相邻）。用 $A$ 来表示，这意味着：\n- 对每个 $i$，$a_{ii} = 0$（没有自环）。\n- 对每个 $i \\ne j$，$a_{ij} = 1$（所有非对角线条目均为 $1$）。要求所有 $i \\ne j$ 的 $a_{ij}$ 都为 $1$ 会自动强制实现 $K_k$ 所需的对称性，因为 $a_{ij}$ 和 $a_{ji}$ 都必须为 $1$。\n\n一个具有无界扇入的深度为1的实现是相关文字的单一合取：\n$$\nF(A) \\;=\\; \\bigwedge_{i=1}^{k} \\neg a_{ii} \\;\\wedge\\; \\bigwedge_{\\substack{1 \\le i,j \\le k \\\\ i \\ne j}} a_{ij}.\n$$\n实现方法：\n- 在每个 $a_{ii}$ 上放置一个非门，直接在输入层得到 $\\neg a_{ii}$。根据给定的惯例，这些非门不增加深度。\n- 将所有 $k$ 个取反的对角文字和所有 $k(k-1)$ 个非对角正文字输入到一个无界扇入的与门中。\n\n深度分析：\n- 输入层之上的唯一门是那个单独的与门，因此电路深度为 $1$。\n- 深度为 $0$ 的电路无法计算这个非平凡函数（深度 $0$ 将是一个投影或常数），因此最小深度为 $1$。\n\n大小分析：\n- 电路中恰好有 $k$ 个非门（每个对角输入一个）和一个与门，所以大小为 $k+1$。\n- 这在深度为1的电路中是最优的。任何深度为1的电路都由一个单一的与门或或门组成，其输入是（可能在输入层被取反的）输入文字。它不可能是单一的或门，因为文字的或运算不可能在定义 $K_k$ 的唯一赋值上恰好为 $1$，同时在邻近的赋值上为 $0$。因此，顶层门必须是与门。对于每个 $i$，为了拒绝除了 $a_{ii}=1$ 之外与 $K_k$ 相同的赋值，合取式必须包含文字 $\\neg a_{ii}$。因此，至少需要 $k$ 个输入取反操作，再加上与门，总共至少需要 $k+1$ 个门。这与我们的构造相符，因此最小大小（在最小深度的前提下）是 $k+1$。\n\n因此，最小深度为 $1$，而在这样的电路中，最小大小为 $k+1$。所求的和是\n$$\n1 + (k+1) \\;=\\; k+2.\n$$",
            "answer": "$$\\boxed{k+2}$$"
        },
        {
            "introduction": "现在，让我们来解决一个更具挑战性的问题，它将检验你对$AC^0$计算能力的深刻理解。这个问题要求判断一个二进制串中“1”的索引是否构成一个等差数列，这个性质初看起来似乎需要顺序检查，难以在常数深度内完成。通过为这个问题设计一个$AC^0$电路，你将发现常数深度电路所蕴含的巨大并行计算能力，并体会到如何将一个看似顺序的问题分解为可以并行处理的逻辑判断 。",
            "id": "1449552",
            "problem": "在计算复杂性理论中，AC 层次结构（AC 是 Alternating Class 的缩写）是一系列复杂性类的集合。类 `AC^k` 是指可以由一个布尔电路族判定的语言集合，该电路族的门数量是输入规模 $n$ 的多项式，深度为 $O(\\log^k n)$，并且其中的 AND（与）门和 OR（或）门具有无界扇入。类 `AC^0` 对应于常数深度，即深度为 $O(1)$。\n\n考虑语言 `AP-INDICES`。一个长度为 $n$ 的二进制字符串 $x = x_1x_2...x_n$ 是 `AP-INDICES` 的成员，当且仅当其索引集合 $\\{i \\in \\{1, 2, ..., n\\} \\mid x_i = 1\\}$ 按升序排列后形成一个等差数列。一个数列是等差数列，如果其连续项之间的差是恒定的。根据定义，如果字符串中 '1' 的数量为零或一，则认为该条件得到满足。\n\n例如，对于 $n=7$，字符串 `0101010` 属于 `AP-INDICES`，因为其 '1' 的索引集合是 $\\{2, 4, 6\\}$，这是一个等差数列。相反，对于 $n=5$，字符串 `11010` 不属于 `AP-INDICES`，因为其 '1' 的索引 $\\{1, 2, 4\\}$ 不构成等差数列。\n\n请确定 `AP-INDICES` 语言最精确的分类。在以下选项中，包含 `AP-INDICES` 的最小的类是什么？\n\nA. `AC^0`\n\nB. `AC^1`\n\nC. `AC^2`\n\nD. `PSPACE`\n\nE. 该语言是不可判定的。",
            "solution": "令 $x \\in \\{0,1\\}^{n}$ 且 $S(x) = \\{i \\in \\{1,\\dots,n\\} : x_{i} = 1\\}$。根据定义，$x \\in \\text{AP-INDICES}$ 当且仅当 $|S(x)| \\leq 1$，或者存在整数 $a$ 和 $d$（其中 $1 \\leq a \\leq n$ 且 $1 \\leq d \\leq n$），使得 $S(x)$ 按升序排列后恰好是 $\\{a, a+d, \\dots, a+(m-1)d\\}$（对于某个 $m \\geq 2$）。\n\n我们将“$S(x)$ 是一个等差数列”这一性质用以下关于 $(a,d)$ 的等价存在性条件来表示：\n存在 $a,d$（其中 $1 \\leq a \\leq n$ 且 $1 \\leq d \\leq n$），使得\n(i) 对每个满足 $i \\not\\equiv a \\pmod{d}$ 的 $i \\in \\{1,\\dots,n\\}$，都有 $x_{i} = 0$，并且\n(ii) 对每个满足 $i \\equiv a \\pmod{d}$ 的 $i \\in \\{1,\\dots,n\\}$，以及对所有满足 $t \\geq 1$、$0  s  t$ 和 $i+td \\leq n$ 的整数 $t$ 和 $s$，蕴含式\n$$\nx_{i} \\wedge x_{i+td} \\;\\Rightarrow\\; x_{i+sd}\n$$\n成立。\n\n等价性证明：\n- 如果 $S(x)$ 是一个等差数列 $S(x) = \\{a, a+d, \\dots, a+(m-1)d\\}$，那么 (i) 成立，因为 $S(x)$ 中的每个元素都模 $d$ 同余于 $a$，且没有其他索引上的值为 $1$。同时 (ii) 也成立，因为每当 $x_{i} = 1$ 且 $x_{i+td} = 1$（其中 $0  s  t$）时，中间位置 $i+sd$ 也必然在 $S(x)$ 中，因此 $x_{i+sd} = 1$。\n- 反之，假设对于某个 $(a,d)$，条件 (i) 和 (ii) 成立。条件 (i) 意味着所有值为 $1$ 的位置都位于同一个剩余类 $i \\equiv a \\pmod{d}$ 中。在这个剩余类内部，条件 (ii) 强制了“无空洞”：如果类中的两个位置 $i$ 和 $i+td$ 的值为 $1$，那么所有中间位置 $i+sd$（其中 $0  s  t$）的值也必须为 $1$。因此，该剩余类中值为 $1$ 的位置构成了一个形如 $\\{a+ud, a+(u+1)d, \\dots, a+vd\\}$（对于某些整数 $u \\leq v$）的连续区块，这正是一个等差数列。如果 $|S(x)| \\leq 1$，该条件是空真满足的（如果存在唯一的 $1$ 位置，可选择任何以该位置为 $a$ 的 $(a,d)$）。\n\n为了用常数深度电路来判定成员关系，我们将条件 (ii) 转换为子句。蕴含式\n$$\nx_{i} \\wedge x_{i+td} \\;\\Rightarrow\\; x_{i+sd}\n$$\n等价于 3-文字子句\n$$\n(\\lnot x_{i}) \\;\\vee\\; x_{i+sd} \\;\\vee\\; (\\lnot x_{i+td}).\n$$\n对于固定的 $(a,d)$，定义子电路 $C(a,d)$ 为以下各项的合取：\n- 所有文字 $(\\lnot x_{i})$，其中 $i \\in \\{1,\\dots,n\\}$ 且 $i \\not\\equiv a \\pmod{d}$（强制执行条件 (i)），\n- 所有子句 $(\\lnot x_{i}) \\vee x_{i+sd} \\vee (\\lnot x_{i+td})$，其中 $i \\equiv a \\pmod{d}$，$t \\geq 1$，$0  s  t$，且 $i+td \\leq n$（强制执行条件 (ii)）。\n\n那么，$x \\in \\text{AP-INDICES}$ 当且仅当\n$$\n\\bigvee_{d=1}^{n} \\;\\bigvee_{a=1}^{d} \\; C(a,d)\n$$\n的计算结果为真。这是对 $(a,d)$ 的 $O(n^{2})$ 种选择上的一个析取运算，其操作数是输入文字和 3-文字析取式的合取。利用无界扇入的 AND/OR 门和输入取反，这可以构成一个深度为 3 的电路：输入被馈送到用于子句的 3-输入 OR 门，所有这些门的输出与必要的取反文字一起被馈送到每个 $(a,d)$ 对应的一个 AND 门中，顶层的一个 OR 门汇集所有 $(a,d)$ 候选者的结果。\n\n电路规模是多项式的。对于每个 $(a,d)$：\n- 强制 $i \\not\\equiv a \\pmod{d}$ 贡献了 $O(n)$ 个文字；\n- 强制无空洞的条件，对于每个 $i \\equiv a \\pmod{d}$，贡献了 $O((n/d)^{2})$ 个子句（因为 $t$ 的范围可达 $O(n/d)$，$s$ 的范围是 $1,\\dots,t-1$），而这样的 $i$ 有 $O(n/d)$ 个，因此每个 $(a,d)$ 总共有 $O((n/d)^{3})$ 个子句。对 $d$ 和 $a$ 求和得到\n$$\n\\sum_{d=1}^{n} d \\cdot O\\left(\\left(\\frac{n}{d}\\right)^{3}\\right) \\;=\\; O\\left(n^{3} \\sum_{d=1}^{n} \\frac{1}{d^{2}}\\right) \\;=\\; O(n^{3}).\n$$\n因此，该电路族具有多项式规模和常数深度，并使用无界扇入的与/或门，所以该语言属于 $AC^{0}$。\n\n在给定的选项中，$AC^{0} \\subseteq AC^{1} \\subseteq AC^{2} \\subseteq \\text{PSPACE}$，而“不可判定”严格大于所有这些类。因此，包含 `AP-INDICES` 的最小类是 $AC^{0}$。",
            "answer": "$$\\boxed{A}$$"
        }
    ]
}