{
    "hands_on_practices": [
        {
            "introduction": "To begin our hands-on exploration, we start with a fundamental question: can any randomized protocol reduce communication? This exercise examines a simple, intuitive protocol for determining the parity of the intersection of two sets. By analyzing its performance, you will discover that it offers no improvement over a random guess. This practice is a crucial first step; understanding why a naive protocol fails provides the foundation for appreciating the clever designs of effective randomized protocols.",
            "id": "1440960",
            "problem": "In the field of communication complexity, two parties, Alice and Bob, aim to compute a function $f(x, y)$ where Alice holds the input $x$ and Bob holds the input $y$. They do this by exchanging messages according to a protocol, and the cost of the protocol is the number of bits exchanged.\n\nConsider the following scenario. The universe of items is the set $U = \\{1, 2, \\dots, n\\}$ for $n=128$. Alice has a subset $X \\subseteq U$, and Bob has a subset $Y \\subseteq U$. Their goal is to compute the parity of the size of their intersection, i.e., to determine if $|X \\cap Y|$ is odd or even.\n\nThey decide to test a simple one-way randomized protocol that relies on a publicly available shared random bit string.\n\n**The Protocol:**\n1. A random bit string $r = (r_1, r_2, \\dots, r_n)$ is generated and made available to both Alice and Bob. Each bit $r_i$ is chosen independently and uniformly at random from $\\{0, 1\\}$.\n2. Alice computes a single bit $a$ by calculating the parity of the sum of the random bits corresponding to the indices in her set $X$. That is, $a = \\left( \\sum_{i \\in X} r_i \\right) \\pmod 2$.\n3. Alice sends the bit $a$ to Bob. This is the only communication.\n4. Bob receives the bit $a$ and declares it to be the result for $|X \\cap Y| \\pmod 2$.\n\nThis protocol is not perfect. An error occurs if Bob's declared result, $a$, is not equal to the true value of $|X \\cap Y| \\pmod 2$. What is the maximum possible probability of error for this protocol? The maximum should be taken over all possible pairs of input sets $(X, Y)$.\n\nExpress your answer as an exact fraction.",
            "solution": "Let $U=\\{1,2,\\dots,n\\}$ with $n=128$, and let $X,Y\\subseteq U$. A public random string $r=(r_{1},\\dots,r_{n})$ is drawn with independent bits $r_{i}$, each uniformly distributed on $\\{0,1\\}$. Alice computes\n$$\na=\\left(\\sum_{i\\in X}r_{i}\\right)\\bmod 2,\n$$\nand Bob outputs $a$ as his estimate of the true value\n$$\nt=\\left|X\\cap Y\\right|\\bmod 2.\n$$\nThe error event is $\\{a\\neq t\\}$. For fixed $(X,Y)$, the error probability is taken over the randomness of $r$.\n\nWe analyze the distribution of $a$. If $X=\\emptyset$, then\n$$\na=\\left(\\sum_{i\\in \\emptyset} r_{i}\\right)\\bmod 2=0\n$$\ndeterministically. In this case, $t=\\left|X\\cap Y\\right|\\bmod 2=\\left|\\emptyset\\right|\\bmod 2=0$, so\n$$\n\\Pr[a\\neq t]=\\Pr[0\\neq 0]=0.\n$$\n\nIf $X\\neq\\emptyset$, choose any $j\\in X$ and condition on the values of $\\{r_{i}:i\\in X\\setminus\\{j\\}\\}$. Let\n$$\nc=\\left(\\sum_{i\\in X\\setminus\\{j\\}} r_{i}\\right)\\bmod 2,\n$$\nwhich is fixed under the conditioning. Then\n$$\na=\\left(r_{j}+ \\sum_{i\\in X\\setminus\\{j\\}} r_{i}\\right)\\bmod 2=(r_{j}+c)\\bmod 2.\n$$\nSince $r_{j}$ is independent of the conditioning and uniformly distributed on $\\{0,1\\}$, it follows that $a$ is uniformly distributed on $\\{0,1\\}$:\n$$\n\\Pr[a=0]=\\Pr[a=1]=\\frac{1}{2}.\n$$\nHence, for any fixed $t\\in\\{0,1\\}$ (in particular $t=\\left|X\\cap Y\\right|\\bmod 2$),\n$$\n\\Pr[a\\neq t]=\\frac{1}{2}.\n$$\n\nCombining the two cases, for $X=\\emptyset$ the error probability is $0$, and for $X\\neq\\emptyset$ the error probability is $\\frac{1}{2}$. Therefore, maximizing over all pairs $(X,Y)$ yields the maximum error probability\n$$\n\\max_{X,Y}\\Pr[a\\neq t]=\\frac{1}{2}.\n$$\nThe value of $n$ does not affect this conclusion as long as $X$ can be nonempty.",
            "answer": "$$\\boxed{\\frac{1}{2}}$$"
        },
        {
            "introduction": "Having seen the pitfalls of a naive approach, let's explore a protocol that genuinely harnesses the power of randomization. This problem introduces the core technique of \"fingerprinting,\" where large, complex objects are mapped to small, manageable representatives. Here, Alice and Bob use a random prime to create fingerprints of their numbers to check for a common divisor, a task that would otherwise require transmitting the large numbers themselves. This practice  provides a concrete example of a protocol with one-sided error, demonstrating a practical trade-off between a small chance of error and a massive reduction in communication.",
            "id": "1440982",
            "problem": "Alice and Bob are studying randomized communication protocols. They are tasked with determining if their respective integers, $x$ and $y$, share a common prime factor. They devise the following one-way protocol, which relies on a shared public random source:\n\n**Protocol: Common Factor Test**\n1.  A prime number $p$ is selected uniformly at random from the set of all prime numbers less than or equal to a publicly known integer $M$.\n2.  Alice computes $a = x \\pmod p$ and transmits the value of $a$ to Bob.\n3.  Bob receives $a$. He then computes $b = y \\pmod p$.\n4.  Bob's Output Rule: If $a=0$ and $b=0$, Bob outputs that a common factor was found. Otherwise, he outputs that no common factor was found with the chosen prime $p$.\n\nThis protocol is said to have a one-sided error. If the protocol outputs that a common factor was found, it is always correct (i.e., $\\text{gcd}(x,y) > 1$). However, if $\\text{gcd}(x,y) > 1$, the protocol might fail to find a common factor, resulting in an error.\n\nConsider a specific scenario where the parameter $M=100$. Alice's number is $x = 177$ and Bob's number is $y = 295$. You are given that the prime factorization of these numbers are $x=3 \\times 59$ and $y=5 \\times 59$.\n\nWhat is the communication cost of this protocol, measured in the number of bits Alice must send, and what is the probability of error for this specific pair of inputs $(x, y)$? The probability of error is defined as the probability that the protocol fails to find a common factor, given that one exists.\n\nA. Communication Cost: 6 bits, Error Probability: 24/25\nB. Communication Cost: 7 bits, Error Probability: 1/25\nC. Communication Cost: 7 bits, Error Probability: 24/25\nD. Communication Cost: 8 bits, Error Probability: 24/25\nE. Communication Cost: 7 bits, Error Probability: 23/24",
            "solution": "A prime $p$ is chosen uniformly from the set of primes at most $M=100$. Let this set be $\\mathcal{P}$, with size $|\\mathcal{P}|=\\pi(100)$. The number of primes at most $100$ is $\\pi(100)=25$.\n\nCommunication cost: Alice sends $a=x \\pmod p$, which lies in the set $\\{0,1,\\dots,p-1\\}$. The number of bits needed to encode any such residue is $\\lceil \\log_{2} p \\rceil$. The protocol must work for the largest possible $p \\leq 100$, which is $97$. Since $2^{6}=6497\\leq 2^{7}=128$, it follows that\n$$\n\\lceil \\log_{2} 97 \\rceil=7,\n$$\nso the communication cost is $7$ bits.\n\nError probability: The protocol outputs “found” if and only if $a=0$ and $b=0$, which is equivalent to $p \\mid x$ and $p \\mid y$, i.e., $p$ divides $\\gcd(x,y)$. Given $x=3 \\times 59$ and $y=5 \\times 59$, we have $\\gcd(x,y)=59$. Therefore the protocol succeeds exactly when $p=59$. Since $p$ is uniform over $\\mathcal{P}$ with $|\\mathcal{P}|=25$, the success probability is\n$$\n\\frac{1}{25},\n$$\nand hence the error probability is\n$$\n1-\\frac{1}{25}=\\frac{24}{25}.\n$$\n\nThus the correct option is “Communication Cost: 7 bits, Error Probability: $24/25$.”",
            "answer": "$$\\boxed{C}$$"
        },
        {
            "introduction": "We now scale up the fingerprinting technique to tackle a challenge inspired by \"big data\" problems in computational biology. Instead of comparing two numbers, Alice and Bob must determine if their massive DNA sequences share a common substring of a given length. This exercise  generalizes the concept of fingerprinting to sets of objects (all substrings) and requires a more sophisticated probabilistic analysis to bound the error. Working through this problem will showcase how randomized communication complexity provides powerful, scalable solutions for processing vast datasets where transmitting the raw data is infeasible.",
            "id": "1440992",
            "problem": "Alice and Bob are collaborating on a large-scale computational biology project. Alice has a Deoxyribonucleic acid (DNA) sequence $x$ and Bob has a DNA sequence $y$, both of length $n$. The sequences are represented as strings over the alphabet $\\{A, C, G, T\\}$. They want to determine if there is a common substring of length exactly $k$ in their sequences. A direct comparison would require transmitting one of the aformentioned sequences, which is costly. They decide to use a randomized communication protocol which is described below.\n\n1.  They publicly agree on a mapping from the alphabet $\\{A, C, G, T\\}$ to the set of integers $\\{0, 1, 2, 3\\}$. This transforms their DNA sequences into integer strings.\n2.  They interpret each substring of length $k$ as the base-4 representation of an integer. For a substring $s = s_1 s_2 \\dots s_k$, where each $s_i$ is the integer corresponding to a DNA base, the associated integer value is $N(s) = \\sum_{i=1}^k s_i 4^{k-i}$.\n3.  To handle potentially large numbers, they also publicly agree on a prime number $p$. Alice calculates a \"fingerprint\" for each of her $n-k+1$ substrings of length $k$. The fingerprint of a substring $s$ is $FP(s) = N(s) \\pmod p$. She collects these into a set $F_x$.\n4.  In a single message, Alice sends the entire set of fingerprints $F_x$ to Bob.\n5.  Bob computes the fingerprints for his own substrings, creating the set $F_y$. He then checks if the intersection $F_x \\cap F_y$ is non-empty. If it is, they conclude that a common substring of length $k$ likely exists. If the intersection is empty, they conclude one does not exist.\n\nThis protocol has a one-sided error: it never fails to detect a common substring if one exists, but it may report one when none exists (a false positive). Suppose $n=1,000,000$ and $k=50$. They want the probability of a false positive to be at most $10^{-6}$. To achieve this, they choose the prime $p$ uniformly at random from the set of primes in an interval $[M, 2M]$. You are given that the number of distinct prime factors of any integer $Z > 1$ is strictly less than $\\log_2(Z)$. They determine that to meet their desired error bound, they must select $M$ to be the smallest integer power of 10 that suffices.\n\nYour task is to calculate the total number of bits Alice must send to Bob in the worst case. To send her set of fingerprints, Alice transmits each unique fingerprint value one by one. The number of bits required for each fingerprint is determined by the largest possible prime they might agree on. Express your final answer for the total number of bits in scientific notation, rounded to three significant figures.",
            "solution": "Let $n=10^{6}$ and $k=50$. Each length-$k$ substring $s$ maps to an integer $N(s)\\in\\{0,1,\\dots,4^{k}-1\\}$. For strings $x$ and $y$ with no common length-$k$ substring, a false positive occurs iff there exist $s$ from $x$ and $t$ from $y$ with $N(s)\\not= N(t)$ but $N(s)\\equiv N(t)\\pmod p$, i.e., $p$ divides $Z_{s,t}\\equiv |N(s)-N(t)|$.\n\nLet $L\\equiv n-k+1$ be the number of length-$k$ substrings in each string; here\n$$\nL=n-k+1=10^{6}-49=999{,}951.\n$$\nThere are at most $L^{2}$ ordered pairs $(s,t)$, and for each such pair, $1\\leq Z_{s,t}\\leq 4^{k}-1$. Let $D$ be the set of all such $Z_{s,t}$ for which $Z_{s,t}\\geq 1$. A false positive arises if the chosen prime $p\\in[M,2M]$ divides at least one $Z\\in D$.\n\nBy the given fact, the number of distinct prime factors of any integer $Z1$ is strictly less than $\\log_{2}(Z)$. Therefore, the number of distinct primes that divide at least one $Z\\in D$ is strictly less than\n$$\n\\log_{2}\\!\\Big(\\prod_{Z\\in D} Z\\Big)=\\sum_{Z\\in D}\\log_{2}(Z)\\leq |D|\\cdot\\log_{2}(4^{k})=L^{2}\\cdot 2k.\n$$\nThus the number of “bad” primes in $[M,2M]$ is strictly less than $2kL^{2}$. If $P(M)$ denotes the number of primes in $[M,2M]$, then choosing $p$ uniformly at random from these primes yields\n$$\n\\Pr[\\text{false positive}]\\leq \\frac{2kL^{2}}{P(M)}.\n$$\nTo ensure this is at most $10^{-6}$, it suffices to have\n$$\nP(M)\\geq 10^{6}\\cdot 2kL^{2}.\n$$\nWith $k=50$ and $L=999{,}951$,\n$$\nL^{2}=(10^{6}-49)^{2}=999{,}902{,}002{,}401,\\qquad 2kL^{2}=100\\cdot 999{,}902{,}002{,}401=99{,}990{,}200{,}240{,}100.\n$$\nHence a sufficient condition is\n$$\nP(M)\\geq 10^{6}\\cdot 99{,}990{,}200{,}240{,}100=9.99902002401\\times 10^{19}.\n$$\n\nUsing the prime number theorem as a conservative estimate, the number of primes in $[M,2M]$ satisfies $P(M)\\approx \\frac{M}{\\ln M}$; a conservative lower bound is $P(M)\\gtrsim \\frac{M}{\\ln(2M)}$. We are to choose $M$ as the smallest integer power of $10$ satisfying\n$$\n\\frac{M}{\\ln(2M)}\\geq 9.99902002401\\times 10^{19}.\n$$\nTest $M=10^{21}$:\n$$\n\\frac{10^{21}}{\\ln(2\\times 10^{21})}=\\frac{10^{21}}{\\ln 2+21\\ln 10}\\approx \\frac{10^{21}}{49.047434}\\approx 2.04\\times 10^{19}9.999\\times 10^{19},\n$$\nso $10^{21}$ is insufficient. Test $M=10^{22}$:\n$$\n\\frac{10^{22}}{\\ln(2\\times 10^{22})}=\\frac{10^{22}}{\\ln 2+22\\ln 10}\\approx \\frac{10^{22}}{51.350019}\\approx 1.95\\times 10^{20}\\geq 9.999\\times 10^{19},\n$$\nso $M=10^{22}$ suffices and is the smallest power of $10$ that does.\n\nThe per-fingerprint bit length is determined by the largest possible agreed prime (at most $2M$), hence\n$$\nb=\\left\\lceil \\log_{2}(2M)\\right\\rceil=\\left\\lceil \\log_{2}(2\\times 10^{22})\\right\\rceil\n=\\left\\lceil 1+22\\log_{2}10\\right\\rceil\n=\\left\\lceil 1+22\\cdot \\frac{\\ln 10}{\\ln 2}\\right\\rceil\n=\\left\\lceil 74.082417\\right\\rceil=75.\n$$\nIn the worst case, all $L$ fingerprints are distinct modulo $p$ since $p\\gg L$, so Alice sends $L$ fingerprints. The total number of bits sent is\n$$\nT=b\\cdot L=75\\cdot 999{,}951=74{,}996{,}325=7.4996325\\times 10^{7}.\n$$\nRounded to three significant figures in scientific notation,\n$$\nT\\approx 7.50\\times 10^{7}.\n$$",
            "answer": "$$\\boxed{7.50 \\times 10^{7}}$$"
        }
    ]
}