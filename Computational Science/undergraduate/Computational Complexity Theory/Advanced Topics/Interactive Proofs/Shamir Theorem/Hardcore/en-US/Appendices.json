{
    "hands_on_practices": [
        {
            "introduction": "The core of the proof for Shamir's Theorem is a remarkable process called arithmetization, which translates complex logical statements into the language of polynomials. This exercise  is your first step into this process. You will take a Quantified Boolean Formula (QBF) and construct the initial polynomial claim that a Prover would send to a Verifier, a crucial first move in the interactive proof game.",
            "id": "1447644",
            "problem": "In the context of computational complexity theory, Shamir's theorem states that the complexity class $\\mathbf{IP}$, containing all problems solvable by an Interactive Proof system, is equal to $\\mathbf{PSPACE}$, the class of problems solvable by a deterministic Turing machine using a polynomial amount of space. A key part of the proof for $\\mathbf{IP} = \\mathbf{PSPACE}$ involves the arithmetization of a Quantified Boolean Formula (QBF).\n\nThis arithmetization process translates a boolean formula into a polynomial. Let boolean variables $x_i$ take values in $\\{0, 1\\}$, where $1$ represents TRUE and $0$ represents FALSE. The logical operations are mapped to arithmetic operations as follows:\n-   $A \\land B$ is translated to the product $A \\cdot B$.\n-   $\\neg A$ is translated to $(1-A)$.\n-   $A \\lor B$ is translated to $1 - (1-A)(1-B) = A+B-AB$.\n\nSimilarly, quantifiers are translated into operations over the polynomial representation $\\phi'$ of a formula $\\phi$:\n-   $\\exists x \\phi(x)$ is translated to $\\phi'(0)+\\phi'(1)-\\phi'(0)\\phi'(1)$.\n-   $\\forall x \\phi(x)$ is translated to $\\prod_{x \\in \\{0,1\\}} \\phi'(x)$.\n\nAny resulting polynomial can be simplified using the property that for any variable $x_i \\in \\{0,1\\}$, $x_i^k = x_i$ for any integer $k \\ge 1$.\n\nConsider the following Quantified Boolean Formula:\n$$ \\Phi = \\exists x_1 \\forall x_2 \\exists x_3 ((x_1 \\lor x_2) \\land (\\neg x_2 \\lor x_3)) $$\n\nIn the first round of the interactive proof for this QBF, the Prover must construct a polynomial that represents the formula after peeling off the outermost quantifier. This polynomial, which we will call $P(z)$, is a function of a single variable $z$ that stands in for $x_1$. Determine the polynomial $P(z)$. Express your answer as a polynomial in the variable $z$.",
            "solution": "We arithmetize the propositional core $\\psi(x_{1},x_{2},x_{3})=((x_{1}\\lor x_{2})\\land(\\neg x_{2}\\lor x_{3}))$ using the given rules. First,\n$$ (x_{1}\\lor x_{2}) \\mapsto x_{1}+x_{2}-x_{1}x_{2} $$\n$$ (\\neg x_{2}\\lor x_{3}) \\mapsto (1-x_{2})+x_{3}-(1-x_{2})x_{3} = 1 - x_{2} + x_{2}x_{3} $$\nThus the arithmetized formula is\n$$ \\psi'(x_{1},x_{2},x_{3})=(x_{1}+x_{2}-x_{1}x_{2})(1-x_{2}+x_{2}x_{3}) $$\nThe first polynomial sent by the prover, $P(z)$, is a univariate polynomial in $z$ (representing $x_1$) that is claimed to be equal to the arithmetization of the rest of the formula, $\\forall x_2 \\exists x_3 \\psi'(z,x_2,x_3)$.\nLet's first handle the innermost quantifier, $\\exists x_3$. Let $g(x_3) = \\psi'(z, x_2, x_3)$. The arithmetization is $g(0)+g(1)-g(0)g(1)$.\n-   $g(0) = (z+x_2-zx_2)(1-x_2+x_2 \\cdot 0) = (z+x_2-zx_2)(1-x_2)$.\n-   $g(1) = (z+x_2-zx_2)(1-x_2+x_2 \\cdot 1) = z+x_2-zx_2$.\n-   $g(0)+g(1) = (z+x_2-zx_2)(1-x_2+1) = (z+x_2-zx_2)(2-x_2)$.\n-   $g(0)g(1) = (z+x_2-zx_2)^2(1-x_2)$.\nThe result for $\\exists x_3$, let's call it $h(z,x_2)$, is $h(z,x_2) = (z+x_2-zx_2)(2-x_2) - (z+x_2-zx_2)^2(1-x_2)$.\n\nNext, we handle the quantifier $\\forall x_2$, which corresponds to the product $h(z,0) \\cdot h(z,1)$.\n-   For $x_2=0$: $h(z,0) = (z+0-z\\cdot 0)(2-0) - (z+0-z\\cdot 0)^2(1-0) = z \\cdot 2 - z^2 \\cdot 1 = 2z - z^2$.\n-   For $x_2=1$: $h(z,1) = (z+1-z\\cdot 1)(2-1) - (z+1-z\\cdot 1)^2(1-1) = (1)(1) - (1)^2(0) = 1$.\n\nTherefore, the polynomial $P(z)$ is the product:\n$$ P(z) = h(z,0) \\cdot h(z,1) = (2z - z^2) \\cdot 1 = 2z - z^2. $$\nThis is the polynomial in $z$ that the prover sends to the verifier in the first round.",
            "answer": "$$\\boxed{2z - z^2}$$"
        },
        {
            "introduction": "An interactive proof for QBF is not a single calculation but a multi-round protocol where the initial complex claim is gradually simplified. In this practice , we will trace the entire protocol from beginning to end for a specific formula. Your task is to determine the final, simple algebraic check the Verifier must perform after all quantifiers have been 'peeled away', which will give you a clear picture of how the protocol reduces a PSPACE-hard problem to a series of simple polynomial evaluations.",
            "id": "1447617",
            "problem": "Consider the Quantified Boolean Formula (QBF) given by $\\Phi = \\exists x_1 \\forall x_2 \\exists x_3 ((x_1 \\lor \\neg x_2) \\land (\\neg x_1 \\lor x_3))$. We are interested in verifying whether this formula is true using the interactive proof protocol based on arithmetization, which is central to the proof of the Shamir theorem that Interactive Proof systems ($\\mathbf{IP}$) are equivalent to Polynomial Space ($\\mathbf{PSPACE}$).\n\nThe protocol proceeds as follows:\n1.  **Arithmetization of the formula body:** The boolean variables $x_i \\in \\{0, 1\\}$ are treated as integers. The logical operations in the body $\\phi(x_1, x_2, x_3) = (x_1 \\lor \\neg x_2) \\land (\\neg x_1 \\lor x_3)$ are converted into polynomial operations over a sufficiently large field:\n    -   $\\neg z$ becomes $1-z$.\n    -   $z_1 \\land z_2$ becomes $z_1 z_2$.\n    -   $z_1 \\lor z_2$ becomes $z_1 + z_2 - z_1 z_2$.\n    This results in a polynomial we denote by $P(x_1, x_2, x_3)$. Since the variables are boolean, you may use the identity $x_i^2 = x_i$ to simplify the polynomial.\n\n2.  **Arithmetization of Quantifiers:** The quantifiers $Q_i$ are treated as operators. Let $f$ be a polynomial in variables $z_i, z_{i+1}, \\dots$.\n    -   $\\exists z_i f(z_i, \\dots)$ corresponds to the operation $\\mathcal{O}_{\\exists z_i} f = f(0, \\dots) + f(1, \\dots) - f(0, \\dots)f(1, \\dots)$.\n    -   $\\forall z_i f(z_i, \\dots)$ corresponds to the operation $\\mathcal{O}_{\\forall z_i} f = f(0, \\dots) \\cdot f(1, \\dots)$.\n    The entire formula $\\Phi$ evaluates to a final integer value, let's call it $V$. The formula $\\Phi$ is true if and only if $V \\neq 0$.\n\n3.  **Interactive Protocol:** The protocol eliminates one quantifier at a time, from outermost to innermost ($x_1, x_2, x_3$).\n    -   Let the claim at step $i-1$ be $C_{i-1}$, which states that $(\\mathcal{O}_{Q_i x_i} \\dots \\mathcal{O}_{Q_n x_n} P)(r_1, \\dots, r_{i-1}) = k_{i-1}$ (for $i=1$, this is the initial claim about the value $V=k_0$).\n    -   At step $i$, the Prover sends a univariate polynomial $S_i(z_i)$ which it claims is equal to $(\\mathcal{O}_{Q_{i+1} x_{i+1}} \\dots \\mathcal{O}_{Q_n x_n} P)(r_1, \\dots, r_{i-1}, z_i)$.\n    -   The Verifier checks if $S_i(z_i)$ is consistent with the previous claim $C_{i-1}$ by applying the operator $\\mathcal{O}_{Q_i}$ to $S_i(z_i)$ and comparing with $k_{i-1}$.\n    -   If consistent, the Verifier picks a random value $r_i$ from the field and forms the new claim $C_i$: $(\\mathcal{O}_{Q_{i+1} x_{i+1}} \\dots \\mathcal{O}_{Q_n x_n} P)(r_1, \\dots, r_i) = S_i(r_i)$. The value $S_i(r_i)$ becomes the new target value $k_i$.\n\nAfter the protocol eliminates all three quantifiers, $x_1, x_2,$ and $x_3$, by picking random values $r_1, r_2,$ and $r_3$ respectively, the Verifier is left with a final claim to check. This final claim states that $P(r_1, r_2, r_3)$ is equal to a specific value determined by the polynomials exchanged during the protocol.\n\nYour task is to determine the expression for this value, which $P(r_1, r_2, r_3)$ is claimed to be equal to. Express your answer as a polynomial in terms of the symbolic random values $r_1, r_2,$ and $r_3$.",
            "solution": "We first arithmetize the body $\\phi(x_{1},x_{2},x_{3})=(x_{1}\\lor \\neg x_{2})\\land(\\neg x_{1}\\lor x_{3})$ using $\\neg z\\mapsto 1-z$, $z_{1}\\land z_{2}\\mapsto z_{1}z_{2}$, $z_{1}\\lor z_{2}\\mapsto z_{1}+z_{2}-z_{1}z_{2}$. This yields\n$$\nP(x_{1},x_{2},x_{3})=\\bigl(x_{1}+(1-x_{2})-x_{1}(1-x_{2})\\bigr)\\cdot\\bigl((1-x_{1})+x_{3}-(1-x_{1})x_{3}\\bigr).\n$$\nSimplify each factor:\n$$\nx_{1}+(1-x_{2})-x_{1}(1-x_{2})=1-x_{2}+x_{1}x_{2},\n$$\n$$\n(1-x_{1})+x_{3}-(1-x_{1})x_{3}=1-x_{1}+x_{1}x_{3}.\n$$\nHence\n$$\nP(x_{1},x_{2},x_{3})=(1-x_{2}+x_{1}x_{2})(1-x_{1}+x_{1}x_{3}).\n$$\nExpand and use $x_{i}^{2}=x_{i}$ for boolean variables:\n$$\n\\begin{aligned}\nP=(1)(1-x_{1}+x_{1}x_{3})+(-x_{2})(1-x_{1}+x_{1}x_{3})+(x_{1}x_{2})(1-x_{1}+x_{1}x_{3})\\\\\n=1-x_{1}+x_{1}x_{3}-x_{2}+x_{1}x_{2}-x_{1}x_{2}x_{3}+x_{1}x_{2}-x_{1}^{2}x_{2}+x_{1}^{2}x_{2}x_{3}\\\\\n=1-x_{1}+x_{1}x_{3}-x_{2}+2x_{1}x_{2}-x_{1}x_{2}-x_{1}x_{2}x_{3}+x_{1}x_{2}x_{3}\\\\\n=1-x_{1}-x_{2}+x_{1}x_{2}+x_{1}x_{3}.\n\\end{aligned}\n$$\nIn the interactive protocol, after choosing random field elements $r_{1}$, $r_{2}$, $r_{3}$ for $x_{1}$, $x_{2}$, $x_{3}$ respectively, the final claim to be checked is that $P(r_1, r_2, r_3) = k_3$, where $k_3$ is the value received from the prover in the last step. For an honest prover, this value would be $k_3 = S_3(r_3) = P(r_1, r_2, r_3)$.\nThe question asks for the expression which $P(r_1, r_2, r_3)$ is claimed to be equal to. For an honest prover, this is the evaluation of the polynomial $P$ at the random points. Substituting $r_1, r_2, r_3$ into the simplified expression for $P$ gives:\n$$\nP(r_{1},r_{2},r_{3})=1-r_{1}-r_{2}+r_{1}r_{2}+r_{1}r_{3}.\n$$\nThis is the specific value that the verifier computes and compares against the prover's final claim.",
            "answer": "$$\\boxed{1-r_{1}-r_{2}+r_{1}r_{2}+r_{1}r_{3}}$$"
        },
        {
            "introduction": "Why is randomness so critical in interactive proofs? This exercise  explores this question by presenting a hypothetical scenario where the Verifier's choices are predictable. By taking on the role of a dishonest Prover, you will learn how to exploit this flaw to 'prove' a false statement, thereby gaining a deeper appreciation for how randomness protects the integrity of the protocol against powerful but untrustworthy provers.",
            "id": "1447618",
            "problem": "In the study of computational complexity, Shamir's Theorem states that the class of problems with Interactive Proof systems ($\\mathbf{IP}$) is equal to the class of problems solvable in Polynomial Space ($\\mathbf{PSPACE}$). A key part of this theorem's proof is an interactive protocol for the True Quantified Boolean Formula (TQBF) problem, which is $\\mathbf{PSPACE}$-complete.\n\nThis protocol involves a process called arithmetization. A Quantified Boolean Formula (QBF) is converted into a polynomial expression over a finite field $\\mathbb{F}_p$. Boolean variables $x_i \\in \\{0, 1\\}$ are treated as field elements. The logical operations are converted as follows: $\\neg x$ becomes $1-x$, $a \\land b$ becomes $ab$, and $a \\lor b$ becomes $a+b-ab$. Quantifiers are also arithmetized: $\\exists x_i f(x_i, \\dots)$ is replaced by the operation $f(0, \\dots)+f(1, \\dots)-f(0, \\dots)f(1, \\dots)$, and $\\forall x_i f(x_i, \\dots)$ is replaced by a product $\\prod_{x_i \\in \\{0,1\\}} f(x_i, \\dots)$. A QBF is true if and only if its arithmetized form evaluates to 1.\n\nConsider the following QBF, which is known to be false:\n$$ \\phi = \\exists x_1 \\forall x_2 (x_1 \\leftrightarrow x_2) $$\nThe arithmetization of the inner clause $(x_1 \\leftrightarrow x_2)$ is the polynomial $P(x_1, x_2) = 2x_1x_2 - x_1 - x_2 + 1$. The entire formula $\\phi$ correctly evaluates to 0.\n\nAn all-powerful but dishonest prover, Merlin, wants to convince a verifier, Arthur, that the value of $\\phi$ is 1. The protocol operates over the finite field $\\mathbb{F}_{101}$.\n\nThe protocol proceeds in rounds, one for each variable, from outermost to innermost.\n1.  **Round 1 ($\\exists x_1$):**\n    The arithmetization of the subformula $\\forall x_2 (x_1 \\leftrightarrow x_2)$ results in a polynomial in $x_1$, which we call $P_1(x_1)$. Merlin is supposed to send this polynomial to Arthur. Since the quantifier is $\\exists x_1$, Arthur would check if $P_1(0) + P_1(1) - P_1(0)P_1(1)$ equals the claimed value of $\\phi$. Instead, Merlin sends a (potentially fraudulent) polynomial $P'_1(z)$. Arthur checks if $P'_1(0) + P'_1(1) - P'_1(0)P'_1(1) = 1$. If this check fails, Arthur rejects.\n2.  If the check passes, Arthur picks a value $c_1 \\in \\mathbb{F}_{101}$ and sends it to Merlin. The protocol then continues on the sub-problem of verifying that $P_1(c_1)$ equals the value $P'_1(c_1)$ computed by Arthur.\n\nA particular implementation of Arthur is flawed: instead of choosing a random $c_1$, it always picks the predetermined value $c_1 = 5$. Merlin is aware of this flaw. To construct a successful deception, Merlin crafts a fraudulent polynomial $P'_1(z)$ that must satisfy two conditions:\n(i) It must pass Arthur's initial check based on the quantifier.\n(ii) It must agree with the true polynomial $P_1(z)$ at the specific point Arthur will check, i.e., $P'_1(5) = P_1(5)$. This ensures Merlin's lie is not immediately exposed.\n\nMerlin constructs his fraudulent polynomial to be of the form $P'_1(z) = az^2 + bz$. Determine the unique integer coefficients $a$ and $b$ (where $0 \\le a, b \\le 100$) that Merlin must use.",
            "solution": "First, we determine the true polynomial $P_1(x_1)$ corresponding to the subformula $\\forall x_2 (x_1 \\leftrightarrow x_2)$. The arithmetization of the clause $x_1 \\leftrightarrow x_2$ is given as $P(x_1,x_2)=2x_1x_2-x_1-x_2+1$. For the universal quantifier, we compute the product over $x_2 \\in \\{0,1\\}$:\n$$\nP_1(x_1)=\\prod_{x_2 \\in \\{0,1\\}}P(x_1,x_2)=P(x_1,0)\\cdot P(x_1,1).\n$$\nCompute each factor:\n$$\nP(x_1,0)=2x_1(0) - x_1 - 0 + 1 = 1 - x_1\n$$\n$$\nP(x_1,1)=2x_1(1) - x_1 - 1 + 1 = x_1\n$$\nHence, the true polynomial is\n$$\nP_1(x_1)=(1-x_1)x_1=x_1-x_1^2.\n$$\nThe value of the full formula $\\phi$ is $P_1(0)+P_1(1)-P_1(0)P_1(1) = (0-0)+(1-1)-(0)(0) = 0$, confirming it is false.\n\nMerlin sends the fraudulent polynomial $P'_1(z)=az^2+bz$ and wants to convince Arthur that the value is 1. Merlin must satisfy two conditions:\n(i) Arthur’s existential check: $P'_1(0)+P'_1(1)-P'_1(0)P'_1(1) \\equiv 1 \\pmod{101}$.\nWe compute the values: $P'_1(0)=a(0)^2+b(0)=0$ and $P'_1(1)=a(1)^2+b(1)=a+b$.\nSubstituting these into the check: $0 + (a+b) - 0 \\cdot (a+b) = a+b \\equiv 1 \\pmod{101}$.\n\n(ii) Agreement at Arthur’s fixed choice $c_1=5$: $P'_1(5)=P_1(5)$.\nFirst, compute the value of the true polynomial at $z=5$:\n$$\nP_1(5)=5-5^2=5-25=-20 \\equiv 81 \\pmod{101}.\n$$\nNow, compute the value of Merlin's polynomial at $z=5$:\n$$\nP'_1(5)=a(5^2)+b(5)=25a+5b.\n$$\nSetting them equal gives the second equation: $25a+5b \\equiv 81 \\pmod{101}$.\n\nWe now solve the linear system over $\\mathbb{F}_{101}$:\n$$\n\\begin{cases}\na+b \\equiv 1 \\\\\n25a+5b \\equiv 81\n\\end{cases}\n$$\nFrom the first equation, $b \\equiv 1-a$. Substitute this into the second equation:\n$$\n25a+5(1-a) \\equiv 81 \\implies 25a+5-5a \\equiv 81 \\implies 20a \\equiv 76 \\pmod{101}.\n$$\nTo solve for $a$, we need the multiplicative inverse of $20$ modulo $101$. Using the extended Euclidean algorithm, we find $1 = 101 - 5 \\cdot 20$, so $20^{-1} \\equiv -5 \\equiv 96 \\pmod{101}$.\n$$\na \\equiv 76 \\cdot 96 \\equiv 7296 \\equiv 24 \\pmod{101}.\n$$\nNow find $b$:\n$$\nb \\equiv 1-a \\equiv 1-24 \\equiv -23 \\equiv 78 \\pmod{101}.\n$$\nThe unique coefficients are $a=24$ and $b=78$.",
            "answer": "$$\\boxed{\\begin{pmatrix}24  78\\end{pmatrix}}$$"
        }
    ]
}