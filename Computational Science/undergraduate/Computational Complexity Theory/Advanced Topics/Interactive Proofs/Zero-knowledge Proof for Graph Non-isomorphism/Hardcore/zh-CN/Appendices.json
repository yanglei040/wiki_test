{
    "hands_on_practices": [
        {
            "introduction": "要真正理解一个密码学协议的强度，我们必须首先分析其最薄弱的环节。第一个练习将让你扮演一个试图欺骗系统的攻击者角色 。通过计算一个作弊证明者在单轮交互中的最大成功概率，你将掌握图非同构协议的基本健全性（soundness）。",
            "id": "1469892",
            "problem": "在理论计算机科学领域，交互式证明系统允许一个计算能力强大的证明者（Prover）说服一个计算能力有限的验证者（Verifier）相信一个数学陈述的真实性。考虑以下旨在证明两个图 $G_1$ 和 $G_2$ 是非同构的交互式协议。\n\n证明者 Alice 向验证者 Bob 声称两个特定的图 $G_1$ 和 $G_2$ 是非同构的。为了说服 Bob，他们执行一轮以下协议：\n\n1.  **Bob 的步骤**：Bob 从集合 $\\{1, 2\\}$ 中均匀随机地选择一个索引 $i$。然后，他通过对他选择的图 $G_i$ 的顶点标签应用一个随机置换来创建一个新图 $H$。这意味着 $H$ 与 $G_i$同构，但其顶点标签被打乱了。Bob 只将图 $H$ 发送给 Alice。\n\n2.  **Alice 的步骤**：Alice 收到图 $H$。假设她拥有无限的计算能力。她必须确定原始图 $G_1$ 或 $G_2$ 中的哪一个与 $H$同构。她将她的答案，一个索引 $j \\in \\{1, 2\\}$，发回给 Bob。\n\n3.  **Bob 的验证**：Bob 检查 Alice 返回的索引 $j$ 是否与他秘密选择的索引 $i$ 匹配。如果 $j=i$，则该轮成功。如果 $j \\neq i$，则该轮失败，Bob 拒绝 Alice 的声称。\n\n现在，假设 Alice 试图作弊。实际上，两个图 $G_1$ 和 $G_2$ 是同构的，这个事实 Alice 知道但 Bob 不知道。Alice 仍然声称图是非同构的，并参与协议，希望能通过验证步骤。\n\n假设 Alice 采用最佳策略来确定她的回应 $j$，她能成功完成这一轮协议的概率是多少？\n\nA. 0\n\nB. $\\frac{1}{4}$\n\nC. $\\frac{1}{2}$\n\nD. $\\frac{3}{4}$\n\nE. 1",
            "solution": "设 $G_{1}$ 和 $G_{2}$ 是顶点集大小同为 $n$ 的图，且 $G_{1} \\simeq G_{2}$。设 $I \\in \\{1,2\\}$ 是 Bob 的均匀随机选择，因此 $\\Pr(I=i)=\\frac{1}{2}$。设 $\\Pi$ 是对称群 $S_{n}$ 中的一个均匀随机置换，且与 $I$ 无关。Bob 构建 $H=\\Pi(G_{I})$ 并将 $H$ 发送给 Alice。\n\n因为 $G_{1} \\simeq G_{2}$，所以存在一个置换 $\\sigma \\in S_{n}$ 使得 $G_{2}=\\sigma(G_{1})$。对于任意一个有 $n$ 个顶点的标记图 $h$，\n$$\n\\Pr(H=h \\mid I=2)=\\Pr(\\Pi(G_{2})=h)=\\Pr(\\Pi(\\sigma(G_{1}))=h).\n$$\n定义 $\\Pi'=\\Pi \\circ \\sigma$，我们知道当 $\\Pi$ 在 $S_{n}$ 上均匀分布时，$\\Pi'$ 也是均匀分布的，因此\n$$\n\\Pr(H=h \\mid I=2)=\\Pr(\\Pi'(G_{1})=h)=\\Pr(H=h \\mid I=1).\n$$\n因此，给定 $I=1$ 和 $I=2$ 时 $H$ 的条件分布是相同的。根据贝叶斯法则，对于任何满足 $\\Pr(H=h)>0$ 的 $h$，\n$$\n\\Pr(I=i \\mid H=h)=\\frac{\\Pr(H=h \\mid I=i)\\Pr(I=i)}{\\sum_{k=1}^{2}\\Pr(H=h \\mid I=k)\\Pr(I=k)}=\\frac{a \\cdot \\frac{1}{2}}{a \\cdot \\frac{1}{2}+a \\cdot \\frac{1}{2}}=\\frac{1}{2},\n$$\n其中 $a=\\Pr(H=h \\mid I=1)=\\Pr(H=h \\mid I=2)$。\n\n设 Alice 的（可能是随机化的）策略是根据某个条件分布 $\\Pr(J=j \\mid H=h)$ 输出 $J \\in \\{1,2\\}$。成功概率为\n$$\n\\Pr(J=I)=\\sum_{h}\\Pr(H=h)\\sum_{i=1}^{2}\\Pr(I=i \\mid H=h)\\Pr(J=i \\mid H=h).\n$$\n对两个 $i$ 都使用 $\\Pr(I=i \\mid H=h)=\\frac{1}{2}$，\n$$\n\\Pr(J=I)=\\sum_{h}\\Pr(H=h)\\left(\\frac{1}{2}\\sum_{i=1}^{2}\\Pr(J=i \\mid H=h)\\right)=\\sum_{h}\\Pr(H=h)\\left(\\frac{1}{2}\\cdot 1\\right)=\\frac{1}{2}.\n$$\n因此，没有任何策略可以达到超过 $\\frac{1}{2}$ 的成功概率，而这个概率可以通过随机猜测达到。因此，当 $G_{1}$ 和 $G_{2}$ 同构时，Alice 的最佳成功概率是 $\\frac{1}{2}$，对应于选项 C。",
            "answer": "$$\\boxed{C}$$"
        },
        {
            "introduction": "许多交互式证明的安全性都建立在精心设计的“不确定性”之上。这个练习通过一个关键的失效模式，探讨了当验证者的挑战不再是随机而是可预测时，会发生什么 。分析这个假设情景将揭示为什么随机性不是一个随意的设计，而是协议健全性的根本基石。",
            "id": "1469924",
            "problem": "在理论计算机科学领域，零知识证明（Zero-Knowledge Proof, ZKP）是一种方法，通过该方法，一方（证明者）可以向另一方（验证者）证明某个陈述为真，而除了该陈述确实为真这一事实之外，不泄露任何额外信息。\n\n考虑一个经典的零知识证明，用于证明两个图 $G_1$ 和 $G_2$ 是**非同构**的。该协议涉及一个证明者 Alice，她知道这两个图是非同构的，以及一个验证者 Bob。该协议按轮次进行，如下所示：\n1.  Alice 随机选择两个图中的一个，$G_i$，其中 $i \\in \\{1, 2\\}$。\n2.  然后，她通过对所选图 $G_i$ 的顶点应用一个随机置换 $\\pi$ 来创建一个新图 $H$。这使得 $H$ 与 $G_i$ 同构。\n3.  Alice 将图 $H$ 发送给 Bob。\n4.  Bob 拥有 $G_1$ 和 $G_2$ 两个图，他接收图 $H$ 后，随机选择一个挑战 $j \\in \\{1, 2\\}$。他要求 Alice 提供一个 $H$ 和 $G_j$ 之间的同构。\n5.  Alice 遵从要求。如果她最初的选择 $i$ 与 Bob 的挑战 $j$ 匹配，她就能提供这个同构。如果 $i \\neq j$，只有当 $G_1$ 和 $G_2$ 实际上是同构时，她才能提供这个同构。\n6.  Bob 验证这个同构。如果有效，则该轮成功。此过程会重复多次，以降低作弊的证明者成功的概率。\n\n现在，假设验证者 Bob 决定修改协议。他不再在每一轮中随机选择挑战 $j$（步骤4），而是使用一个公开已知的、确定性的序列。例如，对于轮次序列 $k = 1, 2, 3, 4, \\dots$，他分别将挑战设置为 $j=1, j=2, j=1, j=2, \\dots$。\n\n假设一个恶意的证明者 Eve，试图让 Bob 相信两个图 $G_1$ 和 $G_2$ 是非同构的，而实际上它们**是**同构的。Bob 使用确定性挑战序列的行为，严重损害了零知识证明的哪一个基本属性，从而让 Eve 得以成功作弊？\n\nA. 完备性（Completeness）：如果陈述为真，诚实的证明者总能说服诚实的验证者。\n\nB. 可靠性（Soundness）：如果陈述为假，作弊的证明者只有可忽略的概率能说服验证者。\n\nC. 零知识性（Zero-Knowledge）：验证者除了陈述为真这一事实外，学不到任何其他东西。\n\nD. 同构不变性（Isomorphism Invariance）：证明结果与图的特定顶点标记无关。",
            "solution": "我们首先回顾零知识证明的三个核心属性：完备性（completeness）（如果陈述为真，诚实的证明者能以高概率说服诚实的验证者），可靠性（soundness）（如果陈述为假，任何作弊的证明者都无法说服验证者，除非以可忽略的概率），以及零知识性（zero-knowledge）（验证者除了陈述的真实性之外学不到任何东西）。\n\n在所讨论的标准交互式协议结构中，防止作弊证明者的关键保护措施是，在证明者提交消息（这里是图 $H$）以固定其之后可以揭示的内容时，验证者的挑战对证明者是不可预测的。形式上，如果图实际上是同构的（即“非同构”这一陈述为假），并且一个恶意的证明者不知道 $G_{1}$ 和 $G_{2}$ 之间的同构关系，那么在发送 $H$（构造为两个图之一的随机置换）之后，证明者只有在挑战 $j$ 与其用来构造 $H$ 的索引 $i$ 一致时，才能正确回答挑战。在一个均匀随机的挑战下，这会得到\n$$\n\\Pr[\\text{accept in a round}] = \\frac{1}{2},\n$$\n在 $t$ 个独立轮次中，\n$$\n\\Pr[\\text{accept in } t \\text{ rounds}] = \\left(\\frac{1}{2}\\right)^{t} = 2^{-t},\n$$\n这在 $t$ 上是可忽略的。这正是可靠性的保证：当陈述为假时，任何作弊证明者成功的概率都是可忽略的。\n\n现在，假设验证者将随机挑战替换为一个公开已知的确定性序列，例如按轮次为 $j=1,2,1,2,\\dots$。那么，证明者在每轮发送 $H$ 之前，就预先知道了将被问到的 $j$。一个恶意的证明者可以在每轮中设置 $i=j$，将 $H$ 构造为 $G_{j}$ 的一个随机置换，从而总能在被挑战时生成 $H$ 和 $G_{j}$ 之间的同构。这使得\n$$\n\\Pr[\\text{accept in a round}] = 1 \\quad \\text{and} \\quad \\Pr[\\text{accept in } t \\text{ rounds}] = 1,\n$$\n即使陈述为假。因此，通过使挑战具有确定性和可预测性而受到严重损害的属性是可靠性：当陈述为假时，作弊证明者说服验证者的概率不再是可忽略的；在这种攻击下，它变成了 $1$。\n\n完备性在这里不是问题（当陈述为真时，诚实的证明者仍然能够说服验证者），而零知识性在这种情况下也不受验证者挑战的确定性的直接影响。“同构不变性”不是零知识证明的三个基本属性之一，在这里也不是相关的保证。因此，被损害的属性是可靠性。",
            "answer": "$$\\boxed{B}$$"
        },
        {
            "introduction": "单轮证明的成功可能归因于运气，但连续十二次成功呢？这个练习从单轮分析转向“健全性放大”（soundness amplification）的概念，这是在概率性证明中建立高度信心的基石 。通过应用贝叶斯推理，你将量化重复交互如何迅速将怀疑转变为近乎确定性的信任。",
            "id": "1469933",
            "problem": "一家名为 “GraphGuard” 的网络安全公司正在开发一种验证数字身份的新方法。该系统的核心依赖于图同构问题的计算难度。一位名叫 Alice 的工程师向她的经理 Bob 展示了两个大型复杂的网络图 $G_1$ 和 $G_2$。Alice 声称这两个图是非同构的，这是她提出的安全协议的一个关键要求。\n\nBob 对此表示怀疑。根据他以往使用类似图生成算法的经验，他认为 Alice 是正确的且图是非同构的概率为 50%，而图实际上是同构的概率也为 50%。为了检验 Alice 的说法，他们同意进行以下将重复多次的交互式挑战：\n\n1.  Bob 秘密地以等概率随机选择两个图中的一个，即 $G_1$ 或 $G_2$。\n2.  然后，他通过随机置换所选图的顶点标签来生成一个新图 $H$。这个过程确保了 $H$ 与他选择的图同构，但其结构被打乱了。\n3.  Bob 只将图 $H$ 展示给 Alice。\n4.  Alice 必须判断 $H$ 是与 $G_1$ 同构还是与 $G_2$ 同构。\n\n假设如果图 $G_1$ 和 $G_2$ 确实是非同构的，Alice 的先进系统能够以 100% 的准确率正确识别出 $H$ 的来源。然而，如果这两个图实际上是同构的，即使是她的系统也无法区分它们，她只能靠猜测，这使得她在任何一次挑战中答对的概率为 50%。\n\n他们连续进行了 $k=12$ 轮挑战，Alice 每一次都给出了正确的答案。Bob 对图 $G_1$ 和 $G_2$ 确实是非同构的新的置信度（以概率表示）是多少？\n\n请以小数值形式提供您的答案，并四舍五入到四位有效数字。",
            "solution": "设假设如下：\n- $H_{\\mathrm{NI}}$：$G_{1}$ 和 $G_{2}$ 是非同构的。\n- $H_{\\mathrm{I}}$：$G_{1}$ 和 $G_{2}$ 是同构的。\n\nBob 的先验信念为 $P(H_{\\mathrm{NI}})=\\frac{1}{2}$ 和 $P(H_{\\mathrm{I}})=\\frac{1}{2}$。\n\n在每一轮中，如果 $H_{\\mathrm{NI}}$ 为真，Alice 回答正确的概率为 $1$。如果 $H_{\\mathrm{I}}$ 为真，Alice 回答正确的概率为 $\\frac{1}{2}$。在所有答案均正确的 $k=12$ 次独立轮次中，似然值为\n$$\nP(\\text{all 12 correct}\\mid H_{\\mathrm{NI}})=1^{12}=1,\n$$\n$$\nP(\\text{all 12 correct}\\mid H_{\\mathrm{I}})=\\left(\\frac{1}{2}\\right)^{12}=2^{-12}.\n$$\n\n根据贝叶斯定理，图是非同构的后验概率为\n$$\nP(H_{\\mathrm{NI}}\\mid \\text{all 12 correct})=\\frac{P(\\text{all 12 correct}\\mid H_{\\mathrm{NI}})P(H_{\\mathrm{NI}})}{P(\\text{all 12 correct}\\mid H_{\\mathrm{NI}})P(H_{\\mathrm{NI}})+P(\\text{all 12 correct}\\mid H_{\\mathrm{I}})P(H_{\\mathrm{I}})}.\n$$\n代入数值，\n$$\nP(H_{\\mathrm{NI}}\\mid \\text{all 12 correct})=\\frac{1\\cdot \\frac{1}{2}}{1\\cdot \\frac{1}{2}+2^{-12}\\cdot \\frac{1}{2}}=\\frac{1}{1+2^{-12}}=\\frac{4096}{4097}.\n$$\n\n以小数表示并四舍五入到四位有效数字，\n$$\n\\frac{4096}{4097}\\approx 0.9998.\n$$",
            "answer": "$$\\boxed{0.9998}$$"
        }
    ]
}