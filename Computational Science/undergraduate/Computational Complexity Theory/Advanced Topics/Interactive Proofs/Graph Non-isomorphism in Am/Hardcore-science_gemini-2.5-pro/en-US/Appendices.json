{
    "hands_on_practices": [
        {
            "introduction": "Understanding a complex protocol often begins with appreciating why simpler alternatives fail. This first exercise  examines a simplified version of the Graph Non-Isomorphism protocol where a crucial step—the random permutation—is omitted. By identifying the fundamental flaw in this simplified design, you will gain a deeper insight into why randomization is the cornerstone of security in Arthur-Merlin interactions, effectively concealing Arthur's secret from an all-powerful Merlin.",
            "id": "1426162",
            "problem": "In computational complexity theory, an Arthur-Merlin (AM) protocol is a type of interactive proof system where a probabilistic polynomial-time verifier (Arthur) interacts with an all-powerful, but potentially untrustworthy, prover (Merlin). The protocol is for a language $L$. For any input string $x$:\n- If $x \\in L$ (Completeness), an honest Merlin should be able to convince Arthur to accept with probability at least $2/3$.\n- If $x \\notin L$ (Soundness), no prover, no matter how they cheat, should be able to convince Arthur to accept with probability greater than $1/3$.\n\nConsider the Graph Non-Isomorphism (GNI) problem, which is the language of all pairs of graphs $(G_1, G_2)$ that are not isomorphic. Two graphs are isomorphic if they are structurally identical, meaning there is a one-to-one mapping of their vertices that preserves adjacency.\n\nA student proposes the following simplified protocol to prove that a given pair of graphs, $G_1 = (V, E_1)$ and $G_2 = (V, E_2)$, are not isomorphic:\n\n1.  **Arthur's Move:** Arthur receives the pair $(G_1, G_2)$. He randomly and uniformly chooses an index $i \\in \\{1, 2\\}$.\n2.  **Arthur's Challenge:** Arthur sends the complete description of the graph $G_i$ (i.e., the set of vertices and the set of edges) to Merlin.\n3.  **Merlin's Response:** Merlin, who has unlimited computational power, receives the graph from Arthur and responds with a single index $j \\in \\{1, 2\\}$.\n4.  **Arthur's Verdict:** Arthur accepts if Merlin's response $j$ is identical to his hidden choice $i$. Otherwise, he rejects.\n\nWhat is the fundamental flaw in this proposed protocol?\n\nA. The protocol fails the completeness property. If the graphs $G_1$ and $G_2$ are not isomorphic, an honest Merlin cannot reliably convince Arthur to accept.\n\nB. The protocol is computationally infeasible for Arthur. Sending a full graph description, such as an adjacency matrix, takes exponential time in the number of vertices.\n\nC. The protocol fails the soundness property. If the graphs $G_1$ and $G_2$ are isomorphic, a cheating Merlin can always determine Arthur's choice $i$ and win, causing Arthur to always accept a false statement.\n\nD. The protocol is impractical because Merlin is required to solve the Graph Isomorphism problem to formulate his response, and this problem is not known to be solvable in polynomial time.\n\nE. The protocol has a soundness error of exactly $1/2$, which is too high to meet the standard definition of an AM protocol.",
            "solution": "We analyze the proposed protocol against the AM properties.\n\nBy definition of AM for language $L$, for every input $x$:\n- Completeness: If $x \\in L$, there exists a prover strategy such that the verifier accepts with probability at least $\\frac{2}{3}$.\n- Soundness: If $x \\notin L$, for every prover strategy the verifier accepts with probability at most $\\frac{1}{3}$.\n\nHere, $L$ is the Graph Non-Isomorphism (GNI) language. The input is a pair of graphs $(G_{1},G_{2})$ on a common labeled vertex set $V$.\n\nIn the proposed protocol:\n1. Arthur chooses $i \\in \\{1,2\\}$ uniformly at random.\n2. Arthur sends the complete description of $G_{i}$ to Merlin (including labels).\n3. Merlin returns $j \\in \\{1,2\\}$.\n4. Arthur accepts iff $j=i$.\n\nConsider completeness when $G_{1} \\not\\cong G_{2}$. Merlin receives the exact labeled graph $G_{i}$ and has the full descriptions of $G_{1}$ and $G_{2}$ from the input instance. Merlin can perform a simple equality check with labels to determine whether the received graph equals $G_{1}$ or $G_{2}$. Hence Merlin can always output the correct $j=i$, yielding\n$$\n\\Pr[\\text{Arthur accepts} \\mid G_{1} \\not\\cong G_{2}] = 1,\n$$\nso completeness holds.\n\nConsider soundness when $G_{1} \\cong G_{2}$. Arthur sends the exact labeled graph $G_{i}$, not a randomly permuted isomorphic copy. If $G_{1} \\neq G_{2}$ as labeled graphs, Merlin again can compare the received labeled graph to the two input descriptions and determine $i$ with certainty, so\n$$\n\\Pr[\\text{Arthur accepts} \\mid G_{1} \\cong G_{2},\\, G_{1} \\neq G_{2}] = 1,\n$$\nwhich violates soundness since $1 > \\frac{1}{3}$. Even in the special case $G_{1}=G_{2}$ as labeled graphs, Merlin cannot distinguish $i$ and can do no better than guessing, giving\n$$\n\\Pr[\\text{Arthur accepts} \\mid G_{1} = G_{2}] = \\frac{1}{2},\n$$\nwhich still violates the required $\\frac{1}{3}$ soundness bound. Therefore the fundamental flaw is failure of soundness.\n\nAlternative options are incorrect: sending a full graph description is polynomial-time in $|V|$ (e.g., an adjacency matrix has size on the order of $|V|^{2}$), so it is not computationally infeasible; completeness does not fail; and appealing to the difficulty of Graph Isomorphism is irrelevant because Merlin is computationally unbounded and, in fact, does not need to solve Graph Isomorphism here to answer.\n\nHence the correct choice is that the protocol fails the soundness property because sending the unpermuted $G_{i}$ leaks Arthur’s choice to Merlin.",
            "answer": "$$\\boxed{C}$$"
        },
        {
            "introduction": "Now that we understand the necessity of randomization, let's quantify its effectiveness. This practice  delves into the core of the protocol's soundness by analyzing the \"no\" instance, where the two input graphs are, in fact, isomorphic. Your task is to determine the absolute best-case success probability for a \"cheating\" Merlin, which demonstrates mathematically how the protocol's design limits his ability to deceive Arthur.",
            "id": "1426161",
            "problem": "In computational complexity theory, an Arthur-Merlin (AM) protocol describes a class of interactive proof systems. Consider the following two-round protocol designed to solve the Graph Non-Isomorphism (GNI) problem. The protocol involves two parties: Arthur, a verifier with access to a source of random bits, and Merlin, a computationally all-powerful prover.\n\nThe protocol takes as input two simple, undirected graphs, $G_0 = (V, E_0)$ and $G_1 = (V, E_1)$, which share the same set of $n$ vertices, $V$.\n\nThe protocol proceeds as follows:\n1.  Arthur secretly and uniformly at random selects an index $i \\in \\{0, 1\\}$.\n2.  Arthur generates a permutation $\\pi$ of the vertex set $V$, chosen uniformly at random from the set of all $n!$ possible permutations.\n3.  Arthur constructs a new graph $H$ by applying the permutation $\\pi$ to the graph $G_i$. The vertex set of $H$ is $V$, and an edge $(u, v)$ exists in $H$ if and only if the edge $(\\pi^{-1}(u), \\pi^{-1}(v))$ exists in $G_i$.\n4.  Arthur sends only the graph $H$ to Merlin.\n5.  Merlin, upon receiving $H$, must determine which of the original graphs, $G_0$ or $G_1$, served as the template for $H$. Merlin sends back his proposed index, $j \\in \\{0, 1\\}$, to Arthur.\n6.  Arthur accepts if Merlin's response $j$ is identical to Arthur's secret index $i$. Otherwise, Arthur rejects.\n\nNow, consider the specific scenario where the input graphs $G_0$ and $G_1$ are isomorphic to each other. In this case, Merlin is considered to be \"cheating,\" as he attempts to convince Arthur to accept even though the input pair $(G_0, G_1)$ is not a \"yes\" instance of the GNI problem.\n\nAssuming Merlin uses an optimal strategy to maximize his probability of success, what is the exact probability that Arthur will accept Merlin's response? Express your answer as a decimal.",
            "solution": "Let $G_{0}$ and $G_{1}$ be isomorphic. Then there exists a permutation $\\varphi$ of $V$ such that $G_{1} = \\varphi(G_{0})$. Let $I \\in \\{0,1\\}$ be Arthur’s secret bit chosen uniformly at random, let $\\Pi$ be a uniformly random permutation of $V$, and let $H = \\Pi(G_{I})$ be the graph sent to Merlin.\n\nWe first show that the distribution of $H$ does not depend on $I$. For any labeled graph $h$ on $V$,\n$$\n\\Pr(H = h \\mid I = 1) \\;=\\; \\Pr(\\Pi(G_{1}) = h) \\;=\\; \\Pr(\\Pi(\\varphi(G_{0})) = h) \\;=\\; \\Pr((\\Pi \\circ \\varphi)(G_{0}) = h).\n$$\nDefine $\\Pi' = \\Pi \\circ \\varphi$. Since composition with the fixed bijection $\\varphi$ is a bijection on the set of all permutations, $\\Pi'$ is uniformly distributed over all permutations whenever $\\Pi$ is. Hence\n$$\n\\Pr(H = h \\mid I = 1) \\;=\\; \\Pr(\\Pi'(G_{0}) = h) \\;=\\; \\Pr(H = h \\mid I = 0).\n$$\nTherefore, $H$ has the same distribution under $I=0$ and $I=1$, implying that $I$ and $H$ are independent and, by Bayes’ rule, for any $h$ with $\\Pr(H=h)>0$,\n$$\n\\Pr(I = 0 \\mid H = h) \\;=\\; \\Pr(I = 1 \\mid H = h) \\;=\\; \\frac{1}{2}.\n$$\n\nMerlin’s goal is to output $J \\in \\{0,1\\}$ maximizing $\\Pr(J = I)$. Any (possibly randomized) strategy for Merlin maps $H$ to a distribution over $\\{0,1\\}$. Given that $\\Pr(I = j \\mid H = h) = \\frac{1}{2}$ for both $j$, the optimal choice (deterministic or randomized) achieves\n$$\n\\Pr(J = I \\mid H = h) \\;=\\; \\max_{j \\in \\{0,1\\}} \\Pr(I = j \\mid H = h) \\;=\\; \\frac{1}{2}.\n$$\nAveraging over $H$ yields\n$$\n\\Pr(\\text{Arthur accepts}) \\;=\\; \\mathbb{E}_{H}\\!\\left[\\Pr(J = I \\mid H)\\right] \\;=\\; \\frac{1}{2}.\n$$\n\nThus, even under an optimal strategy, when $G_{0}$ and $G_{1}$ are isomorphic, Merlin’s success probability is exactly one half, which as a decimal is $0.5$.",
            "answer": "$$\\boxed{0.5}$$"
        },
        {
            "introduction": "Transitioning from theoretical analysis to concrete application is key to mastering any algorithm. This final exercise  asks you to step into the roles of both Arthur and Merlin and execute one round of the protocol for a specific pair of non-isomorphic graphs. By manually applying the permutation to create the challenge graph and then determining Merlin's correct response, you will solidify your understanding of the protocol's mechanics in a tangible, computational setting.",
            "id": "61686",
            "problem": "The Graph Non-Isomorphism (GNI) problem is the problem of deciding whether two given graphs are non-isomorphic. It belongs to the complexity class co-NP. An important result in complexity theory shows that GNI has an interactive proof system, placing it in the class IP, and in fact in the smaller class AM (Arthur-Merlin).\n\nAn interactive proof system for GNI involves a powerful Prover (Merlin) who wants to convince a probabilistic polynomial-time Verifier (Arthur) that two graphs, $G_0$ and $G_1$, are indeed non-isomorphic. The protocol is as follows:\n1.  Arthur receives the two graphs, $G_0$ and $G_1$, on a vertex set $V$.\n2.  Arthur chooses a bit $b \\in \\{0, 1\\}$ uniformly at random.\n3.  Arthur generates a permutation $\\pi$ of the vertices in $V$ uniformly at random.\n4.  Arthur computes the graph $H$ by applying the permutation $\\pi$ to the vertices of $G_b$. That is, the edge set of $H$ is $E_H = \\{(\\pi(u), \\pi(v)) \\mid (u, v) \\in E_{G_b}\\}$.\n5.  Arthur sends the challenge graph $H$ to Merlin.\n6.  Merlin, with his unlimited computational power, must determine which of the original graphs is isomorphic to $H$.\n\nFor this problem, consider two specific graphs on the vertex set $V = \\{1, 2, 3, 4, 5, 6\\}$.\n-   $G_0$ is the cycle graph $C_6$. Its edges are $E_0 = \\{(1,2), (2,3), (3,4), (4,5), (5,6), (6,1)\\}$.\n-   $G_1$ is the graph consisting of two disjoint 3-cycles (triangles). Its edges are $E_1 = \\{(1,2), (2,3), (3,1), (4,5), (5,6), (6,4)\\}$.\n\nSuppose Arthur chooses the bit $b=1$ and the permutation $\\pi$ given in cycle notation as $\\pi = (1 \\ 3 \\ 5 \\ 2)(4 \\ 6)$. He constructs the challenge graph $H = \\pi(G_1)$ and sends it to Merlin.\n\nMerlin's task is to prove which graph $H$ came from. He does this by finding an isomorphism $\\sigma$ from one of the original graphs to $H$. In this case, since $G_0$ and $G_1$ are non-isomorphic, $H$ will be isomorphic to $G_1$ but not to $G_0$.\n\nYour task is to find the specific isomorphism $\\sigma: V \\to V$ that maps $G_1$ to $H$ (i.e., $(\\sigma(u), \\sigma(v))$ is an edge in $H$ if and only if $(u,v)$ is an edge in $G_1$) and is lexicographically smallest. A permutation $\\sigma$ is defined to be lexicographically smaller than another permutation $\\tau$ if the sequence $(\\sigma(1), \\sigma(2), \\sigma(3), \\sigma(4), \\sigma(5), \\sigma(6))$ is lexicographically smaller than $(\\tau(1), \\tau(2), \\tau(3), \\tau(4), \\tau(5), \\tau(6))$.\n\nWhat is this lexicographically smallest isomorphism $\\sigma$, expressed in cycle notation?",
            "solution": "1. The challenge graph is \n   $$H=\\pi(G_1), \\quad \\pi=(1\\ 3\\ 5\\ 2)(4\\ 6)$$ \n   so in one-line form \n   $$\\pi=\\begin{pmatrix}1&2&3&4&5&6\\\\3&1&5&6&2&4\\end{pmatrix}.$$\n2.  Under $\\pi$, the two triangles of $G_1$,\n   $$T_1=\\{1,2,3\\},\\;T_2=\\{4,5,6\\},$$ \n   become the triangles \n   $$\\pi(T_1)=\\{1,3,5\\},\\;\\pi(T_2)=\\{2,4,6\\}$$ \n   in $H$.\n3.  Any isomorphism $\\sigma:G_1\\to H$ must map $\\{1,2,3\\}$ onto $\\{1,3,5\\}$ and $\\{4,5,6\\}$ onto $\\{2,4,6\\}$ preserving adjacency.\n4.  To minimize lex $(\\sigma(1),\\dots,\\sigma(6))$, choose \n   $$\\sigma(1)=1$$ \n   (the smallest possible), forcing $\\sigma(\\{2,3\\})=\\{3,5\\}$.  Then \n   $$\\sigma(2)=3,\\;\\sigma(3)=5.$$\n5.  The remaining values lie in $\\{2,4,6\\}$; to minimize,\n   $$\\sigma(4)=2,\\;\\sigma(5)=4,\\;\\sigma(6)=6.$$\n6.  In one-line form,\n   $$\\sigma=\\begin{pmatrix}1&2&3&4&5&6\\\\1&3&5&2&4&6\\end{pmatrix}$$\n   which in cycle notation (omitting fixed points 1 and 6) is\n   $(2\\ 3\\ 5\\ 4)$.",
            "answer": "$$\\boxed{(2\\ 3\\ 5\\ 4)}$$"
        }
    ]
}