{
    "hands_on_practices": [
        {
            "introduction": "The famous $7/8$ inapproximability result for MAX-3SAT is profound because the number $7/8$ is not arbitrary; it represents a sharp threshold. This practice explores the \"easy\" side of this threshold by demonstrating a polynomial-time algorithm that can always achieve it. You will apply the method of conditional expectations to derandomize a simple probabilistic approach, providing a concrete, hands-on understanding of how this baseline performance is guaranteed .",
            "id": "1428172",
            "problem": "The Maximum 3-Satisfiability (MAX-3SAT) problem asks to find a truth assignment for a set of boolean variables to maximize the number of satisfied clauses in a given 3-Conjunctive Normal Form (3-CNF) formula. A 3-CNF formula is a collection of clauses joined by AND operators ($\\land$), where each clause consists of exactly three literals joined by OR operators ($\\lor$), and a literal is either a variable or its negation.\n\nConsider a simple randomized algorithm for this problem: for each variable, assign it the value `true` with probability 0.5 and `false` with probability 0.5, independently of all other variables. This algorithm is known to satisfy, in expectation, $7/8$ of the total clauses.\n\nWe can devise a deterministic procedure that achieves at least this performance. The procedure assigns truth values to the variables $x_1, x_2, \\ldots, x_n$ in order. For the first variable $x_1$, it computes the expected total number of satisfied clauses under two scenarios: once assuming $x_1$ is set to `true` and once assuming $x_1$ is set to `false`. In both scenarios, the remaining variables $x_2, \\ldots, x_n$ are still considered random (i.e., assigned `true` or `false` with probability 0.5 each). The procedure then permanently sets $x_1$ to the value that yields the greater expected number of satisfied clauses. In case of a tie, the variable is set to `true`. This process is then repeated for $x_2$, conditioned on the value chosen for $x_1$, and so on for all variables.\n\nGiven the following 3-CNF formula $\\phi$ with four variables and four clauses:\n$$ \\phi = (x_1 \\lor x_2 \\lor \\neg x_3) \\land (\\neg x_1 \\lor \\neg x_2 \\lor x_4) \\land (x_1 \\lor \\neg x_3 \\lor \\neg x_4) \\land (\\neg x_1 \\lor x_2 \\lor x_3) $$\n\nAccording to the first step of the deterministic procedure described, which of the following statements is correct?\n\nA. $x_1$ is set to `true`, and the new expected number of satisfied clauses is 3.25.\n\nB. $x_1$ is set to `true`, and the new expected number of satisfied clauses is 3.5.\n\nC. $x_1$ is set to `false`, and the new expected number of satisfied clauses is 3.25.\n\nD. $x_1$ is set to `false`, and the new expected number of satisfied clauses is 3.5.\n\nE. The procedure cannot determine the value for $x_1$ in the first step.",
            "solution": "The problem asks us to determine the setting for the variable $x_1$ and the resulting expected number of satisfied clauses by applying the first step of a deterministic procedure. This procedure is an application of the method of conditional expectations.\n\nLet the four clauses be denoted as:\n$C_1 = x_1 \\lor x_2 \\lor \\neg x_3$\n$C_2 = \\neg x_1 \\lor \\neg x_2 \\lor x_4$\n$C_3 = x_1 \\lor \\neg x_3 \\lor \\neg x_4$\n$C_4 = \\neg x_1 \\lor x_2 \\lor x_3$\n\nLet $S$ be the random variable representing the total number of satisfied clauses. We want to compute the conditional expectations $E[S | x_1=\\text{true}]$ and $E[S | x_1=\\text{false}]$. The remaining variables $x_2, x_3, x_4$ are assumed to be random, each taking the value `true` or `false` with a probability of $0.5$.\n\nBy the linearity of expectation, the expected number of satisfied clauses is the sum of the probabilities that each clause is satisfied. Let $S_i$ be an indicator variable which is 1 if clause $C_i$ is satisfied and 0 otherwise. Then $S = S_1 + S_2 + S_3 + S_4$, and $E[S | \\cdot] = \\sum_{i=1}^4 E[S_i | \\cdot] = \\sum_{i=1}^4 P(C_i \\text{ is satisfied } | \\cdot)$.\n\nFirst, let's calculate the expected number of satisfied clauses given that $x_1$ is set to `true`.\n$E[S | x_1=\\text{true}] = \\sum_{i=1}^4 P(C_i \\text{ is satisfied } | x_1=\\text{true})$\n\n-   For $C_1 = x_1 \\lor x_2 \\lor \\neg x_3$: Since $x_1$ is true, this clause is satisfied regardless of the values of $x_2$ and $x_3$. So, $P(C_1 \\text{ is satisfied } | x_1=\\text{true}) = 1$.\n-   For $C_2 = \\neg x_1 \\lor \\neg x_2 \\lor x_4$: With $x_1=\\text{true}$, this clause becomes $\\text{false} \\lor \\neg x_2 \\lor x_4$, which simplifies to $\\neg x_2 \\lor x_4$. This clause is unsatisfied only if both $\\neg x_2$ and $x_4$ are false, which means $x_2=\\text{true}$ and $x_4=\\text{false}$. Since $x_2$ and $x_4$ are independent random variables, the probability of this event is $P(x_2=\\text{true}) \\times P(x_4=\\text{false}) = (1/2) \\times (1/2) = 1/4$. The probability that the clause is satisfied is $1 - 1/4 = 3/4$.\n-   For $C_3 = x_1 \\lor \\neg x_3 \\lor \\neg x_4$: Since $x_1$ is true, this clause is satisfied. So, $P(C_3 \\text{ is satisfied } | x_1=\\text{true}) = 1$.\n-   For $C_4 = \\neg x_1 \\lor x_2 \\lor x_3$: With $x_1=\\text{true}$, this clause becomes $\\text{false} \\lor x_2 \\lor x_3$, which simplifies to $x_2 \\lor x_3$. This clause is unsatisfied only if both $x_2$ and $x_3$ are false. The probability of this is $P(x_2=\\text{false}) \\times P(x_3=\\text{false}) = (1/2) \\times (1/2) = 1/4$. The probability that the clause is satisfied is $1 - 1/4 = 3/4$.\n\nSumming these probabilities gives the total expected number of satisfied clauses:\n$E[S | x_1=\\text{true}] = 1 + \\frac{3}{4} + 1 + \\frac{3}{4} = 2 + \\frac{6}{4} = 2 + 1.5 = 3.5$.\n\nNext, let's calculate the expected number of satisfied clauses given that $x_1$ is set to `false`.\n$E[S | x_1=\\text{false}] = \\sum_{i=1}^4 P(C_i \\text{ is satisfied } | x_1=\\text{false})$\n\n-   For $C_1 = x_1 \\lor x_2 \\lor \\neg x_3$: With $x_1=\\text{false}$, this clause becomes $x_2 \\lor \\neg x_3$. This is unsatisfied if $x_2=\\text{false}$ and $\\neg x_3=\\text{false}$ (i.e., $x_3=\\text{true}$). The probability is $(1/2) \\times (1/2) = 1/4$. The probability of being satisfied is $1 - 1/4 = 3/4$.\n-   For $C_2 = \\neg x_1 \\lor \\neg x_2 \\lor x_4$: Since $x_1=\\text{false}$, $\\neg x_1$ is true, so this clause is satisfied. $P(C_2 \\text{ is satisfied } | x_1=\\text{false}) = 1$.\n-   For $C_3 = x_1 \\lor \\neg x_3 \\lor \\neg x_4$: With $x_1=\\text{false}$, this clause becomes $\\neg x_3 \\lor \\neg x_4$. This is unsatisfied if $\\neg x_3=\\text{false}$ and $\\neg x_4=\\text{false}$ (i.e., $x_3=\\text{true}$ and $x_4=\\text{true}$). The probability is $(1/2) \\times (1/2) = 1/4$. The probability of being satisfied is $1 - 1/4 = 3/4$.\n-   For $C_4 = \\neg x_1 \\lor x_2 \\lor x_3$: Since $x_1=\\text{false}$, $\\neg x_1$ is true, so this clause is satisfied. $P(C_4 \\text{ is satisfied } | x_1=\\text{false}) = 1$.\n\nSumming these probabilities gives the total expected number of satisfied clauses:\n$E[S | x_1=\\text{false}] = \\frac{3}{4} + 1 + \\frac{3}{4} + 1 = 2 + \\frac{6}{4} = 2 + 1.5 = 3.5$.\n\nWe have $E[S | x_1=\\text{true}] = 3.5$ and $E[S | x_1=\\text{false}] = 3.5$. The expected values are equal. The problem states that \"In case of a tie, the variable is set to `true`.\" Therefore, the procedure sets $x_1$ to `true`. The resulting expected number of satisfied clauses, upon which the rest of the assignments will be conditioned, is 3.5.\n\nThis corresponds to option B.",
            "answer": "$$\\boxed{B}$$"
        },
        {
            "introduction": "Having established that a $7/8$-approximation is achievable, we now turn to why doing any better is hard. This exercise delves into the mechanics of the PCP theorem's connection to MAX-3SAT, which forms the basis of the inapproximability proof. By analyzing a hypothetical PCP system with imperfect parameters, you will calculate the resulting \"hardness gap\" yourself, demystifying how abstract properties of a proof system translate into concrete limits on optimization .",
            "id": "1428181",
            "problem": "In computational complexity theory, the Probabilistically Checkable Proof (PCP) theorem is a cornerstone for proving hardness of approximation results. The standard version of the theorem, equivalent to the statement NP = PCP(log n, 1), leads to the famous inapproximability result for the Maximum 3-Satisfiability (MAX-3SAT) problem. It establishes that it is NP-hard to distinguish between a 3-conjunctive normal form (3-CNF) formula that is fully satisfiable and one where at most a fraction $7/8 + \\epsilon$ of clauses can be satisfied for any $\\epsilon > 0$.\n\nThis result is derived via a reduction from a language in NP to MAX-3SAT. This reduction converts a PCP verifier into a 3-CNF formula. A common construction based on a 3-bit query verifier works as follows: for each possible random string of the verifier, a small block of 8 distinct 3-CNF clauses is generated. If the verifier's local test on the 3 queried bits passes, all 8 clauses in that block can be satisfied. If the test fails, any assignment can satisfy at most 7 of the 8 clauses.\n\nThe standard PCP verifier has perfect completeness (acceptance probability $c=1$ for YES instances) and soundness $s  1$ (e.g., $s=1/2$ for NO instances).\n\nNow, consider a hypothetical, weaker PCP system characterized by the following parameters:\n-   **Completeness, $c$**: For any YES instance, there exists a proof that the verifier accepts with a probability of exactly $c = 0.9$.\n-   **Soundness, $s$**: For any NO instance, any proof will cause the verifier to accept with a probability of at most $s = 0.5$.\n\nAssume we apply the same reduction described above to this hypothetical PCP system. This process creates a gap for MAX-3SAT, making it NP-hard to distinguish between instances where at least a fraction $G_c$ of clauses are satisfiable, and instances where at most a fraction $G_s$ of clauses are satisfiable.\n\nDetermine the pair of values $(G_c, G_s)$ that represents this new inapproximability gap.\n\nA. (0.9000, 0.5000)\n\nB. (0.9875, 0.9375)\n\nC. (1.0000, 0.9375)\n\nD. (0.9125, 0.5625)\n\nE. (0.8875, 0.9375)",
            "solution": "The problem asks us to determine the new inapproximability gap $(G_c, G_s)$ for MAX-3SAT based on a hypothetical PCP system with imperfect completeness. The reduction from the PCP system to a MAX-3SAT instance has specific properties: each random string for the verifier corresponds to a block of 8 clauses. If the local test passes, all 8 clauses are satisfiable. If it fails, at most 7 out of 8 are satisfiable.\n\nFirst, let's calculate the satisfiability threshold for a YES instance, which we denote as $G_c$.\nA YES instance corresponds to the completeness case of the PCP system. By definition, for a YES instance, there exists a proof such that the verifier accepts with probability $c=0.9$. The verifier's acceptance probability is the fraction of random strings that lead to an accepting local test.\n- A fraction $c$ of the clause blocks correspond to accepting tests. For these blocks, all 8 out of 8 clauses can be satisfied. The contribution to the total fraction of satisfied clauses is $c \\times \\frac{8}{8} = c \\times 1$.\n- The remaining fraction, $1-c$, of the clause blocks correspond to rejecting tests. For these blocks, at most 7 out of 8 clauses can be satisfied. The contribution from these blocks is $(1-c) \\times \\frac{7}{8}$.\n\nTherefore, the maximum fraction of satisfiable clauses in a YES instance, $G_c$, is the sum of these contributions:\n$$G_c = c \\cdot 1 + (1-c) \\cdot \\frac{7}{8}$$\nSubstituting the given value $c = 0.9$:\n$$G_c = 0.9 + (1 - 0.9) \\cdot \\frac{7}{8}$$\n$$G_c = 0.9 + 0.1 \\cdot 0.875$$\n$$G_c = 0.9 + 0.0875 = 0.9875$$\n\nNext, let's calculate the satisfiability threshold for a NO instance, which we denote as $G_s$.\nA NO instance corresponds to the soundness case of the PCP system. For any NO instance, and for any purported proof, the verifier accepts with a probability of at most $s=0.5$. To find the upper bound on the fraction of satisfiable clauses, we consider the worst-case scenario for distinguishing, which is the best-case scenario for an adversary trying to satisfy as many clauses as possible. This occurs when the acceptance probability is exactly $s$.\n- At most a fraction $s$ of the clause blocks correspond to accepting tests. These blocks can be fully satisfied, contributing $s \\times \\frac{8}{8} = s \\times 1$ to the total fraction of satisfiable clauses.\n- The remaining fraction, $1-s$, of the clause blocks correspond to rejecting tests, where at most 7 out of 8 clauses can be satisfied. These contribute $(1-s) \\times \\frac{7}{8}$ to the total fraction.\n\nTherefore, the maximum fraction of satisfiable clauses in a NO instance, $G_s$, is:\n$$G_s = s \\cdot 1 + (1-s) \\cdot \\frac{7}{8}$$\nSubstituting the given value $s = 0.5$:\n$$G_s = 0.5 + (1 - 0.5) \\cdot \\frac{7}{8}$$\n$$G_s = 0.5 + 0.5 \\cdot 0.875$$\n$$G_s = 0.5 + 0.4375 = 0.9375$$\n\nSo, the new inapproximability gap is defined by the pair $(G_c, G_s) = (0.9875, 0.9375)$. This means it is NP-hard to distinguish between 3-CNF formulas where at least 98.75% of clauses are satisfiable and those where at most 93.75% of clauses are satisfiable.\n\nComparing our result with the given choices:\nA. (0.9000, 0.5000) - This incorrectly assumes the gap is just $(c, s)$.\nB. (0.9875, 0.9375) - This matches our calculation.\nC. (1.0000, 0.9375) - This correctly calculates $G_s$ but incorrectly assumes perfect completeness ($c=1$).\nD. (0.9125, 0.5625) - This would result from using $1/8$ instead of $7/8$ for the fraction of satisfied clauses in failing blocks.\nE. (0.8875, 0.9375) - This correctly calculates $G_s$ but makes an error in calculating $G_c$.\n\nThe correct option is B.",
            "answer": "$$\\boxed{B}$$"
        },
        {
            "introduction": "This final practice encourages you to generalize your understanding of the $7/8$ hardness threshold beyond standard MAX-3SAT. It asks whether this limitation is specific to the logical OR function or if it applies to a broader class of constraints. By exploring reductions between different \"7-out-of-8\" predicates, you will uncover a deeper structural reason for this computational barrier, revealing the fundamental nature of the problem's difficulty .",
            "id": "1428193",
            "problem": "The famous PCP (Probabilistically Checkable Proof) theorem implies that for any constant $\\epsilon > 0$, it is NP-hard to distinguish a satisfiable 3-SAT formula from one where at most a fraction $7/8 + \\epsilon$ of clauses can be satisfied. This establishes a strong inapproximability threshold for the corresponding optimization problem, MAX-3-SAT. This problem explores whether this hardness is a specific feature of disjunctive clauses or a more general property of certain types of constraints.\n\nLet's define a \"7-out-of-8 predicate\" as any predicate $P:\\{0,1\\}^3 \\to \\{0,1\\}$ that evaluates to true for exactly 7 of the 8 possible binary inputs. Any such predicate can be uniquely identified by the single 3-bit string $s \\in \\{0,1\\}^3$ for which it evaluates to false. Let's denote this predicate as $P_s$. For example, the predicate for the standard OR clause $(x \\lor y \\lor z)$ is $P_{000}$, because it is false only when $(x,y,z)=(0,0,0)$. Similarly, the predicate for the clause $(\\neg x \\lor y \\lor z)$ is $P_{100}$. There are 8 such predicates in total, one for each $s \\in \\{0,1\\}^3$.\n\nNow, consider a class of Maximum 3-variable Constraint Satisfaction Problems, denoted MAX-3-CSP($P_s$). An instance of MAX-3-CSP($P_s$) consists of a set of boolean variables $V = \\{x_1, \\dots, x_n\\}$ and a list of constraints. Each constraint is formed by applying the fixed predicate $P_s$ to an ordered triplet of literals $(\\ell_1, \\ell_2, \\ell_3)$, where each literal is either a variable $x_i \\in V$ or its negation $\\neg x_i$. The goal is to find a variable assignment that maximizes the number of satisfied constraints.\n\nGiven the established NP-hardness of approximating MAX-3-SAT to within a factor of $(7/8 + \\epsilon)$, for which of the 8 predicates $P_s$ does the corresponding problem MAX-3-CSP($P_s$) also exhibit this same NP-hardness property?\n\nA. None of the 8 predicates.\n\nB. All 8 predicates.\n\nC. Only the 6 predicates $P_s$ for which $s$ is not $(0,0,0)$ or $(1,1,1)$.\n\nD. Only the 2 predicates $P_s$ for which $s$ is $(0,0,0)$ or $(1,1,1)$.\n\nE. The answer depends on the specific structure of the Probabilistically Checkable Proof system used in the hardness proof.",
            "solution": "We begin with the definition: for any fixed $s \\in \\{0,1\\}^{3}$, the predicate $P_{s}:\\{0,1\\}^{3} \\to \\{0,1\\}$ is defined by $P_{s}(u)=1$ for all $u \\in \\{0,1\\}^{3}$ except $u=s$, where $P_{s}(s)=0$. A MAX-3-CSP($P_{s}$) instance consists of constraints of the form $P_{s}(\\ell_{1},\\ell_{2},\\ell_{3})$, where each $\\ell_{i}$ is either $x_{j}$ or $\\neg x_{j}$ for some variable $x_{j}$.\n\nThe standard MAX-3-SAT problem corresponds exactly to MAX-3-CSP($P_{000}$), since a clause $(\\ell_{1} \\lor \\ell_{2} \\lor \\ell_{3})$ is false if and only if $(\\operatorname{val}(\\ell_{1}),\\operatorname{val}(\\ell_{2}),\\operatorname{val}(\\ell_{3}))=(0,0,0)$, i.e., it applies $P_{000}$ to the triple of literal truth values. The PCP theorem implies that it is NP-hard to distinguish instances where all constraints can be satisfied from instances where at most a fraction $7/8+\\epsilon$ can be satisfied, for any constant $\\epsilon0$.\n\nWe show that for every $s \\in \\{0,1\\}^{3}$ there is a simple, exact, gap-preserving reduction from MAX-3-CSP($P_{000}$) to MAX-3-CSP($P_{s}$), which preserves the number of satisfied constraints under every assignment.\n\nFix $s=(s_{1},s_{2},s_{3}) \\in \\{0,1\\}^{3}$. Given any clause of MAX-3-SAT written as $(\\ell_{1} \\lor \\ell_{2} \\lor \\ell_{3})$, construct a constraint of MAX-3-CSP($P_{s}$) by defining literals\n$$\n\\ell_{i}' \\;=\\;\n\\begin{cases}\n\\ell_{i},  \\text{if } s_{i}=0,\\\\\n\\neg \\ell_{i},  \\text{if } s_{i}=1,\n\\end{cases}\n\\quad \\text{for } i \\in \\{1,2,3\\},\n$$\nand then adding the constraint $P_{s}(\\ell_{1}',\\ell_{2}',\\ell_{3}')$.\n\nFor any assignment $\\alpha$ to the variables, let $\\operatorname{val}(\\ell)$ denote the induced truth value of a literal. The original clause is unsatisfied under $\\alpha$ if and only if $(\\operatorname{val}(\\ell_{1}),\\operatorname{val}(\\ell_{2}),\\operatorname{val}(\\ell_{3}))=(0,0,0)$. The constructed constraint $P_{s}(\\ell_{1}',\\ell_{2}',\\ell_{3}')$ is unsatisfied under $\\alpha$ if and only if\n$$\n(\\operatorname{val}(\\ell_{1}'),\\operatorname{val}(\\ell_{2}'),\\operatorname{val}(\\ell_{3}'))=s.\n$$\nBy construction, for each coordinate $i$, we have $\\operatorname{val}(\\ell_{i}')=\\operatorname{val}(\\ell_{i})$ if $s_{i}=0$ and $\\operatorname{val}(\\ell_{i}')=1-\\operatorname{val}(\\ell_{i})$ if $s_{i}=1$. Therefore\n$$\n(\\operatorname{val}(\\ell_{1}'),\\operatorname{val}(\\ell_{2}'),\\operatorname{val}(\\ell_{3}'))=s\n\\;\\;\\Longleftrightarrow\\;\\;\n(\\operatorname{val}(\\ell_{1}),\\operatorname{val}(\\ell_{2}),\\operatorname{val}(\\ell_{3}))=(0,0,0).\n$$\nHence the clause is unsatisfied under $\\alpha$ if and only if the constructed constraint is unsatisfied under $\\alpha$. Consequently, under every assignment, the number of satisfied constraints is preserved exactly, and thus the optimum fraction of satisfiable constraints is preserved.\n\nThis reduction is linear-time and works for every fixed $s \\in \\{0,1\\}^{3}$. Therefore, the NP-hardness of distinguishing fully satisfiable instances from those with at most a $7/8+\\epsilon$ satisfiable fraction for MAX-3-SAT (i.e., MAX-3-CSP($P_{000}$)) carries over to MAX-3-CSP($P_{s}$) for every $s$. Equivalently, all eight predicates $P_{s}$ yield the same $(7/8+\\epsilon)$ inapproximability threshold. A random assignment satisfies any $P_{s}$-constraint with probability $7/8$, so this threshold is tight up to $\\epsilon$.\n\nTherefore, the correct choice is that all eight predicates exhibit the same NP-hardness property.",
            "answer": "$$\\boxed{B}$$"
        }
    ]
}