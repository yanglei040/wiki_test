{
    "hands_on_practices": [
        {
            "introduction": "许多看似复杂的优化问题，例如资源调度，其核心往往可以抽象为一个基本的数论问题。本练习将引导你分析一个非对称处理器调度任务，并揭示其与经典的子集和问题（SUBSET-SUM）的等价性。通过这个过程，你将亲身体会为何这类依赖于输入数值大小的问题被归类为弱NP完备问题，并理解伪多项式时间算法在此类问题中的角色。",
            "id": "1469291",
            "problem": "考虑一个名为 `ASYMMETRIC-2-SCHEDULING` 的计算问题。给定一个由 $n$ 个不可分割的任务组成的集合 $T = \\{T_1, T_2, \\ldots, T_n\\}$。每个任务 $T_i$ 都有一个相关的正整数工作量 $w_i$。这些任务需要被安排在一个拥有两个处理器 $P_1$ 和 $P_2$ 的系统上。这两个处理器是异构的：处理器 $P_1$ 的处理速度为 $v$，而处理器 $P_2$ 的速度是其两倍，为 $2v$。在速度为 $s$ 的处理器上执行工作量为 $w$ 的任务所需的时间是 $w/s$。\n\n`ASYMMETRIC-2-SCHEDULING` 问题是判断是否可能将任务集合 $T$ 分割成两个不相交的子集 $T_1$ 和 $T_2$（其中 $T_1$ 分配给 $P_1$，$T_2$ 分配给 $P_2$），使得两个处理器在完全相同的时刻完成它们的工作。令 $S = \\sum_{i=1}^n w_i$ 为总工作量。\n\n根据计算复杂性理论的原理，以下哪个陈述最准确地描述了 `ASYMMETRIC-2-SCHEDULING` 问题？\n\nA. 该问题可在多项式时间内求解，因为任务可以按工作量排序，并使用贪心算法分配给将较早完成的处理器。\n\nB. 该问题是强 NP 完备的，因为它是 3-PARTITION 问题的一个变体。\n\nC. 该问题是弱 NP 完备的，因为它可以通过一个时间复杂度在 $n$ 和 $S$ 上是多项式的、但不一定在输入大小上是多项式的算法来解决。\n\nD. 该问题是不可判定的，因为对于任意整数工作量，可能无法确定是否存在一个完美的划分。\n\nE. 该问题可在多项式时间内求解，因为它可以转化为检查总工作量 $S$ 是否能被 3 整除。",
            "solution": "令 $T=\\{T_{1},\\ldots,T_{n}\\}$ 为具有正整数工作量 $w_{i}>0$ 的任务集合，两个处理器 $P_{1}$ 和 $P_{2}$ 的速度分别为 $v$ 和 $2v$。如果一个子集 $T_{1}$ 分配给 $P_{1}$，其补集 $T_{2}$ 分配给 $P_{2}$，则完成时间为\n$$\n\\text{time}(P_{1})=\\frac{\\sum_{T_{i}\\in T_{1}}w_{i}}{v},\\qquad \\text{time}(P_{2})=\\frac{\\sum_{T_{i}\\in T_{2}}w_{i}}{2v}.\n$$\n要求完成时间相等，可得\n$$\n\\frac{\\sum_{T_{i}\\in T_{1}}w_{i}}{v}=\\frac{\\sum_{T_{i}\\in T_{2}}w_{i}}{2v}.\n$$\n令 $X=\\sum_{T_{i}\\in T_{1}}w_{i}$ 且 $Y=\\sum_{T_{i}\\in T_{2}}w_{i}$，其中 $X+Y=S=\\sum_{i=1}^{n}w_{i}$。则\n$$\n\\frac{X}{v}=\\frac{Y}{2v}\\iff 2X=Y,\\quad X+Y=S.\n$$\n解这个线性方程组，\n$$\n2X=S-X\\implies 3X=S\\implies X=\\frac{S}{3},\\quad Y=\\frac{2S}{3}.\n$$\n因此，该调度问题等价于：是否存在一个工作量的子集，其和为 $S/3$？这是目标值为 $S/3$ 的 SUBSET-SUM 问题的一个特例。\n\nNP 成员性：一个证书是和为 $S/3$ 的子集，可以在 $n$ 和输入长度的多项式时间内验证。\n\n伪多项式时间算法：用于 SUBSET-SUM 的标准动态规划算法可以在 $O(nS)$ 时间内计算出所有可达到的、直到 $S$ 的和。由于这个时间复杂度在 $n$ 和 $S$ 上是多项式的（但不是在输入的位长度 $O(n\\log S)$ 上），因此该问题可以在伪多项式时间内求解。\n\nNP-难度（弱）：我们将 PARTITION 问题归约到目标值为 $S/3$ 的 SUBSET-SUM 问题。设 $A=\\{a_{1},\\ldots,a_{n}\\}$ 是一个 PARTITION 实例，其总和为 $S_{A}=\\sum_{i=1}^{n}a_{i}$。首先，如有必要，将每个 $a_{i}$ 替换为 $2a_{i}$ 以确保 $S_{A}$ 是偶数；这保持了等价性，并且位长度最多增加一个常数因子。定义两个额外的项\n$$\np=S_{A}+1,\\qquad q=2p+\\frac{S_{A}}{2}.\n$$\n构造 $B=A\\cup\\{p,q\\}$，其总和为 $S' = S_{A}+p+q$。那么\n$$\n\\frac{S'}{3}=\\frac{S_{A}+p+q}{3}=\\frac{S_{A}+(S_{A}+1)+\\left(2(S_{A}+1)+\\frac{S_{A}}{2}\\right)}{3}=\\frac{3S_{A}}{2}+1,\n$$\n这是一个整数，因为 $S_{A}$ 是偶数。我们建立两个关键属性：\n1) $q>\\frac{S'}{3}$，因为\n$$\nq-\\frac{S'}{3}=\\left(\\frac{5S_{A}}{2}+2\\right)-\\left(\\frac{3S_{A}}{2}+1\\right)=S_{A}+1>0,\n$$\n所以 $q$ 不能被包含在任何和为 $\\frac{S'}{3}$ 的子集中。\n2) $\\frac{S'}{3}>S_{A}$，因为\n$$\n\\frac{S'}{3}-S_{A}=\\frac{3S_{A}}{2}+1-S_{A}=\\frac{S_{A}}{2}+1>0,\n$$\n所以仅 $A$ 的任何子集都无法达到 $\\frac{S'}{3}$；因此任何有效的子集都必须包含 $p$。\n\n因此，$B$ 中任何和为 $\\frac{S'}{3}$ 的子集都必须包含 $p$ 且不包含 $q$，其在 $A$ 中剩余部分的和必须正好是\n$$\n\\frac{S'}{3}-p=\\left(\\frac{3S_{A}}{2}+1\\right)-(S_{A}+1)=\\frac{S_{A}}{2}.\n$$\n因此，$B$ 存在和为 $\\frac{S'}{3}$ 的子集，当且仅当 $A$ 存在和为 $\\frac{S_{A}}{2}$ 的子集，即当且仅当该 PARTITION 实例是一个“是”实例。这是一个多项式时间多一归约，且 $p$ 和 $q$ 的大小为 $O(S_{A})$，其二进制长度为 $O(\\log S_{A})$，在输入大小上是多项式的。\n\n因此，判断是否存在和为 $S/3$ 的子集（也就是给定的调度问题）是 NP 完备的，但只是弱 NP 完备，因为存在伪多项式时间的动态规划算法。因此，在这些选项中，正确的分类是该问题为弱 NP 完备。\n\n选项分析：\n- A 是错误的：贪心列表调度算法不能判定完成时间是否精确相等。\n- B 是错误的：强 NP 完备性会排除伪多项式时间算法的存在，但这样的算法是存在的。\n- C 是正确的：该问题是弱 NP 完备的；它可以在 $n$ 和 $S$ 的多项式时间内求解。\n- D 是错误的：该问题是可判定的，并且属于 NP 类。\n- E 是错误的：$S$ 能被 3 整除是必要条件，但远非充分条件。\n\n因此，正确选项是 C。",
            "answer": "$$\\boxed{C}$$"
        },
        {
            "introduction": "弱NP完备与强NP完备的关键区别在于，当问题的数值参数被限制在输入规模的多项式范围内时，问题的复杂度会如何变化。本练习通过直接对比一个子集和问题的变体（PZSS）和一个3-划分问题的变体（P3P），清晰地展示了这一核心差异。通过分析这两种情况，你将理解为什么对于弱NP完备问题，当数值较小时，伪多项式时间算法能有效地在多项式时间内求解，而强NP完备问题即便在这种限制下依然保持其困难性。",
            "id": "1469353",
            "problem": "考虑两个与在整系数单变量多项式子集中寻找特定性质相关的判定问题。对于这两个问题，输入都包含一个由 $N$ 个多项式组成的集合 $S = \\{p_1(x), \\dots, p_N(x)\\}$ 和一个整数 $r$。\n\n**问题1：多项式零子集和 (POLYNOMIAL-ZERO-SUBSET-SUM, PZSS)**\n是否存在一个非空子集 $S' \\subseteq S$，使得 $S'$ 中多项式之和，记为 $P_{S'}(x) = \\sum_{p_i \\in S'} p_i(x)$，满足条件 $P_{S'}(r) = 0$？\n\n**问题2：多项式3-划分 (POLYNOMIAL-3-PARTITION, P3P)**\n假设多项式的数量为 $N=3n$，其中 $n$ 为某个整数。对于集合 $S$ 中的每个多项式 $p_i(x)$，我们定义整数值 $v_i = p_i(r)$。此外，令 $T = \\frac{1}{n} \\sum_{i=1}^{3n} v_i$。假设 $T$ 是一个整数，集合 $S$ 能否被划分为 $n$ 个不相交的子集 $S_1, \\dots, S_n$，其中每个子集恰好包含3个多项式，使得对于每个子集 $S_j$，其多项式在 $r$ 处求和的值等于 $T$？也就是说，对于每个 $j \\in \\{1, \\dots, n\\}$，等式 $\\left( \\sum_{p_i \\in S_j} p_i(x) \\right)\\bigg|_{x=r} = T$ 是否成立？\n\n现在，考虑这两个问题的一个特殊情况，我们称之为“多项式有界量级”(polynomially-bounded magnitude, PBM) 情况。如果一个问题的实例满足以下条件，则该实例属于 PBM 情况：每个多项式的次数由一个固定的常数界定，并且输入中给出的所有数值（即所有多项式的所有系数以及整数 $r$）的绝对值都由总多项式数 $N$ 的某个多项式函数界定。\n\n以下哪个陈述正确描述了这两个问题的 PBM 版本的计算复杂性？你可以假设 P $\\ne$ NP。\n\nA. 在 PBM 情况下，PZSS 和 P3P 都可以在多项式时间内求解。\n\nB. 在 PBM 情况下，PZSS 可以在多项式时间内求解，但 P3P 仍然是 NP-完备的。\n\nC. 在 PBM 情况下，P3P 可以在多项式时间内求解，但 PZSS 仍然是 NP-完备的。\n\nD. 在 PBM 情况下，PZSS 和 P3P 仍然是 NP-完备的。",
            "solution": "我们通过首先将多项式输入归约为整数值，然后利用关于多项式界限下子集和类问题及3-划分类问题的已知复杂性事实，来分析这两个 PBM 问题。\n\n对于每个次数最多为固定常数 $d$ 的多项式 $p_i(x)$，我们将其写作 $p_i(x) = \\sum_{k=0}^{d} a_{ik} x^{k}$，其中所有系数 $a_{ik} \\in \\mathbb{Z}$。在 PBM 情况下，存在一个多项式 $q$，使得对于所有的 $i,k$，有 $|a_{ik}| \\leq q(N)$ 且 $|r| \\leq q(N)$，并且 $d$ 是一个与 $N$ 无关的常数。定义 $v_i = p_i(r)$。那么\n$$\n|v_i| = \\left| \\sum_{k=0}^{d} a_{ik} r^{k} \\right| \\leq \\sum_{k=0}^{d} |a_{ik}|\\, |r|^{k} \\leq \\sum_{k=0}^{d} q(N)\\, q(N)^{k} = \\sum_{k=0}^{d} q(N)^{k+1}.\n$$\n因为 $d$ 是一个固定常数，所以上界 $\\sum_{k=0}^{d} q(N)^{k+1}$ 由一个关于 $N$ 的多项式界定。因此，存在一个多项式 $Q$，使得对于所有的 $i$，都有 $|v_i| \\leq Q(N)$。\n\n问题1 (PZSS)：通过标准求值方法（例如，霍纳法则）在输入大小的多项式时间内计算出 $v_i = p_i(r)$ 后，问题变为：是否存在一个非空子集 $I \\subseteq \\{1,\\dots,N\\}$ 使得 $\\sum_{i \\in I} v_i = 0$？这是子集和 (SUBSET SUM) 问题的一个特例，其目标为零，输入为可能为正或负的整数。令 $W = \\sum_{i=1}^{N} |v_i|$。由 $|v_i| \\leq Q(N)$ 可得 $W \\leq N Q(N)$，这是关于 $N$ 的多项式。一个标准的动态规划算法可以在整数区间 $[-W, W]$ 内遍历所有可达到的和，从而判断零是否可达到。为了排除空子集，可以在初始化动态规划时不将空集和设为可行，或者等价地，追踪是否至少使用了一个元素。该动态规划有 $O(N)$ 个阶段和 $O(W)$ 个状态，每个状态的转移时间为 $O(1)$，因此其运行时间为 $O(N W)$，在 PBM 情况下这是关于 $N$ 的多项式时间。因此，在 PBM 情况下，PZSS 可在多项式时间内求解。\n\n问题2 (P3P)：在计算出 $v_i = p_i(r)$ 和 $T = \\frac{1}{n} \\sum_{i=1}^{3n} v_i$（假设为整数）之后，问题是多重集 $\\{v_1,\\dots,v_{3n}\\}$ 能否被划分为 $n$ 个三元组，每个三元组的和都为 $T$。这正是 3-划分 (3-PARTITION) 问题的结构：划分为 $n$ 个和相等的三元组。经典的 3-划分问题是强 NP-完备的，这意味着即使所有整数都由项目数量的多项式界定，它仍然是 NP-完备的。为了将在多项式有界范围内的 3-划分问题的强 NP-完备实例归约到 PBM 情况下的 P3P，我们将每个整数 $a_i$ 映射到一个常数多项式 $p_i(x) = a_i$，并设 $r = 0$。这样，$v_i = p_i(0) = a_i$，并且 $T = \\frac{1}{n} \\sum_{i=1}^{3n} a_i$ 等于 3-划分实例中每个三元组的目标和。所有 PBM 条件都成立：次数为零，系数为 $a_i$（多项式有界），且 $r=0$。当且仅当原始的 3-划分实例是一个“是”实例时，这个 P3P 实例也是一个“是”实例。因此，在 PBM 情况下 P3P 仍然是 NP-难的。P3P 属于 $NP$ 类，因为一个划分证书可以通过对每个三元组求和并检查其是否等于 $T$ 来在多项式时间内验证。因此，在 PBM 情况下 P3P 仍然是 NP-完备的。\n\n综合两个结果，在 PBM 情况下，PZSS 属于 $P$ 类，而 P3P 仍然是 NP-完备的。因此，正确选项是 B。",
            "answer": "$$\\boxed{B}$$"
        },
        {
            "introduction": "这个练习是一个综合性挑战，它不仅需要巧妙的代数转换技巧，还需要对复杂性分类有深刻的理解。通过将一个关于比率平衡的划分问题转化为一个类似子集和的问题，本练习巩固了前面所学的概念，并让你实践从问题表象深入计算本质的分析能力。它突显了在评估一个问题的计算难度时，分析其输入数值的大小是何等关键的一步。",
            "id": "1469322",
            "problem": "考虑以下判定问题，我们称之为 `BALANCED_RATIO_PARTITION`。\n\n**输入：** 一个包含 $n$ 个物品的集合 $S$，其中每个物品 $i \\in \\{1, \\dots, n\\}$ 都有一个正整数重量 $w_i$ 和一个正整数价值 $v_i$。\n\n**问题：** 是否存在将集合 $S$ 划分为两个非空子集 $S_1$ 和 $S_2$ 的方式，使得两个子集的总价值与总重量之比相等？也就是说，如果 $V_k = \\sum_{i \\in S_k} v_i$ 且 $W_k = \\sum_{i \\in S_k} w_i$（对于 $k \\in \\{1, 2\\}$），则条件为 $\\frac{V_1}{W_1} = \\frac{V_2}{W_2}$。\n\n现在，考虑该问题的两类实例：\n- **类别 1：** 存在一个固定的多项式 $p(n)$，使得对于所有物品 $i$，其重量 $w_i$ 和价值 $v_i$ 都受 $p(n)$ 的限制。换句话说，$\\max(w_i, v_i) \\le p(n)$。\n- **类别 2：** 一般实例，其中重量 $w_i$ 和价值 $v_i$ 可以是任何正整数（实际上，是指其二进制表示的长度是 $n$ 的多项式的数）。\n\n下列哪个陈述最准确地描述了 `BALANCED_RATIO_PARTITION` 问题的计算复杂度？\n\nA. 该问题对于类别 1 的实例是多项式时间内可解的，但对于类别 2 的实例是 NP 难的。\n\nB. 该问题对于类别 1 和类别 2 的实例都是多项式时间内可解的。\n\nC. 该问题对于类别 1 和类别 2 的实例都是 NP 难的。\n\nD. 该问题对于类别 1 的实例是 NP 难的，但对于类别 2 的实例是多项式时间内可解的。\n\nE. 该问题的复杂度是多项式时间内可解的，当且仅当所有初始重量 $w_i$ 和价值 $v_i$ 都是 2 的幂。\n\nF. 该问题对于类别 2 的实例是不可判定的。",
            "solution": "令 $S$ 为物品集合，其中 $V = \\sum_{i \\in S} v_{i}$ 且 $W = \\sum_{i \\in S} w_{i}$。对于一个非空的真子集 $S_{1} \\subset S$，记 $V_{1} = \\sum_{i \\in S_{1}} v_{i}$ 且 $W_{1} = \\sum_{i \\in S_{1}} w_{i}$。那么，平衡比率划分的条件是\n$$\n\\frac{V_{1}}{W_{1}} = \\frac{V_{2}}{W_{2}},\n$$\n其中 $S_{2} = S \\setminus S_{1}$，$V_{2} = V - V_{1}$ 且 $W_{2} = W - W_{1}$。交叉相乘得到\n$$\nV_{1} W_{2} = V_{2} W_{1}.\n$$\n将 $V_{2} = V - V_{1}$ 和 $W_{2} = W - W_{1}$ 代入，可得\n$$\nV_{1} (W - W_{1}) = (V - V_{1}) W_{1} \\iff V_{1} W = V W_{1}.\n$$\n等价地，条件是\n$$\n\\frac{V_{1}}{W_{1}} = \\frac{V}{W}.\n$$\n因此，该问题询问是否存在一个非空的真子集 $S_{1}$，使得其子集比率等于全局比率。\n\n定义常数（只依赖于实例）\n$$\na_{i} := v_{i} W - w_{i} V \\quad \\text{对于所有 } i \\in \\{1,\\dots,n\\}。\n$$\n那么\n$$\n\\sum_{i \\in S_{1}} a_{i} = \\sum_{i \\in S_{1}} (v_{i} W - w_{i} V) = W \\sum_{i \\in S_{1}} v_{i} - V \\sum_{i \\in S_{1}} w_{i} = W V_{1} - V W_{1}.\n$$\n因此，平衡比率条件 $V_{1} W = V W_{1}$ 等价于\n$$\n\\sum_{i \\in S_{1}} a_{i} = 0.\n$$\n我们还有 $\\sum_{i \\in S} a_{i} = V W - W V = 0$。因此，该判定问题等价于：在 $a_i$ 中是否存在一个和为零的非空真子集。\n\n对于类别 2，问题属于 NP，因为给定一个候选子集 $S_{1}$，我们可以在输入规模的多项式时间内计算出 $V_{1}$、$W_{1}$、$V$、$W$，并通过具有多项式位数的整数算术来验证 $V_{1} W = V W_{1}$。\n\n类别 1（重量和价值由多项式界定）：令 $W = \\sum_{i} w_{i}$ 且 $V = \\sum_{i} v_{i}$。在假设 $\\max(w_{i}, v_{i}) \\le p(n)$（对于某个固定多项式 $p$）下，我们有 $W \\le n p(n)$ 且 $V \\le n p(n)$。定义一个动态规划 $D(k, x, y)$，如果存在一个前 $k$ 个物品的子集，其总重量为 $x$，总价值为 $y$，则 $D(k, x, y)$ 为真，否则为假。其递推关系为\n$$\nD(0, 0, 0) = \\text{true}, \\quad D(0, x, y) = \\text{false} \\text{ for } (x,y) \\neq (0,0),\n$$\n对于 $k \\ge 1$，\n$$\nD(k, x, y) = D(k-1, x, y) \\;\\text{ or }\\; \\bigl(x \\ge w_{k},\\, y \\ge v_{k},\\, D(k-1, x - w_{k}, y - v_{k})\\bigr).\n$$\n状态空间的大小为 $O(n W V)$，每个状态的转移是常数时间，因此总时间是关于 $n$、$W$ 和 $V$ 的多项式，所以在类别 1 的界定下是关于 $n$ 的多项式。填充完 $D(n, \\cdot, \\cdot)$ 后，我们检查是否存在 $(x, y)$ 满足 $1 \\le x \\le W - 1$ 和 $1 \\le y \\le V - 1$，使得 $D(n, x, y)$ 为真且\n$$\ny W = x V,\n$$\n这对于一个非空真子集来说恰好是 $V_{1} W = V W_{1}$。因此，类别 1 是多项式时间内可解的。\n\n类别 2（一般的二进制编码整数）：我们通过从一个已知的 NP 难问题进行归约来证明其 NP 难性。考虑以下代数变换。给定任意正整数的多重集 $a_{1}, \\dots, a_{n}$，选择一个严格大于 $\\max_{i} a_{i}$ 的整数 $M$，并通过为每个 $i$ 设置 $v_{i} := M - a_{i}, \\quad w_{i} := M + a_{i}$ 来定义一个 BALANCED_RATIO_PARTITION 的实例。\n对于任意大小为 $m$ 的子集 $S_{1}$，令 $A_{1} := \\sum_{i \\in S_{1}} a_{i}$ 且令 $A := \\sum_{i=1}^{n} a_{i}$。那么\n$$\nV_{1} = m M - A_{1}, \\quad W_{1} = m M + A_{1}, \\quad V_{2} = (n - m) M - (A - A_{1}), \\quad W_{2} = (n - m) M + (A - A_{1}).\n$$\n比率相等条件\n$$\n\\frac{V_{1}}{W_{1}} = \\frac{V_{2}}{W_{2}}\n$$\n通过直接展开并消去 $M^{2}$ 和低阶混合项，等价于\n$$\nn A_{1} = m A \\quad \\iff \\quad \\frac{A_{1}}{m} = \\frac{A}{n}.\n$$\n因此，对构造的 $(v_{i}, w_{i})$ 的 BALANCED_RATIO_PARTITION 问题等价于对 $a_{i}$ 的等均值子集问题，即：是否存在一个非空真子集，其平均值等于全局平均值。等均值子集问题对于一般的二进制编码整数是 NP 难的，这可以通过标准归约（例如，从 PARTITION 问题或 3-PARTITION 问题，通过一个固定子集大小 $m$ 并强制 $A_{1} = \\frac{m}{n} A$ 的填充和基数放大论证，当 $m = \\frac{n}{2}$ 时特化为等和问题）来证明。因为上述映射可以在输入规模的多项式时间内计算，并且保持解不变，所以 BALANCED_RATIO_PARTITION 对于类别 2 是 NP 难的。由于验证是多项式的，该问题对于类别 2 是 NP 完备的。\n\n综合以上分析，最准确的陈述是该问题对于类别 1 的实例是多项式时间内可解的，但对于类别 2 的实例是 NP 难的。\n\n因此，正确选项是 A。",
            "answer": "$$\\boxed{A}$$"
        }
    ]
}