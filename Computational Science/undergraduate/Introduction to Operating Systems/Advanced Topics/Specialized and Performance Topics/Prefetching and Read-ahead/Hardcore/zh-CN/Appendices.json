{
    "hands_on_practices": [
        {
            "introduction": "预取并非没有代价。系统在尝试隐藏I/O延迟的同时，也可能因为错误的预测而浪费带宽。本练习将通过一个简化的模型，帮助你量化这种权衡关系，并学习如何根据系统可容忍的开销来调整预取策略的激进程度。这是理解和评估预取系统性能的基本功。",
            "id": "3670632",
            "problem": "一个文件系统采用顺序预读（sequential read-ahead）来减轻输入/输出（I/O）延迟。预读控制器以可控速率 $r$（单位为页/秒）发出预取指令。每个预取的页面都有 $p_m$ 的概率是错误预测，这意味着该页面后续不会被工作负载使用。每次页面传输移动 $c_i$ 兆字节（megabytes）的数据。定义期望浪费带宽 $E[W]$ 为因传输最终未被使用的预取页面而消耗的期望数据速率，单位为兆字节/秒。\n\n仅从期望和速率的定义出发，推导出一个用 $r$、$p_m$ 和 $c_i$ 表示的 $E[W]$ 的闭式表达式，然后确定使 $E[W]$ 小于或等于给定容差 $\\gamma$ 的最大 $r$ 值。使用参数 $p_m = 0.27$，$c_i = 0.384$ 兆字节/页，以及 $\\gamma = 12.5$ 兆字节/秒。以页/秒为单位表示最终的 $r$ 值，并将您的答案四舍五入到四位有效数字。",
            "solution": "用户要求我首先推导出期望浪费带宽 $E[W]$ 的闭式表达式，然后利用该表达式求出在给定容差 $\\gamma$ 下的最大预取速率 $r$。\n\n### 第一部分：期望浪费带宽 $E[W]$ 表达式的推导\n\n问题定义了以下量：\n- $r$：预读控制器发出预取指令的速率，单位为页/秒。\n- $p_m$：单个预取页面是错误预测（即未被使用）的概率。\n- $c_i$：单个页面传输的数据量，单位为兆字节/页。\n- $E[W]$：期望浪费带宽，即因未使用的预取页面而消耗的期望数据速率，单位为兆字节/秒。\n\n推导将从速率和期望的定义开始。\n\n我们考虑一个时长为 $t$ 的时间间隔。预取速率为 $r$ 页/秒。我们可以将预取事件建模为一个随机过程。假设该过程是平稳的，在时间间隔 $t$ 内预取的页面期望数量，记为 $E[N(t)]$，由速率乘以时间间隔的持续时间给出：\n$$E[N(t)] = r \\cdot t$$\n单位是 (页/秒) $\\times$ (秒) = 页。\n\n每个预取页面是错误预测的概率为 $p_m$，且各次预测相互独立。设 $M_i$ 是与第 $i$ 个预取页面关联的伯努利随机变量，其中如果该页面是错误预测，则 $M_i=1$，如果被使用，则 $M_i=0$。$M_i$ 的期望值为：\n$$E[M_i] = 1 \\cdot p_m + 0 \\cdot (1-p_m) = p_m$$\n\n在时间间隔 $t$ 内错误预测的页面总数，我们称之为 $N_m(t)$，是在该间隔内预取的所有页面的伯努利变量之和：$N_m(t) = \\sum_{i=1}^{N(t)} M_i$。错误预测页面的期望数量 $E[N_m(t)]$ 可以使用全期望定律（或瓦尔德等式，用于随机变量求和）求得：\n$$E[N_m(t)] = E[E[N_m(t) | N(t)]] = E[N(t) \\cdot p_m] = E[N(t)] \\cdot p_m$$\n代入 $E[N(t)]$ 的表达式：\n$$E[N_m(t)] = (r \\cdot t) \\cdot p_m$$\n\n在时间间隔 $t$ 内浪费的总数据量，我们称之为 $D_W(t)$，是错误预测的页面数乘以每页的数据大小 $c_i$：\n$$D_W(t) = N_m(t) \\cdot c_i$$\n因此，期望浪费数据为：\n$$E[D_W(t)] = E[N_m(t) \\cdot c_i] = E[N_m(t)] \\cdot c_i = (r \\cdot t \\cdot p_m) \\cdot c_i$$\n\n期望浪费带宽 $E[W]$ 定义为期望浪费数据速率。这是单位时间内的期望浪费数据：\n$$E[W] = \\frac{E[D_W(t)]}{t}$$\n代入 $E[D_W(t)]$ 的表达式：\n$$E[W] = \\frac{r \\cdot t \\cdot p_m \\cdot c_i}{t}$$\n时间 $t$ 被消去，得到期望浪费带宽的闭式表达式：\n$$E[W] = r \\cdot p_m \\cdot c_i$$\n该表达式的单位是 (页/秒) $\\times$ (无量纲) $\\times$ (兆字节/页)，正确地得到 兆字节/秒。\n\n### 第二部分：最大预取速率 $r$ 的计算\n\n问题要求找到最大的预取速率 $r$，使得期望浪费带宽 $E[W]$ 保持小于或等于给定的容差 $\\gamma$。约束条件是：\n$$E[W] \\le \\gamma$$\n代入推导出的 $E[W]$ 表达式：\n$$r \\cdot p_m \\cdot c_i \\le \\gamma$$\n为了找到满足此条件的最大 $r$，我们对不等式求解 $r$。由于 $p_m$ 和 $c_i$ 是正的物理量，我们可以用它们的乘积来除不等式两边，而无需改变不等号的方向：\n$$r \\le \\frac{\\gamma}{p_m \\cdot c_i}$$\n因此，$r$ 的最大允许值，我们可以表示为 $r_{max}$，是：\n$$r_{max} = \\frac{\\gamma}{p_m \\cdot c_i}$$\n\n现在，我们将给定的数值代入此表达式：\n- $\\gamma = 12.5$ 兆字节/秒\n- $p_m = 0.27$\n- $c_i = 0.384$ 兆字节/页\n\n计算如下：\n$$r_{max} = \\frac{12.5}{0.27 \\times 0.384}$$\n首先，我们计算分母中的乘积：\n$$p_m \\cdot c_i = 0.27 \\times 0.384 = 0.10368$$\n现在，我们进行除法运算：\n$$r_{max} = \\frac{12.5}{0.10368} \\approx 120.563271605...$$\n问题要求答案四舍五入到四位有效数字。前四位有效数字是 $1$、$2$、$0$ 和 $5$。第五位有效数字是 $6$，大于或等于 $5$，所以我们将第四位有效数字向上取整。\n$$r_{max} \\approx 120.6$$\n单位是 页/秒。\n因此，使期望浪费带宽保持在容差或以下的最高预取速率为 $120.6$ 页/秒。",
            "answer": "$$\n\\boxed{120.6}\n$$"
        },
        {
            "introduction": "为了提高预取的准确性，简单的顺序预读是不够的，我们需要更智能的预测模型。本练习引入了一阶马尔可夫链来描述文件块的访问模式，这是一种比固定概率更精细的预测方法。通过解决这个问题，你将学会如何利用概率模型来做出最优的预取决策，即在有限的资源下，选择最有可能被访问的数据块集合。",
            "id": "3670569",
            "problem": "一个操作系统 (OS) 中的存储栈为顺序文件实现了预取和预读功能。实证追踪表明，在给定当前块的条件下，下一个被访问的块可以被建模为关于块索引的一阶马尔可夫链。设块索引的集合为 $\\{1,2,3,4,5,6\\}$，且该马尔可夫链的转移矩阵为 $M \\in \\mathbb{R}^{6 \\times 6}$，其中 $M_{i,j}$ 是在当前块为 $i$ 的条件下，下一个块为 $j$ 的概率。根据经验估计的转移矩阵为\n$$\nM \\;=\\;\n\\begin{pmatrix}\n0.10  0.20  0.10  0.25  0.25  0.10 \\\\\n0.05  0.15  0.40  0.10  0.20  0.10 \\\\\n0.05  0.10  0.20  0.15  0.30  0.20 \\\\\n0.20  0.10  0.10  0.30  0.20  0.10 \\\\\n0.15  0.15  0.20  0.10  0.20  0.20 \\\\\n0.25  0.10  0.15  0.10  0.15  0.25\n\\end{pmatrix}.\n$$\n在时间 $t$，系统刚刚访问了块 $c_t = 3$。预取器可以在下一次请求访问发生之前，选择一个大小为 $|P_t| = k$（其中 $k=3$）的预取集合 $P_t \\subseteq \\{1,2,3,4,5,6\\}$ 进行并行获取。假设一次预取被计为命中，当且仅当在时间 $t+1$ 请求的下一个块在 $P_t$ 中。对于一个选定的集合 $P_t$，我们将单步预期预取命中概率定义为基于马尔可夫链的下一状态分布的期望值。\n\n仅使用一阶马尔可夫链和期望值的核心定义，从第一性原理推导出一个关于可实现的最大单步预期预取命中概率的闭式表达式，该表达式是矩阵行 $\\{M_{c_t,1},\\dots,M_{c_t,6}\\}$ 和预算 $k$ 的函数。然后使用所提供的数据计算该表达式，以得出最大单步预期预取命中概率的单一数值。将最终答案表示为一个无单位的纯数字。无需四舍五入。",
            "solution": "问题要求推导可实现的最大单步预期预取命中概率的通用表达式，并在特定情况下对其进行求值。系统的行为被建模为一阶马尔可夫链。\n\n首先，我们验证问题陈述的有效性。\n给定的条件如下：\n- 块索引的集合 $S = \\{1, 2, 3, 4, 5, 6\\}$。\n- 一个具有 $6 \\times 6$ 转移矩阵 $M$ 的一阶马尔可夫链。\n- 具体的矩阵 $M$ 如下所示：\n$$\nM \\;=\\;\n\\begin{pmatrix}\n0.10  0.20  0.10  0.25  0.25  0.10 \\\\\n0.05  0.15  0.40  0.10  0.20  0.10 \\\\\n0.05  0.10  0.20  0.15  0.30  0.20 \\\\\n0.20  0.10  0.10  0.30  0.20  0.10 \\\\\n0.15  0.15  0.20  0.10  0.20  0.20 \\\\\n0.25  0.10  0.15  0.10  0.15  0.25\n\\end{pmatrix}\n$$\n- 在时间 $t$ 的当前块是 $c_t = 3$。\n- 选择一个大小为 $|P_t| = k = 3$ 的预取集合 $P_t \\subseteq S$。\n- 如果下一个请求的块 $c_{t+1}$ 在 $P_t$ 中，则发生预取命中。\n\n该问题具有科学依据，它将概率论中的标准定义（马尔可夫链、期望值）应用于一个常见的计算机科学问题（缓存/预取）。矩阵 $M$ 的所有行之和为 1，且所有条目均为非负数，因此它是一个有效的随机矩阵。该问题是适定的，提供了找到唯一最大值所需的所有数据。语言客观而精确。因此，该问题是有效的。\n\n我们开始求解。\n\n设时间 $t$ 系统的状态为当前访问的块，$c_t \\in S$。问题陈述系统刚刚访问了块 $c_t = i$。根据一阶马尔可夫链的定义，下一个访问的块 $c_{t+1}$ 为块 $j$ 的概率由转移概率 $P(c_{t+1} = j | c_t = i) = M_{i,j}$ 给出。\n\n预取集合 $P_t$ 是 $S$ 的一个子集，其大小为 $|P_t| = k$。如果下一个请求的块 $c_{t+1}$ 是所选预取集合 $P_t$ 的一个元素，则发生预取命中。\n\n设 $H$ 为预取命中的指示随机变量。根据定义，如果 $c_{t+1} \\in P_t$，则 $H = 1$；如果 $c_{t+1} \\notin P_t$，则 $H = 0$。\n\n在给定当前状态 $c_t=i$ 和所选预取集合 $P_t$ 的条件下，单步预期预取命中概率是 $H$ 的期望值，记作 $E[H | c_t=i, P_t]$。使用离散随机变量的期望值定义：\n$$ E[H | c_t=i, P_t] = \\sum_{j \\in S} P(c_{t+1} = j | c_t = i) \\cdot I(j \\in P_t) $$\n其中 $I(\\cdot)$ 是指示函数，当其参数为真时值为1，否则为0。\n\n代入马尔可夫链模型的转移概率，我们得到：\n$$ E[H | c_t=i, P_t] = \\sum_{j=1}^{6} M_{i,j} \\cdot I(j \\in P_t) $$\n指示函数确保了我们只对包含在预取集合 $P_t$ 中的块 $j$ 的概率进行求和。这将表达式简化为：\n$$ E[H | c_t=i, P_t] = \\sum_{j \\in P_t} M_{i,j} $$\n该表达式给出了对于特定的 $P_t$ 选择的预期命中概率。\n\n问题要求我们找到可实现的最大单步预期预取命中概率。这涉及到在 $|P_t|=k$ 的约束条件下，选择能使上述和最大化的集合 $P_t$。\n$$ \\max_{P_t \\subseteq S, |P_t|=k} E[H | c_t=i, P_t] = \\max_{P_t \\subseteq S, |P_t|=k} \\sum_{j \\in P_t} M_{i,j} $$\n为了使这个和最大化，我们必须从概率集合 $\\{M_{i,1}, M_{i,2}, \\dots, M_{i,6}\\}$ 中选择值最大的 $k$ 个元素。这是一种贪心选择策略，它在此情境下是最优的，因为各项 $M_{i,j}$ 均为非负数，并且在求和运算中各项是相互独立的。\n\n因此，可实现的最大单步预期预取命中概率的闭式表达式是转移矩阵中对应于当前状态 $c_t$ 的行中的 $k$ 个最大值的和。这完成了问题的第一部分。\n\n现在，我们用所提供的数据进行计算。\n给定的当前状态为 $c_t = 3$。因此，我们关心的是矩阵 $M$ 的第3行，即：\n$$ M_{3, \\cdot} = (M_{3,1}, M_{3,2}, M_{3,3}, M_{3,4}, M_{3,5}, M_{3,6}) = (0.05, 0.10, 0.20, 0.15, 0.30, 0.20) $$\n预取预算为 $k=3$。我们需要从状态3中选择转移概率最高的3个块。\n这些概率是：\n- $P(c_{t+1}=1 | c_t=3) = M_{3,1} = 0.05$\n- $P(c_{t+1}=2 | c_t=3) = M_{3,2} = 0.10$\n- $P(c_{t+1}=3 | c_t=3) = M_{3,3} = 0.20$\n- $P(c_{t+1}=4 | c_t=3) = M_{3,4} = 0.15$\n- $P(c_{t+1}=5 | c_t=3) = M_{3,5} = 0.30$\n- $P(c_{t+1}=6 | c_t=3) = M_{3,6} = 0.20$\n\n为了找到 $k=3$ 个最大的概率，我们可以将它们按降序排序：\n$0.30$ (对应块 $5$)，$0.20$ (对应块 $3$)，$0.20$ (对应块 $6$)，$0.15$ (对应块 $4$)，$0.10$ (对应块 $2$)，$0.05$ (对应块 $1$)。\n\n三个最大的概率是 $0.30$、$0.20$ 和 $0.20$。\n因此，最优预取集合是 $P_t^* = \\{3, 5, 6\\}$。该集合的大小为 $|P_t^*|=3$，与预算 $k$ 相符。\n\n可实现的最大单步预期预取命中概率是这三个最大概率的和：\n$$ \\max E[H] = M_{3,5} + M_{3,3} + M_{3,6} $$\n$$ \\max E[H] = 0.30 + 0.20 + 0.20 = 0.70 $$\n这就是最终的数值。",
            "answer": "$$\n\\boxed{0.70}\n$$"
        },
        {
            "introduction": "预取到缓存的数据应该停留多久？这是一个关键的缓存管理问题。如果数据停留太久而未被使用，会浪费宝贵的内存资源；如果过早被驱逐，当真正需要它时又会导致缓存未命中。本练习要求你设计一个最优的超时策略，通过建立成本模型，在内存驻留成本和未命中惩罚之间找到最佳平衡点，从而最小化系统的总期望成本。",
            "id": "3670611",
            "problem": "一个操作系统 (OS) 的存储子系统执行预读预取操作，将数据载入页面缓存。每个预取的页面在不久的将来可能会也可能不会被应用程序使用。对单个预取页面的首次使用时间建模如下。页面有 $p$ 的概率最终被访问，并且在最终会被访问的条件下，从预取到首次访问的时间 $T$ 服从速率为 $\\lambda$ (单位: $\\mathrm{s}^{-1}$) 的指数分布。页面有 $1-p$ 的概率在预取后永不被访问。\n\n为了限制不必要的内存占用，操作系统采用了一种超时策略：如果一个预取的页面在预取后 $\\tau$ 秒内未被访问，它将被从缓存中丢弃。当页面驻留且未使用时，它会以恒定的速率 $c$ (单位：成本单位/秒) 产生内存驻留成本。如果页面因超时而被丢弃，但之后又被访问（即，它本应被使用但 $T\\tau$），系统将产生 $M$（单位：成本单位）的未命中惩罚，以按需获取该页面。\n\n假设页面之间相互独立，且成本是可加的。对于单个预取页面，请从第一性原理推导总期望成本作为 $\\tau$ 的函数的表达式，并确定使该期望成本最小化的值 $\\tau^{\\star}$。然后，使用参数 $p = 0.7$, $\\lambda = 0.5\\,\\mathrm{s}^{-1}$, $c = 1$ (成本单位/秒) 和 $M = 10$ (成本单位) 计算 $\\tau^{\\star}$ 的值。请以秒为单位表示最终的 $\\tau^{\\star}$，并将答案四舍五入到四位有效数字。",
            "solution": "该问题要求推导在超时策略下预取页面的总期望成本，并确定使该成本最小化的最佳超时时长 $\\tau^{\\star}$。\n\n设 $T$ 为表示从预取到页面首次访问时间的随机变量。题目为 $T$ 指定了一个混合分布。设 $A$ 为页面最终被访问的事件。我们已知 $P(A) = p$。如果页面不被访问，这对应于 $T = \\infty$，因此 $P(T=\\infty) = 1-p$。在事件 $A$ 的条件下，时间 $T$ 服从速率为 $\\lambda$ 的指数分布。给定 $A$ 时 $T$ 的条件概率密度函数 (PDF) 为：\n$$f_{T|A}(t) = \\lambda \\exp(-\\lambda t), \\quad t \\ge 0$$\n相应的条件累积分布函数 (CDF) 为 $F_{T|A}(t) = P(T \\le t | A) = 1 - \\exp(-\\lambda t)$，生存函数为 $P(T  t | A) = \\exp(-\\lambda t)$。\n\n成本的产生取决于 $T$ 和超时 $\\tau$ 之间的关系。设 $C(\\tau)$ 为单个页面的总成本。我们在三种互斥的场景下分析成本：\n1.  页面在超时前被访问 ($T \\le \\tau$)。这只在页面注定要被访问（事件 $A$）时发生。页面在内存中驻留时间为 $T$。成本为驻留成本，即 $cT$。\n2.  页面本应在超时后被访问 ($T  \\tau$)。这也需要事件 $A$ 发生。页面在内存中驻留整个超时时长 $\\tau$，产生驻留成本 $c\\tau$。然后它被丢弃。当在时间 $T$ 请求访问时，发生未命中，产生惩罚 $M$。总成本为 $c\\tau + M$。\n3.  页面永不被访问 ($T=\\infty$)。页面在内存中驻留时间 $\\tau$ 后被丢弃。成本纯粹是驻留成本，即 $c\\tau$。\n\n现在我们可以使用全期望定律，根据页面最终是否被访问（事件 $A$）或不被访问（事件 $A^c$，对应于 $T=\\infty$）作为条件，来构建总期望成本 $J(\\tau) = E[C(\\tau)]$ 的公式。\n$$J(\\tau) = E[C(\\tau) | A] P(A) + E[C(\\tau) | A^c] P(A^c)$$\n我们已知 $P(A) = p$ 和 $P(A^c) = 1-p$。\n\n如果页面永不被访问（事件 $A^c$），成本确定为 $c\\tau$。因此，\n$$E[C(\\tau) | A^c] = c\\tau$$\n\n如果页面最终被访问（事件 $A$），期望成本通过对 $T$ 的条件分布进行积分来计算：\n$$E[C(\\tau) | A] = \\int_0^{\\tau} (ct) f_{T|A}(t) dt + \\int_{\\tau}^{\\infty} (c\\tau+M) f_{T|A}(t) dt$$\n代入 $f_{T|A}(t) = \\lambda \\exp(-\\lambda t)$：\n$$E[C(\\tau) | A] = \\int_0^{\\tau} ct \\lambda \\exp(-\\lambda t) dt + (c\\tau+M) \\int_{\\tau}^{\\infty} \\lambda \\exp(-\\lambda t) dt$$\n\n第二个积分是 $(c\\tau+M) P(T  \\tau | A) = (c\\tau+M) \\exp(-\\lambda \\tau)$。\n\n第一个积分需要使用分部积分法。设 $u=t$ 和 $dv = c\\lambda \\exp(-\\lambda t) dt$。则 $du=dt$ 且 $v = -c \\exp(-\\lambda t)$。\n\\begin{align*} \\int_0^{\\tau} ct \\lambda \\exp(-\\lambda t) dt = \\left[t(-c \\exp(-\\lambda t))\\right]_0^{\\tau} - \\int_0^{\\tau} (-c \\exp(-\\lambda t)) dt \\\\ = -\\tau c \\exp(-\\lambda \\tau) + c \\int_0^{\\tau} \\exp(-\\lambda t) dt \\\\ = -\\tau c \\exp(-\\lambda \\tau) + c \\left[-\\frac{1}{\\lambda}\\exp(-\\lambda t)\\right]_0^{\\tau} \\\\ = -\\tau c \\exp(-\\lambda \\tau) + c \\left(-\\frac{1}{\\lambda}\\exp(-\\lambda \\tau) + \\frac{1}{\\lambda}\\right) \\\\ = \\frac{c}{\\lambda}(1 - \\exp(-\\lambda \\tau)) - c\\tau \\exp(-\\lambda \\tau)\\end{align*}\n\n组合 $E[C(\\tau)|A]$ 的各个部分：\n\\begin{align*} E[C(\\tau) | A] = \\left( \\frac{c}{\\lambda}(1 - \\exp(-\\lambda \\tau)) - c\\tau \\exp(-\\lambda \\tau) \\right) + (c\\tau+M) \\exp(-\\lambda \\tau) \\\\ = \\frac{c}{\\lambda} - \\frac{c}{\\lambda}\\exp(-\\lambda \\tau) - c\\tau \\exp(-\\lambda \\tau) + c\\tau \\exp(-\\lambda \\tau) + M \\exp(-\\lambda \\tau) \\\\ = \\frac{c}{\\lambda} + \\left(M - \\frac{c}{\\lambda}\\right) \\exp(-\\lambda \\tau)\\end{align*}\n\n现在，我们组合出总期望成本 $J(\\tau)$ 的完整表达式：\n\\begin{align*} J(\\tau) = p \\left[ \\frac{c}{\\lambda} + \\left(M - \\frac{c}{\\lambda}\\right) \\exp(-\\lambda \\tau) \\right] + (1-p)c\\tau \\\\ = c(1-p)\\tau + p\\left(M - \\frac{c}{\\lambda}\\right)\\exp(-\\lambda \\tau) + \\frac{pc}{\\lambda}\\end{align*}\n这就是总期望成本作为 $\\tau$ 的函数的表达式。\n\n为了找到最小化 $J(\\tau)$ 的最佳超时 $\\tau^{\\star}$，我们对 $J(\\tau)$ 关于 $\\tau$ 求导，并令导数为零。我们考虑 $\\tau \\ge 0$。\n\\begin{align*} \\frac{dJ}{d\\tau} = \\frac{d}{d\\tau} \\left[ c(1-p)\\tau + p\\left(M - \\frac{c}{\\lambda}\\right)\\exp(-\\lambda \\tau) + \\frac{pc}{\\lambda} \\right] \\\\ = c(1-p) + p\\left(M - \\frac{c}{\\lambda}\\right)(-\\lambda)\\exp(-\\lambda \\tau) \\\\ = c(1-p) - p(\\lambda M - c)\\exp(-\\lambda \\tau)\\end{align*}\n令 $\\frac{dJ}{d\\tau} = 0$ 以找到临界点 $\\tau^{\\star}$：\n$$c(1-p) = p(\\lambda M - c)\\exp(-\\lambda \\tau^{\\star})$$\n$$\\exp(-\\lambda \\tau^{\\star}) = \\frac{c(1-p)}{p(\\lambda M - c)}$$\n解出 $\\tau^{\\star}$：\n$$-\\lambda \\tau^{\\star} = \\ln\\left(\\frac{c(1-p)}{p(\\lambda M - c)}\\right)$$\n$$\\tau^{\\star} = -\\frac{1}{\\lambda} \\ln\\left(\\frac{c(1-p)}{p(\\lambda M - c)}\\right) = \\frac{1}{\\lambda} \\ln\\left(\\frac{p(\\lambda M - c)}{c(1-p)}\\right)$$\n\n这个解只有在 $\\tau^{\\star} \\ge 0$ 时才有物理意义。这要求对数的参数大于或等于 $1$。\n$$\\frac{p(\\lambda M - c)}{c(1-p)} \\ge 1 \\implies p(\\lambda M - c) \\ge c(1-p) \\implies p\\lambda M - pc \\ge c - pc \\implies p\\lambda M \\ge c$$\n如果 $p\\lambda M  c$，对数的参数小于 $1$，会得到一个负的 $\\tau^{\\star}$，这不具有物理意义。在这种情况下，对于所有 $\\tau \\ge 0$，$\\frac{dJ}{d\\tau} = c(1-p) - p(\\lambda M - c)\\exp(-\\lambda \\tau) = c(1-p) + p(c - \\lambda M)\\exp(-\\lambda \\tau) > 0$。成本函数 $J(\\tau)$ 是严格递增的，因此最小值出现在边界处，即 $\\tau^{\\star} = 0$。\n二阶导数 $\\frac{d^2J}{d\\tau^2} = p\\lambda(\\lambda M - c)\\exp(-\\lambda \\tau)$ 在 $\\lambda M > c$ 时为正，这证实了该临界点是一个局部最小值。给定 $p > 0$，条件 $p\\lambda M \\ge c$ 意味着 $\\lambda M > c$。\n\n所以，最佳超时为：\n$$\\tau^{\\star} = \\begin{cases} \\frac{1}{\\lambda} \\ln\\left(\\frac{p(\\lambda M - c)}{c(1-p)}\\right)  \\text{if } p\\lambda M > c \\\\ 0  \\text{if } p\\lambda M \\le c \\end{cases}$$\n\n我们现在使用给定的参数计算 $\\tau^{\\star}$：$p = 0.7$, $\\lambda = 0.5\\,\\mathrm{s}^{-1}$, $c = 1$ 和 $M = 10$。\n首先，检查条件：\n$$p\\lambda M = (0.7)(0.5)(10) = 3.5$$\n由于 $c=1$，我们有 $p\\lambda M = 3.5 > 1 = c$。因此，我们使用对数公式计算 $\\tau^{\\star}$。\n\n将这些值代入表达式：\n$$\\tau^{\\star} = \\frac{1}{0.5} \\ln\\left(\\frac{0.7(0.5 \\times 10 - 1)}{1(1 - 0.7)}\\right)$$\n$$\\tau^{\\star} = 2 \\ln\\left(\\frac{0.7(5 - 1)}{0.3}\\right)$$\n$$\\tau^{\\star} = 2 \\ln\\left(\\frac{0.7 \\times 4}{0.3}\\right)$$\n$$\\tau^{\\star} = 2 \\ln\\left(\\frac{2.8}{0.3}\\right) = 2 \\ln\\left(\\frac{28}{3}\\right)$$\n现在，我们计算其数值：\n$$\\tau^{\\star} = 2 \\ln(9.3333...) \\approx 2 \\times 2.233592 \\approx 4.467184\\,\\mathrm{s}$$\n四舍五入到四位有效数字，我们得到 $\\tau^{\\star} = 4.467\\,\\mathrm{s}$。",
            "answer": "$$\\boxed{4.467}$$"
        }
    ]
}