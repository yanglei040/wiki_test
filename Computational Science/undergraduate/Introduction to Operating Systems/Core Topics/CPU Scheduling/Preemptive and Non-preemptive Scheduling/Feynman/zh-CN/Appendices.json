{
    "hands_on_practices": [
        {
            "introduction": "抢占式和非抢占式调度是操作系统中的核心概念。本练习  直接对比了最短作业优先 (SJF) 及其抢占式版本——最短剩余时间优先 (SRTF) 的性能。通过亲手构建调度序列并计算平均等待时间，您将深刻理解抢占在何时能够显著优化系统响应，特别是当任务的执行时间差异较大时。",
            "id": "3670299",
            "problem": "一个操作系统运行在单核处理器上，上下文切换开销可忽略不计。考虑$4$个独立的CPU密集型作业，它们的到达时间$a_i$和CPU突发时间$b_i$分别为$(a_1,b_1)=(0,x)$，$(a_2,b_2)=(1,3)$，$(a_3,b_3)=(2,3)$，$(a_4,b_4)=(3,3)$，其中$x$是一个满足$x \\geq 3$的实数参数。时间以抽象单位$u$计量。调度程序使用以下两种策略之一：非抢占式最短作业优先 (SJF) 和抢占式最短剩余时间优先 (SRTF)。在SRTF中，仅当一个到达的作业的剩余时间严格小于当前正在运行的作业的剩余时间时，才会发生抢占；平局情况不会导致抢占。当多个作业具有同等资格时，打破平局的规则是选择最早到达时间的作业，如果仍然平局，则选择作业索引号递增的作业。如果任何作业准备就绪，处理器绝不空闲。\n\n仅使用等待时间、平均等待时间的基本定义以及上述SJF和SRTF的操作规则，完成以下任务：\n\n- 为给定的工作负载，构建每种策略所产生的确切执行调度表（执行顺序和运行区间），并将其表示为$x$的函数。\n- 根据这些调度表，推导出每个作业的等待时间$W_i$，以及SJF策略下的平均等待时间$\\overline{W}_{\\mathrm{SJF}}(x)$和SRTF策略下的平均等待时间$\\overline{W}_{\\mathrm{SRTF}}(x)$。\n- 确定使$\\overline{W}_{\\mathrm{SRTF}}(x)$严格小于$\\overline{W}_{\\mathrm{SJF}}(x)$的关于$x$的条件。\n\n设$V(x)$表示CPU突发时间多重集$\\{x,3,3,3\\}$的总体方差，单位为$u^2$。求唯一的临界方差值$V^{\\star}$，使得对于所有满足$x \\geq 3$且$V(x) > V^{\\star}$的$x$，严格不等式$\\overline{W}_{\\mathrm{SRTF}}(x)  \\overline{W}_{\\mathrm{SJF}}(x)$恒成立。将您的最终答案表示为单个最简分数。最终数值应不带单位报告。无需四舍五入。方差应理解为四个突发时间的总体方差，时间单位为$u$（因此方差单位为$u^2$），但仅报告数值。",
            "solution": "用户要求我找到一个与两种调度算法性能差异相关的CPU突发时间方差的临界值。\n\n### 步骤1：问题验证\n\n我将首先验证问题陈述。\n\n**从问题中提取的已知条件：**\n- **处理器：** 单核。\n- **上下文切换开销：** 可忽略不计。\n- **作业：** $4$个独立的CPU密集型作业。\n- **作业数据（到达时间 $a_i$，突发时间 $b_i$）：**\n  - 作业1： $(a_1, b_1) = (0, x)$\n  - 作业2： $(a_2, b_2) = (1, 3)$\n  - 作业3： $(a_3, b_3) = (2, 3)$\n  - 作业4： $(a_4, b_4) = (3, 3)$\n- **参数：** $x$ 是一个满足 $x \\geq 3$ 的实数参数。\n- **时间单位：** $u$。\n- **调度策略：**\n  - 非抢占式最短作业优先 (SJF)。\n  - 抢占式最短剩余时间优先 (SRTF)。\n- **SRTF抢占规则：** 仅当一个到达的作业的剩余时间严格小于当前正在运行的作业的剩余时间时，才会发生抢占。\n- **平局打破规则：** 对于具有同等资格的作业，打破平局的规则是选择最早到达时间的作业。如果仍然平局，则选择作业索引号递增的作业。\n- **处理器状态：** 如果就绪队列中有作业，处理器绝不空闲。\n- **定义：**\n  - 等待时间 ($W_i$): $W_i = (\\text{完成时间})_i - a_i - b_i$。\n  - 平均等待时间：$\\overline{W}$。\n- **目标：**\n  1. 为SJF和SRTF构建关于$x$的函数形式的调度表。\n  2. 推导每个作业的等待时间以及平均等待时间$\\overline{W}_{\\mathrm{SJF}}(x)$和$\\overline{W}_{\\mathrm{SRTF}}(x)$。\n  3. 确定使$\\overline{W}_{\\mathrm{SRTF}}(x)  \\overline{W}_{\\mathrm{SJF}}(x)$成立的关于$x$的条件。\n  4. 设$V(x)$为突发时间集合$\\{x, 3, 3, 3\\}$的总体方差。\n  5. 找到唯一的临界方差$V^{\\star}$，使得对于所有满足$x \\geq 3$且$V(x) > V^{\\star}$的$x$，不等式$\\overline{W}_{\\mathrm{SRTF}}(x)  \\overline{W}_{\\mathrm{SJF}}(x)$成立。\n\n**验证结论：**\n该问题具有科学依据，提法明确，目标客观，且内部一致。它描述了操作系统理论（CPU调度）中的一个标准场景，具有明确定义的规则和可量化的目标。所有必要信息均已提供，没有矛盾之处。该问题需要严谨的、分步的分析，使其成为计算机科学基础领域中一个不简单但可解的练习。该问题被认定为**有效**。\n\n### 步骤2：求解推导\n\n我现在开始进行求解。在所有计算中，时间均以单位 $u$ 计量。\n\n**非抢占式最短作业优先 (SJF) 分析**\n在非抢占式策略下，作业一旦开始，就会一直运行直到完成。\n- 在时间$t=0$时，只有作业1到达。它被选中运行。其突发时间为$b_1 = x$。\n- 作业1从$t=0$运行到$t=x$。\n- 在作业1执行期间，作业2、3和4分别在时间$t=1$、$t=2$和$t=3$到达。\n- 在时间$t=x$时，作业1完成。就绪队列中包含作业2、3和4。\n- 调度程序现在必须选择下一个作业。它们的突发时间分别为$b_2=3$、$b_3=3$和$b_4=3$。由于所有突发时间都相等，因此使用最早到达时间的平局打破规则。\n- 作业2在$t=1$到达，作业3在$t=2$到达，作业4在$t=3$到达。作业2被首先选中。\n- 作业2从$t=x$运行到$t=x+3$。\n- 在$t=x+3$时，剩下的作业是作业3和作业4。两者的突发时间都为$3$。作业3比作业4早到达（$t=2$ vs $t=3$），所以作业3被选中。\n- 作业3从$t=x+3$运行到$t=x+6$。\n- 最后，作业4从$t=x+6$运行到$t=x+9$。\n\nSJF的调度顺序是：作业1 $\\to$ 作业2 $\\to$ 作业3 $\\to$ 作业4。\n完成时间 ($C_i$): $C_1=x$, $C_2=x+3$, $C_3=x+6$, $C_4=x+9$。\n\n每个作业的等待时间为 $W_i = C_i - a_i - b_i$。\n- $W_{1, \\mathrm{SJF}} = x - 0 - x = 0$\n- $W_{2, \\mathrm{SJF}} = (x+3) - 1 - 3 = x-1$\n- $W_{3, \\mathrm{SJF}} = (x+6) - 2 - 3 = x+1$\n- $W_{4, \\mathrm{SJF}} = (x+9) - 3 - 3 = x+3$\n\nSJF的平均等待时间为：\n$$ \\overline{W}_{\\mathrm{SJF}}(x) = \\frac{1}{4} \\sum_{i=1}^{4} W_{i, \\mathrm{SJF}} = \\frac{1}{4} (0 + (x-1) + (x+1) + (x+3)) = \\frac{3x+3}{4} $$\n\n**抢占式最短剩余时间优先 (SRTF) 分析**\nSRTF的行为取决于是否发生抢占。如果一个到达的作业的突发时间严格小于当前运行作业的剩余时间，则会发生抢占。\n- 在$t=0$时，作业1到达并开始运行。\n- 在$t=1$时，作业2到达，其突发时间$b_2=3$。作业1已运行1个时间单位，其剩余时间为$x-1$。如果$3  x-1$，即$x > 4$，则发生抢占。这需要根据$x$的值进行情况分析。\n\n**情况1：$3 \\leq x \\leq 4$**\n- 在$t=1$时，作业2到达($b_2=3$)。作业1的剩余时间为$x-1$。由于$x \\leq 4$，我们有$x-1 \\leq 3$。抢占条件$3  x-1$不成立。作业1继续运行。\n- 在$t=2$时，作业3到达($b_3=3$)。作业1的剩余时间为$x-2$。由于$x \\leq 4$，我们有$x-2 \\leq 2$。条件$3  x-2$不成立。作业1继续。\n- 在$t=3$时，作业4到达($b_4=3$)。作业1的剩余时间为$x-3$。由于$x \\leq 4$，我们有$x-3 \\leq 1$。条件$3  x-3$不成立。作业1继续。\n- 作业1一直运行到$t=x$完成。没有发生抢占。后续作业2、3、4的调度与SJF情况相同。\n- 因此，对于$3 \\leq x \\leq 4$，调度表和等待时间与SJF策略相同。\n- $\\overline{W}_{\\mathrm{SRTF}}(x) = \\overline{W}_{\\mathrm{SJF}}(x) = \\frac{3x+3}{4}$ 对于 $3 \\leq x \\leq 4$。\n\n**情况2：$x > 4$**\n- 在$t=0$时，作业1 ($b_1=x$) 开始运行。\n- 在$t=1$时，作业2 ($b_2=3$) 到达。作业1的剩余时间为$x-1$。由于$x>4$，我们有$x-1>3$。满足抢占条件$3  x-1$。作业1被抢占，作业2开始运行。\n- 在$t=2$时，作业3 ($b_3=3$) 到达。作业2的剩余时间为$3-1=2$。抢占条件$3  2$不成立。作业2继续运行。\n- 在$t=3$时，作业4 ($b_4=3$) 到达。作业2的剩余时间为$2-1=1$。抢占条件$3  1$不成立。作业2继续运行。\n- 作业2从$t=1$运行到$t=1+3=4$，此时完成。\n- 在$t=4$时，就绪队列包含：作业1（剩余时间$x-1 > 3$）、作业3（突发时间$3$）和作业4（突发时间$3$）。最短剩余时间是作业3和作业4的$3$。根据平局打破规则，选择作业3（在$t=2$到达）而不是作业4（在$t=3$到达）。\n- 作业3从$t=4$运行到$t=4+3=7$。\n- 在$t=7$时，就绪队列包含：作业1（剩余时间$x-1 > 3$）和作业4（突发时间$3$）。作业4的时间更短，被选中。\n- 作业4从$t=7$运行到$t=7+3=10$。\n- 在$t=10$时，只剩下作业1。它恢复执行，并运行其剩余的$x-1$个时间单位。\n- 作业1在$t = 10 + (x-1) = x+9$完成。\n\n当$x>4$时，完成时间($C_i$)为：$C_1=x+9$, $C_2=4$, $C_3=7$, $C_4=10$。\n等待时间计算为$W_i = C_i - a_i - b_i$：\n- $W_{1, \\mathrm{SRTF}} = (x+9) - 0 - x = 9$\n- $W_{2, \\mathrm{SRTF}} = 4 - 1 - 3 = 0$\n- $W_{3, \\mathrm{SRTF}} = 7 - 2 - 3 = 2$\n- $W_{4, \\mathrm{SRTF}} = 10 - 3 - 3 = 4$\n\n当$x>4$时，SRTF的平均等待时间为：\n$$ \\overline{W}_{\\mathrm{SRTF}}(x) = \\frac{1}{4} (9 + 0 + 2 + 4) = \\frac{15}{4} $$\n对于所有$x > 4$，该值是恒定的。\n\n**$\\overline{W}_{\\mathrm{SRTF}}(x)  \\overline{W}_{\\mathrm{SJF}}(x)$ 的条件**\n- 对于$3 \\leq x \\leq 4$，我们有$\\overline{W}_{\\mathrm{SRTF}}(x) = \\overline{W}_{\\mathrm{SJF}}(x)$，因此严格不等式不成立。\n- 对于$x > 4$，我们比较$\\overline{W}_{\\mathrm{SRTF}}(x) = \\frac{15}{4}$和$\\overline{W}_{\\mathrm{SJF}}(x) = \\frac{3x+3}{4}$。\n不等式为$\\frac{15}{4}  \\frac{3x+3}{4}$。\n$$ 15  3x+3 $$\n$$ 12  3x $$\n$$ 4  x $$\n这与我们的情况假设($x > 4$)一致。\n因此，严格不等式$\\overline{W}_{\\mathrm{SRTF}}(x)  \\overline{W}_{\\mathrm{SJF}}(x)$成立的充要条件是$x>4$。\n\n**方差计算与临界值**\n设$V(x)$为突发时间多重集$\\{x, 3, 3, 3\\}$的总体方差。\n总体均值$\\mu$为：\n$$ \\mu = \\frac{x+3+3+3}{4} = \\frac{x+9}{4} $$\n总体方差$V(x) = \\frac{1}{N}\\sum(b_i - \\mu)^2$为：\n$$ V(x) = \\frac{1}{4} \\left[ \\left(x - \\frac{x+9}{4}\\right)^2 + 3 \\times \\left(3 - \\frac{x+9}{4}\\right)^2 \\right] $$\n$$ V(x) = \\frac{1}{4} \\left[ \\left(\\frac{4x - x - 9}{4}\\right)^2 + 3 \\times \\left(\\frac{12 - x - 9}{4}\\right)^2 \\right] $$\n$$ V(x) = \\frac{1}{4} \\left[ \\left(\\frac{3x - 9}{4}\\right)^2 + 3 \\times \\left(\\frac{3 - x}{4}\\right)^2 \\right] $$\n$$ V(x) = \\frac{1}{4} \\left[ \\frac{9(x-3)^2}{16} + \\frac{3(3-x)^2}{16} \\right] $$\n因为$(3-x)^2 = (x-3)^2$：\n$$ V(x) = \\frac{1}{4} \\left[ \\frac{9(x-3)^2 + 3(x-3)^2}{16} \\right] = \\frac{1}{64} [12(x-3)^2] = \\frac{3(x-3)^2}{16} $$\n问题要求找到一个临界方差$V^{\\star}$，使得对于所有满足$x \\geq 3$且$V(x) > V^{\\star}$的$x$，不等式$\\overline{W}_{\\mathrm{SRTF}}(x)  \\overline{W}_{\\mathrm{SJF}}(x)$成立。\n我们发现此不等式在$x > 4$时成立。\n我们现在必须找到对应于边界条件$x=4$的值$V^{\\star}$。\n函数$V(x) = \\frac{3}{16}(x-3)^2$在$x > 3$时是严格递增的。因此，不等式$x>4$等价于不等式$V(x) > V(4)$。\n临界方差$V^{\\star}$就是方差在$x=4$时的值。\n$$ V^{\\star} = V(4) = \\frac{3(4-3)^2}{16} = \\frac{3(1)^2}{16} = \\frac{3}{16} $$\n对于任何满足$x \\ge 3$且$V(x) > \\frac{3}{16}$的$x$，我们必有$\\frac{3(x-3)^2}{16} > \\frac{3}{16}$，这意味着$(x-3)^2 > 1$。因为$x \\ge 3$，所以$x-3 \\ge 0$，因此我们可以开方得到$x-3 > 1$，即$x>4$。这正是SRTF严格优于SJF的条件。\n临界方差值为$\\frac{3}{16}$。这是一个最简分数。",
            "answer": "$$\\boxed{\\frac{3}{16}}$$"
        },
        {
            "introduction": "除了最小化等待时间，调度的“公平性”也是一个重要的衡量标准。本练习  引入了基于时间片的轮转 (Round Robin) 算法，并将其与非抢占式的 SJF 进行比较。您将通过计算完成时间的方差，来量化和探讨一个深刻的权衡：轮转调度在分配 CPU 时间上看似公平，但有时会导致任务完成时间的巨大差异。",
            "id": "3670302",
            "problem": "考虑一个单处理器系统，在两种策略下调度三个进程：带抢占的轮转（RR）和不带抢占的最短作业优先（SJF）。将轮转（RR）定义为一种抢占式策略，它循环遍历就绪队列，为每个就绪进程分配一个固定的时间片 $q$；将最短作业优先（SJF）定义为一种非抢占式策略，它会运行可用进程中剩余处理时间最短的那个直至完成，然后再选择下一个。所有进程在时间 $0$ 到达，并且没有输入/输出阻塞。\n\n假设工作负载为三个进程 $P_1$、$P_2$ 和 $P_3$，其 CPU 突发时间分别为 $B_1 = 30$、$B_2 = 30$ 和 $B_3 = 90$（时间单位相同）。在 RR 策略下，使用时间片 $q = 10$（时间单位相同），并假设在时间 $0$ 时 RR 就绪队列的顺序是 $\\langle P_1, P_2, P_3 \\rangle$，且 SJF 中的平局由进程标识符按升序打破。将进程 $P_i$ 的完成时间 $C_i$ 定义为从时间 $0$ 开始到 $P_i$ 完成其所有必需的 CPU 突发时间所经过的时间。\n\n你需要使用总体方差来量化两种策略下完成时间的差异。对于完成时间的多重集 $\\{C_1, C_2, C_3\\}$，定义总体均值 $\\mu = \\frac{1}{3}\\sum_{i=1}^{3} C_i$ 和总体方差 $\\sigma^2 = \\frac{1}{3}\\sum_{i=1}^{3} (C_i - \\mu)^2$。\n\n从上面给出的 RR 和 SJF 的基本定义以及完成时间的定义出发，计算比率\n$$\\rho = \\frac{\\sigma^2_{\\mathrm{RR}}}{\\sigma^2_{\\mathrm{SJF}}}$$\n其中 $\\sigma^2_{\\mathrm{RR}}$ 是带抢占的 RR 策略下完成时间的总体方差，$\\sigma^2_{\\mathrm{SJF}}$ 是非抢占式 SJF 策略下完成时间的总体方差。将你的最终答案表示为一个没有舍入的精确值。",
            "solution": "该问题定义明确，在操作系统理论领域有科学依据，并包含进行计算所需的所有必要信息。因此，该问题是有效的。目标是计算比率 $\\rho = \\frac{\\sigma^2_{\\mathrm{RR}}}{\\sigma^2_{\\mathrm{SJF}}}$，其中 $\\sigma^2_{\\mathrm{RR}}$ 和 $\\sigma^2_{\\mathrm{SJF}}$ 分别是在轮转（RR）和非抢占式最短作业优先（SJF）调度策略下三个进程完成时间的总体方差。\n\n给定3个进程 $P_1$、$P_2$ 和 $P_3$，其 CPU 突发时间分别为 $B_1 = 30$、$B_2 = 30$ 和 $B_3 = 90$。所有进程都在时间 $t=0$ 到达。\n\n首先，我们分析非抢占式最短作业优先（SJF）调度策略。\n在时间 $t=0$ 时，所有三个进程 $P_1$、$P_2$ 和 $P_3$ 都在就绪队列中。调度程序必须选择突发时间最短的进程。进程 $P_1$ 和 $P_2$ 的突发时间最短，均为 $30$。问题说明，平局由进程标识符按升序打破。因此，选择 $P_1$ 首先运行。\n由于 SJF 是非抢占式的，$P_1$ 会一直运行直到完成。\n$P_1$ 从 $t=0$ 运行到 $t=30$。$P_1$ 的完成时间是 $C_{1, \\mathrm{SJF}} = 30$。\n在时间 $t=30$ 时，剩余的进程是 $P_2$（突发时间 $B_2=30$）和 $P_3$（突发时间 $B_3=90$）。调度程序选择较短的作业，即 $P_2$。\n$P_2$ 从 $t=30$ 运行到 $t=30+30=60$。$P_2$ 的完成时间是 $C_{2, \\mathrm{SJF}} = 60$。\n在时间 $t=60$ 时，唯一剩下的进程是 $P_3$。\n$P_3$ 从 $t=60$ 运行到 $t=60+90=150$。$P_3$ 的完成时间是 $C_{3, \\mathrm{SJF}} = 150$。\n在 SJF 策略下，完成时间的集合是 $\\{C_{1, \\mathrm{SJF}}, C_{2, \\mathrm{SJF}}, C_{3, \\mathrm{SJF}}\\} = \\{30, 60, 150\\}$。\n\n现在，我们计算总体方差 $\\sigma^2_{\\mathrm{SJF}}$。首先，我们求出平均完成时间 $\\mu_{\\mathrm{SJF}}$。\n$$ \\mu_{\\mathrm{SJF}} = \\frac{1}{3} \\sum_{i=1}^{3} C_{i, \\mathrm{SJF}} = \\frac{30 + 60 + 150}{3} = \\frac{240}{3} = 80 $$\n接下来，我们计算方差。\n$$ \\sigma^2_{\\mathrm{SJF}} = \\frac{1}{3} \\sum_{i=1}^{3} (C_{i, \\mathrm{SJF}} - \\mu_{\\mathrm{SJF}})^2 $$\n$$ \\sigma^2_{\\mathrm{SJF}} = \\frac{1}{3} [ (30 - 80)^2 + (60 - 80)^2 + (150 - 80)^2 ] $$\n$$ \\sigma^2_{\\mathrm{SJF}} = \\frac{1}{3} [ (-50)^2 + (-20)^2 + (70)^2 ] $$\n$$ \\sigma^2_{\\mathrm{SJF}} = \\frac{1}{3} [ 2500 + 400 + 4900 ] = \\frac{7800}{3} = 2600 $$\n\n其次，我们分析时间片 $q = 10$ 的抢占式轮转（RR）调度策略。\n在 $t=0$ 时的初始就绪队列顺序是 $\\langle P_1, P_2, P_3 \\rangle$。突发时间分别为 $B_1=30$、$B_2=30$、$B_3=90$。\n执行过程如下，跟踪每个进程的剩余突发时间：\n- $t \\in [0, 10]$: $P_1$ 运行。剩余时间：$P_1: 20$, $P_2: 30$, $P_3: 90$。队列：$\\langle P_2, P_3, P_1 \\rangle$。\n- $t \\in [10, 20]$: $P_2$ 运行。剩余时间：$P_1: 20$, $P_2: 20$, $P_3: 90$。队列：$\\langle P_3, P_1, P_2 \\rangle$。\n- $t \\in [20, 30]$: $P_3$ 运行。剩余时间：$P_1: 20$, $P_2: 20$, $P_3: 80$。队列：$\\langle P_1, P_2, P_3 \\rangle$。\n- $t \\in [30, 40]$: $P_1$ 运行。剩余时间：$P_1: 10$, $P_2: 20$, $P_3: 80$。队列：$\\langle P_2, P_3, P_1 \\rangle$。\n- $t \\in [40, 50]$: $P_2$ 运行。剩余时间：$P_1: 10$, $P_2: 10$, $P_3: 80$。队列：$\\langle P_3, P_1, P_2 \\rangle$。\n- $t \\in [50, 60]$: $P_3$ 运行。剩余时间：$P_1: 10$, $P_2: 10$, $P_3: 70$。队列：$\\langle P_1, P_2, P_3 \\rangle$。\n- $t \\in [60, 70]$: $P_1$ 运行。$P_1$ 的剩余时间变为 $0$。$P_1$ 完成。$C_{1, \\mathrm{RR}} = 70$。队列：$\\langle P_2, P_3 \\rangle$。\n- $t \\in [70, 80]$: $P_2$ 运行。$P_2$ 的剩余时间变为 $0$。$P_2$ 完成。$C_{2, \\mathrm{RR}} = 80$。队列：$\\langle P_3 \\rangle$。\n- 在 $t=80$ 时，只剩下 $P_3$，其剩余突发时间为 $70$。由于它是唯一的进程，它会一直运行直到完成，不再被抢占。它会再运行 $70$ 个时间单位。\n- $P_3$ 从 $t=80$ 运行到 $t=80+70=150$。$P_3$ 完成。$C_{3, \\mathrm{RR}} = 150$。\n\n在 RR 策略下，完成时间的集合是 $\\{C_{1, \\mathrm{RR}}, C_{2, \\mathrm{RR}}, C_{3, \\mathrm{RR}}\\} = \\{70, 80, 150\\}$。\n\n现在，我们计算总体方差 $\\sigma^2_{\\mathrm{RR}}$。首先，是平均完成时间 $\\mu_{\\mathrm{RR}}$。\n$$ \\mu_{\\mathrm{RR}} = \\frac{1}{3} \\sum_{i=1}^{3} C_{i, \\mathrm{RR}} = \\frac{70 + 80 + 150}{3} = \\frac{300}{3} = 100 $$\n接下来，我们计算方差。\n$$ \\sigma^2_{\\mathrm{RR}} = \\frac{1}{3} \\sum_{i=1}^{3} (C_{i, \\mathrm{RR}} - \\mu_{\\mathrm{RR}})^2 $$\n$$ \\sigma^2_{\\mathrm{RR}} = \\frac{1}{3} [ (70 - 100)^2 + (80 - 100)^2 + (150 - 100)^2 ] $$\n$$ \\sigma^2_{\\mathrm{RR}} = \\frac{1}{3} [ (-30)^2 + (-20)^2 + (50)^2 ] $$\n$$ \\sigma^2_{\\mathrm{RR}} = \\frac{1}{3} [ 900 + 400 + 2500 ] = \\frac{3800}{3} $$\n\n最后，我们计算比率 $\\rho = \\frac{\\sigma^2_{\\mathrm{RR}}}{\\sigma^2_{\\mathrm{SJF}}}$。\n$$ \\rho = \\frac{\\frac{3800}{3}}{2600} = \\frac{3800}{3 \\times 2600} = \\frac{38}{3 \\times 26} = \\frac{19 \\times 2}{3 \\times 13 \\times 2} = \\frac{19}{39} $$\n最终答案是这个精确的分数。",
            "answer": "$$\\boxed{\\frac{19}{39}}$$"
        },
        {
            "introduction": "理论上最优的算法在现实世界中可能并非最佳选择，因为现实中存在各种开销。本练习  聚焦于抢占式调度的一个关键实际成本：上下文切换开销。通过分析一个精心设计的案例，您会发现，纯粹遵循 SRTF 原则可能因为过于频繁的抢占而增加总完成时间，这促使我们思考更具实用性的调度策略。",
            "id": "3670363",
            "problem": "考虑以下单核中央处理器 (CPU) 调度场景。一次上下文切换产生固定的 $s$ 个时间单位的开销，其中 $0  s  0.2$。每当 CPU 从运行一个进程切换到运行另一个不同的进程时，都会发生上下文切换，这包括从空闲状态初次分派第一个进程。当至少有一个进程就绪时，CPU 永远不会空闲。\n\n进程：\n- 长作业 $L$：到达时间 $0$，CPU 执行时间 $20$。\n- 形成密集到达作业群的短作业：\n  - $S_{1}$：到达时间 $1.0$，CPU 执行时间 $2.0$。\n  - $S_{2}$：到达时间 $1.2$，CPU 执行时间 $1.7$。\n  - $S_{3}$：到达时间 $1.4$，CPU 执行时间 $1.4$。\n  - $S_{4}$：到达时间 $1.6$，CPU 执行时间 $1.1$。\n  - $S_{5}$：到达时间 $1.8$，CPU 执行时间 $0.8$。\n\n使用的基本定义：\n- 像最短剩余时间优先 (SRTF) 这样的抢占式策略总是运行剩余 CPU 执行时间最短的就绪进程，如果一个新到达的进程有更短的剩余时间，则抢占当前进程。\n- 一个进程的等待时间是该进程在就绪状态（未运行）下所花费的总时间，可以计算为周转时间减去 CPU 执行时间，其中周转时间是完成时间减去到达时间。\n- 该工作负载的总完成时间（也称为完工时间）等于所有 CPU 执行时间之和加上总的上下文切换开销，前提是 CPU 没有空闲时间。\n\n任务：\n1. 使用最短剩余时间优先 (SRTF)，构建时间区间 $[0, \\text{finish}]$ 上的运行时轨迹，并计算上下文切换的次数。解释在 $0  s  0.2$ 的条件下，为什么每次抢占都会在 SRTF 下发生。\n2. 提出一个替代调度方案，通过推迟抢占直到作业群中的最后一个短作业到达，来减少抢占次数，同时保持短作业的等待时间相似。具体来说，从时间 $0$ 运行 $L$ 直到时间 $1.8$，然后抢占 $L$ 一次，以最短作业优先的顺序非抢占式地运行短作业 $S_{5}, S_{4}, S_{3}, S_{2}, S_{1}$，最后恢复运行 $L$。计算此调度方案中的上下文切换次数。\n3. 使用上述计数和基本关系——总完成时间等于所有 CPU 执行时间之和加上 $s$ 乘以上下文切换次数（无 CPU 空闲时间），计算 SRTF 相较于替代方案所导致的总完成时间增加量。将你的最终答案表示为关于 $s$（时间单位）的单个封闭形式解析表达式。不要在最终的方框表达式中包含单位。",
            "solution": "我们从核心定义开始。在最短剩余时间优先 (SRTF) 策略下，每当一个到达的进程的剩余时间比当前运行的进程短时，就会发生抢占。每次运行进程的变更都会产生持续时间为 $s$ 的上下文切换。对于此工作负载，如果 CPU 从不空闲，其总完成时间是所有 CPU 执行时间之和加上 $s$ 乘以上下文切换次数。\n\n首先，计算总 CPU 执行时间：\n$$\n\\text{CPU\\ bursts\\ sum} = 20 + 2.0 + 1.7 + 1.4 + 1.1 + 0.8 = 27.0.\n$$\n对于任何运行所有作业且无 CPU 空闲的调度方案，这个基本工作负载时间都是相同的。\n\n现在，定性地追踪 SRTF 以计算上下文切换次数。我们假设从空闲到第一个进程的初始分派产生一次上下文切换。\n\n- 在时间 $0$，系统分派 $L$ 并开始运行它。这算作 $1$ 次上下文切换 (空闲 $\\to L$)。\n- 在时间 $1.0$，$S_{1}$ 到达，其执行时间为 $2.0$，这小于 $L$ 在 $t=1.0$ 时的剩余时间（即 $20 - (1.0 - s) = 19.0 + s$，因为 $L$ 在初始分派后的 $t=s$ 时刻开始运行）。SRTF 抢占 $L$ 并切换到 $S_{1}$，增加 $1$ 次上下文切换 ($L \\to S_{1}$)。\n- 在时间 $1.2$，$S_{2}$ 到达，其执行时间为 $1.7$。到那时，$S_{1}$ 已经执行了 $(1.2 - (1.0 + s)) = 0.2 - s$ 的时间，所以其剩余时间为 $2.0 - (0.2 - s) = 1.8 + s$。因为 $1.7  1.8 + s$，SRTF 抢占 $S_{1}$ 并切换到 $S_{2}$，增加 $1$ 次上下文切换 ($S_{1} \\to S_{2}$)。\n- 在时间 $1.4$，$S_{3}$ 到达，其执行时间为 $1.4$。$S_{2}$ 已经执行了 $(1.4 - (1.2 + s)) = 0.2 - s$ 的时间，剩余 $1.7 - (0.2 - s) = 1.5 + s$。因为 $1.4  1.5 + s$，抢占并切换到 $S_{3}$，增加 $1$ 次上下文切换 ($S_{2} \\to S_{3}$)。\n- 在时间 $1.6$，$S_{4}$ 到达，其执行时间为 $1.1$。$S_{3}$ 在 $1.6$ 时的剩余时间是 $1.4 - (0.2 - s) = 1.2 + s$。因为 $1.1  1.2 + s$，抢占并切换到 $S_{4}$，增加 $1$ 次上下文切换 ($S_{3} \\to S_{4}$)。\n- 在时间 $1.8$，$S_{5}$ 到达，其执行时间为 $0.8$。$S_{4}$ 在 $1.8$ 时的剩余时间是 $1.1 - (0.2 - s) = 0.9 + s$。因为 $0.8  0.9 + s$，抢占并切换到 $S_{5}$，增加 $1$ 次上下文切换 ($S_{4} \\to S_{5}$)。\n\n从这里开始，没有新的进程到达。在 SRTF 下，$S_{5}$ 完成后，调度器会从 $\\{S_{4}, S_{3}, S_{2}, S_{1}, L\\}$ 中选择剩余时间最短的就绪进程。此时，剩余时间仍然保持 $S_{4}$、然后 $S_{3}$、然后 $S_{2}$、然后 $S_{1}$、最后是 $L$ 的顺序，因为每个较早的短作业在被更短的作业抢占之前仅执行了 $(0.2 - s)$ 的时间，因此其剩余时间几乎是其完整的执行时间减去 $(0.2 - s)$。\n\n因此，在 $S_{5}$ 完成后，SRTF 继续运行 $S_{4}$，然后是 $S_{3}$，接着是 $S_{2}$，然后是 $S_{1}$，最后返回到 $L$ 完成。不同进程之间的每次转换都会产生一次上下文切换。计算 SRTF 下的所有切换次数：\n- 空闲 $\\to L$：$1$。\n- $L \\to S_{1}$、$S_{1} \\to S_{2}$、$S_{2} \\to S_{3}$、$S_{3} \\to S_{4}$、$S_{4} \\to S_{5}$：$5$。\n- $S_{5} \\to S_{4}$、$S_{4} \\to S_{3}$、$S_{3} \\to S_{2}$、$S_{2} \\to S_{1}$、$S_{1} \\to L$：$5$。\n因此，\n$$\n\\text{switches}_{\\text{SRTF}} = 1 + 5 + 5 = 11.\n$$\n\n接下来，考虑替代调度方案，该方案通过推迟抢占直到作业群完全到达，来减少抢占次数，同时为短作业保持相似的等待时间：\n- 从时间 $0$ 运行 $L$ 直到时间 $1.8$。\n- 在时间 $1.8$，抢占 $L$ 一次，并以最短作业优先的顺序非抢占式地运行短作业：$S_{5}$，然后是 $S_{4}$，接着是 $S_{3}$，然后是 $S_{2}$，最后是 $S_{1}$。\n- 在短作业完成后恢复运行 $L$。\n\n计算此替代方案中的上下文切换次数：\n- 空闲 $\\to L$：$1$。\n- $L \\to S_{5}$ 在 $1.8$ 时：$1$。\n- 短作业之间：$S_{5} \\to S_{4}$、$S_{4} \\to S_{3}$、$S_{3} \\to S_{2}$、$S_{2} \\to S_{1}$：$4$。\n- $S_{1} \\to L$：$1$。\n因此，\n$$\n\\text{switches}_{\\text{alt}} = 1 + 1 + 4 + 1 = 7.\n$$\n\n根据基本关系，在没有 CPU 空闲的情况下，总完成时间等于所有 CPU 执行时间之和加上 $s$ 乘以上下文切换次数。由于两种调度方案都运行相同的作业集且没有空闲时间，总完成时间的差异完全由上下文切换次数的差异决定：\n$$\nT_{\\text{SRTF}} - T_{\\text{alt}} = s \\cdot \\left(\\text{switches}_{\\text{SRTF}} - \\text{switches}_{\\text{alt}}\\right) = s \\cdot (11 - 7) = 4s.\n$$\n\n关于短作业等待时间的相似性，在 SRTF 下，每个短作业都在其到达时间附近开始，但会遭受簇内抢占；而在替代方案下，每个短作业都在 $t=1.8$ 后不久开始，并一直运行到完成，没有簇内抢占。因为作业群在狭窄的区间 $[1.0, 1.8]$ 内到达，并且替代方案在 $1.8$ 之后立即开始为它们服务，所以最早到达的作业（例如 $S_{1}$）的额外等待时间上限约为 $(1.8 - 1.0)$ 再加上最多几个上下文切换的开销，而较晚到达的作业（例如 $S_{5}$）几乎立即开始。这种集群特性确保了短作业的平均等待时间在数量级上保持相似，而替代方案避免了因簇内抢占级联而导致的上下文切换开销膨胀。然而，题目要求的计算仅是总完成时间的增加量，我们已经计算出来了。\n\n因此，SRTF 相较于替代方案所导致的总完成时间增加量为 $4s$。",
            "answer": "$$\\boxed{4 s}$$"
        }
    ]
}