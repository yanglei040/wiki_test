{
    "hands_on_practices": [
        {
            "introduction": "要真正理解计算机如何处理非整数，第一步是亲手将一个十进制数转换为其底层的二进制浮点表示。这个练习将指导你完成这一基本过程，将一个常见的小数值编码为一个简化的10位浮点格式。通过实践，你将掌握符号、指数和尾数这三个关键组成部分如何协同工作，来表示一个数字。",
            "id": "1937489",
            "problem": "一个工程师团队正在为一款嵌入式物联网（IoT）设备开发专用处理器。为最大限度地降低功耗和电路复杂性，他们设计了一种定制的10位浮点数格式来表示传感器读数。该格式遵循以下结构：\n- 1位符号位（S），S=0表示正数，S=1表示负数。\n- 4位偏置指数（E）。指数偏置值为7。\n- 5位小数部分（F）。\n\n规格化数的值使用公式 $V = (-1)^{S} \\times (1.F)_2 \\times 2^{(E-7)}$ 进行解释，其中 $(1.F)_2$ 表示带有隐藏前导“1”的有效数。完整的10位字结构是：首先是符号位，然后是指数位，最后是小数位，顺序为 `S EEEE FFFFF`。\n\n设备上的一个温度传感器返回一个等同于十进制值-13.5的读数。在所描述的自定义格式中，该值的正确10位二进制表示是什么？\n\nA. 1101010110\n\nB. 0101010110\n\nC. 1101111011\n\nD. 1101001011\n\nE. 1100110110",
            "solution": "给定一个自定义的10位浮点数格式，其字段包括：符号位 $S$（1位）、指数 $E$（4位，偏置值为7）和小数部分 $F$（5位）。对于规格化数，其值为\n$$\nV = (-1)^{S} (1.F)_{2} 2^{(E-7)}.\n$$\n我们需要对 $V=-13.5$进行编码。\n\n步骤1：确定符号位。\n由于该值为负数，符号位是\n$$\nS=1.\n$$\n\n步骤2：将绝对值转换为二进制并进行规格化。\n绝对值为 $13.5$。用二进制表示为，\n$$\n13.5 = 1101.1_{2}.\n$$\n将其规格化为 $(1.F)_{2} 2^{e}$ 的形式：\n$$\n1101.1_{2} = 1.1011_{2} \\times 2^{3}.\n$$\n因此，无偏指数为\n$$\ne = 3.\n$$\n\n步骤3：计算偏置指数并将其编码为4位。\n偏置值为 $7$，所以存储的指数为\n$$\nE = e + 7 = 3 + 7 = 10.\n$$\n用4位二进制表示，$10$ 是\n$$\nE = 1010.\n$$\n\n步骤4：确定5位的小数部分字段。\n从规格化有效数 $1.1011_{2}$ 中，小数部分（二进制小数点后的位）是 $1011$。我们需要5位小数位；由于 $13.5$ 可以精确表示，我们在末尾追加一个零：\n$$\nF = 10110.\n$$\n\n步骤5：按 $S\\,EEEE\\,FFFFF$ 的顺序拼接字段。\n当 $S=1$，$E=1010$，$F=10110$ 时，这个10位字是\n$$\n1\\,1010\\,10110 \\;\\Rightarrow\\; 1101010110.\n$$\n\n这与选项A匹配。",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "浮点数的一个令人惊讶的特性是，它们并非均匀分布在数轴上；随着数值的增大，相邻可表示数之间的“间隙”也会变大。这导致了一个重要的结论：虽然所有的小整数都可以被精确表示，但超过某个点后，一些整数就无法再被精确存储。这个练习将挑战你找出在一个特定的浮点系统中，第一个不能被精确表示的正整数，从而揭示浮点数精度限制的实际影响。",
            "id": "1937511",
            "problem": "一名计算机科学专业的学生正在为一种高性能计算应用设计一款定制处理器，该处理器使用一种特制的 10 位浮点数格式。该格式遵循 IEEE 754 标准中关于规格化数的原则，但位数分配不同。\n\n这个 10 位的字按如下方式划分：\n- 1 位用于符号 (S)。\n- 4 位用于指数 (E)。\n- 5 位用于小数部分 (F)。\n\n一个数的值被解释为 $V = (-1)^S \\times (1.F)_2 \\times 2^{E - \\text{bias}}$，其中 $(1.F)_2$ 是带有隐含前导 1 的尾数，指数偏移量为 7。对于此格式，指数域值 E=0（全为 0）和 E=15（全为 1）被保留用于特殊情况，如零、非规格化数、无穷大和非数值 (NaN)，因此不用于表示规格化数。\n\n确定不能用这种 10 位浮点格式精确表示的最小正整数。",
            "solution": "该格式有 1 个符号位，4 个指数位（偏移量为 $7$），以及 5 个小数位。对于规格化数，$E \\in \\{1,\\dots,14\\}$，其值为\n$$\nV = (-1)^{S} (1.F)_{2} 2^{E-7}.\n$$\n有 5 个小数位，规格化有效数（significand）具有 $p=6$ 位的精度。将有效数写成一个整数除以 2 的幂的形式，设\n$$\n1.F = \\frac{m}{2^{5}}, \\quad m \\in \\{32,33,\\dots,63\\}。\n$$\n因此，任何规格化数可以写成\n$$\nV = \\frac{m}{2^{5}} 2^{e} = m \\, 2^{e-5}, \\quad e = E-7。\n$$\n考虑一个正整数 $N$。令 $e = \\lfloor \\log_{2} N \\rfloor$，因此 $2^{e} \\leq N  2^{e+1}$。为了能够精确表示，我们需要一个整数 $m$ 满足\n$$\nN = m \\, 2^{e-5} \\quad \\Longleftrightarrow \\quad m = N \\, 2^{5-e}。\n$$\n因为 $N \\in [2^{e}, 2^{e+1})$，可以得出\n$$\nm \\in \\left[2^{e} \\cdot 2^{5-e}, \\; 2^{e+1} \\cdot 2^{5-e}\\right) = [2^{5}, 2^{6}) = [32,64),\n$$\n所以如果 $m$ 是一个整数，它会自动落在 $\\{32,\\dots,63\\}$ 范围内，并产生一个有效的规格化编码。\n\n如果 $e \\leq 5$ (等价于 $N  2^{6} = 64$)，那么 $2^{5-e}$ 是一个整数，所以 $m = N \\, 2^{5-e}$ 也是一个整数；因此，每个满足 $1 \\leq N \\leq 63$ 的整数 $N$ 都可以精确表示。对于 $N = 64 = 2^{6}$，我们有 $e=6$ 且\n$$\nm = 64 \\cdot 2^{-1} = 32,\n$$\n这是一个在 $[32,63]$ 区间内的整数，所以 $64$ 也可以精确表示。\n\n对于 $N = 65$，我们有 $e=6$ 且\n$$\nm = 65 \\cdot 2^{-1} = 32.5,\n$$\n这不是一个整数，所以 $65$ 不能被精确表示。由于所有更小的正整数都可以表示，因此不能精确表示的最小正整数是 $65$。",
            "answer": "$$\\boxed{65}$$"
        },
        {
            "introduction": "在理想的数学世界中，分数是精确的，但在计算世界中，许多常见的分数（如 $1/5$）在二进制中是无限循环小数，因此无法被精确表示。这个练习将带你量化这种不可避免的“表示误差”，你需要计算一个分数在被舍入到最接近的可表示浮点值时所产生的绝对误差。这有助于我们理解在所有科学计算中都存在的精度与效率之间的基本权衡。",
            "id": "2173559",
            "problem": "一个工程师团队正在修复一台 20 世纪 80 年代的复古音频合成器。该合成器使用一个定制的数字信号处理器（DSP）来生成波形。此 DSP 采用一种简化的 9 位浮点数系统进行计算。该系统具有以下规格：\n-   一个符号位 ($s$)。\n-   一个 4 位指数场 ($E$)，偏置为 7。有效指数计算为 $e = E - 7$。存储的指数值 $E=0$ 和 $E=15$ 为特殊情况（零、无穷大等）保留，不用于规格化数。\n-   一个 4 位尾数场 ($f$)。\n-   数字是规格化的，表示为 $N = (-1)^{s} \\times (1.f)_2 \\times 2^{e}$ 的形式。有效数的前导 `1` 是隐含的，不被存储。\n-   该系统使用“舍入到最近，偶数优先”的舍入方案。这意味着，如果一个数正好位于两个可表示值之间，它将被舍入到尾数最低有效位为 0 的那个值。\n\n为了测试 DSP 的算术单元，工程师们需要评估其精度。作为测试的一部分，他们希望确定在表示纯五度的基频比（数学上等同于分数 $3/2$）时的误差。然而，由于测试工具中的寻址错误，为该计算加载的值被错误地指定为 $1/5$。\n\n计算 $1/5$ 的真实数学值与其在此 9 位浮点系统中的表示之间的绝对误差。将最终答案表示为一个实数，四舍五入到三位有效数字。",
            "solution": "格式为一个 9 位浮点数，包括一个符号位 $s$、一个指数场 $E$（4 位，偏置为 7）和一个尾数场 $f$（4 位），并带有一个隐含的前导 $1$。规格化数的形式为 $N = (-1)^{s}(1.f)_{2}2^{e}$，其中 $e = E - 7$，$E \\in \\{1,\\dots,14\\}$。舍入方式为向最近舍入，偶数优先。\n\n我们在此系统中表示 $x = \\frac{1}{5}$。在二进制中，$\\frac{1}{5}$ 的循环小数展开为 $0.\\overline{0011}_{2}$。进行规格化，我们写出\n$$\n\\frac{1}{5} = 0.0011\\overline{0011}_{2} = 1.1001\\overline{1001}_{2} \\times 2^{-3}.\n$$\n因此，确切的有效数为 $1.10011001\\ldots_{2}$，指数为 $e = -3$，所以 $E = e + 7 = 4$，这对规格化数是有效的。\n\n由于有 4 个小数位，我们必须将 $1.1001\\overline{1001}_{2}$ 舍入到 5 位精度（包括隐含的前导 $1$）。前 4 个存储的小数位是 $1001$，下一位（保护位）是 $1$。由于保护位之后的位不全为零，该值严格大于中点，因此我们向上舍入：\n$$\n1.1001_{2} \\xrightarrow{\\text{round}} 1.1010_{2}.\n$$\n因此，存储的值为\n$$\n\\mathrm{fl}\\!\\left(\\tfrac{1}{5}\\right) = 1.1010_{2} \\times 2^{-3}.\n$$\n精确计算这个值：\n$$\n1.1010_{2} = 1 + \\frac{1}{2} + \\frac{1}{8} = \\frac{13}{8}, \\quad \\Rightarrow \\quad \\mathrm{fl}\\!\\left(\\tfrac{1}{5}\\right) = \\frac{13}{8} \\cdot 2^{-3} = \\frac{13}{64}.\n$$\n绝对误差是\n$$\n\\left|\\frac{1}{5} - \\frac{13}{64}\\right| = \\left|\\frac{64 - 65}{320}\\right| = \\frac{1}{320} = 0.003125.\n$$\n四舍五入到三位有效数字得到 $0.00313$。",
            "answer": "$$\\boxed{0.00313}$$"
        }
    ]
}