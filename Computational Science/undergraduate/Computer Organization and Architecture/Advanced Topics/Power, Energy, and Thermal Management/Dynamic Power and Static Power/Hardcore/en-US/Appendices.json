{
    "hands_on_practices": [
        {
            "introduction": "To begin our practical exploration, we will first analyze the energy consumption of a processor from a holistic, system-level perspective. This exercise  provides a framework for calculating the average energy consumed per instruction by considering the contributions of different hardware units, the constant overhead of the clock network, and the persistent drain from static leakage current. By modeling a realistic instruction mix, you will learn to connect high-level program behavior to the fundamental principles of dynamic and static power, and evaluate the impact of an architectural optimization designed to reduce switching activity.",
            "id": "3638033",
            "problem": "A Central Processing Unit (CPU) executes a mix of instruction classes on distinct functional units. You are asked to quantify the average energy per retired instruction by deriving it from first principles about dynamic and static power, and then to evaluate the effect of an Instruction Set Architecture (ISA) extension that reduces switching activity. You must compute the final requested quantity as a single number.\n\nAssume the following hardware parameters:\n- Supply voltage: $0.9\\ \\mathrm{V}$.\n- Clock frequency: $2.5\\ \\mathrm{GHz}$.\n- Chip-wide leakage current (always-on): $8\\ \\mathrm{mA}$.\n- Baseline clock-tree effective capacitance that toggles every cycle: $5\\ \\mathrm{pF}$.\n\nInstruction classes and their probabilities in the dynamic instruction stream:\n- Integer arithmetic/logical (IALU): $p_{\\mathrm{IALU}}=0.50$.\n- Floating-point arithmetic (FPU): $p_{\\mathrm{FPU}}=0.15$.\n- Load/store (LSU): $p_{\\mathrm{LSU}}=0.20$.\n- Branch (BRU): $p_{\\mathrm{BRU}}=0.10$.\n- Integer multiply (MUL): $p_{\\mathrm{MUL}}=0.05$.\n\nFunctional unit properties when actively used by an instruction of that class (activity factor refers to average probability of a signal transition per cycle while the unit is engaged by the instruction):\n- IALU: effective capacitance $8\\ \\mathrm{pF}$, activity factor $0.18$, engaged for $1$ cycle by an IALU instruction.\n- FPU: effective capacitance $12\\ \\mathrm{pF}$, activity factor $0.22$, engaged for $4$ cycles by an FPU instruction.\n- LSU: effective capacitance $10\\ \\mathrm{pF}$, activity factor $0.14$, engaged for $2$ cycles by an LSU instruction.\n- BRU: effective capacitance $5\\ \\mathrm{pF}$, activity factor $0.10$, engaged for $1$ cycle by a BRU instruction.\n- MUL: effective capacitance $20\\ \\mathrm{pF}$, activity factor $0.30$, engaged for $3$ cycles by a MUL instruction.\n\nAdditional toggling when certain classes execute (occurring within the main engagement window of the class, not adding extra cycles):\n- Each LSU instruction performs one cycle of address generation on the IALU with activity factor $0.08$ over the IALU’s $8\\ \\mathrm{pF}$.\n- Each MUL instruction incurs one cycle of minor IALU control toggling with activity factor $0.05$ over the IALU’s $8\\ \\mathrm{pF}$.\n\nAssumptions:\n- Treat energy as additive across functional units and across cycles; ignore overlap effects beyond what is explicitly stated.\n- The per-instruction time is determined by the weighted average number of engaged cycles of the primary units for each class as listed above (auxiliary IALU toggling for LSU and MUL occurs within those primary cycles and does not add cycles).\n- The clock-tree toggles every cycle regardless of instruction class.\n\nAn ISA extension introduces operand-value-aware gating hints that reduce switching activity factors as follows (average effects across the given workload):\n- FPU activity factor is scaled by $0.85$ when FPU is engaged.\n- MUL activity factor is scaled by $0.60$ when MUL is engaged.\n- For the address-generation IALU cycle within LSU, the IALU activity factor is scaled by $0.50$ (leaving LSU’s own activity factor unchanged).\n- All other activity factors are unchanged. No change to cycle counts, supply voltage, frequency, or leakage current.\n\nTasks:\n- Starting from the definitions of dynamic power and static (leakage) power and the relationship between power and energy, derive how to compute the average energy per retired instruction of this workload, including contributions from functional units, the clock-tree, and leakage.\n- Apply your derivation to compute the new average total energy per retired instruction after the ISA extension takes effect. Express the final answer in picojoules.\n\nRound your final numeric answer to four significant figures and express it in picojoules (pJ). The final answer must be a single number.",
            "solution": "The primary task is to derive and compute the average energy per retired instruction, $E_{\\text{inst}}$, after an Instruction Set Architecture (ISA) extension is applied. The total average energy per instruction is the sum of three distinct components: the static (leakage) energy, $E_{\\text{stat}}$, the dynamic energy consumed by the clock distribution network, $E_{\\text{clk}}$, and the dynamic energy consumed by the functional units (FUs), $E_{\\text{FU}}$.\n$$E_{\\text{inst}} = E_{\\text{stat}} + E_{\\text{clk}} + E_{\\text{FU}}$$\n\nFirst, we establish the fundamental relationships. Total power $P_{\\text{total}}$ is the sum of static power $P_{\\text{stat}}$ and dynamic power $P_{\\text{dyn}}$.\n$$P_{\\text{stat}} = I_{\\text{leak}} V_{dd}$$\n$$P_{\\text{dyn}} = \\alpha C f V_{dd}^2$$\nwhere $I_{\\text{leak}}$ is the leakage current, $V_{dd}$ is the supply voltage, $\\alpha$ is the activity factor (the probability of a signal transition), $C$ is the effective capacitance being switched, and $f$ is the clock frequency. Energy $E$ over a time period $t$ for constant power $P$ is $E = P \\times t$. The energy to perform a single switching event (charge and discharge a capacitor) is $C V_{dd}^2$. The dynamic energy per clock cycle is thus $\\alpha C V_{dd}^2$.\n\nTo find the average energy per instruction, we must first determine the average time per instruction, $T_{\\text{inst}}$. This is given by the product of the average Cycles Per Instruction (CPI) and the clock period ($T_{\\text{cycle}} = 1/f$).\n$$T_{\\text{inst}} = \\text{CPI} \\times T_{\\text{cycle}} = \\frac{\\text{CPI}}{f}$$\nThe CPI is the weighted average of the cycle counts for each instruction class, where the weights are the instruction probabilities $p_i$.\n$$\\text{CPI} = \\sum_{i \\in \\text{classes}} p_i \\times N_{\\text{cycles}, i}$$\n\nNow we derive the expressions for the three energy components per instruction:\n\n1.  **Static Energy per Instruction ($E_{\\text{stat}}$):** This is the static power multiplied by the average time per instruction.\n    $$E_{\\text{stat}} = P_{\\text{stat}} \\times T_{\\text{inst}} = (I_{\\text{leak}} V_{dd}) \\frac{\\text{CPI}}{f}$$\n\n2.  **Clock Dynamic Energy per Instruction ($E_{\\text{clk}}$):** The clock-tree toggles every cycle, so its activity factor is $\\alpha_{\\text{clk}}=1$. The energy is consumed over CPI cycles on average per instruction.\n    $$E_{\\text{clk}} = (\\alpha_{\\text{clk}} C_{\\text{clk}} V_{dd}^2) \\times \\text{CPI} = C_{\\text{clk}} V_{dd}^2 \\times \\text{CPI}$$\n\n3.  **Functional Unit Dynamic Energy per Instruction ($E_{\\text{FU}}$):** This is the probability-weighted average of the dynamic energy consumed by the FUs for each instruction class. For an instruction of class $i$, the dynamic energy is the sum of energies from all units it engages. This can be expressed as $V_{dd}^2$ times the total switched capacitance for that instruction. The average FU energy per instruction is thus $V_{dd}^2$ times the average switched capacitance per instruction, $\\langle C_{\\text{sw, FU}} \\rangle$.\n    $$\\langle C_{\\text{sw, FU}} \\rangle = \\sum_{i \\in \\text{classes}} p_i \\left( \\sum_{k \\in \\text{units used by i}} \\alpha_{i,k, \\text{new}} C_k N_{\\text{cycles},k} \\right)$$\n    $$E_{\\text{FU}} = \\langle C_{\\text{sw, FU}} \\rangle \\times V_{dd}^2$$\n    Here, $\\alpha_{i,k, \\text{new}}$ represents the new activity factors after the ISA extension.\n\nWe now proceed with the calculations using the provided data.\nGiven values: $V_{dd} = 0.9\\ \\mathrm{V}$, $f = 2.5\\ \\mathrm{GHz} = 2.5 \\times 10^9\\ \\mathrm{s}^{-1}$, $I_{\\text{leak}} = 8\\ \\mathrm{mA} = 8 \\times 10^{-3}\\ \\mathrm{A}$, $C_{\\text{clk}} = 5\\ \\mathrm{pF} = 5 \\times 10^{-12}\\ \\mathrm{F}$.\n\n**Step A: Calculate CPI**\nThe cycle counts $N_{\\text{cycles},i}$ and probabilities $p_i$ are unaffected by the ISA extension.\n$$\n\\text{CPI} = p_{\\mathrm{IALU}}N_{\\mathrm{IALU}} + p_{\\mathrm{FPU}}N_{\\mathrm{FPU}} + p_{\\mathrm{LSU}}N_{\\mathrm{LSU}} + p_{\\mathrm{BRU}}N_{\\mathrm{BRU}} + p_{\\mathrm{MUL}}N_{\\mathrm{MUL}}\n$$\n$$\n\\text{CPI} = (0.50 \\times 1) + (0.15 \\times 4) + (0.20 \\times 2) + (0.10 \\times 1) + (0.05 \\times 3)\n$$\n$$\n\\text{CPI} = 0.50 + 0.60 + 0.40 + 0.10 + 0.15 = 1.75\n$$\n\n**Step B: Calculate $E_{\\text{stat}}$**\n$$\nE_{\\text{stat}} = (8 \\times 10^{-3}\\ \\mathrm{A}) \\times (0.9\\ \\mathrm{V}) \\times \\frac{1.75}{2.5 \\times 10^9\\ \\mathrm{s}^{-1}} = (7.2 \\times 10^{-3}\\ \\mathrm{W}) \\times (0.7 \\times 10^{-9}\\ \\mathrm{s})\n$$\n$$\nE_{\\text{stat}} = 5.04 \\times 10^{-12}\\ \\mathrm{J} = 5.04\\ \\mathrm{pJ}\n$$\n\n**Step C: Calculate $E_{\\text{clk}}$**\n$$\nE_{\\text{clk}} = (5 \\times 10^{-12}\\ \\mathrm{F}) \\times (0.9\\ \\mathrm{V})^2 \\times 1.75 = (5 \\times 10^{-12}\\ \\mathrm{F}) \\times 0.81\\ \\mathrm{V}^2 \\times 1.75\n$$\n$$\nE_{\\text{clk}} = 7.0875 \\times 10^{-12}\\ \\mathrm{J} = 7.0875\\ \\mathrm{pJ}\n$$\n\n**Step D: Calculate $E_{\\text{FU}}$**\nWe first calculate the total switched capacitance for one instruction of each class, using the new scaled activity factors. Let $C_{\\text{sw}, i}$ be this value for class $i$.\n\nFor an IALU instruction:\n$C_{\\text{sw, IALU}} = \\alpha_{\\mathrm{IALU}} C_{\\mathrm{IALU}} N_{\\mathrm{IALU}} = 0.18 \\times (8\\ \\mathrm{pF}) \\times 1 = 1.44\\ \\mathrm{pF}$\n\nFor an FPU instruction (new activity factor $\\alpha'_{\\mathrm{FPU}} = 0.22 \\times 0.85 = 0.187$):\n$C_{\\text{sw, FPU}} = \\alpha'_{\\mathrm{FPU}} C_{\\mathrm{FPU}} N_{\\mathrm{FPU}} = 0.187 \\times (12\\ \\mathrm{pF}) \\times 4 = 8.976\\ \\mathrm{pF}$\n\nFor an LSU instruction (with secondary IALU use, new IALU activity factor for this use $\\alpha'_{\\text{IALU, for LSU}} = 0.08 \\times 0.50 = 0.04$):\n$C_{\\text{sw, LSU}} = (\\alpha_{\\mathrm{LSU}} C_{\\mathrm{LSU}} N_{\\mathrm{LSU}}) + (\\alpha'_{\\text{IALU, for LSU}} C_{\\mathrm{IALU}} \\times 1\\ \\text{cycle}) = (0.14 \\times 10\\ \\mathrm{pF} \\times 2) + (0.04 \\times 8\\ \\mathrm{pF} \\times 1) = 2.8\\ \\mathrm{pF} + 0.32\\ \\mathrm{pF} = 3.12\\ \\mathrm{pF}$\n\nFor a BRU instruction:\n$C_{\\text{sw, BRU}} = \\alpha_{\\mathrm{BRU}} C_{\\mathrm{BRU}} N_{\\mathrm{BRU}} = 0.10 \\times (5\\ \\mathrm{pF}) \\times 1 = 0.5\\ \\mathrm{pF}$\n\nFor a MUL instruction (new primary activity factor $\\alpha'_{\\mathrm{MUL}} = 0.30 \\times 0.60 = 0.18$):\n$C_{\\text{sw, MUL}} = (\\alpha'_{\\mathrm{MUL}} C_{\\mathrm{MUL}} N_{\\mathrm{MUL}}) + (\\alpha_{\\text{IALU, for MUL}} C_{\\mathrm{IALU}} \\times 1\\ \\text{cycle}) = (0.18 \\times 20\\ \\mathrm{pF} \\times 3) + (0.05 \\times 8\\ \\mathrm{pF} \\times 1) = 10.8\\ \\mathrm{pF} + 0.4\\ \\mathrm{pF} = 11.2\\ \\mathrm{pF}$\n\nNow, compute the average switched FU capacitance per instruction, $\\langle C_{\\text{sw, FU}} \\rangle$:\n$$\n\\langle C_{\\text{sw, FU}} \\rangle = p_{\\mathrm{IALU}}C_{\\text{sw, IALU}} + p_{\\mathrm{FPU}}C_{\\text{sw, FPU}} + p_{\\mathrm{LSU}}C_{\\text{sw, LSU}} + p_{\\mathrm{BRU}}C_{\\text{sw, BRU}} + p_{\\mathrm{MUL}}C_{\\text{sw, MUL}}\n$$\n$$\n\\langle C_{\\text{sw, FU}} \\rangle = (0.50 \\times 1.44) + (0.15 \\times 8.976) + (0.20 \\times 3.12) + (0.10 \\times 0.5) + (0.05 \\times 11.2) \\ \\mathrm{pF}\n$$\n$$\n\\langle C_{\\text{sw, FU}} \\rangle = 0.72 + 1.3464 + 0.624 + 0.05 + 0.56\\ \\mathrm{pF} = 3.3004\\ \\mathrm{pF}\n$$\nFinally, calculate $E_{\\text{FU}}$:\n$$\nE_{\\text{FU}} = \\langle C_{\\text{sw, FU}} \\rangle \\times V_{dd}^2 = (3.3004 \\times 10^{-12}\\ \\mathrm{F}) \\times (0.9\\ \\mathrm{V})^2 = (3.3004 \\times 10^{-12}\\ \\mathrm{F}) \\times 0.81\\ \\mathrm{V}^2\n$$\n$$\nE_{\\text{FU}} = 2.673324 \\times 10^{-12}\\ \\mathrm{J} = 2.673324\\ \\mathrm{pJ}\n$$\n\n**Step E: Calculate Total Average Energy per Instruction**\n$$\nE_{\\text{inst}} = E_{\\text{stat}} + E_{\\text{clk}} + E_{\\text{FU}} = 5.04\\ \\mathrm{pJ} + 7.0875\\ \\mathrm{pJ} + 2.673324\\ \\mathrm{pJ}\n$$\n$$\nE_{\\text{inst}} = 14.800824\\ \\mathrm{pJ}\n$$\n\nThe problem requires the answer in picojoules, rounded to four significant figures.\n$$\nE_{\\text{inst}} \\approx 14.80\\ \\mathrm{pJ}\n$$",
            "answer": "$$\\boxed{14.80}$$"
        },
        {
            "introduction": "Building on the system-level view, we now focus on a classic architectural trade-off that pits performance against power consumption. This problem  compares a fast, parallel multiplier with a slower, iterative one, highlighting a critical tension: the larger parallel circuit has higher dynamic power, but the slower serial circuit's longer execution time accumulates more static (leakage) energy. By calculating the break-even operand size where their total energy costs are equal, you will gain a quantitative understanding of how the interplay between dynamic power and static energy dictates design choices.",
            "id": "3638046",
            "problem": "A design team is evaluating two unsigned multiplier microarchitectures implemented in Complementary Metal-Oxide-Semiconductor (CMOS) for operands of length $n$ bits, operating at supply voltage $V$ and clock frequency $f$. One is a fully combinational array multiplier that completes in one clock cycle; the other is a bit-serial iterative multiplier that requires $n$ clock cycles.\n\nFundamental base and modeling assumptions:\n- Charging a capacitance from $0$ to $V$ stores energy $\\frac{1}{2} C V^{2}$, and a subsequent discharge dissipates that energy; across many nodes and cycles, the average dynamic energy per cycle can be modeled as $\\alpha \\, C_{\\mathrm{eq}} \\, V^{2}$, where $\\alpha$ is an average activity factor and $C_{\\mathrm{eq}}$ is an equivalent switched capacitance that aggregates all toggling nodes.\n- Static (leakage) power is modeled as $P_{\\mathrm{leak}} = I_{\\mathrm{leak}} \\, V$, so the leakage energy over time $t$ is $E_{\\mathrm{leak}} = I_{\\mathrm{leak}} \\, V \\, t$.\n\nThe following technology- and microarchitecture-dependent parameters are deemed experimentally calibrated and provided:\n- Supply voltage $V = 0.8 \\,\\mathrm{V}$ and clock frequency $f = 1.0 \\times 10^{9} \\,\\mathrm{Hz}$.\n- Combinational multiplier:\n  - Average activity factor $\\alpha_{\\mathrm{comb}} = 0.15$ per cycle.\n  - Equivalent switched capacitance scaling $C_{\\mathrm{comb}}(n) = k_{C} \\, n^{2}$ with $k_{C} = 0.4 \\times 10^{-15} \\,\\mathrm{F}$.\n  - Leakage current scaling $I_{\\mathrm{leak,comb}}(n) = k_{I} \\, n^{2}$ with $k_{I} = 0.8 \\times 10^{-9} \\,\\mathrm{A}$.\n- Iterative bit-serial multiplier:\n  - Average activity factor per cycle $\\alpha_{\\mathrm{iter}} = 0.10$.\n  - Per-cycle equivalent switched capacitance $C_{0} = 20 \\times 10^{-15} \\,\\mathrm{F}$.\n  - Leakage current $I_{\\mathrm{leak,iter}}(n) = I_{0} + I_{1} \\, n$ with $I_{0} = 5.0 \\times 10^{-9} \\,\\mathrm{A}$ and $I_{1} = 0.05 \\times 10^{-9} \\,\\mathrm{A}$.\n\nUsing only the fundamental base above, derive expressions for the total energy per multiplication for each design and determine the operand length $n$ at which the total energy per multiplication of the iterative design equals that of the combinational design. Round your final numerical result to three significant figures and report it as a pure number corresponding to bits (do not include units in the final answer box).",
            "solution": "The objective is to find the operand length $n$ at which the total energy per multiplication for the combinational design, $E_{\\mathrm{total,comb}}(n)$, equals that of the iterative design, $E_{\\mathrm{total,iter}}(n)$.\n\n**1. Total Energy for the Combinational Multiplier**\n\nThe total energy is the sum of the dynamic energy and the static (leakage) energy for one multiplication, which takes one clock cycle. The duration of one clock cycle is $t_{\\mathrm{comb}} = \\frac{1}{f}$.\n\n-   **Dynamic Energy ($E_{\\mathrm{dyn,comb}}$):**\n    The dynamic energy is consumed in a single cycle.\n    $$E_{\\mathrm{dyn,comb}}(n) = \\alpha_{\\mathrm{comb}} \\, C_{\\mathrm{comb}}(n) \\, V^{2} = \\alpha_{\\mathrm{comb}} (k_{C} n^{2}) V^{2}$$\n\n-   **Leakage Energy ($E_{\\mathrm{leak,comb}}$):**\n    The leakage energy is the leakage power multiplied by the execution time.\n    $$E_{\\mathrm{leak,comb}}(n) = I_{\\mathrm{leak,comb}}(n) \\, V \\, t_{\\mathrm{comb}} = (k_{I} n^{2}) \\, V \\, \\frac{1}{f}$$\n\n-   **Total Energy ($E_{\\mathrm{total,comb}}$):**\n    $$E_{\\mathrm{total,comb}}(n) = E_{\\mathrm{dyn,comb}}(n) + E_{\\mathrm{leak,comb}}(n) = \\alpha_{\\mathrm{comb}} k_{C} n^{2} V^{2} + \\frac{k_{I} n^{2} V}{f}$$\n    Factoring out $n^2$:\n    $$E_{\\mathrm{total,comb}}(n) = \\left( \\alpha_{\\mathrm{comb}} k_{C} V^{2} + \\frac{k_{I} V}{f} \\right) n^{2}$$\n\n**2. Total Energy for the Iterative Multiplier**\n\nThis multiplication takes $n$ clock cycles. The total duration is $t_{\\mathrm{iter}} = n \\times \\frac{1}{f} = \\frac{n}{f}$.\n\n-   **Dynamic Energy ($E_{\\mathrm{dyn,iter}}$):**\n    The dynamic energy per cycle is constant, $E_{\\mathrm{dyn,cycle,iter}} = \\alpha_{\\mathrm{iter}} C_{0} V^{2}$. The total dynamic energy over $n$ cycles is:\n    $$E_{\\mathrm{dyn,iter}}(n) = n \\times (\\alpha_{\\mathrm{iter}} C_{0} V^{2})$$\n\n-   **Leakage Energy ($E_{\\mathrm{leak,iter}}$):**\n    The leakage energy is the leakage power multiplied by the total execution time.\n    $$E_{\\mathrm{leak,iter}}(n) = I_{\\mathrm{leak,iter}}(n) \\, V \\, t_{\\mathrm{iter}} = (I_{0} + I_{1} n) \\, V \\, \\frac{n}{f} = \\frac{I_{0} V n}{f} + \\frac{I_{1} V n^{2}}{f}$$\n\n-   **Total Energy ($E_{\\mathrm{total,iter}}$):**\n    $$E_{\\mathrm{total,iter}}(n) = E_{\\mathrm{dyn,iter}}(n) + E_{\\mathrm{leak,iter}}(n) = n \\alpha_{\\mathrm{iter}} C_{0} V^{2} + \\frac{I_{0} V n}{f} + \\frac{I_{1} V n^{2}}{f}$$\n    Grouping terms by powers of $n$:\n    $$E_{\\mathrm{total,iter}}(n) = \\left( \\frac{I_{1} V}{f} \\right) n^{2} + \\left( \\alpha_{\\mathrm{iter}} C_{0} V^{2} + \\frac{I_{0} V}{f} \\right) n$$\n\n**3. Equating Energies and Solving for n**\n\nWe set $E_{\\mathrm{total,comb}}(n) = E_{\\mathrm{total,iter}}(n)$:\n$$\\left( \\alpha_{\\mathrm{comb}} k_{C} V^{2} + \\frac{k_{I} V}{f} \\right) n^{2} = \\left( \\frac{I_{1} V}{f} \\right) n^{2} + \\left( \\alpha_{\\mathrm{iter}} C_{0} V^{2} + \\frac{I_{0} V}{f} \\right) n$$\nFor a non-trivial multiplier, $n \\neq 0$, so we can divide both sides by $n$:\n$$\\left( \\alpha_{\\mathrm{comb}} k_{C} V^{2} + \\frac{k_{I} V}{f} \\right) n = \\left( \\frac{I_{1} V}{f} \\right) n + \\left( \\alpha_{\\mathrm{iter}} C_{0} V^{2} + \\frac{I_{0} V}{f} \\right)$$\nRearranging to solve for $n$:\n$$\\left( \\alpha_{\\mathrm{comb}} k_{C} V^{2} + \\frac{k_{I} V}{f} - \\frac{I_{1} V}{f} \\right) n = \\alpha_{\\mathrm{iter}} C_{0} V^{2} + \\frac{I_{0} V}{f}$$\n$$n = \\frac{\\alpha_{\\mathrm{iter}} C_{0} V^{2} + \\frac{I_{0} V}{f}}{\\alpha_{\\mathrm{comb}} k_{C} V^{2} + \\frac{(k_{I} - I_{1}) V}{f}}$$\nTo simplify, we can multiply the numerator and denominator by $\\frac{f}{V}$:\n$$n = \\frac{\\alpha_{\\mathrm{iter}} C_{0} V f + I_{0}}{\\alpha_{\\mathrm{comb}} k_{C} V f + k_{I} - I_{1}}$$\n\n**4. Numerical Calculation**\n\nSubstitute the given values into the expression for $n$:\n-   $V = 0.8$\n-   $f = 1.0 \\times 10^{9}$\n-   $\\alpha_{\\mathrm{comb}} = 0.15$\n-   $k_{C} = 0.4 \\times 10^{-15}$\n-   $k_{I} = 0.8 \\times 10^{-9}$\n-   $\\alpha_{\\mathrm{iter}} = 0.10$\n-   $C_{0} = 20 \\times 10^{-15}$\n-   $I_{0} = 5.0 \\times 10^{-9}$\n-   $I_{1} = 0.05 \\times 10^{-9}$\n\nNumerator:\n$$ \\alpha_{\\mathrm{iter}} C_{0} V f + I_{0} = (0.10)(20 \\times 10^{-15})(0.8)(1.0 \\times 10^{9}) + (5.0 \\times 10^{-9}) $$\n$$ = 1.6 \\times 10^{-6} + 5.0 \\times 10^{-9} = 1.605 \\times 10^{-6} $$\n\nDenominator:\n$$ \\alpha_{\\mathrm{comb}} k_{C} V f + k_{I} - I_{1} = (0.15)(0.4 \\times 10^{-15})(0.8)(1.0 \\times 10^{9}) + (0.8 \\times 10^{-9}) - (0.05 \\times 10^{-9}) $$\n$$ = 4.8 \\times 10^{-8} + 0.75 \\times 10^{-9} = 4.875 \\times 10^{-8} $$\n\nCalculation of $n$:\n$$ n = \\frac{1.605 \\times 10^{-6}}{4.875 \\times 10^{-8}} \\approx 32.9230769... $$\n\nRounding to three significant figures, the result is $32.9$.",
            "answer": "$$ \\boxed{32.9} $$"
        },
        {
            "introduction": "Our final practice takes a deeper dive into the microarchitectural sources of dynamic power, revealing that it depends not only on the circuit's design but also on the data it processes. In this exercise , you will compare two different multiplier implementations—an array and a Booth-recoded design—by building a power model from the ground up. This involves estimating the switching activity factor ($\\alpha$) based on the statistical properties of the input operands, providing a more nuanced and realistic view of how hardware consumes power in response to different workloads.",
            "id": "3638068",
            "problem": "A processor datapath must support signed $N$-bit multiplication in Complementary Metal–Oxide–Semiconductor (CMOS). Two microarchitectural options are under consideration for $N = 16$: \n- a conventional $16 \\times 16$ array multiplier that forms all simple partial products and reduces them with a Carry-Save Adder (CSA) array followed by a Carry-Propagate Adder (CPA), and \n- a radix-$4$ Booth recoded multiplier that reduces the number of partial-product rows by approximately a factor of $2$ and uses multiplexed partial-product generation.\n\nThe design team wants to compare expected dynamic power under a realistic workload mixture. Assume the following fundamental base and modeling assumptions:\n- The energy drawn from the supply to charge a capacitance $C$ to voltage $V$ during a $0 \\to 1$ transition is $C V^2$.\n- Over cycles with independent inputs, the probability of a $0 \\rightarrow 1$ event at a node whose logic value in any cycle is a Bernoulli random variable with $\\Pr\\{1\\} = p$ is $\\alpha(p) = (1-p)p$. \n- For a one-bit full adder with three independent Bernoulli inputs having identical one-probability $p$, the one-probabilities at its outputs are \n  $p_{\\text{sum}}(p) = 3p - 6p^{2} + 4p^{3}$ and $p_{\\text{car}}(p) = 3p^{2} - 2p^{3}$. Use $\\alpha_{\\text{sum}}(p) = \\alpha(p_{\\text{sum}}(p))$ and $\\alpha_{\\text{car}}(p) = \\alpha(p_{\\text{car}}(p))$.\n- Treat successive operand pairs across cycles as independent. Neglect spatial correlations and model inputs to each CSA full adder as independent with one-probability equal to the one-probability of partial-product bits in that workload. For the CPA, approximate its effective $0 \\rightarrow 1$ transition probability as $\\alpha_{\\text{CPA}} = 0.25$ per bit, independent of workload. Assume static (leakage) power is identical across the two architectures and may be ignored in the comparison.\n\nArchitecture- and circuit-level parameters are as follows:\n- Supply voltage $V = 0.9$ $\\mathrm{V}$, clock frequency $f = 1.0 \\times 10^{9}$ $\\mathrm{Hz}$.\n- Array multiplier:\n  - Partial-product generation uses $16 \\times 16 = 256$ independent one-bit AND nodes, each with effective switched capacitance $C_{\\text{pp}} = 1.0 \\times 10^{-15}$ $\\mathrm{F}$ per bit.\n  - CSA reduction is modeled as $(R-2)$ layers of $16$ one-bit full adders, where $R = 16$ is the number of partial-product rows. Thus there are $224$ full-adder cells in total. Each full-adder cell has sum- and carry-output effective capacitances $C_{\\text{sum}} = 1.5 \\times 10^{-15}$ $\\mathrm{F}$ and $C_{\\text{car}} = 1.5 \\times 10^{-15}$ $\\mathrm{F}$.\n  - Final CPA is $32$ bits wide, with an effective switched capacitance per bit $C_{\\text{CPA}} = 3.0 \\times 10^{-15}$ $\\mathrm{F}$ incorporating its internal nodes and output.\n- Radix-$4$ Booth multiplier:\n  - Effective number of partial-product rows is $R_{B} = 9$. Model partial-product generation as $R_{B} \\times 16 = 144$ multiplexed bit-nodes, each with effective switched capacitance $C_{\\text{pp,B}} = C_{\\text{pp}} + C_{\\text{mux}}$, where $C_{\\text{mux}} = 1.0 \\times 10^{-15}$ $\\mathrm{F}$.\n  - CSA reduction uses $(R_{B} - 2) = 7$ layers of $16$ full adders, i.e., $112$ full-adder cells, with the same $C_{\\text{sum}}$ and $C_{\\text{car}}$ as above.\n  - Final CPA is the same as the array case ($32$ bits at $C_{\\text{CPA}}$).\n- Workloads:\n  - Random case: both operands are independent and identically distributed with per-bit one-probability $p_{A} = p_{B} = 0.5$. Model the one-probability of any simple partial-product bit as $p_{\\text{pp}} = p_{A} p_{B}$, and for the Booth case assume, for estimation, that the bit one-probability in the generated partial-product rows is equal to the simple partial-product model.\n  - Structured case: one operand remains with per-bit one-probability $p_{A} = 0.5$, the other is sparse with per-bit one-probability $p_{B} = r$, where $r = 0.1$, independent across bits. Use $p_{\\text{pp}} = p_{A} p_{B}$, and the same estimation for the Booth case as above.\n- Mixture: a fraction $q = 0.6$ of cycles are the random case, and a fraction $(1-q)$ are the structured case.\n\nLet the expected dynamic power of an implementation be computed by summing, over all independent nodes, the product of its effective switched capacitance and the $0 \\rightarrow 1$ transition probability, multiplying by $V^{2}$ and $f$.\n\nCompute the ratio of expected dynamic power of the Booth multiplier to that of the array multiplier, averaged over the mixture, i.e., \n$\\frac{P_{\\text{Booth}}}{P_{\\text{Array}}}$, under the modeling assumptions given. Express your answer as a dimensionless number and round your final result to four significant figures.",
            "solution": "The objective is to compute the ratio of the expected dynamic power of a radix-$4$ Booth multiplier to a conventional array multiplier, $\\frac{P_{\\text{Booth}}}{P_{\\text{Array}}}$. The dynamic power of a CMOS circuit is given by the sum of the power consumed by charging and discharging nodal capacitances. For a circuit with multiple nodes, the total dynamic power $P$ can be expressed as $P = f V^2 \\sum_i C_i \\alpha_i$, where $f$ is the clock frequency, $V$ is the supply voltage, $C_i$ is the capacitance of node $i$, and $\\alpha_i$ is the activity factor (the probability of a $0 \\to 1$ transition) of node $i$.\n\nThe term $\\sum_i C_i \\alpha_i$ is the total effective switched capacitance of the circuit, which we will denote as $C'$. Since the frequency $f$ and voltage $V$ are the same for both architectures, the ratio of their powers is equal to the ratio of their total effective switched capacitances, averaged over the workload mixture:\n$$\n\\frac{P_{\\text{Booth}}}{P_{\\text{Array}}} = \\frac{f V^2 C'_{\\text{Booth, avg}}}{f V^2 C'_{\\text{Array, avg}}} = \\frac{C'_{\\text{Booth, avg}}}{C'_{\\text{Array, avg}}}\n$$\nThe total effective switched capacitance $C'$ for each architecture is the sum of the contributions from its three main components: partial-product (PP) generation, the Carry-Save Adder (CSA) array, and the final Carry-Propagate Adder (CPA).\n$$\nC' = C'_{\\text{PP}} + C'_{\\text{CSA}} + C'_{\\text{CPA}}\n$$\nThe problem specifies a workload mixture: a fraction $q=0.6$ of cycles are \"random\" and a fraction $1-q=0.4$ are \"structured\". The average effective switched capacitance is the weighted average:\n$$\nC'_{\\text{avg}} = q \\cdot C'_{\\text{rand}} + (1-q) \\cdot C'_{\\text{struct}}\n$$\nWe must first calculate the activity factors for each workload. The activity factor $\\alpha(p)$ for a node with one-probability $p$ is $\\alpha(p) = p(1-p)$.\n\n**1. Workload Parameter and Activity Factor Calculation**\n\n**Random Workload:**\nThe one-probabilities of the input operand bits are $p_A = 0.5$ and $p_B = 0.5$. The one-probability of a simple partial-product bit is $p_{\\text{pp,rand}} = p_A p_B = 0.5 \\times 0.5 = 0.25$.\n- Partial-product node activity: $\\alpha_{\\text{pp,rand}} = p_{\\text{pp,rand}}(1-p_{\\text{pp,rand}}) = 0.25(1-0.25) = 0.1875$.\n- CSA full-adder (FA) node activity (for $p = 0.25$):\n  - Sum output one-probability: $p_{\\text{sum}}(0.25) = 3(0.25) - 6(0.25)^2 + 4(0.25)^3 = 0.75 - 0.375 + 0.0625 = 0.4375$.\n  - Sum activity: $\\alpha_{\\text{sum,rand}} = 0.4375(1-0.4375) = 0.24609375$.\n  - Carry output one-probability: $p_{\\text{car}}(0.25) = 3(0.25)^2 - 2(0.25)^3 = 0.1875 - 0.03125 = 0.15625$.\n  - Carry activity: $\\alpha_{\\text{car,rand}} = 0.15625(1-0.15625) = 0.1318359375$.\n\n**Structured Workload:**\nThe one-probabilities are $p_A = 0.5$ and $p_B = 0.1$. The one-probability of a partial-product bit is $p_{\\text{pp,struct}} = p_A p_B = 0.5 \\times 0.1 = 0.05$.\n- Partial-product node activity: $\\alpha_{\\text{pp,struct}} = 0.05(1-0.05) = 0.0475$.\n- CSA FA node activity (for $p = 0.05$):\n  - Sum output one-probability: $p_{\\text{sum}}(0.05) = 3(0.05) - 6(0.05)^2 + 4(0.05)^3 = 0.15 - 0.015 + 0.0005 = 0.1355$.\n  - Sum activity: $\\alpha_{\\text{sum,struct}} = 0.1355(1-0.1355) = 0.11712475$.\n  - Carry output one-probability: $p_{\\text{car}}(0.05) = 3(0.05)^2 - 2(0.05)^3 = 0.0075 - 0.00025 = 0.00725$.\n  - Carry activity: $\\alpha_{\\text{car,struct}} = 0.00725(1-0.00725) = 0.0071971875$.\n\n**2. Effective Switched Capacitance Calculation**\n\nFirst, we find the switched capacitance of a single FA cell for each workload.\n$C'_{\\text{FA}}(p) = C_{\\text{sum}}\\alpha_{\\text{sum}}(p) + C_{\\text{car}}\\alpha_{\\text{car}}(p)$. Given $C_{\\text{sum}} = C_{\\text{car}} = 1.5 \\times 10^{-15} \\, \\mathrm{F}$:\n- Random: $C'_{\\text{FA,rand}} = (1.5 \\times 10^{-15})(\\alpha_{\\text{sum,rand}} + \\alpha_{\\text{car,rand}}) = (1.5 \\times 10^{-15})(0.24609375 + 0.1318359375) = 0.56689453125 \\times 10^{-15} \\, \\mathrm{F}$.\n- Structured: $C'_{\\text{FA,struct}} = (1.5 \\times 10^{-15})(\\alpha_{\\text{sum,struct}} + \\alpha_{\\text{car,struct}}) = (1.5 \\times 10^{-15})(0.11712475 + 0.0071971875) = 0.18648290625 \\times 10^{-15} \\, \\mathrm{F}$.\n\nThe CPA contribution is constant for all cases:\n$C'_{\\text{CPA}} = N_{\\text{CPA}} C_{\\text{CPA}} \\alpha_{\\text{CPA}} = 32 \\times (3.0 \\times 10^{-15} \\, \\mathrm{F}) \\times 0.25 = 24 \\times 10^{-15} \\, \\mathrm{F}$.\n\nNow we compute the total $C'$ for each architecture and workload.\n\n**Array Multiplier:**\n$N_{\\text{pp,A}} = 256$, $C_{\\text{pp}} = 1.0 \\times 10^{-15} \\, \\mathrm{F}$, $N_{\\text{FA,A}} = 224$.\n- Random workload:\n  $C'_{\\text{Array,rand}} = N_{\\text{pp,A}} C_{\\text{pp}} \\alpha_{\\text{pp,rand}} + N_{\\text{FA,A}} C'_{\\text{FA,rand}} + C'_{\\text{CPA}}$\n  $C'_{\\text{Array,rand}} = [256 \\times (1.0 \\times 10^{-15}) \\times 0.1875] + [224 \\times (0.56689453125 \\times 10^{-15})] + [24 \\times 10^{-15}]$\n  $C'_{\\text{Array,rand}} = [48 + 126.984375 + 24] \\times 10^{-15} = 198.984375 \\times 10^{-15} \\, \\mathrm{F}$.\n- Structured workload:\n  $C'_{\\text{Array,struct}} = N_{\\text{pp,A}} C_{\\text{pp}} \\alpha_{\\text{pp,struct}} + N_{\\text{FA,A}} C'_{\\text{FA,struct}} + C'_{\\text{CPA}}$\n  $C'_{\\text{Array,struct}} = [256 \\times (1.0 \\times 10^{-15}) \\times 0.0475] + [224 \\times (0.18648290625 \\times 10^{-15})] + [24 \\times 10^{-15}]$\n  $C'_{\\text{Array,struct}} = [12.16 + 41.772171 + 24] \\times 10^{-15} = 77.932171 \\times 10^{-15} \\, \\mathrm{F}$.\n\n**Radix-4 Booth Multiplier:**\n$N_{\\text{pp,B}} = 144$, $C_{\\text{pp,B}} = C_{\\text{pp}} + C_{\\text{mux}} = 2.0 \\times 10^{-15} \\, \\mathrm{F}$, $N_{\\text{FA,B}} = 112$.\n- Random workload:\n  $C'_{\\text{Booth,rand}} = N_{\\text{pp,B}} C_{\\text{pp,B}} \\alpha_{\\text{pp,rand}} + N_{\\text{FA,B}} C'_{\\text{FA,rand}} + C'_{\\text{CPA}}$\n  $C'_{\\text{Booth,rand}} = [144 \\times (2.0 \\times 10^{-15}) \\times 0.1875] + [112 \\times (0.56689453125 \\times 10^{-15})] + [24 \\times 10^{-15}]$\n  $C'_{\\text{Booth,rand}} = [54 + 63.4921875 + 24] \\times 10^{-15} = 141.4921875 \\times 10^{-15} \\, \\mathrm{F}$.\n- Structured workload:\n  $C'_{\\text{Booth,struct}} = N_{\\text{pp,B}} C_{\\text{pp,B}} \\alpha_{\\text{pp,struct}} + N_{\\text{FA,B}} C'_{\\text{FA,struct}} + C'_{\\text{CPA}}$\n  $C'_{\\text{Booth,struct}} = [144 \\times (2.0 \\times 10^{-15}) \\times 0.0475] + [112 \\times (0.18648290625 \\times 10^{-15})] + [24 \\times 10^{-15}]$\n  $C'_{\\text{Booth,struct}} = [13.68 + 20.8860855 + 24] \\times 10^{-15} = 58.5660855 \\times 10^{-15} \\, \\mathrm{F}$.\n\n**3. Mixture-Averaged Calculation and Final Ratio**\nThe mixture consists of $q=0.6$ random cycles and $1-q=0.4$ structured cycles.\n- Average for Array Multiplier:\n  $C'_{\\text{Array,avg}} = 0.6 \\times C'_{\\text{Array,rand}} + 0.4 \\times C'_{\\text{Array,struct}}$\n  $C'_{\\text{Array,avg}} = (0.6 \\times 198.984375 + 0.4 \\times 77.932171) \\times 10^{-15}$\n  $C'_{\\text{Array,avg}} = (119.390625 + 31.1728684) \\times 10^{-15} = 150.5634934 \\times 10^{-15} \\, \\mathrm{F}$.\n- Average for Booth Multiplier:\n  $C'_{\\text{Booth,avg}} = 0.6 \\times C'_{\\text{Booth,rand}} + 0.4 \\times C'_{\\text{Booth,struct}}$\n  $C'_{\\text{Booth,avg}} = (0.6 \\times 141.4921875 + 0.4 \\times 58.5660855) \\times 10^{-15}$\n  $C'_{\\text{Booth,avg}} = (84.8953125 + 23.4264342) \\times 10^{-15} = 108.3217467 \\times 10^{-15} \\, \\mathrm{F}$.\n\nFinally, the required ratio is:\n$$\n\\frac{P_{\\text{Booth}}}{P_{\\text{Array}}} = \\frac{C'_{\\text{Booth, avg}}}{C'_{\\text{Array, avg}}} = \\frac{108.3217467 \\times 10^{-15}}{150.5634934 \\times 10^{-15}} \\approx 0.7194358\n$$\nRounding to four significant figures, the ratio is $0.7194$.",
            "answer": "$$\\boxed{0.7194}$$"
        }
    ]
}