{
    "hands_on_practices": [
        {
            "introduction": "This practice explores the fundamental thermal behavior of a processor during a common performance-boosting feature: turbo mode. You will apply a first-order thermal model to analyze the temperature increase when voltage and frequency are raised, and determine the maximum safe duration of this boost. This exercise  grounds the abstract concepts of thermal resistance and capacitance in a tangible, real-world engineering problem.",
            "id": "3684962",
            "problem": "A multicore processor die uses Dynamic Voltage and Frequency Scaling (DVFS) to enter a temporary turbo mode that raises both clock frequency and supply voltage. The package can be approximated by a single dominant lumped thermal pole characterized by thermal resistance $R_{\\mathrm{th}}$ and thermal time constant $\\tau$, referenced to the ambient temperature $T_{\\mathrm{amb}}$. The processorâ€™s total power is the sum of dynamic power and leakage power. The dynamic power is modeled by the widely used relation $P_{\\mathrm{dyn}} = C_{\\mathrm{eff}} V^{2} f$, where $C_{\\mathrm{eff}}$ is the effective switched capacitance. The leakage power is modeled as $P_{\\mathrm{leak}} = k_{\\mathrm{leak}} V$, where $k_{\\mathrm{leak}}$ is a constant coefficient.\n\nAt baseline operation, the processor runs at frequency $f_{0} = 3.0 \\times 10^{9}\\ \\mathrm{Hz}$ and voltage $V_{0} = 1.0\\ \\mathrm{V}$. At time $t = 0$, it enters turbo mode with increments $\\Delta f = 1.0 \\times 10^{9}\\ \\mathrm{Hz}$ and $\\Delta V = 0.1\\ \\mathrm{V}$, so that $f_{1} = f_{0} + \\Delta f$ and $V_{1} = V_{0} + \\Delta V$. Use the following parameters: ambient temperature $T_{\\mathrm{amb}} = 300\\ \\mathrm{K}$, effective switched capacitance $C_{\\mathrm{eff}} = 20 \\times 10^{-9}\\ \\mathrm{F}$, leakage coefficient $k_{\\mathrm{leak}} = 10\\ \\mathrm{W}/\\mathrm{V}$, thermal resistance $R_{\\mathrm{th}} = 0.4\\ \\mathrm{K}/\\mathrm{W}$, and thermal time constant $\\tau = 10\\ \\mathrm{s}$. The maximum allowable junction temperature is $T_{\\max} = 340\\ \\mathrm{K}$.\n\nStarting explicitly from energy conservation and a physically grounded single-pole lumped thermal model, and using the above power models, first derive the temperature transient $T(t)$ for $t \\geq 0$ when the system steps from baseline to turbo at $t=0$. Then determine the maximum turbo duration $t_{\\mathrm{win}}$ such that the temperature satisfies $T(t) \\leq T_{\\max}$ for all $t \\in [0, t_{\\mathrm{win}}]$.\n\nRound your final numerical value for $t_{\\mathrm{win}}$ to four significant figures and express it in seconds.",
            "solution": "The thermal dynamics of a lumped body with a single dominant pole can be derived from energy conservation. Let $T(t)$ be the junction temperature. The energy balance for a lumped thermal capacitance $C_{\\mathrm{th}}$ connected to ambient through a thermal resistance $R_{\\mathrm{th}}$ is\n$$\nC_{\\mathrm{th}} \\frac{dT}{dt} = P(t) - \\frac{T(t) - T_{\\mathrm{amb}}}{R_{\\mathrm{th}}},\n$$\nwhere $P(t)$ is the total power delivered to the die. The thermal time constant is $\\tau = R_{\\mathrm{th}} C_{\\mathrm{th}}$, so we can write\n$$\n\\frac{dT}{dt} = \\frac{1}{C_{\\mathrm{th}}} P(t) - \\frac{T(t) - T_{\\mathrm{amb}}}{R_{\\mathrm{th}} C_{\\mathrm{th}}}\n= \\frac{1}{C_{\\mathrm{th}}} P(t) - \\frac{T(t) - T_{\\mathrm{amb}}}{\\tau}.\n$$\nFor a step change in power at $t=0$ from a baseline constant power $P_{0}$ to a turbo constant power $P_{1}$, the system is linear time invariant, and the solution for $t \\geq 0$ is the standard first-order response:\n$$\nT(t) = T_{\\infty} + \\bigl( T(0^{+}) - T_{\\infty} \\bigr) \\exp\\!\\left( -\\frac{t}{\\tau} \\right),\n$$\nwhere the new steady-state temperature under turbo power is\n$$\nT_{\\infty} = T_{\\mathrm{amb}} + R_{\\mathrm{th}} P_{1},\n$$\nand the initial condition $T(0^{+})$ equals the steady baseline temperature $T(0^{-}) = T_{\\mathrm{amb}} + R_{\\mathrm{th}} P_{0}$ because temperature is continuous.\n\nWe now compute $P_{0}$ and $P_{1}$ using the given power models. The total power is\n$$\nP = P_{\\mathrm{dyn}} + P_{\\mathrm{leak}} = C_{\\mathrm{eff}} V^{2} f + k_{\\mathrm{leak}} V.\n$$\nBaseline values:\n$$\nf_{0} = 3.0 \\times 10^{9}, \\quad V_{0} = 1.0, \\quad C_{\\mathrm{eff}} = 20 \\times 10^{-9}, \\quad k_{\\mathrm{leak}} = 10.\n$$\nCompute baseline dynamic power:\n$$\nP_{\\mathrm{dyn},0} = C_{\\mathrm{eff}} V_{0}^{2} f_{0} = \\left( 20 \\times 10^{-9} \\right) \\cdot (1.0)^{2} \\cdot \\left( 3.0 \\times 10^{9} \\right) = 60.\n$$\nBaseline leakage power:\n$$\nP_{\\mathrm{leak},0} = k_{\\mathrm{leak}} V_{0} = 10 \\cdot 1.0 = 10.\n$$\nTherefore,\n$$\nP_{0} = 60 + 10 = 70.\n$$\nTurbo values:\n$$\nf_{1} = f_{0} + \\Delta f = 3.0 \\times 10^{9} + 1.0 \\times 10^{9} = 4.0 \\times 10^{9}, \\quad V_{1} = V_{0} + \\Delta V = 1.0 + 0.1 = 1.1.\n$$\nTurbo dynamic power:\n$$\nP_{\\mathrm{dyn},1} = C_{\\mathrm{eff}} V_{1}^{2} f_{1} = \\left( 20 \\times 10^{-9} \\right) \\cdot (1.1)^{2} \\cdot \\left( 4.0 \\times 10^{9} \\right)\n= \\left( 20 \\times 10^{-9} \\right) \\cdot 1.21 \\cdot \\left( 4.0 \\times 10^{9} \\right)\n= 96.8.\n$$\nTurbo leakage power:\n$$\nP_{\\mathrm{leak},1} = k_{\\mathrm{leak}} V_{1} = 10 \\cdot 1.1 = 11.\n$$\nTherefore,\n$$\nP_{1} = 96.8 + 11 = 107.8.\n$$\nWith $R_{\\mathrm{th}} = 0.4$ and $T_{\\mathrm{amb}} = 300$, we have\n$$\nT(0^{+}) = T_{\\mathrm{amb}} + R_{\\mathrm{th}} P_{0} = 300 + 0.4 \\cdot 70 = 300 + 28 = 328,\n$$\nand\n$$\nT_{\\infty} = T_{\\mathrm{amb}} + R_{\\mathrm{th}} P_{1} = 300 + 0.4 \\cdot 107.8 = 300 + 43.12 = 343.12.\n$$\nThus the turbo transient is\n$$\nT(t) = 343.12 + \\left( 328 - 343.12 \\right) \\exp\\!\\left( -\\frac{t}{10} \\right)\n= 343.12 - 15.12 \\exp\\!\\left( -\\frac{t}{10} \\right).\n$$\nTo find the maximum turbo duration $t_{\\mathrm{win}}$ such that $T(t) \\leq T_{\\max}$ for $t \\in [0, t_{\\mathrm{win}}]$, set $T(t_{\\mathrm{win}}) = T_{\\max}$ and solve for $t_{\\mathrm{win}}$. With $T_{\\max} = 340$,\n$$\n340 = 343.12 - 15.12 \\exp\\!\\left( -\\frac{t_{\\mathrm{win}}}{10} \\right).\n$$\nRearrange:\n$$\n15.12 \\exp\\!\\left( -\\frac{t_{\\mathrm{win}}}{10} \\right) = 343.12 - 340 = 3.12,\n$$\n$$\n\\exp\\!\\left( -\\frac{t_{\\mathrm{win}}}{10} \\right) = \\frac{3.12}{15.12} = \\frac{13}{63}.\n$$\nTaking the natural logarithm,\n$$\n-\\frac{t_{\\mathrm{win}}}{10} = \\ln\\!\\left( \\frac{13}{63} \\right),\n\\quad \\Rightarrow \\quad\nt_{\\mathrm{win}} = -10 \\, \\ln\\!\\left( \\frac{13}{63} \\right).\n$$\nNumerically, $\\ln\\!\\left( \\frac{13}{63} \\right) \\approx -1.57818537$, so\n$$\nt_{\\mathrm{win}} \\approx 15.7818537.\n$$\nRounded to four significant figures and expressed in seconds,\n$$\nt_{\\mathrm{win}} = 15.78.\n$$",
            "answer": "$$\\boxed{15.78}$$"
        },
        {
            "introduction": "Modern processors are complex systems where performance and power are deeply intertwined. This exercise moves beyond simple power models to explore how microarchitectural decisions, such as instruction fetch throttling, impact Instructions Per Cycle (IPC) and, consequently, the chip's power dissipation and temperature. By modeling this interplay , you will gain a deeper appreciation for the holistic design challenges in thermal management.",
            "id": "3685015",
            "problem": "Consider a superscalar processor experiencing a transient thermal hotspot. The microarchitecture has a front-end (instruction fetch, instruction cache, and branch prediction) and a back-end (rename, scheduling, execution units, and commit). The processor operates at supply voltage $V$ and clock frequency $f$, and the dynamic power of a block is modeled by the well-tested relation $P_{\\text{dyn}} = \\alpha C V^{2} f$, where $\\alpha$ is an activity factor and $C$ is an effective switching capacitance. The thermal behavior of the chip can be modeled as a single lumped thermal resistance-capacitance network connected to ambient, with thermal resistance $R_{\\text{th}}$ to ambient and thermal capacitance $C_{\\text{th}}$ of the package.\n\nAt time $t = 0$, a hotspot triggers instruction fetch throttling that reduces the fetch width. This also alters branch behavior and affects Instructions Per Cycle (IPC). Assume the following scientifically grounded parameters and modeling assumptions:\n\n- Clock frequency $f = 3.0 \\,\\mathrm{GHz}$, supply voltage $V = 1.0 \\,\\mathrm{V}$, ambient temperature $T_{\\text{amb}} = 25 \\,\\mathrm{^{\\circ}C}$.\n- Thermal resistance $R_{\\text{th}} = 1.0 \\,\\mathrm{K/W}$, thermal capacitance $C_{\\text{th}} = 20 \\,\\mathrm{J/K}$.\n- Static leakage power is temperature-insensitive over the time window considered and is $P_{\\text{leak}} = 3.0 \\,\\mathrm{W}$.\n- Before $t = 0$, the processor runs at steady-state with:\n  - Issue width $W_{\\text{issue}} = 4$ and fetch width $W_{\\text{fetch,0}} = 4$.\n  - Branch density $d = 0.20$ branches per instruction.\n  - Branch misprediction probability $m_{0} = 0.05$ per branch.\n  - Misprediction penalty $B = 15$ cycles.\n  - Front-end effective switching capacitance $C_{\\text{FE}} = 2.0 \\times 10^{-9} \\,\\mathrm{F}$.\n  - Back-end effective switching capacitance $C_{\\text{BE}} = 8.0 \\times 10^{-9} \\,\\mathrm{F}$.\n  - When the front-end is actively fetching, each fetch slot contributes an activity increment $\\alpha_{\\text{slot}} = 0.10$ per slot per cycle to $\\alpha_{\\text{FE}}$. During stalls caused by branch mispredictions, the front-end still toggles minimally, contributing $\\alpha_{\\text{stall}} = 0.02$ per cycle, independent of $W_{\\text{fetch}}$.\n  - In the back-end, each instruction committed per cycle contributes an activity increment $\\alpha_{u} = 0.10$ to the back-end activity per instruction per cycle (i.e., the back-end dynamic power scales linearly with IPC via the same $P_{\\text{dyn}} = \\alpha C V^{2} f$ model).\n- At $t = 0$, fetch throttling reduces the fetch width to $W_{\\text{fetch,1}} = 2$. Simultaneously, the branch misprediction probability increases to $m_{1} = 0.08$ per branch (branch density $d$ and penalty $B$ remain the same).\n\nModel the commit capacity in cycles without stalls as $W_{c} = \\min\\!\\big(W_{\\text{issue}}, W_{\\text{fetch}}\\big)$. Derive from first principles, using the definitions above, a self-consistent expression for the fraction of cycles lost to branch-misprediction stalls, and thereby determine the IPC $R$ under both pre-throttle and post-throttle conditions. Use these to compute front-end and back-end dynamic powers before and after throttling via $P_{\\text{dyn}} = \\alpha C V^{2} f$, and then the total powers. Assume the processor has been running long enough before $t = 0$ to be at the steady-state temperature set by the pre-throttle total power. For $t \\ge 0$, consider the power to be a step change to the post-throttle total power. Using the lumped thermal resistance-capacitance model, determine the die temperature at time $t = 0.50 \\,\\mathrm{s}$.\n\nRound your final temperature to four significant figures. Express the final temperature in degrees Celsius.",
            "solution": "The problem requires the determination of the processor die temperature at a specific time $t = 0.50 \\, \\mathrm{s}$, following a change in operating parameters. The solution involves a multi-step analysis: first, determining the initial steady-state temperature before the change; second, determining the new power dissipation after the change; and third, solving the transient thermal response.\n\nFirst, we establish a performance model to calculate the Instructions Per Cycle (IPC), denoted by $R$. The commit width, $W_c$, is the maximum number of instructions that can be processed per cycle in the absence of stalls, given by $W_c = \\min(W_{\\text{issue}}, W_{\\text{fetch}})$. Stalls are introduced by branch mispredictions. Let $S$ be the fraction of cycles lost to stalls. The effective IPC is then $R = W_c (1 - S)$.\n\nThe number of instructions committed in a long interval of $N_{\\text{cyc}}$ cycles is $N_{\\text{inst}} = R \\times N_{\\text{cyc}}$. The number of branches is $N_{\\text{branch}} = N_{\\text{inst}} \\times d$, where $d$ is the branch density. The number of mispredictions is $N_{\\text{misp}} = N_{\\text{branch}} \\times m$, where $m$ is the misprediction probability. Each misprediction costs $B$ cycles, so the total number of stalled cycles is $N_{\\text{stall}} = N_{\\text{misp}} \\times B = (R \\times N_{\\text{cyc}} \\times d \\times m) \\times B$. The fraction of stalled cycles is $S = N_{\\text{stall}} / N_{\\text{cyc}} = R \\times d \\times m \\times B$.\n\nWe have a system of two equations for $R$ and $S$:\n$R = W_c (1 - S)$\n$S = R d m B$\n\nSubstituting the second equation into the first yields $R = W_c (1 - R d m B)$. Solving for $R$:\n$R = W_c - R W_c d m B$\n$R(1 + W_c d m B) = W_c$\n$$R = \\frac{W_c}{1 + W_c d m B}$$\n\nThis expression allows us to calculate the IPC for both the pre-throttle and post-throttle conditions.\n\nState 0: Pre-throttle analysis ($t  0$)\nThe given parameters are: $W_{\\text{issue}} = 4$, $W_{\\text{fetch,0}} = 4$, $d = 0.20$, $m_0 = 0.05$, and $B = 15$.\nThe commit width is $W_{c,0} = \\min(4, 4) = 4$.\nThe IPC is:\n$$R_0 = \\frac{W_{c,0}}{1 + W_{c,0} d m_0 B} = \\frac{4}{1 + (4)(0.20)(0.05)(15)} = \\frac{4}{1 + 0.6} = \\frac{4}{1.6} = 2.5$$\nThe fraction of stall cycles is $S_0 = R_0 d m_0 B = (2.5)(0.20)(0.05)(15) = 0.375$.\n\nNow, we calculate the total power consumption, $P_{\\text{total},0}$, which is the sum of dynamic power from the front-end ($P_{\\text{dyn,FE},0}$), the back-end ($P_{\\text{dyn,BE},0}$), and static leakage power ($P_{\\text{leak}}$).\nThe dynamic power is $P_{\\text{dyn}} = \\alpha C V^2 f$.\nThe front-end activity factor, $\\alpha_{\\text{FE},0}$, is an average of activity during active fetch cycles (fraction $1 - S_0$) and stall cycles (fraction $S_0$):\n$\\alpha_{\\text{FE},0} = (1 - S_0)(W_{\\text{fetch,0}} \\alpha_{\\text{slot}}) + S_0 \\alpha_{\\text{stall}} = (1 - 0.375)(4 \\times 0.10) + (0.375)(0.02) = (0.625)(0.40) + 0.0075 = 0.25 + 0.0075 = 0.2575$.\n$P_{\\text{dyn,FE},0} = \\alpha_{\\text{FE},0} C_{\\text{FE}} V^2 f = (0.2575)(2.0 \\times 10^{-9} \\, \\mathrm{F})(1.0 \\, \\mathrm{V})^2(3.0 \\times 10^9 \\, \\mathrm{Hz}) = 1.545 \\, \\mathrm{W}$.\n\nThe back-end activity factor is proportional to the IPC: $\\alpha_{\\text{BE},0} = R_0 \\alpha_u = (2.5)(0.10) = 0.25$.\n$P_{\\text{dyn,BE},0} = \\alpha_{\\text{BE},0} C_{\\text{BE}} V^2 f = (0.25)(8.0 \\times 10^{-9} \\, \\mathrm{F})(1.0 \\, \\mathrm{V})^2(3.0 \\times 10^9 \\, \\mathrm{Hz}) = 6.0 \\, \\mathrm{W}$.\n\nThe total power before throttling is:\n$P_{\\text{total},0} = P_{\\text{dyn,FE},0} + P_{\\text{dyn,BE},0} + P_{\\text{leak}} = 1.545 \\, \\mathrm{W} + 6.0 \\, \\mathrm{W} + 3.0 \\, \\mathrm{W} = 10.545 \\, \\mathrm{W}$.\n\nThe processor is at steady-state temperature $T(0)$ for $t0$. The steady-state relationship is $T_{\\text{ss}} = T_{\\text{amb}} + P_{\\text{total}} R_{\\text{th}}$.\n$T(0) = T_{\\text{amb}} + P_{\\text{total},0} R_{\\text{th}} = 25 \\, ^{\\circ}\\mathrm{C} + (10.545 \\, \\mathrm{W})(1.0 \\, \\mathrm{K/W}) = 35.545 \\, ^{\\circ}\\mathrm{C}$.\n\nState 1: Post-throttle analysis ($t \\ge 0$)\nAt $t = 0$, the parameters change to $W_{\\text{fetch,1}} = 2$ and $m_1 = 0.08$.\nThe new commit width is $W_{c,1} = \\min(4, 2) = 2$.\nThe new IPC is:\n$$R_1 = \\frac{W_{c,1}}{1 + W_{c,1} d m_1 B} = \\frac{2}{1 + (2)(0.20)(0.08)(15)} = \\frac{2}{1 + 0.48} = \\frac{2}{1.48} = \\frac{50}{37} \\approx 1.35135$$\nThe new fraction of stall cycles is $S_1 = R_1 d m_1 B = (\\frac{50}{37})(0.20)(0.08)(15) = \\frac{12}{37} \\approx 0.32432$.\n\nThe new total power, $P_{\\text{total},1}$, is calculated:\n$\\alpha_{\\text{FE},1} = (1 - S_1)(W_{\\text{fetch,1}} \\alpha_{\\text{slot}}) + S_1 \\alpha_{\\text{stall}} = (1 - \\frac{12}{37})(2 \\times 0.10) + (\\frac{12}{37})(0.02) = (\\frac{25}{37})(0.20) + \\frac{0.24}{37} = \\frac{5}{37} + \\frac{0.24}{37} = \\frac{5.24}{37}$.\n$P_{\\text{dyn,FE},1} = \\alpha_{\\text{FE},1} C_{\\text{FE}} V^2 f = (\\frac{5.24}{37})(2.0 \\times 10^{-9} \\, \\mathrm{F})(1.0 \\, \\mathrm{V})^2(3.0 \\times 10^9 \\, \\mathrm{Hz}) = \\frac{31.44}{37} \\, \\mathrm{W}$.\n\n$\\alpha_{\\text{BE},1} = R_1 \\alpha_u = (\\frac{50}{37})(0.10) = \\frac{5}{37}$.\n$P_{\\text{dyn,BE},1} = \\alpha_{\\text{BE},1} C_{\\text{BE}} V^2 f = (\\frac{5}{37})(8.0 \\times 10^{-9} \\, \\mathrm{F})(1.0 \\, \\mathrm{V})^2(3.0 \\times 10^9 \\, \\mathrm{Hz}) = \\frac{120}{37} \\, \\mathrm{W}$.\n\nThe total power after throttling is:\n$P_{\\text{total},1} = P_{\\text{dyn,FE},1} + P_{\\text{dyn,BE},1} + P_{\\text{leak}} = \\frac{31.44}{37} \\, \\mathrm{W} + \\frac{120}{37} \\, \\mathrm{W} + 3.0 \\, \\mathrm{W} = \\frac{151.44}{37} + 3.0 = \\frac{151.44 + 111}{37} = \\frac{262.44}{37} \\, \\mathrm{W} \\approx 7.093 \\, \\mathrm{W}$.\n\nFinally, we model the transient thermal behavior. The system is described by the first-order differential equation:\n$C_{\\text{th}} \\frac{dT}{dt} + \\frac{T(t) - T_{\\text{amb}}}{R_{\\text{th}}} = P_{\\text{total},1}$ for $t \\ge 0$.\nThe solution to this equation with initial condition $T(0)$ is:\n$T(t) = T_{\\text{ss},1} + (T(0) - T_{\\text{ss},1}) \\exp(-t/\\tau_{\\text{th}})$\nwhere $\\tau_{\\text{th}} = R_{\\text{th}} C_{\\text{th}}$ is the thermal time constant and $T_{\\text{ss},1}$ is the new steady-state temperature.\n\nThe new steady-state temperature is:\n$T_{\\text{ss},1} = T_{\\text{amb}} + P_{\\text{total},1} R_{\\text{th}} = 25 \\, ^{\\circ}\\mathrm{C} + (\\frac{262.44}{37} \\, \\mathrm{W})(1.0 \\, \\mathrm{K/W}) = 25 + \\frac{262.44}{37} \\, ^{\\circ}\\mathrm{C} \\approx 32.093 \\, ^{\\circ}\\mathrm{C}$.\n\nThe thermal time constant is:\n$\\tau_{\\text{th}} = R_{\\text{th}} C_{\\text{th}} = (1.0 \\, \\mathrm{K/W})(20 \\, \\mathrm{J/K}) = 20 \\, \\mathrm{s}$.\n\nNow we can find the temperature at $t = 0.50 \\, \\mathrm{s}$:\n$T(0.50) = T_{\\text{ss},1} + (T(0) - T_{\\text{ss},1}) \\exp(-0.50/\\tau_{\\text{th}})$\n$T(0.50) = (25 + \\frac{262.44}{37}) + \\left(35.545 - (25 + \\frac{262.44}{37})\\right) \\exp(-0.50/20)$\n$T(0.50) = (32.09297...) + (35.545 - 32.09297...) \\exp(-0.025)$\n$T(0.50) = 32.09297... + (3.452027...) \\exp(-0.025)$\nUsing $\\exp(-0.025) \\approx 0.9753099$:\n$T(0.50) \\approx 32.09297 + (3.452027)(0.9753099) \\approx 32.09297 + 3.36680 \\approx 35.45977 \\, ^{\\circ}\\mathrm{C}$.\n\nRounding to four significant figures gives $35.46 \\, ^{\\circ}\\mathrm{C}$.",
            "answer": "$$\\boxed{35.46}$$"
        },
        {
            "introduction": "Effective thermal management relies on active control systems that dynamically adjust processor settings. This practice delves into the control-theoretic aspects of thermal regulation, challenging you to analyze the stability of a closed-loop system. You will linearize the system dynamics and compare different control policies, deriving the stability limits to prevent undesirable temperature oscillations .",
            "id": "3685016",
            "problem": "A superscalar processor core with issue width $W$ uses a thermal management loop that adjusts the clock frequency $f$ based on the die temperature $T$. The thermal dynamics of the die and package are modeled by a single lumped thermal capacitance $C_{\\mathrm{th}}$ and thermal resistance $R_{\\mathrm{th}}$, so that the energy balance obeys\n$$\nC_{\\mathrm{th}} \\frac{dT}{dt} \\;=\\; -\\frac{T - T_{\\mathrm{amb}}}{R_{\\mathrm{th}}} \\;+\\; P(f,W).\n$$\nAssume, in the operating region of interest, that supply voltage is held fixed (so Dynamic Voltage and Frequency Scaling (DVFS) reduces to frequency-only control), leakage is absorbed into a constant offset, and dynamic power is proportional to the product of issue width and frequency:\n$$\nP(f,W) \\;=\\; \\beta\\, W\\, f \\;+\\; P_0,\n$$\nwith $\\beta$ a positive constant and $P_0$ a constant offset.\n\nThe controller samples temperature every $h$ seconds. At each sampling instant $k$, it sets the clock frequency according to a proportional law\n$$\nf_k \\;=\\; f^{\\ast} \\;+\\; K_f \\left(T_{\\mathrm{ref}} - T_k\\right),\n$$\nwhere $K_f$ is the proportional gain, $T_{\\mathrm{ref}}$ is the temperature setpoint, and $(\\cdot)^{\\ast}$ denotes the equilibrium value about which you linearize.\n\nTwo policies for issue width are considered:\n- Fixed-width policy: $W_k$ is held at a constant $W^{\\ast}$.\n- Adaptive-width policy with hysteresis: $W_k$ is switched between $W_{\\mathrm{high}}$ and $W_{\\mathrm{low}}$ using a symmetric hysteresis band of width $\\Delta T_h$ centered at $T_{\\mathrm{ref}}$. For small oscillations around $T_{\\mathrm{ref}}$ within the hysteresis band, approximate the effect of switching by a quasi-linear describing-function slope $dW/dT \\approx -\\Delta W / \\Delta T_h$, where $\\Delta W = W_{\\mathrm{high}} - W_{\\mathrm{low}}$.\n\nTasks:\n1. Starting from the continuous-time energy balance, derive the first-order forward-Euler discrete-time linearized temperature update about the equilibrium $(T^{\\ast}, f^{\\ast}, W^{\\ast})$ in terms of small deviations $\\delta T_k = T_k - T^{\\ast}$, $\\delta f_k = f_k - f^{\\ast}$, and $\\delta W_k = W_k - W^{\\ast}$. Identify the coefficients multiplying $\\delta T_k$, $\\delta f_k$, and $\\delta W_k$ in terms of $h$, $C_{\\mathrm{th}}$, $R_{\\mathrm{th}}$, $\\beta$, $f^{\\ast}$, and $W^{\\ast}$.\n2. Specialize the result to each policy to obtain a one-dimensional closed-loop map $\\delta T_{k+1} = \\lambda\\, \\delta T_k$ and derive, from first principles, the condition on $K_f$ that guarantees asymptotic convergence without sign alternation in $\\delta T_k$ (i.e., no oscillations about $T_{\\mathrm{ref}}$ in the discrete-time sense). Express, in closed form, the maximum allowable $K_f$ under each policy, denoted $K_{f,\\max}^{\\mathrm{fixed}}$ and $K_{f,\\max}^{\\mathrm{adapt}}$.\n3. Using the parameters $C_{\\mathrm{th}} = 10\\,\\mathrm{J/K}$, $R_{\\mathrm{th}} = 0.5\\,\\mathrm{K/W}$, $h = 0.1\\,\\mathrm{s}$, $\\beta = 5\\,\\mathrm{W}/(\\mathrm{GHz}\\cdot\\text{issue})$, $f^{\\ast} = 3\\,\\mathrm{GHz}$, $W_{\\mathrm{high}} = 4$, $W_{\\mathrm{low}} = 2$, and $\\Delta T_h = 4\\,\\mathrm{K}$, compute the ratio\n$$\n\\mathcal{R} \\;=\\; \\frac{K_{f,\\max}^{\\mathrm{adapt}}}{K_{f,\\max}^{\\mathrm{fixed}}}.\n$$\n\nRound your final answer for $\\mathcal{R}$ to four significant figures. Express the final answer as a dimensionless decimal.",
            "solution": "The problem requires a multi-step analysis of a simplified thermal control system for a processor core. The solution proceeds by first deriving the general linearized discrete-time dynamics, then specializing this model for two different control policies, analyzing their stability, and finally computing a ratio of maximum allowable gains.\n\n**Task 1: Linearized Discrete-Time Temperature Update**\n\nThe starting point is the continuous-time energy balance equation for the lumped thermal model:\n$$\nC_{\\mathrm{th}} \\frac{dT}{dt} = -\\frac{T - T_{\\mathrm{amb}}}{R_{\\mathrm{th}}} + P(f,W)\n$$\nSubstituting the given power model, $P(f,W) = \\beta W f + P_0$, yields:\n$$\nC_{\\mathrm{th}} \\frac{dT}{dt} = -\\frac{T - T_{\\mathrm{amb}}}{R_{\\mathrm{th}}} + \\beta W f + P_0\n$$\nTo linearize this system, we consider small perturbations around a steady-state equilibrium point $(T^{\\ast}, f^{\\ast}, W^{\\ast})$. Let $T(t) = T^{\\ast} + \\delta T(t)$, $f(t) = f^{\\ast} + \\delta f(t)$, and $W(t) = W^{\\ast} + \\delta W(t)$. The time derivative of temperature is $\\frac{dT}{dt} = \\frac{d(\\delta T)}{dt}$. At equilibrium, $\\frac{dT}{dt} = 0$.\nThe nonlinear equation can be written as $\\frac{dT}{dt} = G(T, f, W)$, where\n$$\nG(T, f, W) = \\frac{1}{C_{\\mathrm{th}}} \\left( -\\frac{T - T_{\\mathrm{amb}}}{R_{\\mathrm{th}}} + \\beta W f + P_0 \\right)\n$$\nThe linearized dynamics for the perturbations are given by:\n$$\n\\frac{d(\\delta T)}{dt} \\approx \\frac{\\partial G}{\\partial T}\\bigg|_{*} \\delta T + \\frac{\\partial G}{\\partial f}\\bigg|_{*} \\delta f + \\frac{\\partial G}{\\partial W}\\bigg|_{*} \\delta W\n$$\nThe partial derivatives evaluated at the equilibrium point $(T^{\\ast}, f^{\\ast}, W^{\\ast})$ are:\n$$\n\\frac{\\partial G}{\\partial T} = -\\frac{1}{C_{\\mathrm{th}} R_{\\mathrm{th}}}\n$$\n$$\n\\frac{\\partial G}{\\partial f} = \\frac{\\beta W}{C_{\\mathrm{th}}} \\implies \\frac{\\partial G}{\\partial f}\\bigg|_{*} = \\frac{\\beta W^{\\ast}}{C_{\\mathrm{th}}}\n$$\n$$\n\\frac{\\partial G}{\\partial W} = \\frac{\\beta f}{C_{\\mathrm{th}}} \\implies \\frac{\\partial G}{\\partial W}\\bigg|_{*} = \\frac{\\beta f^{\\ast}}{C_{\\mathrm{th}}}\n$$\nThus, the linearized continuous-time model is:\n$$\n\\frac{d(\\delta T)}{dt} = -\\frac{1}{C_{\\mathrm{th}} R_{\\mathrm{th}}} \\delta T + \\frac{\\beta W^{\\ast}}{C_{\\mathrm{th}}} \\delta f + \\frac{\\beta f^{\\ast}}{C_{\\mathrm{th}}} \\delta W\n$$\nTo obtain the discrete-time model, we apply the first-order forward-Euler method with a time step $h$. The controller's outputs are constant over the sampling interval $[t_k, t_{k+1})$, so we have $\\delta T_{k+1} \\approx \\delta T_k + h \\frac{d(\\delta T)}{dt}\\big|_{t=t_k}$.\n$$\n\\delta T_{k+1} = \\delta T_k + h \\left( -\\frac{1}{C_{\\mathrm{th}} R_{\\mathrm{th}}} \\delta T_k + \\frac{\\beta W^{\\ast}}{C_{\\mathrm{th}}} \\delta f_k + \\frac{\\beta f^{\\ast}}{C_{\\mathrm{th}}} \\delta W_k \\right)\n$$\nGrouping the terms by the perturbations, we find the requested discrete-time update equation:\n$$\n\\delta T_{k+1} = \\left( 1 - \\frac{h}{C_{\\mathrm{th}} R_{\\mathrm{th}}} \\right) \\delta T_k + \\left( \\frac{h \\beta W^{\\ast}}{C_{\\mathrm{th}}} \\right) \\delta f_k + \\left( \\frac{h \\beta f^{\\ast}}{C_{\\mathrm{th}}} \\right) \\delta W_k\n$$\nThe coefficients are therefore:\n- Coefficient of $\\delta T_k$: $\\left( 1 - \\frac{h}{C_{\\mathrm{th}} R_{\\mathrm{th}}} \\right)$\n- Coefficient of $\\delta f_k$: $\\frac{h \\beta W^{\\ast}}{C_{\\mathrm{th}}}$\n- Coefficient of $\\delta W_k$: $\\frac{h \\beta f^{\\ast}}{C_{\\mathrm{th}}}$\n\n**Task 2: Stability Analysis and Maximum Gain $K_f$**\n\nWe now form the closed-loop system by substituting the control laws for $\\delta f_k$ and $\\delta W_k$. The proportional frequency control law is $f_k = f^{\\ast} + K_f (T_{\\mathrm{ref}} - T_k)$. In terms of perturbations, and noting that the equilibrium temperature $T^{\\ast}$ is the setpoint $T_{\\mathrm{ref}}$, we have $\\delta T_k = T_k - T^{\\ast} = T_k - T_{\\mathrm{ref}}$.\nThus, $\\delta f_k = f_k - f^{\\ast} = K_f (T_{\\mathrm{ref}} - T_k) = -K_f \\delta T_k$.\n\nThe closed-loop system takes the form $\\delta T_{k+1} = \\lambda \\delta T_k$. For asymptotic convergence without sign alternation (non-oscillatory decay), the discrete-time eigenvalue $\\lambda$ must satisfy $0 \\le \\lambda  1$. The system is stable for $|\\lambda|  1$, and non-oscillatory for $\\lambda \\ge 0$. Since $\\lambda$ will be a decreasing function of $K_f$ and less than $1$ for any positive $K_f$, the critical constraint is $\\lambda \\ge 0$. This determines the maximum allowable gain, $K_{f,\\max}$.\n\n**Policy 1: Fixed-width policy**\nHere, $W_k = W^{\\ast}$, which implies $\\delta W_k = W_k - W^{\\ast} = 0$. Substituting $\\delta f_k$ and $\\delta W_k$ into the discrete-time equation:\n$$\n\\delta T_{k+1} = \\left( 1 - \\frac{h}{C_{\\mathrm{th}} R_{\\mathrm{th}}} \\right) \\delta T_k + \\left( \\frac{h \\beta W^{\\ast}}{C_{\\mathrm{th}}} \\right) (-K_f \\delta T_k) + 0\n$$\n$$\n\\delta T_{k+1} = \\left( 1 - \\frac{h}{C_{\\mathrm{th}} R_{\\mathrm{th}}} - \\frac{h \\beta W^{\\ast} K_f}{C_{\\mathrm{th}}} \\right) \\delta T_k\n$$\nThe eigenvalue is $\\lambda_{\\mathrm{fixed}} = 1 - \\frac{h}{C_{\\mathrm{th}} R_{\\mathrm{th}}} - \\frac{h \\beta W^{\\ast} K_f}{C_{\\mathrm{th}}}$.\nThe condition $\\lambda_{\\mathrm{fixed}} \\ge 0$ gives:\n$$\n1 - \\frac{h}{C_{\\mathrm{th}} R_{\\mathrm{th}}} - \\frac{h \\beta W^{\\ast} K_f}{C_{\\mathrm{th}}} \\ge 0 \\implies K_f \\le \\frac{C_{\\mathrm{th}}}{h \\beta W^{\\ast}}\\left(1 - \\frac{h}{C_{\\mathrm{th}} R_{\\mathrm{th}}}\\right)\n$$\nThus, the maximum gain is:\n$$\nK_{f,\\max}^{\\mathrm{fixed}} = \\frac{C_{\\mathrm{th}} - h/R_{\\mathrm{th}}}{h \\beta W^{\\ast}}\n$$\n\n**Policy 2: Adaptive-width policy**\nFor this policy, the change in issue width is approximated by a describing function for small oscillations around $T_{\\mathrm{ref}}$: $\\frac{dW}{dT} \\approx -\\frac{\\Delta W}{\\Delta T_h}$. In terms of discrete perturbations, this gives $\\delta W_k \\approx -\\frac{\\Delta W}{\\Delta T_h} \\delta T_k$.\nSubstituting both $\\delta f_k$ and $\\delta W_k$ into the general discrete-time model:\n$$\n\\delta T_{k+1} = \\left( 1 - \\frac{h}{C_{\\mathrm{th}} R_{\\mathrm{th}}} \\right) \\delta T_k + \\left( \\frac{h \\beta W^{\\ast}}{C_{\\mathrm{th}}} \\right) (-K_f \\delta T_k) + \\left( \\frac{h \\beta f^{\\ast}}{C_{\\mathrm{th}}} \\right) \\left( -\\frac{\\Delta W}{\\Delta T_h} \\delta T_k \\right)\n$$\nThe eigenvalue is $\\lambda_{\\mathrm{adapt}} = 1 - \\frac{h}{C_{\\mathrm{th}} R_{\\mathrm{th}}} - \\frac{h \\beta W^{\\ast} K_f}{C_{\\mathrm{th}}} - \\frac{h \\beta f^{\\ast} \\Delta W}{C_{\\mathrm{th}} \\Delta T_h}$.\nThe condition $\\lambda_{\\mathrm{adapt}} \\ge 0$ gives:\n$$\n1 - \\frac{h}{C_{\\mathrm{th}} R_{\\mathrm{th}}} - \\frac{h \\beta f^{\\ast} \\Delta W}{C_{\\mathrm{th}} \\Delta T_h} \\ge \\frac{h \\beta W^{\\ast} K_f}{C_{\\mathrm{th}}} \\implies K_f \\le \\frac{C_{\\mathrm{th}}}{h \\beta W^{\\ast}}\\left(1 - \\frac{h}{C_{\\mathrm{th}} R_{\\mathrm{th}}} - \\frac{h \\beta f^{\\ast} \\Delta W}{C_{\\mathrm{th}} \\Delta T_h}\\right)\n$$\nThus, the maximum gain is:\n$$\nK_{f,\\max}^{\\mathrm{adapt}} = \\frac{C_{\\mathrm{th}} - h/R_{\\mathrm{th}}}{h \\beta W^{\\ast}} - \\frac{f^{\\ast}\\Delta W}{W^{\\ast}\\Delta T_h}\n$$\nIt is noteworthy that this expression can be written as $K_{f,\\max}^{\\mathrm{adapt}} = K_{f,\\max}^{\\mathrm{fixed}} - \\frac{f^{\\ast}\\Delta W}{W^{\\ast}\\Delta T_h}$.\n\n**Task 3: Computation of the Ratio $\\mathcal{R}$**\n\nWe are asked to compute the ratio $\\mathcal{R} = \\frac{K_{f,\\max}^{\\mathrm{adapt}}}{K_{f,\\max}^{\\mathrm{fixed}}}$. Using the expressions derived above:\n$$\n\\mathcal{R} = \\frac{K_{f,\\max}^{\\mathrm{fixed}} - \\frac{f^{\\ast}\\Delta W}{W^{\\ast}\\Delta T_h}}{K_{f,\\max}^{\\mathrm{fixed}}} = 1 - \\frac{1}{K_{f,\\max}^{\\mathrm{fixed}}} \\frac{f^{\\ast}\\Delta W}{W^{\\ast}\\Delta T_h}\n$$\nSubstituting the expression for $K_{f,\\max}^{\\mathrm{fixed}}$:\n$$\n\\mathcal{R} = 1 - \\left( \\frac{h \\beta W^{\\ast}}{C_{\\mathrm{th}} - h/R_{\\mathrm{th}}} \\right) \\left( \\frac{f^{\\ast}\\Delta W}{W^{\\ast}\\Delta T_h} \\right)\n$$\nThe term $W^{\\ast}$, which represents the equilibrium issue width and could be ambiguous for the adaptive policy, conveniently cancels out.\n$$\n\\mathcal{R} = 1 - \\frac{h \\beta f^{\\ast} \\Delta W}{\\Delta T_h (C_{\\mathrm{th}} - h/R_{\\mathrm{th}})}\n$$\nTo simplify the denominator for calculation, we can write it as $\\Delta T_h \\frac{C_{\\mathrm{th}}R_{\\mathrm{th}} - h}{R_{\\mathrm{th}}}$. The expression for the ratio becomes:\n$$\n\\mathcal{R} = 1 - \\frac{h \\beta f^{\\ast} \\Delta W R_{\\mathrm{th}}}{\\Delta T_h (C_{\\mathrm{th}} R_{\\mathrm{th}} - h)}\n$$\nNow, we substitute the given numerical values:\n$C_{\\mathrm{th}} = 10\\,\\mathrm{J/K}$\n$R_{\\mathrm{th}} = 0.5\\,\\mathrm{K/W}$\n$h = 0.1\\,\\mathrm{s}$\n$\\beta = 5\\,\\mathrm{W}/(\\mathrm{GHz}\\cdot\\text{issue})$\n$f^{\\ast} = 3\\,\\mathrm{GHz}$\n$W_{\\mathrm{high}} = 4$, $W_{\\mathrm{low}} = 2 \\implies \\Delta W = W_{\\mathrm{high}} - W_{\\mathrm{low}} = 2$\n$\\Delta T_h = 4\\,\\mathrm{K}$\n\nFirst, we compute the product $C_{\\mathrm{th}} R_{\\mathrm{th}}$, which is the thermal time constant $\\tau_{\\mathrm{th}}$:\n$$\n\\tau_{\\mathrm{th}} = C_{\\mathrm{th}} R_{\\mathrm{th}} = (10\\,\\mathrm{J/K})(0.5\\,\\mathrm{K/W}) = 5\\,\\mathrm{J/W} = 5\\,\\mathrm{s}\n$$\nNow we compute the numerator of the fraction in the expression for $\\mathcal{R}$:\n$$\n\\text{Numerator} = h \\beta f^{\\ast} \\Delta W R_{\\mathrm{th}} = (0.1)(5)(3)(2)(0.5) = 1.5\n$$\nUnits of numerator: $\\mathrm{s} \\cdot \\frac{\\mathrm{W}}{\\mathrm{GHz} \\cdot \\mathrm{issue}} \\cdot \\mathrm{GHz} \\cdot \\mathrm{issue} \\cdot \\frac{\\mathrm{K}}{\\mathrm{W}} = \\mathrm{s} \\cdot \\mathrm{K}$.\n\nNext, we compute the denominator:\n$$\n\\text{Denominator} = \\Delta T_h (C_{\\mathrm{th}} R_{\\mathrm{th}} - h) = (4)(5 - 0.1) = 4 \\times 4.9 = 19.6\n$$\nUnits of denominator: $\\mathrm{K} \\cdot (\\mathrm{s}) = \\mathrm{K} \\cdot \\mathrm{s}$.\n\nThe fraction is dimensionless, as expected.\n$$\n\\frac{1.5}{19.6} = \\frac{15}{196} \\approx 0.076530612...\n$$\nFinally, we calculate $\\mathcal{R}$:\n$$\n\\mathcal{R} = 1 - \\frac{1.5}{19.6} = 1 - 0.076530612... = 0.923469387...\n$$\nRounding to four significant figures gives $\\mathcal{R} = 0.9235$. This indicates that the adaptive-width policy reduces the maximum non-oscillatory gain for the frequency controller by approximately $7.65\\%$.",
            "answer": "$$\\boxed{0.9235}$$"
        }
    ]
}