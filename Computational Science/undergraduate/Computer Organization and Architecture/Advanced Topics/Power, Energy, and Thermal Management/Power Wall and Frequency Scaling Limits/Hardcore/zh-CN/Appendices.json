{
    "hands_on_practices": [
        {
            "introduction": "为了追求更高的时钟频率，微架构师曾普遍采用深化流水线等技术。然而，这种设计并非没有代价。本练习将通过一个具体案例，让你亲手计算一项旨在提高频率的流水线重设计如何影响处理器的总功耗。通过这个计算 ，你将直观地理解为何单纯追求频率提升会撞上“功耗墙”（Power Wall），并掌握动态功耗与指令能耗的核心计算方法。",
            "id": "3667321",
            "problem": "针对一款采用互补金属氧化物半导体 (CMOS) 技术实现的处理器，提出了一项微架构重新设计。基准设计的工作频率为 $f_{0}$，电源电压为 $V$，其每周期的有效开关电容为 $C_{\\text{eff},0}$，该值定义为平均活动因子与每个周期切换的总电容的乘积。基准动态功耗是每周期开关能耗与单位时间内的周期数的乘积，而总功耗是动态功耗和漏电功耗之和。提出的流水线深化方案将每个流水线阶段的逻辑减半，从而可以在不改变电压 $V$ 的情况下将工作频率提高一倍。然而，由于增加了额外的流水线寄存器和控制逻辑，每周期的有效开关电容增加了 $20\\%$。\n\n给定条件如下：\n- 基准频率 $f_{0} = 3.0\\ \\text{GHz}$，\n- 电源电压 $V = 1.0\\ \\text{V}$，\n- 基准每周期有效开关电容 $C_{\\text{eff},0} = 12 \\times 10^{-9}\\ \\text{F}$，\n- 基准漏电功耗 $P_{\\text{leak}} = 18\\ \\text{W}$，\n- 最大允许封装功率 (热设计功耗 (TDP)) $P_{\\max} = 95\\ \\text{W}$，\n- 两种设计中，流水线平均每个周期引退一条指令。\n\n假设在重新设计中电源电压不变，漏电功耗保持相同，新的每周期有效开关电容为 $C_{\\text{eff},1} = 1.2\\,C_{\\text{eff},0}$，而新的频率为 $f_{1} = 2\\,f_{0}$。使用动态能耗、动态功耗和吞吐量之间经过充分检验的关系，判断重新设计的处理器的总功耗是否超过 $P_{\\max}$，并计算重新设计的处理器的每指令能耗。\n\n将最终的每指令能耗以纳焦耳为单位表示，并将您的答案舍入到三位有效数字。",
            "solution": "该问题为基准处理器和一项重新设计方案提供了一组参数，并要求我们评估重新设计的处理器的总功耗和每指令能耗。\n\n首先，我们必须验证问题陈述的有效性。\n\n**步骤1：提取给定条件**\n- 基准频率：$f_{0} = 3.0\\ \\text{GHz} = 3.0 \\times 10^9\\ \\text{Hz}$\n- 电源电压：$V = 1.0\\ \\text{V}$\n- 基准每周期有效开关电容：$C_{\\text{eff},0} = 12 \\times 10^{-9}\\ \\text{F}$\n- 基准漏电功耗：$P_{\\text{leak}} = 18\\ \\text{W}$\n- 最大允许封装功率 (TDP)：$P_{\\max} = 95\\ \\text{W}$\n- 两种设计的平均每周期指令数 (IPC)：$\\text{IPC} = 1$\n- 电源电压恒定：$V_{1} = V_{0} = V = 1.0\\ \\text{V}$\n- 漏电功耗恒定：$P_{\\text{leak},1} = P_{\\text{leak},0} = P_{\\text{leak}} = 18\\ \\text{W}$\n- 重新设计后的有效开关电容：$C_{\\text{eff},1} = 1.2\\,C_{\\text{eff},0}$\n- 重新设计后的频率：$f_{1} = 2\\,f_{0}$\n\n**步骤2：使用提取的给定条件进行验证**\n该问题具有科学依据，利用了CMOS数字电路的标准功耗模型，其中总功耗是动态功耗和漏电功耗之和，而动态功耗与电容、电压的平方以及频率成正比。所描述的场景——通过流水线深化来提高频率，但代价是增加逻辑开销（电容）——是处理器设计中的一个经典权衡。所提供的电压、频率和功耗值都在现代微处理器的实际范围内。问题提法明确，提供了计算所需量的所有必要信息。语言客观且无歧义。因此，该问题被认为是有效的。\n\n我们继续进行求解。\n\nCMOS处理器的总功耗 $P_{\\text{total}}$ 是其动态功耗 $P_{\\text{dyn}}$ 和静态（漏电）功耗 $P_{\\text{leak}}$ 的总和。\n$$P_{\\text{total}} = P_{\\text{dyn}} + P_{\\text{leak}}$$\n动态功耗是每次开关事件消耗的能量乘以每秒的开关事件次数。它由以下公式给出：\n$$P_{\\text{dyn}} = C_{\\text{eff}} V^2 f$$\n其中 $C_{\\text{eff}}$ 是每周期的有效开关电容，$V$ 是电源电压，$f$ 是工作频率。\n\n我们首先计算基准设计的动态功耗 $P_{\\text{dyn},0}$。\n$$P_{\\text{dyn},0} = C_{\\text{eff},0} V^2 f_{0}$$\n代入给定值：\n$$C_{\\text{eff},0} = 12 \\times 10^{-9}\\ \\text{F}$$\n$$V = 1.0\\ \\text{V}$$\n$$f_{0} = 3.0 \\times 10^9\\ \\text{Hz}$$\n$$P_{\\text{dyn},0} = (12 \\times 10^{-9}\\ \\text{F}) \\times (1.0\\ \\text{V})^2 \\times (3.0 \\times 10^9\\ \\text{s}^{-1}) = 36\\ \\text{W}$$\n基准设计的总功耗 $P_{\\text{total},0}$ 为：\n$$P_{\\text{total},0} = P_{\\text{dyn},0} + P_{\\text{leak}} = 36\\ \\text{W} + 18\\ \\text{W} = 54\\ \\text{W}$$\n这低于最大允许功耗 $P_{\\max} = 95\\ \\text{W}$，符合预期。\n\n现在，我们分析重新设计的处理器。新参数如下：\n$$f_{1} = 2\\,f_{0} = 2 \\times (3.0 \\times 10^9\\ \\text{Hz}) = 6.0 \\times 10^9\\ \\text{Hz}$$\n$$C_{\\text{eff},1} = 1.2\\,C_{\\text{eff},0} = 1.2 \\times (12 \\times 10^{-9}\\ \\text{F}) = 14.4 \\times 10^{-9}\\ \\text{F}$$\n电压 $V$ 和漏电功耗 $P_{\\text{leak}}$ 保持不变。\n\n重新设计的处理器的动态功耗 $P_{\\text{dyn},1}$ 为：\n$$P_{\\text{dyn},1} = C_{\\text{eff},1} V^2 f_{1}$$\n代入新参数：\n$$P_{\\text{dyn},1} = (14.4 \\times 10^{-9}\\ \\text{F}) \\times (1.0\\ \\text{V})^2 \\times (6.0 \\times 10^9\\ \\text{s}^{-1}) = 86.4\\ \\text{W}$$\n或者，我们可以用 $P_{\\text{dyn},0}$ 来表示 $P_{\\text{dyn},1}$：\n$$P_{\\text{dyn},1} = (1.2\\,C_{\\text{eff},0}) V^2 (2\\,f_{0}) = 2.4 \\times (C_{\\text{eff},0} V^2 f_{0}) = 2.4 \\times P_{\\text{dyn},0}$$\n$$P_{\\text{dyn},1} = 2.4 \\times 36\\ \\text{W} = 86.4\\ \\text{W}$$\n\n重新设计的处理器的总功耗 $P_{\\text{total},1}$ 为：\n$$P_{\\text{total},1} = P_{\\text{dyn},1} + P_{\\text{leak}}$$\n$$P_{\\text{total},1} = 86.4\\ \\text{W} + 18\\ \\text{W} = 104.4\\ \\text{W}$$\n\n问题的第一个部分是判断重新设计的处理器的总功耗是否超过 $P_{\\max}$。\n我们将 $P_{\\text{total},1}$ 与 $P_{\\max}$进行比較：\n$$104.4\\ \\text{W} > 95\\ \\text{W}$$\n因此，重新设计的处理器的总功耗超过了最大允许封装功率。\n\n问题的第二个部分是计算重新设计的处理器的每指令能耗 $E_{\\text{inst}}$。每秒指令数 (IPS) 是频率和每周期指令数 (IPC) 的乘积。\n$$\\text{IPS} = f \\times \\text{IPC}$$\n每指令能耗是总功耗除以每秒指令数。\n$$E_{\\text{inst}} = \\frac{P_{\\text{total}}}{\\text{IPS}} = \\frac{P_{\\text{total}}}{f \\times \\text{IPC}}$$\n对于重新设计的处理器：\n$$\\text{IPS}_{1} = f_{1} \\times \\text{IPC} = (6.0 \\times 10^9\\ \\text{s}^{-1}) \\times (1\\ \\text{instruction/cycle}) = 6.0 \\times 10^9\\ \\text{instructions/s}$$\n$$E_{\\text{inst},1} = \\frac{P_{\\text{total},1}}{\\text{IPS}_{1}} = \\frac{104.4\\ \\text{W}}{6.0 \\times 10^9\\ \\text{instructions/s}} = \\frac{104.4\\ \\text{J/s}}{6.0 \\times 10^9\\ \\text{instructions/s}}$$\n$$E_{\\text{inst},1} = 17.4 \\times 10^{-9}\\ \\text{J/instruction}$$\n问题要求答案以纳焦耳 ($1\\ \\text{nJ} = 10^{-9}\\ \\text{J}$) 为单位。\n$$E_{\\text{inst},1} = 17.4\\ \\text{nJ/instruction}$$\n值 $17.4$ 已经有三位有效数字，因此不需要进一步舍入。",
            "answer": "$$\\boxed{17.4}$$"
        },
        {
            "introduction": "动态电压与频率调节（DVFS）是现代处理器应对功耗墙的关键技术。通常认为，降低频率和电压能有效节能，但事实总是如此吗？本练习将引导你分析一个I/O密集型工作负载的场景 ，通过计算你会发现一个重要的反直觉结论：在特定条件下，由于执行时间延长导致漏电能耗增加，降频反而可能导致总能耗上升。这项实践有助于你深入理解动态能耗与静态漏电能耗之间的复杂权衡。",
            "id": "3667256",
            "problem": "一个单线程服务器处理请求，每个请求在中央处理器 (CPU) 上执行一个简短的计算阶段，然后执行一个外部输入/输出 (I/O) 操作，该操作具有固定的墙上时钟延迟，且不依赖于 CPU 频率。该系统支持动态电压和频率缩放 (DVFS)。每个请求中，CPU 执行 $N=2\\times 10^{6}$ 个周期的有效工作，然后等待一个延迟为 $t_{\\text{IO}}=0.050\\,\\text{s}$ 的 I/O 设备（该延迟独立于 CPU 频率）。在 I/O 等待期间，核心被时钟门控，因此核心中的动态开关活动可以忽略不计，而泄漏功耗在整个请求时间内持续存在。有两个 DVFS 工作点可用：一个基准点，频率为 $f_{0}=2\\,\\text{GHz}$，电源电压为 $V_{0}=1.0\\,\\text{V}$；以及一个降频点，频率为 $f_{1}=1\\,\\text{GHz}$，电源电压为 $V_{1}=0.8\\,\\text{V}$。在这些工作点上，有效的每周期动态开关能耗系数为 $C=1.0\\times 10^{-10}\\,\\text{J}/\\text{V}^{2}/\\text{cycle}$，泄漏功率为 $P_{\\text{leak}}=5\\,\\text{W}$。\n\n在这些假设下，选择关于从 $(f_{0},V_{0})$ 切换到 $(f_{1},V_{1})$ 时，每个请求的能耗和性能影响的最佳描述。\n\nA. 对于输入/输出密集型工作负载，降低频率 $f$ 并相应降低电压 $V$ 总是会减少每个请求的能耗；由于停顿时间占主导地位，性能损失可以忽略不计。\n\nB. 在给定参数下，每个请求的总能耗大约增加 $5.0\\times 10^{-3}\\,\\text{J}$，而减速约为 $1.96\\%$；泄漏功耗占主导地位使得在较低频率 $f$ 下的净能耗更高。\n\nC. 降低频率 $f$ 会导致显著的性能损失，因为输入/输出停顿时间会随着频率 $f$ 的降低而成比例增加。\n\nD. 在给定参数下，每个请求的能耗大约减少 $7.2\\times 10^{-5}\\,\\text{J}$，且性能损失可以忽略不计；停顿占主导的特性确保了净能耗节省。",
            "solution": "问题陈述是计算机体系结构中一个定义明确的练习，涉及动态电压和频率缩放 (DVFS) 的性能和能耗权衡。对于一个简化的处理器功耗模型，所有提供的数据在物理上都是合理的，在数学上也是一致的。该问题有科学依据、客观，并包含了推导出唯一解所需的所有必要信息。因此，该问题是有效的。\n\n分析过程是通过计算两个工作点下每个请求的总时间和总能耗来进行的。\n\n处理一个请求的总时间 $t_{\\text{total}}$ 是 CPU 计算时间 $t_{\\text{CPU}}$ 和固定的 I/O 延迟 $t_{\\text{IO}}$ 的总和：\n$$t_{\\text{total}} = t_{\\text{CPU}} + t_{\\text{IO}}$$\nCPU 时间是周期数 $N$ 除以 CPU 频率 $f$：\n$$t_{\\text{CPU}} = \\frac{N}{f}$$\n\n每个请求的总能耗 $E_{\\text{total}}$ 是在计算阶段消耗的动态能耗 $E_{\\text{dyn}}$ 和在整个请求期间消耗的泄漏能耗 $E_{\\text{leak}}$ 的总和。\n$$E_{\\text{total}} = E_{\\text{dyn}} + E_{\\text{leak}}$$\n动态能耗由周期数乘以每周期能耗得出。问题提供了一个有效的每周期动态开关能耗系数 $C$，它取决于电源电压 $V$ 的平方。因此，对于 $N$ 个周期：\n$$E_{\\text{dyn}} = N \\cdot C \\cdot V^2$$\n注意，这个公式意味着对于固定量的工作（$N$ 个周期），总动态能耗与频率 $f$ 无关。\n\n泄漏能耗是泄漏功率 $P_{\\text{leak}}$ 乘以请求的总时间，因为题目说明泄漏功耗在整个过程中持续存在：\n$$E_{\\text{leak}} = P_{\\text{leak}} \\cdot t_{\\text{total}} = P_{\\text{leak}} \\cdot \\left(\\frac{N}{f} + t_{\\text{IO}}\\right)$$\n结合这些，每个请求的总能耗为：\n$$E_{\\text{total}}(f,V) = NCV^2 + P_{\\text{leak}}\\left(\\frac{N}{f} + t_{\\text{IO}}\\right)$$\n\n给定参数如下：\n- $N = 2 \\times 10^{6}$ 周期\n- $t_{\\text{IO}} = 0.050\\,\\text{s}$\n- $C = 1.0 \\times 10^{-10}\\,\\text{J}/\\text{V}^{2}/\\text{cycle}$\n- $P_{\\text{leak}} = 5\\,\\text{W}$\n\n**情况 0：基准工作点 $(f_0, V_0)$**\n- $f_0 = 2\\,\\text{GHz} = 2 \\times 10^9\\,\\text{s}^{-1}$\n- $V_0 = 1.0\\,\\text{V}$\n\n首先，计算时间分量：\n$$t_{\\text{CPU},0} = \\frac{N}{f_0} = \\frac{2 \\times 10^6}{2 \\times 10^9\\,\\text{s}^{-1}} = 1 \\times 10^{-3}\\,\\text{s} = 0.001\\,\\text{s}$$\n$$t_{\\text{total},0} = t_{\\text{CPU},0} + t_{\\text{IO}} = 0.001\\,\\text{s} + 0.050\\,\\text{s} = 0.051\\,\\text{s}$$\n\n接下来，计算能耗分量：\n$$E_{\\text{dyn},0} = N C V_0^2 = (2 \\times 10^6) \\cdot (1.0 \\times 10^{-10}) \\cdot (1.0)^2\\,\\text{J} = 2.0 \\times 10^{-4}\\,\\text{J}$$\n$$E_{\\text{leak},0} = P_{\\text{leak}} \\cdot t_{\\text{total},0} = 5\\,\\text{W} \\cdot 0.051\\,\\text{s} = 0.255\\,\\text{J}$$\n$$E_{\\text{total},0} = E_{\\text{dyn},0} + E_{\\text{leak},0} = 2.0 \\times 10^{-4}\\,\\text{J} + 0.255\\,\\text{J} = 0.2552\\,\\text{J}$$\n\n**情况 1：降频工作点 $(f_1, V_1)$**\n- $f_1 = 1\\,\\text{GHz} = 1 \\times 10^9\\,\\text{s}^{-1}$\n- $V_1 = 0.8\\,\\text{V}$\n\n首先，计算时间分量：\n$$t_{\\text{CPU},1} = \\frac{N}{f_1} = \\frac{2 \\times 10^6}{1 \\times 10^9\\,\\text{s}^{-1}} = 2 \\times 10^{-3}\\,\\text{s} = 0.002\\,\\text{s}$$\n$$t_{\\text{total},1} = t_{\\text{CPU},1} + t_{\\text{IO}} = 0.002\\,\\text{s} + 0.050\\,\\text{s} = 0.052\\,\\text{s}$$\n\n接下来，计算能耗分量：\n$$E_{\\text{dyn},1} = N C V_1^2 = (2 \\times 10^6) \\cdot (1.0 \\times 10^{-10}) \\cdot (0.8)^2\\,\\text{J} = (2.0 \\times 10^{-4}) \\cdot 0.64\\,\\text{J} = 1.28 \\times 10^{-4}\\,\\text{J}$$\n$$E_{\\text{leak},1} = P_{\\text{leak}} \\cdot t_{\\text{total},1} = 5\\,\\text{W} \\cdot 0.052\\,\\text{s} = 0.260\\,\\text{J}$$\n$$E_{\\text{total},1} = E_{\\text{dyn},1} + E_{\\text{leak},1} = 1.28 \\times 10^{-4}\\,\\text{J} + 0.260\\,\\text{J} = 0.260128\\,\\text{J}$$\n\n**影响分析：从工作点 0 切换到工作点 1**\n\n**性能影响：** 性能与总请求时间成反比。性能变化通过减速来表征，即总时间的百分比增加。\n$$\\text{Slowdown} = \\frac{t_{\\text{total},1} - t_{\\text{total},0}}{t_{\\text{total},0}} = \\frac{0.052\\,\\text{s} - 0.051\\,\\text{s}}{0.051\\,\\text{s}} = \\frac{0.001}{0.051} \\approx 0.0196078$$\n减速约为 $1.96\\%$。\n\n**能耗影响：** 每个请求总能耗的变化为：\n$$\\Delta E_{\\text{total}} = E_{\\text{total},1} - E_{\\text{total},0} = 0.260128\\,\\text{J} - 0.2552\\,\\text{J} = 0.004928\\,\\text{J}$$\n这是一个大约 $4.93 \\times 10^{-3}\\,\\text{J}$ 的能耗*增加*。增加的原因是泄漏能耗的变化（$\\Delta E_{\\text{leak}} = 0.260\\,\\text{J} - 0.255\\,\\text{J} = +0.005\\,\\text{J}$）超过了动态能耗的节省量（$\\Delta E_{\\text{dyn}} = 1.28 \\times 10^{-4}\\,\\text{J} - 2.0 \\times 10^{-4}\\,\\text{J} = -0.72 \\times 10^{-4}\\,\\text{J}$）。\n\n**选项评估：**\n\n**A. 对于输入/输出密集型工作负载，降低频率 $f$ 并相应降低电压 $V$ 总是会减少每个请求的能耗；由于停顿时间占主导地位，性能损失可以忽略不计。**\n这个选项做出了一个普遍性论断（“总是减少能耗”）。我们的计算表明，对于给定参数，能耗*增加*了。能耗减少的条件是 $\\Delta E_{\\text{total}}  0$，这要求动态能耗的减少量大于泄漏能耗的增加量。这并非总是成立，特别是当泄漏功率很高且工作负载是 I/O 密集型时（导致总时间很长）。因此，该陈述是错误的。\n**结论：不正确**\n\n**B. 在给定参数下，每个请求的总能耗大约增加 $5.0\\times 10^{-3}\\,\\text{J}$，而减速约为 $1.96\\%$；泄漏功耗占主导地位使得在较低频率 $f$ 下的净能耗更高。**\n我们计算出的能耗增加量是 $\\Delta E_{\\text{total}} = 0.004928\\,\\text{J}$，约等于 $5.0 \\times 10^{-3}\\,\\text{J}$。我们计算出的减速是 $1.96\\%$。解释“泄漏功耗占主导地位使得净能耗更高”正确地指出了增加的泄漏能耗（由于更长的执行时间）超过了动态能耗的节省量。这个选项准确地描述了计算结果及其根本原因。\n**结论：正确**\n\n**C. 降低频率 $f$ 会导致显著的性能损失，因为输入/输出停顿时间会随着频率 $f$ 的降低而成比例增加。**\n根据问题陈述，这个选项的前提在事实上是错误的，问题明确指出 I/O 延迟 $t_{\\text{IO}}$ “独立于 CPU 频率”。此外，计算出的 $1.96\\%$ 的性能损失是轻微的，而不是“显著的”，这恰恰是因为恒定的 I/O 停顿时间在总请求时间中占主导地位。\n**结论：不正确**\n\n**D. 在给定参数下，每个请求的能耗大约减少 $7.2\\times 10^{-5}\\,\\text{J}$，且性能损失可以忽略不计；停顿占主导的特性确保了净能耗节省。**\n这个选项错误地声称能耗减少。数值 $7.2 \\times 10^{-5}\\,\\text{J}$ 对应于动态能耗节省的量值（$\\Delta E_{\\text{dyn}} = -0.72 \\times 10^{-4}\\,\\text{J} = -7.2 \\times 10^{-5}\\,\\text{J}$）。它完全忽略了更大的泄漏能耗增量。虽然性能损失确实可以忽略不计，但对于这些参数，“净能耗节省”的结论是错误的。\n**结论：不正确**",
            "answer": "$$\\boxed{B}$$"
        },
        {
            "introduction": "“功耗墙”的出现，迫使处理器设计思路发生了根本性转变：从追求更“快”的单核，转向容纳更“多”的核。本练习是一个经典的思维实验 ，它将引导你在固定的功耗预算下，权衡单个高速核心与多个低速核心的性能表现。通过运用阿姆达尔定律，你将亲自推导出这两种设计策略的性能“临界点”，从而深刻理解为何多核并行成为绕过功耗墙、继续提升系统吞吐率的主流架构选择，以及这一转变对软件并行度的根本要求。",
            "id": "3667309",
            "problem": "由于所谓的“功耗墙”（power wall）限制了电源电压的进一步降低，芯片受制于最大功率预算 $P_{\\max}$。假设电源电压固定为 $V_{0}$，并且动态功耗遵循广泛使用的开关模型 $P_{\\text{dyn}} = \\alpha C V_{0}^{2} f$，因此在固定的 $V_{0}$ 下，动态功耗与时钟频率 $f$ 成正比。对于本分析，漏电和其他非伸缩（non-scaling）组件可忽略不计，并且所有核心在微架构、指令集和流水线方面都是相同的。指令数和每指令周期数与频率无关，因此性能与时钟频率以及活动核心数量成正比。\n\n考虑在相同 $P_{\\max}$ 下构建的两种配置：\n- 配置 $\\mathcal{A}$：一个单核心，以频率 $f$ 运行，正好消耗预算 $P_{\\max}$。\n- 配置 $\\mathcal{B}$：两个核心，每个核心以频率 $f/2$ 运行，每个核心的功耗与其频率成比例降低，因此总功耗等于 $P_{\\max}$。\n\n一个程序具有并行分数 $p \\in [0,1]$，这意味着其执行的 $p$ 部分（在频率为 $f$ 的单个核心上测量）可以在最多 2 个核心上理想地并行化，没有任何开销或瓶颈，而剩余的 $(1-p)$ 部分是严格串行的。假设并行部分的负载是理想均衡的。将吞吐量定义为程序单次运行执行时间的倒数。\n\n根据基本原理和上述假设，推导出配置 $\\mathcal{B}$ 的吞吐量等于配置 $\\mathcal{A}$ 的吞吐量时的并行分数 $p_{\\star}$ 的精确值。请将最终答案表示为区间 $[0,1]$ 内的一个实数。不要使用百分号。无需四舍五入；给出精确值。",
            "solution": "该问题被评估为有效。它在科学上基于计算机体系结构的原理，特别是关于功耗、频率和并行性。该问题提法明确，提供了所有必要信息且没有矛盾。\n\n目标是在固定的功率预算下，找出并行分数 $p_{\\star}$，使得双核配置（$\\mathcal{B}$）的吞吐量等于单核配置（$\\mathcal{A}$）的吞吐量。吞吐量相等意味着执行时间相等。设 $T_{\\mathcal{A}}$ 和 $T_{\\mathcal{B}}$ 分别为配置 $\\mathcal{A}$ 和 $\\mathcal{B}$ 的总执行时间。条件是 $T_{\\mathcal{A}} = T_{\\mathcal{B}}$。\n\n我们首先建立功耗、频率和性能之间的关系。\n问题陈述动态功耗为 $P_{\\text{dyn}} = \\alpha C V_{0}^{2} f$。由于电源电压 $V_0$ 和其他因素 $\\alpha, C$ 是常数，功耗与频率成正比：$P \\propto f$。设此比例关系为 $P = k f$，其中 $k$ 为某个常数。\n\n对于配置 $\\mathcal{A}$，我们有一个单核心以频率 $f$ 运行，消耗最大功率 $P_{\\max}$。因此，$P_{\\max} = k f$。\n\n对于配置 $\\mathcal{B}$，我们有两个核心，每个核心以频率 $f/2$ 运行。这样一个核心的功耗是 $P_{\\text{core}} = k (f/2)$。两个核心的总功耗是 $P_{\\text{total}} = 2 \\times P_{\\text{core}} = 2 \\times k(f/2) = k f = P_{\\max}$。功耗约束得到满足。\n\n接下来，我们建立执行时间的基准。问题根据在频率为 $f$ 的单个核心上的执行来定义并行分数 $p$。这正是配置 $\\mathcal{A}$。设 $T_{\\mathcal{A}}$ 为程序在此配置上的总执行时间。我们可以使用 $T_{\\mathcal{A}}$ 作为我们的参考时间。\n根据 $p$ 的定义，总执行时间 $T_{\\mathcal{A}}$ 由两部分组成：\n1.  串行部分，耗时 $(1-p) T_{\\mathcal{A}}$。\n2.  可并行化部分，耗时 $p T_{\\mathcal{A}}$。\n\n问题陈述性能与时钟频率以及活动核心数量成正比。对于给定量的工作，执行时间与性能成反比。因此，对于一段工作，$T \\propto \\frac{1}{f \\cdot N}$，其中 $N$ 是活动核心的数量。\n\n现在，我们计算配置 $\\mathcal{B}$ 的执行时间 $T_{\\mathcal{B}}$。此配置有两个核心，每个核心以频率 $f/2$ 运行。我们必须分别分析串行和并行部分。\n\n1.  **程序的串行部分**：这部分工作是“严格串行”的，意味着它只能在单个核心（$N=1$）上运行。在配置 $\\mathcal{A}$ 中，这项工作在一个频率为 $f$ 的单核心上耗时 $(1-p)T_{\\mathcal{A}}$。在配置 $\\mathcal{B}$ 中，这项工作必须在一个频率为 $f/2$ 的单核心上运行。由于执行时间与频率成反比，配置 $\\mathcal{B}$ 中串行部分的时间为：\n    $$T_{\\text{serial}, \\mathcal{B}} = ((1-p)T_{\\mathcal{A}}) \\times \\frac{f}{f/2} = 2(1-p)T_{\\mathcal{A}}$$\n\n2.  **程序的并行部分**：这部分工作是“理想并行化”的，可在最多 2 个核心上进行。在配置 $\\mathcal{A}$ 中，这项工作在一个频率为 $f$ 的单核心上耗时 $p T_{\\mathcal{A}}$。在配置 $\\mathcal{B}$ 中，这项工作被分配到两个核心（$N=2$）上，每个核心以频率 $f/2$ 运行。此并行任务的总性能与核心数及其频率的乘积成正比。\n    配置 $\\mathcal{B}$ 中并行部分的时间为：\n    $$T_{\\text{parallel}, \\mathcal{B}} = (pT_{\\mathcal{A}}) \\times \\frac{f \\cdot 1}{(f/2) \\cdot 2} = (pT_{\\mathcal{A}}) \\times \\frac{f}{f} = p T_{\\mathcal{A}}$$\n    这表明，两种配置在并行部分的性能是相同的，因为核心数量的增加正好被频率的减半所抵消。\n\n配置 $\\mathcal{B}$ 的总执行时间是其串行和并行阶段的时间之和：\n$$T_{\\mathcal{B}} = T_{\\text{serial}, \\mathcal{B}} + T_{\\text{parallel}, \\mathcal{B}} = 2(1-p)T_{\\mathcal{A}} + p T_{\\mathcal{A}}$$\n\n我们正在寻找使吞吐量相等的值 $p_{\\star}$，这意味着执行时间相等：$T_{\\mathcal{A}} = T_{\\mathcal{B}}$。\n$$T_{\\mathcal{A}} = 2(1-p_{\\star})T_{\\mathcal{A}} + p_{\\star}T_{\\mathcal{A}}$$\n由于 $T_{\\mathcal{A}}$ 是一个非零的执行时间，我们可以将两边都除以 $T_{\\mathcal{A}}$：\n$$1 = 2(1-p_{\\star}) + p_{\\star}$$\n现在，我们求解 $p_{\\star}$：\n$$1 = 2 - 2p_{\\star} + p_{\\star}$$\n$$1 = 2 - p_{\\star}$$\n$$p_{\\star} = 2 - 1$$\n$$p_{\\star} = 1$$\n\n当配置 $\\mathcal{B}$ 的吞吐量等于配置 $\\mathcal{A}$ 的吞吐量时，并行分数为 $1$。这表示只有一个完全并行的程序（$p=1$）才能在双核、半频机器上达到与单核、全频机器相同的性能。对于任何带有串行组件的程序（$p  1$），配置 $\\mathcal{B}$ 将会更慢，因为串行部分的性能损失没有被并行部分的任何性能增益所补偿。",
            "answer": "$$\\boxed{1}$$"
        }
    ]
}