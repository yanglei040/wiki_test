{
    "hands_on_practices": [
        {
            "introduction": "选择合适的 RAID 级别首先需要深刻理解其容错能力。本练习将超越“RAID 5 容忍一次故障”这类简单的规则，引导你通过一个具体的双磁盘故障场景，对不同 RAID 级别的恢复能力进行严格的组合分析。通过计算不可恢复的故障组合数量，你将对 RAID 1、5、6 和 10 的数据安全性建立起直观而精确的认识。",
            "id": "3675057",
            "problem": "一个管理员必须在四种独立磁盘冗余阵列（RAID）配置中为不同的服务进行选择。假设磁盘故障是独立的，并且控制器是理想的，实现了每个级别的标准奇偶校验和镜像语义，没有潜在的扇区错误，并且在重建过程中没有进一步的故障。对于下面的每种配置，假设恰好有 $f=2$ 个物理磁盘同时发生故障。将一个配置的故障矩阵定义为每个无序的故障磁盘对到两种结果之一的映射：可恢复（所有逻辑数据块都可以被重建）或不可恢复（一些逻辑数据块无法被重建）。仅使用关于镜像和奇偶校验的基本原理，为每种配置确定不可恢复的双磁盘故障对的数量 $N_{\\mathrm{I}}$，以及在可恢复的情况下重建是否可行。\n\n- 配置 $\\mathcal{R}_1$：在2个磁盘上的RAID $1$（纯镜像）。\n- 配置 $\\mathcal{R}_5$：在7个磁盘上的RAID $5$，每个条带具有分布式单奇偶校验。\n- 配置 $\\mathcal{R}_6$：在8个磁盘上的RAID $6$，每个条带具有双独立奇偶校验。\n- 配置 $\\mathcal{R}_{10}$：在8个磁盘上的RAID $10$，排列为4个镜像对，并在这些对之间进行条带化。\n\n哪个选项正确地描述了计数 $N_{\\mathrm{I}}(\\mathcal{R}_1)$、 $N_{\\mathrm{I}}(\\mathcal{R}_5)$、 $N_{\\mathrm{I}}(\\mathcal{R}_6)$、 $N_{\\mathrm{I}}(\\mathcal{R}_{10})$ 和重建可行性的陈述？\n\nA. $N_{\\mathrm{I}}(\\mathcal{R}_1)=1$, $N_{\\mathrm{I}}(\\mathcal{R}_5)=21$, $N_{\\mathrm{I}}(\\mathcal{R}_6)=0$, $N_{\\mathrm{I}}(\\mathcal{R}_{10})=4$。在所有可恢复的情况下，通过从幸存的镜像复制或求解奇偶校验方程，重建都是可行的，且不会丢失数据。\n\nB. $N_{\\mathrm{I}}(\\mathcal{R}_1)=0$, $N_{\\mathrm{I}}(\\mathcal{R}_5)=15$, $N_{\\mathrm{I}}(\\mathcal{R}_6)=6$, $N_{\\mathrm{I}}(\\mathcal{R}_{10})=28$。即使奇偶校验可用，在RAID $6$中重建也是不可行的。\n\nC. $N_{\\mathrm{I}}(\\mathcal{R}_1)=1$, $N_{\\mathrm{I}}(\\mathcal{R}_5)=0$, $N_{\\mathrm{I}}(\\mathcal{R}_6)=0$, $N_{\\mathrm{I}}(\\mathcal{R}_{10})=4$。RAID $5$可以使用分布式奇偶校验恢复两次同时发生的故障。\n\nD. $N_{\\mathrm{I}}(\\mathcal{R}_1)=1$, $N_{\\mathrm{I}}(\\mathcal{R}_5)=21$, $N_{\\mathrm{I}}(\\mathcal{R}_6)=0$, $N_{\\mathrm{I}}(\\mathcal{R}_{10})=12$。只要两个故障磁盘位于同一个条带集中，即使它们来自不同的镜像对，RAID $10$也会遭受不可恢复的损失。",
            "solution": "在尝试任何解决方案之前，对用户提供的问题进行了严格验证。\n\n### 步骤1：提取给定条件\n- **任务**：对于四种指定的RAID配置，确定不可恢复的双磁盘故障对的数量，表示为 $N_{\\mathrm{I}}$。\n- **假设**：\n    - 恰好有 $f=2$ 个物理磁盘同时发生故障。\n    - 磁盘故障是独立的。\n    - 控制器是理想的，并实现了标准的RAID语义。\n    - 没有潜在的扇区错误。\n    - 重建期间没有进一步的故障。\n- **定义**：\n    - **可恢复**：所有逻辑数据块都可以被重建。\n    - **不可恢复**：一些逻辑数据块无法被重建。\n- **配置**：\n    - $\\mathcal{R}_1$：在2个磁盘上的RAID $1$（纯镜像）。\n    - $\\mathcal{R}_5$：在7个磁盘上的RAID $5$（分布式单奇偶校验）。\n    - $\\mathcal{R}_6$：在8个磁盘上的RAID $6$（双独立奇偶校验）。\n    - $\\mathcal{R}_{10}$：在8个磁盘上的RAID $10$，排列为4个镜像对并进行条带化。\n\n### 步骤2：使用提取的给定条件进行验证\n对问题陈述进行有效性评估。\n- **科学基础**：该问题基于RAID技术的明确定义的标准原理，这是计算机系统和操作系统的核心主题。镜像、奇偶校验、条带化和容错的概念是基础且符合事实的。\n- **问题定义明确**：问题定义清晰。它要求在固定的故障条件（$f=2$）下，为四个精确描述的系统配置计算一个特定的、可量化的指标（$N_{\\mathrm{I}}$）。“可恢复”和“不可恢复”的术语有明确定义。可以从基本原理推导出唯一的解决方案。\n- **客观性**：问题以精确、技术性的语言陈述，没有主观性或歧义。\n- **结论**：该问题不违反任何指定的无效性标准。在标准的计算机科学背景下，它是科学合理的、定义明确的、客观的和自洽的。\n\n### 步骤3：结论与行动\n该问题是**有效的**。将推导出一个解决方案。\n\n### 推导过程\n不可恢复的双磁盘故障对数 $N_{\\mathrm{I}}$ 是通过对每个RAID级别应用数据冗余的基本原理来确定的。从 $n$ 个磁盘中选择 $2$ 个发生故障的总方式数由二项式系数 $\\binom{n}{2} = \\frac{n(n-1)}{2}$ 给出。\n\n**配置 $\\mathcal{R}_1$：在 $n=2$ 个磁盘上的RAID $1$**\n- 具有2个磁盘的RAID $1$ 涉及一个磁盘是另一个的精确镜像。磁盘1上的所有数据都复制到磁盘2上。\n- 磁盘总数为 $n=2$。\n- 不同的双磁盘故障组合总数为 $\\binom{2}{2} = 1$。\n- 这唯一的组合涉及阵列中两个磁盘都发生故障。由于数据的两个副本都丢失了，重建是不可能的。该故障是不可恢复的。\n- 因此，不可恢复的对数为 $N_{\\mathrm{I}}(\\mathcal{R}_1) = 1$。\n\n**配置 $\\mathcal{R}_5$：在 $n=7$ 个磁盘上的RAID $5$**\n- RAID $5$ 在 $n-1=6$ 个磁盘上进行数据条带化，并在每个条带的剩余磁盘上存储一个单一的奇偶校验块。奇偶校验块是该条带中数据块的异或和。\n- 这个单一的奇偶校验信息允许从条带中恰好一个发生故障的磁盘重建数据。对于一个数据块为 $D_1, \\dots, D_6$ 且奇偶校验为 $P = D_1 \\oplus \\dots \\oplus D_6$ 的条带，任何单个块（例如 $D_i$）的丢失都允许通过对其余块进行异或运算来恢复它。\n- 如果两个磁盘发生故障，则在给定的条带内会丢失两个块（例如 $D_i$ 和 $D_j$）。这会留下一个有两个未知数的方程（$D_i \\oplus D_j = \\text{已知值}$），该方程无法唯一求解。\n- 在RAID $5$阵列中，数据被条带化，使得任何一对磁盘都将包含属于同一条带的块。因此，任何两个磁盘的故障都将导致至少一个条带无法恢复，从而导致数据丢失。\n- 磁盘总数为 $n=7$。\n- 双磁盘故障组合的总数为 $\\binom{7}{2} = \\frac{7 \\times 6}{2} = 21$。\n- 由于在RAID $5$中任何双磁盘故障都是不可恢复的，所有21种组合都会导致数据丢失。\n- 因此，不可恢复的对数为 $N_{\\mathrm{I}}(\\mathcal{R}_5) = 21$。\n\n**配置 $\\mathcal{R}_6$：在 $n=8$ 个磁盘上的RAID $6$**\n- RAID $6$ 扩展了RAID $5$，通过向每个条带添加第二个独立的奇偶校验块，专门用于防止双磁盘故障。一个条带由 $n-2=6$ 个数据块和 $2$ 个奇偶校验块组成。\n- 两种奇偶校验方案（例如 $P$ 和 $Q$）为条带中的块提供了一个由两个独立线性方程组成的系统。例如，$P = \\bigoplus D_i$ 和 $Q = \\bigoplus g^i D_i$（使用伽罗瓦域中的运算，这是一种标准实现）。\n- 如果任意两个磁盘发生故障，每个受影响的条带中会丢失两个块。剩余的块和两个奇偶校验方程构成一个具有两个未知数的两个方程的可解系统。这允许唯一地重建两个丢失的块。\n- 这种保护对任何一对发生故障的磁盘都有效，无论它们是存储数据还是奇偶校验。\n- 磁盘总数为 $n=8$。\n- 双磁盘故障组合的总数为 $\\binom{8}{2} = \\frac{8 \\times 7}{2} = 28$。\n- 由于RAID $6$ 旨在承受任何双磁盘故障，所有28种组合都是可恢复的。\n- 因此，不可恢复的对数为 $N_{\\mathrm{I}}(\\mathcal{R}_6) = 0$。\n\n**配置 $\\mathcal{R}_{10}$：在 $n=8$ 个磁盘上的RAID $10$**\n- 此配置是镜像条带（RAID 1+0）。有4个镜像对，数据在这些对之间进行条带化。设这些对为 $(D_{1A}, D_{1B})$、$(D_{2A}, D_{2B})$、$(D_{3A}, D_{3B})$ 和 $(D_{4A}, D_{4B})$。\n- 只要每个镜像对中至少有一个磁盘保持运行，数据就是可恢复的。\n- 当且仅当单个镜像对中的两个磁盘同时发生故障时，才会发生不可恢复的故障。这是因为存储在该对上的所有数据都将丢失，并且由于数据在所有对之间进行条带化，整个逻辑卷都会受损。\n- 同时故障会导致不可恢复数据丢失的对恰好是这4个镜像对：$(D_{1A}, D_{1B})$、$(D_{2A}, D_{2B})$、$(D_{3A}, D_{3B})$ 和 $(D_{4A}, D_{4B})$。\n- 磁盘总数为 $n=8$。双磁盘故障组合的总数为 $\\binom{8}{2} = 28$。\n- 不可恢复的组合数是镜像对的数量，即4。\n- 因此，不可恢复的对数为 $N_{\\mathrm{I}}(\\mathcal{R}_{10}) = 4$。\n\n**重建可行性**\n问题询问在可恢复的情况下重建是否可行。\n- 对于 $\\mathcal{R}_1$ 和 $\\mathcal{R}_5$，在双磁盘故障的情况下没有可恢复的情况，因此关于它们的任何陈述都是空真（vacuously true）。\n- 对于 $\\mathcal{R}_6$，所有28个双磁盘故障情况都是可恢复的。通过为每个条带求解两个奇偶校验方程，重建是可行的。\n- 对于 $\\mathcal{R}_{10}$，有 $28 - 4 = 24$ 个可恢复的双磁盘故障情况。在这些情况下，发生故障的磁盘属于不同的镜像对。通过简单地从每个受影响的对的幸存成员复制数据，重建是可行的。\n- 因此，一般性断言“在所有可恢复的情况下，重建是可行的……”是正确的。\n\n### 结果总结\n- $N_{\\mathrm{I}}(\\mathcal{R}_1) = 1$\n- $N_{\\mathrm{I}}(\\mathcal{R}_5) = 21$\n- $N_{\\mathrm{I}}(\\mathcal{R}_6) = 0$\n- $N_{\\mathrm{I}}(\\mathcal{R}_{10}) = 4$\n- 在所有可恢复的情况下，通过奇偶校验计算或镜像复制，重建都是可行的。\n\n### 逐项分析选项\n\n**A. $N_{\\mathrm{I}}(\\mathcal{R}_1)=1$, $N_{\\mathrm{I}}(\\mathcal{R}_5)=21$, $N_{\\mathrm{I}}(\\mathcal{R}_6)=0$, $N_{\\mathrm{I}}(\\mathcal{R}_{10})=4$。在所有可恢复的情况下，通过从幸存的镜像复制或求解奇偶校验方程，重建都是可行的，且不会丢失数据。**\n- 计算出的值 $N_{\\mathrm{I}}(\\mathcal{R}_1)=1$、 $N_{\\mathrm{I}}(\\mathcal{R}_5)=21$、 $N_{\\mathrm{I}}(\\mathcal{R}_6)=0$ 和 $N_{\\mathrm{I}}(\\mathcal{R}_{10})=4$ 都与我们推导的结果相符。\n- 关于重建可行性的陈述也与我们的分析一致。\n- **结论：正确。**\n\n**B. $N_{\\mathrm{I}}(\\mathcal{R}_1)=0$, $N_{\\mathrm{I}}(\\mathcal{R}_5)=15$, $N_{\\mathrm{I}}(\\mathcal{R}_6)=6$, $N_{\\mathrm{I}}(\\mathcal{R}_{10})=28$。即使奇偶校验可用，在RAID $6$中重建也是不可行的。**\n- $N_{\\mathrm{I}}(\\mathcal{R}_1)=0$ 不正确。我们的结果是 $1$。\n- $N_{\\mathrm{I}}(\\mathcal{R}_5)=15$ 不正确。我们的结果是 $21$。\n- $N_{\\mathrm{I}}(\\mathcal{R}_6)=6$ 不正确。我们的结果是 $0$。\n- $N_{\\mathrm{I}}(\\mathcal{R}_{10})=28$ 不正确。我们的结果是 $4$。（$28$ 是总对数）。\n- 陈述“在RAID $6$中重建也是不可行的”根本上是错误的；这正是RAID $6$双奇偶校验的主要目的。\n- **结论：不正确。**\n\n**C. $N_{\\mathrm{I}}(\\mathcal{R}_1)=1$, $N_{\\mathrm{I}}(\\mathcal{R}_5)=0$, $N_{\\mathrm{I}}(\\mathcal{R}_6)=0$, $N_{\\mathrm{I}}(\\mathcal{R}_{10})=4$。RAID $5$可以使用分布式奇偶校验恢复两次同时发生的故障。**\n- $N_{\\mathrm{I}}(\\mathcal{R}_5)=0$ 不正确。我们的结果是 $21$。\n- 附带的陈述“RAID $5$可以恢复两次同时发生的故障”直接与单奇偶校验RAID的原理相矛盾。\n- **结论：不正确。**\n\n**D. $N_{\\mathrm{I}}(\\mathcal{R}_1)=1$, $N_{\\mathrm{I}}(\\mathcal{R}_5)=21$, $N_{\\mathrm{I}}(\\mathcal{R}_6)=0$, $N_{\\mathrm{I}}(\\mathcal{R}_{10})=12$。只要两个故障磁盘位于同一个条带集中，即使它们来自不同的镜像对，RAID $10$也会遭受不可恢复的损失。**\n- $N_{\\mathrm{I}}(\\mathcal{R}_{10})=12$ 不正确。我们的结果是 $4$。\n- 关于RAID $10$故障的陈述是错误的。来自不同镜像对的两个磁盘的故障是*可恢复的*，因为每个故障磁盘的镜像仍然可用。该陈述描述的情况正好相反。\n- **结论：不正确。**",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "在理解了容错能力之后，下一个关键问题是评估冗余带来的成本。本练习聚焦于 RAID 6 的卓越容错性与 RAID 10 的高性能之间的权衡，通过一个核心指标——空间效率——来量化这一差异。你将推导出两种配置的效率公式，并计算出 RAID 6 在空间上变得更优的临界点，这是系统设计中一个至关重要的考量。",
            "id": "3675039",
            "problem": "一个阵列由 $n$ 个相同的磁盘构成，每个磁盘的容量为 $s$ 字节，由一个独立磁盘冗余阵列 (RAID) 控制器管理。将 RAID 配置的空间效率定义为可用容量与原始容量之比。仅使用相关 RAID 级别的核心定义，推导以下配置的空间效率作为 $n$ 的函数：\n- RAID $6$，它在每个条带中使用两个独立的奇偶校验块，并且可以容忍任意两个磁盘故障。\n- RAID $10$（条带化镜像），它将数据成对镜像，然后在镜像对之间进行条带化。假设 $n$ 为偶数，以便所有磁盘都能参与完整的镜像对。\n\n假设元数据开销可忽略不计，磁盘大小统一，采用全条带写入，并且所有磁盘都是阵列的活动成员。根据您推导出的表达式，确定当 $n \\geq 6$ 时，使得 RAID $6$ 的空间效率严格高于 RAID $10$ 的最小整数 $n$。将您的最终答案表示为一个无单位的整数。\n\n然后，在交叉点处简要讨论空间效率的比较如何与大型顺序操作和小型随机写入的预期性能特征相关联，以及两种配置在容错和重建行为方面的差异。您的讨论应明确提及条带奇偶校验计算、写放大以及承受磁盘故障的能力，但您的最终答案必须仅为计算出的整数。",
            "solution": "该问题被评估为有效，因为它具有科学依据、问题明确、客观，并包含足够、一致的信息以进行形式化求解。它遵循了计算机科学领域的标准定义。\n\n分析过程首先推导 RAID $6$ 和 RAID $10$ 配置的空间效率表达式，然后使用这些表达式找到指定的最小磁盘数。\n\n设 $n$ 为阵列中相同磁盘的数量， $s$ 为每个磁盘的容量（单位：字节）。\n\n阵列的原始容量 $C_{raw}$ 是所有磁盘总容量之和。\n$$C_{raw} = n \\times s$$\n空间效率 $\\eta$ 定义为可用容量 $C_{usable}$ 与原始容量 $C_{raw}$ 之比。\n$$\\eta = \\frac{C_{usable}}{C_{raw}}$$\n\n**RAID 6 空间效率**\nRAID $6$ 阵列将数据分布在 $n$ 个磁盘上。对于每个数据条带，它会计算并存储两个独立的奇偶校验块。此配置可以承受任意两个磁盘的故障。每个条带存储两个奇偶校验块意味着，无论磁盘总数 $n$ 是多少，都有相当于两个磁盘的容量专用于存储冗余信息。\n可用于数据存储的磁盘数量实际上是 $n-2$。\n因此，RAID $6$ 的可用容量 $C_{usable,6}$ 为：\n$$C_{usable,6} = (n-2)s$$\nRAID $6$ 的空间效率 $\\eta_6(n)$ 是其可用容量与原始容量之比。\n$$\\eta_6(n) = \\frac{C_{usable,6}}{C_{raw}} = \\frac{(n-2)s}{ns} = \\frac{n-2}{n}$$\n此表达式对 $n \\geq 4$ 有效，这满足了题目中 $n \\geq 6$ 的约束条件。\n\n**RAID 10 空间效率**\nRAID $10$ 阵列，也称为 RAID $1+0$，是“镜像的条带化”。数据首先被镜像到成对的磁盘上，然后对这些镜像对进行条带化。题目指定 $n$ 为偶数，确保所有磁盘都能形成完整的镜像对。\n一个单独的镜像对由 2 个磁盘组成。数据被写入两个磁盘，因此一对容量各为 $s$ 的磁盘的可用容量仅为 $s$。\n对于总共 $n$ 个磁盘，我们可以组成 $n/2$ 个这样的镜像对。\n然后对这 $n/2$ 个镜像对进行条带化。条带化本身不增加容量开销；它只是将数据分布到逻辑设备（即镜像对）上。因此，RAID $10$ 阵列的总可用容量 $C_{usable,10}$ 是所有镜像对可用容量的总和。\n$$C_{usable,10} = \\left(\\frac{n}{2}\\right)s$$\nRAID $10$ 的空间效率 $\\eta_{10}(n)$ 是其可用容量与原始容量之比。\n$$\\eta_{10}(n) = \\frac{C_{usable,10}}{C_{raw}} = \\frac{\\left(\\frac{n}{2}\\right)s}{ns} = \\frac{1}{2}$$\n对于任何偶数个磁盘 $n \\geq 2$，RAID $10$ 的空间效率是常数 $1/2$，即 $50\\%$。\n\n**比较与交叉点**\n题目要求找到当 $n \\geq 6$ 时，使得 RAID $6$ 空间效率严格高于 RAID $10$ 的最小整数 $n$。这可以表示为不等式：\n$$\\eta_6(n) > \\eta_{10}(n)$$\n代入推导出的表达式：\n$$\\frac{n-2}{n} > \\frac{1}{2}$$\n由于题目指定 $n \\geq 6$，所以 $n$ 是一个正整数。我们可以在不等式两边同乘以 $2n$ 而不改变不等号的方向。\n$$2(n-2) > n$$\n$$2n - 4 > n$$\n$$n > 4$$\n题目要求满足此条件的最小整数 $n$ (其中 $n \\geq 6$)。所提供的 RAID $10$ 配置的定义仅对偶数个磁盘有效。因此，我们必须找到满足 $n > 4$ 且 $n \\geq 6$ 的最小偶数整数。大于或等于 $6$ 的偶数集合是 $\\{6, 8, 10, \\ldots\\}$。该集合中的所有成员都满足条件 $n>4$。此集合中的最小值为 $6$。\n让我们对 $n=6$ 进行验证：\n$\\eta_6(6) = \\frac{6-2}{6} = \\frac{4}{6} = \\frac{2}{3}$。\n$\\eta_{10}(6) = \\frac{1}{2}$。\n不等式 $\\frac{2}{3} > \\frac{1}{2}$ 是成立的，因为 $4 > 3$。因此，当 $n=6$ 时，RAID $6$ 的空间效率严格更高。由于 $6$ 是满足题目所有标准（$n \\geq 6$、对于 RAID $10$ 定义 $n$ 是偶数、以及不等式成立）的最小整数，因此它就是所求的答案。\n\n**特性讨论**\n推导出的交叉点出现在 $n=5$ 处，对于任何 $n \\geq 5$，RAID $6$ 的空间效率都更高。对于允许的偶数值 $n \\geq 6$，RAID $6$ 的空间效率总是更高。讨论的重点是伴随这种更高效率而来的权衡。\n\n- **性能**：对于大型顺序操作（读或写），RAID $6$ 和 RAID $10$ 都可以利用所有 $n$ 个磁盘，从而实现高吞吐量。RAID $10$ 可能略有优势，因为它避免了奇偶校验计算的开销。最显著的性能差异出现在小型随机写入时。RAID $10$ 的写惩罚非常低，每次逻辑写入只需要两次写入操作（镜像中的每个磁盘各一次）。相比之下，RAID $6$ 因其“读-改-写”周期而产生巨大的写惩罚。更新单个数据块需要读取旧数据和两个旧的奇偶校验块，然后写入新数据和两个新的奇偶校验块，导致一次逻辑写入需要六次 I/O 操作。这种写放大使得 RAID $10$ 在随机写入密集型工作负载中表现远为优越。\n\n- **容错与重建**：RAID $6$ 保证能抵御任意两个磁盘的故障，提供更高级别的数据安全性。这是其主要优势。相反，RAID $10$ 至少可以容忍一个磁盘故障，但其承受多个故障的能力取决于哪些磁盘发生故障；如果单个镜像对中的两个磁盘都发生故障，则所有数据都会丢失。在最佳情况下，RAID $10$ 最多可以承受 $n/2$ 个故障，前提是每个故障都发生在不同的镜像对中。两者的重建过程形成鲜明对比。在 RAID $10$ 阵列中重建一个故障驱动器速度快且影响小，因为数据只是简单地从幸存的镜像盘直接复制。而 RAID $6$ 的重建是一个漫长且资源密集型的过程，需要从所有幸存的 $n-1$ 个磁盘中读取数据来重新计算丢失的数据，这会降低阵列性能并增加后续故障的风险窗口。",
            "answer": "$$\\boxed{6}$$"
        },
        {
            "introduction": "这个高级练习将理论知识应用于现实世界的风险评估。我们知道 RAID 5 在重建期间处于“危险窗口”，但这种风险究竟有多大？本练习将指导你精确地量化这一风险，通过计算重建所需的时间以及在此期间发生第二次灾难性故障的概率。这些是任何系统管理员在评估存储系统可靠性时都必须掌握的关键指标。",
            "id": "3671447",
            "problem": "一个存储系统在 $n$ 个相同磁盘上实现了 $5$ 级独立磁盘冗余阵列 (RAID) (RAID-$5$)。当单个磁盘发生故障时，系统通过读取和处理所有幸存磁盘上的条带化奇偶校验和数据来重建丢失的数据。假设以下模型：\n\n- 每个幸存磁盘可以提供固定的重建带宽 $B_{r}$，单位为兆字节/秒，其中 $1$ 兆字节 ($\\mathrm{MB}$) 定义为 $10^{6}$ 字节。\n- 背景工作负载持续消耗每个幸存磁盘带宽的一部分 $\\phi$，仅留下剩余部分可用于重建。\n- 必须在替换磁盘上重建的数据量为 $C$ 字节。\n- 每个独立磁盘的故障遵循独立的泊松过程，其恒定失效率为每年 $\\lambda$，其中一年定义为 $365$ 天，每天 $24$ 小时。\n\n仅使用以下原理：聚合服务速率是独立信道速率的总和，时间等于工作负载除以服务速率，以及对于指数故障过程，在某个时间间隔内没有事件发生的概率是负速率乘以时间的指数函数。请从第一性原理推导出预期重建时间的表达式，以及在重建间隔期间幸存磁盘中至少发生一次额外磁盘故障的概率。\n\n然后，对于一个 RAID-$5$ 阵列，其中 $n=8$，$B_{r}=75\\,\\mathrm{MB/s}$，$\\phi=0.3$，$C=10\\times 10^{12}$ 字节，$\\lambda=0.02$ /年，计算这些值。将重建时间以小时表示，故障概率以无单位的小数表示。将两个数值结果四舍五入到四位有效数字。",
            "solution": "该问题要求在特定的故障和性能模型下，为一个 RAID-$5$ 存储系统推导两个关键指标：预期重建时间 ($T_r$) 和在此重建期间发生后续磁盘故障的概率 ($P_f$)。推导完成后，将使用一组给定的参数对这些表达式进行求值。\n\n首先，我们来验证问题陈述的有效性。\n已知条件如下：\n- RAID 级别: $5$\n- 磁盘数量: $n$\n- 每磁盘重建带宽: $B_r$ 兆字节/秒，其中 $1$ 兆字节为 $10^6$ 字节。\n- 背景工作负载分数: $\\phi$\n- 待重建数据量: $C$ 字节。\n- 每磁盘失效率: 每年 $\\lambda$，遵循独立的泊松过程。\n- 时间换算: $1$ 年为 $365$ 天，每天 $24$ 小时。\n- 推导所需原理:\n    1. 聚合服务速率是独立信道速率的总和。\n    2. 时间等于工作负载除以服务速率。\n    3. 对于速率为 $\\alpha$ 的泊松过程，在时间 $t$ 内发生零个事件的概率是 $\\exp(-\\alpha t)$。\n\n该问题在科学上基于计算机体系结构（RAID系统）和概率论（泊松过程）领域。这是一个定义明確的问题，提供了所有必要的变量和关系以找到唯一解。其语言客观且无歧义。提供的数值（$n=8$，$C=10$ TB 等）对于当代的存储系统是符合实际的。因此，该问题被认为是有效的，可以构建一个解决方案。\n\n**1. 预期重建时间 ($T_r$) 的推导**\n\n一个包含 $n$ 个磁盘的 RAID-$5$ 阵列将数据和奇偶校验条带化到所有 $n$ 个磁盘上。当一个磁盘发生故障时，有 $n-1$ 个幸存磁盘。通过从这 $n-1$ 个磁盘读取相应的数据和奇偶校验块来重建丢失的数据。\n\n这 $n-1$ 个幸存磁盘中的每一个都对重建过程做出贡献。每个磁盘可用的总重建带宽为 $B_r$。然而，这部分带宽的一部分 $\\phi$ 被背景工作负载消耗。可用于重建的剩余部分为 $(1-\\phi)$。\n来自单个幸存磁盘的有效重建带宽 $B_{eff, disk}$ 为：\n$$B_{eff, disk} = B_r (1-\\phi)$$\n\n根据聚合服务速率是独立信道速率之和的原理，阵列的总聚合重建带宽 $B_{agg}$ 是所有 $n-1$ 个幸存磁盘的有效带宽之和：\n$$B_{agg} = (n-1) B_{eff, disk} = (n-1) B_r (1-\\phi)$$\n\n总工作负载是必须重建的数据量，给定为 $C$。利用时间等于工作负载除以服务速率的原理，预期重建时间 $T_r$ 为：\n$$T_r = \\frac{\\text{Workload}}{\\text{Service Rate}} = \\frac{C}{B_{agg}}$$\n代入 $B_{agg}$ 的表达式，我们得到重建时间的最终解析表达式：\n$$T_r = \\frac{C}{(n-1) B_r (1-\\phi)}$$\n\n**2. 额外故障概率 ($P_f$) 的推导**\n\n磁盘故障被建模为独立的泊松过程，每个磁盘的失效率为每年 $\\lambda$ 次。对于 $n-1$ 个幸存磁盘，总失效率 $\\lambda_{total}$ 是各个失效率的总和，因为独立泊松过程之和也是一个泊松过程，其速率等于各个速率之和。\n$$\\lambda_{total} = (n-1)\\lambda$$\n\n我们关心的是在重建间隔 $T_r$ 内至少发生一次额外磁盘故障的概率。更简单的方法是首先计算此间隔内发生零次额外故障的概率 $P_0$。根据所提供的泊松过程原理，对于速率为 $\\alpha$ 的过程，在时间 $t$ 内观察到零个事件的概率为 $\\exp(-\\alpha t)$。\n将此应用于我们的场景：\n$$P_0 = \\exp(-\\lambda_{total} T_r)$$\n\n“至少一次故障”事件是“零次故障”事件的补集。因此，概率 $P_f$ 为：\n$$P_f = 1 - P_0 = 1 - \\exp(-\\lambda_{total} T_r)$$\n\n代入推导出的 $\\lambda_{total}$ 和 $T_r$ 的表达式：\n$$P_f = 1 - \\exp\\left( -(n-1)\\lambda \\cdot \\frac{C}{(n-1) B_r (1-\\phi)} \\right)$$\n指数中的项 $(n-1)$ 被消掉，得到一个简化的表达式：\n$$P_f = 1 - \\exp\\left( -\\frac{\\lambda C}{B_r (1-\\phi)} \\right)$$\n这个结果表明，在此模型中，重建期间发生第二次故障的概率与阵列中的磁盘数量无关（对于 $n>1$）。\n\n**3. 数值计算**\n\n给定以下参数值：\n- $n = 8$\n- $B_r = 75\\,\\mathrm{MB/s} = 75 \\times 10^6\\,\\mathrm{bytes/s}$\n- $\\phi = 0.3$\n- $C = 10 \\times 10^{12}\\,\\mathrm{bytes}$\n- $\\lambda = 0.02\\,\\mathrm{year}^{-1}$\n\n我们还使用以下转换因子：\n- $1\\,\\mathrm{小时} = 3600\\,\\mathrm{秒}$\n- $1\\,\\mathrm{年} = 365 \\times 24 \\times 3600\\,\\mathrm{秒} = 31,536,000\\,\\mathrm{秒}$\n\n**重建时间计算（以小时为单位）：**\n首先，我们使用推导出的公式计算 $T_r$（以秒为单位）：\n$$T_r = \\frac{C}{(n-1) B_r (1-\\phi)} = \\frac{10 \\times 10^{12}}{(8-1) \\times (75 \\times 10^6) \\times (1-0.3)}$$\n$$T_r = \\frac{10 \\times 10^{12}}{7 \\times 75 \\times 10^6 \\times 0.7} = \\frac{10 \\times 10^{12}}{367.5 \\times 10^6}\\,\\mathrm{s} \\approx 27210.884\\,\\mathrm{s}$$\n为了将此时间表示为小时，我们除以 $3600\\,\\mathrm{秒/小时}$：\n$$T_{r, \\text{hours}} = \\frac{27210.884}{3600} \\approx 7.558579\\,\\mathrm{hours}$$\n四舍五入到四位有效数字，重建时间为 $7.559$ 小时。\n\n**故障概率计算：**\n接下来，我们使用其推导公式计算 $P_f$。为确保指数中的量纲一致性，我们必须将 $\\lambda$ 和时间分量 $\\frac{C}{B_r(1-\\phi)}$ 表示为兼容的单位。让我们将失效率 $\\lambda$ 转换为 $\\mathrm{s}^{-1}$ 单位：\n$$\\lambda_s = \\frac{0.02}{31,536,000}\\,\\mathrm{s}^{-1}$$\n指数中的项是：\n$$\\frac{\\lambda C}{B_r(1-\\phi)} = \\lambda_s \\times \\frac{C}{B_r(1-\\phi)} = \\frac{0.02}{31,536,000} \\times \\frac{10 \\times 10^{12}}{75 \\times 10^6 \\times 0.7}$$\n$$\\frac{\\lambda C}{B_r(1-\\phi)} = \\left( \\frac{0.02}{31,536,000} \\right) \\times \\left( \\frac{10^{13}}{5.25 \\times 10^7} \\right) \\approx (6.34245 \\times 10^{-10}) \\times (1.90476 \\times 10^5) \\approx 0.00012078$$\n该指数也等于 $\\lambda_{total} \\times T_r$：\n$$\\lambda_{total} = (n-1)\\lambda_s = 7 \\times \\frac{0.02}{31,536,000}\\,\\mathrm{s}^{-1} \\approx 4.4397 \\times 10^{-9}\\,\\mathrm{s}^{-1}$$\n$$\\lambda_{total} T_r \\approx (4.4397 \\times 10^{-9}) \\times (27210.884) \\approx 0.00012078$$\n那么，故障概率为：\n$$P_f = 1 - \\exp(-0.00012078) \\approx 1 - 0.99987923 \\approx 0.00012077$$\n对于小的 $x$，$1 - \\exp(-x) \\approx x$。因此，$P_f \\approx 0.00012078$。\n四舍五入到四位有效数字，概率为 $0.0001208$，可以写成 $1.208 \\times 10^{-4}$。\n\n最终的数值答案是重建时间 $7.559$ 小时和故障概率 $1.208 \\times 10^{-4}$。",
            "answer": "$$\\boxed{\\begin{pmatrix} 7.559  1.208 \\times 10^{-4} \\end{pmatrix}}$$"
        }
    ]
}