{
    "hands_on_practices": [
        {
            "introduction": "理论知识需要通过实践来巩固。这个练习将带你深入到一个4位逻辑右移桶形移位器的内部，通过手动计算来追踪输入数据在给定控制信号下的完整路径。这有助于你直观地理解移位操作是如何通过多路选择器（MUX）网络实现的，并将抽象的逻辑概念与具体的硬件行为联系起来。",
            "id": "1908624",
            "problem": "一个4位逻辑右移桶形移位器是一种组合逻辑电路，它将一个4位输入字向右移动指定的位数。要移动的位数由一个2位控制输入决定。\n\n该移位器接收一个4位数据输入字 $A = A_3A_2A_1A_0$，其中 $A_3$ 是最高有效位（MSB）。它还接收一个2位控制字 $S = S_1S_0$。$S$ 的无符号二进制整数值决定了移位量，可以是0、1、2或3位。该电路产生一个4位输出字 $Y = Y_3Y_2Y_1Y_0$。\n\n这种特殊的移位器执行“逻辑”右移，意味着当位向右移动时，从最高有效位（MSB）一侧填入零。从最低有效位（LSB）一侧移出的任何位都将被丢弃。\n\n该电路使用四个4到1多路复用器（MUX）实现，每个输出位 $Y_i$ 使用一个。一个4到1多路复用器有四个数据输入，表示为 $I_0, I_1, I_2, I_3$，以及两条选择线。多路复用器的输出等于数据输入 $I_k$，其中 $k$ 是由两条选择线所代表的无符号整数值。在这个桶形移位器设计中，控制位 $S_1$ 和 $S_0$ 连接到所有四个多路复用器的选择线上。\n\n给定输入数据字 $A = 1011_2$ 和控制字 $S = 10_2$，确定最终的4位输出字 $Y$。请用一个4位二进制字符串（例如，1010）表示您的答案。",
            "solution": "逻辑右移 $k$ 位将每个输出位映射为\n$$\nY_{i}=\\begin{cases}\nA_{i+k},  i+k\\leq 3,\\\\\n0,  i+k3.\n\\end{cases}\n$$\n控制字为 $S=10_{2}$，因此移位量为 $k=2$。输入为 $A=A_{3}A_{2}A_{1}A_{0}=1011$，因此 $A_{3}=1$，$A_{2}=0$，$A_{1}=1$，$A_{0}=1$。\n\n计算每个输出位：\n- 对于 $i=3$：$3+23$，所以 $Y_{3}=0$。\n- 对于 $i=2$：$2+23$，所以 $Y_{2}=0$。\n- 对于 $i=1$：$1+2=3\\leq 3$，所以 $Y_{1}=A_{3}=1$。\n- 对于 $i=0$：$0+2=2\\leq 3$，所以 $Y_{0}=A_{2}=0$。\n\n因此输出字为 $Y=0010$。\n\n或者从4到1多路复用器的角度来看：当 $S=10_{2}$ 时，每个多路复用器选择其 $I_{2}$ 输入，对于 $Y_{i}$，当 $i+2\\leq 3$ 时，该输入为 $A_{i+2}$，否则为 $0$，得出相同的结果 $0010$。",
            "answer": "$$\\boxed{0010}$$"
        },
        {
            "introduction": "一个基础的移位器功能有限，但在真实的处理器中，我们需要支持多种移位和循环操作。这个练习将挑战你思考如何利用一个现有的右循环硬件来实现左循环，并探讨实现算术移位等更复杂操作的硬件基础。通过分析，你将揭示不同移位操作之间的深刻联系以及通用移位器设计的核心权衡。",
            "id": "3621848",
            "problem": "一个 $n$ 位桶形移位器构建为一个对数级多路复用器网络，可以执行任意数量 $k$ 的右循环移位，其中 $0 \\leq k  n$。右循环移位 $k$ 位将每个输出位位置 $i$ 映射到位置为 $(i + k) \\bmod n$ 的输入位，而左循环移位 $k$ 位将每个输出位位置 $i$ 映射到位置为 $(i - k) \\bmod n$ 的输入位。提供给桶形移位器的控制字段是一个编码后的移位量，长度为 $\\lceil \\log_2 n \\rceil$ 位。你希望通过将请求的移位量 $k$ 转换为 $k' = (n - k) \\bmod n$ 来使用现有的右循环硬件支持左循环移位，并确定是否可以通过重用同一网络来实现算术右移。算术右移 (ASR) 定义为一种右移，用原始符号位（输入的最高有效位）填充空出的最高有效位位置，而逻辑右移 (LSR) 用零填充空出的位置。请考虑以下关于控制编码和硬件重用的陈述。\n\n哪些陈述是正确的？\n\nA. 对于所有 $n$ 和所有 $0 \\leq k  n$ 的 $k$，左循环移位 $k$ 位等价于右循环移位 $k' = (n - k) \\bmod n$ 位，因为索引映射 $i \\mapsto (i - k) \\bmod n$ 等于 $i \\mapsto (i + k') \\bmod n$。\n\nB. 为了使用相同的右循环硬件支持左循环和右循环移位，控制字段必须从 $\\lceil \\log_2 n \\rceil$ 位扩展到 $\\lceil \\log_2 n \\rceil + 1$ 位来编码方向；没有其他替代方案可以避免增加任何控制位。\n\nC. 一个仅支持循环移位的桶形移位器（纯置换网络）不能通过简单地重新解释循环移位控制来实现算术右移 (ASR)，因为 ASR 需要将符号位的副本插入到多个空出的位置，这不是输入位的置换。\n\nD. 如果网络增加一个额外的可选源，该源将符号位复制到 $n$ 条线上，并增加一个模式控制，用于在环绕（用于循环移位）、补零（用于逻辑移位）和符号填充（用于 ASR）之间进行选择，那么相同的多路复用器级结构可以实现右循环、左循环、逻辑右移 (LSR) 和算术右移 (ASR)，而无需改变级的数量。\n\nE. 在二进制补码算术中，算术左移 1 位不同于逻辑左移 1 位，因为它必须将前一个符号位插入最低有效位；因此，它需要与逻辑左移不同的、能感知符号的硬件。",
            "solution": "首先应检查问题陈述的有效性。\n\n### 步骤 1：提取已知条件\n- 系统是一个 $n$ 位桶形移位器，实现为对数级多路复用器网络。\n- 它可以执行数量为 $k$ 的右循环移位，其中 $0 \\leq k  n$。\n- 右循环移位 $k$ 位的映射是：输出位 $i$ 来自输入位 $(i + k) \\bmod n$。\n- 左循环移位 $k$ 位的映射是：输出位 $i$ 来自输入位 $(i - k) \\bmod n$。\n- 桶形移位器的控制字段是一个编码后的移位量，长度为 $\\lceil \\log_2 n \\rceil$ 位。\n- 支持左循环移位的一个建议方法是使用右循环硬件，并使用转换后的移位量 $k' = (n - k) \\bmod n$。\n- 问题涉及分析使用同一网络实现算术右移 (ASR) 的可行性。\n- ASR 定义：一种右移，用原始符号位填充空出的最高有效位位置。\n- 逻辑右移 (LSR) 定义：一种右移，用零填充空出的位置。\n- 任务是评估五个给定陈述的正确性。\n\n### 步骤 2：使用提取的已知条件进行验证\n- **科学依据：** 问题陈述基于计算机组成和体系结构中标准的、公认的概念，特别是移位器的数字逻辑设计。循环移位、逻辑移位和算术移位的定义都是标准的。对数多路复用器网络是桶形移位器的典型实现。模运算的使用在数学上是正确的。该问题是科学合理的。\n- **定义明确：** 问题提供了清晰的定义和一组特定的陈述供评估。对于每个陈述，都可以根据所提供的信息和数字设计的基本原理得出正确或错误的明确结论。\n- **客观性：** 语言技术性强、精确，没有任何主观或模棱两可的术语。\n\n### 步骤 3：结论与行动\n问题陈述是有效的。这是计算机体系结构领域中一个定义明确的问题。我现在将对每个陈述进行详细分析。\n\n---\n\n### 陈述分析\n\n**陈述 A：** 对于所有 $n$ 和所有 $0 \\leq k  n$ 的 $k$，左循环移位 $k$ 位等价于右循环移位 $k' = (n - k) \\bmod n$ 位，因为索引映射 $i \\mapsto (i - k) \\bmod n$ 等于 $i \\mapsto (i + k') \\bmod n$。\n\n让我们验证索引映射的等价性。\n左循环移位 $k$ 位的映射将索引为 `src` 的输入位发送到索引为 `dst` 的输出位，对于输出位置 $i$，`src` $= (i - k) \\bmod n$。\n右循环移位 $k'$ 位的映射将索引为 `src` 的输入位发送到索引为 `dst` 的输出位，对于输出位置 $i$，`src` $= (i + k') \\bmod n$。\n我们已知 $k' = (n - k) \\bmod n$。\n将此代入右循环映射，得到源索引为：\n$$ (i + ((n - k) \\bmod n)) \\bmod n $$\n给定 $0 \\leq k  n$：\n- 如果 $k=0$，那么 $k' = (n-0) \\bmod n = 0$。映射为 $(i+0) \\bmod n = i$，这是一个无操作，与左循环移位 0 位相同。\n- 如果 $0  k  n$，那么 $0  n-k  n$，所以 $(n-k) \\bmod n = n-k$。因此，$k' = n-k$。\n源索引映射变为 $(i + n - k) \\bmod n$。\n使用模运算的性质 $(a+b) \\bmod n = ((a \\bmod n) + (b \\bmod n)) \\bmod n$，我们可以简化：\n$$ (i + n - k) \\bmod n = ((i - k) + n) \\bmod n $$\n因为加上模数的倍数不会改变结果，所以 $(x+n) \\bmod n = x \\bmod n$。因此：\n$$ ((i - k) + n) \\bmod n = (i - k) \\bmod n $$\n这正是左循环移位 $k$ 位的索引映射。对于指定范围内的所有 $n$ 和 $k$，该等价性成立。\n该陈述是 **正确的**。\n\n**陈述 B：** 为了使用相同的右循环硬件支持左循环和右循环移位，控制字段必须从 $\\lceil \\log_2 n \\rceil$ 位扩展到 $\\lceil \\log_2 n \\rceil + 1$ 位来编码方向；没有其他替代方案可以避免增加任何控制位。\n\n这个陈述做出了一个绝对的断言：“没有其他替代方案”。在工程学中，这样的断言通常是错误的，因为可能存在替代的编码方案。\n对一个 $n$ 位字进行的不同循环移位操作的数量是 $n$（循环群 $Z_n$ 的元素）。使用 $\\lceil \\log_2 n \\rceil$ 位控制字段可用的控制模式数量为 $N_{ctrl} = 2^{\\lceil \\log_2 n \\rceil}$。根据向上取整函数的定义，我们有 $n \\le N_{ctrl}  2n$。\n如果 $n$ 是 2 的幂，比如 $n=2^m$，那么 $\\lceil \\log_2 n \\rceil = m$ 并且 $N_{ctrl} = 2^m = n$。在这种情况下，所有的控制模式都用来指定 $n$ 个不同的右循环移位量（从 $0$ 到 $n-1$）。为了增加一个用户友好的“方向”选择，需要一个外部控制位和移位前逻辑来计算正确的右循环移位量。提供给移位单元的总控制信息将是 $1+m$ 位。\n然而，如果 $n$ *不是* 2 的幂，那么 $N_{ctrl} > n$。这意味着有 $N_{ctrl} - n$ 个未使用或冗余的控制模式。例如，如果 $n=12$，$\\lceil \\log_2 12 \\rceil = 4$，提供 $2^4 = 16$ 个控制模式。右循环移位操作只需要其中的 12 个（用于移位 $0, \\ldots, 11$）。剩下的 4 个控制模式（$12, 13, 14, 15$）是未使用的。\n一种“替代方案”是将这些未使用的模式分配给某些所需的左循环移位操作。例如，控制码 $12$ 可以定义为“左循环移位 1 位”。这将是一种避免在移位器接口上增加控制位的替代方案。虽然这个特定的替代方案可能无法覆盖所有 $n$ 种左循环移位，但它的存在足以证伪“没有其他替代方案”这一说法。因此，该陈述过于绝对，因此是错误的。\n该陈述是 **不正确的**。\n\n**陈述 C：** 一个仅支持循环移位的桶形移位器（纯置换网络）不能通过简单地重新解释循环移位控制来实现算术右移 (ASR)，因为 ASR 需要将符号位的副本插入到多个空出的位置，这不是输入位的置换。\n\n置换网络是一个输入和输出之间存在一对一映射的网络。对于一个 $n$ 位移位器， $n$ 个输出位中的每一个都精确连接到 $n$ 个输入位中的一个，并且每个输入位都精确连接到一个输出位。循环移位是一种循环置换，因此仅支持循环移位的移位器是一个置换网络。\n对输入字 $I = (I_{n-1}, \\ldots, I_0)$ 进行正数 $k$ 位的算术右移 (ASR) 会产生一个输出 $O = (O_{n-1}, \\ldots, O_0)$。低位的 $n-k$ 位是高位输入位的移位版本：对于 $0 \\le i  n-k$，$O_i = I_{i+k}$。高位的 $k$ 位用符号位 $I_{n-1}$ 的副本填充：对于 $n-k \\le i  n$，$O_i = I_{n-1}$。\n如果 $k > 1$，那么多个输出位（例如 $O_{n-1}$ 和 $O_{n-2}$）从同一个输入位（$I_{n-1}$）获取它们的值。这是一对多的映射。同时，低位的 $k$ 个输入位（$I_{k-1}, \\ldots, I_0$）不连接到任何输出；它们被移出。这是一种多对一和某些输入无对应输出的映射，这从根本上说不是一个置换。\n由于仅支持循环移位的移位器的物理结构只实现置换，无论如何重新解释其控制信号都无法改变其结构来执行像 ASR 这样的非置换操作。\n该陈述是 **正确的**。\n\n**陈述 D：** 如果网络增加一个额外的可选源，该源将符号位复制到 $n$ 条线上，并增加一个模式控制，用于在环绕（用于循环移位）、补零（用于逻辑移位）和符号填充（用于 ASR）之间进行选择，那么相同的多路复用器级结构可以实现右循环、左循环、逻辑右移 (LSR) 和算术右移 (ASR)，而无需改变级的数量。\n\n这描述了一种通用移位器的标准架构。对数桶形移位器由 $\\lceil \\log_2 n \\rceil$ 级组成，每级包含 $n$ 个 2-1 多路复用器。第 $j$ 级由移位量的一位控制，并执行 $2^j$ 位的条件移位。\n循环移位、逻辑移位和算术移位之间的区别在于移位过程中进入字中的“填充”位的来源。\n- 循环移位：填充位是从另一端移出的位（环绕）。\n- LSR：填充位是零。\n- ASR：填充位是符号位的副本。\n通过在核心移位网络的输入端添加多路复用器，可以构建一个多功能移位器。对于进入移位器级的每条位线，一个多路复用器根据操作模式（循环移位、LSR、ASR）选择适当的源。对于右移位器，这种逻辑主要影响可能被空出的最高有效位的输入。\n例如，一种常见的设计（漏斗移位器）会创建一个扩展的 $2n-1$ 位输入字。对于右移，扩展字是 $(F_{n-1}, \\ldots, F_1, I_{n-1}, \\ldots, I_0)$，其中 $F_i$ 是填充位，$I_i$ 是输入数据位。然后，对数 MUX 网络只需从此扩展字中选择一个 $n$ 位的窗口。填充位 $F_i$ 可以通过模式控制来选择：对于循环移位，它们是 $I$ 的高位副本；对于 LSR，它们是 $0$；对于 ASR，它们是符号位 $I_{n-1}$ 的副本。\n在这样的设计中，执行可变数量移位的核心 MUX 网络保持不变。其结构和级数 ($\\lceil \\log_2 n \\rceil$) 得以保留。新功能是通过在主移位器之前添加一个可选的“填充生成”逻辑块来提供的。左循环移位可以通过陈述 A 中确立的右循环移位功能来处理。因此，该陈述准确地描述了一种可行的标准设计方法。\n该陈述是 **正确的**。\n\n**陈述 E：** 在二进制补码算术中，算术左移 1 位不同于逻辑左移 1 位，因为它必须将前一个符号位插入最低有效位；因此，它需要与逻辑左移不同的、能感知符号的硬件。\n\n这个陈述为算术左移 (ASL) 提供了不正确的定义。在绝大多数计算机体系结构（包括 x86、ARM、RISC-V）中，算术左移和逻辑左移是相同的操作。两者都将所有位向左移动指定的数量，并用零填充空出的最低有效位。\n对于一个二进制补码数，此操作等效于乘以 $2$。设一个数为 $X$。那么 $2X$ 必须是一个偶数。在二进制表示中，一个数是偶数的充要条件是其最低有效位 (LSB) 为 $0$。因此，为了通过左移正确实现乘以 $2$ 的操作，新的 LSB 必须是 $0$。插入前一个符号位会违反这一基本数学属性（例如，如果符号位是 $1$，结果将是奇数，这是不正确的）。\n由于 ASL 和 LSL 被定义为相同的操作，它们不需要不同的硬件。该陈述的前提在事实上是错误的。\n该陈述是 **不正确的**。\n\n### 正确陈述总结\n- 陈述 A 是正确的。\n- 陈述 B 是不正确的。\n- 陈述 C 是正确的。\n- 陈述 D 是正确的。\n- 陈述 E 是不正确的。\n\n正确的陈述是 A、C 和 D。",
            "answer": "$$\\boxed{ACD}$$"
        },
        {
            "introduction": "在高性能处理器设计中，逻辑正确性只是第一步，满足严苛的速度要求同样至关重要。本练习将你的视角从纯粹的组合逻辑功能转向时序和性能优化。你将学习如何通过流水线技术，将一个大型的桶形移位器分解成多个更小的阶段，以满足千兆赫兹（$GHz$）级别的时钟频率目标。",
            "id": "3621820",
            "problem": "一个 $64$ 位逻辑桶形移位器采用标准的分层架构实现：输入字通过 $L$ 个相同的 $2{:}1$ 多路复用器层，其中每一层根据条件进行 $2^{\\ell}$ 位移位，$\\ell \\in \\{0,1,2,3,4,5\\}$，且 $L = \\log_{2}(64)$。假设单个移位器层（一个多路复用器层）的最坏情况组合传播延迟为 $t_s$ 秒，所有层都相同，并忽略连线偏移和寄存器开销（即，将边沿触发寄存器视为理想的，其建立时间和时钟到Q端时间可忽略不计）。目标时钟频率为 $1\\,\\text{GHz}$。\n\n您可以通过在 $L$ 层之间插入 $p-1$ 组边沿触发寄存器来对移位器进行流水线化，从而将 $L$ 层划分为 $p$ 个流水线级。每个流水线级包含整数个完整的层。时钟周期为 $T_{\\text{clk}} = 1/1\\,\\text{GHz}$。假设 $0  t_s \\leq T_{\\text{clk}}$，以便至少一个完整的层可以满足时钟周期要求。\n\n仅从以下基本事实出发：\n- 任何路径上的总最坏情况组合延迟等于该路径上遇到的各层延迟之和。\n- 在同步流水线中，最大时钟频率受限于任何单个流水线级内的最坏情况组合延迟，该延迟不得超过时钟周期。\n\n1. 仅作为 $t_s$ 的函数，以闭合形式推导出满足 $1\\,\\text{GHz}$ 时钟目标所需的最小整数流水线级数 $p$。您的表达式必须对所有满足 $0  t_s \\leq T_{\\text{clk}}$ 的 $t_s$ 有效，并且必须考虑到每级层数的整数性。\n2. 简要概述一个系统性规则，用于在 $L$ 层中放置 $p-1$ 个寄存器组，以满足时序约束，同时最小化每级的最大层数。\n\n将第1部分的最终答案表示为仅含 $t_s$ 的单个简化解析表达式。将 $t_s$ 视为以秒为单位。无需进行数值四舍五入。",
            "solution": "对问题陈述进行验证。\n\n### 步骤 1：提取给定信息\n- 数据宽度：$64$位\n- 移位器架构：$L$ 个相同的 $2{:}1$ 多路复用器层\n- 每层移位量：$2^{\\ell}$，其中 $\\ell \\in \\{0,1,2,3,4,5\\}$\n- 总层数：$L = \\log_{2}(64)$\n- 每层最坏情况传播延迟：$t_s$ 秒\n- 忽略的开销：连线偏移、寄存器建立时间、寄存器时钟到Q端时间\n- 目标时钟频率：$f_{\\text{clk}} = 1\\,\\text{GHz}$\n- 流水线化：$p-1$ 个寄存器组构成 $p$ 个流水线级\n- 流水线级构成：每个级包含整数个完整的层\n- 时钟周期：$T_{\\text{clk}} = 1 / (1\\,\\text{GHz})$\n- 层延迟约束：$0  t_s \\leq T_{\\text{clk}}$\n- 基本事实 1：总最坏情况组合延迟是路径上各层延迟之和。\n- 基本事实 2：任何单个流水线级内的最大组合延迟不得超过时钟周期。\n\n### 步骤 2：使用提取的信息进行验证\n- **科学基础**：该问题在数字逻辑设计和计算机体系结构的原理方面有充分的依据。对数桶形移位器的模型、其延迟特性以及通过流水线化提高时钟频率的概念都是标准且科学合理的。\n- **适定性**：该问题是适定的。它提供了足够的约束和信息来确定流水线级数 $p$ 的唯一最小整数值。目标明确。\n- **客观性**：语言技术性强、精确，没有主观或模糊的术语。\n- **完整性与一致性**：问题是自洽的。层数 $L$ 被指定为 $L = \\log_2(64) = 6$。时钟周期 $T_{\\text{clk}}$ 可由给定的频率推导得出。每个流水线级必须包含整数个层的约束是关键且明确的。条件 $0  t_s \\leq T_{\\text{clk}}$ 确保解不是平凡的且具有物理意义（至少一层能在一个时钟周期内完成）。没有矛盾之处。\n\n### 步骤 3：结论与行动\n该问题被判定为**有效**。将构建一个合理的解决方案。\n\n***\n\n该问题要求推导出一个 $64$ 位桶形移位器为满足目标时钟频率所需的最小流水线级数 $p$，并概述流水线寄存器的放置方案。\n\n首先，我们确定系统的关键参数。\n对数移位器的层数是 $L = \\log_{2}(64) = 6$。\n目标时钟频率是 $f_{\\text{clk}} = 1\\,\\text{GHz}$，对应的时钟周期是 $T_{\\text{clk}} = \\frac{1}{f_{\\text{clk}}} = \\frac{1}{1 \\times 10^9\\,\\text{Hz}} = 10^{-9}\\,\\text{s}$。\n单个层的最坏情况组合延迟为 $t_s$。\n\n非流水线移位器的总组合延迟为 $T_{\\text{total}} = L \\times t_s = 6 t_s$。如果这个总延迟超过目标时钟周期，即 $6 t_s > T_{\\text{clk}}$，则需要进行流水线化。\n\n如问题所述，同步流水线的核心约束是任何单个级内的组合逻辑延迟不得超过时钟周期。设 $p$ 个流水线级分别包含 $k_1, k_2, \\ldots, k_p$ 层。由于每个级必须包含整数个层，所以每个 $k_i$ 都是正整数。总层数必须守恒，所以 $\\sum_{i=1}^{p} k_i = L = 6$。\n\n第 $i$ 级的延迟是 $k_i t_s$。因此，时序约束为对所有 $i \\in \\{1, \\ldots, p\\}$ 都有 $k_i t_s \\leq T_{\\text{clk}}$。这意味着任何级中的层数 $k_i$ 受以下限制：\n$$k_i \\leq \\frac{T_{\\text{clk}}}{t_s}$$\n由于 $k_i$ 必须是整数，可以放置在任何单个流水线级中的最大层数（我们记为 $k_{\\text{max}}$）是小于或等于此比率的最大整数：\n$$k_{\\text{max}} = \\left\\lfloor \\frac{T_{\\text{clk}}}{t_s} \\right\\rfloor$$\n给定的条件 $0  t_s \\leq T_{\\text{clk}}$ 确保了 $\\frac{T_{\\text{clk}}}{t_s} \\geq 1$，因此 $k_{\\text{max}} \\geq 1$。这证实了至少一层可以构成一个有效的流水线级。\n\n为了找到最小的流水线级数 $p$，我们必须将总共 $L$ 层划分为最少数量的组，其中每个组的层数不超过 $k_{\\text{max}}$。如果我们有 $p$ 个级，可以容纳的总层数最多为 $p \\times k_{\\text{max}}$。为了容纳所有 $L$ 层，我们必须满足：\n$$p \\times k_{\\text{max}} \\geq L$$\n解出 $p$：\n$$p \\geq \\frac{L}{k_{\\text{max}}}$$\n由于级数 $p$ 必须是整数，所需的最小 $p$ 值是满足此不等式的最小整数，由向上取整函数（ceiling function）给出：\n$$p_{\\text{min}} = \\left\\lceil \\frac{L}{k_{\\text{max}}} \\right\\rceil$$\n\n代入 $L$ 和 $k_{\\text{max}}$ 的表达式：\n$$p_{\\text{min}} = \\left\\lceil \\frac{6}{\\left\\lfloor \\frac{T_{\\text{clk}}}{t_s} \\right\\rfloor} \\right\\rceil$$\n\n最后，代入时钟周期的数值 $T_{\\text{clk}} = 10^{-9}\\,\\text{s}$，我们得到最小流水线级数 $p$ 仅作为 $t_s$ 的函数的表达式。\n\n1.  **$p$ 的闭合形式表达式：**\n    $$p(t_s) = \\left\\lceil \\frac{6}{\\left\\lfloor \\frac{10^{-9}}{t_s} \\right\\rfloor} \\right\\rceil$$\n    此表达式在指定的整个范围 $0  t_s \\leq 10^{-9}\\,\\text{s}$ 内有效。例如，如果整个移位器已经满足时序（$6 t_s \\leq 10^{-9}\\,\\text{s}$），那么 $t_s \\leq \\frac{10^{-9}}{6}$，所以 $\\frac{10^{-9}}{t_s} \\geq 6$。那么 $k_{\\text{max}} = \\lfloor \\frac{10^{-9}}{t_s} \\rfloor \\geq 6$，且 $p = \\lceil \\frac{6}{k_{\\text{max}}} \\rceil = 1$，这是正确的，因为不需要流水线。如果每层的延迟接近一个完整的时钟周期（$t_s \\to T_{\\text{clk}}^{-}$），那么 $k_{\\text{max}}=1$，且 $p=\\lceil 6/1 \\rceil = 6$，意味着每一层都需要自己的流水线级。\n\n2.  **放置寄存器组的规则：**\n    目标是将 $L=6$ 层划分为已确定的最小级数 $p$。次要目标是放置 $p-1$ 个寄存器组，以使任何级中的最大层数最小化。这等同于使每级的层数尽可能均匀。\n    \n    实现这一目标的系统性规则基于总层数 $L$ 除以级数 $p$ 的整数除法：\n    \n    a. 计算整数商 $q = \\lfloor L/p \\rfloor$ 和余数 $r = L \\pmod p$。\n    b. 构建 $r$ 个包含 $q+1$ 层的流水线级。\n    c. 构建余下的 $p-r$ 个包含 $q$ 层的流水线级。\n\n    此配置中的总层数为 $r(q+1) + (p-r)q = rq + r + pq - rq = pq + r = L$，这是正确的。这种分布是最均匀的，并保证任何级中的最大层数为 $\\lceil L/p \\rceil$。正如在第1部分的推导中所确立的，$\\lceil L/p \\rceil = \\lceil L / \\lceil L/k_{\\text{max}} \\rceil \\rceil \\leq k_{\\text{max}}$，确保每个级的时序约束都得到满足。\n\n    $p-1$ 个寄存器组将顺序地放置在每组层之后。对于一个划分 $\\{k_1, k_2, \\ldots, k_p\\}$，一个寄存器组放置在第一组 $k_1$ 层之后，下一个放置在随后的 $k_2$ 层之后（即，在累积总共 $k_1+k_2$ 层之后），依此类推，直到最后一个组放置在累积总共 $\\sum_{i=1}^{p-1} k_i$ 层之后。",
            "answer": "$$\n\\boxed{\n\\left\\lceil \\frac{6}{\\left\\lfloor \\frac{10^{-9}}{t_s} \\right\\rfloor} \\right\\rceil\n}\n$$"
        }
    ]
}