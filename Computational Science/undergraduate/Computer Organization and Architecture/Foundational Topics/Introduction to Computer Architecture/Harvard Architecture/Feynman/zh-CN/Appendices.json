{
    "hands_on_practices": [
        {
            "introduction": "哈佛结构的核心优势在于其能够并行处理指令和数据流。本练习旨在通过一个名为“重叠效率”的量化指标，帮助您深入理解这一优势。通过计算在不同总线宽度下指令获取和数据传输的并行程度，您将亲身体会到平衡的硬件设计对于最大化处理器性能至关重要 。",
            "id": "3646906",
            "problem": "一个处理器实现了哈佛架构，这意味着指令路径和数据路径是物理上分离的。具体来说，它有一个指令 (I) 总线和一个数据 (D) 总线，可以在一个共同的时钟下同时运行。考虑执行一条依赖内存的指令，该指令需要通过指令 (I) 总线获取大小为 $s_{i}$ 字节的指令，并在其执行期间通过数据 (D) 总线执行一次大小为 $s_{d}$ 字节的数据内存传输。假设如下：\n\n- 指令 (I) 总线的宽度为 $B_{i}$ 比特，数据 (D) 总线的宽度为 $B_{d}$ 比特。\n- 每个总线在每个时钟周期内最多可以传输其全部宽度的数据，即对于宽度为 $B$ 的总线，每个周期最多传输 $B$ 比特。\n- 两次传输在各自的总线上于同一时钟周期开始，并以每周期允许的最大速率进行，直到各自的数据大小被完全传输。\n- 忽略固定的建立延迟、对齐约束以及任何额外的流水线或缓存效应；仅考虑每条总线以时钟周期为单位测量的原始传输时间。\n\n将重叠效率定义为 $\\eta = \\dfrac{\\text{并行周期数}}{\\text{总周期数}}$，其中“并行周期数”是指令 (I) 总线和数据 (D) 总线同时活跃的时钟周期数，“总周期数”是该指令的内存活动期间至少有一条总线处于活跃状态的总时钟周期数。\n\n从上述关于哈佛架构并发性和每周期总线传输能力的基本定义出发，推导出一个用 $B_{i}$、$B_{d}$、$s_{i}$ 和 $s_{d}$ 表示的 $\\eta$ 的解析表达式。然后，对于指令大小 $s_{i}=16$ 字节和数据传输大小 $s_{d}=32$ 字节的场景，计算以下三种总线宽度配置下（所有宽度单位为比特）的 $\\eta$ 值：\n\n- 情况 A：$B_{i}=64$，$B_{d}=64$。\n- 情况 B：$B_{i}=32$，$B_{d}=64$。\n- 情况 C：$B_{i}=128$，$B_{d}=32$。\n\n将最终的重叠效率表示为精确值。效率 $\\eta$ 是无量纲的；在最终数值结果中不要包含单位。无需四舍五入。",
            "solution": "问题陈述已经过验证，被认为是有效的。它在科学上基于计算机体系结构的原理，特别是哈佛架构模型。问题提法恰当，提供了所有必要的数据和定义以推导出唯一且有意义的解。语言客观，设定自洽且一致。\n\n问题的核心是确定哈佛架构中两次并发总线传输的重叠效率 $\\eta$。该效率定义为并行活跃周期数与总活跃周期数的比率。\n\n首先，我们必须确定每次传输所需的时钟周期数。问题指明内存大小以字节为单位，而总线宽度以比特为单位。我们知道 $1$ 字节 $= 8$ 比特。\n\n设 $N_i$ 是通过宽度为 $B_i$ 比特的指令 (I) 总线获取大小为 $s_i$ 字节的指令所需的时钟周期数。指令的总大小（以比特为单位）是 $8s_i$。由于总线每周期最多可以传输 $B_i$ 比特，所需的周期数是待传输的总比特数除以每周期传输的比特数。由于传输只能在整数个时钟周期内发生，我们必须对这个值取向上取整。\n$$\nN_i = \\left\\lceil \\frac{8s_i}{B_i} \\right\\rceil\n$$\n\n类似地，设 $N_d$ 是通过宽度为 $B_d$ 比特的数据 (D) 总线进行大小为 $s_d$ 字节的数据传输所需的时钟周期数。数据的总大小（以比特为单位）是 $8s_d$。此次传输的周期数是：\n$$\nN_d = \\left\\lceil \\frac{8s_d}{B_d} \\right\\rceil\n$$\n\n问题陈述指出两次传输在同一时钟周期开始。“并行周期数”是两条总线同时活跃的周期数。这对应于两次传输中较短一次的持续时间。因此，并行周期数 $N_{\\text{parallel}}$ 是 $N_i$ 和 $N_d$ 中的最小值。\n$$\nN_{\\text{parallel}} = \\min(N_i, N_d)\n$$\n\n“总周期数”是至少有一条总线处于活跃状态的总周期数。由于两次传输都从周期 $1$ 开始，这个时间段会持续到两次传输中较长的一次完成为止。因此，总周期数 $N_{\\text{total}}$ 是 $N_i$ 和 $N_d$ 中的最大值。\n$$\nN_{\\text{total}} = \\max(N_i, N_d)\n$$\n\n重叠效率 $\\eta$ 定义为并行周期数与总周期数的比率。\n$$\n\\eta = \\frac{N_{\\text{parallel}}}{N_{\\text{total}}} = \\frac{\\min(N_i, N_d)}{\\max(N_i, N_d)}\n$$\n\n代入 $N_i$ 和 $N_d$ 的表达式，我们得到用给定参数表示的 $\\eta$ 的通用解析表达式：\n$$\n\\eta = \\frac{\\min\\left(\\left\\lceil \\frac{8s_i}{B_i} \\right\\rceil, \\left\\lceil \\frac{8s_d}{B_d} \\right\\rceil\\right)}{\\max\\left(\\left\\lceil \\frac{8s_i}{B_i} \\right\\rceil, \\left\\lceil \\frac{8s_d}{B_d} \\right\\rceil\\right)}\n$$\n这就是所要求的解析表达式。\n\n接下来，我们为给定场景计算 $\\eta$：指令大小 $s_i = 16$ 字节，数据传输大小 $s_d = 32$ 字节。\n首先，我们将这些大小转换为比特：\n指令大小（比特） = $8 \\times s_i = 8 \\times 16 = 128$ 比特。\n数据大小（比特） = $8 \\times s_d = 8 \\times 32 = 256$ 比特。\n\n现在我们评估三种指定情况。\n\n情况 A：$B_i = 64$ 比特，$B_d = 64$ 比特。\n指令获取所需的周期数是：\n$$\nN_i = \\left\\lceil \\frac{128}{64} \\right\\rceil = \\lceil 2 \\rceil = 2 \\text{ 周期}\n$$\n数据传输所需的周期数是：\n$$\nN_d = \\left\\lceil \\frac{256}{64} \\right\\rceil = \\lceil 4 \\rceil = 4 \\text{ 周期}\n$$\n效率 $\\eta_A$ 是：\n$$\n\\eta_A = \\frac{\\min(2, 4)}{\\max(2, 4)} = \\frac{2}{4} = \\frac{1}{2}\n$$\n\n情况 B：$B_i = 32$ 比特，$B_d = 64$ 比特。\n指令获取所需的周期数是：\n$$\nN_i = \\left\\lceil \\frac{128}{32} \\right\\rceil = \\lceil 4 \\rceil = 4 \\text{ 周期}\n$$\n数据传输所需的周期数是：\n$$\nN_d = \\left\\lceil \\frac{256}{64} \\right\\rceil = \\lceil 4 \\rceil = 4 \\text{ 周期}\n$$\n效率 $\\eta_B$ 是：\n$$\n\\eta_B = \\frac{\\min(4, 4)}{\\max(4, 4)} = \\frac{4}{4} = 1\n$$\n在这种情况下，传输是完美平衡的，从而达到最大效率。\n\n情况 C：$B_i = 128$ 比特，$B_d = 32$ 比特。\n指令获取所需的周期数是：\n$$\nN_i = \\left\\lceil \\frac{128}{128} \\right\\rceil = \\lceil 1 \\rceil = 1 \\text{ 周期}\n$$\n数据传输所需的周期数是：\n$$\nN_d = \\left\\lceil \\frac{256}{32} \\right\\rceil = \\lceil 8 \\rceil = 8 \\text{ 周期}\n$$\n效率 $\\eta_C$ 是：\n$$\n\\eta_C = \\frac{\\min(1, 8)}{\\max(1, 8)} = \\frac{1}{8}\n$$\n\n三种情况的最终结果分别为 $\\frac{1}{2}$、$1$ 和 $\\frac{1}{8}$。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n\\frac{1}{2} & 1 & \\frac{1}{8}\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "尽管哈佛结构具有并行优势，但其严格的指令与数据分离也带来了一项挑战：难以将代码作为数据来处理。本练习将引导您探索一种巧妙的变通方法，即直接在指令流中编码数据，并通过控制流来访问它们。您将通过计算“指令空间拥塞因子”$κ$ 来分析这种“代码即数据”技术的性能开销，从而深入理解架构设计中的权衡与创新 。",
            "id": "3646951",
            "problem": "一个处理器实现了哈佛架构，具有独立的指令存储器和数据存储器。其指令集架构 (ISA) 提供位宽为 $s$ 的定长指令。指令存储器（指令空间，简写为 $I$-space）由指令提取单元 (IFU) 读取，不能被数据加载/存储单元直接寻址。为了在不访问数据存储器的情况下，为小型查找表实现代码即数据范式，您决定将表值直接编码到 $I$-space 中，并通过控制流来访问它们。\n\n假设以下基本事实和定义：\n- 在哈佛架构中，$I$-space 和数据空间是物理分离的。IFU 提取指令，但不能从 $I$-space 发出任意的数据加载。\n- 一个值为 $v$ 位宽的编码表项，可以通过执行一系列携带立即数的指令来重构，这些指令将常量累积地实体化到一个寄存器中。ISA 提供一种携带立即数的指令，它将一个载荷宽度为 $p$ 位的立即数字段写入或合并到目标中，而无需额外的算术或逻辑指令。每条这样的指令在 $I$-space 中仍然占用一个完整的 $s$ 位指令字。\n- 为了访问索引为 $j$ 的表项，代码计算一个目标地址并执行一次间接分支（一条分支指令）。在目标地址处，它精确执行 $n$ 条携带立即数的指令（其中 $n$ 是从 $p$ 位载荷中实体化 $v$ 位值所需的最小指令数），然后执行一条返回指令以在调用者处恢复执行。\n- 忽略分支预测效应、流水线气泡、指令缓存未命中和对齐惩罚；仅计算由于分支指令、$n$ 条携带立即数的指令和返回指令而由 IFU 提取的位数。将每条指令都视为在 $I$-space 中占用 $s$ 位。\n\n将一次查找的 $I$-space 拥塞因子 $\\kappa$ 定义为：在一次此类表访问期间 IFU 提取的总指令位数与该表所提供的有用数据位数（即表值的 $v$ 位）之比。因此，$\\kappa$ 是无量纲的，它量化了每提供一个数据位所消耗的指令位数。\n\n给定一个具体系统，其参数如下：\n- 定长指令宽度 $s = 32$ 位。\n- 每条指令的立即数载荷宽度 $p = 16$ 位。\n- 每个表项的值宽度 $v = 24$ 位。\n- 每次查找需要一条间接分支指令和一条返回指令，且它们都是 $s$ 位指令。\n\n仅使用上述基本事实，从基本原理推导出 $n$，然后推导出以 $s$、$p$、$v$ 和 $n$ 表示的 $\\kappa$ 表达式，最后计算给定系统的 $\\kappa$ 数值。将最终数值结果四舍五入到四位有效数字。最终答案以纯数字形式表示，不带单位。",
            "solution": "首先对问题陈述进行严格的验证过程。\n\n逐字提取给定的条件：\n- 架构：哈佛架构，具有独立的指令存储器 ($I$-space) 和数据存储器。\n- 指令宽度：$s$ 位，定长。\n- $I$-space 访问：由指令提取单元 (IFU) 读取，而非数据加载/存储单元。\n- 技术：将表值编码到 $I$-space 中，通过控制流访问。\n- 表项值宽度：$v$ 位。\n- 立即数指令载荷宽度：$p$ 位。\n- 立即数指令数量：$n$，实体化一个 $v$ 位值所需的最小指令数。\n- 每次访问的指令数：1 条间接分支指令，$n$ 条携带立即数的指令，1 条返回指令。总共 $n+2$ 条指令。\n- 指令大小：每条指令为 $s$ 位。\n- 假设：忽略流水线效应、缓存未命中和对齐惩罚。\n- 拥塞因子的定义：$\\kappa = \\frac{\\text{提取的总指令位数}}{\\text{提供的有效数据位数}}$。\n- 系统参数：$s = 32$ 位, $p = 16$ 位, $v = 24$ 位。\n- 任务：推导 $n$，推导 $\\kappa$ 的表达式，并计算给定系统的 $\\kappa$ 数值。\n\n对问题的有效性进行评估：\n- **科学依据**：该问题在科学上是合理的。哈佛架构是计算机组成中的一个基本概念。将数据常量嵌入指令流（作为字面量池或通过加载立即数的指令序列）是一种有效且实用的方法，在某些架构中，特别是在嵌入式系统和DSP中得到应用。其前提与公认的计算机体系结构原理一致。\n- **适定性**：该问题是适定的。它提供了所有必要的变量（$s$、$p$、$v$），明确地定义了过程，并指定了清晰的目标。“$n$”作为“所需最小值”的定义导向了唯一的数学解释。\n- **客观性**：语言客观、精确，没有主观或推测性的陈述。\n- **完整性与一致性**：问题是自洽且内部一致的。参数已提供，不存在相互矛盾的约束。\n\n验证结论为该问题有效。因此，我们可以继续进行求解。\n\n按照要求，解答分为三个部分推导。\n\n首先，我们推导 $n$ 的表达式，$n$ 是实体化一个 $v$ 位宽的值所需的携带立即数指令的最小数量。每条指令贡献一个 $p$ 位的载荷。要构造这个 $v$ 位的值，$n$ 条指令的载荷所提供的总位数必须至少为 $v$。用数学方式表示为：\n$$n \\times p \\geq v$$\n由于 $n$ 必须是表示指令数量的整数，我们寻求满足此不等式的最小整数 $n$。这等价于求比率 $\\frac{v}{p}$ 的上取整。\n$$n = \\left\\lceil \\frac{v}{p} \\right\\rceil$$\n对于给定的系统参数，$v = 24$ 和 $p = 16$。我们计算 $n$ 的数值：\n$$n = \\left\\lceil \\frac{24}{16} \\right\\rceil = \\lceil 1.5 \\rceil = 2$$\n因此，从 16 位的立即数载荷构造一个 24 位的值，至少需要 2 条指令。\n\n其次，我们推导 $I$-space 拥塞因子 $\\kappa$ 的通用表达式。其定义为提取的总指令位数与提供的有用数据位数之比。\n$$\\kappa = \\frac{\\text{提取的总指令位数}}{\\text{提供的有用数据位数}}$$\n单次表查找所提取的指令总数是控制流指令和数据实体化指令的总和。这包括一条间接分支指令、$n$ 条携带立即数的指令和一条返回指令。\n$$\\text{指令总数} = 1 + n + 1 = n + 2$$\n由于每条指令的固定宽度为 $s$ 位，因此提取的总指令位数为：\n$$\\text{提取的总指令位数} = (n + 2)s$$\n提供的有用数据位数就是表值的宽度，即 $v$。\n$$\\text{提供的有用数据位数} = v$$\n将这些代入 $\\kappa$ 的定义，我们得到表达式：\n$$\\kappa = \\frac{(n + 2)s}{v}$$\n通过代入第一部分中 $n$ 的表达式，我们可以完全用基本参数 $s$、$p$ 和 $v$ 来表示 $\\kappa$：\n$$\\kappa = \\frac{\\left( \\left\\lceil \\frac{v}{p} \\right\\rceil + 2 \\right)s}{v}$$\n\n第三，我们为指定系统计算 $\\kappa$ 的数值。参数为 $s = 32$，$p = 16$，$v = 24$。我们已经计算出 $n=2$。将这些值代入我们的 $\\kappa$ 表达式中：\n$$\\kappa = \\frac{(2 + 2) \\times 32}{24}$$\n$$\\kappa = \\frac{4 \\times 32}{24}$$\n$$\\kappa = \\frac{128}{24}$$\n该分数可以通过将分子和分母除以它们的最大公约数 8 来简化：\n$$\\kappa = \\frac{128 \\div 8}{24 \\div 8} = \\frac{16}{3}$$\n问题要求将最终数值结果四舍五入到四位有效数字。\n$$\\kappa = \\frac{16}{3} = 5.3333...$$\n四舍五入到四位有效数字，我们得到：\n$$\\kappa \\approx 5.333$$\n这个无量纲值表示，通过此查找方法每提供一个有用数据位，就必须从指令存储器中提取大约 5.333 位，这量化了这种代码即数据技术的开销。",
            "answer": "$$\n\\boxed{5.333}\n$$"
        },
        {
            "introduction": "单个核心的架构选择会对整个多核系统的性能产生深远影响。本练习将视角从单一核心提升至系统层面，探讨哈佛结构中独立的指令和数据带宽如何在多核处理器上影响任务调度。通过解决一个实际的资源分配问题，您将学习如何根据任务的带宽需求进行优化，以最小化共享资源的峰值负载，从而将底层硬件特性与高层软件性能优化联系起来 。",
            "id": "3646991",
            "problem": "一个多核处理器采用哈佛架构，每个核心都有独立的指令和数据通路。每个核心拥有一个私有的指令一级缓存和一个数据一级缓存，所有核心共享一个统一的二级（L2）缓存。在此工作负载模型中，每个任务由一个以吉字节/秒（GB/s）为单位的恒定速率对 $\\left(I_{bw}, D_{bw}\\right)$ 来表征：$I_{bw}$ 是进入核心指令通路的持续指令提取带宽需求，$D_{bw}$ 是由于未在一级数据缓存中命中而由共享二级（L2）缓存服务的流式数据所产生的持续数据带宽需求。假设指令提取完全由指令一级缓存层次结构服务，不会到达二级（L2）缓存，而所有计入 $D_{bw}$ 的数据请求都会到达二级（L2）缓存。\n\n现有 $C=3$ 个相同的核心。时间被精确划分为 $2$ 个不重叠的时间片。每个任务必须以非抢占方式被调度到恰好一个时间片中，并在该时间片内于一个核心上运行。在一个时间片中，一个核心上最多只能运行一个任务。每个核心的通路有其上限：指令通路为 $I_{\\max}=5$ GB/s，数据通路为 $D_{\\max}=8$ GB/s。芯片在每个时间片有共享的指令网络限制 $I_{\\text{chip}}=9$ GB/s，即在一个时间片内调度的所有任务的 $I_{bw}$ 总和不能超过 $I_{\\text{chip}}$。共享二级（L2）缓存服务于一个时间片内调度的所有任务的总数据流量 $D_{bw}$，该时间片的二级（L2）缓存带宽消耗是该时间片内所有任务的 $D_{bw}$ 之和。\n\n给定 $5$ 个任务及其需求 $(I_{bw}, D_{bw})$（单位：GB/s）：\n- $T_{1}: \\left(4, 6\\right)$\n- $T_{2}: \\left(3, 4\\right)$\n- $T_{3}: \\left(2, 5\\right)$\n- $T_{4}: \\left(4, 3\\right)$\n- $T_{5}: \\left(1, 7\\right)$\n\n所有任务都单独满足 $I_{bw} \\leq I_{\\max}$ 和 $D_{bw} \\leq D_{\\max}$，因此任何单个任务都可以在任何核心上运行。\n\n仅使用以下基本事实：(i) 在哈佛架构中，每个核心的指令和数据通路是独立的，(ii) 芯片级的指令网络容量限制了每个时间片内指令提取需求的总和，以及 (iii) 每个时间片的共享二级（L2）缓存带宽等于该时间片内调度任务的 $D_{bw}$ 之和，来确定在上述约束条件下，两个时间片中可实现的最小峰值二级（L2）缓存带宽。\n\n请用 GB/s 为单位的精确整数表示最终答案。不要提供不等式或方程式；请给出单个可实现的最小峰值。无需四舍五入；请给出精确值。",
            "solution": "用户希望我解决以下问题：\n一个多核处理器采用哈佛架构，每个核心都有独立的指令和数据通路。每个核心拥有一个私有的指令一级缓存和一个数据一级缓存，所有核心共享一个统一的二级（L2）缓存。在此工作负载模型中，每个任务由一个以吉字节/秒（GB/s）为单位的恒定速率对 $\\left(I_{bw}, D_{bw}\\right)$ 来表征：$I_{bw}$ 是进入核心指令通路的持续指令提取带宽需求，$D_{bw}$ 是由于未在一级数据缓存中命中而由共享二级（L2）缓存服务的流式数据所产生的持续数据带宽需求。假设指令提取完全由指令一级缓存层次结构服务，不会到达二级（L2）缓存，而所有计入 $D_{bw}$ 的数据请求都会到达二级（L2）缓存。\n\n现有 $C=3$ 个相同的核心。时间被精确划分为 $2$ 个不重叠的时间片。每个任务必须以非抢占方式被调度到恰好一个时间片中，并在该时间片内于一个核心上运行。在一个时间片中，一个核心上最多只能运行一个任务。每个核心的通路有其上限：指令通路为 $I_{\\max}=5$ GB/s，数据通路为 $D_{\\max}=8$ GB/s。芯片在每个时间片有共享的指令网络限制 $I_{\\text{chip}}=9$ GB/s，即在一个时间片内调度的所有任务的 $I_{bw}$ 总和不能超过 $I_{\\text{chip}}$。共享二级（L2）缓存服务于一个时间片内调度的所有任务的总数据流量 $D_{bw}$，该时间片的二级（L2）缓存带宽消耗是该时间片内所有任务的 $D_{bw}$ 之和。\n\n给定 $5$ 个任务及其需求 $(I_{bw}, D_{bw})$（单位：GB/s）：\n- $T_{1}: \\left(4, 6\\right)$\n- $T_{2}: \\left(3, 4\\right)$\n- $T_{3}: \\left(2, 5\\right)$\n- $T_{4}: \\left(4, 3\\right)$\n- $T_{5}: \\left(1, 7\\right)$\n\n所有任务都单独满足 $I_{bw} \\leq I_{\\max}$ 和 $D_{bw} \\leq D_{\\max}$，因此任何单个任务都可以在任何核心上运行。\n\n仅使用以下基本事实：(i) 在哈佛架构中，每个核心的指令和数据通路是独立的，(ii) 芯片级的指令网络容量限制了每个时间片内指令提取需求的总和，以及 (iii) 每个时间片的共享二级（L2）缓存带宽等于该时间片内调度任务的 $D_{bw}$ 之和，来确定在上述约束条件下，两个时间片中可实现的最小峰值二级（L2）缓存带宽。\n\n请用 GB/s 为单位的精确整数表示最终答案。不要提供不等式或方程式；请给出单个可实现的最小峰值。无需四舍五入；请给出精确值。\n\n### 第一步：提取已知条件\n- 核心数：$C=3$\n- 时间片数：$2$\n- 每个核心的指令通路限制：$I_{\\max}=5$ GB/s\n- 每个核心的数据通路限制：$D_{\\max}=8$ GB/s\n- 每个时间片的共享指令网络限制：$I_{\\text{chip}}=9$ GB/s\n- 任务数：$5$\n- 任务需求 $(I_{bw}, D_{bw})$（单位：GB/s）：\n  - $T_1: (4, 6)$\n  - $T_2: (3, 4)$\n  - $T_3: (2, 5)$\n  - $T_4: (4, 3)$\n  - $T_5: (1, 7)$\n- 调度约束：\n  - 每个任务以非抢占方式被调度到恰好一个时间片中的一个核心上。\n  - 任何时间片中，每个核心最多一个任务。\n- 目标：最小化两个时间片中的峰值二级（L2）缓存带宽。\n\n### 第二步：使用提取的已知条件进行验证\n该问题描述了一个多核处理器上的资源分配和调度场景，这是计算机体系结构中的一个标准课题。该模型虽然经过简化，但基于科学基础的概念：哈佛架构、缓存层次结构和带宽限制。该问题是适定的，提供了明确的目标（最小化峰值）和一套完整的约束。所提供的数据是自洽的。例如，陈述“所有任务都单独满足 $I_{bw} \\leq I_{\\max}$ 和 $D_{bw} \\leq D_{\\max}$”在给定值（$I_{\\max}=5$, $D_{\\max}=8$）下是事实正确的。该问题是客观的，可以形式化为一个组合优化问题。没有科学缺陷、歧义或矛盾。\n\n### 第三步：结论与行动\n问题有效。将提供严谨的解决方案。\n\n### 解决方案\n问题要求在满足一系列调度约束的条件下，找到两个时间片中可实现的最小峰值二级（L2）缓存带宽。这是一个组合优化问题。设任务集合为 $\\mathcal{T} = \\{T_1, T_2, T_3, T_4, T_5\\}$。我们必须将 $\\mathcal{T}$ 划分为两个不相交的子集 $S_1$ 和 $S_2$，分别对应于在时间片1和时间片2中调度的任务。因此，$S_1 \\cup S_2 = \\mathcal{T}$ 且 $S_1 \\cap S_2 = \\emptyset$。\n\n对于任何有效划分 $(S_1, S_2)$，约束如下：\n1.  **核心约束**：任何时间片中的任务数不能超过核心数 $C=3$。因此，$|S_1| \\le 3$ 且 $|S_2| \\le 3$。\n2.  **指令带宽约束**：对于每个时间片 $k \\in \\{1, 2\\}$，该时间片中任务的指令带宽需求总和不得超过芯片级限制 $I_{\\text{chip}}=9$ GB/s。\n    $$ \\sum_{T_i \\in S_k} I_{bw,i} \\le 9 $$\n每个核心的限制（$I_{\\max}$, $D_{\\max}$）已由单个任务满足，并且由于每个核心在每个时间片最多运行一个任务，此约束对任务的分组没有增加进一步的限制。\n\n目标是最小化峰值 L2 数据带宽。在一个时间片 $k$ 中的 L2 带宽，我们称之为 $D_{L2, k}$，是该时间片中任务的数据带宽需求之和。\n$$ D_{L2, k} = \\sum_{T_i \\in S_k} D_{bw,i} $$\n我们希望找到一个划分 $(S_1, S_2)$ 来最小化 $\\max(D_{L2, 1}, D_{L2, 2})$。\n\n让我们列出任务需求：\n- $T_1: (I_{bw,1}, D_{bw,1}) = (4, 6)$\n- $T_2: (I_{bw,2}, D_{bw,2}) = (3, 4)$\n- $T_3: (I_{bw,3}, D_{bw,3}) = (2, 5)$\n- $T_4: (I_{bw,4}, D_{bw,4}) = (4, 3)$\n- $T_5: (I_{bw,5}, D_{bw,5}) = (1, 7)$\n\n首先，让我们确定所有任务的总指令和数据带宽需求：\n$$ \\sum_{i=1}^{5} I_{bw,i} = 4 + 3 + 2 + 4 + 1 = 14 \\, \\text{GB/s} $$\n$$ \\sum_{i=1}^{5} D_{bw,i} = 6 + 4 + 5 + 3 + 7 = 25 \\, \\text{GB/s} $$\n\n设 $I_{S_1} = \\sum_{T_i \\in S_1} I_{bw,i}$ 和 $I_{S_2} = \\sum_{T_j \\in S_2} I_{bw,j}$。由 $S_1 \\cup S_2 = \\mathcal{T}$，我们有 $I_{S_1} + I_{S_2} = 14$。\n指令带宽约束为 $I_{S_1} \\le 9$ 和 $I_{S_2} \\le 9$。第二个不等式可以写成 $14 - I_{S_1} \\le 9$，这意味着 $I_{S_1} \\ge 5$。\n因此，对于任何有效的划分，一组任务的总指令带宽必须在 $5$ 和 $9$ GB/s 之间（含）。\n\n由于总共有 $5$ 个任务，且每个时间片最多可容纳 $3$ 个任务，因此唯一可能的划分大小 $(|S_1|, |S_2|)$ 是 $(2, 3)$ 或 $(3, 2)$。我们可以简单地枚举所有形成一个包含 $2$ 个任务的组的可能方式（另外 $3$ 个任务形成第二组），并检查是否满足约束。有 $\\binom{5}{2} = 10$ 种这样的划分需要检查。\n\n设 $S_1$ 为包含 $2$ 个任务的组，$S_2$ 为包含 $3$ 个任务的组。我们检查每种情况：\n1.  $S_1 = \\{T_1, T_2\\}$: $I_{S_1} = 4+3=7$。由于 $5 \\le 7 \\le 9$，这是一个有效划分。$I_{S_2} = 14-7=7$，也有效。\n    $D_{L2, 1} = 6+4=10$。\n    $D_{L2, 2} = 25-10=15$。\n    峰值 L2 带宽：$\\max(10, 15) = 15$。\n\n2.  $S_1 = \\{T_1, T_3\\}$: $I_{S_1} = 4+2=6$。有效 ($5 \\le 6 \\le 9$)。\n    $D_{L2, 1} = 6+5=11$。\n    $D_{L2, 2} = 25-11=14$。\n    峰值 L2 带宽：$\\max(11, 14) = 14$。\n\n3.  $S_1 = \\{T_1, T_4\\}$: $I_{S_1} = 4+4=8$。有效 ($5 \\le 8 \\le 9$)。\n    $D_{L2, 1} = 6+3=9$。\n    $D_{L2, 2} = 25-9=16$。\n    峰值 L2 带宽：$\\max(9, 16) = 16$。\n\n4.  $S_1 = \\{T_1, T_5\\}$: $I_{S_1} = 4+1=5$。有效 ($5 \\le 5 \\le 9$)。\n    $D_{L2, 1} = 6+7=13$。\n    $D_{L2, 2} = 25-13=12$。\n    峰值 L2 带宽：$\\max(13, 12) = 13$。\n\n5.  $S_1 = \\{T_2, T_3\\}$: $I_{S_1} = 3+2=5$。有效 ($5 \\le 5 \\le 9$)。\n    $D_{L2, 1} = 4+5=9$。\n    $D_{L2, 2} = 25-9=16$。\n    峰值 L2 带宽：$\\max(9, 16) = 16$。\n\n6.  $S_1 = \\{T_2, T_4\\}$: $I_{S_1} = 3+4=7$。有效 ($5 \\le 7 \\le 9$)。\n    $D_{L2, 1} = 4+3=7$。\n    $D_{L2, 2} = 25-7=18$。\n    峰值 L2 带宽：$\\max(7, 18) = 18$。\n\n7.  $S_1 = \\{T_2, T_5\\}$: $I_{S_1} = 3+1=4$。无效，因为 $I_{S_1}  5$。这意味着 $I_{S_2} = 14-4=10 > 9$，违反了时间片2的约束。\n\n8.  $S_1 = \\{T_3, T_4\\}$: $I_{S_1} = 2+4=6$。有效 ($5 \\le 6 \\le 9$)。\n    $D_{L2, 1} = 5+3=8$。\n    $D_{L2, 2} = 25-8=17$。\n    峰值 L2 带宽：$\\max(8, 17) = 17$。\n\n9.  $S_1 = \\{T_3, T_5\\}$: $I_{S_1} = 2+1=3$。无效，因为 $I_{S_1}  5$。\n\n10. $S_1 = \\{T_4, T_5\\}$: $I_{S_1} = 4+1=5$。有效 ($5 \\le 5 \\le 9$)。\n    $D_{L2, 1} = 3+7=10$。\n    $D_{L2, 2} = 25-10=15$。\n    峰值 L2 带宽：$\\max(10, 15) = 15$。\n\n我们已经穷举了所有有效的任务划分。得到的峰值 L2 带宽值为 $\\{15, 14, 16, 13, 16, 18, 17, 15\\}$。这些值中的最小值是 $13$。\n\n这个最小值是通过划分 $S_1 = \\{T_1, T_5\\}$ 和 $S_2 = \\{T_2, T_3, T_4\\}$ 实现的。\n- 时间片 1 (2个任务): $I_1=I_{bw,1}+I_{bw,5}=4+1=5 \\le 9$。$D_1=D_{bw,1}+D_{bw,5}=6+7=13$。\n- 时间片 2 (3个任务): $I_2=I_{bw,2}+I_{bw,3}+I_{bw,4}=3+2+4=9 \\le 9$。$D_2=D_{bw,2}+D_{bw,3}+D_{bw,4}=4+5+3=12$。\n此调度的峰值 L2 带宽为 $\\max(13, 12) = 13$ GB/s。由于我们的搜索是穷举的，因此这是可实现的最小峰值。",
            "answer": "$$\n\\boxed{13}\n$$"
        }
    ]
}