{
    "hands_on_practices": [
        {
            "introduction": "Before we can build a reliable synchronizer, we must first answer a fundamental question: how much time does a flip-flop need to safely resolve potential metastability? This practice guides you through the core calculation of determining the minimum required resolution time, $T_r$, to achieve a target Mean Time Between Failures (MTBF) . By working backward from a desired system lifetime, you will connect the theoretical MTBF model to a concrete timing budget, the first and most critical step in robust synchronizer design.",
            "id": "3658898",
            "problem": "A two-flip-flop synchronizer is used to bring an asynchronous signal into a destination clock domain. The synchronizer’s metastability resolving behavior follows a well-tested exponential model characterized by a device-dependent time constant $\\tau$ and a technology-dependent constant $C$ that captures the effective aperture/window and gain factors associated with metastability. The asynchronous data source toggles with average event frequency $f_{d}$, and the destination domain samples at clock frequency $f_{c}$. The Mean Time Between Failures (MTBF) is defined as the reciprocal of the average failure rate under the assumptions of stationary statistics and independent trials.\n\nGiven the following parameters:\n- Destination sampling frequency $f_{c} = 1.0 \\times 10^{9}~\\mathrm{Hz}$,\n- Asynchronous data event frequency $f_{d} = 5.0 \\times 10^{7}~\\mathrm{Hz}$,\n- Metastability constant $C = 1.0 \\times 10^{-10}~\\mathrm{s}$,\n- Metastability time constant $\\tau = 15~\\mathrm{ps} = 15 \\times 10^{-12}~\\mathrm{s}$,\n- Target lifetime $Y = 20~\\mathrm{years}$,\n\nuse the standard metastability resolving model and the definition of Mean Time Between Failures to derive the minimum required resolution time $T_{r}$ such that the MTBF is at least $Y$ years, and compute its numerical value. Express your final answer for $T_{r}$ in $\\mathrm{ns}$ and round your answer to four significant figures.\n\nAdditionally, to plan a safety margin, consider an implementation overhead $T_{\\mathrm{ov}} = 0.25~\\mathrm{ns}$ that must be reserved in each clock cycle for combinational delays, clock-to-output delay, routing, and setup time. Explore feasibility at two candidate destination clock periods $T_{c,1} = 1.0~\\mathrm{ns}$ and $T_{c,2} = 0.5~\\mathrm{ns}$ by comparing the available resolution time $T_{\\mathrm{avail}} = T_{c} - T_{\\mathrm{ov}}$ against the required $T_{r}$. State whether each candidate clock period can meet the MTBF requirement. The feasibility discussion does not alter the requested final numerical answer for $T_{r}$.",
            "solution": "The problem statement has been validated and is deemed valid. It is scientifically grounded, well-posed, and objective, providing all necessary parameters to solve for the required resolution time and assess feasibility under given constraints. The model for Mean Time Between Failures (MTBF) is a standard exponential model used in digital electronics to characterize the reliability of synchronizers.\n\nThe MTBF of a two-flip-flop synchronizer is given by the formula:\n$$\nMTBF = \\frac{\\exp\\left(\\frac{T_{r}}{\\tau}\\right)}{C \\cdot f_{c} \\cdot f_{d}}\n$$\nwhere:\n- $T_{r}$ is the resolution time allowed for the first flip-flop's output to settle.\n- $\\tau$ is the metastability time constant of the flip-flop.\n- $C$ is a technology-dependent constant related to the metastability window.\n- $f_{c}$ is the sampling clock frequency of the destination domain.\n- $f_{d}$ is the average event frequency of the asynchronous data signal.\n\nThe problem requires that the MTBF be at least the target lifetime $Y$. To find the minimum required resolution time $T_{r}$, we set the MTBF equal to $Y$:\n$$\nY = \\frac{\\exp\\left(\\frac{T_{r}}{\\tau}\\right)}{C \\cdot f_{c} \\cdot f_{d}}\n$$\nWe must first ensure all units are consistent. The target lifetime $Y$ is given in years, while all other parameters are in SI units (seconds, hertz). We convert $Y$ to seconds. Using the standard approximation of $365.25$ days per year to account for leap years:\n$$\n1~\\mathrm{year} = 365.25~\\mathrm{days} \\times 24~\\mathrm{hours/day} \\times 3600~\\mathrm{s/hour} = 31,557,600~\\mathrm{s}\n$$\nThe target lifetime in seconds, which we denote as $Y_{s}$, is:\n$$\nY_{s} = 20~\\mathrm{years} \\times 31,557,600~\\mathrm{s/year} = 631,152,000~\\mathrm{s}\n$$\nNow, we solve the MTBF equation for $T_{r}$:\n$$\n\\exp\\left(\\frac{T_{r}}{\\tau}\\right) = Y_{s} \\cdot C \\cdot f_{c} \\cdot f_{d}\n$$\nTaking the natural logarithm of both sides:\n$$\n\\frac{T_{r}}{\\tau} = \\ln\\left(Y_{s} \\cdot C \\cdot f_{c} \\cdot f_{d}\\right)\n$$\n$$\nT_{r} = \\tau \\cdot \\ln\\left(Y_{s} \\cdot C \\cdot f_{c} \\cdot f_{d}\\right)\n$$\nThe given parameters are:\n- $f_{c} = 1.0 \\times 10^{9}~\\mathrm{Hz}$\n- $f_{d} = 5.0 \\times 10^{7}~\\mathrm{Hz}$\n- $C = 1.0 \\times 10^{-10}~\\mathrm{s}$\n- $\\tau = 15 \\times 10^{-12}~\\mathrm{s}$\n- $Y_{s} = 6.31152 \\times 10^{8}~\\mathrm{s}$\n\nFirst, we compute the argument of the logarithm:\n$$\n\\text{Argument} = Y_{s} \\cdot C \\cdot f_{c} \\cdot f_{d}\n$$\n$$\n\\text{Argument} = (6.31152 \\times 10^{8}~\\mathrm{s}) \\cdot (1.0 \\times 10^{-10}~\\mathrm{s}) \\cdot (1.0 \\times 10^{9}~\\mathrm{s}^{-1}) \\cdot (5.0 \\times 10^{7}~\\mathrm{s}^{-1})\n$$\n$$\n\\text{Argument} = (6.31152 \\cdot 1.0 \\cdot 1.0 \\cdot 5.0) \\times 10^{(8 - 10 + 9 + 7)}\n$$\n$$\n\\text{Argument} = 31.5576 \\times 10^{14} = 3.15576 \\times 10^{15}\n$$\nNow, we substitute this into the expression for $T_{r}$:\n$$\nT_{r} = (15 \\times 10^{-12}~\\mathrm{s}) \\cdot \\ln\\left(3.15576 \\times 10^{15}\\right)\n$$\nCalculating the natural logarithm:\n$$\n\\ln\\left(3.15576 \\times 10^{15}\\right) \\approx 35.68804\n$$\nTherefore, the minimum required resolution time is:\n$$\nT_{r} \\approx (15 \\times 10^{-12}~\\mathrm{s}) \\cdot 35.68804 \\approx 5.353206 \\times 10^{-10}~\\mathrm{s}\n$$\nThe problem asks for the answer in nanoseconds ($\\mathrm{ns}$), where $1~\\mathrm{ns} = 10^{-9}~\\mathrm{s}$.\n$$\nT_{r} \\approx 0.5353206~\\mathrm{ns}\n$$\nRounding to four significant figures, we get:\n$$\nT_{r} \\approx 0.5353~\\mathrm{ns}\n$$\nNext, we perform the feasibility analysis for the two candidate clock periods. The available time for metastability resolution, $T_{\\mathrm{avail}}$, in a clock cycle $T_{c}$ is what remains after accounting for other delays, represented by the overhead $T_{\\mathrm{ov}}$.\n$$\nT_{\\mathrm{avail}} = T_{c} - T_{\\mathrm{ov}}\n$$\nFor the system to be reliable, the available time must be greater than or equal to the required resolution time: $T_{\\mathrm{avail}} \\ge T_{r}$.\nThe given overhead is $T_{\\mathrm{ov}} = 0.25~\\mathrm{ns}$.\n\nCase 1: Candidate clock period $T_{c,1} = 1.0~\\mathrm{ns}$.\nThe available resolution time is:\n$$\nT_{\\mathrm{avail},1} = 1.0~\\mathrm{ns} - 0.25~\\mathrm{ns} = 0.75~\\mathrm{ns}\n$$\nComparing with the required resolution time:\n$$\nT_{\\mathrm{avail},1} = 0.75~\\mathrm{ns} > T_{r} \\approx 0.5353~\\mathrm{ns}\n$$\nSince the available time is greater than the required time, the clock period $T_{c,1} = 1.0~\\mathrm{ns}$ is feasible.\n\nCase 2: Candidate clock period $T_{c,2} = 0.5~\\mathrm{ns}$.\nThe available resolution time is:\n$$\nT_{\\mathrm{avail},2} = 0.5~\\mathrm{ns} - 0.25~\\mathrm{ns} = 0.25~\\mathrm{ns}\n$$\nComparing with the required resolution time:\n$$\nT_{\\mathrm{avail},2} = 0.25~\\mathrm{ns} < T_{r} \\approx 0.5353~\\mathrm{ns}\n$$\nSince the available time is less than the required time, the clock period $T_{c,2} = 0.5~\\mathrm{ns}$ is not feasible. The system cannot meet the target MTBF of $20$ years with this clock period and overhead.\n\nThe primary result requested is the numerical value for $T_{r}$.\n$$\nT_r \\approx 0.5353~\\mathrm{ns}\n$$",
            "answer": "$$\\boxed{0.5353}$$"
        },
        {
            "introduction": "In digital design, there is often a tension between performance and reliability, and synchronizers are a prime example. This exercise explores a classic trade-off: when a system's clock frequency is increased to boost performance, the time available for metastability resolution per cycle shrinks, degrading reliability . You will calculate the number of additional synchronizer stages needed to compensate for this effect, providing a hands-on understanding of how designers trade increased signal latency for a restored MTBF.",
            "id": "3658885",
            "problem": "A single-bit asynchronous status signal with event rate $f_{d}$ is synchronized into a destination clock domain using a chain of edge-triggered flip-flops. Initially, the destination clock has frequency $f_{c0}$ and the synchronizer uses $k_{0}$ stages. The available metastability resolution time between the first flip-flop that may go metastable and the final sampling flip-flop is modeled as $T_{r} = (k-1) T_{c} - \\delta$, where $k$ is the total number of stages, $T_{c}$ is the destination clock period, and $\\delta$ is a constant timing budget that lumps setup time and propagation delays. The device exhibits exponential metastability resolution characterized by a time constant $\\tau$, and all device-related constants and $f_{d}$ remain unchanged across operating points.\n\nThe destination clock frequency is then doubled to $f_{c1} = 2 f_{c0}$. To keep the Mean Time Between Failures (MTBF) unchanged at its initial value, you consider adding extra stages to the synchronizer. Assume $k_{0} = 2$, $f_{c0} = 250\\,\\text{MHz}$, $f_{d} = 10\\,\\text{MHz}$, $\\tau = 28\\,\\text{ps}$, and $\\delta = 120\\,\\text{ps}$. You may assume that $\\delta$ does not change with the clock frequency change, and that the standard exponential MTBF-versus-resolution-time model for synchronizers applies.\n\nDetermine:\n1) The minimum integer number of additional synchronizer stages required after the clock doubles to keep MTBF constant.\n2) The additional resolving time $\\Delta T_{r}$ that must be provided, derived from the MTBF model.\n\nExpress $\\Delta T_{r}$ in picoseconds and round it to three significant figures. Provide your final answer as a two-entry row matrix containing the number of extra stages and $\\Delta T_{r}$ in picoseconds, in that order. Do not include units in your final boxed answer.",
            "solution": "The probability that a bistable element remains metastable decays approximately exponentially with time. A widely used and experimentally validated model for synchronizer failures is that the failure rate is proportional to $f_{c} f_{d}$ multiplied by an exponentially decaying factor set by the available resolving time $T_{r}$ and the device time constant $\\tau$. Consequently, the Mean Time Between Failures (MTBF) is modeled as\n$$\n\\text{MTBF} = \\frac{1}{K f_{c} f_{d}} \\exp\\!\\left(\\frac{T_{r}}{\\tau}\\right),\n$$\nwhere $K$ is a device/process-dependent constant that includes aperture/window factors and other proportionality terms. This form captures two key facts: the more often the destination samples ($f_{c}$) and the more often asynchronous events occur ($f_{d}$), the more often potential violations occur; and the longer the resolving time $T_{r}$, the less likely a violation propagates, with exponential sensitivity governed by $\\tau$.\n\nWe are told that initially the destination clock frequency is $f_{c0}$, and after change it is $f_{c1} = 2 f_{c0}$. The asynchronous event rate $f_{d}$, $\\tau$, and $K$ do not change. To keep MTBF constant, set the initial and final MTBF equal and solve for how $T_{r}$ must change.\n\nLet the initial resolving time be $T_{r0}$ and the final required resolving time be $T_{r1}$. Equating MTBF values,\n$$\n\\frac{1}{K f_{c0} f_{d}} \\exp\\!\\left(\\frac{T_{r0}}{\\tau}\\right)\n=\n\\frac{1}{K f_{c1} f_{d}} \\exp\\!\\left(\\frac{T_{r1}}{\\tau}\\right).\n$$\nCancel the common constants and take the natural logarithm:\n$$\n\\frac{T_{r0}}{\\tau} - \\ln(f_{c0})\n=\n\\frac{T_{r1}}{\\tau} - \\ln(f_{c1}).\n$$\nRearrange to obtain the additional resolving time $\\Delta T_{r} \\equiv T_{r1} - T_{r0}$ that compensates the frequency change:\n$$\n\\Delta T_{r} = \\tau \\ln\\!\\left(\\frac{f_{c1}}{f_{c0}}\\right).\n$$\nFor a doubling of the clock, $f_{c1}/f_{c0} = 2$, so\n$$\n\\Delta T_{r} = \\tau \\ln(2).\n$$\nWith $\\tau = 28\\,\\text{ps}$,\n$$\n\\Delta T_{r} = 28\\,\\text{ps} \\times \\ln(2) \\approx 28\\,\\text{ps} \\times 0.693147\\ldots \\approx 19.409\\,\\text{ps}.\n$$\nRounded to three significant figures and expressed in picoseconds, $\\Delta T_{r} \\approx 19.4\\,\\text{ps}$.\n\nNext, relate resolving time to the number of stages. For a $k$-stage chain clocked at period $T_{c}$, the standard timing abstraction for the effective resolving time from the first potentially metastable flip-flop to the final sampling flip-flop is\n$$\nT_{r} = (k-1) T_{c} - \\delta,\n$$\nwhere $\\delta$ lumps fixed setup and propagation margin. Initially, with $k_{0} = 2$ and $T_{c0} = 1/f_{c0}$,\n$$\nT_{r0} = (2-1) T_{c0} - \\delta = T_{c0} - \\delta.\n$$\nAfter doubling the clock to $f_{c1} = 2 f_{c0}$, the new period is $T_{c1} = 1/f_{c1} = \\frac{1}{2} T_{c0}$. If we choose a new stage count $k_{1}$, the new resolving time is\n$$\nT_{r1} = (k_{1}-1) T_{c1} - \\delta.\n$$\nTo maintain the same MTBF, we must meet\n$$\nT_{r1} \\ge T_{r0} + \\Delta T_{r}.\n$$\nSubstitute the expressions and cancel $\\delta$:\n$$\n(k_{1}-1) T_{c1} - \\delta \\ge (T_{c0} - \\delta) + \\Delta T_{r}\n\\quad\\Rightarrow\\quad\n(k_{1}-1) T_{c1} \\ge T_{c0} + \\Delta T_{r}.\n$$\nThus the minimal integer $k_{1}$ that satisfies the requirement is\n$$\nk_{1} = \\left\\lceil 1 + \\frac{T_{c0} + \\Delta T_{r}}{T_{c1}} \\right\\rceil.\n$$\nNow evaluate numerically. With $f_{c0} = 250\\,\\text{MHz}$, $T_{c0} = 1/f_{c0} = 4.0\\,\\text{ns}$. After doubling, $f_{c1} = 500\\,\\text{MHz}$, so $T_{c1} = 2.0\\,\\text{ns}$. Using the computed $\\Delta T_{r} \\approx 19.409\\,\\text{ps} = 0.019409\\,\\text{ns}$,\n$$\n1 + \\frac{T_{c0} + \\Delta T_{r}}{T_{c1}}\n=\n1 + \\frac{4.0\\,\\text{ns} + 0.019409\\,\\text{ns}}{2.0\\,\\text{ns}}\n=\n1 + \\frac{4.019409}{2.0}\n=\n1 + 2.0097045\n=\n3.0097045\\ldots.\n$$\nTaking the ceiling gives $k_{1} = 4$. Since $k_{0} = 2$, the minimum number of additional synchronizer stages required is\n$$\nk_{1} - k_{0} = 4 - 2 = 2.\n$$\nNote that $\\delta$ algebraically cancels in the stage-count condition, so its specific value does not affect the minimal integer stage count in this scenario; it would affect absolute $T_{r}$ but not the stage increment needed when the ratio $f_{c1}/f_{c0}$ and $\\tau$ are fixed.\n\nTherefore, the required additional resolving time is $\\Delta T_{r} \\approx 19.4\\,\\text{ps}$ (three significant figures), and the minimal number of extra stages is $2$.",
            "answer": "$$\\boxed{\\begin{pmatrix}2 & 19.4\\end{pmatrix}}$$"
        },
        {
            "introduction": "While a two-stage synchronizer can effectively handle a single asynchronous bit, what happens when we need to transfer a multi-bit data word, like a bus? This exercise exposes a critical pitfall: naively synchronizing each bit independently can lead to data corruption, where the receiving domain momentarily sees a \"phantom\" value that is neither the old nor the new data word . By constructing a counterexample and calculating the probability of this failure, you will learn why parallel data transfer across clock domains requires more advanced techniques than simple per-bit synchronization.",
            "id": "3658817",
            "problem": "Consider an asynchronous clock-domain crossing in a computer system where a producer in one clock domain updates an $N$-bit data bus synchronously to a new word, and a consumer in another clock domain samples that bus through a per-bit two-stage synchronizer composed of two cascaded Data Flip-Flops (DFFs). There is no handshake, strobe, or encoded protection; the consumer simply samples the outputs of the $N$ independent synchronizers each cycle. Suppose the producer updates the bus from an old word to a new word at a particular edge in the producer’s clock domain such that every one of the $N$ bits transitions (i.e., all $N$ bits change simultaneously at the source). Each bit’s synchronizer exhibits variable latency due to metastability: conditioned on the update occurring close to a consumer sampling edge, a given bit appears at the consumer after one consumer cycle with probability $p$, and after two consumer cycles with probability $1-p$. Assume the latency outcomes across different bits are independent and identically distributed.\n\nTask:\n1. Using only the definitions of metastability in bistable storage elements and the role of two-stage synchronizers in mitigating metastability, construct a concrete counterexample for $N=2$ that demonstrates the consumer can momentarily observe a word that is not equal to either the old word or the new word. Your construction must specify old and new two-bit words and explain how independence of per-bit synchronizer latency can yield a mixed word at the consumer.\n2. Under the same independence model, derive from first principles an analytic expression, as a function of $p$ and $N$, for the probability that the word observed by the consumer at a given sampling epoch is coherent, meaning that all $N$ bits sampled at that epoch are from the same source cycle (either all old or all new). Express your final answer as a single closed-form expression in terms of $p$ and $N$.\n\nNo numerical approximation is required; provide the exact expression. The final answer must be a single analytical expression.",
            "solution": "This problem examines the potential for data-bus incoherence during an asynchronous clock-domain crossing and asks for a quantitative analysis of this effect. The problem statement is valid. It is scientifically grounded in the well-understood phenomenon of metastability in digital circuits, it is well-posed with all necessary parameters and definitions provided, and it is free of contradictions or ambiguities. The model, while a simplification of a complex physical process, is a standard and effective abstraction for analyzing the architectural consequences of synchronizer behavior. We proceed with the two parts of the task.\n\n**Part 1: Counterexample for $N=2$**\n\nThe task is to construct a scenario with a $N=2$ bit bus where the consumer momentarily observes a word that is neither the original (old) word nor the final (new) word.\n\nLet the two bits of the data bus be $B_1$ and $B_0$. The problem states that all bits transition. We can choose the old word to be $W_{\\text{old}} = 01_2$ and the new word to be $W_{\\text{new}} = 10_2$. For this choice, $W_{\\text{old}}$ corresponds to the bit vector $(B_1, B_0) = (0, 1)$ and $W_{\\text{new}}$ corresponds to $(B_1, B_0) = (1, 0)$. Both bits flip, as required.\n\nThe producer updates the bus from $W_{\\text{old}}$ to $W_{\\text{new}}$ at a time that is asynchronous to the consumer's clock. Each bit is passed through an independent two-stage synchronizer. Due to the potential for metastability, the latency for the new value of each bit to appear at the consumer is variable. According to the model provided, for each bit $i \\in \\{0, 1\\}$, its new value is observed by the consumer after $1$ consumer clock cycle with probability $p$, and after $2$ consumer clock cycles with probability $1-p$.\n\nWe analyze the word observed by the consumer at the first sampling epoch following the producer's update. At this instant, a bit $B_i$ will have its new value if its synchronizer had a $1$-cycle latency, or it will retain its old value if its synchronizer has a $2$-cycle latency.\n\nLet's consider a specific outcome for the latencies of the two bits, which are independent events. Suppose the synchronizer for bit $B_1$ has a $1$-cycle latency, and the synchronizer for bit $B_0$ has a $2$-cycle latency.\n\\begin{itemize}\n    \\item For bit $B_1$, a $1$-cycle latency means the consumer samples the new value, $B_{1, \\text{new}} = 1$.\n    \\item For bit $B_0$, a $2$-cycle latency means the consumer samples the old value, $B_{0, \\text{old}} = 1$.\n\\end{itemize}\nIn this case, the composite word observed by the consumer is $(B_1, B_0) = (1, 1)$, or $11_2$. This observed word, $11_2$, is not equal to the old word, $W_{\\text{old}} = 01_2$, nor is it equal to the new word, $W_{\\text{new}} = 10_2$. This constitutes the required counterexample.\n\nThis event occurs with a probability given by the product of the independent probabilities for each bit's latency: $P(B_1 \\text{ has } 1\\text{-cycle latency}) \\times P(B_0 \\text{ has } 2\\text{-cycle latency}) = p \\times (1-p)$. Because $p$ is a probability associated with metastability resolution, it is typically in the range $0 < p < 1$, so this outcome has a non-zero probability of occurring. This transient, invalid word is a direct consequence of the independent, variable latencies of the per-bit synchronizers.\n\n**Part 2: Derivation of Coherency Probability**\n\nThe task is to derive an expression for the probability that the word observed by the consumer is coherent. A coherent word is defined as one where all $N$ bits are from the same source cycle, meaning the observed word is either the complete old word or the complete new word. This analysis focuses on the first consumer sampling epoch after the producer's update, as this is the only time when incoherence is possible under the given model. At all later epochs, all bits will have stabilized to their new values.\n\nLet's consider the state of the $N$ bits at this critical sampling epoch. For each bit $i \\in \\{1, 2, \\ldots, N\\}$, there are two possible outcomes based on its synchronizer's latency:\n\\begin{enumerate}\n    \\item The synchronizer has a $1$-cycle latency: The consumer samples the bit's *new* value. This occurs with probability $p$.\n    \\item The synchronizer has a $2$-cycle latency: The consumer samples the bit's *old* value. This occurs with probability $1-p$.\n\\end{enumerate}\n\nThe latency outcomes for all $N$ bits are independent and identically distributed. The observed $N$-bit word is coherent if one of two mutually exclusive events occurs:\n\n**Event A: All bits have transitioned to their new values.**\nThis means that for every bit $i=1, \\ldots, N$, the synchronizer had a $1$-cycle latency. Since the events are independent, the probability of this is the product of the individual probabilities for each bit:\n$$P(\\text{all bits are new}) = \\prod_{i=1}^{N} P(\\text{bit } i \\text{ is new}) = \\prod_{i=1}^{N} p = p^N$$\nIn this case, the consumer observes the complete new word, $W_{\\text{new}}$.\n\n**Event B: All bits remain at their old values.**\nThis means that for every bit $i=1, \\ldots, N$, the synchronizer had a $2$-cycle latency. The probability of this, again leveraging independence, is the product of the individual probabilities:\n$$P(\\text{all bits are old}) = \\prod_{i=1}^{N} P(\\text{bit } i \\text{ is old}) = \\prod_{i=1}^{N} (1-p) = (1-p)^N$$\nIn this case, the consumer observes the complete old word, $W_{\\text{old}}$.\n\nThe total probability of observing a coherent word, $P(\\text{coherent})$, is the sum of the probabilities of these two mutually exclusive events.\n$$P(\\text{coherent}) = P(\\text{all bits are new}) + P(\\text{all bits are old})$$\nSubstituting the expressions derived above, we get:\n$$P(\\text{coherent}) = p^N + (1-p)^N$$\nThis is the closed-form analytical expression for the probability that the sampled word is coherent as a function of $p$ and $N$. This can also be viewed from the perspective of a binomial distribution. Let $K$ be the number of bits that have settled to their new value. Then $K \\sim \\text{Binomial}(N,p)$. The word is coherent if $K=N$ (all new) or $K=0$ (all old). The probability is $P(K=N) + P(K=0) = \\binom{N}{N}p^N(1-p)^0 + \\binom{N}{0}p^0(1-p)^N = p^N + (1-p)^N$, which confirms the result.",
            "answer": "$$\n\\boxed{p^{N} + (1-p)^{N}}\n$$"
        }
    ]
}