{
    "hands_on_practices": [
        {
            "introduction": "掌握反码表示法的第一步是能够熟练地在十进制和反码二进制之间进行转换。这项练习旨在巩固这一基本技能，它不仅涵盖了正数和负数的编码，还特别关注了该系统的一个独特之处：零的双重表示（$+0$ 和 $-0$）。通过完成此练习，您将对反码的编码规则建立起直观的理解。",
            "id": "3662341",
            "problem": "一个数字系统使用反码表示法来表示带符号的 $n$ 位整数。在反码表示法中，正数值的最高有效位（MSB）为前导零，而负数值则通过对其绝对值的正数编码进行按位取反来编码。零有两种不同的编码，分别表示为 $+0$ 和 $-0$。考虑以下两个任务，它们要求在两种不同的字长下进行十进制和反码之间的转换。\n\n任务 A（$n=5$ 位编码）：将十进制数值 $+7$、$-7$、$+0$ 和 $-0$ 编码为 $5$ 位反码。对于每个得到的 $5$ 位字，将其各位解释为一个无符号二进制数以获得一个整数 $U$。令这四个无符号整数为 $U_{+7}$、$U_{-7}$、$U_{+0}$ 和 $U_{-0}$。\n\n任务 B（$n=6$ 位解码）：将以下 $6$ 位反码字解码为带符号的十进制数值：$101101$、$010010$、$111111$ 和 $000000$。令解码后的十进制数值为 $D_{101101}$、$D_{010010}$、$D_{111111}$ 和 $D_{000000}$。\n\n仅使用反码表示法的基础定义，不使用任何记忆的快捷公式，计算量\n$$\nS = \\left(U_{+7} + U_{-7} + U_{+0} + U_{-0}\\right) + \\left(D_{101101} + D_{010010} + D_{111111} + D_{000000}\\right).\n$$\n将 $S$ 以单个整数形式给出。无需四舍五入。",
            "solution": "该问题要求计算一个总和 $S$，该总和源于涉及反码表示法的两个任务：一个针对 $5$ 位系统的编码任务和一个针对 $6$ 位系统的解码任务。\n\n问题陈述已经过验证，被认为是有效的。它科学合理、提法明确且客观。所有必要的定义和数据都已提供。我们开始进行解答。\n\n解答的结构是首先完成任务 A，然后是任务 B，最后计算总和 $S$。\n\n### 任务 A：$n=5$ 位编码\n\n我们被要求将十进制数值 $+7$、$-7$、$+0$ 和 $-0$ 编码为 $5$ 位反码，然后将这些二进制字解释为无符号整数。\n\n1.  **编码 $+7$**：\n    该数为正数，因此其最高有效位（MSB）必须为 $0$。其绝对值为 $7$，二进制表示为 $111_2$。要在 $5$ 位系统中表示 $+7$，我们需要用前导零填充其绝对值的二进制表示，使其总长度达到 $5$ 位。\n    $$ +7_{10} \\rightarrow 00111_2 $$\n    将 $00111_2$ 解释为无符号整数，得到 $U_{+7}$。\n    $$ U_{+7} = 0 \\cdot 2^4 + 0 \\cdot 2^3 + 1 \\cdot 2^2 + 1 \\cdot 2^1 + 1 \\cdot 2^0 = 0 + 0 + 4 + 2 + 1 = 7 $$\n\n2.  **编码 $-7$**：\n    负数的反码表示是其正数绝对值表示的按位取反。我们对 $+7$ 的二进制字进行取反。\n    $$ \\text{NOT}(00111_2) = 11000_2 $$\n    因此，$-7_{10}$ 编码为 $11000_2$。将其解释为无符号整数，得到 $U_{-7}$。\n    $$ U_{-7} = 1 \\cdot 2^4 + 1 \\cdot 2^3 + 0 \\cdot 2^2 + 0 \\cdot 2^1 + 0 \\cdot 2^0 = 16 + 8 + 0 + 0 + 0 = 24 $$\n\n3.  **编码 $+0$**：\n    正零（$+0$）的表示是一个全零的比特串。\n    $$ +0_{10} \\rightarrow 00000_2 $$\n    将 $00000_2$ 解释为无符号整数，得到 $U_{+0}$。\n    $$ U_{+0} = 0 $$\n\n4.  **编码 $-0$**：\n    负零（$-0$）的表示是 $+0$ 表示的按位取反。\n    $$ \\text{NOT}(00000_2) = 11111_2 $$\n    将 $11111_2$ 解释为无符号整数，得到 $U_{-0}$。\n    $$ U_{-0} = 1 \\cdot 2^4 + 1 \\cdot 2^3 + 1 \\cdot 2^2 + 1 \\cdot 2^1 + 1 \\cdot 2^0 = 16 + 8 + 4 + 2 + 1 = 31 $$\n\n任务 A 的总和是：\n$$ U_{+7} + U_{-7} + U_{+0} + U_{-0} = 7 + 24 + 0 + 31 = 62 $$\n可以观察到，对于任何值 $x$，其无符号解释 $U_x$ 与其反码负数 $U_{-x}$ 的无符号解释之和为 $2^n-1$。这里，$n=5$，所以 $2^5-1=31$。确实，$U_{+7} + U_{-7} = 7 + 24 = 31$ 并且 $U_{+0} + U_{-0} = 0 + 31 = 31$。总和为 $31 + 31 = 62$。\n\n### 任务 B：$n=6$ 位解码\n\n我们被要求将四个 $6$ 位反码字解码为带符号的十进制数值。\n\n1.  **解码 $101101_2$**：\n    MSB 是 $1$，所以这是一个负数。为了找到其绝对值，我们进行按位取反。\n    $$ \\text{NOT}(101101_2) = 010010_2 $$\n    其绝对值是这个取反后的二进制字的十进制值。\n    $$ 010010_2 = 1 \\cdot 2^4 + 0 \\cdot 2^3 + 0 \\cdot 2^2 + 1 \\cdot 2^1 + 0 \\cdot 2^0 = 16 + 2 = 18 $$\n    由于该数为负数，其值为 $-18$。\n    $$ D_{101101} = -18 $$\n\n2.  **解码 $010010_2$**：\n    MSB 是 $0$，所以这是一个正数。其值是该二进制字的直接解释。\n    $$ 010010_2 = 1 \\cdot 2^4 + 1 \\cdot 2^1 = 16 + 2 = 18 $$\n    其值为 $+18$。\n    $$ D_{010010} = 18 $$\n\n3.  **解码 $111111_2$**：\n    MSB 是 $1$，所以这是一个负数。这个全为一的特定模式表示负零（$-0$）。为了确认，我们进行按位取反。\n    $$ \\text{NOT}(111111_2) = 000000_2 $$\n    绝对值为 $0$。因此，其值为 $0$。\n    $$ D_{111111} = 0 $$\n\n4.  **解码 $000000_2$**：\n    MSB 是 $0$。这个全为零的模式表示正零（$+0$）。其值为 $0$。\n    $$ D_{000000} = 0 $$\n\n任务 B 的总和是：\n$$ D_{101101} + D_{010010} + D_{111111} + D_{000000} = -18 + 18 + 0 + 0 = 0 $$\n\n### 最终计算\n\n总和 $S$ 是任务 A 和任务 B 结果的和。\n$$ S = \\left(U_{+7} + U_{-7} + U_{+0} + U_{-0}\\right) + \\left(D_{101101} + D_{010010} + D_{111111} + D_{000000}\\right) $$\n代入计算出的值：\n$$ S = (62) + (0) = 62 $$\n最终结果是 $62$。",
            "answer": "$$\\boxed{62}$$"
        },
        {
            "introduction": "在掌握了表示法之后，下一步自然是进行算术运算。本练习将带您实践反码减法，这是计算机算术中的一个核心操作。您将运用“减法变加法”的技巧，通过计算被减数与减数反码的和来得到差值，并理解“循环进位”在其中的作用。",
            "id": "1915012",
            "problem": "一个微控制器的4位算术逻辑单元（ALU）需要执行一次减法运算。该ALU专门使用反码表示法来处理有符号数，对于形如 $M - S$ 的减法运算，它会计算 $M + (\\text{1's complement of } S)$。\n\n你的任务是确定该ALU执行运算 $1001_2 - 1100_2$ 后的最终4位二进制结果。请将你的最终答案以4位二进制字符串的形式呈现。",
            "solution": "在反码系统中，一个二进制数的负数是通过按位取反得到的。该ALU将减法 $M - S$ 计算为 $M + \\overline{S}$，其中 $\\overline{S}$ 是 $S$ 的反码，并使用4位加法，如果产生进位则进行循环进位。\n\n给定 $M = 1001_{2}$ 和 $S = 1100_{2}$，计算 $S$ 的反码：\n$$\n\\overline{S} = \\overline{1100_{2}} = 0011_{2}.\n$$\n现在使用4位加法将 $M$ 和 $\\overline{S}$ 相加：\n$$\n1001_{2} + 0011_{2} = 1100_{2}.\n$$\n由于最高有效位没有产生进位，因此不进行循环进位。因此，最终的4位结果是 $1100_{2}$。\n\n作为反码系统中的一致性检查：$1001_{2}$ 表示 $-6$（因为 $\\overline{1001} = 0110_2 = 6$），$1100_{2}$ 表示 $-3$（因为 $\\overline{1100} = 0011_2 = 3$），所以 $-6 - (-3) = -3$，这与 $1100_{2}$ 的值相符。",
            "answer": "$$\\boxed{1100}$$"
        },
        {
            "introduction": "真正的理解不仅在于执行预设的运算，还在于能够设计和分析算法。这个更具挑战性的练习要求您为反码系统实现绝对值函数。这需要您对所有可能的情况进行严谨的分析，特别是如何处理符号位以及特殊的 $-0$ 表示，以确保算法在所有输入下都能得到规范化的正确结果。",
            "id": "3662312",
            "problem": "考虑一个 $n$ 位反码表示法，其中 $n \\geq 2$。在此系统中，每个位向量 $x \\in \\{0,1\\}^{n}$ 都有一个最高有效位 (MSB)，记作 $x_{n-1}$，并且数学值 $0$ 存在两种编码：全零向量 $0^{n}$ (记作 $+0$) 和全一向量 $1^{n}$ (记作 $-0$)。对于任意位向量 $x$，令 $\\overline{x}$ 表示其按位取反，并令 $m(x) \\triangleq \\sum_{i=0}^{n-1} x_{i} 2^{i}$ 表示其无符号大小。反码中的数学值映射定义如下：如果 $x_{n-1} = 0$，则 $\\mathrm{val}(x) = m(x)$；如果 $x_{n-1} = 1$ 且 $x \\neq 1^{n}$，则 $\\mathrm{val}(x) = - m(\\overline{x})$；如果 $x = 1^{n}$，则 $\\mathrm{val}(x) = 0$。对于任意满足 $0 \\le y \\le 2^{n-1}-1$ 的整数 $y$，将规范非负编码器 $\\mathrm{enc}(y)$ 定义为 MSB 为 $0$ 且无符号大小等于 $y$ 的唯一 $n$ 位向量，因此特别地 $\\mathrm{enc}(0) = 0^{n}$。绝对值函数必须生成 $|\\mathrm{val}(x)|$ 的规范非负编码。\n\n给出三种针对 $n$ 位反码输入的绝对值函数候选实现：\n1. $f_{0}(x)$ 清除 MSB 并保持所有其他位不变，即，$f_{0}(x)$ 是其各位满足 $(f_{0}(x))_{n-1} = 0$ 和对所有 $0 \\le i \\le n-2$ 都有 $(f_{0}(x))_{i} = x_{i}$ 的位向量。\n2. $f_{1}(x)$ 与 $f_{0}(x)$ 相同，但增加了对负零的特殊情况处理：如果 $x = 1^{n}$，则 $f_{1}(x) = 0^{n}$。\n3. $g(x)$ 当且仅当 MSB 为 $1$ 时对所有位取反，即，当 $x_{n-1} = 1$ 时，$g(x) = \\overline{x}$，当 $x_{n-1} = 0$ 时，$g(x) = x$。\n\n仅从上述定义和“正确的绝对值必须等于 $\\mathrm{enc}(|\\mathrm{val}(x)|)$”这一要求出发，分析每种实现，并确定作为 $n$ 的函数，其输出等于规范编码 $\\mathrm{enc}(|\\mathrm{val}(x)|)$ 的输入 $x \\in \\{0,1\\}^{n}$ 的确切数量。将这些基数记为 $|S_{f_{0}}|$, $|S_{f_{1}}|$ 和 $|S_{g}|$，其中对于实现 $h$，$S_{h} \\triangleq \\{x \\in \\{0,1\\}^{n} \\mid h(x) = \\mathrm{enc}(|\\mathrm{val}(x)|)\\}$。将你的最终答案表示为一个有序三元组。无需四舍五入，且不涉及单位。",
            "solution": "我们的目标是确定三个候选函数 $f_0, f_1, g$ 中，每一个函数能正确计算出规范绝对值的输入向量 $x$ 的数量。一个正确的输出必须等于 $\\mathrm{enc}(|\\mathrm{val}(x)|)$。我们将根据输入 $x$ 的符号位 $x_{n-1}$ 分情况讨论。\n\n### 情况 1：$x_{n-1} = 0$（非负数，包括 $+0$）\n-   此类输入共有 $2^{n-1}$ 个。\n-   根据定义，当 $x_{n-1}=0$ 时，$\\mathrm{val}(x) = m(x) \\ge 0$。因此，$|\\mathrm{val}(x)| = m(x)$。\n-   正确的输出应为 $\\mathrm{enc}(m(x))$。根据 $\\mathrm{enc}$ 的定义，$\\mathrm{enc}(y)$ 是MSB为0且无符号大小为 $y$ 的向量。输入 $x$ 本身MSB为0，其值为 $m(x)$，因此 $x$ 就是其自身值的规范编码。所以，对于所有非负输入 $x$，正确的输出就是 $x$ 本身。\n-   **分析各函数：**\n    -   $f_0(x)$ 清除MSB。由于 $x_{n-1}$ 已经是0，所以 $f_0(x) = x$。**正确**。\n    -   $f_1(x)$ 在 $x_{n-1}=0$ 时与 $f_0(x)$ 相同（因为 $x \\neq 1^n$），所以 $f_1(x) = x$。**正确**。\n    -   $g(x)$ 在 $x_{n-1}=0$ 时，定义为 $g(x) = x$。**正确**。\n-   **结论：** 对于所有 $2^{n-1}$ 个非负输入，三个函数都给出正确结果。\n\n### 情况 2：$x_{n-1} = 1$（负数和 $-0$）\n此类输入共有 $2^{n-1}$ 个。我们进一步细分为严格负数和负零。\n\n#### 子情况 2a：$x \\neq 1^n$ 且 $x_{n-1}=1$（严格负数）\n-   此类输入共有 $2^{n-1}-1$ 个。\n-   根据定义，$\\mathrm{val}(x) = -m(\\overline{x})$。因此，$|\\mathrm{val}(x)| = m(\\overline{x})$。\n-   正确的输出应为 $\\mathrm{enc}(m(\\overline{x}))$。向量 $\\overline{x}$ 的MSB为0，其无符号大小为 $m(\\overline{x})$。因此，$\\overline{x}$ 本身就是其值的规范编码，即 $\\mathrm{enc}(m(\\overline{x})) = \\overline{x}$。\n-   **分析各函数：**\n    -   $f_0(x)$ 清除 $x$ 的MSB，得到 $0x_{n-2}...x_0$。这不等于正确的输出 $\\overline{x} = 0\\overline{x}_{n-2}...\\overline{x}_0$，除非所有低位都相等，即 $x_i = \\overline{x}_i$，这是不可能的。**不正确**。\n    -   $f_1(x)$ 在此情况下与 $f_0(x)$ 相同。**不正确**。\n    -   $g(x)$ 在 $x_{n-1}=1$ 时，定义为 $g(x) = \\overline{x}$。这正是正确的输出。**正确**。\n-   **结论：** 对于 $2^{n-1}-1$ 个严格负数输入，$g(x)$ 是正确的，而 $f_0(x)$ 和 $f_1(x)$ 均不正确。\n\n#### 子情况 2b：$x = 1^n$（负零）\n-   这是一个单一输入。\n-   根据定义，$\\mathrm{val}(1^n) = 0$。因此，$|\\mathrm{val}(1^n)| = 0$。\n-   正确的输出应为 $\\mathrm{enc}(0)$，根据定义即为 $0^n$。\n-   **分析各函数：**\n    -   $f_0(1^n)$ 清除MSB，得到 $011...1$。这不等于 $0^n$。**不正确**。\n    -   $f_1(1^n)$ 根据特殊情况处理，定义为 $f_1(1^n) = 0^n$。**正确**。\n    -   $g(1^n)$ 计算 $\\overline{1^n}$，得到 $0^n$。**正确**。\n-   **结论：** 对于输入 $-0$，$f_1(x)$ 和 $g(x)$ 是正确的，而 $f_0(x)$ 不正确。\n\n### 汇总\n现在我们统计每个函数正确的输入总数：\n-   $|S_{f_0}|$：在 $2^{n-1}$ 个非负数上正确。在所有负数（包括 $-0$）上均不正确。\n    $$|S_{f_0}| = 2^{n-1}$$\n-   $|S_{f_1}|$：在 $2^{n-1}$ 个非负数上正确，在 $-0$ 上正确，但在 $2^{n-1}-1$ 个严格负数上不正确。\n    $$|S_{f_1}| = 2^{n-1} + 1$$\n-   $|S_g|$：在 $2^{n-1}$ 个非负数上正确，在 $2^{n-1}-1$ 个严格负数上正确，在 $-0$ 上也正确。即对所有 $2^n$ 个输入均正确。\n    $$|S_g| = 2^{n-1} + (2^{n-1}-1) + 1 = 2^n$$\n\n因此，三种实现的正确输入数量分别为 $2^{n-1}$, $2^{n-1}+1$, 和 $2^n$。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n2^{n-1}  2^{n-1} + 1  2^{n}\n\\end{pmatrix}\n}\n$$"
        }
    ]
}