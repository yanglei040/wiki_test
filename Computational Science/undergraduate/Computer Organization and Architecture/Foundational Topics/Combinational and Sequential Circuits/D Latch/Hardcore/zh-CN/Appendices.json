{
    "hands_on_practices": [
        {
            "introduction": "要真正掌握D锁存器，我们必须分析它在时间维度上的动态行为。第一个练习是一个简单但至关重要的实践，要求你根据输入信号的变化和传播延迟来追踪输出信号。这个练习将为你理解锁存器的透明（transparent）和不透明（opaque）两种核心工作状态打下坚实的基础。",
            "id": "1968088",
            "problem": "门控D锁存器是一种基本的数字逻辑电路，它有一个数据输入（D）、一个门控输入（G）和一个输出（Q）。该锁存器的行为定义如下：\n- 当门控输入G为高电平（逻辑1）时，锁存器处于“透明”模式，输出Q跟随数据输入D的状态。\n- 当门控输入G为低电平（逻辑0）时，锁存器处于“不透明”模式，输出Q保持其最后的值，忽略D输入的任何变化。\n\n考虑该锁存器的一个具体实现，其具有统一的传播延迟 $t_{pd} = 2 \\text{ ns}$。这意味着输入（D或G）的任何导致输出Q发生变化的改变，都将在延迟 $t_{pd}$ 后才反映到输出Q上。\n\n从 $t=0$ 开始，输入D和G随时间经历一系列状态转换。初始时，在 $t=0$ 时，输出Q为低电平（逻辑0）。在 $t=0$ 时，输入D和G的状态也为低电平。随后的状态转换如下：\n\n- 在 $t=10 \\text{ ns}$ 时，输入D从低电平转换到高电平。\n- 在 $t=20 \\text{ ns}$ 时，输入G从低电平转换到高电平。\n- 在 $t=35 \\text{ ns}$ 时，输入D从高电平转换到低电平。\n- 在 $t=45 \\text{ ns}$ 时，输入D从低电平转换到高电平。\n- 在 $t=60 \\text{ ns}$ 时，输入G从高电平转换到低电平。\n- 在 $t=70 \\text{ ns}$ 时，输入D从高电平转换到低电平。\n\n你的任务是分析输出Q随时间变化的行为。计算在从 $t=0 \\text{ ns}$ 到 $t=90 \\text{ ns}$ 的时间间隔内，输出Q处于高电平状态的总时长。最终答案以纳秒为单位表示。",
            "solution": "我们建立一个传播延迟为 $t_{pd}=2\\ \\text{ns}$ 的门控D锁存器模型。锁存器的行为是：\n- 如果 $G=1$，输出在延迟 $t_{pd}$ 后跟随 $D$。\n- 如果 $G=0$，输出保持其最后的值；$D$ 的变化不会产生影响。\n- $G$ 到 $1$ 的上升沿转换导致 $Q$ 在 $t_{pd}$ 之后取 $D$ 的当前值。\n- $G$ 到 $0$ 的下降沿转换不会改变 $Q$；它只阻止来自 $D$ 的进一步传播。\n\n$t=0$ 时的初始条件：$D=0$, $G=0$, $Q=0$。\n\n按顺序分析给定的输入转换：\n\n1) 在 $t=10\\ \\text{ns}$ 时，$D:0\\to1$ 且 $G=0$。由于锁存器是不透明的，所以对 $Q$ 没有影响。\n\n2) 在 $t=20\\ \\text{ns}$ 时，$G:0\\to1$。锁存器变为透明；由于在 $t=20\\ \\text{ns}$ 时 $D=1$，$Q$ 将在延迟 $t_{pd}$ 后更新为 $1$：\n$$t=20\\ \\text{ns} \\implies Q \\text{ goes to } 1 \\text{ at } 20+2=22\\ \\text{ns}.$$\n因此，$Q$ 在 $t=22\\ \\text{ns}$ 时从 $0$ 变为 $1$。\n\n3) 在 $t=35\\ \\text{ns}$ 时，$D:1\\to0$ 且 $G=1$。输出将在 $t_{pd}$ 之后跟随变化：\n$$t=35\\ \\text{ns} \\implies Q \\text{ goes to } 0 \\text{ at } 35+2=37\\ \\text{ns}.$$\n因此，$Q$ 在 $t=37\\ \\text{ns}$ 时从 $1$ 变为 $0$。\n\n4) 在 $t=45\\ \\text{ns}$ 时，$D:0\\to1$ 且 $G=1$。输出将在 $t_{pd}$ 之后跟随变化：\n$$t=45\\ \\text{ns} \\implies Q \\text{ goes to } 1 \\text{ at } 45+2=47\\ \\text{ns}.$$\n因此，$Q$ 在 $t=47\\ \\text{ns}$ 时从 $0$ 变为 $1$。\n\n5) 在 $t=60\\ \\text{ns}$ 时，$G:1\\to0$。关闭门控不会改变 $Q$；它只是保持当前值。此时 $Q=1$，此后由于 $G=0$，$Q$ 保持为 $1$。\n\n6) 在 $t=70\\ \\text{ns}$ 时，$D:1\\to0$ 且 $G=0$。锁存器是不透明的，所以对 $Q$ 没有影响。\n\n因此，$Q=1$ 的时间区间是：\n- 从 $t=22\\ \\text{ns}$ 到 $t=37\\ \\text{ns}$，持续时间为 $37-22=15\\ \\text{ns}$。\n- 从 $t=47\\ \\text{ns}$ 到 $t=90\\ \\text{ns}$，持续时间为 $90-47=43\\ \\text{ns}$。\n\n在 $t=0\\ \\text{ns}$ 和 $t=90\\ \\text{ns}$ 之间，$Q$ 为高电平的总时间是\n$$15\\ \\text{ns} + 43\\ \\text{ns} = 58\\ \\text{ns}.$$",
            "answer": "$$\\boxed{58}$$"
        },
        {
            "introduction": "在实际系统中，锁存器并非孤立存在，它们是构成流水线等复杂电路的基本单元。本练习将视角从单个锁存器扩展到一个流水线系统，迫使我们考虑组件之间错综复杂的时间关系。通过推导最小允许时钟周期，你将学会如何处理建立时间（setup time）、保持时间（hold time）和时钟偏斜（clock skew）等关键时序约束，这是设计可靠高速电路的必备技能。",
            "id": "3631682",
            "problem": "计算机系统中的一个两级流水线由一个源数据（D）锁存器、其后的组合逻辑和一个目标 D 锁存器构成。源锁存器是电平敏感、高电平有效的，目标锁存器是电平敏感、低电平有效的。两个锁存器都由来自同一时钟（CLK）的互补相位驱动，该时钟周期为 $T$，占空比为 $\\alpha$（CLK 为高电平的时间占周期的比例等于 $\\alpha$）。高电平有效的源锁存器在 CLK 为高电平时是透明的，而低电平有效的目标锁存器在 CLK 为低电平时是透明的。假设互补相位是完美的，没有故意的非重叠时间。源锁存器和目标锁存器的时钟之间存在时钟偏斜：目标锁存器时钟的跳变比源锁存器时钟的跳变晚一个固定的时间 $s$（正数 $s$ 表示目标相位滞后于源相位）。锁存器之间的组合逻辑具有最大传播延迟 $d_{\\max}$ 和最小传播延迟 $d_{\\min}$。目标锁存器要求其输入在它关闭前至少稳定 $t_{\\text{setup}}$ 的时间，并在它关闭后至少稳定 $t_{\\text{hold}}$ 的时间。忽略锁存器在透明期间的任何内部传播延迟和任何亚稳态效应。\n\n使用电平敏感锁存器时序的第一性原理，从定义出发推导决定最小可行时钟周期 $T_{\\min}$ 的约束条件，使得在一个时钟周期内，源到目标的路径同时满足建立和保持要求。然后，根据以下参数计算 $T_{\\min}$：\n- $t_{\\text{setup}} = 80\\,\\mathrm{ps}$，\n- $t_{\\text{hold}} = 30\\,\\mathrm{ps}$，\n- $d_{\\max} = 620\\,\\mathrm{ps}$，\n- $d_{\\min} = 90\\,\\mathrm{ps}$，\n- $\\alpha = 0.4$，\n- $s = 20\\,\\mathrm{ps}$。\n\n以纳秒为单位表示 $T_{\\min}$ 的最终答案，并将答案四舍五入到四位有效数字。",
            "solution": "问题要求推导一个两级流水线的时钟周期 $T$ 的约束条件。该流水线由一个电平敏感、高电平有效的源锁存器（L1）和一个电平敏感、低电平有效的目标锁存器（L2）组成，两者之间由组合逻辑隔开。随后，必须根据给定的一组参数计算最小可行时钟周期 $T_{\\min}$。\n\n该问题已经过验证，被确定为数字逻辑时序分析中一个定义良好、科学合理的问题。\n\n首先，我们根据问题描述建立一个精确的事件时间线。我们将时间参考点 $t=0$ 定义为主时钟 CLK 的上升沿到达源锁存器 L1 的时刻。时钟的周期为 $T$，占空比为 $\\alpha$。\n\n1.  **源锁存器（L1）时序**：\n    L1 是一个高电平有效的锁存器。当其时钟输入为高电平时，它是透明的。根据我们的时间参考点，对于任意整数周期数 $n$，其时钟在区间 $[nT, nT + \\alpha T]$ 内为高电平。\n    - L1 在时间 $t = nT$ 打开（变为透明）。\n    - L1 在时间 $t = nT + \\alpha T$ 关闭（变为不透明）。\n\n2.  **目标锁存器（L2）时序**：\n    L2 是一个低电平有效的锁存器，问题陈述其在“CLK 为低电平”时是透明的。这定义了其功能行为。CLK 低电平阶段的持续时间为 $(1-\\alpha)T$。\n    存在一个时钟偏斜 $s$，目标锁存器时钟的跳变比源锁存器时钟的跳变晚一个时间 $s$。由于 $s$ 是正数，L2 处的时钟事件是延迟的。\n    - CLK 的下降沿（它启动了低电平阶段）在 L1 处发生于 $t = nT + \\alpha T$。它在 $t = nT + \\alpha T + s$ 到达 L2。这是 L2 打开的时刻。\n    - CLK 的上升沿（它结束了低电平阶段）在 L1 处发生于 $t = (n+1)T$。它在 $t = (n+1)T + s$ 到达 L2。这是 L2 关闭并锁存数据的时刻。\n    - 因此，对于给定的周期 $n$，L2 的透明窗口是 $[nT + \\alpha T + s, (n+1)T + s]$。\n\n在确定了两个锁存器的时序后，我们可以推导出两个基本的时序约束：目标锁存器 L2 的建立时间约束和保持时间约束。我们将分析单周期操作的数据路径，考虑 $n=0$ 的情况。\n\n**建立时间约束**\n\n建立时间约束确保在 L2 关闭*之前*，其输入端的数据信号至少稳定 $t_{\\text{setup}}$ 的时间。\n- L2 在其透明窗口的末尾关闭，时间为 $t_{\\text{close}} = T + s$。\n- 数据必须在不迟于 $t_{\\text{close}} - t_{\\text{setup}} = (T + s) - t_{\\text{setup}}$ 的时刻在 L2 的输入端稳定下来。\n- 现在，我们必须确定数据到达 L2 输入端的最晚可能时间。数据路径源于 L1。由于 L1 是一个透明锁存器，其输出（即组合逻辑的输入）在其整个透明阶段 $[0, \\alpha T]$ 都可能变化。一个稳定的数据值被送入组合逻辑的最晚时刻是 L1 关闭的瞬间，即 $t = \\alpha T$。\n- 该信号然后通过组合逻辑传播，其最大延迟为 $d_{\\max}$。\n- 因此，数据到达 L2 输入端的最晚时间是 $t_{\\text{arrival,max}} = \\alpha T + d_{\\max}$。\n- 为了满足建立时间要求，最晚到达时间必须早于或等于要求的建立时间点：\n$$ \\alpha T + d_{\\max} \\le (T + s) - t_{\\text{setup}} $$\n- 我们重排这个不等式以求解时钟周期 $T$：\n$$ d_{\\max} + t_{\\text{setup}} - s \\le T - \\alpha T $$\n$$ d_{\\max} + t_{\\text{setup}} - s \\le T(1 - \\alpha) $$\n- 这给出了对 $T$ 的第一个约束条件：\n$$ T \\ge \\frac{d_{\\max} + t_{\\text{setup}} - s}{1 - \\alpha} $$\n\n**保持时间约束**\n\n保持时间约束确保在 L2 关闭*之后*，其输入端的数据信号至少保持稳定 $t_{\\text{hold}}$ 的时间。\n- L2 在 $t_{\\text{close}} = T+s$ 时关闭。\n- 被锁存的数据必须在 L2 输入端保持稳定，直到至少 $t_{\\text{close}} + t_{\\text{hold}} = (T + s) + t_{\\text{hold}}$。\n- 如果来自*下一个*时钟周期的新数据到达过早，并破坏了当前正在被锁存的数据，就会发生保持时间违例。这通常被称为竞争条件。\n- 下一个周期的新数据在 L1 于 $t = T$ 再次打开时被发出。\n- 这个新数据通过现在透明的 L1（延迟可忽略不计）和组合逻辑传播。通过逻辑的最快路径延迟为 $d_{\\min}$。\n- 这个可能破坏数据的新的数据能够到达 L2 输入端的最早时间是 $t_{\\text{arrival,min}} = T + d_{\\min}$。\n- 为了满足保持时间要求，这个最早的新数据到达时间不得早于保持时间窗口关闭的时刻：\n$$ T + d_{\\min} \\ge (T + s) + t_{\\text{hold}} $$\n- 我们可以通过从两边减去 $T$ 来简化这个不等式：\n$$ d_{\\min} \\ge s + t_{\\text{hold}} $$\n这第二个约束与时钟周期 $T$ 无关。它是对电路物理参数的一个基本条件。为了使电路在任何时钟速度下都能正常工作，这个不等式必须成立。\n\n**计算 $T_{\\min}$**\n\n现在我们用给定的数值参数来评估这些约束条件：\n- $t_{\\text{setup}} = 80\\,\\mathrm{ps}$\n- $t_{\\text{hold}} = 30\\,\\mathrm{ps}$\n- $d_{\\max} = 620\\,\\mathrm{ps}$\n- $d_{\\min} = 90\\,\\mathrm{ps}$\n- $\\alpha = 0.4$\n- $s = 20\\,\\mathrm{ps}$\n\n首先，我们检查保持时间约束：\n$$ d_{\\min} \\ge s + t_{\\text{hold}} $$\n$$ 90\\,\\mathrm{ps} \\ge 20\\,\\mathrm{ps} + 30\\,\\mathrm{ps} $$\n$$ 90\\,\\mathrm{ps} \\ge 50\\,\\mathrm{ps} $$\n该条件得到满足，因此电路在物理上是可行的。\n\n因此，最小始终周期 $T_{\\min}$ 由建立时间约束决定。$T$ 能取的最小值是不等式的下界：\n$$ T_{\\min} = \\frac{d_{\\max} + t_{\\text{setup}} - s}{1 - \\alpha} $$\n代入给定值：\n$$ T_{\\min} = \\frac{620\\,\\mathrm{ps} + 80\\,\\mathrm{ps} - 20\\,\\mathrm{ps}}{1 - 0.4} $$\n$$ T_{\\min} = \\frac{700\\,\\mathrm{ps} - 20\\,\\mathrm{ps}}{0.6} $$\n$$ T_{\\min} = \\frac{680\\,\\mathrm{ps}}{0.6} $$\n$$ T_{\\min} = \\frac{6800}{6}\\,\\mathrm{ps} = \\frac{3400}{3}\\,\\mathrm{ps} $$\n$$ T_{\\min} \\approx 1133.333... \\,\\mathrm{ps} $$\n问题要求以纳秒为单位给出答案，并四舍五入到四位有效数字。\n$$ 1\\,\\mathrm{ns} = 1000\\,\\mathrm{ps} $$\n$$ T_{\\min} \\approx 1.133333... \\,\\mathrm{ns} $$\n四舍五入到四位有效数字得到：\n$$ T_{\\min} \\approx 1.133\\,\\mathrm{ns} $$\n这个值代表了流水线级能够在不发生建立时间违例的情况下正确操作的最短时钟周期。",
            "answer": "$$\\boxed{1.133 \\times 10^0}$$"
        },
        {
            "introduction": "尽管触发器（flip-flop）的设计更简单，但锁存器在性能上具有独特的优势。最后一个练习将探讨一种高级设计技巧——“时间借用”（time borrowing），这也是在高性能流水线中使用锁存器的关键原因。通过计算锁存器设计所能带来的额外时间余量，你将能定量地理解它如何容纳更长的逻辑路径，从而可能实现更高的系统性能。",
            "id": "3631751",
            "problem": "一个同步流水线最初使用上升沿触发的D型触发器来分隔组合逻辑阶段。给定该基准设计的以下参数：\n- 时钟周期为 $2.0$ ns。\n- 启动触发器的时钟到Q端延迟为 $0.10$ ns。\n- 捕获触发器的建立时间为 $0.05$ ns。\n- 从可用周期时间中减去的总时序不确定性（包括时钟偏斜和抖动）为 $0.08$ ns。\n对于此基准设计，两个触发器之间的关键路径必须满足相应的时序要求。\n\n为了尝试在过长的关键路径上实现时序收敛，该边界被重新设计，使用一对电平敏感的D锁存器（一个高电平锁存器后跟一个低电平锁存器），由一个源于相同周期的两相不重叠时钟驱动。在一个周期内，该两相时钟具有以下时序：\n- 高电平锁存器在周期开始时透明，持续时间为 $T_{\\mathrm{H}} = 0.96$ ns。\n- 在高电平透明阶段结束和低电平透明阶段开始之间，存在一个 $g = 0.01$ ns 的不重叠间隙。\n- 低电平锁存器透明，持续时间为 $T_{\\mathrm{L}} = 1.02$ ns。\n- 在下一个周期开始之前，存在一个 $g' = 0.01$ ns 的不重叠间隙，因此 $T_{\\mathrm{H}} + g + T_{\\mathrm{L}} + g' = 2.0$ ns。\n基于锁存器的边界的器件级参数如下：\n- 启动锁存器的时钟到Q端延迟为 $0.02$ ns。\n- 捕获锁存器的建立时间为 $0.04$ ns。\n- 影响有效时间窗口的最坏情况时钟不确定性被建模为启动锁存器晚开启 $0.02$ ns 和捕获锁存器早关闭 $0.02$ ns；将这两者都从可用时间预算中减去。\n\n假设最小延迟（保持时间）约束得到满足且不构成限制，并且后续阶段有足够的裕量，使得从低电平阶段借用的任何时间都不会受到进一步的约束。仅使用建立时间、时钟到Q端延迟和电平敏感度的核心定义，从第一性原理推导：\n1) 基于触发器边界下的最大允许组合路径延迟，\n2) 基于锁存器边界下的最大允许组合路径延迟，以及\n3) 基于锁存器的边界相比基于触发器的边界所提供的最大额外延迟预算 $\\Delta d$。\n\n将你的最终答案表示为以皮秒为单位的 $\\Delta d$ 的单个值，并四舍五入到三位有效数字。",
            "solution": "经评估，此问题是有效的。它在科学上基于数字逻辑时序分析的原理，问题陈述清晰，参数完整且一致，并且表述客观。我现在开始解答。\n\n问题要求比较两种情况下的最大允许组合逻辑延迟：一种是使用上升沿触发触发器的标准同步流水线，另一种是使用一对由两相时钟驱动的电平敏感锁存器的重新设计的流水线边界。\n\n**1. 触发器边界的最大允许延迟 ($d_{\\mathrm{comb,ff}}$)**\n\n对于位于两个上升沿触发的D型触发器（一个启动触发器FF1和一个捕获触发器FF2）之间的一个流水线阶段，建立时间约束决定了组合逻辑的最大延迟。在一个时钟沿由FF1发出的信号必须通过组合逻辑传播并到达FF2的输入端，在下一个时钟沿到达FF2之前，该信号必须在FF2输入端稳定至少一个建立时间 $t_{\\mathrm{setup}}$ 的时长。\n\n总时钟周期为 $T_{\\mathrm{clk}}$。路径始于一个时钟沿（假设在 $t=0$ 时刻）。数据在经过时钟到Q端延迟 $t_{\\mathrm{clk-q}}$ 后出现在FF1的输出端。然后它穿过组合逻辑，耗时 $d_{\\mathrm{comb,ff}}$。总耗时为 $t_{\\mathrm{clk-q}} + d_{\\mathrm{comb,ff}}$。该信号必须在下一个时钟沿 $T_{\\mathrm{clk}}$ 到来之前的 $t_{\\mathrm{setup}}$ 时间之前到达FF2的输入端。此外，任何时序不确定性 $t_{\\mathrm{uncert}}$（由时钟偏斜和抖动引起）都会减少时钟周期的可用部分。\n\n因此，主导时序方程为：\n$$t_{\\mathrm{clk-q}} + d_{\\mathrm{comb,ff}} + t_{\\mathrm{setup}} \\le T_{\\mathrm{clk}} - t_{\\mathrm{uncert}}$$\n求解最大允许组合延迟 $d_{\\mathrm{comb,ff,max}}$：\n$$d_{\\mathrm{comb,ff,max}} = T_{\\mathrm{clk}} - t_{\\mathrm{clk-q}} - t_{\\mathrm{setup}} - t_{\\mathrm{uncert}}$$\n代入基于触发器的设计的给定值：\n- 时钟周期, $T_{\\mathrm{clk}} = 2.0 \\text{ ns}$\n- 时钟到Q端延迟, $t_{\\mathrm{clk-q}} = 0.10 \\text{ ns}$\n- 建立时间, $t_{\\mathrm{setup}} = 0.05 \\text{ ns}$\n- 总时序不确定性, $t_{\\mathrm{uncert}} = 0.08 \\text{ ns}$\n\n$$d_{\\mathrm{comb,ff,max}} = 2.0 - 0.10 - 0.05 - 0.08 = 1.77 \\text{ ns}$$\n\n**2. 基于锁存器边界的最大允许延迟 ($d_{\\mathrm{comb,latch}}$)**\n\n在基于锁存器的设计中，边界由一个高电平锁存器（L1）后跟一个低电平锁存器（L2）组成。这种架构允许“时间借用”，即一条长的组合路径可以使用跨越两个锁存器透明阶段的时间预算。\n\n用于建立时间分析的关键路径从L1的数据输入端开始，经过L1的内部延迟，穿过组合逻辑，到达L2的数据输入端，在L2关闭之前必须满足建立时间要求。\n\n设周期开始于 $t=0$。\n- L1（高电平）从 $t=0$ 到 $t=T_{\\mathrm{H}} = 0.96 \\text{ ns}$ 是透明的。\n- L2（低电平）从 $t=T_{\\mathrm{H}} + g = 0.97 \\text{ ns}$ 到 $t=T_{\\mathrm{H}} + g + T_{\\mathrm{L}} = 1.99 \\text{ ns}$ 是透明的。\n\n信号从L1输入端传播到被L2捕获的总可用时间，跨越了从高电平阶段开始到低电平阶段结束。我们必须考虑此窗口内的所有开销。\n\n让我们建立建立时间约束的最坏情况时间线：\n- 启用L1（启动锁存器）的时钟信号可能会延迟，导致晚开启。这将启动时间向前推。假设数据在周期开始时已准备好在L1的输入端，那么L1输出端信号的最晚启动时间发生在 $t = t_{\\mathrm{uncert,open}} + t_{\\mathrm{clk-q,latch}}$。\n- 然后信号通过组合逻辑传播，耗时 $d_{\\mathrm{comb,latch}}$。\n- 到达L2输入端的到达时间为 $T_{\\mathrm{arrival}} = t_{\\mathrm{uncert,open}} + t_{\\mathrm{clk-q,latch}} + d_{\\mathrm{comb,latch}}$。\n- 禁用L2（捕获锁存器）的时钟信号可能会提前到达，缩短了可用时间。L2的有效关闭时间为 $(T_{\\mathrm{H}} + g + T_{\\mathrm{L}}) - t_{\\mathrm{uncert,close}}$。\n- 为满足建立时间约束，信号必须在此提前关闭之前的至少 $t_{\\mathrm{setup,latch}}$ 时间在L2的输入端保持稳定。\n- 要求的到达时间为 $T_{\\mathrm{required}} = (T_{\\mathrm{H}} + g + T_{\\mathrm{L}}) - t_{\\mathrm{uncert,close}} - t_{\\mathrm{setup,latch}}$。\n\n时序约束为 $T_{\\mathrm{arrival}} \\le T_{\\mathrm{required}}$：\n$$t_{\\mathrm{uncert,open}} + t_{\\mathrm{clk-q,latch}} + d_{\\mathrm{comb,latch}} \\le (T_{\\mathrm{H}} + g + T_{\\mathrm{L}}) - t_{\\mathrm{uncert,close}} - t_{\\mathrm{setup,latch}}$$\n求解最大允许组合延迟 $d_{\\mathrm{comb,latch,max}}$：\n$$d_{\\mathrm{comb,latch,max}} = (T_{\\mathrm{H}} + g + T_{\\mathrm{L}}) - t_{\\mathrm{clk-q,latch}} - t_{\\mathrm{setup,latch}} - t_{\\mathrm{uncert,open}} - t_{\\mathrm{uncert,close}}$$\n代入基于锁存器的设计的给定值：\n- 高电平透明持续时间, $T_{\\mathrm{H}} = 0.96 \\text{ ns}$\n- 不重叠间隙, $g = 0.01 \\text{ ns}$\n- 低电平透明持续时间, $T_{\\mathrm{L}} = 1.02 \\text{ ns}$\n- 锁存器时钟到Q端延迟, $t_{\\mathrm{clk-q,latch}} = 0.02 \\text{ ns}$\n- 锁存器建立时间, $t_{\\mathrm{setup,latch}} = 0.04 \\text{ ns}$\n- 晚开启不确定性, $t_{\\mathrm{uncert,open}} = 0.02 \\text{ ns}$\n- 早关闭不确定性, $t_{\\mathrm{uncert,close}} = 0.02 \\text{ ns}$\n\n首先，计算总时间窗口：$T_{\\mathrm{H}} + g + T_{\\mathrm{L}} = 0.96 + 0.01 + 1.02 = 1.99 \\text{ ns}$。\n$$d_{\\mathrm{comb,latch,max}} = 1.99 - 0.02 - 0.04 - 0.02 - 0.02 = 1.89 \\text{ ns}$$\n\n**3. 额外延迟预算 ($\\Delta d$)**\n\n基于锁存器的边界提供的额外延迟预算是两种架构的最大允许延迟之差。\n$$\\Delta d = d_{\\mathrm{comb,latch,max}} - d_{\\mathrm{comb,ff,max}}$$\n$$\\Delta d = 1.89 \\text{ ns} - 1.77 \\text{ ns} = 0.12 \\text{ ns}$$\n问题要求以皮秒（ps）为单位给出答案，其中 $1 \\text{ ns} = 1000 \\text{ ps}$。\n$$\\Delta d = 0.12 \\times 1000 \\text{ ps} = 120 \\text{ ps}$$\n最终答案要求四舍五入到三位有效数字。计算出的值恰好是 $120$，可以表示为 $1.20 \\times 10^2$，具有三位有效数字。",
            "answer": "$$\\boxed{120}$$"
        }
    ]
}