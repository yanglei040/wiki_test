{
    "hands_on_practices": [
        {
            "introduction": "在许多数字系统中，单个计数器不足以完成任务。我们常常需要将多个计数器级联起来，以实现更复杂的功能，例如生成多维坐标或计时（秒、分、时）。这个练习  将带你分析一个典型的级联计数器系统，并重点关注其中一个关键的性能瓶颈：从低位计数器到高位计数器的进位/使能信号传播所形成的关键路径。",
            "id": "3683799",
            "problem": "一个计算系统必须使用同步计数器在硬件中生成元组 $(i,j)$ 的字典序序列，其中 $j$ 是内层（变化最快）计数器，$i$ 是外层（变化较慢）计数器。对于每个固定的 $i$，该序列以每个时钟周期一个元组的速度前进，$j$ 的值从 $0, 1, \\dots, 7$ 变化。当 $j$ 在下一个时钟周期从 $7$ 翻转到 $0$ 时，$i$ 自增一。当 $i$ 从 $9$ 翻转到 $0$ 同时 $j$ 从 $7$ 翻转到 $0$ 时，序列在 $(0,0)$ 处重新开始。\n\n该设计使用两个二进制计数器，它们由馈入D型触发器（DFF）的同步组合次态逻辑实现。内层计数器 $j$ 是一个带有二进制增量器的3位同步加法计数器。外层计数器 $i$ 是一个带有二进制增量器的4位同步加法计数器，仅当一个终端计数检测器置位一个表示 $j=7$ 的信号时才被使能。$j=7$ 的终端计数检测器是一个三输入逻辑块，当且仅当 $j$ 的所有三位都为 $1$ 时置位。$i$ 计数器的使能信号是终端计数检测器输出与一个始终置位的全局使能信号的逻辑与。所有元件都由单个全局时钟同步驱动。假设时钟偏斜为零，并且保持时间约束得到满足。\n\n设以下最坏情况下的传播延迟和建立时间参数成立：\n- $j$ 计数器DFF的时钟到Q延迟为 $t_{\\mathrm{CQ},j} = 0.12\\,\\mathrm{ns}$。\n- $j$ 计数器二进制增量器的最坏情况传播延迟为 $t_{\\mathrm{inc},j} = 0.45\\,\\mathrm{ns}$。\n- $j$ 计数器DFF的建立时间为 $t_{\\mathrm{setup},j} = 0.08\\,\\mathrm{ns}$。\n- $j=7$ 终端计数检测器的最坏情况传播延迟为 $t_{\\mathrm{cmp}} = 0.20\\,\\mathrm{ns}$。\n- 馈入 $i$ 计数器的使能门控电路的最坏情况传播延迟为 $t_{\\mathrm{gate}} = 0.10\\,\\mathrm{ns}$。\n- $i$ 计数器二进制增量器的最坏情况传播延迟为 $t_{\\mathrm{inc},i} = 0.55\\,\\mathrm{ns}$。\n- $i$ 计数器DFF的建立时间为 $t_{\\mathrm{setup},i} = 0.10\\,\\mathrm{ns}$。\n\n使用关于同步时序电路时序的第一性原理，确定计数器能够可靠运行以生成正确的字典序序列的最大时钟频率 $f_{\\max}$，并考虑两个计数器中的关键路径。以 $\\mathrm{MHz}$ 为单位表示最终频率，并将答案四舍五入到四位有效数字。",
            "solution": "本题要求确定一个由两个级联计数器组成的同步数字系统的最大工作时钟频率 $f_{\\max}$。最大频率是最小时钟周期 $T_{\\min}$ 的倒数，而 $T_{\\min}$ 由电路的关键路径决定。\n\n对于同步时序电路中的任何路径，其基本时序约束是时钟周期 $T$ 必须大于或等于源触发器的时钟到Q延迟（$t_{\\mathrm{CQ}}$）、组合逻辑路径的最坏情况传播延迟（$t_{\\mathrm{comb}}$）以及目标触发器的建立时间（$t_{\\mathrm{setup}}$）的总和。\n$$T \\ge t_{\\mathrm{CQ}} + t_{\\mathrm{comb}} + t_{\\mathrm{setup}}$$\n为了求得 $T_{\\min}$，我们必须识别电路中所有相关路径，并计算它们所需的最小周期。系统的整体 $T_{\\min}$ 将是这些单独路径所需周期的最大值。\n\n该系统由两个计数器 $i$ 和 $j$ 组成。我们必须分析每个计数器内部以及计数器之间的时序路径。\n\n路径1：内层计数器 $j$ 的内部反馈回路。\n计数器 $j$ 是一个3位同步加法计数器，在每个时钟周期自增。$j$ 计数器的次态 $D_j$ 仅取决于其现态 $Q_j$。信号路径起源于 $j$ 计数器的D型触发器（DFF）的输出，传播通过二进制增量器逻辑，并且必须在满足建立时间要求的情况下到达相同DFF的输入端。\n该路径的组合逻辑延迟是 $j$ 计数器增量器的传播延迟，即 $t_{\\mathrm{comb}(j \\to j)} = t_{\\mathrm{inc},j}$。\n该路径所需的最小周期 $T_{j \\to j}$ 为：\n$$T_{j \\to j} = t_{\\mathrm{CQ},j} + t_{\\mathrm{inc},j} + t_{\\mathrm{setup},j}$$\n代入给定值：\n$$T_{j \\to j} = 0.12\\,\\mathrm{ns} + 0.45\\,\\mathrm{ns} + 0.08\\,\\mathrm{ns} = 0.65\\,\\mathrm{ns}$$\n\n路径2：从内层计数器（$j$）到外层计数器（$i$）的路径。\n外层计数器 $i$ 仅在 $j=7$ 的条件使其使能时才自增。这创建了一条从 $j$ 计数器的DFF开始，到 $i$ 计数器的DFF结束的信号路径。在级联计数器设计中，这条路径通常是关键路径。此路径在一个时钟周期内的事件序列如下：\n1. 在一个时钟沿之后，$j$ 计数器DFF的输出 $Q_j$ 变得稳定。这需要 $t_{\\mathrm{CQ},j}$ 的时间。\n2. $Q_j$ 的值由终端计数检测器处理以检查是否 $j=7$。此过程的传播延迟为 $t_{\\mathrm{cmp}}$。\n3. 检测器的输出通过使能门控逻辑传播。其延迟为 $t_{\\mathrm{gate}}$。\n4. 产生的使能信号被馈入 $i$ 计数器的二进制增量器逻辑。该逻辑计算 $i$ 的次态。问题陈述了增量器的延迟为 $t_{\\mathrm{inc},i}$。这意味着一个串行延迟链，其中使能信号必须在增量器输出有效之前解析完成。\n5. 最终计算出的 $i$ 的次态 $D_i$ 必须在下一个时钟沿之前到达 $i$ 计数器DFF的输入端，并稳定持续建立时间 $t_{\\mathrm{setup},i}$。\n\n这个计数器间路径的总组合逻辑延迟是链中各组件延迟的总和：$t_{\\mathrm{comb}(j \\to i)} = t_{\\mathrm{cmp}} + t_{\\mathrm{gate}} + t_{\\mathrm{inc},i}$。\n因此，该路径所需的最小周期 $T_{j \\to i}$ 为：\n$$T_{j \\to i} = t_{\\mathrm{CQ},j} + t_{\\mathrm{cmp}} + t_{\\mathrm{gate}} + t_{\\mathrm{inc},i} + t_{\\mathrm{setup},i}$$\n代入给定值：\n$$T_{j \\to i} = 0.12\\,\\mathrm{ns} + 0.20\\,\\mathrm{ns} + 0.10\\,\\mathrm{ns} + 0.55\\,\\mathrm{ns} + 0.10\\,\\mathrm{ns} = 1.07\\,\\mathrm{ns}$$\n\n$i$ 计数器本身也存在一个反馈路径 ($Q_i \\to D_i$)。该路径的延迟将是 $t_{\\mathrm{CQ},i} + t_{\\mathrm{inc},i} + t_{\\mathrm{setup},i}$。尽管未提供 $t_{\\mathrm{CQ},i}$，但问题的构造逻辑表明，计数器间的路径是关键路径。该使能信号从时钟沿传播到 $i$ 计数器逻辑所需的时间为 $t_{\\mathrm{CQ},j} + t_{\\mathrm{cmp}} + t_{\\mathrm{gate}} = 0.12 + 0.20 + 0.10 = 0.42\\,\\mathrm{ns}$。假设 $t_{\\mathrm{CQ},i}$ 有一个合理的值（例如，与 $t_{\\mathrm{CQ},j} = 0.12\\,\\mathrm{ns}$ 相当），来自 $j$ 的使能信号是最后到达 $i$ 计数器次态逻辑的输入，这证实了从 $j$ 开始的路径是更新 $i$ 的关键路径。\n\n为确保整个系统的可靠运行，时钟周期 $T$ 必须大于或等于所有路径的延迟。因此，最小时钟周期 $T_{\\min}$ 是各个路径延迟的最大值。\n$$T_{\\min} = \\max(T_{j \\to j}, T_{j \\to i})$$\n$$T_{\\min} = \\max(0.65\\,\\mathrm{ns}, 1.07\\,\\mathrm{ns}) = 1.07\\,\\mathrm{ns}$$\n\n最大时钟频率 $f_{\\max}$ 是最小时钟周期的倒数：\n$$f_{\\max} = \\frac{1}{T_{\\min}} = \\frac{1}{1.07\\,\\mathrm{ns}} = \\frac{1}{1.07 \\times 10^{-9}\\,\\mathrm{s}}$$\n$$f_{\\max} \\approx 934579439.25\\,\\mathrm{Hz}$$\n转换为兆赫兹（$\\mathrm{MHz}$）：\n$$f_{\\max} \\approx 934.57943925\\,\\mathrm{MHz}$$\n问题要求答案四舍五入到四位有效数字。\n$$f_{\\max} \\approx 934.6\\,\\mathrm{MHz}$$",
            "answer": "$$\\boxed{934.6}$$"
        },
        {
            "introduction": "计数器不仅能进行简单的线性递增或递减，通过设计精巧的控制逻辑，它们还可以实现各种自定义的计数序列。本练习  旨在锻炼你将高层次的行为描述（例如，一个先递增再递减的“镜像”序列）转化为具体门级布尔表达式的能力。你将专注于设计决定计数器行为方向的核心控制信号，这是实现有限状态机的基本功。",
            "id": "3683847",
            "problem": "同步计数器是一种时序电路，其状态向量在每个时钟有效沿上根据由组合逻辑导出的确定性下一状态函数同时更新。考虑设计一个围绕中点镜像对称的同步加/减计数器，它无限地产生序列 $0,1,2,\\dots,M-1,M,M-1,\\dots,1,0,1,\\dots$，其中 $M$ 是一个固定的正整数，状态变量 $Q$ 以二进制形式存储当前计数值。设该计数器使用 $n$ 个触发器，因此当前状态为 $Q=(q_{n-1},\\dots,q_{0})$，其中 $q_{i}\\in\\{0,1\\}$，并设 $M$ 的二进制表示为 $(m_{n-1},\\dots,m_{0})$，其中 $m_{i}\\in\\{0,1\\}$。该计数器有一个内部的一位模式变量 $d\\in\\{0,1\\}$，用于指示计数方向，其中 $d=1$ 表示下一状态逻辑将增加 $Q$ 的值，$d=0$ 表示将减少 $Q$ 的值。为了实现镜像序列，计数方向必须恰好在端点处翻转：即当计数器处于 $Q=M$ 且 $d=1$（当前向上计数）时，以及当计数器处于 $Q=0$ 且 $d=0$（当前向下计数）时。端点由相等比较器检测，这些比较器是使用当前状态位和常量 $M$ 通过逻辑电路实现的。\n\n从同步时序电路、布尔逻辑和二进制向量之间相等性检测的基本定义出发，推导出一个用于翻转控制信号 $T(Q,d;M)$ 的单一闭式布尔表达式。该信号当且仅当为了实现所述的镜像序列，计数方向必须在下一个时钟沿翻转时，才被置为有效。您的表达式必须仅使用作用于变量 $q_{i}$、$m_{i}$ 和 $d$ 的逻辑运算符 $\\land$、$\\lor$ 和 $\\lnot$ 来书写，并且不得调用任何更高层次的比较器或算术模块。请将您的最终答案表示为单一的解析表达式。不需要数值舍入，也不涉及物理单位。假设 $n=\\lceil \\log_{2}(M+1)\\rceil$，以便 $Q$ 可以表示从 $0$ 到 $M$ 的所有状态。",
            "solution": "问题要求为一个同步加/减计数器推导出一个翻转控制信号的单一闭式布尔表达式，该信号记为 $T(Q,d;M)$。该信号必须当且仅当计数器的方向变量 $d$ 需要在下一个时钟周期翻转时才被置为有效（即值为逻辑真或 $1$）。计数器状态由一个 $n$ 位向量 $Q=(q_{n-1},\\dots,q_{0})$ 表示，最大计数值是一个 $n$ 位常量 $M=(m_{n-1},\\dots,m_{0})$。\n\n问题明确了方向必须翻转的精确条件：\n1. 当计数器达到其最大值 $Q=M$ 并且当前处于“向上”计数模式（$d=1$）时。\n2. 当计数器达到其最小值 $Q=0$ 并且当前处于“向下”计数模式（$d=0$）时。\n\n这两个条件是互斥的，因为计数器不能同时处于 $Q=M$（其中 $M$ 是正整数）和 $Q=0$。因此，翻转信号 $T$ 是两个项的逻辑析取（OR），每一项对应于这些条件之一。\n\n设 $C_M$ 是当且仅当 $Q=M$ 时值为真的布尔表达式。\n设 $C_0$ 是当且仅当 $Q=0$ 时值为真的布尔表达式。\n当 $d=1$ 时，方向为“向上”，这对应于布尔变量 $d$ 为真。\n当 $d=0$ 时，方向为“向下”，这对应于布尔变量 $d$ 为假，或 $\\lnot d$。\n\n$T$ 的逻辑规范可以写为：\n$$T = (C_M \\land d) \\lor (C_0 \\land \\lnot d)$$\n\n下一步是仅使用位变量 $q_i$、常量位 $m_i$ 以及规定的基本逻辑运算符 $\\land$ (AND)、$\\lor$ (OR) 和 $\\lnot$ (NOT) 来推导 $C_M$ 和 $C_0$ 的显式布尔表达式。\n\n首先，我们推导表示条件 $Q=M$ 的表达式 $C_M$。两个 $n$ 位向量相等当且仅当它们的所有对应位都相等。也就是说，$Q=M$ 为真当且仅当对于所有从 $0$ 到 $n-1$ 的 $i$ 都有 $q_i = m_i$。两个位 $q_i$ 和 $m_i$ 的逻辑等价性由同或（XNOR）函数捕获。仅使用允许的运算符，$q_i$ 和 $m_i$ 的同或运算表示为：\n$$(q_i \\land m_i) \\lor (\\lnot q_i \\land \\lnot m_i)$$\n如果两个位都为 $1$ 或者都为 $0$，则该表达式为真。为了使整个向量 $Q$ 和 $M$ 相等，这个条件必须对所有位位置同时成立。这需要对各个按位相等的表达式进行逻辑合取（AND）。因此，$C_M$ 的表达式为：\n$$C_M = \\bigwedge_{i=0}^{n-1} \\left( (q_i \\land m_i) \\lor (\\lnot q_i \\land \\lnot m_i) \\right)$$\n\n其次，我们推导表示条件 $Q=0$ 的表达式 $C_0$。数字 $0$ 的二进制表示是一个所有位都为 $0$ 的 $n$ 位向量。因此，$Q=0$ 为真当且仅当对于所有从 $0$ 到 $n-1$ 的 $i$ 都有 $q_i=0$。条件 $q_i=0$ 的布尔表达式就是 $\\lnot q_i$。为了使整个向量 $Q$ 为零，所有位必须同时为零。这表示为各个 $\\lnot q_i$ 项的逻辑合取：\n$$C_0 = \\bigwedge_{i=0}^{n-1} \\lnot q_i$$\n\n最后，我们将 $C_M$ 和 $C_0$ 的表达式代回到 $T$ 的主方程中。\n\n第一个条件（在 $M$ 处且向上计数）的项是：\n$$C_M \\land d = \\left( \\bigwedge_{i=0}^{n-1} \\left( (q_i \\land m_i) \\lor (\\lnot q_i \\land \\lnot m_i) \\right) \\right) \\land d$$\n\n第二个条件（在 $0$ 处且向下计数）的项是：\n$$C_0 \\land \\lnot d = \\left( \\bigwedge_{i=0}^{n-1} \\lnot q_i \\right) \\land \\lnot d$$\n\n翻转信号 $T(Q,d;M)$ 的完整表达式是这两项的析取。根据 $\\land$ 运算符的结合律和交换律，我们可以用一个清晰的形式来呈现最终表达式。\n\n$$T(Q,d;M) = \\left( d \\land \\bigwedge_{i=0}^{n-1} \\left( (q_i \\land m_i) \\lor (\\lnot q_i \\land \\lnot m_i) \\right) \\right) \\lor \\left( \\lnot d \\land \\bigwedge_{i=0}^{n-1} \\lnot q_i \\right)$$\n\n这个表达式代表了一个2选1多路复用器结构，其中选择器是方向位 $d$。如果 $d=1$，$T$ 在 $Q=M$ 时被置为有效。如果 $d=0$（$ \\lnot d = 1$），$T$ 在 $Q=0$ 时被置为有效。这直接实现了问题陈述中指定的逻辑，它是从第一性原理出发，仅使用允许的基本元件构建的。",
            "answer": "$$\n\\boxed{\\left( d \\land \\bigwedge_{i=0}^{n-1} \\left( (q_i \\land m_i) \\lor (\\lnot q_i \\land \\lnot m_i) \\right) \\right) \\lor \\left( \\lnot d \\land \\bigwedge_{i=0}^{n-1} \\lnot q_i \\right)}\n$$"
        },
        {
            "introduction": "一个计数器的理论设计只是成功的一半，确保它能在预期的速度下可靠工作才是最终的挑战。这个综合性练习  将引导你对一个两位BCD（二进制编码的十进制）计数器进行全面的时序分析。你必须精确计算建立时间、保持时间、逻辑门延迟和时钟偏移等所有因素，以确定电路的最高安全工作频率，这是数字电路性能优化的核心环节。",
            "id": "3683801",
            "problem": "一个两位十进制的二进制编码十进制 (BCD) 计数器被实现为一个同步计数器，使用上升沿触发的 D 型触发器 (DFFs)。最低有效位 (LSD) 是一个模$10$计数器，其下一个状态完全由其当前状态计算得出。最高有效位 (MSD) 也是一个模$10$计数器，其下一个状态逻辑使用一个同步进位。该进位是通过解码 LSD 的当前状态是否等于 $9$ 来生成的；然后该进位用于使 MSD 递增。所有触发器共享同一个时钟，并且多位数的递增在时钟沿必须是无毛刺的。\n\n以下器件和逻辑特性成立：\n- 触发器时序参数：时钟到Q端最大延迟 $t_{\\mathrm{clk\\rightarrow Q,max}} = 0.30\\,\\mathrm{ns}$，时钟到Q端最小延迟 $t_{\\mathrm{clk\\rightarrow Q,min}} = 0.18\\,\\mathrm{ns}$，建立时间 $t_{\\mathrm{setup}} = 0.20\\,\\mathrm{ns}$，保持时间 $t_{\\mathrm{hold}} = 0.10\\,\\mathrm{ns}$。\n- 发射触发器和捕获触发器之间的最坏情况全局时钟偏斜为 $0.04\\,\\mathrm{ns}$。对于建立时间分析，假设捕获时钟沿比发射时钟沿早到 $0.04\\,\\mathrm{ns}$。对于保持时间分析，假设捕获时钟沿比发射时钟沿晚到 $0.04\\,\\mathrm{ns}$。\n- 组合逻辑由双输入门构成。每个双输入门的最大传播延迟为 $0.12\\,\\mathrm{ns}$，最小传播延迟为 $0.06\\,\\mathrm{ns}$。\n- 从触发器输出到相应触发器输入的 LSD 次态逻辑具有最长为 $5$ 个双输入门级的路径和最短为 $2$ 个双输入门级的路径。\n- 从 LSD 到 MSD 的同步进位路径由一个9值解码器和 MSD 增量门控组成。从 LSD 触发器输出到 MSD 触发器输入，最长路径包含 $6$ 个双输入门级，最短路径包含 $4$ 个双输入门级。\n\n从同步时序逻辑的基本定义（触发器的建立和保持时间要求，以及同步次态逻辑由现态信号计算的概念）出发，确定最大时钟频率 $f_{\\max}$，该频率需保证：\n1. LSD 和 MSD 都满足建立时间要求，以实现正确的状态转换。\n2. LSD 和 MSD 都满足保持时间要求，以避免意外的状态变化。\n3. 多位数递增在有效时钟沿是无毛刺的（即，由于从 LSD 现态计算出的同步进位，所有到 MSD 的所需输入在时钟沿之前足够长的时间内是稳定的）。\n\n将您的最终答案 $f_{\\max}$ 以 $\\mathrm{MHz}$ 为单位表示，并四舍五入到四位有效数字。",
            "solution": "问题要求确定一个同步两位十进制 BCD 计数器的最大时钟频率 $f_{\\max}$。该频率受到数字逻辑的时序约束限制，特别是其构建中所使用的 D 型触发器 (DFF) 的建立时间和保持时间。我们必须分析关键时序路径以找到最小时钟周期 $T_{\\min}$，并由此推导出 $f_{\\max} = 1/T_{\\min}$。\n\n该分析涉及同步时序电路的两个基本时序要求。\n\n首先，建立时间要求确保触发器输入端的数据在有效时钟沿到达之前的最小持续时间 $t_{\\mathrm{setup}}$ 内保持稳定。对于发射触发器和捕获触发器之间的数据路径，时钟周期 $T$ 必须足够长，以容纳发射触发器的时钟到Q端延迟、它们之间组合逻辑的传播延迟以及捕获触发器的建立时间。时钟偏斜 $t_{\\mathrm{skew}}$，即时钟到达不同触发器的时间差异，也必须考虑在内。问题指定，对于建立时间分析，捕获时钟到达较早，这是最坏情况，因为它减少了可用于数据传播的时间。这导致建立时间约束：\n$$T \\ge t_{\\mathrm{clk\\rightarrow Q,max}} + t_{\\mathrm{logic,max}} + t_{\\mathrm{setup}} + t_{\\mathrm{skew}}$$\n其中 $t_{\\mathrm{clk\\rightarrow Q,max}}$ 是最大时钟到Q端延迟，而 $t_{\\mathrm{logic,max}}$ 是组合逻辑路径的最大延迟。最小时钟周期 $T_{\\min}$ 由右侧总和最大的路径决定。\n\n其次，保持时间要求确保触发器输入端的数据在有效时钟沿之后保持稳定的最小持续时间 $t_{\\mathrm{hold}}$。这可以防止当前周期的新数据传播过快，从而在下一个周期的保持窗口期间破坏下一级的输入。条件是最小的时钟到Q端延迟 $t_{\\mathrm{clk\\rightarrow Q,min}}$ 和最小逻辑路径延迟 $t_{\\mathrm{logic,min}}$ 的总和必须大于或等于保持时间。问题指定，对于保持时间分析，捕获时钟到达较晚，这是最坏情况，因为它增加了保持时间违例的风险。因此，偏斜被加到保持时间要求中：\n$$t_{\\mathrm{clk\\rightarrow Q,min}} + t_{\\mathrm{logic,min}} \\ge t_{\\mathrm{hold}} + t_{\\mathrm{skew}}$$\n这个不等式必须对所有路径都满足。与建立时间约束不同，保持时间违例不能通过增加时钟周期来修复。\n\n现在我们将这些原则应用于 BCD 计数器中的指定路径。\n\n给定的参数是：\n- $t_{\\mathrm{clk\\rightarrow Q,max}} = 0.30\\,\\mathrm{ns}$\n- $t_{\\mathrm{clk\\rightarrow Q,min}} = 0.18\\,\\mathrm{ns}$\n- $t_{\\mathrm{setup}} = 0.20\\,\\mathrm{ns}$\n- $t_{\\mathrm{hold}} = 0.10\\,\\mathrm{ns}$\n- $t_{\\mathrm{skew}} = 0.04\\,\\mathrm{ns}$\n- $t_{\\mathrm{gate,max}} = 0.12\\,\\mathrm{ns}$\n- $t_{\\mathrm{gate,min}} = 0.06\\,\\mathrm{ns}$\n\n**建立时间分析（以确定 $T_{\\min}$）**\n\n我们必须分析最长延迟路径以找到总体的最小时钟周期。\n\n1.  **LSD到LSD路径**：此路径位于最低有效位计数器的内部。最长逻辑路径包含 $5$ 个门级。\n    此路径的最大逻辑延迟为：\n    $$t_{\\mathrm{logic,max,LSD}} = 5 \\times t_{\\mathrm{gate,max}} = 5 \\times 0.12\\,\\mathrm{ns} = 0.60\\,\\mathrm{ns}$$\n    此路径所需的最小时钟周期 $T_{\\mathrm{LSD}}$ 是：\n    $$T_{\\mathrm{LSD}} \\ge t_{\\mathrm{clk\\rightarrow Q,max}} + t_{\\mathrm{logic,max,LSD}} + t_{\\mathrm{setup}} + t_{\\mathrm{skew}}$$\n    $$T_{\\mathrm{LSD}} \\ge 0.30\\,\\mathrm{ns} + 0.60\\,\\mathrm{ns} + 0.20\\,\\mathrm{ns} + 0.04\\,\\mathrm{ns} = 1.14\\,\\mathrm{ns}$$\n\n2.  **LSD到MSD路径**：此路径表示从最低有效位到最高有效位的同步进位传播。问题陈述中“多位数递增在有效时钟沿必须是无毛刺的”这一条件正是进行此建立时间分析的动机。最长逻辑路径包含 $6$ 个门级。\n    此路径的最大逻辑延迟为：\n    $$t_{\\mathrm{logic,max,LSD\\rightarrow MSD}} = 6 \\times t_{\\mathrm{gate,max}} = 6 \\times 0.12\\,\\mathrm{ns} = 0.72\\,\\mathrm{ns}$$\n    此路径所需的最小时钟周期 $T_{\\mathrm{LSD\\rightarrow MSD}}$ 是：\n    $$T_{\\mathrm{LSD\\rightarrow MSD}} \\ge t_{\\mathrm{clk\\rightarrow Q,max}} + t_{\\mathrm{logic,max,LSD\\rightarrow MSD}} + t_{\\mathrm{setup}} + t_{\\mathrm{skew}}$$\n    $$T_{\\mathrm{LSD\\rightarrow MSD}} \\ge 0.30\\,\\mathrm{ns} + 0.72\\,\\mathrm{ns} + 0.20\\,\\mathrm{ns} + 0.04\\,\\mathrm{ns} = 1.26\\,\\mathrm{ns}$$\n\n整个系统的最小时钟周期 $T_{\\min}$ 必须满足所有路径的要求。因此，它是各个最小周期中的最大值：\n$$T_{\\min} = \\max(T_{\\mathrm{LSD}}, T_{\\mathrm{LSD\\rightarrow MSD}}) = \\max(1.14\\,\\mathrm{ns}, 1.26\\,\\mathrm{ns}) = 1.26\\,\\mathrm{ns}$$\n\n**保持时间分析（以验证设计有效性）**\n\n我们必须验证最短逻辑路径是否满足保持时间约束。\n\n1.  **LSD到LSD路径**：最短逻辑路径包含 $2$ 个门级。\n    此路径的最小逻辑延迟为：\n    $$t_{\\mathrm{logic,min,LSD}} = 2 \\times t_{\\mathrm{gate,min}} = 2 \\times 0.06\\,\\mathrm{ns} = 0.12\\,\\mathrm{ns}$$\n    我们检查保持条件：\n    $$t_{\\mathrm{clk\\rightarrow Q,min}} + t_{\\mathrm{logic,min,LSD}} \\ge t_{\\mathrm{hold}} + t_{\\mathrm{skew}}$$\n    $$0.18\\,\\mathrm{ns} + 0.12\\,\\mathrm{ns} \\ge 0.10\\,\\mathrm{ns} + 0.04\\,\\mathrm{ns}$$\n    $$0.30\\,\\mathrm{ns} \\ge 0.14\\,\\mathrm{ns}$$\n    条件得到满足。此路径上没有保持时间违例。\n\n2.  **LSD到MSD路径**：最短逻辑路径包含 $4$ 个门级。\n    此路径的最小逻辑延迟为：\n    $$t_{\\mathrm{logic,min,LSD\\rightarrow MSD}} = 4 \\times t_{\\mathrm{gate,min}} = 4 \\times 0.06\\,\\mathrm{ns} = 0.24\\,\\mathrm{ns}$$\n    我们检查保持条件：\n    $$t_{\\mathrm{clk\\rightarrow Q,min}} + t_{\\mathrm{logic,min,LSD\\rightarrow MSD}} \\ge t_{\\mathrm{hold}} + t_{\\mathrm{skew}}$$\n    $$0.18\\,\\mathrm{ns} + 0.24\\,\\mathrm{ns} \\ge 0.10\\,\\mathrm{ns} + 0.04\\,\\mathrm{ns}$$\n    $$0.42\\,\\mathrm{ns} \\ge 0.14\\,\\mathrm{ns}$$\n    条件得到满足。此路径上没有保持时间违例。\n\n由于建立时间和保持时间要求都得到满足，且前者决定了最小时钟周期，我们现在可以计算最大时钟频率。\n\n**最大时钟频率计算**\n\n最大时钟频率 $f_{\\max}$ 是最小时钟周期 $T_{\\min}$ 的倒数：\n$$f_{\\max} = \\frac{1}{T_{\\min}} = \\frac{1}{1.26\\,\\mathrm{ns}} = \\frac{1}{1.26 \\times 10^{-9}\\,\\mathrm{s}}$$\n$$f_{\\max} \\approx 793.65079...\\times 10^6\\,\\mathrm{Hz} = 793.65079...\\,\\mathrm{MHz}$$\n\n问题要求结果以 $\\mathrm{MHz}$ 为单位，并四舍五入到四位有效数字。\n$$f_{\\max} \\approx 793.7\\,\\mathrm{MHz}$$",
            "answer": "$$\\boxed{793.7}$$"
        }
    ]
}