## 引言
在追求更高性能、更轻量化和更具创新性的工程设计中，我们常常面临一个根本性问题：在给定的设计空间和约束条件下，如何找到材料的最佳[分布](@entry_id:182848)方案？传统的依赖经验和直觉的设计方法，在面对日益复杂的需求时已显不足。拓扑优化应运而生，它作为一种强大的[计算设计](@entry_id:167955)方法，能够自动地、系统性地生成全新的、往往是反直觉的高效结构形态，从而突破了传统设计的局限。

本文旨在为读者提供一个关于[拓扑优化](@entry_id:147162)与[材料分布方法](@entry_id:164762)的全面而深入的理解。我们将从基本原理出发，逐步探索其在各个领域的应用，并最终通过实践加深认识。在**“原理与机制”**一章中，我们将深入剖析其数学基础，重点讲解应用最广的[SIMP方法](@entry_id:165988)，并探讨[网格依赖性](@entry_id:198563)等关键数值挑战及其解决方案。接下来，在**“应用与跨学科连接”**一章中，我们将展示拓扑优化的惊人通用性，看它如何从结构工程扩展到热流科学、[声学](@entry_id:265335)、电磁学乃至网络[系统优化](@entry_id:262181)等多个领域。最后，通过**“动手实践”**部分，读者将有机会将理论应用于具体问题，巩固所学知识。通过这三章的学习，您将掌握这一前沿设计方法的核心思想，并了解其在解决复杂工程与科学问题中的巨大潜力。

## 原理与机制

本章旨在深入探讨[拓扑优化](@entry_id:147162)的核心原理与关键机制。在前一章介绍其背景与应用之后，我们将系统地剖析[拓扑优化](@entry_id:147162)的数学框架、主流的[材料分布方法](@entry_id:164762)、其固有的数值挑战，以及为克服这些挑战而发展的先进技术。本章将为读者构建一个坚实的理论基础，以便理解和应用[拓扑优化](@entry_id:147162)解决实际工程问题。

### [结构优化](@entry_id:176910)的分类：尺寸、形状与拓扑

在进入拓扑优化的具体机制之前，首先需要将其置于[结构优化](@entry_id:176910)的宏观框架内。[结构优化](@entry_id:176910)通常可分为三个主要类别：**[尺寸优化](@entry_id:167663) (sizing optimization)**、**[形状优化](@entry_id:170695) (shape optimization)** 和 **[拓扑优化](@entry_id:147162) (topology optimization)**。这三类问题的本质区别在于其设计变量的定义、对物理域允许的变换类型，以及为保证解的存在性所需的数学正则性要求 。

**[尺寸优化](@entry_id:167663)** 是这三类问题中限制最强的一种。在此类问题中，结构的物理域 $\Omega$ 是固定的，设计变量通常是定义在域 $\Omega$ 上的一个标量场 $\theta(x)$，例如板的厚度或梁的[截面](@entry_id:154995)尺寸。优化的目标是在满足一定约束（如总体积）的前提下，通过调整这些尺寸参数来改善结构性能。从数学上看，设计空间通常是 $L^{\infty}(\Omega)$ 中的一个[有界集](@entry_id:157754)，例如 $0  \theta_{\min} \le \theta(x) \le \theta_{\max}$。解的存在性通常可以通过 $L^{\infty}(\Omega)$ 空间中的弱*紧性（[Banach-Alaoglu定理](@entry_id:140074)）以及目标泛函（如柔度）在此拓扑下的序列下半连续性来保证 。

**[形状优化](@entry_id:170695)** 则更进一步，它允许结构的边界发生变形，但不能改变其拓扑结构。这意味着不允许产生新的孔洞，也不能合并已有的孔洞。设计变量可以被看作是一个作用于参考域边界的形变场 $\Phi$。然而，不受约束的[形状优化](@entry_id:170695)问题通常是**不适定 (ill-posed)** 的，其解序列的边界可能产生无限精细的[振荡](@entry_id:267781)。为了确保解的存在性，必须对允许的形状集合施加正则性约束，例如限制形状的周长或要求其属于具有一致有界周长的集合。这些约束保证了设计集在 $L^1(D)$ 拓扑中的紧性，从而能够应用变分法的直接方法证明解的存在性 。

**拓扑优化** 是这三类问题中自由度最高的。它允许材料在给定的设计域 $D$ 内任意[分布](@entry_id:182848)，可以自由地生成、合并或消除孔洞和连接。这使得[拓扑优化](@entry_id:147162)能够发现全新的、非直观的结构构型。然而，这种极高的自由度也带来了最严峻的数学挑战。与[形状优化](@entry_id:170695)类似，经典的0-1（材料/无材料）提法是不适定的。为了解决这个问题，通常需要进行**松弛 (relaxation)**，即引入一个连续的**伪密度场 (pseudo-density field)** $\rho(x) \in [0, 1]$ 作为设计变量。即便如此，问题依然可能不适定，解序列可能出现无限精细的微结构（称为“抖振”或“chattering”）。因此，必须引入额外的空间正则化，例如对密度场的总变分（$BV$ 范数）或其梯度（$H^1$ 范数）施加约束，以确保设计空间的紧性并获得有意义、可制造的解 。

### [拓扑优化](@entry_id:147162)问题的数学表述

明确了拓扑优化的定位后，我们来形式化其数学表述。一个典型的拓扑优化问题包含三个核心要素：**设计变量 (design variables)**、**[目标函数](@entry_id:267263) (objective function)** 和 **约束条件 (constraints)**。

**设计变量** 是优化算法在求解过程中直接控制和修改的量。在最常见的密度法中，基本的设计变量就是伪密度场 $\rho(\mathbf{x})$，它在整个设计域 $\Omega$ 上定义。$\rho(\mathbf{x})=1$ 代表实体材料，而 $\rho(\mathbf{x})=0$ 代表空洞 。

与设计变量相对的是**问题参数 (parameters)**。这些参数在优化开始前就已给定，并在过程中保持不变。它们定义了问题的物理场景和要求。例如，在一个热-机耦合的支架设计问题中，施加的机械载荷 $\mathbf{F}$ 及其作用点 $\mathbf{x}_F$、热源功率 $Q$ 及其位置 $\mathbf{x}_Q$、实体材料的[杨氏模量](@entry_id:140430) $E_0$ 和[热导率](@entry_id:147276) $k_0$，以及允许使用的材料总体积上限 $V_{max}$，都属于问题参数 。

**[目标函数](@entry_id:267263)** 是我们希望最大化或最小化的性能指标。在结构设计中，最常用的目标是最小化结构的**柔度 (compliance)**，它度量了结构在载荷作用下的总变形程度，等价于最大化结构的整体刚度。

**约束条件** 限制了设计的可行范围。最基本的约束是**体积约束**，即所用材料的总体积不能超过一个给定的上限 $V_{max}$。此外，还可能包含其他性能约束，例如局部应力、位移或固有频率的限制。

最后，描述系统物理行为的**状态方程 (state equations)**，如线弹性方程或[热传导方程](@entry_id:194763)，也作为隐式约束存在。这些[偏微分方程](@entry_id:141332)的解（如位移场 $\mathbf{u}(\mathbf{x})$ 或温度场 $T(\mathbf{x})$）是**状态变量 (state variables)**。它们的值由设计变量 $\rho(\mathbf{x})$ 决定，并最终决定了目标函数和性能约束的值。[优化算法](@entry_id:147840)不直接控制状态变量，而是通过改变设计变量来间接影响它们 。

### 基于密度的方法：固体各向同性材料惩罚模型 (SIMP)

在众多拓扑优化方法中，**固体[各向同性材料](@entry_id:170678)惩罚模型 (Solid Isotropic Material with Penalization, SIMP)** 因其概念简单、实现高效而得到最广泛的应用。[SIMP方法](@entry_id:165988)的核心思想是通过一个简单的[幂律](@entry_id:143404)[插值函数](@entry_id:262791)，将离散的0-1材料选择问题松弛为一个连续的伪密度变量问题。

在基于有限元离散的框架下，设计域被划分为多个单元，每个单元 $e$ 被赋予一个常数伪密度 $\rho_e \in [0, 1]$。该单元的材料属性（通常是[杨氏模量](@entry_id:140430) $E$）被建模为密度的函数。一个标准的SIMP插值格式如下 ：
$$
E(\rho_e) = E_{\min} + \rho_e^{p}\,(E_0 - E_{\min})
$$
其中，$E_0$ 是实体材料的[杨氏模量](@entry_id:140430)，$\rho_e=1$ 时 $E(1) = E_0$。$E_{\min}$ 是一个很小的正值，代表“空洞”区域的[杨氏模量](@entry_id:140430)。$p$ 是一个大于1的惩罚因子。

#### SIMP模型的核心参数

理解[SIMP方法](@entry_id:165988)的关键在于理解其核心参数 $E_0$, $E_{\min}$ 和 $p$ 的物理意义和数值作用。

##### 材料插值与[数值稳定性](@entry_id:146550)

$E_0$ 的意义非常直观，它就是用于构建结构的基体材料的[杨氏模量](@entry_id:140430)，代表了[材料刚度](@entry_id:158390)的上限 。

$E_{\min}$ 的引入则主要是出于**数值稳定性 (numerical stability)** 的考虑。在有限元分析中，[全局刚度矩阵](@entry_id:138630) $\mathbf{K}$ 是由所有[单元刚度矩阵](@entry_id:139369) $\mathbf{K}_e$ 组装而成。如果一个单元的密度 $\rho_e$ 为0，且其[杨氏模量](@entry_id:140430)也为0，那么其[单元刚度矩阵](@entry_id:139369)将是零矩阵。如果设计中出现一片由零刚度单元组成的区域，可能会导致[全局刚度矩阵](@entry_id:138630) $\mathbf{K}$ 变得奇异或严重病态，从而使得[线性方程组](@entry_id:148943) $\mathbf{K}(\rho)\,\mathbf{u} = \mathbf{f}$ 无法求解。为了避免这种情况，SIMP模型引入了一个小的正[杨氏模量](@entry_id:140430) $E_{\min}$ 赋予名义上的“空洞”单元（即 $\rho_e=0$ 的单元）。这种处理方式被称为**替代材料 (ersatz material)** 模型。它保证了即使在密度为0时，单元仍具有微小的刚度，从而确保[全局刚度矩阵](@entry_id:138630)始终是正定的（在施加了恰当的[位移边界条件](@entry_id:203261)以消除[刚体运动](@entry_id:193355)后） 。

然而，这种做法也带来了代价。它在结构中引入了两种刚度差异极大的材料：刚度为 $E_0$ 的实体材料和刚度为 $E_{\min}$ 的替代材料。这会导致[全局刚度矩阵](@entry_id:138630)的**[条件数](@entry_id:145150) (condition number)** 急剧恶化。刚度[矩阵的条件数](@entry_id:150947) $\kappa(\mathbf{K})$ 定义为其最大[特征值](@entry_id:154894) $\lambda_{\max}$ 与最小特征值 $\lambda_{\min}$ 之比。$\lambda_{\max}$ 通常由实体材料 $E_0$ 和网格尺寸决定的最高频率[振动](@entry_id:267781)模式所主导，因此 $\lambda_{\max}(\mathbf{K}(\rho)) = \Theta(E_0)$。而 $\lambda_{\min}$ 则由替代材料 $E_{\min}$ 主导的最低频率全局变形模式决定，因此 $\lambda_{\min}(\mathbf{K}(\rho)) = \Theta(E_{\min})$。最终，[条件数](@entry_id:145150)的尺度关系为 ：
$$
\kappa(\mathbf{K}(\rho)) = \frac{\lambda_{\max}(\mathbf{K}(\rho))}{\lambda_{\min}(\mathbf{K}(\rho))} = \Theta\left(\frac{E_0}{E_{\min}}\right)
$$
当 $E_{\min} \to 0$ 时，条件数会趋于无穷。一个巨大的[条件数](@entry_id:145150)意味着[求解线性方程组](@entry_id:169069) $\mathbf{K}\mathbf{u} = \mathbf{f}$ 时，数值误差会被严重放大，给[迭代求解器](@entry_id:136910)的收敛性带来巨大挑战。因此，在实践中，$E_{\min}$ 的选择需要在保证数值稳定性和控制病态性之间进行权衡，通常取 $E_{\min} = 10^{-9} E_0$ 到 $10^{-6} E_0$ 之间。

##### 惩罚因子与设计离散化

惩罚因子 $p$ 是[SIMP方法](@entry_id:165988)中最关键的参数，它的作用是促使优化结果趋向于离散的、“黑白”的（即密度接近0或1）设计。

当 $p=1$ 时，刚度与密度呈线性关系。在这种情况下，材料的“比刚度”（刚度与质量之比）与密度无关。[优化问题](@entry_id:266749)是**凸的 (convex)**，保证了任何局部最优解都是[全局最优解](@entry_id:175747)。然而，这也意味着优化器对于使用中间密度（例如 $\rho=0.5$）没有“惩罚”，导致最终设计中常常包含大面积的模糊“灰色区域”，这些区域缺乏明确的物理意义且难以制造 。

为了得到清晰的、可制造的结构，我们选择 $p>1$（通常 $p=3$）。当 $p>1$ 时，对于任何中间密度 $\rho \in (0,1)$，都有 $\rho^p  \rho$。这意味着一个单元的刚度（正比于 $\rho^p$）与其质量（正比于 $\rho$）相比被打了折扣。例如，当 $p=3$ 时，一个密度为 $\rho=0.5$ 的单元贡献了50%的质量，但只提供了约 $(0.5)^3 = 0.125$ 即12.5%的刚度。这使得中间密度的材料在结构上变得“低效”。因此，[优化算法](@entry_id:147840)为了在给定的质量预算下获得最大的整体刚度，会倾向于避免使用中间密度，从而将密度推向0或1两端 。我们可以通过一个简单的思想实验来理解这一点 ：
- 在一个并联承载结构中，最大化总刚度等价于最大化 $\rho_1^p + \rho_2^p$。当 $p>1$ 时，这是一个[凸函数](@entry_id:143075)，其最大值在可行域的边界处取得，即一个杆为实体，另一个为虚体（黑白解）。
- 然而，在一个[串联](@entry_id:141009)承载结构中，最小化柔度等价于最小化 $\rho_1^{-p} + \rho_2^{-p}$。这是一个严格[凸函数](@entry_id:143075)，其最小值在内部取得，即 $\rho_1=\rho_2$（均匀灰色解）。这说明，即使有惩罚，灰色区域在某些局部结构中仍然可能是最优的。

引入 $p>1$ 的惩罚虽然有助于获得黑白设计，但也使[优化问题](@entry_id:266749)变成了**非凸的 (non-convex)**，可能存在多个局部最优解，增加了求解的复杂性。为缓解这个问题，实践中常采用**连续化策略 (continuation strategy)**：从一个凸问题（$p=1$）开始优化，然后将其“灰色”解作为初始值，逐步增大 $p$ 的值（例如，从1增加到3），在每个阶段进行优化，直至达到最终的惩罚值。这种方法有助于引导解走向一个较好的局部最优 。

从物理角度看，SIMP插值模型是一个数学构造，而非对真实[多孔材料](@entry_id:152752)的精确描述。当 $p$ 较小时（如 $p=1$），$E(\rho) = \rho E_0$ 对应于[复合材料](@entry_id:139856)刚度的理论上限（Voigt[上界](@entry_id:274738)），这是一个过于乐观的估计。这意味着优化器会高估灰色区域的承载能力，从而倾向于保留它们。当 $p$ 增大时（如 $p=3$），插值曲线 $E(\rho) = \rho^3 E_0$ 与真实各向同性多孔材料的有效刚度更为接近，从而使得优化结果更具物理意义 。

### 数值挑战与正则化需求

尽管[SIMP方法](@entry_id:165988)很强大，但其基础形式存在两个严重的数值问题：**[网格依赖性](@entry_id:198563) (mesh dependence)** 和 **棋盘格现象 (checkerboarding)**。这两个问题都源于未经正则化的连续拓扑优化问题本身是**不适定的 (ill-posed)** 。

#### [网格依赖性](@entry_id:198563)与[不适定性](@entry_id:635673)

[不适定性](@entry_id:635673)意味着连续问题的解可能不存在于经典[函数空间](@entry_id:143478)中。一个无约束的优化器会倾向于构建具有无限精细细节的微结构来最小化柔度，因为问题的数学提法中缺少一个内在的**特征长度尺度 (characteristic length scale)** 来限制结构的最小尺寸。

当这个问题在[有限元网格](@entry_id:174862)上离散化后，网格尺寸 $h$ 就成了事实上的最小长度尺度。优化器会利用网格所能表达的最小尺寸来构造最优设计。结果是，当网格被细化时，优化结果不会收敛到一个固定的物理拓扑，而是会产生越来越精细、依赖于网格的复杂结构。同时，计算出的最小柔度值 $J_h^{\min}$ 也会随着网格细化而单调递减，因为它总能利用更精细的网格找到“更好”的（尽管非物理的）解 。

需要强调的是，这种[网格依赖性](@entry_id:198563)是[优化问题](@entry_id:266749)本身的根本缺陷，与[状态方程](@entry_id:274378)（弹性力学方程）的求解精度无关。即使使用更高阶的有限元或采用特殊技术（如混合单元）来避免其他数值问题（如[体积锁定](@entry_id:172606)），只要密度场没有被正则化，[网格依赖性](@entry_id:198563)问题依然存在 。解决该问题的唯一途径是引入[正则化方法](@entry_id:150559)，如[周长](@entry_id:263239)约束或密度/敏度过滤，这些方法能够引入一个物理长度尺度，从而确保设计空间的紧性，使得离散解能够收敛到一个唯一的、网格无关的连续解。

#### 棋盘格现象

棋盘格现象是[网格依赖性](@entry_id:198563)的一种具体表现，尤其在使用低阶有限元（如四节点[四边形单元](@entry_id:176937)）时非常普遍。它表现为最终设计中出现大量实体单元和空洞单元交[错排](@entry_id:264832)列的棋盘状图案。

这种现象的根源在于数值上的**伪刚度 (artificial stiffness)**。对于某些单元类型，棋盘格构型在数值上表现出比物理上真实存在的连接高得多的刚度。例如，两个在角点相连的实体单元，在物理上几乎不能传递载荷，但在数值模型中可能表现出显著的刚度。优化器作为纯粹的数学工具，会“发现”并利用这种数值假象来降低计算出的柔度值。因此，棋盘格图案是一个对于离散问题而言“正确”的（即满足KKT[最优性条件](@entry_id:634091)）但完全没有物理意义的解 。

#### 问题诊断

在进行拓扑优化时，能够诊断出是否存在这些[数值病态](@entry_id:169044)至关重要。

**检测[网格依赖性](@entry_id:198563)** 的黄金法则是进行**[网格收敛性研究](@entry_id:750055) (mesh refinement study)**。具体做法是，在保持所有物理参数和正则化参数（如过滤半径 $r_{min}$）不变的情况下，用一系列逐渐加密的网格进行优化。如果随着网格的细化，优化得到的目标函数值和结构形态都趋于稳定和收敛，则说明问题是网格无关的。反之，如果拓扑结构随网格变化而剧烈改变，则表明存在[网格依赖性](@entry_id:198563) 。

**检测棋盘格现象** 则有多种方法：
1.  **目视检查**: 最直接的方法，但对于复杂三维结构可能不够可靠。
2.  **棋盘格指数**: 定义一个量化指标，例如 $I_{\mathrm{cb}}=\left|\sum_{i,j}(-1)^{i+j}\rho_{ij}\right|/\sum_{i,j}\rho_{ij}$。该指数利用了棋盘格图案在空间频率上的特性，通过与一个理想的棋盘格场 $(-1)^{i+j}$ 进行互相关来度量其含量。在优化过程中持续监测该指数，如果其值显著偏离零，则表明棋盘格正在形成 。
3.  **[频谱分析](@entry_id:275514)**: 将单元密度场（或其迭代更新量 $\Delta \rho^{(k)}$）视为一个二维信号，并对其进行[离散傅里叶变换](@entry_id:144032)（DFT）。棋盘格对应于[频谱](@entry_id:265125)中[奈奎斯特频率](@entry_id:276417)附近的高频分量。通过计算高频区域的能量占总能量的比例，可以定量判断设计中是否存在高频[振荡](@entry_id:267781)。如果该比例在迭代中持续保持高位，则强烈预示着[棋盘格不稳定性](@entry_id:143643) 。

### 替代方法与高级主题

除了SIMP，还存在其他重要的拓扑优化方法。同时，随着问题变得复杂，例如引入大量局部约束，还需要更高级的技术。

#### 隐式边界表示：[水平集方法](@entry_id:165633)

**[水平集方法](@entry_id:165633) (Level-Set Method, LSM)** 是一种基于[形状优化](@entry_id:170695)的[拓扑优化](@entry_id:147162)技术。与SIMP直接对材料密度进行[参数化](@entry_id:272587)不同，[水平集方法](@entry_id:165633)通过一个高维的**水平集函数** $\phi(\mathbf{x})$ 来隐式地定义结构边界 $\Gamma$。通常，边界被定义为 $\phi(\mathbf{x})$ 的零[等值面](@entry_id:196027)，即 $\Gamma = \{\mathbf{x} \in \Omega : \phi(\mathbf{x})=0\}$。实体区域和空洞区域则分别由 $\phi(\mathbf{x})  0$ 和 $\phi(\mathbf{x}) > 0$ 定义。

SIMP与LSM在概念上存在几个关键区别 ：
1.  **边界表示**: LSM的边界是清晰、平滑且与网格无关的。$\phi(\mathbf{x})$ 的零[等值面](@entry_id:196027)可以在单元内部以[亚像素精度](@entry_id:637328)穿过，从而天然地产生光滑的结构轮廓。相比之下，SIMP的边界（尤其是在引入过滤等正则化后）本质上是模糊的，是一个密度从1过渡到0的过渡带。
2.  **设计变量维度**: 在标准SIMP中，设计变量的数量与单元数量 $N_e$ 相同，通常非常巨大。而在LSM中，[水平集](@entry_id:751248)函数 $\phi(\mathbf{x})$ 可以用一组数量远少于网格节点数的[基函数](@entry_id:170178)（如[径向基函数](@entry_id:754004)或[B样条](@entry_id:172303)）来参数化，从而显著降低设计空间的维度，便于控制几何复杂性。
3.  **拓扑控制**: 在SIMP中，[拓扑变化](@entry_id:136654)（如孔洞的生成）是自然发生的。而在标准LSM中，由于边界演化方程的性质，新孔洞的生成较为困难，通常需要特殊的处理技术。

#### 多约束问题：[约束聚合](@entry_id:176206)技术

在许多实际工程问题中，除了全局的体积约束，我们还需要考虑成千上万个**局部性能约束 (local constraints)**，例如要求结构内每个点（或每个有限元积分点）的应力都不能超过许用值。如果将这数百万个约束直接引入[优化问题](@entry_id:266749)，将导致计算灾难。因为在基于伴随法 (adjoint method) 的梯度计算中，原则上需要为每一个约束函数求解一次伴随方程，这在计算上是不可行的 。

解决方案是采用**[约束聚合](@entry_id:176206) (constraint aggregation)** 技术，用一个或少数几个光滑的全局约束函数来近似这大量的局部约束。既然所有局部约束 $g_i \le 0$ 同时成立等价于 $\max_i g_i \le 0$，问题的核心就变成了寻找一个光滑函数来逼近不可微的 $\max$ 函数。

一种广泛使用的聚合函数是**对数指数和 (Log-Sum-Exp, LSE)** 函数，也称为 **Kreisselmeier–Steinhauser (KS)** 函数。其定义如下：
$$
\Phi_{\rho}(g) = \frac{1}{\rho}\ln\left(\sum_{i=1}^{m} e^{\rho g_i}\right), \quad \rho > 0
$$
其中 $g_i$ 是第 $i$ 个局部约束函数的值，$m$ 是约束总数，$\rho$ 是控制近似精度的聚合参数。该函数是一个光滑的[上界](@entry_id:274738)，满足 $\max_{i} g_i \le \Phi_{\rho}(g) \le \max_{i} g_i + \frac{\ln m}{\rho}$。当 $\rho \to \infty$ 时，$\Phi_{\rho}(g) \to \max_{i} g_i$。其梯度可以方便地写成各局部约束梯度的加权和：$\nabla \Phi_{\rho}(g) = \sum_{i=1}^{m} w_i \nabla g_i$，其中权重 $w_i = \frac{e^{\rho g_i}}{\sum_{j=1}^{m} e^{\rho g_j}}$ 是一种“softmax”权重，它会自动给那些最接近或最违反约束的 $g_i$ 赋予最大的权重 。

在数值实现中，直接计算 $e^{\rho g_i}$ 可能会因指数过大而导致浮点数溢出。通过减去所有 $g_i$ 中的最大值 $g_{\max}$ 可以有效避免此问题，这一技巧被称为“log-sum-exp trick” ：
$$
\Phi_{\rho}(g) = g_{\max} + \frac{1}{\rho}\ln\left(\sum_{i=1}^{m} e^{\rho (g_i - g_{\max})}\right)
$$
这个在数学上完[全等](@entry_id:273198)价的表达式，由于指数的参数 $(g_i - g_{\max})$ 恒为非正数，从而保证了数值计算的稳定性。通过这种聚合技术，数百万个局部约束可以被一个光滑的全局约束所取代，使得大规模、多约束的拓扑优化问题在计算上成为可能。