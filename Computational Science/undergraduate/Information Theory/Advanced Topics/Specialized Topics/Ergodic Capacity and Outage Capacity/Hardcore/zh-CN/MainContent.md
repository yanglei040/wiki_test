## 引言
在[无线通信](@entry_id:266253)领域，信道质量的剧烈波动（即“衰落”）使得静态信道下的香农容量定义不再适用。当信道容量本身成为一个[随机变量](@entry_id:195330)时，我们该如何衡量一个[衰落信道](@entry_id:269154)的终极性能极限？这个问题没有唯一的答案，因为它取决于通信系统对延迟和[服务质量](@entry_id:753918)（QoS）的根本要求。本文旨在深入剖析解决这一难题的两种关键方法：[遍历容量](@entry_id:266829)与中断容量。

本文将引导读者全面理解这两个互补的概念。在“原理与机制”一章中，我们将建立[遍历容量](@entry_id:266829)和中断容量的数学定义，揭示前者如何通过时间平均刻画延迟容忍应用（如文件下载）的长期速率，而后者如何通过设定中断概率保证延迟敏感应用（如实时通话）的可靠性。随后的“应用与跨学科联系”一章将理论联系实际，探讨这些概念如何在分集技术、功率控制和现代网络[范式](@entry_id:161181)（如认知无线电和物理层安全）中发挥作用，并展示其与[统计力](@entry_id:194984)学等基础学科的深刻共鸣。最后，通过“动手实践”部分提供的练习，您将有机会亲手计算和比较这两种容量，将抽象的理论转化为具体的工程洞察。

## 原理与机制

在上一章中，我们探讨了[加性高斯白噪声](@entry_id:269320)（[AWGN](@entry_id:269320)）信道的容量，这是一个静态、不随时间变化的信道模型。然而，现实世界中的无线通信，尤其是在移动环境中，其信道质量会因多径传播、阴影效应和物体移动而剧烈波动。这种现象被称为“衰落”（fading）。在[衰落信道](@entry_id:269154)中，接收到的[信噪比](@entry_id:185071)（Signal-to-Noise Ratio, SNR）不再是一个常数，而是一个[随机变量](@entry_id:195330)。因此，由香农公式给出的瞬时容量 $C = \log_2(1 + \text{SNR})$ 也随之成为一个[随机变量](@entry_id:195330)。

这就引出了一个核心问题：对于一个容量随时间波动的信道，我们应如何定义其“[信道容量](@entry_id:143699)”？答案并非唯一，而是取决于[通信系统](@entry_id:265921)的具体应用场景及其对延迟的容忍度。本章将深入探讨两种基本且互补的容量度量：[遍历容量](@entry_id:266829)（Ergodic Capacity）和中断容量（Outage Capacity），它们分别对应于两种截然不同的[服务质量](@entry_id:753918)（QoS）要求。

### [遍历容量](@entry_id:266829)：面向容忍延迟的系统

想象一下一个非实时的通信应用，例如下载大文件或观看流媒体视频。这类应用通常设有一个**缓冲区**（buffer），可以预先加载数据。只要数据的平均下载速率高于播放速率，即使用户偶尔经历网络连接缓慢的时期，也能保证流畅的体验，因为缓冲区可以弥补暂时的速率下降 。这类能够容忍延迟的应用，其性能关键在于长期平均的数据传输速率。

对于这种情况，**[遍历容量](@entry_id:266829)**是一个恰当的性能度量。其基本思想是，如果编码的码字足够长，能够跨越信道的多次起伏（即经历许多独立的衰落状态），那么系统性能将由[信道容量](@entry_id:143699)的统计平均值决定。在信号好的时段多传一些数据，可以弥补信号差的时段少传的数据。这种通过时间来平滑信道波动的过程，正是“遍历”一词的内涵。

形式上，**[遍历容量](@entry_id:266829)** ($C_{\text{erg}}$) 定义为瞬时信道容量的统计[期望值](@entry_id:153208)。假设信道功率增益为 $|h|^2$，平均发射[信噪比](@entry_id:185071)为 $\rho$，则瞬时接收信噪比为 $\rho|h|^2$。[遍历容量](@entry_id:266829)的表达式为：

$C_{\text{erg}} = \mathbb{E}[C(|h|^2)] = \mathbb{E}[\log_2(1 + \rho |h|^2)]$

其中，期望 $\mathbb{E}[\cdot]$ 是对信道增益 $|h|^2$ 的所有可能状态（即其[概率分布](@entry_id:146404)）求平均。[遍历容量](@entry_id:266829)代表了在[衰落信道](@entry_id:269154)上可以达到的、能够实现任意小错误概率的最高长期[平均速率](@entry_id:147100)。

为了更具体地理解这个概念，让我们考虑一个简化的“开/关”（ON/OFF）[衰落信道](@entry_id:269154)模型 。假设信道在两种状态间切换：
- **“开”状态**：信道畅通，功率增益为 $G > 0$，这种情况以概率 $p$ 发生。
- **“关”状态**：信道完全阻塞，功率增益为 $0$，这种情况以概率 $1-p$ 发生。

假设发射机不知道信道的当前状态，因此以恒定功率发射。接收机则拥有完整的信道状态信息（CSI）。在这种情况下，瞬时容量只有两个可能值：在“开”状态下为 $\log_2(1 + \rho G)$，在“关”状态下为 $\log_2(1 + 0) = 0$。根据定义，该信道的[遍历容量](@entry_id:266829)就是这两个值的加权平均：

$C_{\text{erg}} = p \cdot \log_2(1 + \rho G) + (1-p) \cdot \log_2(1) = p \log_2(1 + \rho G)$

例如，若 $G = 12.5$，$\rho = 5.0$，$p=0.9$，则[遍历容量](@entry_id:266829)为 $C_{\text{erg}} = 0.9 \log_2(1 + 12.5 \times 5.0) = 0.9 \log_2(63.5) \approx 5.39$ bits/s/Hz。这意味着，如果我们可以使用足够长的码字在信道的多次“开”和“关”状态之间进行平均，我们理论上可以实现接近 5.39 bits/s/Hz 的平均数据速率。

对于信道增益是[连续随机变量](@entry_id:166541)的情况，例如经典的**[瑞利衰落](@entry_id:274237)信道**（Rayleigh fading channel），其[遍历容量](@entry_id:266829)则通过积分计算。若[瞬时功率](@entry_id:174754)增益 $\gamma$ 的概率密度函数（PDF）为 $f(\gamma)$，则[遍历容量](@entry_id:266829)为 ：

$C_{\text{erg}} = \int_{0}^{\infty} \log_2(1 + \rho \gamma) f(\gamma) \,d\gamma$

这代表了在所有可能的信道条件下，对瞬时容量进行加权平均的结果。

### 中断容量：面向延迟敏感的系统

现在，我们转向另一类应用：实时语音通话（VoIP）、在线游戏或自动驾驶汽车的远程控制系统。这些应用的共同特点是**对延迟极其敏感** 。信息必须在严格的时间限制内传输和解码，没有时间等待信道条件改善。

在这些场景下，数据通常以很短的数据包（packet）形式发送。如果数据包的传输时间远小于信道状态保持相对稳定的时间（即信道[相干时间](@entry_id:176187)），那么整个数据包在传输过程中就会经历一个仿佛“冻结”的信道状态。如果这个“冻结”的信道状态很差，瞬时容量低于传输速率，那么这个数据包就会丢失，并且由于延迟限制，系统无法通过未来的高速传输来弥补这次损失。这种情况被称为**中断**（outage）。

因此，对于延迟敏感的系统，我们关心的不是长期[平均速率](@entry_id:147100)，而是以多大概率能够保证通信成功。这引出了**中断容量**的概念。我们首先定义**中断概率** $P_{\text{out}}$：对于一个给定的目标传输速率 $R$，中断概率是瞬时信道容量 $C_{\text{inst}}$ 低于 $R$ 的概率：

$P_{\text{out}}(R) = P(C_{\text{inst}}  R)$

在此基础上，**$\epsilon$-中断容量** ($C_{\text{out},\epsilon}$) 被定义为：在保证中断概率不超过某个可接受的阈值 $\epsilon$ 的前提下，系统能够支持的最大传输速率 $R$。形式上：

$C_{\text{out},\epsilon} = \sup\{ R \mid P_{\text{out}}(R) \le \epsilon \}$

这里的 $\epsilon$ 通常是一个很小的值（例如 $0.01$），代表了[服务质量](@entry_id:753918)（QoS）的要求。

让我们通过一个具体的例子来计算中断容量 。考虑一个信道，其功率增益 $g$ 有两种可能状态：“好”状态 $g_g = 4$（概率为 $0.8$）和“坏”状态 $g_b = 1$（概率为 $0.2$）。假设平均发射信噪比为 $\rho$。两种状态下的瞬时容量分别为 $C_g = \log_2(1 + 4\rho)$ 和 $C_b = \log_2(1 + \rho)$。显然 $C_g > C_b$。

现在，我们来分析不同目标速率 $R$ 下的中断概率：
- 如果 $R \le C_b$，那么无论信道处于何种状态，瞬时容量总是不低于 $R$。因此，中断概率 $P_{\text{out}}(R) = 0$。
- 如果 $C_b  R \le C_g$，只有当信道处于“坏”状态时才会发生中断。因此，中断概率 $P_{\text{out}}(R) = P(g=g_b) = 0.2$。
- 如果 $R > C_g$，那么无论信道处于何种状态，都会发生中断。因此，中断概率 $P_{\text{out}}(R) = 1$。

假设系统要求中断概率不超过 $20\%$（即 $\epsilon = 0.2$）。根据我们的分析，为了最大化速率 $R$，同时满足 $P_{\text{out}}(R) \le 0.2$ 的条件，我们能选择的最高速率恰好是“好”状态下的容量 $C_g$。因此，该系统的 $0.2$-中断容量为：

$C_{\text{out},0.2} = \log_2(1 + 4\rho)$

对于连续[衰落信道](@entry_id:269154)，如[瑞利衰落](@entry_id:274237)，我们可以利用信噪比 $\gamma$ 的[累积分布函数](@entry_id:143135)（CDF）$F_{\gamma}(x)$ 来计算中断容量。中断事件 $C(\gamma)  R$ 等价于 $\gamma  (2^R - 1)/\rho$。因此，中断概率为：

$P_{\text{out}}(R) = P\left(\gamma  \frac{2^R - 1}{\rho}\right) = F_{\gamma}\left(\frac{2^R - 1}{\rho}\right)$

给定中断概率阈值 $\epsilon$，我们可以通过求解方程 $\epsilon = F_{\gamma}\left(\frac{2^{C_{\text{out},\epsilon}} - 1}{\rho}\right)$ 来反解出中断容量 $C_{\text{out},\epsilon}$ 。

### 深入比较与关键洞察

理解了[遍历容量](@entry_id:266829)和中断容量的基本定义后，我们可以进一步探讨它们之间的关系以及一些深刻的推论。

#### 中断概念在[AWGN信道](@entry_id:269115)中的退化

首先，思考一个问题：非衰落的[AWGN信道](@entry_id:269115)的中断容量是多少？在[AWGN信道](@entry_id:269115)中，[信噪比](@entry_id:185071) $\gamma$ 是一个常数，因此其瞬时容量 $C_{\text{inst}} = \log_2(1+\gamma)$ 也是一个常数。对于任何目标速率 $R$，中断概率 $P(C_{\text{inst}}  R)$ 只可能取两个值：如果 $R \le C_{\text{inst}}$，概率为 $0$；如果 $R > C_{\text{inst}}$，概率为 $1$。

根据定义，$C_{\text{out},\epsilon} = \sup\{ R \mid P(C_{\text{inst}}  R) \le \epsilon \}$。只要中断容忍度 $\epsilon$ 小于 $1$（例如 $\epsilon=0.05$），那么满足条件的最大速率集合就是 $\{R \mid R \le C_{\text{inst}}\}$。这个集合的上确界就是 $C_{\text{inst}}$ 本身。因此，对于任何 $\epsilon \in [0, 1)$，非衰落[AWGN信道](@entry_id:269115)的中断容量等于其香农容量 。这揭示了中断是一个专属于**时变或[衰落信道](@entry_id:269154)**的概念。

#### 绝对可靠性的代价：零中断容量

中断容量的核心思想是在速率和可靠性之间进行权衡。如果我们追求绝对的可靠性，即要求中断概率为零（$\epsilon=0$），会发生什么？

让我们再次审视[瑞利衰落](@entry_id:274237)信道。其[信噪比](@entry_id:185071) $\gamma$ 的概率密度函数在 $\gamma > 0$ 的整个区域都有非零值，这意味着信道有一定概率会陷入深度衰落，即 $\gamma$ 变得任意小。要保证中断概率为零，即 $P(\log_2(1+\gamma)  R) = 0$，我们选择的速率 $R$ 必须小于所有可能的瞬时容量值。由于 $\gamma$ 可以任意接近于 $0$，瞬时容量也就可以任意接近于 $\log_2(1)=0$。因此，唯一能被100%保证支持的速率就是 $R=0$ 。

这个结论是深刻的：在可能出现深度衰落的信道上，若要实现零中断的完美可靠通信，代价是传输速率为零。这强调了在实际[系统设计](@entry_id:755777)中，必须接受一个非零的、尽管很小的中断概率，以换取有意义的通信速率。

#### 以遍历速率传输：是理想还是陷阱？

一个常见的误解是，既然[遍历容量](@entry_id:266829)是“平均容量”，那么以这个速率进行传输应该是一种合理的策略。然而，这种想法是危险的。

考虑一个多状态信道，其[遍历容量](@entry_id:266829) $C_{\text{erg}}$ 是所有状态下瞬时容量 $C_i$ 的加权平均值。由于对数函数的[凹性](@entry_id:139843)（[Jensen不等式](@entry_id:144269)），[遍历容量](@entry_id:266829) $C_{\text{erg}} = \mathbb{E}[\log_2(1+\gamma)]$ 总是小于或等于使用平均信噪比计算出的容量 $\log_2(1+\mathbb{E}[\gamma])$。更重要的是，$C_{\text{erg}}$ 是一个位于最高和最低瞬时容量之间的平均值。

如果我们将传输速率固定为 $R = C_{\text{erg}}$，那么每当信道进入一个瞬时容量 $C_i  C_{\text{erg}}$ 的状态时，就会发生一次中断。由于[衰落信道](@entry_id:269154)必然存在比平均值差的状态，因此以[遍历容量](@entry_id:266829)作为固定传输速率，**必然会导致非零的中断概率**。

例如，在一个具有三种状态的信道模型中，瞬时容量分别为 $C_1 \approx 1.32$, $C_2 = 3$, $C_3 = 5$ (bits/s/Hz)，其概率分别为 $0.2, 0.5, 0.3$。计算出的[遍历容量](@entry_id:266829)约为 $R = C_{\text{erg}} \approx 3.26$ bits/s/Hz。由于 $C_1  R$ 且 $C_2  R$，当信道处于状态1或状态2时均会发生中断。因此，中断概率为 $p_1 + p_2 = 0.2 + 0.5 = 0.7$ 。高达 $70\%$ 的中断概率清楚地表明，[遍历容量](@entry_id:266829)本身不应被用作延迟敏感系统的固定传输速率目标。

#### 中断容量能否超过[遍历容量](@entry_id:266829)？

我们通常直观地认为，中断容量（代表一种有损的、保守的策略）应该总是小于[遍历容量](@entry_id:266829)（代表一种理想的、平均的策略）。然而，这种直觉并不完全正确。

让我们回到双状态信道模型：好状态 $g_1$（概率 $p_1$）和坏状态 $g_2$（概率 $p_2=1-p_1$）。瞬时容量为 $C_1$ 和 $C_2$，且 $C_1 > C_2$。我们已经知道[遍历容量](@entry_id:266829) $C_{\text{erg}} = p_1 C_1 + p_2 C_2$，它是一个介于 $C_1$ 和 $C_2$ 之间的值。

中断容量 $C_{\text{out},\epsilon}$ 的值取决于 $\epsilon$ 与坏状态概率 $p_2$ 的关系 ：
- 如果 $\epsilon  p_2$：我们不能容忍坏状态的发生。为了满足中断概率要求，我们必须保证在坏状态下也能成功通信。因此，我们只能选择一个不高于 $C_2$ 的速率。此时 $C_{\text{out},\epsilon} = C_2  C_{\text{erg}}$。
- 如果 $\epsilon \ge p_2$：我们愿意承担的风险足以“覆盖”信道进入坏状态的概率。这意味着我们可以放弃在坏状态下成功通信的企图，转而将目标速率设定为好状态下的容量 $C_1$。此时，中断只在坏状态发生，中断概率为 $p_2$，这满足了 $p_2 \le \epsilon$ 的要求。因此，$C_{\text{out},\epsilon} = C_1$。由于 $C_1 > C_{\text{erg}}$，在这种情况下，中断容量实际上**大于**[遍历容量](@entry_id:266829)。

这个反直觉的结果揭示了中断容量策略的本质：它允许我们通过承担可控的风险（放弃在某些信道条件下的通信），来换取在其他信道条件下的更高性能。

### 综合示例：两种容量的量化对比

最后，我们通过一个数值计算来直观地感受[遍历容量](@entry_id:266829)和中断容量之间的差异 。假设一个[离散信道](@entry_id:267374)模型：
- “好”状态：增益 $g_1 = 5.0$，概率 $p_1 = 0.8$。
- “坏”状态：增益 $g_2 = 0.1$，概率 $p_2 = 0.2$。
参考[信噪比](@entry_id:185071)为 $\rho_0 = 4.0$。

瞬时容量为 $C(g) = \log_2(1 + \rho_0 g)$。
在“好”状态下，$C_1 = \log_2(1 + 4.0 \times 5.0) = \log_2(21)$。
在“坏”状态下，$C_2 = \log_2(1 + 4.0 \times 0.1) = \log_2(1.4)$。

**[遍历容量](@entry_id:266829)**的计算如下：
$C_{\text{erg}} = p_1 C_1 + p_2 C_2 = 0.8 \log_2(21) + 0.2 \log_2(1.4) \approx 3.61$ bits/s/Hz。

现在，我们计算**中断容量**。假设[服务质量](@entry_id:753918)要求中断概率不超过 $\epsilon = 0.15$。坏状态的发生概率是 $p_2 = 0.2$。如果我们试图以任何高于 $C_2$ 的速率传输，中断概率将至少为 $0.2$，这超出了我们的容忍度。因此，为了满足 $\epsilon = 0.15$ 的要求，我们能选择的最高速率就是 $C_2$。
$C_{\text{out},0.15} = C_2 = \log_2(1.4) \approx 0.485$ bits/s/Hz。

比较两者，我们可以看到[遍历容量](@entry_id:266829)与中断容量的比值为：
$\frac{C_{\text{erg}}}{C_{\text{out},0.15}} \approx \frac{3.61}{0.485} \approx 7.44$。

这个巨大的差异凸显了[系统设计](@entry_id:755777)理念的根本不同。一个能够利用缓冲和长码字进行时间平均的系统，其理论性能极限（[遍历容量](@entry_id:266829)）可能数倍于一个必须为实时性而保证低中断率的系统（中断容量）。选择哪一个作为性能指标，直接决定了系统的架构、编码策略和最终的用户体验。