{"hands_on_practices": [{"introduction": "The cornerstone of risk-neutral valuation is the martingale condition, which states that an asset's price today must equal its discounted expected future price under a special \"risk-neutral\" probability measure. This exercise [@problem_id:2427434] takes you into a simple one-period, three-state world to directly test this fundamental principle. By calculating a specific deviation, you will see firsthand how to verify if a proposed set of probabilities, denoted by $Q$, is consistent with the no-arbitrage condition $E_Q[S_1/B_1] = S_0/B_0$.", "id": "2427434", "problem": "Consider a one-period, $3$-state economy with states $\\omega_1$, $\\omega_2$, and $\\omega_3$. There is a risk-free bond with price $B_0 = 1$ at time $0$ and a sure payoff $B_1 = 1.05$ at time $1$. There is a single risky asset with price $S_0 = 100$ at time $0$ and state-contingent payoffs at time $1$ given by\n$$\nS_1(\\omega_1) = 120,\\quad S_1(\\omega_2) = 100,\\quad S_1(\\omega_3) = 80.\n$$\nAn analyst claims that the market is arbitrage-free and proposes the following risk-neutral probability vector $Q$ over $\\{\\omega_1,\\omega_2,\\omega_3\\}$:\n$$\nq_1 = 0.3,\\quad q_2 = 0.4,\\quad q_3 = 0.3.\n$$\nDefine the deviation\n$$\n\\delta \\equiv \\sum_{i=1}^{3} q_i \\frac{S_1(\\omega_i)}{B_1} - \\frac{S_0}{B_0}.\n$$\nCompute $\\delta$ exactly as a single number. Do not round your answer. Express the final value without units.", "solution": "The problem statement is subjected to validation before any attempt at a solution.\n\nGivens are extracted verbatim:\n- A one-period, $3$-state economy with states $\\omega_1$, $\\omega_2$, and $\\omega_3$.\n- A risk-free bond with price $B_0 = 1$ at time $0$ and payoff $B_1 = 1.05$ at time $1$.\n- A single risky asset with price $S_0 = 100$ at time $0$.\n- State-contingent payoffs for the risky asset at time $1$: $S_1(\\omega_1) = 120$, $S_1(\\omega_2) = 100$, $S_1(\\omega_3) = 80$.\n- A proposed risk-neutral probability vector $Q$: $q_1 = 0.3$, $q_2 = 0.4$, $q_3 = 0.3$.\n- The definition of the deviation $\\delta$: $\\delta \\equiv \\sum_{i=1}^{3} q_i \\frac{S_1(\\omega_i)}{B_1} - \\frac{S_0}{B_0}$.\n- The objective is to compute $\\delta$ exactly.\n\nValidation verdict: The problem is valid. It is scientifically grounded in the theory of risk-neutral valuation, a cornerstone of financial mathematics. All terms are clearly defined, and all necessary numerical values are provided. The problem is self-contained, well-posed, and objective. It reduces to a direct calculation based on the given formula and does not contain any scientific or logical fallacies.\n\nThe task is to compute the quantity $\\delta$. The definition is provided as:\n$$\n\\delta = \\sum_{i=1}^{3} q_i \\frac{S_1(\\omega_i)}{B_1} - \\frac{S_0}{B_0}\n$$\nThis expression can be analyzed as the difference between the present value of the risky asset's expected future payoff under the proposed measure $Q$, and its observed present value, with both values normalized by the price of the risk-free bond at the corresponding time. In an arbitrage-free market, for a valid risk-neutral measure, this deviation must be zero. Let us proceed with the calculation.\n\nFirst, expand the summation:\n$$\n\\delta = \\left( q_1 \\frac{S_1(\\omega_1)}{B_1} + q_2 \\frac{S_1(\\omega_2)}{B_1} + q_3 \\frac{S_1(\\omega_3)}{B_1} \\right) - \\frac{S_0}{B_0}\n$$\nThe term $B_1$ in the denominator is common to all terms in the summation. It can be factored out:\n$$\n\\delta = \\frac{1}{B_1} \\left( q_1 S_1(\\omega_1) + q_2 S_1(\\omega_2) + q_3 S_1(\\omega_3) \\right) - \\frac{S_0}{B_0}\n$$\nThe expression in the parenthesis is the expected payoff of the asset at time $1$ under the probability measure $Q$, denoted $E_Q[S_1]$.\n$$\nE_Q[S_1] = q_1 S_1(\\omega_1) + q_2 S_1(\\omega_2) + q_3 S_1(\\omega_3)\n$$\nSubstitute the given numerical values: $q_1=0.3$, $q_2=0.4$, $q_3=0.3$ and $S_1(\\omega_1)=120$, $S_1(\\omega_2)=100$, $S_1(\\omega_3)=80$.\n$$\nE_Q[S_1] = (0.3)(120) + (0.4)(100) + (0.3)(80)\n$$\n$$\nE_Q[S_1] = 36 + 40 + 24 = 100\n$$\nNow, substitute this result and the remaining given values $B_1 = 1.05$, $S_0 = 100$, and $B_0 = 1$ back into the formula for $\\delta$.\n$$\n\\delta = \\frac{1}{1.05} (100) - \\frac{100}{1}\n$$\nTo compute the exact value, it is best to work with fractions. The number $1.05$ is equivalent to $\\frac{105}{100}$, which simplifies to $\\frac{21}{20}$.\n$$\n\\delta = \\frac{100}{\\frac{21}{20}} - 100\n$$\n$$\n\\delta = 100 \\times \\frac{20}{21} - 100\n$$\n$$\n\\delta = \\frac{2000}{21} - 100\n$$\nTo subtract, we find a common denominator, which is $21$.\n$$\n\\delta = \\frac{2000}{21} - \\frac{100 \\times 21}{21} = \\frac{2000}{21} - \\frac{2100}{21}\n$$\n$$\n\\delta = \\frac{2000 - 2100}{21} = -\\frac{100}{21}\n$$\nThe computed value of $\\delta$ is non-zero. This demonstrates that the analyst's proposed probability vector $Q$ is not a valid risk-neutral measure for the given asset prices, assuming the market is arbitrage-free. The analyst's claim is therefore inconsistent with the data. The calculation, however, is complete and correct based on the provided formula.", "answer": "$$\n\\boxed{-\\frac{100}{21}}\n$$"}, {"introduction": "Risk-neutral valuation is a two-way street: if we know the risk-neutral probabilities, we can find the fair price. Conversely, if we know the fair price, we can infer the underlying risk-neutral probabilities. This practice [@problem_id:2427390] explores this powerful idea using a modern example of a crowdfunding \"success token,\" which functions as a simple binary option, allowing you to extract the market-implied probability of success from its price.", "id": "2427390", "problem": "A crowdfunding platform uses an all-or-nothing funding rule: if a campaign reaches or exceeds its target by the deadline, pledges are collected; otherwise, pledges are void. Consider a tradeable security on this platform, a \"success token,\" that pays $1$ at the campaign deadline if and only if the campaign succeeds, and pays $0$ otherwise. Assume frictionless markets, absence of arbitrage, and a constant continuously compounded risk-free rate.\n\nAt the current time $t=0$, the price of one success token for a particular campaign is observed to be $0.41$. The remaining time to the campaignâ€™s deadline is $45$ days, and the continuously compounded annual risk-free rate is $0.03$. Assume a $365$-day year.\n\nUsing only these inputs and first principles of risk-neutral valuation, determine the risk-neutral probability (as a unitless decimal) that the campaign will succeed, inferred from the observed token price. Round your answer to four significant figures.", "solution": "The problem as stated must first be rigorously validated.\n\n**Step 1: Extract Givens**\n- Type of security: A \"success token\" paying $1$ upon campaign success at deadline, $0$ otherwise.\n- Market assumptions: Frictionless markets, absence of arbitrage, constant continuously compounded risk-free rate.\n- Price of the token at time $t=0$: $P_0 = 0.41$.\n- Time to deadline: $T = 45$ days.\n- Annual continuously compounded risk-free rate: $r = 0.03$.\n- Year convention: $365$ days.\n\n**Step 2: Validate Using Extracted Givens**\n- **Scientific Grounding**: The problem is correctly framed within the well-established theory of arbitrage-free pricing, specifically risk-neutral valuation. This is a fundamental concept in mathematical finance.\n- **Well-Posedness**: The problem provides all necessary information to determine a unique solution. The inputs ($P_0$, $r$, $T$, and the payoff structure) are sufficient to calculate the unknown risk-neutral probability.\n- **Objectivity**: The problem is stated using precise, quantitative, and unambiguous language. There are no subjective or speculative elements.\n\n**Step 3: Verdict and Action**\nThe problem is scientifically grounded, well-posed, and objective. It is deemed **valid**. A solution will now be derived from first principles.\n\nThe fundamental principle of arbitrage-free pricing dictates that the price of a derivative security is the present value of its expected future payoff, where the expectation is taken under the risk-neutral probability measure, denoted $Q$.\n\nLet $P_t$ be the price of the success token at time $t$. We are given $P_0 = 0.41$.\nLet $T$ be the time to the campaign's deadline, expressed in years. Given the time to deadline is $45$ days and a year has $365$ days, we have:\n$$T = \\frac{45}{365}$$\nThe annual continuously compounded risk-free interest rate is given as $r = 0.03$.\n\nThe payoff of the token at the deadline, $V_T$, is a random variable dependent on the campaign's outcome. Let $S$ denote the event of the campaign succeeding and $F$ denote the event of failure. The payoff structure is:\n$$\nV_T = \n\\begin{cases} \n1 & \\text{if event } S \\text{ occurs} \\\\\n0 & \\text{if event } F \\text{ occurs}\n\\end{cases}\n$$\nWe are tasked with finding the risk-neutral probability of success. Let this probability be denoted by $q$. Thus, under the risk-neutral measure $Q$:\n$$q = Q(S)$$\n$$1-q = Q(F)$$\nThe expected payoff at time $T$ under the risk-neutral measure, $E_Q[V_T]$, is calculated as:\n$$E_Q[V_T] = (1 \\times q) + (0 \\times (1-q)) = q$$\nThe no-arbitrage price of the token at time $t=0$ is the discounted expected payoff:\n$$P_0 = \\exp(-rT) E_Q[V_T]$$\nSubstituting the expression for the expected payoff, we get:\n$$P_0 = q \\cdot \\exp(-rT)$$\nWe must now solve this equation for $q$:\n$$q = P_0 \\cdot \\exp(rT)$$\nNow, we substitute the given numerical values into this expression:\n$$P_0 = 0.41$$\n$$r = 0.03$$\n$$T = \\frac{45}{365}$$\nThis yields:\n$$q = 0.41 \\cdot \\exp\\left(0.03 \\cdot \\frac{45}{365}\\right)$$\nThe exponent is first calculated:\n$$rT = 0.03 \\times \\frac{45}{365} = \\frac{1.35}{365} \\approx 0.00369863$$\nThen we compute the value of $q$:\n$$q = 0.41 \\cdot \\exp(0.00369863...) \\approx 0.41 \\cdot 1.0037054... \\approx 0.4115192...$$\nThe problem requires the answer to be rounded to four significant figures. The first four significant figures are $4$, $1$, $1$, and $5$. The fifth significant figure is $1$, which is less than $5$, so we round down.\n$$q \\approx 0.4115$$\nThis value represents the unique risk-neutral probability of campaign success consistent with the observed market price and the no-arbitrage condition. It is not necessarily the true, real-world probability, but the one used for pricing purposes in a risk-neutral framework.", "answer": "$$\\boxed{0.4115}$$"}, {"introduction": "Moving beyond simple pricing, the risk-neutral framework is a powerful tool for analyzing the behavior of asset prices over time. This problem [@problem_id:2427433] challenges you to apply the risk-neutral dynamics of a geometric Brownian motion, the standard model for stock prices, to calculate a crucial metric: the probability of an asset hitting an upper price barrier before a lower one. This task demonstrates how the risk-neutral world is essential not just for pricing, but for quantifying the likelihood of future market events.", "id": "2427433", "problem": "Consider a frictionless market with a non-dividend-paying bank account growing at a continuously compounded risk-free rate $r$ and a single stock paying a continuous dividend yield $q$. Under the risk-neutral measure, the stock price $\\{S_t\\}_{t \\geq 0}$ follows a geometric Brownian motion with dynamics\n$$\n\\mathrm{d}S_t = (r - q)\\,S_t\\,\\mathrm{d}t + \\sigma\\,S_t\\,\\mathrm{d}W_t,\n$$\nwhere $W_t$ is a standard Brownian motion, and $r$, $q$, and $\\sigma$ are constants. At time $t=0$, the stock price is $S_0$.\n\nLet the lower and upper barriers be $L$ and $U$, respectively, with $0 < L < S_0 < U$. Define the first hitting times\n$$\n\\tau_L = \\inf\\{ t \\geq 0 : S_t = L \\}, \\quad \\tau_U = \\inf\\{ t \\geq 0 : S_t = U \\}.\n$$\nAssume the process is observed over an indefinite horizon (that is, until one of the barriers is hit). Using the risk-neutral dynamics above, compute the risk-neutral probability that the stock hits the upper barrier $U$ before the lower barrier $L$, i.e., compute\n$$\n\\mathbb{Q}\\big(\\tau_U < \\tau_L \\,\\big|\\, S_0\\big).\n$$\n\nUse the following parameter values:\n- $S_0 = 100$,\n- $L = 80$,\n- $U = 130$,\n- $r = 0.03$ per year,\n- $q = 0.01$ per year,\n- $\\sigma = 0.20$ per square-root year.\n\nExpress your final answer as a decimal and round to four significant figures.", "solution": "The problem requires the computation of a risk-neutral probability concerning the first hitting time of a stock price process $S_t$ to one of two barriers, $L$ or $U$. The process is modeled as a geometric Brownian motion (GBM).\n\nFirst, we perform a validation of the problem statement.\nThe givens are:\n- Risk-neutral dynamics of the stock price $S_t$: $\\mathrm{d}S_t = (r - q)S_t\\mathrm{d}t + \\sigma S_t\\mathrm{d}W_t$.\n- Initial stock price: $S_0 = 100$.\n- Lower barrier: $L = 80$.\n- Upper barrier: $U = 130$.\n- Risk-free rate: $r = 0.03$.\n- Continuous dividend yield: $q = 0.01$.\n- Volatility: $\\sigma = 0.20$.\n- The condition $0 < L < S_0 < U$ is satisfied, as $0 < 80 < 100 < 130$.\n\nThe problem is scientifically grounded in the standard Black-Scholes-Merton framework of quantitative finance. It is well-posed, with all necessary parameters provided, and contains no contradictory or ambiguous statements. Therefore, the problem is valid, and we may proceed to the solution.\n\nThe problem is to find the probability $\\mathbb{Q}(\\tau_U < \\tau_L)$, where $\\tau_U = \\inf\\{ t \\geq 0 : S_t = U \\}$ and $\\tau_L = \\inf\\{ t \\geq 0 : S_t = L \\}$. This is a classic first-passage time problem for a stochastic process. A standard method for solving such a problem for a GBM is to transform the process into an arithmetic Brownian motion by taking the natural logarithm.\n\nLet $X_t = \\ln(S_t)$. We apply ItÃ´'s lemma to find the dynamics of $X_t$. For a function $f(S_t) = \\ln(S_t)$, we have $\\frac{\\partial f}{\\partial S_t} = \\frac{1}{S_t}$ and $\\frac{\\partial^2 f}{\\partial S_t^2} = -\\frac{1}{S_t^2}$. The dynamics of $X_t$ are given by:\n$$ \\mathrm{d}X_t = \\left( (r-q)S_t \\frac{\\partial f}{\\partial S_t} + \\frac{1}{2}(\\sigma S_t)^2 \\frac{\\partial^2 f}{\\partial S_t^2} \\right) \\mathrm{d}t + \\sigma S_t \\frac{\\partial f}{\\partial S_t} \\mathrm{d}W_t $$\nSubstituting the derivatives:\n$$ \\mathrm{d}X_t = \\left( (r-q)S_t \\left(\\frac{1}{S_t}\\right) + \\frac{1}{2}\\sigma^2 S_t^2 \\left(-\\frac{1}{S_t^2}\\right) \\right) \\mathrm{d}t + \\sigma S_t \\left(\\frac{1}{S_t}\\right) \\mathrm{d}W_t $$\n$$ \\mathrm{d}X_t = \\left( r - q - \\frac{1}{2}\\sigma^2 \\right) \\mathrm{d}t + \\sigma \\mathrm{d}W_t $$\nSo, $X_t$ is an arithmetic Brownian motion with constant drift $\\nu = r - q - \\frac{1}{2}\\sigma^2$ and constant volatility $\\sigma$.\n\nThe problem of $S_t$ hitting $L$ or $U$ is now transformed into $X_t$ hitting $l = \\ln(L)$ or $u = \\ln(U)$, starting from $x_0 = \\ln(S_0)$. Let $p(x)$ be the probability that the process $X_t$ starting at $x$ hits $u$ before $l$. This probability is the solution to the ordinary differential equation:\n$$ \\frac{1}{2}\\sigma^2 p''(x) + \\nu p'(x) = 0 $$\nwith boundary conditions $p(l) = 0$ and $p(u) = 1$. The general solution to this ODE is $p(x) = C_1 + C_2 \\exp\\left(-\\frac{2\\nu}{\\sigma^2}x\\right)$.\nApplying the boundary conditions yields the specific solution:\n$$ p(x) = \\frac{\\exp\\left(-\\frac{2\\nu}{\\sigma^2}x\\right) - \\exp\\left(-\\frac{2\\nu}{\\sigma^2}l\\right)}{\\exp\\left(-\\frac{2\\nu}{\\sigma^2}u\\right) - \\exp\\left(-\\frac{2\\nu}{\\sigma^2}l\\right)} $$\nThis can be rewritten in terms of the original asset prices $S$, $L$, and $U$ by substituting $x = \\ln(S)$, $l = \\ln(L)$, and $u = \\ln(U)$, which using the property $\\exp(a \\ln b) = b^a$ gives:\n$$ p(S) = \\frac{S^{-\\frac{2\\nu}{\\sigma^2}} - L^{-\\frac{2\\nu}{\\sigma^2}}}{U^{-\\frac{2\\nu}{\\sigma^2}} - L^{-\\frac{2\\nu}{\\sigma^2}}} $$\n\nNow, let us calculate the drift $\\nu$ using the provided parameters:\n$r = 0.03$\n$q = 0.01$\n$\\sigma = 0.20$\n$$ \\nu = r - q - \\frac{1}{2}\\sigma^2 = 0.03 - 0.01 - \\frac{1}{2}(0.20)^2 = 0.02 - \\frac{1}{2}(0.04) = 0.02 - 0.02 = 0 $$\nThe drift $\\nu$ is exactly zero. This is a special case where $X_t = \\ln(S_t)$ is a driftless Brownian motion. In this case, the general formula for the probability is indeterminate ($0/0$). We must take the limit as $\\nu \\to 0$. The ODE simplifies to $p''(x) = 0$, which has the general solution $p(x) = C_1 x + C_2$.\nApplying the boundary conditions $p(l) = 0$ and $p(u) = 1$:\n$p(l) = C_1 l + C_2 = 0 \\implies C_2 = -C_1 l$\n$p(u) = C_1 u + C_2 = 1 \\implies C_1 u - C_1 l = 1 \\implies C_1 = \\frac{1}{u-l}$\nIt follows that $C_2 = -\\frac{l}{u-l}$.\nThus, the probability is:\n$$ p(x) = \\frac{1}{u-l}x - \\frac{l}{u-l} = \\frac{x-l}{u-l} $$\nWe want to compute this probability for $x_0 = \\ln(S_0)$:\n$$ \\mathbb{Q}(\\tau_U < \\tau_L) = p(x_0) = \\frac{x_0 - l}{u - l} = \\frac{\\ln(S_0) - \\ln(L)}{\\ln(U) - \\ln(L)} $$\nUsing the properties of the logarithm, this can be written as:\n$$ \\mathbb{Q}(\\tau_U < \\tau_L) = \\frac{\\ln(S_0/L)}{\\ln(U/L)} $$\nNow we substitute the given numerical values:\n$S_0 = 100$\n$L = 80$\n$U = 130$\n$$ \\mathbb{Q}(\\tau_U < \\tau_L) = \\frac{\\ln(100/80)}{\\ln(130/80)} = \\frac{\\ln(1.25)}{\\ln(1.625)} $$\nWe compute the numerical value:\n$$ \\ln(1.25) \\approx 0.22314355 $$\n$$ \\ln(1.625) \\approx 0.48550782 $$\n$$ \\mathbb{Q}(\\tau_U < \\tau_L) \\approx \\frac{0.22314355}{0.48550782} \\approx 0.45960706 $$\nThe problem requires the answer to be rounded to four significant figures.\nThus, the probability is $0.4596$.", "answer": "$$\n\\boxed{0.4596}\n$$"}]}