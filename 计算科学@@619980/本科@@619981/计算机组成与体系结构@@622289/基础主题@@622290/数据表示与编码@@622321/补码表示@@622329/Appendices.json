{"hands_on_practices": [{"introduction": "理解计算机如何表示负数是计算机体系结构的基石。第一个练习将引导你完成将一个负十进制整数转换为其8位二进制补码形式的基本过程。掌握这种转换是理解硬件层面如何执行算术运算的必要第一步。", "problem": "一台商用冰柜的数字恒温器使用一个简单的微控制器，该微控制器使用8位有符号二进制补码格式表示摄氏度的整数温度。在一次例行检查中，一名技术人员注意到系统记录了一个错误的传感器读数。记录的十进制值为 $-101$。为了在二进制层面分析该错误，技术人员需要确定微控制器为该值存储的确切的8位二进制字符串。\n\n十进制数 $-101$ 的8位二进制补码表示是什么？\n\nA. 10011011\n\nB. 10011010\n\nC. 11100101\n\nD. 01100101\n\nE. 10010111", "solution": "我们首先验证其可表示性：一个8位有符号二进制补码整数的范围是从 $-128$ 到 $127$，因此 $-101$ 是一个有效值。\n\n要形成 $-101$ 的二进制补码表示：\n1. 将 $+101$ 写成8位二进制。分解 $101=64+32+4+1$，所以\n$$+101 \\to 01100101.$$\n2. 将所有位取反（反码）：\n$$01100101 \\;\\to\\; 10011010.$$\n3. 加 $1$ （得到补码）：\n$$10011010 + 1 = 10011011.$$\n\n因此，$-101$ 的8位二进制补码编码是 $10011011$，对应选项A。", "answer": "$$\\boxed{A}$$", "id": "1914977"}, {"introduction": "除了对数字进行编码，一项关键技能是能够解释原始二进制数据，例如内存转储或日志文件。这个练习挑战你将一系列十六进制字节解码回其对应的有符号十进制值，并特别关注重要的边界情况。这能加深你对补码表示范围和符号位含义的理解。", "problem": "一个二进制插桩日志以字长为 $n=8$ 位的有符号二进制补码值的形式记录了一串样本流。一个调试器打印了以下 $8$ 字节的连续十六进制转储：\n$$0xFF,\\;0x80,\\;0x7F,\\;0x00,\\;0x01,\\;0xFE,\\;0x81,\\;0x7E.$$\n从 $n=8$ 的二进制补码表示法的核心定义（最高有效位(MSB)表示符号；对于负数，其大小通过按位取反再加 $1$ 得到）出发，重构与这些字节相对应的十进制有符号整数 $x_{1},x_{2},\\dots,x_{8}$。然后计算标量\n$$S=\\sum_{i=1}^{8} i \\cdot x_{i}.$$\n将 $S$ 的最终值表示为一个精确整数。不需要进行四舍五入。", "solution": "第一步是将这 $8$ 个十六进制字节中的每一个转换为其对应的有符号十进制整数值 $x_i$。字长指定为 $n=8$ 位。对于一个 $8$ 位二进制数 $(b_7 b_6 b_5 b_4 b_3 b_2 b_1 b_0)$，其在二进制补码表示法下的十进制值 $V$ 由以下公式给出：\n$$V = -b_7 \\cdot 2^7 + \\sum_{i=0}^{6} b_i \\cdot 2^i$$\n其中 $b_7$ 是最高有效位（MSB）。如果 $b_7=0$，则该数为非负数。如果 $b_7=1$，则该数为负数。\n\n我们现在转换所提供的十六进制流 $0xFF, 0x80, 0x7F, 0x00, 0x01, 0xFE, 0x81, 0x7E$ 中的每个字节。\n\n1. 对于 $x_1 = 0xFF$：\n在二进制中，$0xFF$ 是 $11111111_2$。MSB 是 $1$。\n$x_1 = -1 \\cdot 2^7 + (1 \\cdot 2^6 + 1 \\cdot 2^5 + 1 \\cdot 2^4 + 1 \\cdot 2^3 + 1 \\cdot 2^2 + 1 \\cdot 2^1 + 1 \\cdot 2^0)$\n$x_1 = -128 + (64 + 32 + 16 + 8 + 4 + 2 + 1) = -128 + 127 = -1$。\n\n2. 对于 $x_2 = 0x80$：\n在二进制中，$0x80$ 是 $10000000_2$。MSB 是 $1$。\n$x_2 = -1 \\cdot 2^7 + \\sum_{i=0}^{6} 0 \\cdot 2^i = -128 + 0 = -128$。\n\n3. 对于 $x_3 = 0x7F$：\n在二进制中，$0x7F$ 是 $01111111_2$。MSB 是 $0$。\n$x_3 = -0 \\cdot 2^7 + (1 \\cdot 2^6 + 1 \\cdot 2^5 + 1 \\cdot 2^4 + 1 \\cdot 2^3 + 1 \\cdot 2^2 + 1 \\cdot 2^1 + 1 \\cdot 2^0)$\n$x_3 = 0 + (64 + 32 + 16 + 8 + 4 + 2 + 1) = 127$。\n\n4. 对于 $x_4 = 0x00$：\n在二进制中，$0x00$ 是 $00000000_2$。MSB 是 $0$。\n$x_4 = 0$。\n\n5. 对于 $x_5 = 0x01$：\n在二进制中，$0x01$ 是 $00000001_2$。MSB 是 $0$。\n$x_5 = 1$。\n\n6. 对于 $x_6 = 0xFE$：\n在二进制中，$0xFE$ 是 $11111110_2$。MSB 是 $1$。\n$x_6 = -1 \\cdot 2^7 + (1 \\cdot 2^6 + 1 \\cdot 2^5 + 1 \\cdot 2^4 + 1 \\cdot 2^3 + 1 \\cdot 2^2 + 1 \\cdot 2^1 + 0 \\cdot 2^0)$\n$x_6 = -128 + (64 + 32 + 16 + 8 + 4 + 2) = -128 + 126 = -2$。\n\n7. 对于 $x_7 = 0x81$：\n在二进制中，$0x81$ 是 $10000001_2$。MSB 是 $1$。\n$x_7 = -1 \\cdot 2^7 + (0 \\cdot 2^6 + \\dots + 1 \\cdot 2^0) = -128 + 1 = -127$。\n\n8. 对于 $x_8 = 0x7E$：\n在二进制中，$0x7E$ 是 $01111110_2$。MSB 是 $0$。\n$x_8 = -0 \\cdot 2^7 + (1 \\cdot 2^6 + 1 \\cdot 2^5 + 1 \\cdot 2^4 + 1 \\cdot 2^3 + 1 \\cdot 2^2 + 1 \\cdot 2^1 + 0 \\cdot 2^0)$\n$x_8 = 0 + (64 + 32 + 16 + 8 + 4 + 2) = 126$。\n\n因此，有符号十进制整数序列为：\n$x_1 = -1$, $x_2 = -128$, $x_3 = 127$, $x_4 = 0$, $x_5 = 1$, $x_6 = -2$, $x_7 = -127$, $x_8 = 126$。\n\n下一步是计算标量 $S$，它被定义为加权和：\n$$S = \\sum_{i=1}^{8} i \\cdot x_i = 1 \\cdot x_1 + 2 \\cdot x_2 + 3 \\cdot x_3 + 4 \\cdot x_4 + 5 \\cdot x_5 + 6 \\cdot x_6 + 7 \\cdot x_7 + 8 \\cdot x_8$$\n代入计算出的整数值：\n$$S = 1(-1) + 2(-128) + 3(127) + 4(0) + 5(1) + 6(-2) + 7(-127) + 8(126)$$\n我们计算每一项：\n$$S = -1 + (-256) + 381 + 0 + 5 + (-12) + (-889) + 1008$$\n现在，我们对这些项求和：\n$$S = -1 - 256 + 381 + 0 + 5 - 12 - 889 + 1008$$\n为清晰起见，将正项和负项分组：\n$$S = (381 + 5 + 1008) - (1 + 256 + 12 + 889)$$\n$$S = 1394 - 1158$$\n$$S = 236$$\n$S$ 的最终值是一个精确整数，符合要求。", "answer": "$$\\boxed{236}$$", "id": "3686589"}, {"introduction": "补码的真正威力在于它对计算机算术的优雅简化，使得减法可以作为加法来执行。在这个问题中，你将模拟一个算术逻辑单元（ALU）的操作来计算一次减法，并确定产生的处理器状态标志。这个练习能让你直接洞察CPU如何处理算术运算并用标志位来表示溢出或负数等结果。", "problem": "算术逻辑单元 (ALU) 通过执行模 $2^{n}$ 的加法来实现 $n$ 位二进制补码整数的减法。在固定宽度为 $n$ 的二进制补码表示法中，可表示的范围是从 $-2^{n-1}$ 到 $2^{n-1}-1$，并且每个运算都是模 $2^{n}$ 计算的。一个 $n$ 位操作数 $x$ 的二进制补码定义为满足 $x+(-x)\\equiv 0 \\pmod{2^{n}}$ 的唯一 $n$ 位值 $-x$，它通过对 $n$ 位进行按位取反然后加 $1$ 来构造。\n\n标志位的语义如下：零标志位 $Z$ 为 $1$ 当且仅当所有 $n$ 个结果位都为 $0$；负标志位 $N$ 等于 $n$ 位结果的最高有效位（符号位）；进位标志位 $C$ 等于 $n$ 位加法产生的最高有效位的进位输出（对于减法，当 $C=1$ 时表示“无借位”）；而二进制补码加法的溢出标志位 $V$ 等于进入最高有效位的进位和从最高有效位输出的进位的异或。\n\n考虑 $n=8$。给定操作数 $a=1001\\,0010_2$ 和 $b=0101\\,1111_2$，通过求 $b$ 的二进制补码并将其与 $a$ 相加（作为一次 $8$ 位操作）来计算 $a-b$。跟踪并确定进入最高有效位的进位和从最高有效位输出的进位，以根据上述定义确定标志位 $Z$、$N$、$C$ 和 $V$。将您的最终答案以单行矩阵 $\\left(R, Z, N, C, V\\right)$ 的形式报告，其中 $R$ 是 $8$ 位结果的无符号十进制值。无需四舍五入。", "solution": "该问题要求计算两个 $8$ 位二进制补码整数 $a$ 和 $b$ 的减法 $a-b$，并随后确定状态标志位 $Z$、$N$、$C$ 和 $V$。该操作将通过计算 $b$ 的二进制补码并将其与 $a$ 相加来执行。位宽固定为 $n=8$。\n\n给定的操作数是 $a = 1001\\,0010_2$ 和 $b = 0101\\,1111_2$。\n\n首先，让我们确定这些操作数在二进制补码表示法中的十进制值。对于 $n=8$，可表示的范围是从 $-2^{n-1}$ 到 $2^{n-1}-1$，即 $[-128, 127]$。\n操作数 $a$ 的最高有效位 (MSB) 为 $1$，表示它是一个负数。其绝对值通过取其二进制补码得到：\n$\\text{inv}(1001\\,0010_2) + 1_2 = 0110\\,1101_2 + 1_2 = 0110\\,1110_2$。\n$0110\\,1110_2$ 的十进制值是 $2^6 + 2^5 + 2^3 + 2^2 + 2^1 = 64 + 32 + 8 + 4 + 2 = 110_{10}$。\n因此，$a$ 的值是 $-110_{10}$。\n\n操作数 $b$ 的 MSB 为 $0$，表示它是一个正数。其值为：\n$b = 0101\\,1111_2 = 2^6 + 2^4 + 2^3 + 2^2 + 2^1 + 2^0 = 64 + 16 + 8 + 4 + 2 + 1 = 95_{10}$。\n\n算术运算为 $a - b = -110_{10} - 95_{10} = -205_{10}$。这个预期结果超出了 $[-128, 127]$ 的可表示范围，这表明将会发生二进制补码溢出。\n\n现在，我们按照规定执行操作：通过计算 $a + (-b)$ 来计算 $a-b$，其中 $-b$ 是 $b$ 的二进制补码。\n首先，求 $b$ 的二进制补码：\n1.  对 $b$ 按位取反：$\\text{inv}(0101\\,1111_2) = 1010\\,0000_2$。\n2.  加 $1$：$1010\\,0000_2 + 1_2 = 1010\\,0001_2$。\n所以，$-b = 1010\\,0001_2$。\n\n接下来，我们将 $a$ 和 $-b$ 作为一次 $8$ 位操作相加。设 $c_i$ 是进入位位置 $i$ 的进位（$i=0$ 为最低有效位 LSB，$i=7$ 为最高有效位 MSB）。\n\n$$ \\begin{array}{r@{}c@{}l}\n   \\ 1001\\,0010_2 \\quad (a) \\\\\n  +  \\ 1010\\,0001_2 \\quad (-b) \\\\\n\\hline\n\\end{array} $$\n\n让我们从右到左逐位相加，并跟踪进位。$S_i$ 是位置 $i$ 的和位。\n- 位 0: $0+1=1$。进位输出 $c_1=0$。\n- 位 1: $1+0=1$。进位输出 $c_2=0$。\n- 位 2: $0+0=0$。进位输出 $c_3=0$。\n- 位 3: $0+0=0$。进位输出 $c_4=0$。\n- 位 4: $1+0=1$。进位输出 $c_5=0$。\n- 位 5: $0+1=1$。进位输出 $c_6=0$。\n- 位 6: $0+0=0$。进位输出 $c_7=0$。（进入最高有效位的进位）\n- 位 7: $1+1=0$。进位输出 $c_8=1$。（从最高有效位输出的进位）\n\n加法过程总结如下：\n$$ \\begin{array}{r@{}c@{}c@{}c@{}c@{}c@{}c@{}c@{}c@{}c}\n\\text{进位:} & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 &   \\\\\n &  & 1 & 0 & 0 & 1 & 0 & 0 & 1 & 0 & (a) \\\\\n & + & 1 & 0 & 1 & 0 & 0 & 0 & 0 & 1 & (-b) \\\\\n\\hline\n\\text{结果:} &  & 0 & 0 & 1 & 1 & 0 & 0 & 1 & 1 & \\\\\n\\end{array} $$\n\n$8$ 位二进制结果是 $0011\\,0011_2$。\n\n现在，我们来确定标志位 $Z$、$N$、$C$、$V$ 以及值 $R$。\n要求的结果是 $(R, Z, N, C, V)$。\n\n1.  **结果 $R$**：$R$ 是 $8$ 位结果的无符号十进制值。\n    $R = 0011\\,0011_2 = 1 \\cdot 2^5 + 1 \\cdot 2^4 + 1 \\cdot 2^1 + 1 \\cdot 2^0 = 32 + 16 + 2 + 1 = 51$。\n\n2.  **零标志位 $Z$**：$Z=1$ 当且仅当结果全为零。结果 $0011\\,0011_2$ 不是 $0000\\,0000_2$。因此，$Z=0$。\n\n3.  **负标志位 $N$**：$N$ 是结果的 MSB。$0011\\,0011_2$ 的 MSB 是 $0$。因此，$N=0$。\n\n4.  **进位标志位 $C$**：$C$ 是从 MSB 输出的进位。根据我们的计算，$c_8=1$。因此，$C=1$。\n\n5.  **溢出标志位 $V$**：$V$ 是进入 MSB 的进位和从 MSB 输出的进位的异或 (XOR)。\n    进入 MSB 的进位：$c_7=0$。\n    从 MSB 输出的进位：$c_8=1$。\n    $V = c_7 \\oplus c_8 = 0 \\oplus 1 = 1$。因此，$V=1$。\n    溢出标志位置为 $1$ 与我们最初的分析一致，即两个负数（$a=-110_{10}$ 和一个被表示为负数的$-b$）相加得到了一个正数结果（$0011\\,0011_2$ 在二进制补码中等于 $51_{10}$）。\n\n最终值为：$R=51$，$Z=0$，$N=0$，$C=1$，$V=1$。\n所要求的输出是行矩阵 $(R, Z, N, C, V)$。", "answer": "$$ \\boxed{\\begin{pmatrix} 51 & 0 & 0 & 1 & 1 \\end{pmatrix}} $$", "id": "3686542"}]}