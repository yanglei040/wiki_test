{"hands_on_practices": [{"introduction": "处理器的时钟频率并非一个随意的数字，它受到物理定律的严格制约。这个实践练习将带你探究时钟周期的物理基础，即信号在逻辑电路中传播所需的时间。通过将一系列组合逻辑块划分到不同的流水线阶段中，你将亲手优化以平衡每个阶段的延迟，从而找到处理器能达到的最高时钟频率[@problem_id:3627441]。这项练习揭示了决定整个处理器“心跳”节奏的根本性设计挑战。", "problem": "同步流水线是通过在固定的组合逻辑块序列之间插入触发器寄存器来构建的，因此每个流水线阶段都包含一个连续的逻辑块子序列。一个阶段内的路径延迟是分配给该阶段的逻辑块延迟的总和。时钟周期必须足够长，以便发射的数据能够通过最慢的阶段传播，并满足接收寄存器的捕获要求，同时考虑到寄存器时序开销，如时钟到输出延迟、建立时间和时钟偏斜/不确定性。假设保持时间约束已通过设计满足，并且互连延迟已包含在每个给定逻辑块的延迟中。\n\n给定一个由$8$个组合逻辑块按固定顺序组成的严格前馈数据通路。门级时序分析报告了这些逻辑块按顺序排列的最坏情况传播延迟（单位：纳秒）如下：\n$1.4$, $0.9$, $0.7$, $1.1$, $0.6$, $0.8$, $1.0$, $0.5$。\n\n您可以插入恰好$2$组寄存器，以形成$d=3$个流水线阶段，并且阶段必须由给定顺序的连续逻辑块组形成。每个阶段到阶段的寄存器都会产生以下开销：时钟到输出延迟为$0.10\\,\\mathrm{ns}$，建立时间为$0.05\\,\\mathrm{ns}$，以及时钟偏斜/不确定性预算为$0.02\\,\\mathrm{ns}$。假设所有阶段的开销都相同。\n\n哪个选项给出了一个最优的、划分为$3$个阶段的连续分区，该分区最小化了每级的最大组合延迟，并基于此给出了可实现的最小周期和相应的最大时钟频率？请以吉赫兹 (GHz) 和兆赫兹 (MHz) 报告时钟频率，其中吉赫兹 (GHz) 和兆赫茲 (MHz) 分别表示每秒$10^{9}$和$10^{6}$个周期。\n\nA. 分区：$\\{1.4,\\,0.9\\}\\,|\\,\\{0.7,\\,1.1,\\,0.6\\}\\,|\\,\\{0.8,\\,1.0,\\,0.5\\}$。最小周期$T_{\\min}=2.57\\,\\mathrm{ns}$；最大时钟频率$f_{\\max}\\approx 0.389\\,\\mathrm{GHz}=389\\,\\mathrm{MHz}$。\n\nB. 分区：$\\{1.4,\\,0.9,\\,0.7\\}\\,|\\,\\{1.1,\\,0.6\\}\\,|\\,\\{0.8,\\,1.0,\\,0.5\\}$。最小周期$T_{\\min}=3.17\\,\\mathrm{ns}$；最大时钟频率$f_{\\max}\\approx 0.316\\,\\mathrm{GHz}=316\\,\\mathrm{MHz}$。\n\nC. 分区：$\\{1.4,\\,0.9\\}\\,|\\,\\{0.7,\\,1.1\\}\\,|\\,\\{0.6,\\,0.8,\\,1.0,\\,0.5\\}$。最小周期$T_{\\min}=3.07\\,\\mathrm{ns}$；最大时钟频率$f_{\\max}\\approx 0.326\\,\\mathrm{GHz}=326\\,\\mathrm{MHz}$。\n\nD. 分区：$\\{1.4,\\,0.9\\}\\,|\\,\\{0.7,\\,1.1,\\,0.6\\}\\,|\\,\\{0.8,\\,1.0,\\,0.5\\}$。最小周期$T_{\\min}=2.40\\,\\mathrm{ns}$；最大时钟频率$f_{\\max}\\approx 0.417\\,\\mathrm{GHz}=417\\,\\mathrm{MHz}$。", "solution": "该问题要求找到将一个包含$8$个组合逻辑块的序列划分为$3$个连续流水线阶段的最优分区，以最小化时钟周期。最小时钟周期由最慢的阶段决定，即具有最大总延迟的阶段。一个阶段的总延迟包括其组合逻辑的传播延迟和与流水线寄存器相关的开销。\n\n首先，我们验证问题陈述。\n\n### 步骤1：提取给定信息\n- 组合逻辑块数量：$n=8$。\n- 逻辑块按顺序的传播延迟（$t_1, \\dots, t_8$），单位为纳秒（$\\mathrm{ns}$）：$1.4$, $0.9$, $0.7$, $1.1$, $0.6$, $0.8$, $1.0$, $0.5$。\n- 流水线阶段数：$d=3$。这需要插入$2$组寄存器。\n- 阶段必须由连续的逻辑块构成。\n- 寄存器时序开销（所有阶段相同）：\n  - 时钟到输出延迟，$t_{CQ} = 0.10\\,\\mathrm{ns}$。\n  - 建立时间，$t_{setup} = 0.05\\,\\mathrm{ns}$。\n  - 时钟偏斜/不确定性，$t_{skew} = 0.02\\,\\mathrm{ns}$。\n- 目标是找到最小化每级最大组合延迟的分区，然后计算可实现的最小周期（$T_{\\min}$）和最大时钟频率（$f_{\\max}$）。\n\n### 步骤2：使用提取的给定信息进行验证\n问题陈述在科学上是合理的、定义明确且客观的。它描述了数字流水线设计中的一个标准优化问题。所使用的概念（组合延迟、寄存器开销、时钟周期）是计算机体系结构的基础。所提供的值是现实的。所有必要信息都已给出，且没有矛盾之处。问题有效。\n\n### 步骤3：推导解决方案\n\n第一步是找到将$8$个逻辑块划分为$3$个连续阶段的最优分区。一个分区由两个切点定义。假设第一个切点在逻辑块$i$之后，第二个在逻辑块$j$之后，其中$1 \\le i  j  8$。这三个阶段将分别包含逻辑块$\\{1, \\dots, i\\}$、$\\{i+1, \\dots, j\\}$和$\\{j+1, \\dots, 8\\}$。我们需要找到使三个阶段中最大组合延迟最小化的分区$(i, j)$。设$T_k$为第$k$个阶段的组合延迟。我们希望找到$\\min_{partitions} \\max(T_1, T_2, T_3)$。\n\n逻辑块的延迟为$t_1=1.4$, $t_2=0.9$, $t_3=0.7$, $t_4=1.1$, $t_5=0.6$, $t_6=0.8$, $t_7=1.0$, $t_8=0.5$（单位均为$\\mathrm{ns}$）。总组合延迟为$1.4+0.9+0.7+1.1+0.6+0.8+1.0+0.5 = 7.0\\,\\mathrm{ns}$。\n\n让我们评估这些分区，重点关注选项中给出的分区，以找到具有最小最大阶段延迟的分区。\n\n1.  **选项A和D中的分区：** $\\{1.4, 0.9\\} | \\{0.7, 1.1, 0.6\\} | \\{0.8, 1.0, 0.5\\}$\n    - 阶段1延迟：$T_1 = 1.4 + 0.9 = 2.3\\,\\mathrm{ns}$。\n    - 阶段2延迟：$T_2 = 0.7 + 1.1 + 0.6 = 2.4\\,\\mathrm{ns}$。\n    - 阶段3延迟：$T_3 = 0.8 + 1.0 + 0.5 = 2.3\\,\\mathrm{ns}$。\n    - 此分区的最大组合延迟为$t_{max\\_comb} = \\max(2.3, 2.4, 2.3) = 2.4\\,\\mathrm{ns}$。\n\n2.  **选项B中的分区：** $\\{1.4, 0.9, 0.7\\} | \\{1.1, 0.6\\} | \\{0.8, 1.0, 0.5\\}$\n    - 阶段1延迟：$T_1 = 1.4 + 0.9 + 0.7 = 3.0\\,\\mathrm{ns}$。\n    - 阶段2延迟：$T_2 = 1.1 + 0.6 = 1.7\\,\\mathrm{ns}$。\n    - 阶段3延迟：$T_3 = 0.8 + 1.0 + 0.5 = 2.3\\,\\mathrm{ns}$。\n    - 此分区的最大组合延迟为$t_{max\\_comb} = \\max(3.0, 1.7, 2.3) = 3.0\\,\\mathrm{ns}$。\n\n3.  **选项C中的分区：** $\\{1.4, 0.9\\} | \\{0.7, 1.1\\} | \\{0.6, 0.8, 1.0, 0.5\\}$\n    - 阶段1延迟：$T_1 = 1.4 + 0.9 = 2.3\\,\\mathrm{ns}$。\n    - 阶段2延迟：$T_2 = 0.7 + 1.1 = 1.8\\,\\mathrm{ns}$。\n    - 阶段3延迟：$T_3 = 0.6 + 0.8 + 1.0 + 0.5 = 2.9\\,\\mathrm{ns}$。\n    - 此分区的最大组合延迟为$t_{max\\_comb} = \\max(2.3, 1.8, 2.9) = 2.9\\,\\mathrm{ns}$。\n\n比较最大组合延迟：$2.4\\,\\mathrm{ns}$（对于分区A/D）、$3.0\\,\\mathrm{ns}$（对于B）和$2.9\\,\\mathrm{ns}$（对于C）。分区A/D产生了可能的最小最大阶段延迟。更详尽的搜索将确认$2.4\\,\\mathrm{ns}$确实是最优值。例如，一个分区$\\{1.4, 0.9\\}, \\{0.7, 1.1, 0.6\\}, \\{0.8, 1.0, 0.5\\}$（在逻辑块$2$和$5$之后切割）产生的延迟为$\\{2.3, 2.4, 2.3\\}$，其最大值为$2.4$。另一个分区$\\{1.4\\}, \\{0.9, 0.7, 1.1\\}, \\{0.6, 0.8, 1.0, 0.5\\}$产生的延迟为$\\{1.4, 2.7, 2.9\\}$，其最大值为$2.9$。因此，A/D中的分区确实是最优的。\n\n问题要求基于这个最优分区计算可实现的最小周期。最小时钟周期$T_{\\min}$的公式是最大组合阶段延迟与总寄存器开销之和：\n$$T_{\\min} = t_{max\\_comb} + t_{CQ} + t_{setup} + t_{skew}$$\n总寄存器开销为：\n$$t_{overhead} = 0.10\\,\\mathrm{ns} + 0.05\\,\\mathrm{ns} + 0.02\\,\\mathrm{ns} = 0.17\\,\\mathrm{ns}$$\n使用最优的最大组合延迟$t_{max\\_comb} = 2.4\\,\\mathrm{ns}$：\n$$T_{\\min} = 2.4\\,\\mathrm{ns} + 0.17\\,\\mathrm{ns} = 2.57\\,\\mathrm{ns}$$\n可实现的最大时钟频率$f_{\\max}$是最小周期的倒数：\n$$f_{\\max} = \\frac{1}{T_{\\min}} = \\frac{1}{2.57 \\times 10^{-9}\\,\\mathrm{s}}$$\n$$f_{\\max} \\approx 0.389105... \\times 10^9\\,\\mathrm{Hz}$$\n转换为吉赫兹 (GHz) 和兆赫兹 (MHz)：\n$$f_{\\max} \\approx 0.389\\,\\mathrm{GHz} = 389\\,\\mathrm{MHz}$$\n\n现在，我们根据这些计算来评估每个选项。\n\n### 逐项分析\n\n**A. 分区：$\\{1.4,\\,0.9\\}\\,|\\,\\{0.7,\\,1.1,\\,0.6\\}\\,|\\,\\{0.8,\\,1.0,\\,0.5\\}$。最小周期$T_{\\min}=2.57\\,\\mathrm{ns}$；最大时钟频率$f_{\\max}\\approx 0.389\\,\\mathrm{GHz}=389\\,\\mathrm{MHz}$。**\n- **分区：** 这是最小化最大组合阶段延迟（$2.4\\,\\mathrm{ns}$）的最优分区。\n- **最小周期：** 计算出的$T_{\\min} = 2.57\\,\\mathrm{ns}$与此选项中给出的值相符。\n- **最大时钟频率：** 计算出的$f_{\\max} \\approx 0.389\\,\\mathrm{GHz}=389\\,\\mathrm{MHz}$也与给出的值相符。\n- **结论：** 正确。\n\n**B. 分区：$\\{1.4,\\,0.9,\\,0.7\\}\\,|\\,\\{1.1,\\,0.6\\}\\,|\\,\\{0.8,\\,1.0,\\,0.5\\}$。最小周期$T_{\\min}=3.17\\,\\mathrm{ns}$；最大时钟频率$f_{\\max}\\approx 0.316\\,\\mathrm{GHz}=316\\,\\mathrm{MHz}$。**\n- **分区：** 这个分区不是最优的。其最大组合延迟为$3.0\\,\\mathrm{ns}$，大于最优值$2.4\\,\\mathrm{ns}$。因此，它不会导致可实现的最小周期。给出的数字（$T_{\\min} = 3.0\\,\\mathrm{ns} + 0.17\\,\\mathrm{ns} = 3.17\\,\\mathrm{ns}$和$f_{\\max} = 1/3.17\\,\\mathrm{ns} \\approx 0.316\\,\\mathrm{GHz}$）对于这个特定分区是一致的，但分区本身是次优的。\n- **结论：** 错误。\n\n**C. 分区：$\\{1.4,\\,0.9\\}\\,|\\,\\{0.7,\\,1.1\\}\\,|\\,\\{0.6,\\,0.8,\\,1.0,\\,0.5\\}$。最小周期$T_{\\min}=3.07\\,\\mathrm{ns}$；最大时钟频率$f_{\\max}\\approx 0.326\\,\\mathrm{GHz}=326\\,\\mathrm{MHz}$。**\n- **分区：** 这个分区不是最优的。其最大组合延迟为$2.9\\,\\mathrm{ns}$，大于最优值$2.4\\,\\mathrm{ns}$。它不会导致可实现的最小周期。与选项B类似，后续的计算（$T_{\\min} = 2.9\\,\\mathrm{ns} + 0.17\\,\\mathrm{ns} = 3.07\\,\\mathrm{ns}$和$f_{\\max} = 1/3.07\\,\\mathrm{ns} \\approx 0.326\\,\\mathrm{GHz}$）对于给定的次优分区是一致的，但这并不能回答问题。\n- **结论：** 错误。\n\n**D. 分区：$\\{1.4,\\,0.9\\}\\,|\\,\\{0.7,\\,1.1,\\,0.6\\}\\,|\\,\\{0.8,\\,1.0,\\,0.5\\}$。最小周期$T_{\\min}=2.40\\,\\mathrm{ns}$；最大时钟频率$f_{\\max}\\approx 0.417\\,\\mathrm{GHz}=417\\,\\mathrm{MHz}$。**\n- **分区：** 这是正确的最优分区。\n- **最小周期：** 给出的值为$T_{\\min} = 2.40\\,\\mathrm{ns}$。这是最大组合延迟$t_{max\\_comb}$，但它错误地忽略了$0.17\\,\\mathrm{ns}$的总寄存器开销。正确的最小周期是$2.57\\,\\mathrm{ns}$。\n- **最大时钟频率：** 给出的频率是基于错误的周期计算的：$1/(2.40\\,\\mathrm{ns}) \\approx 0.417\\,\\mathrm{GHz}$。由于周期是错误的，频率也是错误的。\n- **结论：** 错误。\n\n根据分析，只有选项A提供了正确的最优分区以及由此正确计算出的最小周期和最大时钟频率。", "answer": "$$\\boxed{A}$$", "id": "3627441"}, {"introduction": "在确定了时钟频率的物理来源之后，下一步是学习如何运用它来衡量实际性能。本练习聚焦于基本关系式 $T = 1/f$，指导你将抽象的处理器周期数转换为具体的物理时间单位，例如纳秒[@problem_id:3627533]。通过在一个模拟的缓存层级结构中应用这一转换，你将计算出内存访问的真实延迟，并估算出一个任务的平均执行时间，这是性能分析中的一项核心技能。", "problem": "中央处理器（CPU）以离散的时钟周期执行指令。根据定义，时钟频率 $f$ 是每秒完成的周期数，而周期时间 $T$ 是一个周期的持续时间，以秒为单位。\n\n考虑一台机器，其缓存层次结构具有以下以周期为单位测量的延迟行为：一级（L1）缓存命中需要 $4$ 个周期，二级（L2）缓存命中需要 $12$ 个周期，三级（L3）缓存命中需要 $40$ 个周期，而未命中转到动态随机存取存储器（DRAM）需要 $200$ 个周期。对于一个特定的工作负载，内存访问在各级缓存命中或转到DRAM的概率分别为：L1为 $0.92$，L2为 $0.06$，L3为 $0.015$，DRAM为 $0.005$。每次循环迭代包含一个需要 $6$ 个周期的计算阶段和一次遵循这些概率的内存访问。\n\n任务：\n1. 从上述定义出发，推导一个关联周期时间 $T$ 和时钟频率 $f$ 的表达式。\n2. 使用你的表达式，确定当 $f \\in \\{1,2,3,4\\}\\ \\mathrm{GHz}$ 时，周期时间 $T$ 的值。\n3. 当 $f=3\\ \\mathrm{GHz}$ 时，以周期和纳秒为单位解释缓存和内存事件的持续时间。\n4. 对于一个运行在 $f=3\\ \\mathrm{GHz}$ 的处理器，计算每次循环迭代的期望时间，以纳秒为单位。\n\n将任务4的最终答案以纳秒表示，并将最终结果四舍五入到四位有效数字。", "solution": "问题陈述在内部是一致的，科学上基于计算机体系结构的原理，并且是适定的，为得到唯一解提供了所有必要的数据。我们按照概述的任务进行。\n\n给定的数据如下：\n- L1缓存命中延迟：$L_1 = 4$ 个周期\n- L2缓存命中延迟：$L_2 = 12$ 个周期\n- L3缓存命中延迟：$L_3 = 40$ 个周期\n- DRAM访问延迟：$L_M = 200$ 个周期\n- L1命中概率：$P_1 = 0.92$\n- L2命中概率：$P_2 = 0.06$\n- L3命中概率：$P_3 = 0.015$\n- DRAM访问概率：$P_M = 0.005$\n- 计算阶段持续时间：$C_{compute} = 6$ 个周期\n\n首先，对概率进行一致性检查：$P_1 + P_2 + P_3 + P_M = 0.92 + 0.06 + 0.015 + 0.005 = 1.00$。这些事件构成了一个完备的概率空间，符合要求。\n\n**任务1：推导一个关联周期时间 $T$ 和时钟频率 $f$ 的表达式。**\n\n根据定义，时钟频率 $f$ 是单位时间（秒）内执行的周期数。其单位是赫兹（$\\mathrm{Hz}$），等价于 $s^{-1}$。\n$$f \\left[ \\frac{\\text{cycles}}{\\text{second}} \\right]$$\n周期时间 $T$ 是单个周期的持续时间，或每个周期所经过的时间。其单位是秒（$s$）。\n$$T \\left[ \\frac{\\text{seconds}}{\\text{cycle}} \\right]$$\n从这些定义可以明显看出，一个量是另一个量的倒数。\n$$T = \\frac{1}{f}$$\n\n**任务2：确定当 $f \\in \\{1,2,3,4\\}\\ \\mathrm{GHz}$ 时，周期时间 $T$ 的值。**\n\n我们使用表达式 $T = \\frac{1}{f}$。注意，$1\\ \\mathrm{GHz} = 1 \\times 10^9\\ \\mathrm{Hz}$。得到的周期时间 $T$ 将以秒为单位，可以方便地表示为纳秒（$1 \\text{ ns} = 10^{-9} \\text{ s}$）。\n\n- 对于 $f = 1\\ \\mathrm{GHz} = 1 \\times 10^9\\ \\mathrm{s}^{-1}$：\n$$T = \\frac{1}{1 \\times 10^9\\ \\mathrm{s}^{-1}} = 1 \\times 10^{-9}\\ \\mathrm{s} = 1\\ \\mathrm{ns}$$\n- 对于 $f = 2\\ \\mathrm{GHz} = 2 \\times 10^9\\ \\mathrm{s}^{-1}$：\n$$T = \\frac{1}{2 \\times 10^9\\ \\mathrm{s}^{-1}} = 0.5 \\times 10^{-9}\\ \\mathrm{s} = 0.5\\ \\mathrm{ns}$$\n- 对于 $f = 3\\ \\mathrm{GHz} = 3 \\times 10^9\\ \\mathrm{s}^{-1}$：\n$$T = \\frac{1}{3 \\times 10^9\\ \\mathrm{s}^{-1}} = \\frac{1}{3} \\times 10^{-9}\\ \\mathrm{s} \\approx 0.333\\ \\mathrm{ns}$$\n- 对于 $f = 4\\ \\mathrm{GHz} = 4 \\times 10^9\\ \\mathrm{s}^{-1}$：\n$$T = \\frac{1}{4 \\times 10^9\\ \\mathrm{s}^{-1}} = 0.25 \\times 10^{-9}\\ \\mathrm{s} = 0.25\\ \\mathrm{ns}$$\n\n**任务3：当 $f=3\\ \\mathrm{GHz}$ 时，以周期和纳秒为单位解释缓存和内存事件的持续时间。**\n\n当 $f = 3\\ \\mathrm{GHz}$ 时，周期时间为 $T = \\frac{1}{3}\\ \\mathrm{ns}$。一个需要 $C$ 个周期的事件，其持续时间（以纳秒为单位）由 $D = C \\times T$ 给出。\n\n- L1缓存命中：$L_1 = 4$ 个周期。持续时间 $D_1 = 4 \\times \\frac{1}{3}\\ \\mathrm{ns} = \\frac{4}{3}\\ \\mathrm{ns} \\approx 1.33\\ \\mathrm{ns}$。\n- L2缓存命中：$L_2 = 12$ 个周期。持续时间 $D_2 = 12 \\times \\frac{1}{3}\\ \\mathrm{ns} = 4\\ \\mathrm{ns}$。\n- L3缓存命中：$L_3 = 40$ 个周期。持续时间 $D_3 = 40 \\times \\frac{1}{3}\\ \\mathrm{ns} = \\frac{40}{3}\\ \\mathrm{ns} \\approx 13.33\\ \\mathrm{ns}$。\n- DRAM访问：$L_M = 200$ 个周期。持续时间 $D_M = 200 \\times \\frac{1}{3}\\ \\mathrm{ns} = \\frac{200}{3}\\ \\mathrm{ns} \\approx 66.67\\ \\mathrm{ns}$。\n\n**任务4：对于一个运行在 $f=3\\ \\mathrm{GHz}$ 的处理器，计算每次循环迭代的期望时间，以纳秒为单位。**\n\n单次循环迭代包含一个计算阶段和一次内存访问。一次循环迭代的总时间是这两部分时间之和。由于内存访问时间是概率性的，我们必须计算内存访问的期望周期数。\n\n单次内存访问的期望周期数，记为 $E[C_{mem}]$，是每个可能事件延迟的加权平均值，其中权重是这些事件的概率。\n$$E[C_{mem}] = P_1 L_1 + P_2 L_2 + P_3 L_3 + P_M L_M$$\n代入给定值：\n$$E[C_{mem}] = (0.92 \\times 4) + (0.06 \\times 12) + (0.015 \\times 40) + (0.005 \\times 200)$$\n$$E[C_{mem}] = 3.68 + 0.72 + 0.60 + 1.00$$\n$$E[C_{mem}] = 6.00 \\text{ cycles}$$\n这也被称为以周期表示的平均内存访问时间（AMAT）。\n\n每次循环迭代的总期望周期数 $E[C_{loop}]$ 是计算周期数和期望内存访问周期数之和。\n$$E[C_{loop}] = C_{compute} + E[C_{mem}]$$\n$$E[C_{loop}] = 6 + 6 = 12 \\text{ cycles}$$\n为了求出每次循环迭代的期望时间 $E[T_{loop}]$，我们将期望周期数乘以周期时间 $T$。对于 $f=3\\ \\mathrm{GHz}$，我们有 $T = \\frac{1}{3}\\ \\mathrm{ns}$。\n$$E[T_{loop}] = E[C_{loop}] \\times T$$\n$$E[T_{loop}] = 12 \\text{ cycles} \\times \\frac{1}{3}\\ \\frac{\\mathrm{ns}}{\\mathrm{cycle}}$$\n$$E[T_{loop}] = 4\\ \\mathrm{ns}$$\n问题要求答案四舍五入到四位有效数字。确切答案是 $4$。为了用四位有效数字表示，我们写作 $4.000$。", "answer": "$$\n\\boxed{4.000}\n$$", "id": "3627533"}, {"introduction": "虽然高时钟频率很吸引人，但它只是复杂性能图景中的一部分。这个练习将时钟频率 $f$ 置于完整的CPU性能公式（执行时间 = $IC \\times CPI / f$）中进行考量。通过比较硬件提升（增加 $f$）和软件优化（减少指令数 $IC$）所带来的加速效果，你将更深刻地理解不同类型的改进对整体性能的贡献[@problem_id:3627419]。这揭示了一个重要的观点：在性能公式中，不同因素的百分比变化所产生的影响并非总是等效的。", "problem": "一个单线程程序在给定的处理器上执行。设基准程序执行的特征为：指令数 (IC) 为 $IC_0$，平均每条指令周期数 (CPI) 为 $CPI_0$，时钟频率为 $f_0$。考虑两种可能的改进，每种改进都独立应用，且每种改进都保持 $CPI$ 不变：\n- 软件改进：指令数减少到 $(1 - 0.2)\\,IC_0$，同时钟频率保持为 $f_0$。\n- 硬件改进：时钟频率增加到 $(1 + 0.2)\\,f_0$，同时指令数保持为 $IC_0$。\n\n仅使用关联程序执行时间、周期数和时钟频率的基本定义，推导每种情况下相对于基准的加速比，然后计算以下比率：\n$$\\frac{\\text{软件改进带来的加速比}}{\\text{硬件改进带来的加速比}}。$$\n请以最简分数形式给出你的最终答案。该比率为无量纲值，因此不要包含单位。不要四舍五入；请给出精确值。", "solution": "分析始于决定处理器性能的基本关系。一个程序的总执行时间 $T$ 由执行的指令数（Instruction Count, $IC$）、每条指令所需的平均时钟周期数 ($CPI$) 以及处理器的时钟周期时间 ($\\tau_c$) 或其倒数，即时钟频率 ($f = \\frac{1}{\\tau_c}$) 决定。该关系式如下：\n$$T = IC \\times CPI \\times \\tau_c = \\frac{IC \\times CPI}{f}$$\n\n我们的任务是评估两种独立改进相对于基准执行所产生的加速比。加速比 $S$ 定义为改进前的执行时间 ($T_{old}$) 与改进后的执行时间 ($T_{new}$)之比：\n$$S = \\frac{T_{old}}{T_{new}}$$\n\n首先，我们使用给定的初始参数确定基准执行时间 $T_0$：\n$$T_0 = \\frac{IC_0 \\times CPI_0}{f_0}$$\n\n接下来，我们分析软件改进。设新参数用下标 'sw' 表示。\n指令数减少到原来的 $(1 - 0.2)$：$IC_{sw} = (1 - 0.2)IC_0 = 0.8 IC_0$。\n$CPI$ 和时钟频率保持不变：$CPI_{sw} = CPI_0$ 且 $f_{sw} = f_0$。\n软件改进后的执行时间 $T_{sw}$ 为：\n$$T_{sw} = \\frac{IC_{sw} \\times CPI_{sw}}{f_{sw}} = \\frac{(0.8 IC_0) \\times CPI_0}{f_0}$$\n由软件改进带来的加速比 $S_{sw}$ 是基准时间与新时间的比值：\n$$S_{sw} = \\frac{T_0}{T_{sw}} = \\frac{\\frac{IC_0 \\times CPI_0}{f_0}}{\\frac{0.8 IC_0 \\times CPI_0}{f_0}}$$\n$IC_0$、$CPI_0$ 和 $f_0$ 项相互抵消，得到：\n$$S_{sw} = \\frac{1}{0.8} = \\frac{1}{\\frac{8}{10}} = \\frac{10}{8} = \\frac{5}{4}$$\n\n现在，我们分析硬件改进。设新参数用下标 'hw' 表示。\n时钟频率增加到原来的 $(1 + 0.2)$：$f_{hw} = (1 + 0.2)f_0 = 1.2 f_0$。\n指令数和 $CPI$ 保持不变：$IC_{hw} = IC_0$ 且 $CPI_{hw} = CPI_0$。\n硬件改进后的执行时间 $T_{hw}$ 为：\n$$T_{hw} = \\frac{IC_{hw} \\times CPI_{hw}}{f_{hw}} = \\frac{IC_0 \\times CPI_0}{1.2 f_0}$$\n由硬件改进带来的加速比 $S_{hw}$ 是基准时间与这个新时间的比值：\n$$S_{hw} = \\frac{T_0}{T_{hw}} = \\frac{\\frac{IC_0 \\times CPI_0}{f_0}}{\\frac{IC_0 \\times CPI_0}{1.2 f_0}}$$\n$IC_0$、$CPI_0$ 和 $f_0$ 项相互抵消，得到：\n$$S_{hw} = \\frac{1}{\\frac{1}{1.2}} = 1.2 = \\frac{12}{10} = \\frac{6}{5}$$\n\n最后，我们计算所要求的软件改进加速比与硬件改进加速比的比率：\n$$\\frac{S_{sw}}{S_{hw}} = \\frac{\\frac{5}{4}}{\\frac{6}{5}}$$\n除以一个分数，等于乘以它的倒数：\n$$\\frac{S_{sw}}{S_{hw}} = \\frac{5}{4} \\times \\frac{5}{6} = \\frac{5 \\times 5}{4 \\times 6} = \\frac{25}{24}$$\n这个分数已经是其最简形式，因为分子是 $5^2$，分母是 $2^3 \\times 3$，所以它们没有公因数。", "answer": "$$\\boxed{\\frac{25}{24}}$$", "id": "3627419"}]}