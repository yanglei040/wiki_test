{"hands_on_practices": [{"introduction": "脉动计数器的典型特征是其顺序性，即一个触发器触发下一个触发器。虽然这种设计很简单，但它会产生一个需要时间来传播的“脉动”变化。第一个练习 [@problem_id:1955756] 将帮助您量化这种累积延迟，这是限制计数器最高工作速度的一个基本因素。", "problem": "一个数字控制系统依赖一个12位异步二进制计数器（通常称为纹波计数器）来进行事件排序。该计数器由级联的T触发器构成，其中一个触发器的输出作为下一个触发器的时钟输入。制造商规定，每个独立的触发器具有15纳秒 (ns) 的时钟到输出传播延迟。为确保系统操作的完整性，确定在时钟脉冲施加到第一级后，计数器达到稳定值所需的最长时间至关重要。这个持续时间被称为总的最坏情况传播延迟。\n\n计算这个12位纹波计数器的总的最坏情况传播延迟。答案以纳秒 (ns) 为单位表示。", "solution": "纹波（异步）计数器是通过级联T触发器形成的，每一级的输出都作为下一级的时钟输入。如果每个触发器都有一个时钟到输出的传播延迟 $t_{pd}$，那么第一级的变化必须依次传播通过后续的每一级。最坏情况下的建立时间发生在变化波及所有 $N$ 级时（例如，一个导致每个触发器都翻转的转换）。\n\n因此，总的最坏情况传播延迟是各级延迟的总和：\n$$\nT_{\\text{wc}} = N \\cdot t_{pd}.\n$$\n对于一个 $12$ 位纹波计数器，$N = 12$，且每个触发器的 $t_{pd} = 15 \\text{ ns}$，\n$$\nT_{\\text{wc}} = 12 \\times 15 \\text{ ns} = 180 \\text{ ns}.\n$$\n因此，在时钟脉冲施加到第一级后，计数器达到稳定所需的最长时间是 $180 \\text{ ns}$。", "answer": "$$\\boxed{180}$$", "id": "1955756"}, {"introduction": "除了简单的计数，我们常常需要计数器在一个特定数量的状态之间循环。这个实践 [@problem_id:1947821] 探讨了如何将一个标准的二进制计数器转换为“模N计数器”。您将使用组合逻辑来检测一个目标状态并异步复位计数器，这是数字设计中一种常见且重要的技术。", "problem": "一个异步4位二进制纹波计数器由四个负边沿触发的J-K触发器构成，分别标记为 FF0, FF1, FF2, 和 FF3。这些触发器的输出分别为 $Q_0, Q_1, Q_2, Q_3$，其中 $Q_0$ 是最低有效位 (LSB)，$Q_3$ 是最高有效位 (MSB)。对于所有触发器，J 和 K 输入端永久连接到逻辑高电平。外部时钟信号仅施加到 FF0 的时钟输入端。每个后续触发器（FF1, FF2, FF3）的时钟输入由前一个触发器的输出驱动（例如，FF1 的时钟连接到 $Q_0$ 输出）。所有四个触发器共享一个公共的低电平有效异步清零输入，表示为 `CLR_N`。\n\n为了将此计数器修改为模9计数器（即一个从0计数到8然后复位到0的计数器），使用一个组合逻辑门来驱动 `CLR_N` 线。该逻辑门的输入选自计数器的输出（$Q_3, Q_2, Q_1, Q_0$）。计数器应在尝试进入十进制9这个无效状态时立即复位。\n\n以下哪种逻辑门配置正确地实现了模9计数器所需的复位逻辑？\n\nA. 一个双输入与门，其输入连接到 $Q_3$ 和 $Q_0$。\n\nB. 一个双输入与门，其输入连接到 $Q_2$ 和 $Q_1$。\n\nC. 一个双输入与非门，其输入连接到 $Q_3$ 和 $Q_1$。\n\nD. 一个双输入与非门，其输入连接到 $Q_3$ 和 $Q_0$。\n\nE. 一个双输入或非门，其输入连接到 $Q_3$ 和 $Q_0$。", "solution": "问题要求我们为一个4位异步计数器设计复位逻辑，使其成为一个模9计数器。\n\n首先，我们来理解模9计数器的期望行为。它应该按顺序计数十进制状态 0, 1, 2, 3, 4, 5, 6, 7 和 8。使用输出 $Q_3Q_2Q_1Q_0$ 对应的二进制表示是从 `0000` 到 `1000`。计数器不能停留在对应于十进制9的状态。当计数器达到十进制9的状态时，必须立即复位到初始状态，即十进制0 (`0000`)。\n\n触发复位的状态是十进制9。在二进制中，这个状态表示为 $Q_3Q_2Q_1Q_0 = 1001$。这是计数器在达到最大有效计数值8 (`1000`) 后将要尝试进入的第一个无效状态。\n\n问题陈述中提到，触发器有一个公共的低电平有效异步清零输入 `CLR_N`。“低电平有效”输入意味着当 `CLR_N` 线上接收到逻辑 `0` 时，会触发复位动作（将触发器输出清零）。在所有其他时间，`CLR_N` 线必须处于逻辑 `1`，以允许计数器正常工作。\n\n因此，我们的任务是设计一个逻辑电路，其输出连接到 `CLR_N` 并满足以下条件：\n1. 当计数器状态为 $Q_3Q_2Q_1Q_0 = 1001$ 时，输出为逻辑 `0`。\n2. 对于从 $Q_3Q_2Q_1Q_0 = 0000$ 到 $Q_3Q_2Q_1Q_0 = 1000$ 的所有有效计数状态，输出为逻辑 `1`。\n\n让我们分析复位状态 `1001`。在此状态下，输出为 $Q_3=1$, $Q_2=0$, $Q_1=0$, 和 $Q_0=1$。我们需要找到一个能够检测这一特定条件的简单逻辑门。逻辑门的输出取决于其输入。我们可以使用触发器输出 $Q_0, Q_1, Q_2, Q_3$ 作为复位逻辑门的输入。\n\n考虑为复位产生逻辑 `0` 所需的条件。我们在寻找一个当状态为 `1001` 时输出 `0` 的门。\n检测特定输入组合均为高电平的最直接方法是使用与门或与非门。\n- 与门仅在所有输入都为 `1` 时输出 `1`。\n- 与非门仅在所有输入都为 `1` 时输出 `0`。\n\n因为我们需要一个逻辑 `0` 来触发低电平有效的 `CLR_N`，所以与非门是自然的选择。对于我们想要检测的状态，与非门的输入应该全部为 `1`。\n在状态 `1001` 中，为 `1` 的位是 $Q_3$ 和 $Q_0$。因此，如果我们将 $Q_3$ 和 $Q_0$ 连接到一个双输入与非门的输入端，该门的输出将是：\n`输出 = NOT (Q3 AND Q0)`\n\n让我们测试一下这个逻辑。当计数器试图进入状态9 (`1001`) 时，与非门的输入将是 $Q_3=1$ 和 $Q_0=1$。\n`输出 = NOT (1 AND 1) = NOT(1) = 0`。\n这个逻辑 `0` 将激活 `CLR_N` 线并将所有触发器复位到 `0000`。\n\n现在我们必须验证这个逻辑不会在有效的计数序列（0到8）期间导致过早复位。\n复位的条件是 $Q_3=1$ 且 $Q_0=1$。让我们检查从0到8的状态：\n- 状态 0 (`0000`): $Q_3=0, Q_0=0$。输出 = NOT(0 AND 0) = 1。不复位。\n- 状态 1 (`0001`): $Q_3=0, Q_0=1$。输出 = NOT(0 AND 1) = 1。不复位。\n- ...\n- 状态 8 (`1000`): $Q_3=1, Q_0=0$。输出 = NOT(1 AND 0) = 1。不复位。\n在从0到8的整个有效计数序列中，条件（$Q_3=1$ 且 $Q_0=1$）永远不会同时满足。第一次满足这个条件是在状态9 (`1001`)。因此，将 `CLR_N` 线连接到一个输入为 $Q_3$ 和 $Q_0$ 的双输入与非门的输出，将正确地实现模9计数器。\n\n让我们评估给定的选项：\nA. 一个双输入与门，输入为 $Q_3$ 和 $Q_0$：在状态9，输出将是 `1 AND 1 = 1`。这不会触发低电平有效复位。\nB. 一个双输入与门，输入为 $Q_2$ 和 $Q_1$：这将在状态6 (`0110`) 输出1，不符合要求。\nC. 一个双输入与非门，输入为 $Q_3$ 和 $Q_1$：这将在 $Q_3=1$ 且 $Q_1=1$ 时输出0。这个条件首次出现在状态10 (`1010`)。这将创建一个模10计数器，而不是模9计数器。\nD. 一个双输入与非门，输入为 $Q_3$ 和 $Q_0$：如上推导，这是正确的配置。它检测状态9 (`1001`) 并输出一个 `0` 来触发复位。\nE. 一个双输入或非门，输入为 $Q_3$ 和 $Q_0$：输出是 `NOT (Q3 OR Q0)`。如果 $Q_3$ 或 $Q_0$ 中任一个为 `1`，输出就为 `0`。这将在状态1 (`0001`) 引起复位，这是不正确的。\n\n因此，正确的配置是一个双输入与非门，其输入连接到 $Q_3$ 和 $Q_0$。", "answer": "$$\\boxed{D}$$", "id": "1947821"}, {"introduction": "脉动效应带来的延迟不仅仅是速度上的限制，它还可能在解码逻辑中产生“毛刺”或伪脉冲。这个高级练习 [@problem_id:3674130] 将挑战您从第一性原理出发，分析这些毛刺在状态转换期间是如何产生的。通过考虑不同速度的触发器，您将学习如何通过元器件选择来减轻这些不希望出现的时序瑕疵。", "problem": "一个四位异步脉动计数器由四个边沿触发的T型触发器（T flip-flops）级联而成。设二进制状态表示为 $\\{X_{3},X_{2},X_{1},X_{0}\\}$，其中 $X_{3}$ 是最高有效位（MSB），$X_{0}$ 是最低有效位（LSB）。在施加到 $X_{0}$ 的每个有效时钟沿上，脉动进位向上（高位）传播：$X_{0}$ 在其自身的时钟到Q输出（clock-to-$Q$）传播延迟后首先翻转，而对于 $k \\geq 1$ 的任何 $X_{k}$，仅在 $X_{k-1}$ 翻转之后才会翻转，并累积每个中间级的时钟到Q输出延迟。假设所有器件都采用理想的传输延迟模型：每个触发器表现出固定的时钟到Q输出传播延迟，通过任何逻辑门的延迟也是固定的传输延迟；导线延迟可忽略不计。\n\n给定四个物理上不同的T型触发器：一个“慢”器件，其时钟到Q输出延迟为 $t_{s} = 5.00\\,\\text{ns}$；三个“快”器件，其时钟到Q输出延迟均为 $t_{f} = 2.00\\,\\text{ns}$。您可以将这四个器件任意分配给位位置 $X_{3},X_{2},X_{1},X_{0}$，但每个位置必须且只能由一个器件占用。\n\n一个解码函数由单个四输入或非门（NOR gate）实现，其输入为计数器输出 $\\{X_{3},X_{2},X_{1},X_{0}\\}$；因此，当且仅当计数器状态为 $\\{0,0,0,0\\}$ 时，其输出为逻辑高电平。该或非门本身具有固定的传输传播延迟 $\\tau_{g} = 0.50\\,\\text{ns}$。该系统运行时，计数器自由运行，或非门的输出在一个理想的示波器上进行观察。由于异步脉动，当计数器在多位转换期间经过中间状态时，解码器会产生虚假的窄脉冲（“毛刺”，glitches）。\n\n仅从上述核心定义（异步脉动时序和传输传播延迟）出发，从第一性原理推导位翻转的时间顺序如何产生一个瞬态窗口，在此窗口期间，当计数器脉动地经过一系列中间状态时，解码器会短暂地看到全零模式。然后，考虑单个计数事件中所有可能在或非门输入端产生这种瞬态全零模式的计数器转换，对于给定的触发器到位位置的分配，确定或非门输出端的最坏情况毛刺脉冲宽度。最后，选择将慢速器件分配给LSB $X_{0}$ 或MSB $X_{3}$，以最小化这个最坏情况的观测毛刺宽度，并数值计算出相应的最小最坏情况毛刺宽度。\n\n最终数值答案以纳秒为单位表示，并四舍五入到三位有效数字。", "solution": "**第一步：理解毛刺产生的机制**\n\n问题描述了一个四输入或非门，当且仅当其所有输入 $\\{X_3, X_2, X_1, X_0\\}$ 均为0时，其输出为高电平。一个“毛刺”是指在计数器从一个非零状态转换到另一个非零状态时，或非门输出端产生的短暂的高电平脉冲。这只可能在转换期间，计数器瞬时地呈现出 $\\{0,0,0,0\\}$ 状态时发生。\n\n在异步脉动计数器中，位的翻转是顺序发生的。设分配给位 $X_k$ 的触发器的传播延迟为 $t_{pd,k}$。假设计数器向上计数，当一个时钟沿到达时，$X_0$ 首先翻转。如果 $X_0$ 从1变为0，这个下降沿会触发 $X_1$ 翻转。如果 $X_1$ 也从1变为0，它会触发 $X_2$，以此类推。这种连锁反应导致了瞬态中间状态。\n\n**第二步：识别产生毛刺的状态转换**\n\n我们需要找到那些在转换过程中会短暂经过 $\\{0,0,0,0\\}$ 状态的向上计数转换。这发生在所有活动的低位（值为1）都必须翻转为0，以使更高位的第一个0翻转为1。\n考虑以下转换：\n1.  **从 1 到 2 ($\\{0,0,0,1\\} \\to \\{0,0,1,0\\}$)**:\n    - 初始状态为 $\\{0,0,0,1\\}$。\n    - 在时钟沿之后，$X_0$ 从1翻转为0。这发生在时间 $t_1 = t_{pd,0}$。此时，计数器状态为 $\\{0,0,0,0\\}$。\n    - $X_0$ 的翻转触发 $X_1$ 从0翻转为1。这发生在时间 $t_2 = t_{pd,0} + t_{pd,1}$。此时，计数器状态变为 $\\{0,0,1,0\\}$。\n    - 在时间窗口 $[t_1, t_2)$ 内，计数器状态为 $\\{0,0,0,0\\}$。毛刺的宽度为 $W_1 = t_2 - t_1 = t_{pd,1}$。\n\n2.  **从 3 到 4 ($\\{0,0,1,1\\} \\to \\{0,1,0,0\\}$)**:\n    - 初始状态为 $\\{0,0,1,1\\}$。\n    - $X_0$ 从1翻转为0，时间 $t_{pd,0}$。\n    - $X_0$ 的翻转触发 $X_1$ 从1翻转为0。这发生在时间 $t_1 = t_{pd,0} + t_{pd,1}$。此时，状态变为 $\\{0,0,0,0\\}$。\n    - $X_1$ 的翻转触发 $X_2$ 从0翻转为1。这发生在时间 $t_2 = t_{pd,0} + t_{pd,1} + t_{pd,2}$。\n    - 毛刺的宽度为 $W_2 = t_2 - t_1 = t_{pd,2}$。\n\n3.  **从 7 到 8 ($\\{0,1,1,1\\} \\to \\{1,0,0,0\\}$)**:\n    - 初始状态为 $\\{0,1,1,1\\}$。\n    - 经过 $X_0 \\to X_1 \\to X_2$ 的连锁翻转，$X_2$ 在时间 $t_1 = t_{pd,0} + t_{pd,1} + t_{pd,2}$ 从1变为0。此时，状态变为 $\\{0,0,0,0\\}$。\n    - $X_2$ 的翻转触发 $X_3$ 从0翻转为1。这发生在时间 $t_2 = t_{pd,0} + t_{pd,1} + t_{pd,2} + t_{pd,3}$。\n    - 毛刺的宽度为 $W_3 = t_2 - t_1 = t_{pd,3}$。\n\n其他多位转换（如 5->6, 9->10 等）不会经过全零状态。因此，可能产生的毛刺宽度为 $t_{pd,1}$、$t_{pd,2}$ 和 $t_{pd,3}$。最坏情况下的毛刺宽度是这些值的最大值：\n$$W_{\\text{worst}} = \\max(t_{pd,1}, t_{pd,2}, t_{pd,3})$$\n注意，或非门的延迟 $\\tau_g$ 会延迟整个毛刺脉冲，但不会改变其宽度，因为它对脉冲的上升沿和下降沿施加相同的延迟。\n\n**第三步：优化触发器分配以最小化最坏情况毛刺宽度**\n\n我们有一个慢速器件 ($t_s = 5.00\\,\\text{ns}$) 和三个快速器件 ($t_f = 2.00\\,\\text{ns}$)。我们的目标是分配这四个器件的传播延迟 ($t_{pd,0}, t_{pd,1}, t_{pd,2}, t_{pd,3}$) 以最小化 $W_{\\text{worst}}$。\n\n从上面的公式可以看出，$W_{\\text{worst}}$ 仅取决于 $t_{pd,1}, t_{pd,2}, t_{pd,3}$。$t_{pd,0}$ 的值不影响毛刺的宽度。为了使 $\\max(t_{pd,1}, t_{pd,2}, t_{pd,3})$ 最小，我们必须将所有可用的快速器件分配给位 $X_1, X_2, X_3$。这就意味着慢速器件必须被分配给位 $X_0$。\n\n- **优化分配方案**：将慢速器件 ($t_s$) 分配给 $X_0$，将快速器件 ($t_f$) 分配给 $X_1, X_2, X_3$。\n  - $t_{pd,0} = t_s = 5.00\\,\\text{ns}$\n  - $t_{pd,1} = t_f = 2.00\\,\\text{ns}$\n  - $t_{pd,2} = t_f = 2.00\\,\\text{ns}$\n  - $t_{pd,3} = t_f = 2.00\\,\\text{ns}$\n\n在这种配置下，最小化的最坏情况毛刺宽度为：\n$$W_{\\text{worst, min}} = \\max(t_f, t_f, t_f) = \\max(2.00, 2.00, 2.00) = 2.00\\,\\text{ns}$$\n\n**第四步：与题目要求的另一种分配方案比较**\n\n题目要求比较将慢速器件分配给LSB ($X_0$)与MSB ($X_3$) 的情况。\n\n- **慢速器件在 $X_0$ (LSB)**：如上所述，最小化的最坏情况毛刺宽度是 $2.00\\,\\text{ns}$。\n\n- **慢速器件在 $X_3$ (MSB)**：\n  - $t_{pd,3} = t_s = 5.00\\,\\text{ns}$\n  - $t_{pd,0}, t_{pd,1}, t_{pd,2}$ 会是三个快速器件，因此 $t_{pd,1} = t_f = 2.00\\,\\text{ns}$ 且 $t_{pd,2} = t_f = 2.00\\,\\text{ns}$。\n  - 这种配置下的最坏情况毛刺宽度为：\n    $$W_{\\text{worst}} = \\max(t_{pd,1}, t_{pd,2}, t_{pd,3}) = \\max(2.00, 2.00, 5.00) = 5.00\\,\\text{ns}$$\n\n比较两种方案，将慢速器件放在LSB ($X_0$) 位置可以得到最小的最坏情况毛刺宽度，其值为 $2.00\\,\\text{ns}$。\n\n最终答案要求四舍五入到三位有效数字，即 $2.00$。", "answer": "$$\\boxed{2.00}$$", "id": "3674130"}]}