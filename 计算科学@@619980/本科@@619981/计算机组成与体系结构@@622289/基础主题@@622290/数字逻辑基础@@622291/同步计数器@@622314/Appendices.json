{"hands_on_practices": [{"introduction": "同步计数器的一个常见应用是生成嵌套序列，例如在屏幕上扫描像素坐标或递增多位数显示。这个练习将带你分析一个级联计数器系统，其中一个计数器（内部计数器）的最终计数值会触发另一个计数器（外部计数器）的递增。通过这个实践，你将学会如何识别和计算决定整个系统最高速度的关键时序路径，特别是跨计数器之间的“进位”信号路径[@problem_id:3683799]。", "problem": "一个计算系统必须使用同步计数器在硬件中生成一个元组 $(i,j)$ 的字典序序列，其中 $j$ 是内层（变化最快的）计数器，$i$ 是外层（变化较慢的）计数器。对于每个固定的 $i$，该序列以每个时钟周期一个元组的速度，使 $j$ 遍历 $j = 0, 1, \\dots, 7$。当 $j$ 在下一个时钟从 $7$ 翻转到 $0$ 时，$i$ 增加一。当 $i$ 从 $9$ 翻转到 $0$ 并与 $j$ 从 $7$ 翻转到 $0$ 同时发生时，序列在 $(0,0)$ 处重新开始。\n\n该设计使用两个二进制计数器，它们由馈入D型触发器（DFF）的同步组合次态逻辑实现。内层计数器 $j$ 是一个带有二进制增量器的3位同步加法计数器。外层计数器 $i$ 是一个带有二进制增量器的4位同步加法计数器，仅当一个终端计数检测器置位一个表示 $j=7$ 的信号时才被使能。用于 $j=7$ 的终端计数检测器是一个三输入逻辑块，当且仅当 $j$ 的所有三位都为 $1$ 时，它才会置位。$i$ 计数器的使能信号是终端计数检测器输出与一个始终置位的全局使能信号的逻辑与。所有元件都由一个单一的全局时钟同步驱动。假设时钟偏斜为零，并且保持时间约束得到满足。\n\n假设以下最坏情况下的传播和建立参数成立：\n- $j$ 计数器DFF的时钟到Q延迟为 $t_{\\mathrm{CQ},j} = 0.12\\,\\mathrm{ns}$。\n- $j$ 计数器二进制增量器的最坏情况传播延迟为 $t_{\\mathrm{inc},j} = 0.45\\,\\mathrm{ns}$。\n- $j$ 计数器DFF的建立时间为 $t_{\\mathrm{setup},j} = 0.08\\,\\mathrm{ns}$。\n- $j=7$ 终端计数检测器的最坏情况传播延迟为 $t_{\\mathrm{cmp}} = 0.20\\,\\mathrm{ns}$。\n- 馈入 $i$ 计数器的使能门控电路的最坏情况传播延迟为 $t_{\\mathrm{gate}} = 0.10\\,\\mathrm{ns}$。\n- $i$ 计数器二进制增量器的最坏情况传播延迟为 $t_{\\mathrm{inc},i} = 0.55\\,\\mathrm{ns}$。\n- $i$ 计数器DFF的建立时间为 $t_{\\mathrm{setup},i} = 0.10\\,\\mathrm{ns}$。\n\n使用关于同步时序电路时序的基本原理，确定计数器能够可靠地生成正确字典序序列的最大时钟频率 $f_{\\max}$，同时考虑两个计数器中的关键路径。以 $\\mathrm{MHz}$ 为单位表示最终频率，并将您的答案四舍五入到四位有效数字。", "solution": "该问题要求确定一个由两个级联计数器组成的同步数字系统的最大工作时钟频率 $f_{\\max}$。最大频率是最小时钟周期 $T_{\\min}$ 的倒数，而 $T_{\\min}$ 由电路的关键路径决定。\n\n同步时序电路中任何路径的基本时序约束是，时钟周期 $T$ 必须大于或等于源触发器的时钟到Q延迟（$t_{\\mathrm{CQ}}$）、组合逻辑路径的最坏情况传播延迟（$t_{\\mathrm{comb}}$）以及目的触发器的建立时间（$t_{\\mathrm{setup}}$）之和。\n$$T \\ge t_{\\mathrm{CQ}} + t_{\\mathrm{comb}} + t_{\\mathrm{setup}}$$\n为了找到 $T_{\\min}$，我们必须识别电路中所有相关路径，并计算它们所需的最小周期。系统的总体 $T_{\\min}$ 将是这些单个路径所需周期的最大值。\n\n系统由两个计数器 $i$ 和 $j$ 组成。我们必须分析每个计数器内部以及计数器之间的时序路径。\n\n路径1：内层计数器 $j$ 的内部反馈回路。\n计数器 $j$ 是一个3位同步加法计数器，在每个时钟周期递增。$j$ 计数器的次态 $D_j$ 仅取决于其现态 $Q_j$。信号路径从 $j$ 计数器的D型触发器（DFF）的输出端开始，经过二进制增量器逻辑传播，并且必须在满足建立时间要求的情况下到达相同DFF的输入端。\n此路径的组合逻辑延迟是 $j$ 计数器增量器的传播延迟，即 $t_{\\mathrm{comb}(j \\to j)} = t_{\\mathrm{inc},j}$。\n此路径所需的最小周期 $T_{j \\to j}$ 为：\n$$T_{j \\to j} = t_{\\mathrm{CQ},j} + t_{\\mathrm{inc},j} + t_{\\mathrm{setup},j}$$\n代入给定值：\n$$T_{j \\to j} = 0.12\\,\\mathrm{ns} + 0.45\\,\\mathrm{ns} + 0.08\\,\\mathrm{ns} = 0.65\\,\\mathrm{ns}$$\n\n路径2：从内层计数器（$j$）到外层计数器（$i$）的路径。\n只有当条件 $j=7$ 使能时，外层计数器 $i$ 才会递增。这创建了一条从 $j$ 计数器的DFF开始到 $i$ 计数器的DFF结束的信号路径。在级联计数器设计中，这条路径通常是关键路径。此路径在一个时钟周期内的事件序列如下：\n1. 在一个时钟沿之后，$j$ 计数器DFF的输出 $Q_j$ 变得稳定。这需要 $t_{\\mathrm{CQ},j}$ 的时间。\n2. $Q_j$ 的值由终端计数检测器处理，以检查是否 $j=7$。此过程的传播延迟为 $t_{\\mathrm{cmp}}$。\n3. 检测器的输出通过使能门控逻辑传播。延迟为 $t_{\\mathrm{gate}}$。\n4. 产生的使能信号被馈送到 $i$ 计数器的二进制增量器逻辑。该逻辑计算 $i$ 的次态。问题陈述增量器的延迟为 $t_{\\mathrm{inc},i}$。这意味着一个串行延迟链，其中使能信号必须在增量器输出有效之前解析完成。\n5. 为 $i$ 计算出的最终次态 $D_i$ 必须在下一个时钟沿之前到达 $i$ 计数器DFF的输入端，并保持稳定达建立时间 $t_{\\mathrm{setup},i}$。\n\n这条计数器间路径的总组合逻辑延迟是链中各组件延迟之和：$t_{\\mathrm{comb}(j \\to i)} = t_{\\mathrm{cmp}} + t_{\\mathrm{gate}} + t_{\\mathrm{inc},i}$。\n因此，此路径所需的最小周期 $T_{j \\to i}$ 为：\n$$T_{j \\to i} = t_{\\mathrm{CQ},j} + t_{\\mathrm{cmp}} + t_{\\mathrm{gate}} + t_{\\mathrm{inc},i} + t_{\\mathrm{setup},i}$$\n代入给定值：\n$$T_{j \\to i} = 0.12\\,\\mathrm{ns} + 0.20\\,\\mathrm{ns} + 0.10\\,\\mathrm{ns} + 0.55\\,\\mathrm{ns} + 0.10\\,\\mathrm{ns} = 1.07\\,\\mathrm{ns}$$\n\n$i$ 计数器本身内部也存在一个反馈路径（$Q_i \\to D_i$）。此路径的延迟将是 $t_{\\mathrm{CQ},i} + t_{\\mathrm{inc},i} + t_{\\mathrm{setup},i}$。虽然没有提供 $t_{\\mathrm{CQ},i}$，但问题的构造逻辑表明计数器间的路径是关键路径。从计数器 $j$ 生成使能信号的路径在信号到达 $i$ 计数器逻辑之前就涉及了几个逻辑级（$t_{\\mathrm{cmp}}$、$t_{\\mathrm{gate}}$）。这个使能信号从时钟沿传播到 $i$ 计数器逻辑的时间是 $t_{\\mathrm{CQ},j} + t_{\\mathrm{cmp}} + t_{\\mathrm{gate}} = 0.12 + 0.20 + 0.10 = 0.42\\,\\mathrm{ns}$。假设 $t_{\\mathrm{CQ},i}$ 有一个合理的值（例如，与 $t_{\\mathrm{CQ},j} = 0.12\\,\\mathrm{ns}$ 相当），来自 $j$ 的使能信号是 $i$ 计数器次态逻辑的最晚到达输入，这证实了从 $j$ 开始的路径是更新 $i$ 的关键路径。\n\n为确保整个系统的可靠运行，时钟周期 $T$ 必须大于或等于所有路径的延迟。因此，最小时钟周期 $T_{\\min}$ 是各个路径延迟的最大值。\n$$T_{\\min} = \\max(T_{j \\to j}, T_{j \\to i})$$\n$$T_{\\min} = \\max(0.65\\,\\mathrm{ns}, 1.07\\,\\mathrm{ns}) = 1.07\\,\\mathrm{ns}$$\n\n最大时钟频率 $f_{\\max}$ 是最小时钟周期的倒数：\n$$f_{\\max} = \\frac{1}{T_{\\min}} = \\frac{1}{1.07\\,\\mathrm{ns}} = \\frac{1}{1.07 \\times 10^{-9}\\,\\mathrm{s}}$$\n$$f_{\\max} \\approx 934579439.25\\,\\mathrm{Hz}$$\n转换为兆赫兹（$\\mathrm{MHz}$）：\n$$f_{\\max} \\approx 934.57943925\\,\\mathrm{MHz}$$\n问题要求答案四舍五入到四位有效数字。\n$$f_{\\max} \\approx 934.6\\,\\mathrm{MHz}$$", "answer": "$$\\boxed{934.6}$$", "id": "3683799"}, {"introduction": "除了简单的线性计数，同步计数器还可以实现更复杂的序列，这需要精心设计其状态控制逻辑。本练习要求你设计一个“镜像”计数器，它在达到序列的两个端点时会自动反转计数方向。这个过程的核心在于将计数器的行为规范（何时递增、何时递减、何时反转）转化为一个精确的布尔逻辑表达式，从而加深你对状态机控制逻辑设计的理解[@problem_id:3683847]。", "problem": "同步计数器是一种时序电路，其状态向量在每个时钟有效沿上，根据一个由组合逻辑导出的确定性次态函数同步更新。考虑设计一个同步加/减计数器，它围绕一个中点镜像计数，无限地产生序列 $0,1,2,\\dots,M-1,M,M-1,\\dots,1,0,1,\\dots$。其中，$M$ 是一个固定的正整数，状态变量 $Q$ 以二进制形式存储当前计数值。设该计数器使用 $n$ 个触发器，因此当前状态为 $Q=(q_{n-1},\\dots,q_{0})$，其中 $q_{i}\\in\\{0,1\\}$。设 $M$ 的二进制表示为 $(m_{n-1},\\dots,m_{0})$，其中 $m_{i}\\in\\{0,1\\}$。该计数器有一个内部的一位模式变量 $d\\in\\{0,1\\}$，用于指示计数方向，其中 $d=1$ 表示次态逻辑将对 $Q$ 进行加一操作，$d=0$ 表示将对 $Q$ 进行减一操作。为了实现镜像序列，计数方向必须恰好在两个端点处翻转：当计数器处于 $Q=M$ 且 $d=1$（当前向上计数）时，以及当计数器处于 $Q=0$ 且 $d=0$（当前向下计数）时。端点由相等比较器检测，该比较器使用当前状态位和常量 $M$ 在逻辑上实现。\n\n从同步时序电路、布尔逻辑以及二进制向量之间相等检测的基本定义出发，为翻转控制信号 $T(Q,d;M)$ 推导一个单一的封闭形式布尔表达式。该信号当且仅当为实现所述镜像序列而必须在下一个时钟沿翻转方向时，被置为有效。您的表达式必须只使用作用于变量 $q_{i}$、$m_{i}$ 和 $d$ 的逻辑运算符 $\\land$、$\\lor$ 和 $\\lnot$ 来书写，并且不得调用任何更高层次的比较器或算术单元。请将最终答案表示为单个解析表达式。不需要数值舍入，也不涉及物理单位。假设 $n=\\lceil \\log_{2}(M+1)\\rceil$，以便 $Q$ 可以表示从 $0$ 到 $M$ 的所有状态。", "solution": "问题要求为一个同步加/减计数器推导一个翻转控制信号的单一封闭形式布尔表达式，记为 $T(Q,d;M)$。该信号必须在且仅在计数器的方向变量 $d$ 需要在下一个时钟周期翻转时被置为有效（即，值为逻辑真或 $1$）。计数器状态由一个 $n$ 位向量 $Q=(q_{n-1},\\dots,q_{0})$ 表示，最大计数值是一个 $n$ 位常量 $M=(m_{n-1},\\dots,m_{0})$。\n\n问题明确了方向必须翻转的精确条件：\n1. 当计数器处于其最大值 $Q=M$，并且当前处于“向上”计数模式（$d=1$）时。\n2. 当计数器处于其最小值 $Q=0$，并且当前处于“向下”计数模式（$d=0$）时。\n\n这两个条件是互斥的，因为计数器不能同时处于 $Q=M$（其中 $M$ 是一个正整数）和 $Q=0$。因此，翻转信号 $T$ 是两个项的逻辑析取（OR），每一项对应这些条件之一。\n\n设 $C_M$ 是当且仅当 $Q=M$ 时值为真的布尔表达式。\n设 $C_0$ 是当且仅当 $Q=0$ 时值为真的布尔表达式。\n当 $d=1$ 时，方向为“向上”，这对应于布尔变量 $d$ 为真。\n当 $d=0$ 时，方向为“向下”，这对应于布尔变量 $d$ 为假，或 $\\lnot d$。\n\n$T$ 的逻辑规范可以写成：\n$$T = (C_M \\land d) \\lor (C_0 \\land \\lnot d)$$\n\n下一步是按照规定，仅使用位变量 $q_i$、常量位 $m_i$ 以及基本逻辑运算符 $\\land$ (与)、$\\lor$ (或) 和 $\\lnot$ (非)，推导 $C_M$ 和 $C_0$ 的显式布尔表达式。\n\n首先，我们推导代表条件 $Q=M$ 的表达式 $C_M$。两个 $n$ 位向量相等，当且仅当它们所有对应的位都相等。也就是说，$Q=M$ 为真，当且仅当对于所有从 $0$ 到 $n-1$ 的 $i$，$q_i = m_i$。两位 $q_i$ 和 $m_i$ 的逻辑等价性由同或（XNOR）函数捕获。仅使用允许的运算符， $q_i$ 和 $m_i$ 的同或运算表示为：\n$$(q_i \\land m_i) \\lor (\\lnot q_i \\land \\lnot m_i)$$\n如果两位都是 $1$ 或者都是 $0$，这个表达式就为真。为了使整个向量 $Q$ 和 $M$ 相等，这个条件必须在所有位位置上同时成立。这需要对各个按位相等的表达式进行逻辑合取（AND）。因此，$C_M$ 的表达式为：\n$$C_M = \\bigwedge_{i=0}^{n-1} \\left( (q_i \\land m_i) \\lor (\\lnot q_i \\land \\lnot m_i) \\right)$$\n\n其次，我们推导代表条件 $Q=0$ 的表达式 $C_0$。数字 $0$ 的二进制表示是一个所有位都为 $0$ 的 $n$ 位向量。因此，$Q=0$ 为真，当且仅当对于所有从 $0$ 到 $n-1$ 的 $i$，$q_i=0$。条件 $q_i=0$ 的布尔表达式就是 $\\lnot q_i$。为了使整个向量 $Q$ 为零，所有位必须同时为零。这表示为各个 $\\lnot q_i$ 项的逻辑合取：\n$$C_0 = \\bigwedge_{i=0}^{n-1} \\lnot q_i$$\n\n最后，我们将 $C_M$ 和 $C_0$ 的表达式代回到 $T$ 的主方程中。\n\n第一个条件（在 $M$ 处且向上计数）的项是：\n$$C_M \\land d = \\left( \\bigwedge_{i=0}^{n-1} \\left( (q_i \\land m_i) \\lor (\\lnot q_i \\land \\lnot m_i) \\right) \\right) \\land d$$\n\n第二个条件（在 $0$ 处且向下计数）的项是：\n$$C_0 \\land \\lnot d = \\left( \\bigwedge_{i=0}^{n-1} \\lnot q_i \\right) \\land \\lnot d$$\n\n翻转信号 $T(Q,d;M)$ 的完整表达式是这两个项的析取。根据 $\\land$ 运算符的结合律和交换律，我们可以用一个清晰的形式来呈现最终的表达式。\n\n$$T(Q,d;M) = \\left( d \\land \\bigwedge_{i=0}^{n-1} \\left( (q_i \\land m_i) \\lor (\\lnot q_i \\land \\lnot m_i) \\right) \\right) \\lor \\left( \\lnot d \\land \\bigwedge_{i=0}^{n-1} \\lnot q_i \\right)$$\n\n这个表达式代表了一个2选1多路复用器结构，其中选择器是方向位 $d$。如果 $d=1$，$T$ 在 $Q=M$ 时被置为有效。如果 $d=0$（$\\lnot d = 1$），$T$ 在 $Q=0$ 时被置为有效。这直接实现了问题陈述中指定的逻辑，它是从第一性原理出发，仅使用允许的基本单元构建的。", "answer": "$$\n\\boxed{\\left( d \\land \\bigwedge_{i=0}^{n-1} \\left( (q_i \\land m_i) \\lor (\\lnot q_i \\land \\lnot m_i) \\right) \\right) \\lor \\left( \\lnot d \\land \\bigwedge_{i=0}^{n-1} \\lnot q_i \\right)}\n$$", "id": "3683847"}, {"introduction": "在现实世界的应用中，计数器通常需要具备更高的灵活性和鲁棒性，例如处理在运行中变化的参数。这个高级练习挑战你设计一个模数 $N$ 可动态改变的计数器，并确保在 $N$ 改变时系统不会进入非法状态。你将探索如何通过同步校正逻辑来保证系统的稳定性，并分析正常路径和校正路径之间的竞争，以确定真正的关键路径和最大安全工作频率[@problem_id:3683819]。", "problem": "一个$8$位同步模$N$加/减计数器完全由$D$触发器和组合逻辑构成。当前状态是寄存器向量$Q \\in \\{0,1\\}^{8}$，被解释为范围在$0$到$255$之间的无符号整数。模数参数$N$通过一个$8$位总线提供，并可能在任何时候改变；为避免亚稳态，$N$会通过一个由同一系统时钟驱动的两级同步器，以产生一个寄存后的值$N_{\\text{sync}}$，该值将馈送给计数器的组合逻辑。加/减模式由$U \\in \\{0,1\\}$控制，其中$U=1$指定向上计数，$U=0$指定向下计数。\n\n次态函数实现如下，以防止当$N$在计数中途改变时出现非法状态：\n- 在正常操作（无校正）下，如果$U=1$，当$Q \\neq N_{\\text{sync}} - 1$时，次态为$Q^{+} = Q + 1$；当$Q = N_{\\text{sync}} - 1$时，次态为$Q^{+} = 0$。如果$U=0$，当$Q \\neq 0$时，次态为$Q^{+} = Q - 1$；当$Q = 0$时，次态为$Q^{+} = N_{\\text{sync}} - 1$。\n- 如果比较器检测到$Q \\geq N_{\\text{sync}}$（这可能在$N$计数中途改变时发生），则在下一个时钟沿应用同步校正：当$U=1$时，计数器加载$Q^{+} = 0$；当$U=0$时，计数器加载$Q^{+} = N_{\\text{sync}} - 1$。该选择由一个$2{:}1$多路复用器执行，它根据比较器输出$C = [Q \\geq N_{\\text{sync}}]$，在正常加/减结果和校正值之间进行选择。\n\n所有状态元件都是边沿触发的$D$触发器；每个比特的基本关系是在有效时钟沿捕获的$Q^{+} = D$。以下器件和逻辑特性是已知的，并统一应用于所有$8$个比特：\n- 每个$D$触发器具有时钟到$Q$的传播延迟$t_{\\text{cq}} = 0.22\\,\\text{ns}$和建立时间$t_{\\text{setup}} = 0.18\\,\\text{ns}$。\n- 正常加/减操作使用一个$8$位纹波进位加法器/减法器来形成$Q \\pm 1$，其从输入到输出的传播延迟为$t_{\\text{adder}} = 2.88\\,\\text{ns}$。\n- 校正检测使用一个通过减法和符号/借位逻辑实现的$8$位幅值比较器，从$(Q, N_{\\text{sync}})$输入到比较器输出$C$的传播延迟为$t_{\\text{comp}} = 3.18\\,\\text{ns}$。\n- 最终选择使用一个$8$位$2{:}1$多路复用器，其从任一数据输入或选择输入到输出的传播延迟为$t_{\\text{mux}} = 0.44\\,\\text{ns}$。\n- 全局时钟不确定性（包括偏斜和抖动预算）为$\\Delta t_{\\text{clk}} = 0.12\\,\\text{ns}$。\n\n假设多路复用器的最坏情况下的数据到输出延迟对于任一数据输入或其选择输入是相同的。同时假设向下计数的校正值$N_{\\text{sync}} - 1$是由一个$8$位减法器预先计算的，其传播延迟等于$t_{\\text{adder}}$。\n\n从同步时序逻辑时序的定义和$D$触发器的行为出发，推导所需的最小时钟周期，以确保在$N$计数中途发生任何变化的情况下，计数器$D$输入端的多路复用器输出能够及时稳定，满足捕获触发器的建立时间要求，从而防止捕获非法状态。然后计算相应的最大安全时钟频率。\n\n以$\\text{MHz}$为单位表示最大安全时钟频率，并将您的答案四舍五入到四位有效数字。", "solution": "一个由$D$触发器构建的同步计数器遵守以下基本时序关系：为保证正确操作且不违反建立时间，时钟周期$T_{\\text{clk}}$必须至少是发射触发器的时钟到$Q$延迟、到捕获触发器$D$输入的最坏情况组合路径延迟、捕获触发器的建立时间以及时钟不确定性预算的总和。将最坏情况下的组合路径延迟表示为$t_{\\text{comb,max}}$，则要求为\n$$\nT_{\\text{clk}} \\geq t_{\\text{cq}} + t_{\\text{comb,max}} + t_{\\text{setup}} + \\Delta t_{\\text{clk}}.\n$$\n\n我们必须为所有可能影响驱动状态寄存器比特$D$输入的多路复用器输出的相关路径，确定其$t_{\\text{comb,max}}$。在此设计中，多路复用器的输出取决于：\n- 计算$Q \\pm 1$（通过$8$位加法器/减法器）的正常数据路径，其结果馈送给MUX的一个数据输入。\n- 提供$0$（用于向上计数模式）或$N_{\\text{sync}} - 1$（用于向下计数模式）的校正数据路径，其结果馈送给MUX的另一个数据输入。常数$0$的逻辑延迟可以忽略；值$N_{\\text{sync}} - 1$由一个减法器产生，其延迟等于加法器的延迟$t_{\\text{adder}}$。\n- 计算比较器输出$C = [Q \\geq N_{\\text{sync}}]$（延迟为$t_{\\text{comp}}$）的选择路径，该输出决定了MUX是输出正常结果还是校正值。\n\n因为MUX的输出必须相对于其选定的数据输入和选择信号都稳定，所以到MUX输出（并因此到$D$输入）的最坏情况组合延迟由以下两者中较慢者决定：\n- 到MUX输出的数据输入路径延迟。\n- 到MUX输出的选择输入路径延迟。\n\n根据给定的器件延迟：\n- 到MUX输出的正常数据路径延迟为$t_{\\text{adder}} + t_{\\text{mux}} = 2.88\\,\\text{ns} + 0.44\\,\\text{ns} = 3.32\\,\\text{ns}$。\n- 到MUX输出的向下计数模式校正数据路径延迟为$t_{\\text{adder}} + t_{\\text{mux}} = 3.32\\,\\text{ns}$（因为$N_{\\text{sync}} - 1$使用的减法器与加法器延迟相同）。向上计数模式的校正数据路径使用常数$0$，其延迟与$t_{\\text{mux}}$相比可以忽略不计；即便如此，在这种情况下，MUX输出的稳定性也受选择路径的限制。\n- 到MUX输出的选择路径延迟为$t_{\\text{comp}} + t_{\\text{mux}} = 3.18\\,\\text{ns} + 0.44\\,\\text{ns} = 3.62\\,\\text{ns}$。\n\n因此，MUX输出的稳定时间受这些延迟中的最大值约束，即\n$$\nt_{\\text{comb,max}} = \\max\\{3.32\\,\\text{ns},\\, 3.32\\,\\text{ns},\\, 3.62\\,\\text{ns}\\} = 3.62\\,\\text{ns}.\n$$\n\n代入时钟周期要求：\n$$\nT_{\\text{clk}} \\geq t_{\\text{cq}} + t_{\\text{comb,max}} + t_{\\text{setup}} + \\Delta t_{\\text{clk}} = 0.22\\,\\text{ns} + 3.62\\,\\text{ns} + 0.18\\,\\text{ns} + 0.12\\,\\text{ns} = 4.14\\,\\text{ns}.\n$$\n\n最大安全时钟频率是最小时钟周期的倒数：\n$$\nf_{\\text{max}} = \\frac{1}{T_{\\text{clk}}} = \\frac{1}{4.14 \\times 10^{-9}\\,\\text{s}} = 2.415458937 \\times 10^{8}\\,\\text{Hz} = 241.5458937\\,\\text{MHz}.\n$$\n\n四舍五入到四位有效数字并以$\\text{MHz}$为单位表示结果，得出\n$$\nf_{\\text{max}} \\approx 241.5\\,\\text{MHz}.\n$$\n\n该时序界限确保了，无论$N$是否在计数中途发生变化，由比较器驱动的校正和选定的数据输入都能在捕获$D$触发器的建立时刻之前在多路复用器输出端稳定下来。因此，捕获的次态始终是合法状态$\\{0,1,\\dots,N_{\\text{sync}}-1\\}$之一（无论是通过正常的模$N$递进，还是通过同步校正到$0$或$N_{\\text{sync}}-1$），从而防止了非法状态被存储。", "answer": "$$\\boxed{241.5}$$", "id": "3683819"}]}