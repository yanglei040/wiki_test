{"hands_on_practices": [{"introduction": "在设计高性能加法器时，设计者常常需要在速度和面积之间做出权衡。本练习将通过对两种经典的并行前缀加法器结构——Kogge-Stone加法器和Brent–Kung加法器——进行晶体管级别的成本分析，来具体量化这一权衡。通过计算和比较它们的总晶体管数量，你将深入理解不同的前缀网络拓扑如何直接影响硬件资源的消耗，从而为实际工程中的架构选择提供依据。[@problem_id:3619315]", "problem": "并行前缀加法器通过将位级生成信号和传播信号与结合律前缀运算符相结合来计算进位。考虑一个大小为 $n=32$ 的基-$2$ Kogge–Stone 加法器和一个 Brent–Kung 加法器，它们均采用静态互补金属氧化物半导体（CMOS）技术实现，且仅使用以下基本门和晶体管模型：\n\n- 反相器：$2$ 个晶体管。\n- $2$输入与非门（NAND）：$4$ 个晶体管。\n- $2$输入或非门（NOR）：$4$ 个晶体管。\n- $2$输入与门（AND）由一个与非门后接一个反相器实现：$6$ 个晶体管。\n- $2$输入或门（OR）由一个或非门后接一个反相器实现：$6$ 个晶体管。\n- $2$输入异或门（XOR）采用全静态 CMOS 实现：$12$ 个晶体管。\n\n假设没有其他可用复杂门，不使用传输门，并且没有额外的缓冲或连线成本。设位级生成和传播定义为 $g_i = a_i b_i$ 和 $p_i = a_i \\oplus b_i$，作用于对 $(g,p)$ 的组运算符定义为\n$$\n(g_k, p_k) \\circ (g_j, p_j) = \\big(g_k \\lor (p_k \\land g_j),\\; p_k \\land p_j\\big),\n$$\n其中 $\\lor$ 和 $\\land$ 分别表示布尔或和布尔与。黑单元实现完整的运算符 $\\circ$（同时输出组生成和组传播信号），而灰单元仅输出组生成信号 $g_k \\lor (p_k \\land g_j)$。\n\n对于每种加法器：\n- 预处理：对 $i \\in \\{0,\\dots,31\\}$ 中的每一位，使用一个异或门和一个与门生成所有的 $p_i$ 和 $g_i$。\n- 前缀网络：每种架构均使用标准的基-$2$ 拓扑。在 Kogge–Stone 中，除最后一级外，所有级都使用黑单元，最后一级使用灰单元。在 Brent–Kung 中，使用由黑单元组成的归约树，后跟由灰单元组成的扩展树。\n- 后处理：对 $i \\in \\{0,\\dots,31\\}$ 中的每一位，使用一个异或门计算所有的和 $s_i = p_i \\oplus c_i$，其中 $c_i$ 是由前缀网络提供的进位（输入进位 $c_0$ 以标准方式并入前缀网络中）。\n\n根据上述定义和晶体管模型，推导：\n$1.$ 在所述门库下，一个黑单元和一个灰单元的晶体管数量。\n$2.$ $n=32$ 的 Kogge–Stone 加法器的总晶体管数量。\n$3.$ $n=32$ 的 Brent–Kung 加法器的总晶体管数量。\n\n最后，计算 $n=32$ 时 Kogge–Stone 加法器与 Brent–Kung 加法器的总晶体管数量之比。将你的答案四舍五入到 $4$ 位有效数字。最终答案必须是这个经过四舍五入的单一比率值（无单位）。", "solution": "该问题要求基于一组特定的基本CMOS门及其晶体管成本，对两种类型的32位并行前缀加法器——Kogge-Stone (KS) 和 Brent-Kung (BK)——的晶体管数量进行详细分析。最终目标是计算 Kogge-Stone 加法器与 Brent-Kung 加法器的总晶体管数量之比。\n\n首先，我们确定前缀网络中使用的两种单元的晶体管数量：黑单元和灰单元。基本门的晶体管成本如下：\n- 反相器：$2$ 个晶体管\n- $2$输入与非门：$4$ 个晶体管\n- $2$输入或非门：$4$ 个晶体管\n- $2$输入与门（与非门 + 反相器）：$4+2=6$ 个晶体管\n- $2$输入或门（或非门 + 反相器）：$4+2=6$ 个晶体管\n- $2$输入异或门：$12$ 个晶体管\n\n作用于 $(g, p)$ 对的组运算符定义为 $(g_k, p_k) \\circ (g_j, p_j) = \\big(g_k \\lor (p_k \\land g_j),\\; p_k \\land p_j\\big)$。\n\n1.  **灰单元的晶体管数量**\n灰单元仅实现运算符的组生成部分：$G = g_k \\lor (p_k \\land g_j)$。该表达式需要一个2输入与运算 ($p_k \\land g_j$) 和一个2输入或运算。使用给定的门库：\n- 2输入与门的成本：$6$ 个晶体管\n- 2输入或门的成本：$6$ 个晶体管\n灰单元的总晶体管数量是这些成本的总和：\n$$\n\\text{Cost}_{\\text{gray}} = \\text{Cost}(AND_2) + \\text{Cost}(OR_2) = 6 + 6 = 12 \\text{ 个晶体管}。\n$$\n\n2.  **黑单元的晶体管数量**\n黑单元实现完整的组运算符，同时产生组生成和组传播信号：$G = g_k \\lor (p_k \\land g_j)$ 和 $P = p_k \\land p_j$。这需要与灰单元相同的逻辑，外加一个用于组传播项的2输入与门。\n- G 的逻辑：一个2输入与门和一个2输入或门。\n- P 的逻辑：一个2输入与门。\n黑单元的总晶体管数量为：\n$$\n\\text{Cost}_{\\text{black}} = \\text{Cost}(AND_2) + \\text{Cost}(OR_2) + \\text{Cost}(AND_2) = 6 + 6 + 6 = 18 \\text{ 个晶体管}。\n$$\n\n接下来，我们分析每种加法器架构的总晶体管数量。两种加法器都包含三个阶段：预处理、前缀网络和后处理。加法器的大小为 $n=32$。\n\n**公共阶段：预处理和后处理**\n- **预处理**：对于每一位 $i \\in \\{0, \\dots, 31\\}$，生成信号 $g_i = a_i b_i$ 和 $p_i = a_i \\oplus b_i$。这需要每位一个2输入与门和一个2输入异或门。\n    - 每位成本：$\\text{Cost}(AND_2) + \\text{Cost}(XOR_2) = 6 + 12 = 18$ 个晶体管。\n    - 总预处理成本：$T_{PP} = 32 \\times 18 = 576$ 个晶体管。\n- **后处理**：对于每一位 $i \\in \\{0, \\dots, 31\\}$，计算和 $s_i = p_i \\oplus c_i$。问题规定所有32位每位使用一个2输入异或门。\n    - 每位成本：$\\text{Cost}(XOR_2) = 12$ 个晶体管。\n    - 总后处理成本：$T_{Sum} = 32 \\times 12 = 384$ 个晶体管。\n两种加法器这两个阶段的合并成本是 $T_{PP} + T_{Sum} = 576 + 384 = 960$ 个晶体管。\n\n**$n=32$ Kogge-Stone 加法器的总晶体管数量**\n$n=32$ 的 Kogge-Stone 前缀网络深度为 $\\log_2(n) = \\log_2(32) = 5$ 级，索引为 $k=0, \\dots, 4$。在标准的基-2 KS 拓扑中，第 $k$ 级包含 $n - 2^k$ 个运算单元。问题指出最后一级 ($k=4$) 使用灰单元，而之前的所有级 ($k=0, 1, 2, 3$) 使用黑单元。\n- 黑单元数量：\n    - 第 $k=0$ 级：$32 - 2^0 = 31$ 个单元\n    - 第 $k=1$ 级：$32 - 2^1 = 30$ 个单元\n    - 第 $k=2$ 级：$32 - 2^2 = 28$ 个单元\n    - 第 $k=3$ 级：$32 - 2^3 = 24$ 个单元\n    - 黑单元总数 = $31 + 30 + 28 + 24 = 113$。\n- 灰单元数量：\n    - 第 $k=4$ 级：$32 - 2^4 = 16$ 个单元。\nKS 前缀网络的成本是：\n$$\nT_{\\text{Network, KS}} = (113 \\times \\text{Cost}_{\\text{black}}) + (16 \\times \\text{Cost}_{\\text{gray}}) = (113 \\times 18) + (16 \\times 12) = 2034 + 192 = 2226 \\text{ 个晶体管}。\n$$\nKogge-Stone 加法器的总晶体管数量是所有三个阶段的总和：\n$$\nT_{\\text{KS}} = T_{PP} + T_{Sum} + T_{\\text{Network, KS}} = 960 + 2226 = 3186 \\text{ 个晶体管}。\n$$\n\n**$n=32$ Brent-Kung 加法器的总晶体管数量**\nBrent-Kung 前缀网络由一个归约树后跟一个扩展树组成。对于 $n$ 位，BK 网络中的单元总数为 $2n - 2 - \\log_2(n)$。对于 $n=32$，这是 $2(32) - 2 - \\log_2(32) = 64 - 2 - 5 = 57$ 个单元。\n- **归约树**：归约树由 $n-1 = 32-1=31$ 个单元组成。根据问题描述，这些是黑单元。\n- **扩展树**：扩展树由剩余的单元组成：$57 - 31 = 26$ 个单元。这些被指定为灰单元。（这个数量也与公式 $n - 1 - \\log_2(n) = 32 - 1 - 5 = 26$ 相符）。\nBK 前缀网络的成本是：\n$$\nT_{\\text{Network, BK}} = (31 \\times \\text{Cost}_{\\text{black}}) + (26 \\times \\text{Cost}_{\\text{gray}}) = (31 \\times 18) + (26 \\times 12) = 558 + 312 = 870 \\text{ 个晶体管}。\n$$\nBrent-Kung 加法器的总晶体管数量是所有三个阶段的总和：\n$$\nT_{\\text{BK}} = T_{PP} + T_{Sum} + T_{\\text{Network, BK}} = 960 + 870 = 1830 \\text{ 个晶体管}。\n$$\n\n**最终比率**\n最后，我们计算 Kogge-Stone 加法器与 Brent-Kung 加法器的总晶体管数量之比。\n$$\n\\text{Ratio} = \\frac{T_{\\text{KS}}}{T_{\\text{BK}}} = \\frac{3186}{1830} \\approx 1.7409836...\n$$\n将此值四舍五入到4位有效数字，我们得到 $1.741$。", "answer": "$$\\boxed{1.741}$$", "id": "3619315"}, {"introduction": "理论上的逻辑深度是衡量加法器速度的关键指标，但在物理实现中，高扇出等问题同样会限制性能。本练习以Sklansky加法器为例，探讨了从理论到实践的过渡。你将分析其关键路径的逻辑深度，并识别出导致布线困难和信号延迟的最高扇出节点，进而学习如何通过缓冲策略来解决这一实际的设计挑战。[@problem_id:3619383]", "problem": "一个使用 Sklansky（分治）拓扑的 $32$ 位并行前缀加法器由 $2$ 输入逻辑门构成。该加法器根据每个比特位置 $i$ 的标准生成（generate）和传递（propagate）定义来指定：\n- 按位生成 $g_i = a_i b_i$，\n- 按位传递 $p_i = a_i \\oplus b_i$，\n以及针对连续比特位范围 $[i:j]$ 的组生成和组传递，其递归定义为\n$$\nG_{i:j} = G_i \\lor \\left(P_i G_{i-1:j}\\right), \\quad P_{i:j} = P_i P_{i-1:j}.\n$$\n假设最低有效位 (LSB) 在索引 $i=0$ 处，最高有效位 (MSB) 在索引 $i=31$ 处，并且没有输入进位，因此 $c_0 = 0$ 且 $c_{32} = G_{31:0}$。Sklansky 拓扑通过形成连续增大的组来计算这些组信号，组的大小在每个前缀阶段都会加倍，直到形成全宽度的组。\n\n实现约束和逻辑深度模型：\n- 每个按位生成信号 $g_i$ 由一个单级的 $2$ 输入逻辑与门计算。\n- 每个前缀运算符实例从两个先前可用的信号对生成一个新的信号对 $\\left(G_{i:j}, P_{i:j}\\right)$，其实现方式为：使用一级 $2$ 输入逻辑与门（用于形成 $P_i P_{i-1:j}$ 和 $P_i G_{i-1:j}$），后接一级 $2$ 输入逻辑或门（用于形成 $G_i \\lor \\left(P_i G_{i-1:j}\\right)$）；也就是说，每个前缀运算符实例占用两个门级。\n- 用于形成 $p_i$ 的异或门不在到 $c_{32}$ 的进位路径上，因此不计入进位逻辑深度。\n\n任务：\n1. 仅根据这些定义和约束，推导在此 Sklansky 加法器中，从输入 $\\left(a_0, b_0\\right)$ 到最终进位 $c_{32}$ 的关键进位路径上的 $2$ 输入门逻辑级数。\n2. 确定前缀结构中的哪个组节点承受最大电气扇出，并根据 Sklansky 的广播模式确定其扇出值。\n3. 假设一项物理设计规则将任何单个驱动器的最大允许扇出限制为 $f = 4$ 个负载。为你所确定的最大扇出节点提出一种满足此限制的缓冲策略，并计算在该节点处分配其信号到所有目的地而不违反扇出上限所需的最少缓冲单元数量。你可以假设缓冲器是理想的，仅提供驱动强度，不增加任何逻辑变换。\n\n答案规格：\n- 仅报告任务1中的逻辑级数 $L$ 作为你的最终数值答案。\n- 无需四舍五入。\n- 报告值中不包含任何单位。", "solution": "用户提供了一个明确的数字逻辑设计问题，涉及对一个 $32$ 位 Sklansky 并行前缀加法器的分析。该问题具有科学依据，内容完备且客观。它要求对逻辑深度、扇出和缓冲进行标准分析，这些都是计算机算术和 VLSI 设计中的核心概念。该问题是有效的，并且可以按所述方式解决。\n\n解决方案按顺序解决这三个任务。\n\n### 任务1：关键进位路径上的逻辑级数\n\n进位逻辑的关键路径决定了加法器的整体速度。该路径从输入 $a_i, b_i$ 开始，到最终的进位输出位 $c_{32}$ 结束。加法器的位宽为 $N=32$ 位。\n\n1.  **初始信号生成**：该过程始于为每个比特位置 $i$ 计算按位生成（$g_i$）和传递（$p_i$）信号。\n    -   $g_i = a_i b_i$\n    -   $p_i = a_i \\oplus b_i$\n    问题规定，每个 $g_i$ 由一个单级的 $2$ 输入与门计算。整个前缀网络的输入是信号对 $(G_{i:i}, P_{i:i}) = (g_i, p_i)$。进位生成的关键路径取决于这些信号的到达时间。$g_i$ 信号在 $1$ 个门逻辑级延迟后可用。问题指出，用于 $p_i$ 的异或门不在进位路径上，因此我们认为前缀网络的输入在 $g_i$ 信号所需的初始 $1$ 级延迟后可用。\n\n2.  **前缀网络逻辑深度**：Sklansky 并行前缀加法器并行计算所有进位输入信号 $c_i = G_{i-1:0}$。最终的进位输出是 $c_{32} = G_{31:0}$。最高有效前缀 $G_{31:0}$ 的计算决定了前缀网络关键路径的深度。\n\n    在任何实现对数深度（如 Sklansky 或 Kogge-Stone）的并行前缀方案中，全宽度组生成/传递信号 $(G_{N-1:0}, P_{N-1:0})$ 的计算遵循二叉树依赖结构。$(G_{31:0}, P_{31:0})$ 的计算是通过一个前缀运算符组合两个半宽度组来执行的：\n    $$ (G_{31:0}, P_{31:0}) = (G_{31:16}, P_{31:16}) \\bullet (G_{15:0}, P_{15:0}) $$\n    其中 $\\bullet$ 表示前缀运算符。相应地，$(G_{15:0}, P_{15:0})$ 由 $(G_{15:8}, P_{15:8})$ 和 $(G_{7:0}, P_{7:0})$ 计算得出，依此类推。这为最高有效前缀创建了一个深度为 $\\log_2(N)$ 个前缀运算符的依赖链。\n\n    对于 $N=32$，此关键路径上的前缀运算符级数为：\n    $$ \\text{前缀级数} = \\log_2(32) = 5 $$\n    问题指出，每个前缀运算符实例需要 $2$ 级逻辑（$1$ 级与门，$1$ 级或门）。\n    因此，前缀网络本身的逻辑深度为：\n    $$ L_{\\text{prefix}} = (\\text{前缀级数}) \\times (\\text{每级逻辑层数}) = 5 \\times 2 = 10 \\text{ 级} $$\n\n3.  **关键路径总逻辑级数 ($L$)**：关键进位路径上的总逻辑级数是初始生成信号延迟和前缀网络延迟之和。\n    $$ L = L_{\\text{initial gen}} + L_{\\text{prefix}} = 1 + 10 = 11 $$\n    从输入 $(a_i, b_i)$ 到输出 $c_{32}$ 的关键路径包含 $11$ 级 $2$ 输入逻辑门。\n\n### 任务2：最大扇出识别\n\nSklansky 拓扑以相比其他对数深度加法器（如 Kogge-Stone）能最小化逻辑单元数量而闻名，但代价是某些节点上的电气扇出很高。扇出是单个门输出驱动的门输入数量。\n\n在 Sklansky 加法器中，大小为 $2^k$ 的前缀块被计算出来，然后“广播”出去，与较小的组合并，以形成所有大小直至 $2^{k+1}-1$ 的前缀。计算加法器整个低半部分生成/传递信号的节点，即 $(G_{N/2-1:0}, P_{N/2-1:0})$，承受最大扇出。\n\n对于 $N=32$，最大扇出发生在为低 $16$ 位生成信号的节点，即 $(G_{15:0}, P_{15:0})$。这些信号是加法器高半部分（即比特 $i = 16, 17, \\dots, 31$）中每个比特的最终前缀计算阶段所必需的。对于每个这样的比特 $i$，前缀 $G_{i:0}$ 由一个将 $(G_{15:0}, P_{15:0})$ 作为其输入之一的运算符形成。\n\n目的地（负载）的数量是高半部分的比特数：\n$$ \\text{Fanout}_{\\text{max}} = (31 - 16) + 1 = 16 $$\n因此，产生 $(G_{15:0}, P_{15:0})$ 的节点的最大扇出为 $16$。\n\n### 任务3：缓冲策略\n\n一项物理设计规则将最大允许扇出限制为 $f=4$。任务2中识别的节点的扇出为 $16$，违反了此规则。必须插入一个缓冲树来分配信号，同时遵守扇出约束。我们需要为 $G_{15:0}$ 和 $P_{15:0}$ 信号都进行缓冲。让我们分析一个信号的缓冲，例如 $G_{15:0}$。\n\n我们有 $1$ 个源，必须驱动 $16$ 个负载，而每个驱动器（源门或缓冲器）最多能驱动 $f=4$ 个负载。我们寻求最小的缓冲器数量。为实现这一点，我们应该在缓冲树的每一级最大化扇出。\n\n在缓冲树的最后一级（驱动实际负载的那一级）所需的驱动器数量为：\n$$ n_{\\text{final-level}} = \\left\\lceil \\frac{\\text{负载数}}{f} \\right\\rceil = \\left\\lceil \\frac{16}{4} \\right\\rceil = 4 $$\n因此，我们在最后一级需要 $4$ 个缓冲器。这些缓冲器中的每一个将驱动 $16/4 = 4$ 个负载，这遵守了扇出约束 $f=4$。\n\n现在，这 $4$ 个缓冲器本身也需要被驱动。为此所需的驱动器数量为：\n$$ n_{\\text{prev-level}} = \\left\\lceil \\frac{n_{\\text{final-level}}}{f} \\right\\rceil = \\left\\lceil \\frac{4}{4} \\right\\rceil = 1 $$\n这个所需的单个驱动器可以是产生 $G_{15:0}$ 信号的原始源门。它的扇出将是 $4$（驱动四个缓冲器），这在允许的上限之内。\n\n该结构包含单级缓冲。$G_{15:0}$ 信号所需的最小缓冲器数量为 $4$。信号路径为：\n源门 $\\rightarrow$ $4$ 个缓冲器 $\\rightarrow$ $16$ 个负载。\n\n对于 $P_{15:0}$ 信号也需要相同的缓冲策略。因此，在节点 $(G_{15:0}, P_{15:0})$ 处所需的缓冲单元总数为：$G$ 信号需要 $4$ 个，$P$ 信号需要 $4$ 个，总共为 $8$ 个缓冲单元。\n\n根据答案规格，仅报告任务1中的逻辑级数 $L$ 作为最终答案。", "answer": "$$\n\\boxed{11}\n$$", "id": "3619383"}, {"introduction": "一个数字电路的价值不仅在于其理想状态下的性能，还在于其在面对故障时的可靠性。本练习将引导你分析一个8位Brent–Kung加法器在出现“固定型”故障时的行为。通过模拟一个内部信号的失效，你将追踪错误如何在加法器中传播，并最终影响输出结果，从而深化对进位传播链中数据依赖性的理解。此外，本练习还引入了在线错误检测的概念，这是设计高可靠性计算系统的关键一步。[@problem_id:3619332]", "problem": "考虑一个$8$位Brent–Kung (BK) 并行前缀加法器，它计算两个无符号操作数$a$和$b$的和，初始进位$c_0 = 0$。该加法器由标准的按位生成和传播定义$g_i = a_i \\land b_i$和$p_i = a_i \\oplus b_i$构建，并根据基本进位递推公式$c_{i+1} = g_i \\lor (p_i \\land c_i)$计算进位，其中和位$s_i = p_i \\oplus c_i$。BK拓扑通过对偶$(G,P)$上的结合性前缀算子来实现此递推，但功能上的进位和求和关系与该递推公式相同。\n\n设输入操作数为\n$$\na = (a_7,a_6,a_5,a_4,a_3,a_2,a_1,a_0) = (1,1,0,0,1,0,1,0),\n$$\n$$\nb = (b_7,b_6,b_5,b_4,b_3,b_2,b_1,b_0) = (0,1,1,0,1,1,0,0).\n$$\n假设在计算进位的前缀块内部，位索引$k=4$处的传播信号$p_k$上发生了一个固定为$1$的故障，即无论$a_4$和$b_4$为何值，进位网络中使用的有效传播信号都变为$p'_4 = 1$，而所有其他的传播和生成信号保持正确。求和逻辑仍然构成$s_i = p'_i \\oplus c'_i$，其中对于$i \\neq 4$，$p'_i = p_i$且$p'_4 = 1$，$c'_i$是由使用$p'_i$的故障进位网络产生的进位。\n\n从基本的生成/传播定义和进位递推公式出发，确定在此固定为$1$的故障下，哪些和位$s_i$变得不正确，并计算正确和字与故障和字之间的汉明距离$d$。然后，提出了一个在线奇偶校验错误检测器，该检测器计算一个单位校验子\n$$\nS = \\bigoplus_{i=0}^{7} \\left(s_i \\oplus c_i \\oplus a_i \\oplus b_i\\right),\n$$\n其中$\\oplus$表示异或，并针对给定的故障场景（使用故障的$s_i$和$c_i$）评估$S$。将你的最终答案以一个行矩阵的形式报告，该矩阵包含两个数字：首先是汉明距离$d$，其次是检测器校验子$S$。无需四舍五入。", "solution": "该问题要求分析一个$8$位加法器中的固定故障。解决方案包含三个主要步骤：首先，为给定的操作数计算正确的和；其次，在指定的故障下重新计算和；第三，确定正确和与故障和之间的汉明距离，并评估给定的错误检测校验子。Brent-Kung加法器的功能行为等同于基本的进位递推关系，我们将使用该关系进行计算。\n\n首先，我们根据输入操作数$a$和$b$建立按位生成（$g_i$）和传播（$p_i$）信号。\n操作数为：\n$$\na = (a_7, a_6, a_5, a_4, a_3, a_2, a_1, a_0) = (1,1,0,0,1,0,1,0)\n$$\n$$\nb = (b_7, b_6, b_5, b_4, b_3, b_2, b_1, b_0) = (0,1,1,0,1,1,0,0)\n$$\n生成信号$g_i = a_i \\land b_i$为：\n$g_0 = 0 \\land 0 = 0$\n$g_1 = 1 \\land 0 = 0$\n$g_2 = 0 \\land 1 = 0$\n$g_3 = 1 \\land 1 = 1$\n$g_4 = 0 \\land 0 = 0$\n$g_5 = 0 \\land 1 = 0$\n$g_6 = 1 \\land 1 = 1$\n$g_7 = 1 \\land 0 = 0$\n所以，生成向量为$g = (0,1,0,1,0,0,0,0)$。\n\n传播信号$p_i = a_i \\oplus b_i$为：\n$p_0 = 0 \\oplus 0 = 0$\n$p_1 = 1 \\oplus 0 = 1$\n$p_2 = 0 \\oplus 1 = 1$\n$p_3 = 1 \\oplus 1 = 0$\n$p_4 = 0 \\oplus 0 = 0$\n$p_5 = 0 \\oplus 1 = 1$\n$p_6 = 1 \\oplus 1 = 0$\n$p_7 = 1 \\oplus 0 = 1$\n所以，传播向量为$p = (1,0,1,0,0,1,1,0)$。\n\n接下来，我们使用递推公式$c_{i+1} = g_i \\lor (p_i \\land c_i)$和初始进位$c_0 = 0$来计算正确的进位$c_i$。\n$c_0 = 0$\n$c_1 = g_0 \\lor (p_0 \\land c_0) = 0 \\lor (0 \\land 0) = 0$\n$c_2 = g_1 \\lor (p_1 \\land c_1) = 0 \\lor (1 \\land 0) = 0$\n$c_3 = g_2 \\lor (p_2 \\land c_2) = 0 \\lor (1 \\land 0) = 0$\n$c_4 = g_3 \\lor (p_3 \\land c_3) = 1 \\lor (0 \\land 0) = 1$\n$c_5 = g_4 \\lor (p_4 \\land c_4) = 0 \\lor (0 \\land 1) = 0$\n$c_6 = g_5 \\lor (p_5 \\land c_5) = 0 \\lor (1 \\land 0) = 0$\n$c_7 = g_6 \\lor (p_6 \\land c_6) = 1 \\lor (0 \\land 0) = 1$\n\n最后，我们计算正确的和位$s_i = p_i \\oplus c_i$。\n$s_0 = p_0 \\oplus c_0 = 0 \\oplus 0 = 0$\n$s_1 = p_1 \\oplus c_1 = 1 \\oplus 0 = 1$\n$s_2 = p_2 \\oplus c_2 = 1 \\oplus 0 = 1$\n$s_3 = p_3 \\oplus c_3 = 0 \\oplus 0 = 0$\n$s_4 = p_4 \\oplus c_4 = 0 \\oplus 1 = 1$\n$s_5 = p_5 \\oplus c_5 = 1 \\oplus 0 = 1$\n$s_6 = p_6 \\oplus c_6 = 0 \\oplus 0 = 0$\n$s_7 = p_7 \\oplus c_7 = 1 \\oplus 1 = 0$\n正确的和字是$s = (s_7, \\dots, s_0) = (0,0,1,1,0,1,1,0)$。\n\n现在，我们在$p_4$上引入固定为1的故障。该位置的有效传播信号变为$p'_4 = 1$。所有其他传播信号保持不变，因此对于$i \\neq 4$，$p'_i = p_i$。生成信号$g_i$不受影响。\n故障的传播向量为$p' = (1,0,1,0,1,1,1,0)$。\n\n我们使用故障的传播向量重新计算进位，记为$c'_i$。递推公式为$c'_{i+1} = g_i \\lor (p'_i \\land c'_i)$，其中$c'_0 = c_0 = 0$。\n直到$c'_4$的进位都不受影响，因为它们不依赖于$p'_4$。\n$c'_0 = 0$, $c'_1 = 0$, $c'_2 = 0$, $c'_3 = 0$, $c'_4 = 1$。\n$p'_4$处的故障首先影响$c'_5$。\n$c'_5 = g_4 \\lor (p'_4 \\land c'_4) = 0 \\lor (1 \\land 1) = 1$。正确的值是$c_5 = 0$。\n进位中的错误向前传播：\n$c'_6 = g_5 \\lor (p'_5 \\land c'_5) = 0 \\lor (1 \\land 1) = 1$。正确的值是$c_6 = 0$。\n$c'_7 = g_6 \\lor (p'_6 \\land c'_6) = 1 \\lor (0 \\land 1) = 1$。正确的值是$c_7 = 1$。这个进位是偶然正确的。\n\n现在我们计算故障的和位$s'_i = p'_i \\oplus c'_i$。问题指出，求和逻辑使用故障的传播信号$p'_i$。\n$s'_0 = p'_0 \\oplus c'_0 = 0 \\oplus 0 = 0 = s_0$\n$s'_1 = p'_1 \\oplus c'_1 = 1 \\oplus 0 = 1 = s_1$\n$s'_2 = p'_2 \\oplus c'_2 = 1 \\oplus 0 = 1 = s_2$\n$s'_3 = p'_3 \\oplus c'_3 = 0 \\oplus 0 = 0 = s_3$\n故障位置以下的和位是正确的。\n在故障位置及以上，我们有：\n$s'_4 = p'_4 \\oplus c'_4 = 1 \\oplus 1 = 0$。正确的值是$s_4 = 1$。该位不正确。\n$s'_5 = p'_5 \\oplus c'_5 = 1 \\oplus 1 = 0$。正确的值是$s_5 = 1$。该位不正确。\n$s'_6 = p'_6 \\oplus c'_6 = 0 \\oplus 1 = 1$。正确的值是$s_6 = 0$。该位不正确。\n$s'_7 = p'_7 \\oplus c'_7 = 1 \\oplus 1 = 0$。正确的值是$s_7 = 0$。该位是正确的。\n故障的和字是$s' = (s'_7, \\dots, s'_0) = (0,1,0,0,0,1,1,0)$。\n\n汉明距离$d$是$s_i$和$s'_i$不同的位置数。\n正确的和 $s = (0,0,1,1,0,1,1,0)$\n故障的和 $s' = (0,1,0,0,0,1,1,0)$\n逐位比较，发现在索引4、5和6处存在差异。\n$s_4 \\neq s'_4$，$s_5 \\neq s'_5$，$s_6 \\neq s'_6$。\n有$3$个不同的位。因此，汉明距离为$d = 3$。\n\n最后，我们为故障场景评估所提出的错误检测器的校验子$S$。公式为：\n$$\nS = \\bigoplus_{i=0}^{7} \\left(s_i \\oplus c_i \\oplus a_i \\oplus b_i\\right)\n$$\n问题指定我们必须使用故障的和位与进位位，因此我们计算：\n$$\nS = \\bigoplus_{i=0}^{7} \\left(s'_i \\oplus c'_i \\oplus a_i \\oplus b_i\\right)\n$$\n我们可以简化求和内的项。根据求和逻辑的定义，$s'_i = p'_i \\oplus c'_i$，这意味着$s'_i \\oplus c'_i = p'_i$。根据传播信号的定义，$a_i \\oplus b_i = p_i$。\n将这些代入$S$的表达式中：\n$$\nS = \\bigoplus_{i=0}^{7} \\left(p'_i \\oplus p_i\\right)\n$$\n该校验子检查进位网络使用的传播信号（$p'_i$）与直接从输入导出的信号（$p_i$）之间的一致性。\n故障是$p_4$上的固定为1故障，所以$p'_4 = 1$，而从输入生成的正确值为$p_4 = 0$。对于所有其他索引$i \\neq 4$，我们有$p'_i = p_i$。\n因此，对于所有$i \\neq 4$，$p'_i \\oplus p_i$项为$0$。唯一的非零项是$i=4$时：\n$$\np'_4 \\oplus p_4 = 1 \\oplus 0 = 1\n$$\n校验子$S$是所有这些项的异或和：\n$$\nS = (p'_0 \\oplus p_0) \\oplus (p'_1 \\oplus p_1) \\oplus \\dots \\oplus (p'_7 \\oplus p_7) = 0 \\oplus 0 \\oplus 0 \\oplus 0 \\oplus 1 \\oplus 0 \\oplus 0 \\oplus 0 = 1\n$$\n校验子位为$S=1$，表示已检测到错误。\n\n最终答案由汉明距离$d$和校验子$S$组成。\n$d = 3$\n$S = 1$\n这表示为一个行矩阵。", "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n3  1\n\\end{pmatrix}\n}\n$$", "id": "3619332"}]}