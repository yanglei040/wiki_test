{"hands_on_practices": [{"introduction": "静态分支预测中最常见的启发式方法之一是“后向分支预测为跳转，前向分支预测为不跳转”（BTFNT）。这项练习旨在通过一个包含罕见错误处理循环的简单控制流，帮助你掌握 BTFNT 规则的基本应用。通过分析这种常见编程模式下的预测行为，你将学会如何从第一性原理出发，计算预测失误的数量，从而为更复杂的性能分析奠定坚实的基础。[@problem_id:3680956]", "problem": "一个处理器使用静态分支预测，其规则是“向后跳转，向前不跳转”（Backward Taken, Forward Not Taken, BTFNT）。根据 BTFNT 规则，任何目标程序计数器地址低于分支指令本身地址的条件分支，被预测为跳转；任何目标程序计数器地址高于分支指令本身地址的条件分支，被预测为不跳转。当实际的分支结果与静态预测不同时，就会发生预测错误。\n\n考虑一个程序，在每次完整执行时，它会执行一个测试错误条件的单一向前条件分支。如果错误条件成立，控制流将转移到一个错误处理循环；否则，控制流将直接继续到正常结束。其控制流可以描述如下：\n- 在主路径上，一个向前条件分支测试一个错误谓词，该谓词为真的概率为 $p \\in [0,1]$。如果为真，控制流向前跳转到错误处理循环的入口；如果为假，控制流继续执行直到终止。\n- 错误处理循环的结构是，在其末尾有一个单一的向后条件分支，当错误条件仍未解决时，该分支会跳回循环的顶部。一旦进入，该循环会迭代有限的正整数次 $N \\geq 1$，并且仅在最后一次迭代中向后分支判断为不跳转时退出。\n\n假设在 $T$ 次独立的完整程序执行中，每次执行时向前分支的错误谓词为真的概率独立地为 $p$。没有其他分支执行。从上述基本定义出发，并且不使用任何关于预测错误计数的预先推导出的公式，请沿此控制流推断 BTFNT 预测器将正确和错误预测的动态结果。然后，计算在 $T$ 次执行中预测错误的总期望数，结果表示为关于 $p$ 和 $T$ 的封闭形式表达式。\n\n请以 $p$ 和 $T$ 的单个解析表达式形式提供最终答案。不要使用百分号；将 $p$ 解释为 $[0,1]$ 范围内的小数。不需要四舍五入。", "solution": "首先对问题陈述进行验证。\n\n**步骤1：提取已知条件**\n- 处理器使用静态分支预测规则：向后跳转，向前不跳转（BTFNT）。\n- BTFNT 定义：如果条件分支的目标程序计数器（PC）地址低于分支指令本身的PC地址（向后分支），则预测为跳转。如果目标PC地址更高（向前分支），则预测为不跳转。\n- 程序执行一个单一的向前条件分支。\n- 这个向前分支测试一个错误谓词。\n- 该错误谓词为真的概率为 $p \\in [0,1]$。\n- 如果谓词为真（分支跳转），控制流向前跳转到一个错误处理循环。\n- 如果谓词为假（分支不跳转），控制流继续执行直到程序终止。\n- 错误处理循环在其末尾包含一个单一的向后条件分支。\n- 一旦进入，该循环会迭代有限的正整数次， $N \\geq 1$。\n- 在前 $N-1$ 次迭代中，向后分支会跳转；在最后的第 $N$ 次迭代中，该分支不跳转，导致循环退出。\n- 程序被独立执行 $T$ 次。\n- 目标是计算在 $T$ 次执行中预测错误的总期望数，并表示为关于 $p$ 和 $T$ 的封闭形式表达式。\n\n**步骤2：使用提取的已知条件进行验证**\n- **科学依据：** 该问题牢固地植根于计算机体系结构的原理，特别是处理器设计和性能分析。像BTFNT这样的静态分支预测方案是标准的入门主题，而使用概率对程序行为进行建模以分析性能是一种常见且有效的方法。\n- **问题定义良好：** 这是一个定义良好的问题。预测规则的定义明确。所有情况下的控制流都已完整描述。分支结果的概率性质已经指定。问题要求根据所提供的参数计算一个数学上可计算的量，即期望值。循环迭代 $N \\geq 1$ 次这一事实足以确定循环内的预测错误次数，而无需知道 $N$ 的具体值。\n- **客观性：** 问题以精确、客观的语言陈述，没有歧义或主观论断。\n\n**步骤3：结论与行动**\n该问题是有效的，因为它具有科学依据、信息自足且定义良好。可以从提供的信息中推导出严谨的解决方案。我们继续进行求解。\n\n目标是找出在 $T$ 次独立的程序执行中预测错误的总期望数。设 $M_{total}$ 为预测错误的总数。根据期望的线性性质，如果所有执行都是独立同分布的，那么总的期望预测错误数是单次执行的期望预测错误数的 $T$ 倍。\n$$E[M_{total}] = E\\left[ \\sum_{i=1}^{T} M_i \\right] = \\sum_{i=1}^{T} E[M_i] = T \\cdot E[M]$$\n其中 $M_i$ 是第 $i$ 次执行中的预测错误数，而 $E[M]$ 是任何单次执行中的期望预测错误数。我们现在必须计算 $E[M]$。\n\n单次执行的路径由初始向前条件分支的结果决定。我们分析两种可能情况下的预测错误。\n\n**情况1：错误谓词为假。**\n此事件发生的概率为 $1-p$。\n- **向前分支分析：**\n    - 该分支是一个**向前**分支。\n    - 根据 BTFNT 规则，预测为**不跳转**。\n    - 实际结果是**不跳转**，因为谓词为假。\n    - 预测与结果相符。此分支的预测错误数为 $0$。\n- **循环分析：**\n    - 由于向前分支未跳转，控制流不进入错误处理循环。\n    - 循环内的向后分支从未被执行。\n    - 来自循环的预测错误数为 $0$。\n- **情况1中的总预测错误数：** 在此情况下，总预测错误数为 $0 + 0 = 0$。\n\n**情况2：错误谓词为真。**\n此事件发生的概率为 $p$。\n- **向前分支分析：**\n    - 该分支是一个**向前**分支。\n    - BTFNT 的预测是**不跳转**。\n    - 实际结果是**跳转**，因为谓词为真，将控制流转移到循环。\n    - 预测与结果不符。这构成了一次**预测错误**。此分支的预测错误数为 $1$。\n- **循环分析：**\n    - 控制流进入错误处理循环。该循环包含一个单一的**向后**条件分支，该分支被执行 $N$ 次，其中 $N \\geq 1$。\n    - 对于一个向后分支，BTFNT 的预测总是**跳转**。\n    - 此分支的实际结果是：在前 $N-1$ 次迭代中为‘跳转’以继续循环，在最后的第 $N$ 次迭代中为‘不跳转’以退出循环。\n    - 在前 $N-1$ 次迭代中：预测 = 跳转，实际 = 跳转。这导致 $N-1$ 次正确预测。\n    - 在第 $N$ 次迭代中：预测 = 跳转，实际 = 不跳转。这导致 $1$ 次**预测错误**。\n    - 因此，一旦进入循环，来自循环的预测错误总数恰好为 $1$。\n- **情况2中的总预测错误数：** 总预测错误数是向前分支和循环的错误数之和：$1 + 1 = 2$。\n\n现在，我们可以使用全期望定律计算单次执行的期望预测错误数 $E[M]$。$M$ 是一个随机变量，它以 $1-p$ 的概率取值 $0$，以 $p$ 的概率取值 $2$。\n$$E[M] = (0 \\times P(\\text{Scenario 1})) + (2 \\times P(\\text{Scenario 2}))$$\n$$E[M] = 0 \\cdot (1-p) + 2 \\cdot p = 2p$$\n\n最后，我们计算在 $T$ 次独立执行中的总期望预测错误数。\n$$E[M_{total}] = T \\cdot E[M] = T \\cdot (2p) = 2pT$$\n这个表达式就是以 $p$ 和 $T$ 表示的总期望预测错误数。", "answer": "$$\\boxed{2pT}$$", "id": "3680956"}, {"introduction": "在理解了基本的预测规则后，下一步是量化其对处理器整体性能的影响。这项练习将引导你分析一个包含两种不同分支（循环和错误检查）的微基准测试程序，并比较两种静态预测策略：BTFNT 和“总是预测为不执行”。通过推导和计算预测准确率 ($A$) 与每指令周期数 ($CPI$)，你将亲身体会到不同的预测策略如何导致显著的性能差异，并理解为什么像 BTFNT 这样的启发式方法在典型循环结构中如此有效。[@problem_id:3680985]", "problem": "一个简单的微基准测试执行一个循环，每次迭代包含两个条件分支：一个后向的循环回边分支和一个前向的错误检查分支。考虑两种静态预测器：后向采取、前向不采取 (BTFNT) 预测器和始终不采取预测器。假设以下条件，并为了分析目的，将基于给定概率的所有期望值视为精确值。\n\n- 循环精确执行 $L$ 次迭代。循环回边是一个后向分支，在前 $L-1$ 次迭代中被采取，在循环退出时有一次不被采取。\n- 在每次迭代中，回边分支之前，代码会执行一个前向错误检查分支，该分支以概率 $p$ 独立地被采取，以概率 $1-p$ 不被采取。当此错误检查分支被采取时，该次迭代会额外执行 $H$ 条指令；当不被采取时，不会执行此错误处理块中的任何额外指令。\n- 每次迭代在循环体中精确执行 $B$ 条非分支指令（不包括两个分支指令和任何错误处理指令），外加两个分支指令本身（前向错误检查分支和后向回边分支）。\n- 处理器是一个顺序流水线，在没有控制冒险的情况下，理想的基础成本为每条指令 $1$ 个时钟周期。对于任何分支预测错误，流水线会产生 $M$ 个时钟周期的额外固定预测错误惩罚。不存在其他停顿或缓存效应。\n\n使用以下基本定义：(i) 预测准确率 $A$ 是正确预测的分支结果数与动态分支总数的比率；(ii) 每指令周期数 (CPI) 是总时钟周期数除以总完成指令数，其中总时钟周期数等于基础指令周期数加上预测错误惩罚。\n\n给定参数 $L=200$, $p=0.03$, $H=6$, $B=18$, 以及 $M=3$：\n\n1. 推导在 BTFNT 和始终不采取预测器下，所有动态分支结果的综合预测准确率 $A$ 的表达式，然后根据给定参数计算它们的值。\n2. 推导在 BTFNT 和始终不采取预测器下的期望 CPI 的表达式，然后根据给定参数计算它们的值。\n3. 最后，以小数形式报告 CPI 提升 $\\Delta = \\text{CPI}_{\\text{always-not}} - \\text{CPI}_{\\text{BTFNT}}$，四舍五入到四位有效数字。最终数值答案中不要包含任何单位。", "solution": "该问题提法明确，在计算机体系结构原理上有科学依据，并提供了一套完整且一致的分析参数。因此，该问题被认为是有效的。我们首先推导所关心物理量的通用表达式，然后代入给定的数值进行求解。\n\n提供的参数如下：\n- 循环迭代次数：$L = 200$\n- 前向分支采取的概率：$p = 0.03$\n- 错误处理指令数：$H = 6$\n- 循环体中的基础指令数：$B = 18$\n- 预测错误惩罚：$M = 3$ 个时钟周期\n\n首先，我们确定一些与分支预测策略无关的量。\n循环执行 $L$ 次。在每次迭代中，有两个分支指令：一个前向错误检查分支和一个后向循环回边分支。\n动态分支指令的总数为：\n$$ I_{\\text{branches}} = 2L $$\n\n完成指令的总数 $I_{\\text{total}}$ 包括每次循环迭代中执行的基础指令，以及当错误检查分支被采取时执行的额外指令。每次迭代的基础指令为 $B$ 条非分支指令加上 $2$ 条分支指令，共计 $B+2$ 条。错误检查分支以概率 $p$ 被采取，增加 $H$ 条指令。因此，期望的总完成指令数 $E[I_{\\text{total}}]$ 为：\n$$ E[I_{\\text{total}}] = L(B+2) + LpH = L(B+2+pH) $$\n对于给定参数：\n$$ E[I_{\\text{total}}] = 200(18+2+(0.03)(6)) = 200(20+0.18) = 200(20.18) = 4036 $$\n\n1.  **预测准确率 ($A$)**\n\n准确率是正确预测的分支数与动态分支总数的比率。\n\n**a) BTFNT (后向采取，前向不采取) 预测器**\n该策略是预测所有后向分支为“采取”，所有前向分支为“不采取”。\n-   **前向分支**：共有 $L$ 个动态前向分支。它们被预测为“不采取”。它们实际以概率 $p$ 被采取。期望的正确预测次数是分支不被采取的次数：$L(1-p)$。\n-   **后向分支**：共有 $L$ 个动态后向分支。它们被预测为“采取”。循环回边在前 $L-1$ 次迭代中被采取，在最后退出时不被采取。因此，有 $L-1$ 次正确预测。\n\nBTFNT 方案的期望正确预测总数 $C_{\\text{BTFNT}}$ 为：\n$$ E[C_{\\text{BTFNT}}] = L(1-p) + (L-1) = 2L - Lp - 1 $$\n准确率 $A_{\\text{BTFNT}}$ 为：\n$$ A_{\\text{BTFNT}} = \\frac{E[C_{\\text{BTFNT}}]}{2L} = \\frac{2L - Lp - 1}{2L} $$\n数值计算：\n$$ A_{\\text{BTFNT}} = \\frac{2(200) - 200(0.03) - 1}{2(200)} = \\frac{400 - 6 - 1}{400} = \\frac{393}{400} = 0.9825 $$\n\n**b) 始终不采取预测器**\n该策略是预测所有分支为“不采取”。\n-   **前向分支**：共有 $L$ 个动态前向分支。它们被预测为“不采取”。正确预测的次数与 BTFNT 相同：$L(1-p)$。\n-   **后向分支**：共有 $L$ 个动态后向分支。它们被预测为“不采取”。该分支实际上仅在循环退出时有一次不被采取。因此，只有 $1$ 次正确预测。\n\n始终不采取方案的期望正确预测总数 $C_{\\text{always-not}}$ 为：\n$$ E[C_{\\text{always-not}}] = L(1-p) + 1 $$\n准确率 $A_{\\text{always-not}}$ 为：\n$$ A_{\\text{always-not}} = \\frac{E[C_{\\text{always-not}}]}{2L} = \\frac{L(1-p) + 1}{2L} $$\n数值计算：\n$$ A_{\\text{always-not}} = \\frac{200(1-0.03) + 1}{2(200)} = \\frac{200(0.97) + 1}{400} = \\frac{194 + 1}{400} = \\frac{195}{400} = 0.4875 $$\n\n2.  **每指令周期数 (CPI)**\n\nCPI 是总时钟周期数与总完成指令数的比率。总时钟周期数是基础周期（每条指令一个周期）和预测错误惩罚周期的总和。\n$$ \\text{CPI} = \\frac{E[I_{\\text{total}}] \\times 1 + E[\\text{Mispredictions}] \\times M}{E[I_{\\text{total}}]} = 1 + \\frac{E[\\text{Mispredictions}] \\times M}{E[I_{\\text{total}}]} $$\n首先，我们计算每种策略的期望预测错误次数。一次预测错误是正确预测的补集。$E[\\text{Mispredictions}] = I_{\\text{branches}} - E[\\text{Correct}]$。\n\n**a) BTFNT 的 CPI**\n期望的预测错误次数 $E[\\text{Misc}_{\\text{BTFNT}}]$ 为：\n-   **前向分支**：在被采取时预测错误。期望次数：$Lp$。\n-   **后向分支**：在不被采取时预测错误。次数：$1$（在循环退出时）。\n$$ E[\\text{Misc}_{\\text{BTFNT}}] = Lp + 1 $$\nCPI 表达式为：\n$$ \\text{CPI}_{\\text{BTFNT}} = 1 + \\frac{(Lp + 1)M}{L(B+2+pH)} $$\n数值计算：\n$$ E[\\text{Misc}_{\\text{BTFNT}}] = 200(0.03) + 1 = 6 + 1 = 7 $$\n$$ \\text{CPI}_{\\text{BTFNT}} = 1 + \\frac{7 \\times 3}{4036} = 1 + \\frac{21}{4036} = \\frac{4036+21}{4036} = \\frac{4057}{4036} \\approx 1.005203 $$\n\n**b) 始终不采取预测器的 CPI**\n期望的预测错误次数 $E[\\text{Misc}_{\\text{always-not}}]$ 为：\n-   **前向分支**：在被采取时预测错误。期望次数：$Lp$。\n-   **后向分支**：在被采取时预测错误。次数：$L-1$。\n$$ E[\\text{Misc}_{\\text{always-not}}] = Lp + (L-1) $$\nCPI 表达式为：\n$$ \\text{CPI}_{\\text{always-not}} = 1 + \\frac{(Lp + L - 1)M}{L(B+2+pH)} $$\n数值计算：\n$$ E[\\text{Misc}_{\\text{always-not}}] = 200(0.03) + (200 - 1) = 6 + 199 = 205 $$\n$$ \\text{CPI}_{\\text{always-not}} = 1 + \\frac{205 \\times 3}{4036} = 1 + \\frac{615}{4036} = \\frac{4036+615}{4036} = \\frac{4651}{4036} \\approx 1.152379 $$\n\n3.  **CPI 提升 ($\\Delta$)**\n\nCPI 提升定义为 $\\Delta = \\text{CPI}_{\\text{always-not}} - \\text{CPI}_{\\text{BTFNT}}$。\n使用推导出的表达式：\n$$ \\Delta = \\left(1 + \\frac{(Lp + L - 1)M}{E[I_{\\text{total}}]}\\right) - \\left(1 + \\frac{(Lp + 1)M}{E[I_{\\text{total}}]}\\right) $$\n$$ \\Delta = \\frac{M}{E[I_{\\text{total}}]} \\left( (Lp + L - 1) - (Lp + 1) \\right) $$\n$$ \\Delta = \\frac{M(L - 2)}{E[I_{\\text{total}}]} = \\frac{M(L - 2)}{L(B+2+pH)} $$\n现在我们代入数值：\n$$ \\Delta = \\frac{3(200 - 2)}{4036} = \\frac{3(198)}{4036} = \\frac{594}{4036} $$\n计算该分数值并四舍五入到四位有效数字：\n$$ \\Delta \\approx 0.14717542... \\approx 0.1472 $$\n这个结果也可以通过减去数值 CPI 值得到：\n$$ \\Delta = \\frac{4651}{4036} - \\frac{4057}{4036} = \\frac{4651 - 4057}{4036} = \\frac{594}{4036} \\approx 0.1472 $$", "answer": "$$ \\boxed{0.1472} $$", "id": "3680985"}, {"introduction": "处理器性能并非仅仅由硬件决定，软件的结构和优化同样扮演着至关重要的角色。这个最终练习探讨了软硬件之间的微妙互动，通过分析一种常见的编译器优化技术——内联（inlining）——对分支预测性能的影响。你将计算由于代码重构导致的分支行为改变，从而引起的预测准确率下降 ($A_{\\text{drop}}$) 和 $CPI$ 的变化 ($\\Delta CPI$)，深刻理解性能工程中权衡利弊的复杂性。[@problem_id:3680954]", "problem": "一个单发射标量核使用一个静态预测器，该预测器实现了“后向分支预测为跳转，前向分支预测为不跳转”（Backward Taken, Forward Not Taken, BTFNT）策略。在没有控制冒险的情况下，基本每指令周期数（CPI）为 $CPI_{0} = 1$。分支预测错误的惩罚是一次流水线冲刷，其代价为 $P = 8$ 个周期。在一个热循环中，条件分支密度为 $f_{b} = 0.20$ 分支/指令。在原始的外联（out-of-line）错误处理组织方式下，循环中遇到的条件分支分布和行为如下：\n- 比例为 $p_{\\text{loop}} = 0.50$ 的是向后的循环闭合分支，其实际发生概率为 $t_{\\text{loop}} = 0.90$。\n- 比例为 $p_{\\text{err}} = 0.30$ 的是跳转到外联错误处理位置的向前分支，其实际发生概率为 $t_{\\text{err,orig}} = 0.02$。\n- 剩余比例为 $p_{\\text{other}} = 0.20$ 的是其他向前分支，其实际发生概率为 $t_{\\text{other}} = 0.40$。\n\n一次重构将错误处理内联（inline）到热路径中，方法是：将一个简短的错误处理块放置在代码中，并用一个向前条件分支来保护它，该分支在通常情况下（无错误时）会跳过这个块。错误检查的频率和所有其他分支行为保持不变，但内联的向前错误保护分支现在以 $t_{\\text{err,new}} = 0.98$ 的概率发生（以跳过不大可能发生的错误块）。静态预测器仍然是 BTFNT。\n\n仅从 BTFNT 的定义以及关于预测准确率和每指令周期数的期望值推理出发，不使用任何预先推导的性能公式，请确定：\n- BTFNT 预测准确率的下降值 $A_{\\text{drop}}$，定义为 $A_{\\text{drop}} = A_{\\text{orig}} - A_{\\text{new}}$，其中 $A$ 表示所有条件分支的总体预测准确率。\n- 相应的每指令周期数的变化量 $\\Delta CPI = CPI_{\\text{new}} - CPI_{\\text{orig}}$，其中 $CPI$ 包含了预测错误的影响。\n\n将 $A_{\\text{drop}}$ 表示为纯小数（而非百分比），$\\Delta CPI$ 以“周期/指令”为单位。将两个量都四舍五入到四位有效数字。", "solution": "“后向分支预测为跳转，前向分支预测为不跳转”（BTFNT）策略预测任何向后分支为“发生”（taken），任何向前分支为“不发生”（not taken）。对于任何实际发生概率为 $t$ 的分支类别，BTFNT 的准确率如下：\n- 对于向后分支：预测为“发生”，因此准确率为 $t$（当分支实际发生时预测正确）。\n- 对于向前分支：预测为“不发生”，因此准确率为 $1 - t$（当分支实际不发生时预测正确）。\n\n跨异构分支类别的总体预测准确率是每个分支准确率的期望值，该期望值根据每个类别中分支所占的比例进行加权。设 $A_{\\text{orig}}$ 表示原始（内联前）准确率，$A_{\\text{new}}$ 表示内联后准确率。\n\n通过对各部分贡献求和来计算 $A_{\\text{orig}}$：\n- 向后循环分支：比例 $p_{\\text{loop}} = 0.50$，准确率 $t_{\\text{loop}} = 0.90$，贡献为 $0.50 \\times 0.90 = 0.45$。\n- 向前错误分支（外联）：比例 $p_{\\text{err}} = 0.30$，向前预测为不发生；准确率 $1 - t_{\\text{err,orig}} = 1 - 0.02 = 0.98$，贡献为 $0.30 \\times 0.98 = 0.294$。\n- 其他向前分支：比例 $p_{\\text{other}} = 0.20$，向前预测为不发生；准确率 $1 - t_{\\text{other}} = 1 - 0.40 = 0.60$，贡献为 $0.20 \\times 0.60 = 0.12$。\n\n因此，\n$$\nA_{\\text{orig}} = 0.45 + 0.294 + 0.12 = 0.864.\n$$\n\n内联之后，唯一的变化是与错误相关的向前分支的行为：它们仍然是向前分支，但现在以 $t_{\\text{err,new}} = 0.98$ 的概率发生（因为在通常情况下，分支会跳过内联的不大可能发生的错误块）。在 BTFNT 策略下，向前分支被预测为不发生，所以这个类别的准确率变为 $1 - t_{\\text{err,new}} = 1 - 0.98 = 0.02$。其他类别保持不变。\n\n因此，\n- 向后循环分支：贡献不变，$0.50 \\times 0.90 = 0.45$。\n- 向前错误分支（内联）：贡献为 $0.30 \\times 0.02 = 0.006$。\n- 其他向前分支：贡献不变，$0.20 \\times 0.60 = 0.12$。\n\n因此，\n$$\nA_{\\text{new}} = 0.45 + 0.006 + 0.12 = 0.576.\n$$\n\n准确率下降值为\n$$\nA_{\\text{drop}} = A_{\\text{orig}} - A_{\\text{new}} = 0.864 - 0.576 = 0.288.\n$$\n\n接下来，计算每指令周期数的变化量。根据定义，总的每指令周期数可以分解为基本项加上由分支预测错误带来的期望额外周期数。设 $CPI_{0} = 1$ 为无控制冒险时的基本每指令周期数，$f_{b} = 0.20$ 为以“分支/指令”为单位的分支频率，$P = 8$ 为以周期为单位的预测错误惩罚。每个分支的预测错误率为 $1 - A$。因此，由于预测错误导致的每条指令的期望额外周期数为 $f_{b} \\times P \\times (1 - A)$。\n\n原始情况：\n$$\nCPI_{\\text{orig}} = CPI_{0} + f_{b} \\times P \\times (1 - A_{\\text{orig}}) = 1 + 0.20 \\times 8 \\times (1 - 0.864).\n$$\n计算 $1 - A_{\\text{orig}}$ 项：\n$$\n1 - A_{\\text{orig}} = 1 - 0.864 = 0.136.\n$$\n那么\n$$\nCPI_{\\text{orig}} = 1 + 0.20 \\times 8 \\times 0.136 = 1 + 8 \\times 0.0272 = 1 + 0.2176 = 1.2176.\n$$\n\n新情况：\n$$\nCPI_{\\text{new}} = CPI_{0} + f_{b} \\times P \\times (1 - A_{\\text{new}}) = 1 + 0.20 \\times 8 \\times (1 - 0.576).\n$$\n计算 $1 - A_{\\text{new}}$ 项：\n$$\n1 - A_{\\text{new}} = 1 - 0.576 = 0.424.\n$$\n那么\n$$\nCPI_{\\text{new}} = 1 + 0.20 \\times 8 \\times 0.424 = 1 + 8 \\times 0.0848 = 1 + 0.6784 = 1.6784.\n$$\n\n因此，每指令周期数的变化量为\n$$\n\\Delta CPI = CPI_{\\text{new}} - CPI_{\\text{orig}} = 1.6784 - 1.2176 = 0.4608.\n$$\n\n将两个量四舍五入到四位有效数字，得到：\n$$\nA_{\\text{drop}} = 0.2880, \\quad \\Delta CPI = 0.4608.\n$$", "answer": "$$\\boxed{\\begin{pmatrix}0.2880  0.4608\\end{pmatrix}}$$", "id": "3680954"}]}