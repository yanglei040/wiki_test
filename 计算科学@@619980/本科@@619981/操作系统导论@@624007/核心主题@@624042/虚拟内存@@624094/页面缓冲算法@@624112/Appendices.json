{"hands_on_practices": [{"introduction": "操作系统的一个核心任务是高效地管理内存资源，这通常包括维持一个“空闲页”缓冲池，以快速满足新的内存分配请求。这个练习模拟了一个常见但重要的场景：当一个大内存消耗的进程突然终止时，会瞬间释放大量内存页。通过分析系统如何从这种页面的“过剩”状态恢复到目标水平 [@problem_id:3667357]，我们可以掌握描述系统动态恢复能力的基本模型，并理解资源消耗率在这一过程中所扮演的关键角色。", "problem": "考虑一个操作系统（OS），它使用页面缓冲算法来将空闲物理内存页面的池子维持在一个目标水平附近。设 $F(t)$ 表示时间 $t$ 时的空闲页面数，设 $F_t$ 表示系统旨在维持的目标空闲页面数。假设以下基于基本流量守恒的基线行为：时间导数 $\\frac{dF}{dt}$ 等于空闲页面的净流入减去净流出。页面缓冲守护进程仅在 $F(t) < F_t$ 时才重新填充空闲列表以将 $F(t)$ 增加到 $F_t$ 方向，而在 $F(t) \\ge F_t$ 时则不进行填充。工作负载以恒定速率 $\\rho$（单位：页/秒）请求新页面，这通过消耗空闲列表中的页面来满足。\n\n系统初始处于稳态，其中 $F(0^{-}) = F_t$。在时间 $t = 0$ 时，一个进程被终止，瞬时释放了 $K$ 个页面到空闲列表中。在此事件之后，$F(t)$ 的唯一持续变化来自工作负载以速率 $\\rho$ 的恒定分配需求，且只要 $F(t) \\ge F_t$，守护进程就保持不活动状态。\n\n仅使用上述原理，推导由进程终止引起的空闲页面数 $F(0^{+})$ 的瞬时峰值，以及在恒定分配需求 $\\rho$ 下，$F(t)$ 返回到 $F_t$ 所需的时间 $t_r$。将 $t_r$ 以秒为单位表示。将你的最终答案以包含 $F(0^{+})$ 和 $t_r$ 的单行矩阵形式给出。无需四舍五入，页面数被视为无量纲量，而时间以秒为单位计量。", "solution": "用户要求我解决一个关于操作系统页面缓冲算法的问题。\n\n### 步骤1：提取已知条件\n- $F(t)$: 时间 $t$ 时的空闲页面数。\n- $F_t$: 目标空闲页面数。\n- 主导原则是 $\\frac{dF}{dt} = \\text{net inflow} - \\text{net outflow}$。\n- 页面缓冲守护进程仅在 $F(t) < F_t$ 时重新填充空闲列表。\n- 页面缓冲守护进程在 $F(t) \\ge F_t$ 时不活动。\n- 工作负载以恒定速率 $\\rho$（页/秒）请求新页面。\n- 初始条件是稳态：$F(0^{-}) = F_t$。\n- 在 $t=0$ 时，有 $K$ 个页面被瞬时释放。\n- 对于 $t > 0$，$F(t)$ 的唯一变化是速率为 $\\rho$ 的消耗。\n- 目标是找到事件发生后瞬间的空闲页面数 $F(0^{+})$，以及页面数返回到 $F_t$ 所需的时间 $t_r$。\n\n### 步骤2：使用提取的已知条件进行验证\n对问题进行验证检查。\n\n- **科学基础（关键）**：该问题提出了一个简化但有效的资源管理系统模型，特别是操作系统中的内存页面管理。使用控制机制（守护进程）将资源水平维持在目标附近并核算消耗的核心概念，是控制理论和系统工程的基础。守恒方程 $\\frac{dF}{dt} = \\text{inflow} - \\text{outflow}$ 是为此类系统建模的标准原则。因此，该问题具有科学基础。\n- **适定性**：该问题是适定的。它提供了清晰的初始状态 ($F(0^{-})=F_t$)、一个特定事件（增加 $K$ 个页面）以及对于 $t>0$ 的明确定义的动态行为（以速率 $\\rho$ 消耗）。待求量 $F(0^{+})$ 和 $t_r$ 被明确定义。所有必要信息都已提供。\n- **客观性（关键）**：问题陈述是客观的，使用了诸如“恒定速率 $\\rho$”、“瞬时释放 $K$ 个页面”和“目标水平 $F_t$”等精确语言术语。它不含主观或基于意见的论断。\n\n该问题没有表现出任何列出的无效性缺陷。这是一个系统动力学建模中的标准、可解问题。\n\n### 步骤3：结论与行动\n问题有效。将提供解答。\n\n### 解题推导\n\n问题要求两个量：时间 $t=0^{+}$ 时的空闲页面数，记为 $F(0^{+})$，以及空闲页面数返回目标水平 $F_t$ 所需的时间 $t_r$。\n\n首先，我们确定 $F(0^{+})$。系统在时间 $t=0^{-}$（即 $t=0$ 之前的一瞬间）时处于稳态，空闲页面数处于目标水平。\n$$F(0^{-}) = F_t$$\n在 $t=0$ 时，一个进程终止导致 $K$ 个页面被“瞬时”释放。这意味着在 $t=0$ 的瞬间，空闲页面数增加了 $K$。因此，时间 $t=0^{+}$（即 $t=0$ 之后的一瞬间）的页面数是 $t=0^{-}$ 时的页面数加上新释放的页面。\n$$F(0^{+}) = F(0^{-}) + K$$\n代入初始条件，我们得到：\n$$F(0^{+}) = F_t + K$$\n\n接下来，我们确定系统返回目标空闲页面数 $F_t$ 所需的时间 $t_r$。对于任何时间 $t>0$，$F(t)$ 的演变由以下微分方程控制：\n$$\\frac{dF}{dt} = \\text{inflow rate} - \\text{outflow rate}$$\n问题陈述，只要 $F(t) \\ge F_t$，页面缓冲守护进程就保持不活动状态。由于 $K$ 是被释放的页面数，我们假设 $K>0$，这意味着 $F(0^{+}) = F_t + K > F_t$。因此，在 $t=0$ 之后的时期内，$F(t) \\ge F_t$ 的条件成立，守护进程不活动。这意味着空闲页面的流入速率为 $0$。\n\n页面的流出是由于工作负载的恒定分配需求，其速率为 $\\rho$。因此，流出速率为 $\\rho$。\n对于 $t > 0$ 且 $F(t) \\ge F_t$ 时，主导微分方程为：\n$$\\frac{dF}{dt} = 0 - \\rho = -\\rho$$\n为了求得 $F(t)$，我们将这个简单的一阶常微分方程对时间 $t$ 积分。为了对 $t>0$ 的系统进行建模，我们可以将 $F(0)$ 视为 $F(0^{+})$。\n$$\\int_{F(0^{+})}^{F(t)} dF' = \\int_{0}^{t} (-\\rho) dt'$$\n$$F(t) - F(0^{+}) = -\\rho t$$\n$$F(t) = F(0^{+}) - \\rho t$$\n代入我们关于 $F(0^{+})$ 的结果：\n$$F(t) = (F_t + K) - \\rho t$$\n这个方程描述了从 $t \\ge 0$ 开始，直到 $F(t)$ 下降到 $F_t$ 为止，空闲页面数作为时间函数的表现。\n\n时间 $t_r$ 定义为 $F(t)$ 返回目标 $F_t$ 的时刻。我们通过在上述方程中设置 $F(t_r) = F_t$ 来求得 $t_r$：\n$$F_t = (F_t + K) - \\rho t_r$$\n现在，我们求解 $t_r$：\n$$F_t - (F_t + K) = -\\rho t_r$$\n$$-K = -\\rho t_r$$\n假设 $\\rho > 0$，我们可以两边同除以 $-\\rho$：\n$$t_r = \\frac{K}{\\rho}$$\n页面数被视为无量纲量，时间单位为秒，因此 $t_r$ 的最终表达式单位为秒，符合要求。\n\n所求的两个量是 $F(0^{+}) = F_t + K$ 和 $t_r = \\frac{K}{\\rho}$。", "answer": "$$\\boxed{\\begin{pmatrix} F_t + K & \\frac{K}{\\rho} \\end{pmatrix}}$$", "id": "3667357"}, {"introduction": "与资源过剩相比，操作系统更常面临内存资源紧张的挑战。当可用内存页数量降至一个危险的低水位线以下时，系统必须启动紧急回收机制以避免崩溃。这个练习 [@problem_id:3667406] 引导我们对这种高压情景进行建模，分析紧急回收器如何通过优先处理“干净”页面来快速补充空闲池。通过这个实践，你将学会如何结合概率论（页面是干净还是脏的）和速率分析来评估一个并行回收系统的性能，并计算出系统恢复到安全状态所需的时间。", "problem": "一个使用页面缓冲算法的操作系统维护着一个空闲页面池，该池设有一个低水位线阈值 $F_{\\min}$。当可用空闲页面数 $F(t)$ 降至 $F_{\\min}$ 以下时，会触发紧急回收机制。在时间 $t=0$ 时，一次突发的内存压力尖峰导致空闲页面池降至 $F(0)=F_{0}$，其中 $F_{0} < F_{\\min}$。紧急回收机制使用 $k$ 个并行线程来扫描候选页面以进行回收。对于每个候选页面，它有 $q$ 的概率是干净的，回收一个干净页面需要 $t_{c}$ 秒。它有 $1-q$ 的概率是脏的，在这种情况下，线程会跳过该页面，耗时 $t_{s}$ 秒。在紧急回收期间，应用程序继续以恒定速率 $a$ （单位：页/秒）分配新页面。假设紧急回收过程的动态可以用确定性速率方程 $\\frac{dF}{dt} = \\mu - a$ 来近似，其中 $\\mu$ 是 $k$ 个线程的总回收吞吐量。紧急阶段在空闲页面数恢复到 $F_{\\min}$ 时结束，令这个恢复时间为 $t_{\\text{rec}}$，即 $F(t_{\\text{rec}})=F_{\\min}$。\n\n首先，推导总回收吞吐量 $\\mu$ 的解析表达式。其次，用 $\\mu$ 和给定的参数推导恢复时间 $t_{\\text{rec}}$ 的表达式。最后，计算当 $F_{\\min} = 2000$ 页，$F_{0} = 500$ 页，$a = 2.0 \\times 10^{4}$ 页/秒，$k = 8$，$q = 0.6$，$t_{c} = 1.5 \\times 10^{-4}$ 秒，以及 $t_{s} = 1.0 \\times 10^{-5}$ 秒时的 $t_{\\text{rec}}$ 值。将最终答案四舍五入到四位有效数字。", "solution": "问题陈述已经过验证，被认为是有效的。它在科学上基于操作系统内存管理和性能建模的原理，问题设定良好，目标明确，信息充分，语言客观。该问题是一个应用概率论和速率分析基本原理的形式化练习。\n\n第一个任务是推导总回收吞吐量 $\\mu$ 的表达式。这是 $k$ 个回收器线程释放干净页面的总速率。我们首先考虑单个回收器线程。\n\n单个线程重复处理候选页面。对于每个候选页面，有两种可能的结果：\n1.  页面有 $q$ 的概率是干净的。在这种情况下，页面被释放，所需时间为 $t_{c}$。成功回收一个页面。\n2.  页面有 $1-q$ 的概率是脏的。在这种情况下，页面被跳过，所需时间为 $t_{s}$。回收零个页面。\n\n单个线程处理一个候选页面所花费的期望时间 $E[T]$ 是每种结果时间的加权平均值：\n$$E[T] = q \\cdot t_{c} + (1-q) \\cdot t_{s}$$\n每个被处理的候选页面所释放的期望页面数 $E[P]$ 是：\n$$E[P] = q \\cdot 1 + (1-q) \\cdot 0 = q$$\n单个线程的吞吐量 $\\mu_{1}$ 是释放页面的速率，即单位时间内释放的期望页面数。根据更新回报定理，该速率是每个周期的期望回报（释放的页面数）与每个周期的期望持续时间（处理每个候选页面的时间）之比。\n$$\\mu_{1} = \\frac{E[P]}{E[T]} = \\frac{q}{q t_{c} + (1-q) t_{s}}$$\n问题陈述中有 $k$ 个相同的线程无竞争地运行。因此，总回收吞吐量 $\\mu$ 就是单个线程吞吐量的 $k$ 倍：\n$$\\mu = k \\cdot \\mu_{1} = \\frac{k q}{q t_{c} + (1-q) t_{s}}$$\n第二个任务是推导恢复时间 $t_{\\text{rec}}$ 的表达式。空闲页面数 $F(t)$ 的演变由给定的确定性速率方程决定：\n$$\\frac{dF}{dt} = \\mu - a$$\n由于在紧急阶段 $\\mu$ 和 $a$ 是常数，空闲页面的净变化率 $\\mu - a$ 也是常数。我们可以通过直接积分来解这个一阶常微分方程。我们从紧急阶段开始的 $t=0$ 到结束的 $t=t_{\\text{rec}}$ 进行积分：\n$$\\int_{F(0)}^{F(t_{\\text{rec}})} dF = \\int_{0}^{t_{\\text{rec}}} (\\mu - a) dt$$\n计算积分得到：\n$$F(t)\\Big|_{F(0)}^{F(t_{\\text{rec}})} = (\\mu - a) t \\Big|_{0}^{t_{\\text{rec}}}$$\n$$F(t_{\\text{rec}}) - F(0) = (\\mu - a) t_{\\text{rec}}$$\n问题定义了初始和最终条件为 $F(0) = F_{0}$ 和 $F(t_{\\text{rec}}) = F_{\\min}$。将这些代入方程得到：\n$$F_{\\min} - F_{0} = (\\mu - a) t_{\\text{rec}}$$\n求解 $t_{\\text{rec}}$，我们得到：\n$$t_{\\text{rec}} = \\frac{F_{\\min} - F_{0}}{\\mu - a}$$\n这个表达式仅在 $\\mu > a$ 时具有物理意义，这意味着回收速率必须超过分配速率，空闲池才能恢复。代入推导出的 $\\mu$ 表达式：\n$$t_{\\text{rec}} = \\frac{F_{\\min} - F_{0}}{\\frac{k q}{q t_{c} + (1-q) t_{s}} - a}$$\n最后的任务是根据给定的数值参数计算 $t_{\\text{rec}}$：\n$F_{\\min} = 2000$ 页面\n$F_{0} = 500$ 页面\n$a = 2.0 \\times 10^{4}$ 页面/秒\n$k = 8$\n$q = 0.6$\n$t_{c} = 1.5 \\times 10^{-4}$ 秒\n$t_{s} = 1.0 \\times 10^{-5}$ 秒\n\n首先，我们计算总回收吞吐量 $\\mu$。单个线程处理每个候选页面的平均时间是：\n$$E[T] = (0.6)(1.5 \\times 10^{-4}) + (1-0.6)(1.0 \\times 10^{-5})$$\n$$E[T] = (0.6)(1.5 \\times 10^{-4}) + (0.4)(1.0 \\times 10^{-5})$$\n$$E[T] = 9.0 \\times 10^{-5} + 0.4 \\times 10^{-5} = 9.4 \\times 10^{-5} \\text{ 秒}$$\n那么总吞吐量 $\\mu$ 是：\n$$\\mu = \\frac{k q}{E[T]} = \\frac{8 \\times 0.6}{9.4 \\times 10^{-5}} = \\frac{4.8}{9.4 \\times 10^{-5}} \\approx 51063.83 \\text{ 页面/秒}$$\n我们验证恢复是可能的：$\\mu \\approx 5.106 \\times 10^{4} > a = 2.0 \\times 10^{4}$。条件成立。\n\n现在我们计算空闲页面池的净变化率：\n$$\\mu - a = 51063.83 - 20000 = 31063.83 \\text{ 页面/秒}$$\n需要恢复的总页面数是：\n$$F_{\\min} - F_{0} = 2000 - 500 = 1500 \\text{ 页面}$$\n最后，我们计算恢复时间 $t_{\\text{rec}}$：\n$$t_{\\text{rec}} = \\frac{F_{\\min} - F_{0}}{\\mu - a} = \\frac{1500}{31063.83} \\approx 0.0482880... \\text{ 秒}$$\n将结果四舍五入到四位有效数字得到：\n$$t_{\\text{rec}} \\approx 0.04829 \\text{ 秒}$$", "answer": "$$\\boxed{0.04829}$$", "id": "3667406"}, {"introduction": "前面的练习关注于系统在受到瞬时冲击后的动态响应。然而，在评估系统长期性能时，我们更关心其“稳态”行为，即系统在持续负载下的平均表现。本练习 [@problem_id:3667425] 引入了一个强大的理论工具——排队论，将待写入磁盘的脏页列表抽象为一个 $M/M/1$ 排队模型。通过从第一性原理推导，你将能计算出脏页列表的预期长度，并深刻理解系统稳定性条件 $\\lambda_{w} \\lt \\mu$（即页面变脏的速率必须小于写入磁盘的速率）在防止数据积压和保证系统响应能力方面的根本重要性。", "problem": "一个操作系统 (OS) 中的存储子系统使用一种页面缓冲算法，该算法维护一个已修改的脏页列表。脏页因应用程序的写请求而到达该已修改列表。假设将页面标记为脏的写请求以速率 $\\lambda_{w}$ 的泊松过程到达，刷新守护进程通过将脏页写回到稳定存储中来从已修改列表中清除它们，服务时间独立同分布，服从速率为 $\\mu$ 的指数分布，一次处理一页。假设服务方式为先到先服务 (FCFS)，并将已修改列表的长度建模为一个处于稳态的 $M/M/1$ 单服务器队列中的系统内顾客数。\n\n仅从生灭过程的基本特征和连续时间马尔可夫链的稳态平衡出发，用 $\\lambda_{w}$ 和 $\\mu$ 推导已修改列表的稳态期望长度。明确说明稳态存在的稳定性条件，并解释其在此操作系统环境中的操作意义。以 $\\lambda_{w}$ 和 $\\mu$ 的单个闭式解析表达式形式给出最终的期望长度。无需进行数值近似。", "solution": "该问题要求推导一个操作系统中脏页已修改列表的稳态期望长度，该列表被建模为一个 $M/M/1$ 队列。推导必须从生灭过程的基本原理出发。\n\n首先，我们验证问题陈述。\n\n### 步骤 1: 提取已知条件\n-   系统是一个页面缓冲算法的已修改列表。\n-   到达（使页面变脏的写请求）遵循速率为 $\\lambda_{w}$ 的泊松过程。\n-   服务器是一个将页面写入稳定存储的刷新守护进程。\n-   服务时间是独立同分布 (i.i.d.) 的，服从速率为 $\\mu$ 的指数分布。\n-   只有一个服务器（一次处理一页）。\n-   服务规程是先到先服务 (FCFS)。\n-   模型是一个处于稳态的 $M/M/1$ 单服务器队列。\n-   关注的量是已修改列表的稳态期望长度。\n-   推导必须从生灭过程的基本特征和稳态平衡出发。\n-   必须陈述和解释稳定性条件。\n-   最终答案必须是一个闭式解析表达式。\n\n### 步骤 2: 使用提取的已知条件进行验证\n-   **科学依据**：该问题基于排队论，这是应用数学的一个成熟分支。$M/M/1$ 队列是在计算机系统（包括操作系统组件）性能分析中广泛使用的典型模型。泊松到达和指数服务时间的假设是创建易于处理的基础模型的标准假设。该问题在科学和数学上都是合理的。\n-   **适定性**：该问题是适定的。它清晰地定义了系统、模型 ($M/M/1$)、参数 ($\\lambda_w$, $\\mu$) 以及目标（从第一性原理推导系统内的期望数量）。问题指定了推导的必要起点，从而确保在稳定性条件成立的前提下，存在一条通往明确定义解的唯一路径。\n-   **客观性**：语言正式、精确，没有主观或含糊的术语。\n\n### 步骤 3: 结论与行动\n该问题是有效的。这是一个应用于计算机科学的排队论中的标准、适定的问题。我们将继续进行完整的推导。\n\n### 推导\n\n令 $N(t)$ 为表示在时间 $t$ 已修改列表中脏页数量的随机变量。问题指出该系统可以建模为一个 $M/M/1$ 队列，这是一种连续时间马尔可夫链 (CTMC)。具体来说，它是一个生灭过程，其中系统状态是列表中的页面数，$n \\in \\{0, 1, 2, ...\\}$。\n\n生率 $\\lambda_n$ 表示从状态 $n$ 转移到状态 $n+1$ 的速率。灭率 $\\mu_n$ 表示从状态 $n$ 转移到状态 $n-1$ 的速率。\n\n-   **生**：脏页以恒定的速率 $\\lambda_w$ 的泊松过程到达，与列表中已有的页面数量无关。因此，对于所有状态 $n \\geq 0$，生率是恒定的：\n    $$ \\lambda_n = \\lambda_w \\quad \\text{for } n = 0, 1, 2, \\dots $$\n\n-   **灭**：刷新守护进程以速率为 $\\mu$ 的指数服务时间一次服务一个页面。这意味着当列表不为空时（即 $n \\ge 1$），页面以速率 $\\mu$ 被完成并从列表中移除。当列表为空时（$n=0$），没有服务可以发生，因此灭率为 0。\n    $$ \\mu_n = \\begin{cases} \\mu  \\text{for } n = 1, 2, 3, \\dots \\\\ 0  \\text{for } n = 0 \\end{cases} $$\n\n我们关心的是系统的稳态行为。令 $p_n$ 为列表中有 $n$ 个页面的稳态概率，即 $p_n = \\lim_{t \\to \\infty} P(N(t) = n)$。在稳态下，流入任何状态 $n$ 的速率必须等于流出该状态的速率。对于生灭过程，这可以简化为细致平衡方程，该方程指出从状态 $n$ 到 $n+1$ 的转移速率必须等于从状态 $n+1$ 到 $n$ 的转移速率。\n\n$$ \\lambda_n p_n = \\mu_{n+1} p_{n+1} \\quad \\text{for } n = 0, 1, 2, \\dots $$\n\n将我们特定的生率和灭率代入这个一般平衡方程：\n对于 $n=0$: $\\lambda_0 p_0 = \\mu_1 p_1 \\implies \\lambda_w p_0 = \\mu p_1$\n对于 $n=1$: $\\lambda_1 p_1 = \\mu_2 p_2 \\implies \\lambda_w p_1 = \\mu p_2$\n对于一般的 $n \\geq 0$:\n$$ \\lambda_w p_n = \\mu p_{n+1} $$\n\n由此，我们可以建立概率 $p_n$ 的递归关系：\n$$ p_{n+1} = \\left(\\frac{\\lambda_w}{\\mu}\\right) p_n $$\n\n让我们定义流量强度 $\\rho$ 为到达速率与服务速率之比：\n$$ \\rho = \\frac{\\lambda_w}{\\mu} $$\n递推关系变为：\n$$ p_{n+1} = \\rho p_n $$\n\n我们可以用 $p_0$ 表示所有的概率 $p_n$：\n$p_1 = \\rho p_0$\n$p_2 = \\rho p_1 = \\rho (\\rho p_0) = \\rho^2 p_0$\n一般地，通过归纳法：\n$$ p_n = \\rho^n p_0 \\quad \\text{for } n = 0, 1, 2, \\dots $$\n\n为使这些概率描述一个有效的稳态分布，它们的和必须为 1。存在非平凡稳态的条件是这个和必须收敛。\n$$ \\sum_{n=0}^{\\infty} p_n = 1 $$\n$$ \\sum_{n=0}^{\\infty} \\rho^n p_0 = p_0 \\sum_{n=0}^{\\infty} \\rho^n = 1 $$\n\n这个和是一个几何级数，它收敛当且仅当 $|\\rho| < 1$。因为速率是非负的，所以条件是 $\\rho < 1$。这就是**稳定性条件**：\n$$ \\rho = \\frac{\\lambda_w}{\\mu} < 1 \\implies \\lambda_w < \\mu $$\n如果这个条件成立，几何级数的和为 $\\sum_{n=0}^{\\infty} \\rho^n = \\frac{1}{1-\\rho}$。\n将此代回归一化方程：\n$$ p_0 \\left( \\frac{1}{1-\\rho} \\right) = 1 \\implies p_0 = 1 - \\rho $$\n\n现在我们得到了列表中页面数量的完整稳态概率分布：\n$$ p_n = (1-\\rho)\\rho^n \\quad \\text{for } n = 0, 1, 2, \\dots $$\n这是非负整数上的一个几何分布。\n\n**稳定性条件 $\\lambda_w < \\mu$ 的操作意义**是，创建脏页的平均速率必须严格小于刷新守护进程能将它们写回稳定存储的最大平均速率。如果到达速率大于或等于服务速率（$\\lambda_w \\ge \\mu$），脏页队列将随时间无限增长，系统将变得饱和，并且不会达到稳态。\n\n最后，我们推导已修改列表的期望长度，记为 $L$。这是代表系统内页面数量的随机变量的期望值。\n$$ L = E[N] = \\sum_{n=0}^{\\infty} n p_n $$\n代入 $p_n$ 的表达式：\n$$ L = \\sum_{n=0}^{\\infty} n (1-\\rho)\\rho^n = (1-\\rho) \\sum_{n=0}^{\\infty} n \\rho^n $$\n为了计算和 $\\sum_{n=0}^{\\infty} n \\rho^n$，我们使用几何级数的一个标准结果。考虑和 $S = \\sum_{n=0}^{\\infty} x^n = \\frac{1}{1-x}$ 对于 $|x|<1$。对 $x$ 求导：\n$$ \\frac{dS}{dx} = \\sum_{n=1}^{\\infty} n x^{n-1} = \\frac{d}{dx} \\left( \\frac{1}{1-x} \\right) = \\frac{1}{(1-x)^2} $$\n注意到当 $n=0$ 时项为零，所以求和可以从 $n=1$ 开始。乘以 $x$：\n$$ x \\frac{dS}{dx} = \\sum_{n=1}^{\\infty} n x^{n} = \\frac{x}{(1-x)^2} $$\n令 $x = \\rho$，我们有：\n$$ \\sum_{n=0}^{\\infty} n \\rho^n = \\frac{\\rho}{(1-\\rho)^2} $$\n将此代回 $L$ 的表达式：\n$$ L = (1-\\rho) \\left( \\frac{\\rho}{(1-\\rho)^2} \\right) = \\frac{\\rho}{1-\\rho} $$\n\n这是用流量强度 $\\rho$ 表示的期望长度。为了用原始参数 $\\lambda_w$ 和 $\\mu$ 表示它，我们代入 $\\rho = \\frac{\\lambda_w}{\\mu}$：\n$$ L = \\frac{\\frac{\\lambda_w}{\\mu}}{1 - \\frac{\\lambda_w}{\\mu}} = \\frac{\\frac{\\lambda_w}{\\mu}}{\\frac{\\mu - \\lambda_w}{\\mu}} $$\n$$ L = \\frac{\\lambda_w}{\\mu - \\lambda_w} $$\n这是已修改列表的稳态期望长度的最终闭式解析表达式，在条件 $\\lambda_w < \\mu$ 下有效。", "answer": "$$\\boxed{\\frac{\\lambda_{w}}{\\mu - \\lambda_{w}}}$$", "id": "3667425"}]}