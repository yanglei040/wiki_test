{"hands_on_practices": [{"introduction": "移位寄存器是计算机高效执行算术运算的基础。一次右移可以实现除以2的幂次方，但对于有符号数，这个简单的操作变得更加复杂。本练习探讨了二进制补码中逻辑右移和算术右移的关键区别，挑战你分析这两种移位的硬件实现，并量化在有符号数除法中误用逻辑右移所产生的严重错误 [@problem_id:3675923]。", "problem": "一个 $n$ 位右移寄存器由 $n$ 个边沿触发的 $D$ 触发器和一个单一的全局时钟构成，每一级都有一个 $2$ 对 $1$ 的多路复用器来选择其输入。该寄存器支持两种模式：逻辑右移和算术右移。在逻辑右移模式下，空出的高位比特位用 $0$ 填充。在算术右移模式下，空出的高位比特位用符号位填充，以便二进制补码表示的有符号数在移位后保持其符号。最高有效位 (MSB) 被定义为最高阶的比特位，而二进制补码表示的有符号整数使用 MSB 作为符号位。\n\n仅使用以下核心事实：(i) 一个二进制补码表示的 $n$ 位负整数 $x$ 的无符号编码等于 $2^{n} + x$，(ii) 对一个无符号数进行 $k$ 位的右移操作实现了除以 $2^{k}$ 并向零截断（等效于对非负值的向下取整），以及 (iii) 在算术右移期间复制 MSB 实现了对二进制补码表示的有符号整数除以 $2^{k}$ 并向负无穷截断，请回答以下问题：\n\n1. 简要说明如何用所描述的硬件实现一个算术右移寄存器，使得在每个时钟周期的右移操作中，所有新空出的位置都保留 MSB，而逻辑右移则用 $0$ 填充这些位置，且不改变基本的触发器和多路复用器结构。\n\n2. 考虑对一个 $n$ 位二进制补码输入 $x$（其中 $1 \\leq k \\leq n-1$）应用 $k$ 次连续的算术右移来实现有符号数除以 $2^{k}$ 的运算。假设一个设计缺陷导致寄存器在这 $k$ 个周期内使用了逻辑右移，并且得到的比特模式随后被解释为一个二进制补码表示的有符号整数。在 $n$ 位二进制补码范围内的所有可能的负输入 $x$ 中，确定正确的算术右移结果与错误的逻辑右移结果之间的最坏情况绝对误差（可能的最大绝对差值），并以 $n$ 和 $k$ 的封闭形式表达式表示。\n\n请以单个解析表达式的形式提供你的最终答案。不需要进行数值四舍五入。", "solution": "该问题被评估为有效，因为它科学地基于数字逻辑和计算机算术的原理，问题阐述清晰、客观、自洽且一致。\n\n问题包含两部分。第一部分要求论证能够同时进行逻辑右移和算术右移的移位寄存器的硬件实现。第二部分要求计算当对一个负数执行逻辑右移而非算术右移时，产生的最坏情况绝对误差。\n\n**第一部分：硬件实现**\n一个 $n$ 位右移寄存器由 $n$ 个串联的触发器组成，我们可以将其标记为 $FF_{n-1}, FF_{n-2}, \\dots, FF_{0}$，其中 $FF_{n-1}$ 存储最高有效位 (MSB)，$FF_{0}$ 存储最低有效位 (LSB)。对于右移操作，每个触发器 $FF_{i}$（对于 $i  n-1$）的数据输入连接到相邻更高阶触发器 $FF_{i+1}$ 的输出。\n\n逻辑右移和算术右移的区别取决于移入 MSB 位置的值，也就是第一个触发器 $FF_{n-1}$ 的输入。\n- 在逻辑右移中，空出的 MSB 位置用 $0$ 填充。\n- 在算术右移中，空出的 MSB 位置用当前符号位的值填充，也就是当前的 MSB 本身。这保留了数的符号。\n\n问题陈述中提到每一级都有一个 $2$ 对 $1$ 的多路复用器。这个硬件元件是根据所需的操作模式为 MSB 触发器 $FF_{n-1}$ 选择输入信号的关键。设 MSB 级多路复用器的两个数据输入为 $I_0$ 和 $I_1$，其控制输入为 $S$。\n1. 为了实现逻辑右移，我们需要向 $FF_{n-1}$ 输入一个 $0$。我们可以通过将多路复用器的一个输入连接到常数逻辑 $0$ 来实现这一点。我们设定 $I_0 = 0$。\n2. 为了实现算术右移，我们需要将当前符号位反馈输入到 $FF_{n-1}$。当前符号位存储在 $FF_{n-1}$ 中，并可在其输出端获得，我们称之为 $Q_{n-1}$。因此，我们将多路复用器的另一个输入连接到这个输出：$I_1 = Q_{n-1}$。\n\n控制信号 $S$ 作为模式选择器。\n- 如果 $S=0$ 被置为有效（例如，用于逻辑移位模式），多路复用器选择输入 $I_0$，所以 $FF_{n-1}$ 的输入为 $0$。\n- 如果 $S=1$ 被置为有效（例如，用于算术移位模式），多路复用器选择输入 $I_1$，所以 $FF_{n-1}$ 的输入是其自身的前一个输出 $Q_{n-1}$。\n\n在这种配置中，单一的控制线 $S$ 在每个时钟周期全局性地决定寄存器执行的移位类型，并且使用了所描述的触发器和多路复用器结构而无需改动。对于所有其他级 $i \\in \\{0, 1, \\dots, n-2\\}$，触发器 $FF_i$ 的输入就是 $FF_{i+1}$ 的输出，这是两种移位类型的共同连接方式。\n\n**第二部分：最坏情况误差计算**\n我们需要找出对一个 $n$ 位二进制补码负整数 $x$ 进行 $k$ 位移位时，正确的算术右移结果与不正确的逻辑右移结果之间的最坏情况绝对误差。移位量 $k$ 受限于 $1 \\le k \\le n-1$。\n\n设 $x$ 为一个 $n$ 位二进制补码负整数。其值在范围 $[-2^{n-1}, -1]$ 内。因为 $x$ 是负数，其 MSB 为 $1$。\n\n设 $R_{ARS}$ 是对 $x$ 执行 $k$ 位算术右移得到的正确结果。\n根据问题陈述中提供的事实 (iii)，对有符号整数 $x$ 进行 $k$ 位算术右移实现了除以 $2^k$ 并向负无穷截断（向下取整函数）。\n$$R_{ARS} = \\left\\lfloor \\frac{x}{2^k} \\right\\rfloor$$\n\n设 $R_{LRS}$ 是通过执行 $k$ 位逻辑右移，然后将得到的比特模式解释为二进制补码有符号整数所得到的不正确结果。\n该过程从 $x$ 的比特模式开始。设 $U(x)$ 是该比特模式的无符号整数值。根据事实 (i)，对于负整数 $x$，此无符号编码由下式给出：\n$$U(x) = 2^n + x$$\n对此比特模式执行 $k$ 位的逻辑右移。设得到的比特模式的无符号值为 $U_{new}$。根据事实 (ii)，此操作等效于无符号整数除以 $2^k$ 并截断（向下取整）。\n$$U_{new} = \\left\\lfloor \\frac{U(x)}{2^k} \\right\\rfloor$$\n代入 $U(x)$ 的表达式：\n$$U_{new} = \\left\\lfloor \\frac{2^n + x}{2^k} \\right\\rfloor = \\left\\lfloor 2^{n-k} + \\frac{x}{2^k} \\right\\rfloor$$\n由于问题规定 $1 \\le k \\le n-1$，项 $n-k$ 是一个大于等于 $1$ 的整数。因此，$2^{n-k}$ 是一个整数。我们可以将这个整数项从向下取整函数中提出来：\n$$U_{new} = 2^{n-k} + \\left\\lfloor \\frac{x}{2^k} \\right\\rfloor$$\n问题陈述中提到，这个得到的比特模式随后被解释为一个二进制补码有符号整数。逻辑右移用 $0$ 填充 $k$ 个最高有效位的空出位置。由于 $k \\ge 1$，得到的比特模式的新 MSB 保证为 $0$。对于一个 $n$ 位二进制补码表示法，如果 MSB 是 $0$，则该数为非负数，其有符号值与其无符号值相同。\n因此，不正确结果 $R_{LRS}$ 的值等于 $U_{new}$：\n$$R_{LRS} = 2^{n-k} + \\left\\lfloor \\frac{x}{2^k} \\right\\rfloor$$\n误差，即不正确结果与正确结果之差，为：\n$$Error = R_{LRS} - R_{ARS} = \\left(2^{n-k} + \\left\\lfloor \\frac{x}{2^k} \\right\\rfloor\\right) - \\left\\lfloor \\frac{x}{2^k} \\right\\rfloor = 2^{n-k}$$\n绝对误差是该差值的绝对值：\n$$|Error| = |2^{n-k}| = 2^{n-k}$$\n这个绝对误差的结果 $2^{n-k}$ 仅取决于 $n$ 和 $k$，并且对于所有负输入值 $x$ 都是恒定的。问题要求在所有可能的负输入 $x$ 中找到最坏情况（最大）绝对误差。由于对于所有这样的 $x$，误差都是恒定的，所以最大绝对误差就是这个常数值。\n\n因此，最坏情况绝对误差为 $2^{n-k}$。", "answer": "$$\\boxed{2^{n-k}}$$", "id": "3675923"}, {"introduction": "除了数据处理，移位寄存器也是创建序列发生器和控制电路的强大工具。环形计数器是移位寄存器的一种特殊配置，能产生重复的状态序列，非常适合分时控制应用。在本练习中，你将设计一个使用环形计数器驱动LED音乐步进序列器的系统，并学习如何根据视觉闪烁和音乐节拍等现实约束来计算关键的时钟频率 [@problem_id:3675857]。", "problem": "一个由$16$个发光二极管（LED）组成的环形阵列，由一个$16$级环形计数器驱动。该计数器用作分时复用显示的$16$选$1$选择器。一个$16$位模式寄存器存储一个二进制字 $P = p_{15} p_{14} \\dots p_{1} p_{0}$，其中 $p_{i} \\in \\{0,1\\}$。扫描时钟频率为 $f_{\\mathrm{scan}}$，在其每个脉冲上，环形计数器前进一个状态。当环形计数器处于状态 $i$ 时，选择器使能LED $i$；LED的电流驱动器由 $p_{i}$ 选通控制，因此只有当 $p_{i} = 1$ 时，LED $i$ 才会被驱动。模式寄存器在一个频率为 $f_{\\mathrm{step}}$ 的较慢更新时钟下循环移位一位，以实现一个音乐步进音序器。音乐速度为每分钟 $120$ 拍（BPM），音序器每拍使用 $4$ 个步进。为避免可见闪烁，假设每个逻辑上为“开”状态的LED必须每秒至少刷新 $95$ 次。为防止出现部分帧，设计要求模式更新仅在完整帧的边界发生，其中一帧定义为环形计数器遍历其所有 $16$ 个状态的一个完整周期。\n\n仅从基本定义和经过验证的事实（例如，一个具有 $N$ 级的环形计数器会访问 $N$ 个不同的状态，每个时钟脉冲访问一个；每分钟 $B$ 拍等于每秒 $B/60$ 拍；在分时复用的$1$选$N$方案中，每个LED的刷新率等于每秒完整的选择器周期数）出发，并明确使用上述从环形计数器状态到模式位的映射关系，确定能够同时满足以下条件的最小扫描时钟频率 $f_{\\mathrm{scan}}$：\n- 每个LED的刷新率至少为 $95$ Hz，并且\n- 帧率是步进更新频率的整数倍，从而使得模式循环移位恰好在帧边界发生。\n\n将最终的 $f_{\\mathrm{scan}}$ 以 $\\mathrm{kHz}$ 为单位表示，并将答案四舍五入到四位有效数字。在最终答案框中只提供数值，不带单位。", "solution": "该问题要求确定一个数字系统的最小扫描时钟频率 $f_{\\mathrm{scan}}$，该系统需满足两个主要约束条件：最小LED刷新率，以及显示扫描和模式更新之间的特定时序同步。\n\n首先，我们确定问题中给出的参数。系统有一个由$16$级环形计数器驱动的$N=16$个LED组成的环形阵列。音乐速度指定为每分钟$120$拍（BPM），每拍有$4$个步进。我们记此速度为 $T_m = 120$ BPM。每拍的步进数为 $S_b = 4$。\n\n音乐步进更新的频率 $f_{\\mathrm{step}}$ 是每秒的步进数。我们将速度从每分钟拍数转换为每秒拍数（Hz）。\n$$\n\\text{以Hz为单位的速度} = \\frac{T_m}{60 \\, \\mathrm{s/min}} = \\frac{120}{60} \\, \\mathrm{Hz} = 2 \\, \\mathrm{Hz}\n$$\n步进更新频率即为以Hz为单位的速度乘以每拍的步进数：\n$$\nf_{\\mathrm{step}} = (\\text{以Hz为单位的速度}) \\times S_b = (2 \\, \\mathrm{s}^{-1}) \\times 4 = 8 \\, \\mathrm{Hz}\n$$\n\n接下来，我们分析显示扫描机制。一帧定义为$16$级环形计数器的一个完整周期。这些帧的频率就是帧率 $f_{\\mathrm{frame}}$。问题陈述，对于一个$1$选$N$的分时复用显示，单个LED的刷新率（我们称之为 $R_{\\mathrm{LED}}$）等于每秒完整的选择器周期数。由于一个完整的选择器周期就是一帧，因此LED刷新率等于帧率：\n$$\nR_{\\mathrm{LED}} = f_{\\mathrm{frame}}\n$$\n第一个约束条件是，为避免可见闪烁，每个LED必须每秒至少刷新 $R_{\\mathrm{min}} = 95$ 次。这对帧率施加了一个下限：\n$$\nf_{\\mathrm{frame}} \\ge R_{\\mathrm{min}} = 95 \\, \\mathrm{Hz}\n$$\n\n第二个约束条件涉及模式更新的同步。问题陈述，以频率 $f_{\\mathrm{step}}$ 发生的模式更新必须仅在完整帧的边界发生。这意味着连续步进更新之间的时间间隔 $T_{\\mathrm{step}} = 1/f_{\\mathrm{step}}$ 必须是帧周期 $T_{\\mathrm{frame}} = 1/f_{\\mathrm{frame}}$ 的整数倍。设这个整数为 $k$，其中 $k \\ge 1$。\n$$\nT_{\\mathrm{step}} = k \\cdot T_{\\mathrm{frame}}, \\quad k \\in \\{1, 2, 3, \\dots\\}\n$$\n用频率重写这个关系：\n$$\n\\frac{1}{f_{\\mathrm{step}}} = k \\cdot \\frac{1}{f_{\\mathrm{frame}}} \\implies f_{\\mathrm{frame}} = k \\cdot f_{\\mathrm{step}}\n$$\n这意味着帧率必须是步进更新频率的整数倍。\n\n我们必须找到最小的 $f_{\\mathrm{scan}}$，它对应于最小的有效 $f_{\\mathrm{frame}}$。最小的 $f_{\\mathrm{frame}}$ 必须同时满足两个约束条件：\n1. $f_{\\mathrm{frame}} \\ge 95 \\, \\mathrm{Hz}$\n2. $f_{\\mathrm{frame}} = k \\cdot f_{\\mathrm{step}} = k \\cdot (8 \\, \\mathrm{Hz})$，对于某个整数 $k \\ge 1$。\n\n结合这些条件，我们得到：\n$$\nk \\cdot (8 \\, \\mathrm{Hz}) \\ge 95 \\, \\mathrm{Hz}\n$$\n求解整数 $k$：\n$$\nk \\ge \\frac{95}{8} = 11.875\n$$\n由于 $k$ 必须是整数，满足此条件的最小 $k$ 值为 $k_{\\mathrm{min}} = \\lceil 11.875 \\rceil = 12$。\n\n现在，我们可以使用 $k_{\\mathrm{min}}$ 计算最小有效帧率 $f_{\\mathrm{frame,min}}$：\n$$\nf_{\\mathrm{frame,min}} = k_{\\mathrm{min}} \\cdot f_{\\mathrm{step}} = 12 \\cdot (8 \\, \\mathrm{Hz}) = 96 \\, \\mathrm{Hz}\n$$\n这个帧率满足两个条件：$96 \\, \\mathrm{Hz} \\ge 95 \\, \\mathrm{Hz}$，并且它是 $8 \\, \\mathrm{Hz}$ 的整数倍（$12$倍）。\n\n最后，我们确定扫描时钟频率 $f_{\\mathrm{scan}}$。环形计数器有 $N=16$ 级，在每个扫描时钟脉冲上它前进一个状态。一个完整的帧需要计数器遍历所有 $N=16$ 个状态。因此，每帧需要 $N$ 个时钟脉冲。扫描时钟频率和帧率之间的关系是：\n$$\nf_{\\mathrm{scan}} = N \\cdot f_{\\mathrm{frame}}\n$$\n为了找到所需的最小扫描时钟频率，我们使用最小有效帧率：\n$$\nf_{\\mathrm{scan,min}} = N \\cdot f_{\\mathrm{frame,min}} = 16 \\cdot (96 \\, \\mathrm{Hz})\n$$\n计算乘积：\n$$\nf_{\\mathrm{scan,min}} = 1536 \\, \\mathrm{Hz}\n$$\n问题要求答案以千赫兹（kHz）表示，并四舍五入到四位有效数字。\n$$\nf_{\\mathrm{scan,min}} = \\frac{1536}{1000} \\, \\mathrm{kHz} = 1.536 \\, \\mathrm{kHz}\n$$\n值 $1.536$ 恰好有四位有效数字，因此不需要进一步的四舍五入。", "answer": "$$\\boxed{1.536}$$", "id": "3675857"}, {"introduction": "线性反馈移位寄存器 (LFSR) 是一种更高级的应用，其寄存器的下一状态取决于当前状态，从而实现纠错码等复杂操作。本练习深入探讨了使用 LFSR 计算循环冗余校验 (CRC) 的过程，这是可靠数据通信的基石。你将推导出一个增量更新公式，展示如何高效地为滑动数据窗口计算 CRC [@problem_id:3675958]。", "problem": "考虑一个在伽罗瓦域 (GF(2)) 上由线性反馈移位寄存器 (LFSR) 实现的面向字节的循环冗余校验 (CRC) 滑动计算。设生成多项式为 $G(x) = x^{8} + x^{2} + x + 1$ (8次)，窗口长度为 $W = 2$ 字节。一个 $W$ 字节的窗口表示为多项式\n$$M(x) = \\sum_{j=0}^{W-1} Y_{j}(x) x^{8 j},$$\n其中 $Y_{j}(x)$ 是编码第 $j$ 个字节的次数至多为7的多项式，$Y_{0}(x)$ 是最新字节，$Y_{W-1}(x)$ 是最旧字节。窗口的 CRC 余数定义为多项式余数 $r = M(x) \\bmod G(x)$，没有初始非零值，也没有用 $x^{n}$ 进行增强。\n\n您按照上述约定接收一个字节流。当前窗口（最旧的在前）是字节对 $(213, 46)$，其中每个字节值都以自然的方式解释为一个多项式（最高有效位作为 $x^{7}$ 的系数）。一个值为 $167$ 的新字节到达；最旧的字节 $213$ 离开窗口，窗口滑动以包含 $(46, 167)$。\n\n从GF(2)上的多项式算术、模 $G(x)$ 余数的线性性质以及乘以 $x$ 的LFSR解释等核心定义出发，推导出一个增量更新表达式，该表达式在一个字节离开而另一个字节进入时重用先前的余数：\n- 用旧窗口 $(213, 46)$ 的余数 $r$、生成多项式 $G(x)$ 以及仅依赖于 $G(x)$ 和 $W$ 的可预计算常数，来表示新窗口 $(46, 167)$ 的更新后余数 $r'$。\n- 然后，计算给定数据的 $r'$ 的数值。将您的最终答案表示为0到255范围内的单个整数。不需要四舍五入，也不应包含单位。", "solution": "我们在伽罗瓦域 (GF(2)) 上进行运算，其中加法和减法都是按位异或。一个字节值 $b \\in \\{0,\\dots,255\\}$ 被映射到多项式 $B(x) = \\sum_{i=0}^{7} b_{i} x^{i}$，其中 $b_{i}$ 是 $b$ 的第 $i$ 位，最高有效位对应于 $x^{7}$。对于一个 $W$ 字节的窗口，消息多项式是\n$$M(x) = \\sum_{j=0}^{W-1} Y_{j}(x) x^{8 j},$$\n其中 $Y_{0}(x)$ 是最新字节，$Y_{W-1}(x)$ 是最旧字节。CRC余数是 $r = M(x) \\bmod G(x)$。\n\n当窗口滑动一个字节时，最旧的字节 $Y_{W-1}(x)$ 离开，剩下的 $W-1$ 个字节移动一个字节位置（乘以 $x^{8}$），一个新的字节 $Z(x)$ 在位置 $j=0$ 进入。因此，新窗口的多项式是\n$$M'(x) = x^{8}\\big(M(x) - Y_{W-1}(x) x^{8(W-1)}\\big) + Z(x).$$\n在GF(2)中，减法等于加法，所以\n$$M'(x) = x^{8} M(x) + Y_{W-1}(x) x^{8W} + Z(x).$$\n对 $G(x)$ 取模，并利用线性和乘法与模约简的相容性，我们得到\n$$r' \\equiv \\big(x^{8} \\bmod G(x)\\big)\\cdot \\big(M(x) \\bmod G(x)\\big) \\;+\\; \\big(x^{8W} \\bmod G(x)\\big)\\cdot Y_{W-1}(x) \\;+\\; Z(x) \\pmod{G(x)}.$$\n令 $A(x) \\equiv x^{8} \\bmod G(x)$ 且 $B(x) \\equiv x^{8W} \\bmod G(x)$。那么，重用先前余数 $r$ 的增量更新公式是\n$$r' \\equiv A(x)\\, r \\;+\\; B(x)\\, Y_{W-1}(x) \\;+\\; Z(x) \\pmod{G(x)}.$$\n\n现在我们为 $G(x) = x^{8} + x^{2} + x + 1$ 和 $W = 2$ 计算 $A(x)$ 和 $B(x)$。\n\n1. 计算 $A(x) = x^{8} \\bmod G(x)$。由于 $x^{8} \\equiv x^{2} + x + 1 \\pmod{G(x)}$，我们有 $A(x) = x^{2} + x + 1$。\n\n2. 计算 $B(x) = x^{16} \\bmod G(x)$。使用 $x^{16} = \\big(x^{8}\\big)^{2}$ 并在GF(2)中进行平方，\n$$B(x) \\equiv \\big(x^{2} + x + 1\\big)^{2} = x^{4} + x^{2} + 1.$$\n\n接下来，我们从头开始计算当前窗口 $(213, 46)$ 的先前余数 $r$。当 $W=2$ 时，窗口多项式为 $M(x) = Y_{1}(x) x^{8} + Y_{0}(x)$。等价地，使用单字节步进效应 $A(x)$ 顺序处理，\n$$r = \\big(A(x)\\, Y_{1}(x) + Y_{0}(x)\\big) \\bmod G(x).$$\n我们将字节表示为多项式：\n- $213$ 的二进制是 $11010101$，所以 $Y_{1}(x) = x^{7} + x^{6} + x^{4} + x^{2} + 1$。\n- $46$ 的二进制是 $00101110$，所以 $Y_{0}(x) = x^{5} + x^{3} + x^{2} + x$。\n\n计算 $A(x) Y_{1}(x) = (x^{2} + x + 1)(x^{7} + x^{6} + x^{4} + x^{2} + 1)$：\n- $x^{2}$ 乘以 $Y_{1}(x)$ 得到 $x^{9} + x^{8} + x^{6} + x^{4} + x^{2}$。\n- $x$ 乘以 $Y_{1}(x)$ 得到 $x^{8} + x^{7} + x^{5} + x^{3} + x$。\n- $1$ 乘以 $Y_{1}(x)$ 得到 $x^{7} + x^{6} + x^{4} + x^{2} + 1$。\n在GF(2)中求和得到 $x^{9} + x^{5} + x^{3} + x + 1$。使用 $x^{8} \\equiv x^{2} + x + 1$ 化简 $x^{9}$：\n$$x^{9} = x \\cdot x^{8} \\equiv x(x^{2} + x + 1) = x^{3} + x^{2} + x.$$\n因此 $A(x) Y_{1}(x) \\equiv (x^{3} + x^{2} + x) + x^{5} + x^{3} + x + 1 = x^{5} + x^{2} + 1.$\n\n现在加上 $Y_{0}(x)$：\n$$r \\equiv \\big(x^{5} + x^{2} + 1\\big) + \\big(x^{5} + x^{3} + x^{2} + x\\big) = x^{3} + x + 1.$$\n因此 $r$ 对应字节值 $11$。\n\n我们现在使用推导出的公式，以及离开的最旧字节 $Y_{W-1}(x) = Y_{1}(x)$ 和值为 $167$ 的进入字节 $Z(x)$，来执行增量更新。$167$ 的二进制是 $10100111$，所以 $Z(x) = x^{7} + x^{5} + x^{2} + x + 1$。\n\n首先，计算 $A(x)\\, r$：\n$$A(x)\\, r = (x^{2} + x + 1)(x^{3} + x + 1).$$\n乘法：\n- $x^{2}$ 乘以得到 $x^{5} + x^{3} + x^{2}$，\n- $x$ 乘以得到 $x^{4} + x^{2} + x$,\n- $1$ 乘以得到 $x^{3} + x + 1$.\n求和得到 $x^{5} + x^{4} + 1$。\n\n其次，计算 $B(x)\\, Y_{1}(x)$：\n$$B(x)\\, Y_{1}(x) = (x^{4} + x^{2} + 1)(x^{7} + x^{6} + x^{4} + x^{2} + 1).$$\n乘法并求和：\n- $x^{4}$ 乘以得到 $x^{11} + x^{10} + x^{8} + x^{6} + x^{4}$，\n- $x^{2}$ 乘以得到 $x^{9} + x^{8} + x^{6} + x^{4} + x^{2}$，\n- $1$ 乘以得到 $x^{7} + x^{6} + x^{4} + x^{2} + 1$。\n和是 $x^{11} + x^{10} + x^{9} + x^{7} + x^{6} + x^{4} + 1$。使用 $x^{8} \\equiv x^{2} + x + 1$ 化简次数 $\\ge 8$ 的项：\n- $x^{11} = x^{3} x^{8} \\equiv x^{5} + x^{4} + x^{3}$，\n- $x^{10} = x^{2} x^{8} \\equiv x^{4} + x^{3} + x^{2}$，\n- $x^{9} = x x^{8} \\equiv x^{3} + x^{2} + x$。\n将这些与其余项相加得到 $x^{7} + x^{6} + x^{5} + x^{4} + x^{3} + x + 1$。\n\n最后，应用更新：\n$$r' \\equiv \\big(x^{5} + x^{4} + 1\\big) + \\big(x^{7} + x^{6} + x^{5} + x^{4} + x^{3} + x + 1\\big) + \\big(x^{7} + x^{5} + x^{2} + x + 1\\big).$$\n在GF(2)中逐项相加这三个多项式。合并前两个：\n$$(x^{5} + x^{4} + 1) + (x^{7} + x^{6} + x^{5} + x^{4} + x^{3} + x + 1) = x^{7} + x^{6} + x^{3} + x.$$\n现在加上 $Z(x)$:\n$$(x^{7} + x^{6} + x^{3} + x) + (x^{7} + x^{5} + x^{2} + x + 1) = x^{6} + x^{5} + x^{3} + x^{2} + 1.$$\n因此，更新后的余数多项式是 $x^{6} + x^{5} + x^{3} + x^{2} + 1$，它对应的字节值为\n$$64 + 32 + 8 + 4 + 1 = 109.$$\n\n因此，在所述约定下，新窗口 $(46, 167)$ 的CRC余数是 $109$。", "answer": "$$\\boxed{109}$$", "id": "3675958"}]}