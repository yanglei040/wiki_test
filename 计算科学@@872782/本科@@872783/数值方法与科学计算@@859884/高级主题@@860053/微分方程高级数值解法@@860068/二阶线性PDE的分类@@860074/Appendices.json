{"hands_on_practices": [{"introduction": "掌握偏微分方程的分类始于最基础的常系数情形。本练习将直接应用判别式 $\\Delta = B^2 - 4AC$ 来确定一个方程的类型。通过求解参数 $k$ 的取值范围，你将巩固对系数如何决定一个偏微分方程在整个定义域内是椭圆型、抛物型还是双曲型的理解。[@problem_id:2092221]", "problem": "一个具有两个自变量 $x$ 和 $y$ 的二阶线性偏微分方程（PDE）可以写成以下一般形式：\n$$A u_{xx} + B u_{xy} + C u_{yy} + D u_x + E u_y + F u = G$$\n其中系数 $A, B, C, D, E, F,$ 和 $G$ 可以是 $x$ 和 $y$ 的函数。在任何给定点，该偏微分方程被分类为椭圆型、抛物型或双曲型，这取决于判别式的符号，而判别式是系数 $A, B,$ 和 $C$ 的函数。\n\n考虑以下带有一个实常数参数 $k$ 的偏微分方程：\n$$u_{xx} + k u_{xy} + 4 u_{yy} + \\sin(x) u_x - \\exp(y) u = 0$$\n\n确定常数 $k$ 的取值范围，使得该偏微分方程在平面上所有点 $(x, y)$ 处都被分类为椭圆型。\n\nA. $k > 4$ 或 $k  -4$\n\nB. $-4  k  4$\n\nC. $k = 4$ 或 $k = -4$\n\nD. $k > 16$ 或 $k  -16$\n\nE. $-16  k  16$", "solution": "对于一个写成 $A u_{xx} + B u_{xy} + C u_{yy} + D u_{x} + E u_{y} + F u = G$ 形式的二元二阶线性偏微分方程，其分类仅取决于二阶项的系数 $A$、$B$ 和 $C$。判别式由 $\\Delta = B^{2} - 4 A C$ 给出。当且仅当 $\\Delta  0$ 时，该偏微分方程在某点是椭圆型的；当 $\\Delta = 0$ 时是抛物型的；当 $\\Delta > 0$ 时是双曲型的。\n\n对于给定的偏微分方程\n$$u_{xx} + k u_{xy} + 4 u_{yy} + \\sin(x) u_{x} - \\exp(y) u = 0,$$\n我们确定二阶项的系数为 $A = 1$，$B = k$，以及 $C = 4$。具有系数 $D = \\sin(x)$、$E = 0$ 和 $F = -\\exp(y)$ 的低阶项不影响分类。\n\n计算判别式：\n$$\\Delta = B^{2} - 4 A C = k^{2} - 4 \\cdot 1 \\cdot 4 = k^{2} - 16.$$\n为使方程为椭圆型，需要满足\n$$k^{2} - 16  0 \\quad \\Longleftrightarrow \\quad -4  k  4.$$\n由于 $A$、$B$ 和 $C$ 是常数（与 $(x,y)$ 无关），此条件确保该偏微分方程在平面上的所有点 $(x,y)$ 处都是椭圆型的。\n\n与给出的选项匹配，这对应于选项 B。", "answer": "$$\\boxed{B}$$", "id": "2092221"}, {"introduction": "许多真实世界的物理现象是由特性随位置变化的偏微分方程描述的。本练习将超越常系数的范畴，探索一个偏微分方程的类型如何在其定义域内发生变化。你的任务是分析一个变系数方程，确定其在哪些区域是椭圆型、抛物型或双曲型，并将这些区域在 $xy$ 平面上可视化。[@problem_id:2159323]", "problem": "一个具有两个自变量 $x$ 和 $y$ 的一般二阶线性偏微分方程 (PDE) 可以写成以下形式：\n$$A(x,y)u_{xx} + B(x,y)u_{xy} + C(x,y)u_{yy} + D(x,y)u_x + E(x,y)u_y + F(x,y)u = G(x,y)$$\n其中 $u_{xx} = \\frac{\\partial^2 u}{\\partial x^2}$，$u_{xy} = \\frac{\\partial^2 u}{\\partial x \\partial y}$，等等。方程在点 $(x,y)$ 处的类型由量 $\\Delta(x,y) = B(x,y)^2 - 4A(x,y)C(x,y)$ 的符号决定。该偏微分方程被分类为：\n- 在 $(x,y)$ 点是**双曲型**的，如果 $\\Delta(x,y) > 0$。\n- 在 $(x,y)$ 点是**抛物型**的，如果 $\\Delta(x,y) = 0$。\n- 在 $(x,y)$ 点是**椭圆型**的，如果 $\\Delta(x,y)  0$。\n\n考虑以下变系数偏微分方程：\n$$y u_{xx} + 2x u_{xy} + x^2 u_{yy} = 0$$\n\n下列哪个陈述正确地描述了在 $xy$ 平面中，该偏微分方程是双曲型、抛物型或椭圆型的区域？\n\nA. 当 $y > 1$ 时，该 PDE 是双曲型的；当 $y  1$ 时，是椭圆型的；在直线 $y=1$ 和 y 轴上是抛物型的。\n\nB. 当 $y  1$ 且 $x \\neq 0$ 时，该 PDE 是双曲型的；当 $y > 1$ 且 $x \\neq 0$ 时，是椭圆型的；在直线 $y=1$ 和 y 轴 ($x = 0$) 上是抛物型的。\n\nC. 该 PDE 在第一和第三象限是双曲型的，在第二和第四象限是椭圆型的，在坐标轴上是抛物型的。\n\nD. 当 $x > 0$ 且 $x \\neq 0$ 时，该 PDE 是双曲型的；当 $x  0$ 且 $x \\neq 0$ 时，是椭圆型的；在 y 轴 ($x=0$) 上是抛物型的。\n\nE. 对于不在坐标轴上的所有点 $(x,y)$，该 PDE 是双曲型的；在坐标轴上是抛物型的。", "solution": "我们将给定的偏微分方程 $y u_{xx} + 2x u_{xy} + x^{2} u_{yy} = 0$ 与一般二阶线性偏微分方程 $A(x,y) u_{xx} + B(x,y) u_{xy} + C(x,y) u_{yy} + \\cdots = G(x,y)$ 进行比较，以确定主系数。这里，$A(x,y) = y$，$B(x,y) = 2x$，以及 $C(x,y) = x^{2}$。\n\n分类由判别式 $\\Delta(x,y) = B(x,y)^{2} - 4 A(x,y) C(x,y)$ 决定。代入已确定的系数可得\n$$\n\\Delta(x,y) = (2x)^{2} - 4 \\cdot y \\cdot x^{2} = 4 x^{2} - 4 y x^{2} = 4 x^{2} (1 - y).\n$$\n我们分析 $\\Delta$ 的符号：\n- 如果 $x \\neq 0$ 且 $y  1$，那么 $1 - y > 0$，因此 $\\Delta > 0$，所以该 PDE 是双曲型的。\n- 如果 $x \\neq 0$ 且 $y > 1$，那么 $1 - y  0$，因此 $\\Delta  0$，所以该 PDE 是椭圆型的。\n- 如果 $y = 1$（对于任何 $x$）或 $x = 0$（对于任何 $y$），那么 $\\Delta = 0$，所以该 PDE 沿直线 $y = 1$ 和沿 y 轴是抛物型的。\n\n这与陈述 B 相符：当 $y  1$ 且 $x \\neq 0$ 时是双曲型的，当 $y > 1$ 且 $x \\neq 0$ 时是椭圆型的，在 $y = 1$ 和 $x = 0$ 上是抛物型的。", "answer": "$$\\boxed{B}$$", "id": "2159323"}, {"introduction": "为了将理论知识与科学计算中的实际应用联系起来，这最后一个练习将挑战你实现分类过程的自动化。你将首先从二次型的基本性质出发，推导分类判别准则，从而加深概念理解。然后，你将用代码实现这一准则，在网格点上对偏微分方程进行分类，这是数值分析中的一项常见任务。[@problem_id:3213827]", "problem": "您的任务是，对于给定的几族系数函数，对平面上某些点处的二阶线性偏微分方程 (PDE) 进行类型分类。考虑包含两个自变量 $x$ 和 $y$ 的一般二阶线性偏微分方程，\n$$\nA(x,y)\\,\\frac{\\partial^2 u}{\\partial x^2} + B(x,y)\\,\\frac{\\partial^2 u}{\\partial x \\partial y} + C(x,y)\\,\\frac{\\partial^2 u}{\\partial y^2} + \\text{(低阶项)} = 0,\n$$\n其中 $A(x,y)$、$B(x,y)$ 和 $C(x,y)$ 是给定的系数函数。该偏微分方程在某一点的分类完全由其主部决定，即二阶导数的二次型。一个标准且基础的方法是使用主部的对称矩阵，\n$$\nH(x,y) = \\begin{bmatrix} A(x,y)  \\tfrac{1}{2}B(x,y) \\\\ \\tfrac{1}{2}B(x,y)  C(x,y) \\end{bmatrix}.\n$$\n请仅基于此基础以及关于对称矩阵和二次型的线性代数知识，推导出一个数值稳健且可实现的判据，用以在每个点 $(x,y)$ 处判断该偏微分方程是椭圆型、抛物型还是双曲型。您的推导过程不能依赖任何预先记忆的分类判据；必须从 $H(x,y)$ 的定性性质出发，并为您将要实现的决策规则提供理由。\n\n程序要求：\n- 实现一个程序，对于下面给定的测试套件，在一个均匀整数网格点\n$$\n\\{(x,y)\\,:\\, x\\in \\{-10,-9,\\dots,9,10\\},\\; y\\in \\{-10,-9,\\dots,9,10\\}\\},\n$$\n上计算 $A(x,y)$、$B(x,y)$ 和 $C(x,y)$ 的值，并根据您推导的判据将每个网格点分类为椭圆型、抛物型或双曲型。每个测试用例包含 $21\\times 21 = 441$ 个网格点。\n- 为保证数值稳健性，当您的判据涉及与零相等时，请在适用的情况下使用精确整数算术。下面指定的测试套件经过设计，使得 $A(x,y)$、$B(x,y)$ 和 $C(x,y)$ 在指定的整数网格上均为整数值；因此，请精确地实现相等性检查（即不要使用浮点容差）。\n- 对于每个测试用例，输出一个包含三个整数的列表 $[N_E,N_P,N_H]$，按顺序分别给出网格上椭圆型、抛物型和双曲型分类的计数。\n\n测试套件（系数函数）：\n1) 情况 $1$：$A(x,y)=1$, $B(x,y)=0$, $C(x,y)=1+x^2+y^2$。\n2) 情况 $2$：$A(x,y)=1$, $B(x,y)=2x$, $C(x,y)=x^2$。\n3) 情况 $3$：$A(x,y)=1$, $B(x,y)=0$, $C(x,y)=-1+y^2$。\n\n最终输出格式：\n- 您的程序应生成单行输出，其中包含一个以逗号分隔的列表的列表，每个内部列表对应一个测试用例，顺序如上。具体来说，打印\n$$\n[[N_{E1},N_{P1},N_{H1}],[N_{E2},N_{P2},N_{H2}],[N_{E3},N_{P3},N_{H3}]]\n$$\n并且行内任何地方都不能有空格。例如，一个语法正确的行看起来像 `[[1,2,3],[4,5,6],[7,8,9]]` （这只是格式示例；不要使用这些数字）。\n\n注：\n- 此任务不涉及物理单位。\n- 未使用角度，因此不需要角度单位。\n- 未使用百分比；仅按规定报告整数计数。", "solution": "所提供的问题是有效的。它在科学上基于偏微分方程的数学理论，问题定义明确，提供了所有必要信息，并且陈述客观。任务是首先推导二阶线性偏微分方程的分类判据，然后将其应用于一组给定的测试用例。\n\n### 分类判据的推导\n\n一个在两个变量 $x$ 和 $y$ 上的一般二阶线性偏微分方程由以下公式给出：\n$$\nA(x,y)\\,\\frac{\\partial^2 u}{\\partial x^2} + B(x,y)\\,\\frac{\\partial^2 u}{\\partial x \\partial y} + C(x,y)\\,\\frac{\\partial^2 u}{\\partial y^2} + \\text{(低阶项)} = 0\n$$\n方程在点 $(x,y)$ 的类型由其主部决定，主部是与二阶导数相关的二次型。这个二次型可以使用 $u$ 的黑塞矩阵 $\\nabla^2 u$ 和一个对称系数矩阵来表示。设二阶导数算子向量为 $\\mathbf{D} = \\left[\\frac{\\partial^2}{\\partial x^2}, \\frac{\\partial^2}{\\partial x \\partial y}, \\frac{\\partial^2}{\\partial y^2}\\right]^T$。主部对应于变量 $\\xi$ 和 $\\eta$ 的二次型 $A\\xi^2 + B\\xi\\eta + C\\eta^2$。该二次型可以用矩阵表示法写为：\n$$\n\\begin{bmatrix} \\xi  \\eta \\end{bmatrix} \\begin{bmatrix} A  \\frac{1}{2}B \\\\ \\frac{1}{2}B  C \\end{bmatrix} \\begin{bmatrix} \\xi \\\\ \\eta \\end{bmatrix}\n$$\n该二次型的矩阵即为问题陈述中提供的矩阵：\n$$\nH(x,y) = \\begin{bmatrix} A(x,y)  \\frac{1}{2}B(x,y) \\\\ \\frac{1}{2}B(x,y)  C(x,y) \\end{bmatrix}\n$$\nPDE的分类基于此对称矩阵 $H$ 的定性，而定性由其特征值（设为 $\\lambda_1$ 和 $\\lambda_2$）决定。\n\n1.  **椭圆型PDE**：如果矩阵 $H$ 是定的（正定或负定），则该PDE为椭圆型。这意味着其所有特征值非零且符号相同。对于一个 $2 \\times 2$ 矩阵，此条件为 $\\lambda_1 > 0$ 且 $\\lambda_2 > 0$，或 $\\lambda_1  0$ 且 $\\lambda_2  0$。在这两种情况下，特征值的乘积为正：$\\lambda_1 \\lambda_2 > 0$。\n\n2.  **双曲型PDE**：如果矩阵 $H$ 是不定的，则该PDE为双曲型。这意味着其特征值非零且符号相反。对于一个 $2 \\times 2$ 矩阵，此条件为 $\\lambda_1 \\lambda_2  0$。\n\n3.  **抛物型PDE**：如果矩阵 $H$ 是半定的，则该PDE为抛物型。这意味着其至少有一个特征值为零。对于一个非零主部，恰好有一个特征值为零。此条件为 $\\lambda_1 \\lambda_2 = 0$。\n\n矩阵的特征值之积等于其行列式。因此，我们可以使用 $H$ 的行列式来重述分类判据：\n$$\n\\det(H) = \\lambda_1 \\lambda_2 = A(x,y)C(x,y) - \\left(\\frac{1}{2}B(x,y)\\right)^2 = AC - \\frac{1}{4}B^2\n$$\n\n*   **椭圆型**：$\\det(H) > 0 \\implies AC - \\frac{1}{4}B^2 > 0$\n*   **双曲型**：$\\det(H)  0 \\implies AC - \\frac{1}{4}B^2  0$\n*   **抛物型**：$\\det(H) = 0 \\implies AC - \\frac{1}{4}B^2 = 0$\n\n为避免分数并方便整数运算，通常将这些不等式乘以 $-4$。这会反转不等号。令判别式为 $\\Delta(x,y) = B(x,y)^2 - 4A(x,y)C(x,y)$。其关系为 $\\det(H) = -\\frac{1}{4}\\Delta$。判据变为：\n\n*   **椭圆型**：$\\Delta(x,y)  0$\n*   **双曲型**：$\\Delta(x,y) > 0$\n*   **抛物型**：$\\Delta(x,y) = 0$\n\n该判别式 $\\Delta$ 提供了一个数值稳健的判据。由于问题指明系数 $A(x,y)$、$B(x,y)$ 和 $C(x,y)$ 在整数网格上均为整数值，因此 $\\Delta$ 也将是整数。整数与零的比较是精确的，满足了问题对数值稳健性的要求，无需浮点容差。\n\n### 应用于测试用例\n\n实现时将遍历一个 $21 \\times 21$ 的点网格，其中 $x,y \\in \\{-10, -9, \\dots, 9, 10\\}$。对于每个点 $(x,y)$ 和每个测试用例，我们将计算 $\\Delta(x,y)$ 并对该点进行分类，更新计数 $N_E$、$N_P$ 和 $N_H$。\n\n**情况 1：** $A(x,y)=1$, $B(x,y)=0$, $C(x,y)=1+x^2+y^2$。\n判别式为 $\\Delta = B^2 - 4AC = 0^2 - 4(1)(1+x^2+y^2) = -4(1+x^2+y^2)$。\n由于 $x^2 \\ge 0$ 且 $y^2 \\ge 0$，项 $1+x^2+y^2$ 总是大于或等于 $1$。因此，$\\Delta$ 总是严格为负。所有 $21 \\times 21 = 441$ 个点都是椭圆型的。\n预期的计数为 $[N_E, N_P, N_H] = [441, 0, 0]$。\n\n**情况 2：** $A(x,y)=1$, $B(x,y)=2x$, $C(x,y)=x^2$。\n判别式为 $\\Delta = B^2 - 4AC = (2x)^2 - 4(1)(x^2) = 4x^2 - 4x^2 = 0$。\n对于所有点 $(x,y)$，该判别式恒为零。因此，所有 $441$ 个点都是抛物型的。\n预期的计数为 $[N_E, N_P, N_H] = [0, 441, 0]$。\n\n**情况 3：** $A(x,y)=1$, $B(x,y)=0$, $C(x,y)=-1+y^2$。\n判别式为 $\\Delta = B^2 - 4AC = 0^2 - 4(1)(-1+y^2) = 4(1-y^2)$。\n分类仅取决于 $y$ 的值：\n*   **椭圆型 ($\\Delta  0$)：** $1-y^2  0 \\implies y^2 > 1$。这对 $y \\in \\{-10, \\dots, -2\\} \\cup \\{2, \\dots, 10\\}$ 成立。这样的 $y$ 值有 $9+9=18$ 个。对每个 $y$ 值，有 $21$ 个 $x$ 值。$N_E = 18 \\times 21 = 378$。\n*   **抛物型 ($\\Delta = 0$)：** $1-y^2 = 0 \\implies y^2 = 1$。这对 $y \\in \\{-1, 1\\}$ 成立。这样的 $y$ 值有 $2$ 个。$N_P = 2 \\times 21 = 42$。\n*   **双曲型 ($\\Delta > 0$)：** $1-y^2 > 0 \\implies y^2  1$。这对 $y = 0$ 成立。这样的 $y$ 值有 $1$ 个。$N_H = 1 \\times 21 = 21$。\n总计数为 $378 + 42 + 21 = 441$。\n预期的计数为 $[N_E, N_P, N_H] = [378, 42, 21]$。\n\n程序将实现此逻辑来计算并报告这些计数。", "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Classifies second-order linear PDEs on a grid for given coefficient functions.\n    \n    The classification is based on the sign of the discriminant Delta = B^2 - 4AC:\n    - Elliptic: Delta  0\n    - Parabolic: Delta = 0\n    - Hyperbolic: Delta > 0\n    \"\"\"\n    \n    # Define the coefficient functions A(x,y), B(x,y), C(x,y) for each test case.\n    # The functions are designed to return integers for integer inputs.\n    test_cases = [\n        # Case 1: A=1, B=0, C=1+x^2+y^2\n        {\n            \"A\": lambda x, y: 1,\n            \"B\": lambda x, y: 0,\n            \"C\": lambda x, y: 1 + x**2 + y**2,\n        },\n        # Case 2: A=1, B=2x, C=x^2\n        {\n            \"A\": lambda x, y: 1,\n            \"B\": lambda x, y: 2 * x,\n            \"C\": lambda x, y: x**2,\n        },\n        # Case 3: A=1, B=0, C=-1+y^2\n        {\n            \"A\": lambda x, y: 1,\n            \"B\": lambda x, y: 0,\n            \"C\": lambda x, y: -1 + y**2,\n        },\n    ]\n\n    # Define the uniform integer grid of points.\n    # x and y range from -10 to 10 inclusive.\n    grid_coords = np.arange(-10, 11)\n    \n    all_results = []\n\n    # Iterate through each test case.\n    for case_coeffs in test_cases:\n        # Initialize counters for elliptic, parabolic, and hyperbolic points.\n        n_elliptic = 0\n        n_parabolic = 0\n        n_hyperbolic = 0\n\n        # Get the coefficient functions for the current case.\n        A_func = case_coeffs[\"A\"]\n        B_func = case_coeffs[\"B\"]\n        C_func = case_coeffs[\"C\"]\n\n        # Iterate over every point (x, y) in the grid.\n        for x in grid_coords:\n            for y in grid_coords:\n                # Evaluate coefficients at the point (x, y).\n                # Since x, y are integers, A, B, C will be integers.\n                A = A_func(x, y)\n                B = B_func(x, y)\n                C = C_func(x, y)\n\n                # Calculate the discriminant. This will be an integer.\n                discriminant = B**2 - 4 * A * C\n\n                # Classify the point based on the sign of the discriminant.\n                # The comparisons are exact as we are using integer arithmetic.\n                if discriminant  0:\n                    n_elliptic += 1\n                elif discriminant == 0:\n                    n_parabolic += 1\n                else:  # discriminant > 0\n                    n_hyperbolic += 1\n        \n        # Store the counts for the current case.\n        case_result = [n_elliptic, n_parabolic, n_hyperbolic]\n        all_results.append(case_result)\n\n    # Format the final output string as specified: [[N_E1,N_P1,N_H1],[...],...]\n    # This involves building the string piece by piece to avoid spaces introduced\n    # by default list-to-string conversion.\n    inner_strings = [f\"[{','.join(map(str, res))}]\" for res in all_results]\n    final_output = f\"[{','.join(inner_strings)}]\"\n    \n    print(final_output)\n\nsolve()\n```", "id": "3213827"}]}