{"hands_on_practices": [{"introduction": "在科学和工程领域，我们计算的许多量都源于物理测量，而任何测量都存在固有的不确定性或误差。这个练习将探讨这些测量误差如何通过数学公式传播，影响最终计算结果的精度。通过分析一个药物胶囊体积的计算，你将学习如何使用微积分来量化由尺寸测量误差（$r$ 和 $L$）引起的最大可能体积误差（$\\delta_V$），这是误差分析中的一项基本技能。[@problem_id:2187593]", "problem": "一家制药公司正在设计一种新的药物递送胶囊。该胶囊被建模为一个长度为 $L$ 的理想圆柱体，其两端由两个半径为 $r$ 的半球封盖。胶囊的总體積决定了剂量，因此其精度至关重要。\n\n制造过程涉及两种独立的测量设备。半径 $r$ 由一个已知最大绝对误差为 $\\delta_r$ 的设备测量。圆柱部分的长度 $L$ 由另一个已知最大绝对误差为 $\\delta_L$ 的设备测量。\n\n假设半径和长度的测量误差是微小且独立的，请推导计算出的胶囊体积的最大可能绝对误差 $\\delta_V$ 的符号表达式。您的表达式应以标称尺寸 $r$ 和 $L$ 以及测量误差 $\\delta_r$ 和 $\\delta_L$ 来表示。", "solution": "该问题要求在给定其构成尺寸（半径 $r$ 和长度 $L$）的测量误差的情况下，计算胶囊体积的最大可能绝对误差。这是一个误差传播问题。对于一个多变量函数 $V(r, L)$，其全微分提供了因其变量的微小变化而引起的函数变化的线性近似。最大绝对误差 $\\delta_V$ 可以通过将各个测量误差的贡献相加来近似得出：\n\n$$ \\delta_V \\approx \\left| \\frac{\\partial V}{\\partial r} \\right| \\delta_r + \\left| \\frac{\\partial V}{\\partial L} \\right| \\delta_L $$\n\n这里，$\\delta_r$ 和 $\\delta_L$ 是给定的测量 $r$ 和 $L$ 时的最大绝对误差。\n\n首先，我们必须建立胶囊总体积 $V$ 的公式。该胶囊由一个中心圆柱体和两个半球形盖子组成。\n圆柱部分的体积是 $V_{\\text{cylinder}} = \\pi r^2 L$。\n两个半球形盖子合在一起形成一个半径为 $r$ 的球体。这个球体的体积是 $V_{\\text{sphere}} = \\frac{4}{3} \\pi r^3$。\n总体积 $V$ 是这两个体积之和：\n\n$$ V(r, L) = V_{\\text{cylinder}} + V_{\\text{sphere}} = \\pi r^2 L + \\frac{4}{3} \\pi r^3 $$\n\n接下来，我们计算体积 $V$ 关于半径 $r$ 和长度 $L$ 的偏导数。\n\n关于 $r$ 的偏导数是：\n$$ \\frac{\\partial V}{\\partial r} = \\frac{\\partial}{\\partial r} \\left( \\pi r^2 L + \\frac{4}{3} \\pi r^3 \\right) = 2 \\pi r L + \\frac{4}{3} \\pi (3r^2) = 2\\pi r L + 4\\pi r^2 $$\n\n关于 $L$ 的偏导数是：\n$$ \\frac{\\partial V}{\\partial L} = \\frac{\\partial}{\\partial L} \\left( \\pi r^2 L + \\frac{4}{3} \\pi r^3 \\right) = \\pi r^2 $$\n\n由于 $r$ 和 $L$ 代表物理尺寸，它们必须是正数（$r > 0$，$L > 0$）。因此，两个偏导数 $\\frac{\\partial V}{\\partial r} = 2\\pi r L + 4\\pi r^2$ 和 $\\frac{\\partial V}{\\partial L} = \\pi r^2$ 总是正的。因此，我们可以在误差传播公式中去掉偏导数周围的绝对值符号。\n\n将偏导数代入 $\\delta_V$ 的公式中：\n$$ \\delta_V = \\left( 2\\pi r L + 4\\pi r^2 \\right) \\delta_r + \\left( \\pi r^2 \\right) \\delta_L $$\n\n为了以更紧凑的形式呈现最终答案，我们可以提取公因式。我们可以从整个表达式中提取公因式 $\\pi r$。\n从第一项中提取 $\\pi r$ 得到：$\\pi r (2L + 4r)$。\n从第二项中提取 $\\pi r$ 得到：$\\pi r (r)$。\n\n将这些结合起来，我们得到：\n$$ \\delta_V = \\pi r (2L + 4r) \\delta_r + \\pi r^2 \\delta_L $$\n从整个表达式中提取 $\\pi r$ 得出：\n$$ \\delta_V = \\pi r \\left( (2L + 4r) \\delta_r + r \\delta_L \\right) $$\n\n这就是胶囊体积最大可能绝对误差的最终表达式。", "answer": "$$\\boxed{\\delta_V = \\pi r \\left( (2L + 4r) \\delta_r + r \\delta_L \\right)}$$", "id": "2187593"}, {"introduction": "从数据误差转向数值误差，后者是在计算过程中产生的。即使是数学上完全等价的公式，在有限精度的计算机上计算时也可能产生截然不同的结果，这一现象揭示了“数值稳定性”的重要性。本练习通过一个计算方差的例子，让你亲身体验“灾难性抵消”效应，即两个非常接近的大数相减如何导致有效数字的严重损失，从而阐明了选择正确计算方法的重要性。[@problem_id:2187574]", "problem": "一位初级数据分析师的任务是计算从高精度仪器中获得的一个小数据集的总体方差（$\\sigma^2$）。仪器读数如下：\n$x_1 = 100,000,001$\n$x_2 = 100,000,003$\n$x_3 = 100,000,000$\n$x_4 = 100,000,002$\n\n该分析师决定比较两个用于计算数据集 $\\{x_1, \\dots, x_N\\}$（其均值为 $\\mu = \\frac{1}{N}\\sum_{i=1}^{N} x_i$）总体方差的数学等价公式：\n- 公式 A：$\\sigma_A^2 = \\frac{1}{N}\\sum_{i=1}^{N} (x_i - \\mu)^2$\n- 公式 B：$\\sigma_B^2 = \\left(\\frac{1}{N}\\sum_{i=1}^{N} x_i^2\\right) - \\mu^2$\n\n该分析师使用一个简化的计算模型进行计算，其中任何算术运算的结果都会立即四舍五入到9位有效数字。例如，精确乘积 $(100,000,001) \\times (100,000,001) = 10,000,000,200,000,001$ 在用于任何后续计算之前，会被四舍五入为 $10,000,000,200,000,000$。\n\n您的任务是确定在此系统下这两个公式之间的计算差异。遵循每一步指定的四舍五入程序，使用公式A（$\\sigma_A^2$）和公式B（$\\sigma_B^2$）计算方差。然后，计算差值 $\\sigma_B^2 - \\sigma_A^2$。\n\n将您的最终答案表示为四舍五入到四位有效数字的单一数值。", "solution": "我们有 $N=4$ 和读数 $x_{1}=100000001$、$x_{2}=100000003$、$x_{3}=100000000$、$x_{4}=100000002$。所有算术结果都立即四舍五入到9位有效数字。\n\n计算均值 $\\mu$（两个公式都使用），每一步都进行四舍五入：\n- 依次求和，每次加法后都进行四舍五入：\n$$100000001+100000003=200000004,$$\n$$200000004+100000000=300000004,$$\n$$300000004+100000002=400000006.$$\n所有这些和最多只有9位有效数字，因此保持不变。\n- 除以 $4$ 并四舍五入到9位有效数字：\n$$\\mu=\\frac{400000006}{4}=100000001.5 \\to 100000002 \\text{ (9 significant digits)}.$$\n\n公式A：$\\sigma_{A}^{2}=\\frac{1}{N}\\sum_{i=1}^{N}(x_{i}-\\mu)^{2}$，每一步都进行四舍五入。\n- 偏差（每个都四舍五入到9位有效数字）：\n$$x_{1}-\\mu=100000001-100000002=-1,$$\n$$x_{2}-\\mu=100000003-100000002=1,$$\n$$x_{3}-\\mu=100000000-100000002=-2,$$\n$$x_{4}-\\mu=100000002-100000002=0.$$\n- 平方（每个都四舍五入到9位有效数字）：\n$$(-1)^{2}=1,\\quad 1^{2}=1,\\quad (-2)^{2}=4,\\quad 0^{2}=0.$$\n- 求和与平均（每次加法和除法后都进行四舍五入）：\n$$1+1=2,\\quad 2+4=6,\\quad 6+0=6,$$\n$$\\sigma_{A}^{2}=\\frac{6}{4}=1.5.$$\n\n公式B：$\\sigma_{B}^{2}=\\left(\\frac{1}{N}\\sum_{i=1}^{N}x_{i}^{2}\\right)-\\mu^{2}$，每一步都进行四舍五入。\n- 将每个 $x_{i}$ 平方，并立即四舍五入到9位有效数字：\n$$x_{1}^{2}=100000001^{2}=10000000200000001 \\to 10000000200000000,$$\n$$x_{2}^{2}=100000003^{2}=10000000600000009 \\to 10000000600000000,$$\n$$x_{3}^{2}=100000000^{2}=10000000000000000 \\to 10000000000000000,$$\n$$x_{4}^{2}=100000002^{2}=10000000400000004 \\to 10000000400000000.$$\n- 求和，每次加法后都进行四舍五入：\n$$10000000200000000+10000000600000000=20000000800000000,$$\n$$20000000800000000+10000000000000000=30000000800000000,$$\n$$30000000800000000+10000000400000000=40000001200000000.$$\n- 除以 $4$ 并四舍五入：\n$$\\frac{1}{4}\\sum x_{i}^{2}=\\frac{40000001200000000}{4}=10000000300000000.$$\n- 使用四舍五入后的 $\\mu=100000002$ 计算 $\\mu^{2}$ 并四舍五入：\n$$\\mu^{2}=100000002^{2}=10000000400000004 \\to 10000000400000000.$$\n- 相减并进行四舍五入：\n$$\\sigma_{B}^{2}=10000000300000000-10000000400000000=-100000000.$$\n\n计算差异：\n$$\\sigma_{B}^{2}-\\sigma_{A}^{2}=-100000000-1.5=-100000001.5.$$\n\n将最终差异四舍五入到四位有效数字：\n$$-100000001.5 \\approx -1.000 \\times 10^{8}.$$", "answer": "$$\\boxed{-1.000 \\times 10^{8}}$$", "id": "2187574"}, {"introduction": "本练习延续了对数值不稳定性的探讨，将关注点放在函数求值上。直接计算形如 $\\frac{\\exp(x) - 1}{x}$ 的表达式在 $x$ 趋近于零时，会因分子中两个几乎相等的数相减而导致严重的精度损失。通过在一个简化的浮点系统中比较直接计算法和泰勒级数近似法，你将理解为什么数值计算中需要像 `expm1(x)` 这样的特殊函数，并学会如何识别和规避这类数值陷阱。[@problem_id:2187581]", "problem": "一名学生正在使用一个名为“简单精度”的假设浮点系统进行数值计算。在这个系统中，所有实数都以规格化科学记数法表示，其尾数四舍五入到5位有效数字。所有的中间算术运算（加、减、乘、除）执行后，其结果会立即被四舍五入回5位有效数字。\n\n该学生需要对一个较小的输入值 $x = 8.6420 \\times 10^{-3}$ 计算函数 $f(x) = \\frac{\\exp(x) - 1}{x}$ 的值。\n\n为了进行此计算，该学生考虑了两种不同的方法：\n\n**方法 A (直接计算)：**\n1.  计算 $y = \\exp(x)$。对于这一步，学生使用一个高精度源，得到 $\\exp(8.6420 \\times 10^{-3}) = 1.0086794...$，但这个值必须立即以“简单精度”格式存储。\n2.  计算 $z = y - 1$。\n3.  计算最终结果 $f_A = z / x$。\n\n**方法 B (泰勒近似)：**\n学生认识到，对于较小的 $x$，函数 $f(x)$ 可以通过其泰勒级数展开来精确近似，$f(x) = \\frac{(1+x+x^2/2!+...)-1}{x} = 1 + \\frac{x}{2} + \\frac{x^2}{6} + \\dots$。学生决定使用一阶近似，并将结果计算为 $f_B = 1 + \\frac{x}{2}$。\n\n假设方法 B 在此计算环境中为该函数提供了更准确的值，请计算方法 A 相对于方法 B 的相对误差的大小。相对误差定义为 $\\left| \\frac{f_A - f_B}{f_B} \\right|$。\n\n将您的最终答案表示为四舍五入到两位有效数字的小数。", "solution": "我们将每个存储的或中间的量通过四舍五入到5位有效数字来建模。\n\n给定 $x = 8.6420 \\times 10^{-3}$（已经是5位有效数字）。\n\n方法 A：\n1) 存储 $y = \\mathrm{fl}_{5}(\\exp(x))$。使用给定的高精度值 $\\exp(8.6420 \\times 10^{-3}) = 1.0086794\\ldots$，四舍五入到5位有效数字得到\n$$\ny = 1.0087.\n$$\n2) 相减并四舍五入：\n$$\nz = \\mathrm{fl}_{5}(y - 1) = \\mathrm{fl}_{5}(0.0087) = 8.7000 \\times 10^{-3}.\n$$\n3) 相除并四舍五入：\n$$\nf_{A} = \\mathrm{fl}_{5}\\!\\left(\\frac{z}{x}\\right) = \\mathrm{fl}_{5}\\!\\left(\\frac{8.7000 \\times 10^{-3}}{8.6420 \\times 10^{-3}}\\right) = \\mathrm{fl}_{5}\\!\\left(\\frac{8.7000}{8.6420}\\right).\n$$\n计算精确比率：\n$$\n\\frac{8.7000}{8.6420} = 1 + \\frac{8.7000 - 8.6420}{8.6420} = 1 + \\frac{0.0580}{8.6420} = 1 + \\frac{29}{4321} \\approx 1.0067114\\ldots\n$$\n四舍五入到5位有效数字得出\n$$\nf_{A} = 1.0067.\n$$\n\n方法 B：\n计算 $x/2$ 然后加 $1$，每次运算后都进行四舍五入：\n$$\n\\mathrm{fl}_{5}\\!\\left(\\frac{x}{2}\\right) = \\mathrm{fl}_{5}\\!\\left(\\frac{8.6420 \\times 10^{-3}}{2}\\right) = \\mathrm{fl}_{5}(4.3210 \\times 10^{-3}) = 4.3210 \\times 10^{-3},\n$$\n$$\nf_{B} = \\mathrm{fl}_{5}(1 + 4.3210 \\times 10^{-3}) = \\mathrm{fl}_{5}(1.0043210) = 1.0043.\n$$\n\n方法 A 相对于方法 B 的相对误差：\n$$\n\\left|\\frac{f_{A} - f_{B}}{f_{B}}\\right| = \\left|\\frac{1.0067 - 1.0043}{1.0043}\\right| = \\frac{0.0024}{1.0043} = \\frac{24}{10043} \\approx 0.0023897\\ldots\n$$\n四舍五入到两位有效数字，结果是 $0.0024$。", "answer": "$$\\boxed{0.0024}$$", "id": "2187581"}]}