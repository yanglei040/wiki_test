{"hands_on_practices": [{"introduction": "在商业世界中，定价是一个核心决策，它直接影响产品的销量和最终利润。价格太高，顾客望而却步；价格太低，则可能薄利甚至亏损。这个练习将引导你通过构建一个目标函数来找到最佳平衡点，即实现利润最大化的“甜蜜点” ([@problem_id:2192247])。", "problem": "一家科技初创公司正准备推出一款新的软件产品。根据市场分析，该公司将售出单位数量 $N$ 建模为单位价格 $P$ 的函数。该关系由一条衰减指数需求曲线描述：\n$$N(P) = N_{0} \\exp(-\\alpha P)$$\n在这里，$N_{0}$ 代表最大潜在市场规模（即产品免费时的销售数量），$\\alpha$ 是一个代表市场价格敏感度的正常数。虽然开发该软件存在显著的固定成本，但交付一个额外软件单位的边际成本（例如服务器带宽和客户支持等费用）是一个恒定值 $c$。\n\n公司的目标是设定一个价格 $P$ 以最大化其总利润。总利润定义为销售总收入减去总边际成本。确定该公司应为其软件收取的最佳价格。请用参数 $\\alpha$ 和 $c$ 的闭式解析表达式表示您的答案。", "solution": "作为价格函数的销售单位数量由 $N(P) = N_{0} \\exp(-\\alpha P)$ 给出，其中 $\\alpha > 0$。总收入为 $R(P) = P N(P) = P N_{0} \\exp(-\\alpha P)$。总边际成本为 $C(P) = c N(P) = c N_{0} \\exp(-\\alpha P)$。固定成本不依赖于 $P$，因此不影响最优价格。需要最大化的利润函数是\n$$\\Pi(P) = R(P) - C(P) = (P - c) N_{0} \\exp(-\\alpha P).$$\n对 $\\Pi(P)$ 关于 $P$ 求导：\n$$\\Pi'(P) = N_{0} \\left[\\frac{d}{dP}\\left((P - c)\\right) \\exp(-\\alpha P) + (P - c) \\frac{d}{dP}\\left(\\exp(-\\alpha P)\\right)\\right] = N_{0} \\exp(-\\alpha P)\\left[1 - \\alpha (P - c)\\right].$$\n将一阶导数设为零以找到临界点：\n$$N_{0} \\exp(-\\alpha P)\\left[1 - \\alpha (P - c)\\right] = 0 \\quad \\Rightarrow \\quad 1 - \\alpha (P - c) = 0 \\quad \\Rightarrow \\quad P^{\\ast} = c + \\frac{1}{\\alpha}.$$\n为验证这是一个最大值，计算二阶导数：\n$$\\Pi''(P) = N_{0} \\exp(-\\alpha P)\\left[-\\alpha \\left(1 - \\alpha (P - c)\\right) - \\alpha\\right] = N_{0} \\exp(-\\alpha P)\\left[-2\\alpha + \\alpha^{2} (P - c)\\right].$$\n在 $P^{\\ast}$ 处求值，其中 $P^{\\ast} - c = \\frac{1}{\\alpha}$，得到\n$$\\Pi''(P^{\\ast}) = N_{0} \\exp(-\\alpha P^{\\ast}) \\left[-2\\alpha + \\alpha^{2} \\cdot \\frac{1}{\\alpha}\\right] = -\\alpha N_{0} \\exp(-\\alpha P^{\\ast})  0,$$\n这证实了一个严格的局部最大值。由于 $c \\geq 0$ 且 $\\alpha  0$，我们有 $P^{\\ast} \\geq \\frac{1}{\\alpha}  0$，因此该解对于非负价格也是可行的。因此，最优价格是\n$$P^{\\ast} = c + \\frac{1}{\\alpha}.$$", "answer": "$$\\boxed{c + \\frac{1}{\\alpha}}$$", "id": "2192247"}, {"introduction": "现实世界中的优化问题很少是无约束的；我们总是在预算、时间或资源有限的情况下做出最佳决策。这个农业场景的练习将带你进入约束优化的领域 ([@problem_id:2192255])。你将学习如何在一个固定的预算下，通过合理分配两种效果不同的肥料，来实现作物产量的最大化。", "problem": "一家精准农业公司受委托优化一种新作物的肥料使用。作物产量 $Y$（单位：公斤/公顷，kg/ha）被建模为两种不同液体养分（养分 A 和养分 B）施用率的函数。设 $x_A$ 和 $x_B$ 分别为施用的养分 A 和养分 B 的体积，单位均为升/公顷（L/ha）。\n\n产量模型由下式给出：\n$$Y(x_A, x_B) = Y_0 + \\alpha x_A + \\beta x_B - \\gamma x_B^2$$\n\n其中，$Y_0$ 是未添加任何养分时土地的基础产量。参数 $\\alpha$ 是一个正常数，表示养分 A 带来的线性产量增益。参数 $\\beta$ 和 $\\gamma$ 是描述养分 B 效果的正常数，养分 B 最初能提高产量，但在较高浓度下会产生不利影响。\n\n农民用于这两种养分的固定预算为 $C_{total}$ 美元。养分 A 的成本为每升 $C_A$ 美元，养分 B 的成本为每升 $C_B$ 美元。农民打算用完全部预算以实现最大可能产量。假设参数 $\\alpha, \\beta, \\gamma, C_A, C_B, C_{total}$ 的设定使得最优策略涉及使用两种养分的正量。\n\n确定农民为最大化作物产量应施用的养分 A 的最佳体积 $x_A$。您的答案应为用给定参数表示的符号表达式。", "solution": "我们需要在线性预算约束下最大化产量函数，并保证最优解中两种养分的使用量均为正值。问题是：\n在满足 $C_{A} x_{A} + C_{B} x_{B} = C_{total}$、$x_{A} \\geq 0$ 和 $x_{B} \\geq 0$ 的条件下，最大化 $Y(x_A,x_B) = Y_{0} + \\alpha x_{A} + \\beta x_{B} - \\gamma x_{B}^{2}$。由于目标函数关于 $x_A$ 是线性的，关于 $x_B$ 是严格凹的（因为 $\\gamma0$ 意味着 $\\frac{\\partial^{2}Y}{\\partial x_{B}^{2}}=-2\\gamma  0$），且可行集是凸的，因此这是一个凹规划问题。根据最优解具有 $x_{A}0$ 和 $x_{B}0$ 的假设，该解是内点解，一阶条件是必要且充分的。\n\n构建带有预算约束乘子 $\\lambda$ 的拉格朗日函数：\n$$\n\\mathcal{L}(x_{A},x_{B},\\lambda) = Y_{0} + \\alpha x_{A} + \\beta x_{B} - \\gamma x_{B}^{2} + \\lambda\\left(C_{total} - C_{A} x_{A} - C_{B} x_{B}\\right).\n$$\n对于内点最优解，令偏导数为零：\n$$\n\\frac{\\partial \\mathcal{L}}{\\partial x_{A}} = \\alpha - \\lambda C_{A} = 0 \\quad \\Rightarrow \\quad \\lambda = \\frac{\\alpha}{C_{A}},\n$$\n$$\n\\frac{\\partial \\mathcal{L}}{\\partial x_{B}} = \\beta - 2\\gamma x_{B} - \\lambda C_{B} = 0 \\quad \\Rightarrow \\quad 2\\gamma x_{B} = \\beta - \\lambda C_{B}.\n$$\n将 $\\lambda = \\frac{\\alpha}{C_{A}}$ 代入第二个条件可得\n$$\nx_{B}^{\\ast} = \\frac{\\beta - \\left(\\frac{\\alpha}{C_{A}}\\right) C_{B}}{2\\gamma} = \\frac{\\beta - \\frac{\\alpha C_{B}}{C_{A}}}{2\\gamma}.\n$$\n使用预算约束来求解 $x_{A}^{\\ast}$：\n$$\nC_{A} x_{A}^{\\ast} + C_{B} x_{B}^{\\ast} = C_{total} \\quad \\Rightarrow \\quad x_{A}^{\\ast} = \\frac{C_{total} - C_{B} x_{B}^{\\ast}}{C_{A}}.\n$$\n代入 $x_{B}^{\\ast}$：\n$$\nx_{A}^{\\ast} = \\frac{C_{total}}{C_{A}} - \\frac{C_{B}}{C_{A}} \\cdot \\frac{\\beta - \\frac{\\alpha C_{B}}{C_{A}}}{2\\gamma}\n= \\frac{C_{total}}{C_{A}} - \\frac{C_{B}\\beta}{2\\gamma C_{A}} + \\frac{\\alpha C_{B}^{2}}{2\\gamma C_{A}^{2}}.\n$$\n在所述假设下，此表达式为养分 A 的最佳体积。", "answer": "$$\\boxed{\\frac{C_{total}}{C_{A}} - \\frac{C_{B}\\beta}{2\\gamma C_{A}} + \\frac{\\alpha C_{B}^{2}}{2\\gamma C_{A}^{2}}}$$", "id": "2192255"}, {"introduction": "优化求解的价值不仅在于找到最优解本身，更在于理解解的内在含义以及它对决策的指导意义。这个关于前沿工程设计（拓扑优化）的挑战性问题，将让你深入探索拉格朗日乘子的深刻内涵 ([@problem_id:2192237])。你将不再仅仅把它看作一个计算工具，而是学会如何利用它来量化分析“如果放宽一点约束，我们的目标能改善多少？”这类关键的“假设”情景。", "problem": "一个工程团队正在使用一款计算拓扑优化工具来设计一个轻质高刚度的机械部件。设计空间占据总体积 $V_{domain}$，并被离散化为大量的有限元。每个单元 $i$ 的优化变量是其材料密度 $\\rho_i$，该密度可以从接近零的最小值（空洞）到最大值1（实体材料）之间连续变化。\n\n为鼓励形成界线清晰、可制造、没有模糊的中间密度区域的设计，该工具采用了固体各向同性材料惩罚（SIMP）方法。在此模型中，单元的等效杨氏模量 $E_i$ 与其密度 $\\rho_i$ 通过幂律关系 $E_i = E_0 \\rho_i^p$ 相关联，其中 $E_0$ 是实体材料的杨氏模量，$p$ 是大于1的惩罚指数。\n\n优化的主要目标是最小化结构柔度 $C$。柔度是刚度的逆度量，定义为 $C = \\mathbf{F}^T \\mathbf{U}$，其中 $\\mathbf{F}$ 是施加的恒定外力向量，$\\mathbf{U}$ 是由此产生的节点位移向量，它依赖于材料分布 $\\boldsymbol{\\rho} = \\{\\rho_1, \\rho_2, \\dots\\}$。该最小化过程在总材料体积的严格约束下进行：所有单元的材料体积之和必须等于总设计体积的一个指定体积分数 $V_f$。单个单元 $i$ 的体积记为 $v_i$。\n\n运行优化后，该工具收敛到一个最优设计。根据优化理论（基于Karush-Kuhn-Tucker条件），一个关键信息是以下的最优性准则。对于最终设计中任何既非完全实体也非完全空洞（即其密度 $\\rho_i$ 位于开区间 $(0, 1)$ 内）的单元 $i$，以下方程成立：\n$$p \\frac{c_i}{v_i} \\rho_i^{p-1} = \\Lambda$$\n在此表达式中，$c_i$ 表示如果单元 $i$ 由实体材料构成（$\\rho_i=1$）但承受与最终最优结构中存在的相同应变场时，该单元将存储的应变能。项 $\\Lambda$ 是与全局体积约束相关的拉格朗日乘子。\n\n假设已经针对体积分数 $V_f$ 获得了一个最优设计。首席工程师现在提议研究是否可以通过允许使用更多材料来获得一个稍好（即柔度更低）的设计。如果体积分数约束从 $V_f$ 放宽到 $V_f + \\Delta V_f$，其中 $\\Delta V_f$ 是一个小的正量，那么最优柔度的变化量 $\\Delta C$ 的一阶估计是什么？\n\n用包含 $\\Lambda$、$V_{domain}$ 和 $\\Delta V_f$ 的符号表达式来表示你的答案。", "solution": "我们将带有等式体积约束的柔度最小化问题，用绝对材料体积 $b$ 来表示：\n$$\n\\min_{\\boldsymbol{\\rho}}\\, C(\\boldsymbol{\\rho}) \\quad \\text{subject to} \\quad \\sum_{i} v_{i}\\rho_{i} = b,\n$$\n其中 $b = V_{f} V_{domain}$。相关的拉格朗日函数是\n$$\nL(\\boldsymbol{\\rho},\\Lambda;b) = C(\\boldsymbol{\\rho}) + \\Lambda\\left(\\sum_{i} v_{i}\\rho_{i} - b\\right).\n$$\n对于具有 $0  \\rho_{i}  1$ 的单元，KKT平稳性条件给出\n$$\n\\frac{\\partial C}{\\partial \\rho_{i}} + \\Lambda v_{i} = 0.\n$$\n使用SIMP中标准的柔度灵敏度 $\\frac{\\partial C}{\\partial \\rho_{i}} = -p \\rho_{i}^{p-1} c_{i}$，平稳性条件得出\n$$\np \\frac{c_{i}}{v_{i}} \\rho_{i}^{p-1} = \\Lambda,\n$$\n这与给定的最优性准则相匹配，并将拉格朗日乘子确定为所提供的 $\\Lambda$。\n\n设 $C^{*}(b)$ 表示作为右侧项 $b$ 的函数的最优柔度。对最优解 $(\\boldsymbol{\\rho}^{*}(b),\\Lambda^{*}(b))$ 处的拉格朗日函数值进行微分，\n$$\nC^{*}(b) = L\\big(\\boldsymbol{\\rho}^{*}(b),\\Lambda^{*}(b);b\\big),\n$$\n并应用链式法则，\n$$\n\\frac{\\mathrm{d} C^{*}}{\\mathrm{d} b} = \\frac{\\partial L}{\\partial b} + \\sum_{i} \\frac{\\partial L}{\\partial \\rho_{i}} \\frac{\\mathrm{d} \\rho_{i}^{*}}{\\mathrm{d} b} + \\frac{\\partial L}{\\partial \\Lambda} \\frac{\\mathrm{d} \\Lambda^{*}}{\\mathrm{d} b}.\n$$\n在最优解处，平稳性条件给出对所有 $i$ 都有 $\\frac{\\partial L}{\\partial \\rho_{i}}=0$，原始可行性条件给出 $\\frac{\\partial L}{\\partial \\Lambda} = \\sum_{i} v_{i}\\rho_{i}^{*} - b = 0$。因此，\n$$\n\\frac{\\mathrm{d} C^{*}}{\\mathrm{d} b} = \\frac{\\partial L}{\\partial b} = -\\Lambda^{*}.\n$$\n体积分数从 $V_{f}$ 到 $V_{f} + \\Delta V_{f}$ 的一个微小变化，使右侧项改变了\n$$\n\\Delta b = V_{domain}\\,\\Delta V_{f}.\n$$\n因此，最优柔度的一阶变化为\n$$\n\\Delta C \\approx \\frac{\\mathrm{d} C^{*}}{\\mathrm{d} b}\\,\\Delta b = -\\Lambda\\, V_{domain}\\, \\Delta V_{f}.\n$$\n这表明放宽体积分数（增加材料）会使最优柔度在一阶上线性减小，斜率为 $-\\Lambda V_{domain}$。", "answer": "$$\\boxed{-\\Lambda V_{domain}\\,\\Delta V_{f}}$$", "id": "2192237"}]}