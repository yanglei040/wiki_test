{"hands_on_practices": [{"introduction": "分支定界法的第一步是通过求解线性规划（LP）松弛问题来建立搜索树的根节点。这个初始解为整个问题提供了一个目标值的界限。通过解决一个实际的服务器配置问题[@problem_id:2209681]，你将练习如何计算这个初始上界，这是后续分支与剪枝步骤的基础。", "problem": "一家科技初创公司正在部署一个新的服务器集群，必须决定购买两种服务器类型的组合：计算密集型服务器（C型）和存储密集型服务器（S型）。目标是在遵守物理和预算约束的同时，最大化一个综合性能指标 $Z$。\n\n设 $x_C$ 为C型服务器的数量，$x_S$ 为S型服务器的数量。该公司的性能模型估计综合指标为 $Z = 5x_C + 6x_S$。\n\n部署受到以下两个主要约束：\n1.  **功率容量：** 数据中心机架的总功率容量为16千瓦（kW）。每台C型服务器消耗3千瓦，每台S型服务器消耗2千瓦。\n2.  **物理机架空间：** 机架有17个单位的可用空间。每台C型服务器占用1个单位的空间，而每台S型服务器占用4个单位。\n\n每种类型服务器的数量，$x_C$ 和 $x_S$，必须是非负整数。为解决这个整数规划问题，该公司决定使用分支定界算法。该方法的第一步是求解问题的线性规划（LP）松弛，其中暂时忽略整数约束。\n\n确定此初始LP松弛的综合性能指标 $Z$ 的最优值。您的最终答案应该是一个实数。", "solution": "我们求解LP松弛问题：\n最大化 $Z=5x_{C}+6x_{S}$，约束条件为 $3x_{C}+2x_{S}\\leq 16$，$x_{C}+4x_{S}\\leq 17$，以及 $x_{C},x_{S}\\geq 0$。\n\n在线性规划中，多边形可行域上的最优解出现在一个顶点上。我们可以通过检查所有顶点来找到最优解。可行域的顶点是约束边界线或坐标轴的交点。\n\n1) 与坐标轴的交点：\n- 点 (0, 0): $Z = 0$。\n- $x_S=0$: $3x_C \\le 16 \\implies x_C \\le 16/3$，$x_C \\le 17$。最紧的约束是 $x_C \\le 16/3$。顶点为 $(16/3, 0)$，$Z=5 \\cdot (16/3) = 80/3 \\approx 26.67$。\n- $x_C=0$: $2x_S \\le 16 \\implies x_S \\le 8$，$4x_S \\le 17 \\implies x_S \\le 17/4 = 4.25$。最紧的约束是 $x_S \\le 17/4$。顶点为 $(0, 17/4)$，$Z=6 \\cdot (17/4) = 102/4 = 25.5$。\n\n2) 两条约束直线的交点：\n求解\n$$\n\\begin{cases}\n3x_{C}+2x_{S}=16,\\\\\nx_{C}+4x_{S}=17.\n\\end{cases}\n$$\n由第二个方程可得 $x_{C}=17-4x_{S}$。将其代入第一个方程：\n$$\n3(17-4x_{S})+2x_{S}=16 \\;\\Rightarrow\\; 51-12x_{S}+2x_{S}=16 \\;\\Rightarrow\\; -10x_{S}=-35 \\;\\Rightarrow\\; x_{S}=3.5.\n$$\n则 $x_{C}=17-4(3.5)=17-14=3$。该点为 $(3, 3.5)$。\n计算目标函数值：\n$$\nZ=5(3)+6(3.5)=15+21=36.\n$$\n\n比较所有顶点处的目标函数值：$0$，$26.67$，$25.5$ 和 $36$。由于 $36$ 是最大值，LP松弛的最优值为 $36$。", "answer": "$$\\boxed{36}$$", "id": "2209681"}, {"introduction": "当松弛问题的解包含非整数值时，分支定界法的核心机制——“分支”——便开始发挥作用。我们选择一个非整数变量，并创建两个新的子问题，从而将原问题的可行域分割。这个练习[@problem_id:2209717]将指导你完成这一关键步骤，学习如何通过添加新约束来构建子问题，并为它们计算新的目标值界限。", "problem": "考虑以下整数规划 (IP) 问题，其中决策变量 $x_1$ 和 $x_2$ 必须为非负整数：\n\n最大化 $Z = 5x_1 + 8x_2$\n约束条件：\n1. $x_1 + x_2 \\le 6$\n2. $5x_1 + 9x_2 \\le 45$\n3. $x_1, x_2 \\ge 0$ 且为整数。\n\n采用分支定界算法来寻找最优整数解。该过程首先求解问题的线性规划 (LP) 松弛（即忽略整数约束）。在获得此初始 LP 的最优解后，选择解中值为非整数的变量之一进行分支。\n\n假设选择变量 $x_2$ 进行第一步分支。此分支操作创建了两个新的 LP 子问题，构成了分支定界搜索树的第一层。设初始 LP 松弛的最优解中 $x_2$ 的值为 $x_2 = x_2^*$。通过向原始 LP 松弛添加以下约束之一来形成这两个新的子问题：\n- 子问题 A：$x_2 \\le \\lfloor x_2^* \\rfloor$\n- 子问题 B：$x_2 \\ge \\lceil x_2^* \\rceil$\n\n确定子问题 A 和子问题 B 的 LP 松弛的最优目标函数值。设这些值分别为 $Z_A$ 和 $Z_B$。\n\n将您的答案表示为包含这两个值的行矩阵，顺序为 $[Z_A, Z_B]$。", "solution": "我们首先求解原问题的 LP 松弛：\n最大化 $Z=5x_{1}+8x_{2}$，约束条件为 $x_{1}+x_{2}\\leq 6$，$5x_{1}+9x_{2}\\leq 45$，$x_{1},x_{2}\\geq 0$。\n\n根据线性规划基本定理，最优解出现在可行域的一个顶点上。我们计算由两个约束边界相交形成的顶点：\n$$\n\\begin{aligned}\nx_{1}+x_{2}=6,\\\\\n5x_{1}+9x_{2}=45.\n\\end{aligned}\n$$\n将 $x_{1}=6-x_{2}$ 代入第二个方程：\n$$\n5(6-x_{2})+9x_{2}=45 \\;\\Rightarrow\\; 30-5x_{2}+9x_{2}=45 \\;\\Rightarrow\\; 4x_{2}=15 \\;\\Rightarrow\\; x_{2}^{*}=\\frac{15}{4} = 3.75.\n$$\n因此 $x_{1}^{*}=6-\\frac{15}{4}=\\frac{9}{4} = 2.25$。LP 最优值为\n$$\nZ^{*}=5\\cdot\\frac{9}{4}+8\\cdot\\frac{15}{4}=\\frac{45}{4}+\\frac{120}{4}=\\frac{165}{4} = 41.25.\n$$\n由于 $x_{2}^{*}=3.75$ 是分数，我们对 $x_{2}$ 进行分支：\n子问题 A：$x_{2}\\leq\\left\\lfloor 3.75 \\right\\rfloor \\implies x_2 \\le 3$。\n子问题 B：$x_{2}\\geq\\left\\lceil 3.75 \\right\\rceil \\implies x_2 \\ge 4$。\n\n**子问题 A (添加 $x_{2}\\leq 3$)**：我们在原始约束和新约束 $x_2 \\le 3$ 下最大化 $Z = 5x_1 + 8x_2$。由于原 LP 松弛解 $(2.25, 3.75)$ 被切除，新的最优点很可能位于新边界 $x_2=3$ 上。\n在 $x_2=3$ 这条线上，目标函数变为 $Z = 5x_1 + 8(3) = 5x_1 + 24$。我们需要最大化 $x_1$。\n将 $x_2=3$ 代入原约束：\n1. $x_1 + 3 \\le 6 \\implies x_1 \\le 3$\n2. $5x_1 + 9(3) \\le 45 \\implies 5x_1 \\le 18 \\implies x_1 \\le 3.6$\n同时满足这两个条件意味着 $x_1 \\le 3$。因此，子问题 A 在 $(3, 3)$ 点取得最优解。\n$$ Z_A = 5(3) + 8(3) = 15 + 24 = 39. $$\n\n**子问题 B (添加 $x_{2}\\geq 4$)**：在以下区域上最大化 $Z$\n$$\nx_{1}+x_{2}\\leq 6,\\quad 5x_{1}+9x_{2}\\leq 45,\\quad x_{2}\\geq 4,\\quad x_{1},x_{2}\\geq 0.\n$$\n考虑在 $x_{2}\\geq 4$ 条件下关键边界的交点：\n- 当 $x_{1}=0$ 时，由 $5x_{1}+9x_{2}\\leq 45$ 得 $x_{2}\\leq 5$，所以 $(0,5)$ 是可行解，得到 $Z=40$。\n- $x_{2}=4$ 与 $5x_{1}+9x_{2}=45$ 的交点给出 $5x_{1}+36=45\\Rightarrow x_{1}=\\frac{9}{5}$，且 $x_{1}+x_{2}=\\frac{9}{5}+4=\\frac{29}{5}\\leq 6$，所以 $(\\frac{9}{5},4)$ 是可行解，其值为\n$$\nZ=5\\cdot\\frac{9}{5}+8\\cdot 4=9+32=41.\n$$\n- $x_{2}=4$ 与 $x_{1}+x_{2}=6$ 的交点为 $(2,4)$，但 $5\\cdot 2+9\\cdot 4=46>45$，因此是不可行解。\n\n沿着 $5x_{1}+9x_{2}=45$ 边界，目标函数 $Z$ 的梯度方向指向可行域内部，意味着向 $x_2$ 较小的方向移动（即增加 $x_1$）会增加目标值。该移动受限于 $x_2 \\ge 4$ 约束。因此，最优解出现在 $x_2=4$ 与 $5x_{1}+9x_{2}=45$ 的交点 $(\\frac{9}{5},4)$。\n$$\nZ_{B}=41.\n$$\n\n因此，所求的数值对为 $[Z_{A},Z_{B}]=[39,41]$。", "answer": "$$\\boxed{\\begin{bmatrix} 39 & 41 \\end{bmatrix}}$$", "id": "2209717"}, {"introduction": "分支定界法的效率源于其“定界”并剪除（或称“剪枝”）不必要搜索分支的能力。如果一个子问题（节点）的界限表明它不可能产生比当前已找到的最佳整数解（称为“当前最优解”）更好的结果，我们就可以安全地放弃对该分支的探索。这个概念性练习[@problem_id:2209679]将检验你对剪枝规则的理解，这是避免对所有可能整数解进行穷举搜索的关键。", "problem": "一个运筹学团队正在使用分支定界算法解决一个旨在最大化生产效率的大规模整数规划问题。效率由一个无量纲分数 $Z$ 来衡量。问题中的变量必须是整数，例如，代表要生产的单位数量或分配到一项任务的工人数。\n\n分支定界算法系统地探索一个由子问题（或“节点”）组成的搜索树。在执行过程中的任何时刻，算法都会维持一个“现行解”，即迄今为止找到的最佳有效整数解。当前现行解的效率分数为 $Z_{incumbent} = 50$。\n\n对于搜索树中每个未探索的节点，都会求解该子问题的一个松弛版本（其中变量被允许为非整数），以计算在该树分支内可能找到的最佳整数解的“上界”。\n\n目前，有三个活跃节点正在被考虑：\n- 节点 A 的上界为 $49.8$。\n- 节点 B 的上界为 $52.1$。\n- 节点 C 的上界为 $50.0$。\n\n如果可以证明进一步探索一个节点不会产生比当前现行解更优的解，那么该节点就可以被“剪枝”。在算法的这个阶段，下列哪个活跃节点可以被剪枝？\n\nA. 仅节点 A\nB. 仅节点 B\nC. 仅节点 C\nD. 仅节点 A 和节点 C\nE. 仅节点 B 和节点 C\nF. 所有三个节点", "solution": "在分支定界最大化问题中，求解一个节点的松弛问题会得到该节点内任何整数解可达到的目标值的上界。将现行解的目标值记为 $Z_{\\text{incumbent}}$。对于任何具有松弛界 $U$ 的节点，该节点内的每个可行整数解的目标值 $Z_{\\text{node}}^{*}$ 都满足\n$$\nZ_{\\text{node}}^{*} \\le U.\n$$\n因此，如果 $U \\le Z_{\\text{incumbent}}$，则该节点内的任何解都不可能比现行解更优（最多一样好），该节点可以因界限而被剪枝。\n\n这里，$Z_{\\text{incumbent}}=50$。评估每个节点：\n\n节点 A：$U_{A}=49.8$。因为 $49.8 < 50$，它不可能包含比现行解更优的解，所以可以被剪枝。\n\n节点 B：$U_{B}=52.1$。因为 $52.1 > 50$，它可能包含比现行解更优的解，所以不能被剪枝。\n\n节点 C：$U_{C}=50.0$。因为 $50.0 \\le 50$，它不可能包含比现行解更优的解，所以可以被剪枝。\n\n因此，可以被剪枝的节点是节点 A 和节点 C，对应于选项 D。", "answer": "$$\\boxed{D}$$", "id": "2209679"}]}