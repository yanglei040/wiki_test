{"hands_on_practices": [{"introduction": "识别一个优化问题是否是凸的，是求解它的第一步，但这并非总是显而易见的。这个练习 [@problem_id:2164032] 以一个经典的圆柱罐设计问题为例，揭示了如何通过巧妙的变量替换，将一个非凸问题转化为凸优化问题。掌握这种“建模的艺术”对于拓宽凸优化工具的应用范围至关重要。", "problem": "设计一个能够容纳特定数量产品的标准圆柱形罐子是一个经典的优化任务。一位工程师的任务是设计一个具有固定内部容积 $V > 0$ 的罐子，使其所用材料总量最小化，而材料总量与罐子的总表面积成正比。设罐子的半径为 $r$，高度为 $h$。总表面积由函数 $A(r, h) = 2\\pi r^2 + 2\\pi rh$ 给出，固定容积由方程 $V = \\pi r^2 h$ 描述。\n\n在凸优化领域，一个问题通常被表述为在一个凸集上最小化一个凸函数。如果一个集合中任意两点之间的线段也完全包含在该集合中，则该集合是凸的。如果一个优化问题的目标函数是凸的，其不等式约束由凸函数定义，且其等式约束是仿射的，则该问题是凸的。仿射函数是线性函数加上一个常数，即形式为 $f(\\mathbf{x}) = \\mathbf{a}^T \\mathbf{x} + b$。\n\n考虑该罐子设计问题的两种不同数学表述：\n\n1.  **直接表述：** 优化变量是罐子的尺寸 $\\mathbf{x} = (r, h)$。其定义域被限制在有物理意义的值上，即 $r > 0$ 和 $h > 0$。目标是在约束 $\\pi r^2 h = V$ 下最小化 $A(r, h)$。\n\n2.  **变换后的表述：** 引入变量替换：$y_1 = \\ln r$ 和 $y_2 = \\ln h$。优化变量现在是 $\\mathbf{y} = (y_1, y_2)$，它可以取任何实数值。\n\n通过根据凸优化问题的定义分析这两种表述，判断下列哪个陈述是正确的。\n\nA. 直接表述是一个凸优化问题，但变换后的表述不是。\nB. 变换后的表述是一个凸优化问题，但直接表述不是。\nC. 直接表述和变换后的表述都是凸优化问题。\nD. 直接表述和变换后的表述都不是凸优化问题。", "solution": "我们根据凸优化问题的定义来分析每种表述：在一个凸的可行集上最小化一个凸的目标函数，且所有等式约束都是仿射的。\n\n直接表述：\n- 变量：$(r,h)$，其中 $r>0$, $h>0$。\n- 目标函数：$A(r,h)=2\\pi r^{2}+2\\pi r h$。\n- 约束：$\\pi r^{2}h=V$。\n\n首先，检验目标函数的凸性。计算关于 $(r,h)$ 的海森矩阵：\n$$\n\\nabla A(r,h)=\\begin{pmatrix}4\\pi r+2\\pi h \\\\ 2\\pi r\\end{pmatrix},\\quad\n\\nabla^{2}A(r,h)=\\begin{pmatrix}4\\pi  2\\pi \\\\ 2\\pi  0\\end{pmatrix}.\n$$\n其行列式为 $4\\pi \\cdot 0 - (2\\pi)^2 = -4\\pi^2  0$，所以海森矩阵是不定的。因此 $A$ 在其定义域上不是凸的。此外，等式约束 $\\pi r^{2}h=V$ 不是仿射的，这已经违反了凸优化的要求。可行集\n$$\n\\{(r,h): r0,\\ h0,\\ \\pi r^{2}h=V\\}\n$$\n不是凸的：例如，取 $(r_{1},h_{1})=(a,\\,V/(\\pi a^{2}))$ 和 $(r_{2},h_{2})=(2a,\\,V/(\\pi (2a)^{2}))$，其中 $a0$。它们的中点\n$$\n\\left(\\tfrac{r_{1}+r_{2}}{2},\\,\\tfrac{h_{1}+h_{2}}{2}\\right)=\\left(\\tfrac{3a}{2},\\,\\tfrac{1}{2}\\left(\\tfrac{V}{\\pi a^{2}}+\\tfrac{V}{4\\pi a^{2}}\\right)\\right)\n$$\n满足\n$$\n\\pi\\left(\\tfrac{3a}{2}\\right)^{2}\\left(\\tfrac{1}{2}\\left(\\tfrac{V}{\\pi a^{2}}+\\tfrac{V}{4\\pi a^{2}}\\right)\\right)=\\tfrac{45}{32}V\\neq V,\n$$\n所以可行点之间的线段不是可行的。因此，直接表述不是一个凸优化问题。\n\n变换后的表述：\n- 变量：$(y_{1},y_{2})$，其中 $y_{1}=\\ln r$，$y_{2}=\\ln h$，所以 $r=\\exp(y_{1})$，$h=\\exp(y_{2})$ 且 $y\\in\\mathbb{R}^{2}$。\n- 目标函数：\n$$\nA(y)=2\\pi\\exp(2y_{1})+2\\pi\\exp(y_{1}+y_{2}).\n$$\n每一项都是 $c\\,\\exp(a^{T}y)$ 的形式，其中 $c0$，这是凸的。更明确地说，其海森矩阵为\n$$\n\\nabla^{2}\\big(2\\pi\\exp(2y_{1})\\big)=2\\pi\\exp(2y_{1})\\begin{pmatrix}4  0 \\\\ 0  0\\end{pmatrix}\\succeq 0,\\quad\n\\nabla^{2}\\big(2\\pi\\exp(y_{1}+y_{2})\\big)=2\\pi\\exp(y_{1}+y_{2})\\begin{pmatrix}1  1 \\\\ 1  1\\end{pmatrix}\\succeq 0,\n$$\n所以 $A(y)$ 作为凸函数的和也是凸的。\n\n- 约束：由 $\\pi r^{2}h=V$（其中 $V0$ 且 $\\pi0$），取对数得到\n$$\n2y_{1}+y_{2}=\\ln(V)-\\ln(\\pi),\n$$\n这是一个仿射等式。可行集是一个仿射集，因此是凸的，并且定义域 $y\\in\\mathbb{R}^{2}$ 是凸的。\n\n因此，变换后的表述是一个凸优化问题，而直接表述不是。\n\n正确的选项是 B。", "answer": "$$\\boxed{B}$$", "id": "2164032"}, {"introduction": "对于带约束的优化问题，我们如何判断一个点是否为最优解？Karush-Kuhn-Tucker (KKT) 条件为此提供了严格的数学判据。通过这个物流仓库选址的练习 [@problem_id:2163970]，你将亲手检验一个候选点是否满足包括原始可行性、对偶可行性、互补松弛性和平稳性在内的所有 KKT 条件。", "problem": "一家物流公司正在为一个新的中央仓库选址。计划的仓库位置坐标为 $(x, y)$。主要的运营成本被建模为仓库到两个关键供应商距离的函数。一个简化的成本函数 $C(x,y)$ 是从仓库到供应商的欧几里得距离平方和，供应商分别位于 $(4, 1)$ 和 $(2, 5)$。\n\n此外，由于区域规划法规的限制，仓库必须位于由不等式 $x + 2y \\le 4$ 定义的区域内。\n\n完整的优化问题可以表述为：\n最小化 $C(x,y) = (x-4)^2 + (y-1)^2 + (x-2)^2 + (y-5)^2$\n约束条件为 $x + 2y \\le 4$。\n\n一位初级分析师提出了点 $(x_c, y_c) = (2, 1)$ 作为一个潜在的最优位置。您的任务是验证该点是否满足Karush-Kuhn-Tucker (KKT) 最优性条件。根据您的分析，从以下选项中选择正确的陈述。\n\nA. 点 $(2, 1)$ 不满足 KKT 条件。\nB. 点 $(2, 1)$ 满足 KKT 条件，且约束是非激活的（$\\lambda=0$）。\nC. 点 $(2, 1)$ 满足 KKT 条件，其拉格朗日乘子为 $\\lambda = 2$。\nD. 点 $(2, 1)$ 满足 KKT 条件，其拉格朗日乘子为 $\\lambda = 4$。\nE. 点 $(2, 1)$ 满足 KKT 条件，其拉格朗日乘子为 $\\lambda = 12$。", "solution": "要确定点 $(x_c, y_c) = (2, 1)$ 是否满足给定约束优化问题的 Karush-Kuhn-Tucker (KKT) 条件，我们必须检查四个条件：原始可行性、对偶可行性、互补松弛性和平稳性。\n\n首先，我们将问题定义为应用 KKT 条件的标准形式。\n目标函数为 $C(x,y) = (x-4)^2 + (y-1)^2 + (x-2)^2 + (y-5)^2$。\n不等式约束为 $g(x,y) = x + 2y - 4 \\le 0$。\n\n对于这种形式的最小化问题，KKT 条件如下：\n1.  **原始可行性**：$g(x,y) \\le 0$\n2.  **对偶可行性**：$\\lambda \\ge 0$（其中 $\\lambda$ 是与约束 $g(x,y)$ 相关联的拉格朗日乘子）\n3.  **互补松弛性**：$\\lambda \\cdot g(x,y) = 0$\n4.  **平稳性**：$\\nabla C(x,y) + \\lambda \\nabla g(x,y) = \\vec{0}$\n\n我们用点 $(x_c, y_c) = (2, 1)$ 来检验这些条件。\n\n**步骤 1：检查原始可行性**\n我们将点 $(2, 1)$ 代入约束函数 $g(x,y)$：\n$g(2, 1) = (2) + 2(1) - 4 = 2 + 2 - 4 = 0$。\n条件是 $g(2,1) \\le 0$，由于 $0 \\le 0$，所以点 $(2, 1)$ 在可行域内。它位于可行集的边界上。\n\n**步骤 2：检查平稳性**\n这个条件要求我们找到一个 $\\lambda$ 使得 $\\nabla C(2,1) + \\lambda \\nabla g(2,1) = \\vec{0}$ 成立。\n首先，我们计算 $C(x,y)$ 和 $g(x,y)$ 的梯度。\n\n目标函数可以通过展开来简化：\n$C(x,y) = (x^2 - 8x + 16) + (y^2 - 2y + 1) + (x^2 - 4x + 4) + (y^2 - 10y + 25)$\n$C(x,y) = 2x^2 - 12x + 2y^2 - 12y + 46$\n\n$C(x,y)$ 的梯度是：\n$\\nabla C(x,y) = \\left( \\frac{\\partial C}{\\partial x}, \\frac{\\partial C}{\\partial y} \\right) = (4x - 12, 4y - 12)$。\n在点 $(2, 1)$ 处，梯度为：\n$\\nabla C(2, 1) = (4(2) - 12, 4(1) - 12) = (8 - 12, 4 - 12) = (-4, -8)$。\n\n约束函数 $g(x,y) = x + 2y - 4$ 的梯度是：\n$\\nabla g(x,y) = \\left( \\frac{\\partial g}{\\partial x}, \\frac{\\partial g}{\\partial y} \\right) = (1, 2)$。\n\n现在我们建立平稳性方程：\n$\\nabla C(2, 1) + \\lambda \\nabla g(2, 1) = \\vec{0}$\n$(-4, -8) + \\lambda (1, 2) = (0, 0)$\n这给了我们一个关于 $\\lambda$ 的由两个线性方程组成的方程组：\n1.  $-4 + \\lambda(1) = 0 \\implies \\lambda = 4$\n2.  $-8 + \\lambda(2) = 0 \\implies 2\\lambda = 8 \\implies \\lambda = 4$\n\n两个方程都得出了一个一致的值 $\\lambda = 4$。因此，如果我们选择 $\\lambda = 4$，平稳性条件就得到满足。\n\n**步骤 3：检查对偶可行性**\n我们找到的拉格朗日乘子的值是 $\\lambda = 4$。我们必须检查它是否为非负数。\n由于 $4 \\ge 0$，对偶可行性条件得到满足。\n\n**步骤 4：检查互补松弛性**\n这个条件要求 $\\lambda \\cdot g(2,1) = 0$。\n从步骤 1 中，我们得到 $g(2,1) = 0$。使用步骤 2 中的 $\\lambda=4$：\n$4 \\cdot 0 = 0$。\n互补松弛性条件得到满足。这是预料之中的，因为该点位于约束的边界上（约束是“激活的”），这通常意味着一个非零的乘子。选项 B 指出约束是非激活的（$\\lambda=0$），这是不正确的。\n\n**结论**\n点 $(2, 1)$ 满足所有四个 KKT 条件，且唯一的拉格朗日乘子为 $\\lambda = 4$。因此，点 $(2,1)$ 是一个 KKT 点。\n将我们的结果与给定选项进行比较：\nA. 点 $(2, 1)$ 不满足 KKT 条件。(不正确)\nB. 点 $(2, 1)$ 满足 KKT 条件，且约束是非激活的（$\\lambda=0$）。(不正确, $\\lambda=4$)\nC. 点 $(2, 1)$ 满足 KKT 条件，其拉格朗日乘子为 $\\lambda = 2$。(不正确, $\\lambda=4$)\nD. 点 $(2, 1)$ 满足 KKT 条件，其拉格朗日乘子为 $\\lambda = 4$。(正确)\nE. 点 $(2, 1)$ 满足 KKT 条件，其拉格朗日乘子为 $\\lambda = 12$。(不正确, $\\lambda=4$)\n\n正确的陈述是 D。", "answer": "$$\\boxed{D}$$", "id": "2163970"}, {"introduction": "许多凸优化问题无法直接求得解析解，需要依赖迭代算法来逼近最优值，而牛顿法是其中最著名和高效的方法之一。这个练习 [@problem_id:2163993] 让你能够动手计算牛顿法的核心——牛顿步长，它利用函数的二阶信息来指导下降方向，从而获得更快的收敛速度。", "problem": "在数值优化领域，牛顿法是一种用于寻找函数最小值的迭代算法。对于一个二次可微函数 $f(\\mathbf{x})$（其中 $\\mathbf{x} \\in \\mathbb{R}^n$）的无约束最小化问题，每次迭代通过一个称为牛顿步长 $\\Delta \\mathbf{x}_{\\text{nt}}$ 的量来更新当前点 $\\mathbf{x}$。该步长旨在找到函数 $f$ 在当前点 $\\mathbf{x}$ 的二阶泰勒近似的最小值。\n\n牛顿步长通过求解线性系统 $\\nabla^2 f(\\mathbf{x}) \\Delta \\mathbf{x}_{\\text{nt}} = -\\nabla f(\\mathbf{x})$ 来计算，得到公式 $\\Delta \\mathbf{x}_{\\text{nt}} = -(\\nabla^2 f(\\mathbf{x}))^{-1} \\nabla f(\\mathbf{x})$，前提是海森矩阵 $\\nabla^2 f(\\mathbf{x})$ 是可逆的。\n\n考虑由下式定义的函数 $f: \\mathbb{R}^2 \\to \\mathbb{R}$：\n$$f(x_1, x_2) = \\exp(x_1) + \\exp(x_2) + x_1^2 + x_1 x_2 + x_2^2 - 3x_1 - 4x_2$$\n你的任务是计算该函数在点 $\\mathbf{x} = (0, 0)$ 处的牛顿步长 $\\Delta \\mathbf{x}_{\\text{nt}} = \\begin{pmatrix} \\Delta x_1 \\\\ \\Delta x_2 \\end{pmatrix}$。你的最终答案应为两个分量 $\\Delta x_1$ 和 $\\Delta x_2$。", "solution": "对于牛顿法，在当前点 $\\mathbf{x}$ 处的步长通过求解线性系统来定义：\n$$\n\\nabla^{2} f(\\mathbf{x})\\,\\Delta \\mathbf{x}_{\\text{nt}} = -\\nabla f(\\mathbf{x}),\n$$\n这等价于\n$$\n\\Delta \\mathbf{x}_{\\text{nt}} = -\\left(\\nabla^{2} f(\\mathbf{x})\\right)^{-1}\\nabla f(\\mathbf{x}).\n$$\n给定函数 $f(x_{1},x_{2})=\\exp(x_{1})+\\exp(x_{2})+x_{1}^{2}+x_{1}x_{2}+x_{2}^{2}-3x_{1}-4x_{2}$，计算其梯度和海森矩阵。\n\n梯度为\n$$\n\\nabla f(x_{1},x_{2})=\n\\begin{pmatrix}\n\\frac{\\partial f}{\\partial x_{1}}\\\\\n\\frac{\\partial f}{\\partial x_{2}}\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n\\exp(x_{1})+2x_{1}+x_{2}-3\\\\\n\\exp(x_{2})+x_{1}+2x_{2}-4\n\\end{pmatrix}.\n$$\n在点 $(x_{1},x_{2})=(0,0)$ 处求值得到\n$$\n\\nabla f(0,0)=\n\\begin{pmatrix}\n\\exp(0)+0+0-3\\\\\n\\exp(0)+0+0-4\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n1-3\\\\\n1-4\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n-2\\\\\n-3\n\\end{pmatrix}.\n$$\n\n海森矩阵为\n$$\n\\nabla^{2} f(x_{1},x_{2})=\n\\begin{pmatrix}\n\\frac{\\partial^{2} f}{\\partial x_{1}^{2}}  \\frac{\\partial^{2} f}{\\partial x_{1}\\partial x_{2}}\\\\\n\\frac{\\partial^{2} f}{\\partial x_{2}\\partial x_{1}}  \\frac{\\partial^{2} f}{\\partial x_{2}^{2}}\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n\\exp(x_{1})+2  1\\\\\n1  \\exp(x_{2})+2\n\\end{pmatrix}.\n$$\n在点 $(0,0)$ 处求值得出\n$$\n\\nabla^{2} f(0,0)=\n\\begin{pmatrix}\n\\exp(0)+2  1\\\\\n1  \\exp(0)+2\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n3  1\\\\\n1  3\n\\end{pmatrix}.\n$$\n\n在点 $(0,0)$ 处的牛顿步长 $\\Delta \\mathbf{x}_{\\text{nt}}$ 满足\n$$\n\\begin{pmatrix}\n3  1\\\\\n1  3\n\\end{pmatrix}\n\\begin{pmatrix}\n\\Delta x_{1}\\\\\n\\Delta x_{2}\n\\end{pmatrix}\n=\n-\\nabla f(0,0)\n=\n\\begin{pmatrix}\n2\\\\\n3\n\\end{pmatrix}.\n$$\n这个线性方程组是\n$$\n3\\Delta x_{1}+\\Delta x_{2}=2,\\qquad \\Delta x_{1}+3\\Delta x_{2}=3.\n$$\n由第一个方程得 $\\Delta x_{2}=2-3\\Delta x_{1}$。将其代入第二个方程，\n$$\n\\Delta x_{1}+3(2-3\\Delta x_{1})=3 \\;\\Rightarrow\\; \\Delta x_{1}+6-9\\Delta x_{1}=3 \\;\\Rightarrow\\; -8\\Delta x_{1}=-3 \\;\\Rightarrow\\; \\Delta x_{1}=\\frac{3}{8}.\n$$\n那么\n$$\n\\Delta x_{2}=2-3\\cdot\\frac{3}{8}=\\frac{16}{8}-\\frac{9}{8}=\\frac{7}{8}.\n$$\n因此，\n$$\n\\Delta \\mathbf{x}_{\\text{nt}}=\n\\begin{pmatrix}\n\\frac{3}{8}\\\\\n\\frac{7}{8}\n\\end{pmatrix}.\n$$", "answer": "$$\\boxed{\\begin{pmatrix} \\frac{3}{8} \\\\ \\frac{7}{8} \\end{pmatrix}}$$", "id": "2163993"}]}