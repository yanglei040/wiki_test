{"hands_on_practices": [{"introduction": "在真实的实时系统中，任务之间共享资源是常态，但这会引发一个棘手的问题——优先级反转。本练习将指导你应用优先级天花板协议（PCP）来分析并量化最坏情况下的阻塞时间，并将其整合到速率单调调度的响应时间分析中 ([@problem_id:3671263])。通过这个实践，你将学会如何设计一个既能保证资源互斥，又能提供可预测性能的健壮实时系统。", "problem": "一个单处理器嵌入式控制器使用固定优先级抢占式调度，采用速率单调（Rate Monotonic）优先级分配，无释放抖动，且上下文切换开销可忽略不计。每个周期任务的隐式截止时间等于其周期，所有非关键代码都完全可抢占。共享资源的互斥通过优先级天花板协议（Priority Ceiling Protocol, PCP）来强制执行，每个临界区在持有相应资源锁的情况下执行。\n\n您可以使用的基本事实是：在固定优先级抢占式调度下，任务的最坏情况响应时间发生在与所有更高优先级任务同步释放时；任务最坏情况响应的时间窗口包含其自身的执行时间、由于较低优先级任务持有相关资源而导致的任何一次性阻塞，以及在该窗口内到达的更高优先级作业的抢占；在优先级天花板协议（PCP）下，一个任务最多只能被一个较低优先级任务的单个临界区阻塞一次，该临界区所使用的资源的优先级天花板大于或等于被阻塞任务的优先级。\n\n考虑以下任务集和共享资源：\n- 任务 $T_{\\mathrm{VH}}$：周期 $T_{\\mathrm{VH}} = 10\\,\\mathrm{ms}$，最坏情况执行时间 $C_{\\mathrm{VH}} = 1\\,\\mathrm{ms}$。\n- 任务 $T_{\\mathrm{H}}$：周期 $T_{\\mathrm{H}} = 20\\,\\mathrm{ms}$，最坏情况执行时间 $C_{\\mathrm{H}} = 2\\,\\mathrm{ms}$。\n- 任务 $T_{\\mathrm{M}}$：周期 $T_{\\mathrm{M}} = 50\\,\\mathrm{ms}$，最坏情况执行时间 $C_{\\mathrm{M}} = 6\\,\\mathrm{ms}$。\n- 任务 $T_{\\mathrm{L}}$：周期 $T_{\\mathrm{L}} = 100\\,\\mathrm{ms}$，最坏情况执行时间 $C_{\\mathrm{L}} = 12\\,\\mathrm{ms}$。\n\n每个作业的共享资源和临界区长度：\n- 资源 $R_{1}$ 由 $T_{\\mathrm{H}}$ 和 $T_{\\mathrm{L}}$ 使用。在 $T_{\\mathrm{H}}$ 中，任何单个临界区的最大长度为 $1\\,\\mathrm{ms}$，在 $T_{\\mathrm{L}}$ 中为 $3\\,\\mathrm{ms}$。\n- 资源 $R_{2}$ 由 $T_{\\mathrm{M}}$ 和 $T_{\\mathrm{L}}$ 使用。在 $T_{\\mathrm{M}}$ 中，任何单个临界区的最大长度为 $2\\,\\mathrm{ms}$，在 $T_{\\mathrm{L}}$ 中为 $1\\,\\mathrm{ms}$。\n\n仅使用上述基本事实（不假设任何特定的预推导响应时间公式），确定在这些条件下任务 $T_{\\mathrm{H}}$ 的精确最坏情况响应时间 $R_{\\mathrm{H}}$。请将您的最终答案表示为以 $\\mathrm{ms}$ 为单位的单个实数值。无需四舍五入。", "solution": "首先对问题进行严格的验证过程。\n\n### 第1步：提取已知条件\n- **系统配置**：单处理器、固定优先级抢占式调度、速率单调（RM）优先级分配、无释放抖动、可忽略的上下文切换开销。\n- **任务模型**：每个周期任务都有一个隐式截止时间 ($D_i = T_i$)。所有非关键代码都完全可抢占。\n- **同步**：通过优先级天花板协议（PCP）强制执行互斥。临界区在持有相应资源锁的情况下执行。\n- **基本事实**：\n    1. 任务的最坏情况响应时间（WCRT）发生在与所有更高优先级任务同步释放时。\n    2. WCRT时间窗口包含任务自身的执行时间、来自较低优先级任务的任何一次性阻塞，以及来自较高优先级作业的抢占。\n    3. 在PCP下，一个任务最多只能被一个较低优先级任务的单个临界区阻塞一次，该临界区所使用的资源的优先级天花板大于或等于被阻塞任务的优先级。\n- **任务集**：\n    - 任务 $T_{\\mathrm{VH}}$：周期 $T_{\\mathrm{VH}} = 10\\,\\mathrm{ms}$，最坏情况执行时间 $C_{\\mathrm{VH}} = 1\\,\\mathrm{ms}$。\n    - 任务 $T_{\\mathrm{H}}$：周期 $T_{\\mathrm{H}} = 20\\,\\mathrm{ms}$，最坏情况执行时间 $C_{\\mathrm{H}} = 2\\,\\mathrm{ms}$。\n    - 任务 $T_{\\mathrm{M}}$：周期 $T_{\\mathrm{M}} = 50\\,\\mathrm{ms}$，最坏情况执行时间 $C_{\\mathrm{M}} = 6\\,\\mathrm{ms}$。\n    - 任务 $T_{\\mathrm{L}}$：周期 $T_{\\mathrm{L}} = 100\\,\\mathrm{ms}$，最坏情况执行时间 $C_{\\mathrm{L}} = 12\\,\\mathrm{ms}$。\n- **共享资源与临界区**：\n    - 资源 $R_{1}$：由 $T_{\\mathrm{H}}$ 和 $T_{\\mathrm{L}}$ 使用。在 $T_{\\mathrm{H}}$ 中的最大临界区长度为 $1\\,\\mathrm{ms}$。在 $T_{\\mathrm{L}}$ 中的最大临界区长度为 $3\\,\\mathrm{ms}$。\n    - 资源 $R_{2}$：由 $T_{\\mathrm{M}}$ 和 $T_{\\mathrm{L}}$ 使用。在 $T_{\\mathrm{M}}$ 中的最大临界区长度为 $2\\,\\mathrm{ms}$。在 $T_{\\mathrm{L}}$ 中的最大临界区长度为 $1\\,\\mathrm{ms}$。\n- **目标**：确定任务 $T_{\\mathrm{H}}$ 的精确最坏情况响应时间 $R_{\\mathrm{H}}$。\n\n### 第2步：使用提取的已知条件进行验证\n该问题在实时系统分析的标准领域内定义明确。\n- **科学依据**：该问题使用了实时系统领域的既定概念，如速率单调调度、优先级天花板协议和最坏情况响应时间分析，这些都是操作系统和嵌入式系统工程的基础。所提供的“基本事实”是描述这些原则的正确陈述。\n- **适定性**：该问题提供了一套完整的参数（任务周期、执行时间、资源使用情况、临界区长度）和一个明确的目标。所提供的事实引导用户采用标准的、定义明确的解决方法（迭代响应时间分析）。这种结构确保了存在唯一且有意义的解。\n- **客观性**：该问题使用精确、无歧义的技术语言和定量数据进行陈述。没有主观或基于意见的元素。\n\n### 第3步：结论与行动\n该问题被判定为**有效**。它自成体系、科学合理且适定。可以继续进行求解过程。\n\n### 求解推导\n目标是计算任务 $T_{\\mathrm{H}}$ 的最坏情况响应时间 $R_{\\mathrm{H}}$。所提供的基本事实表明，在固定优先级抢占式调度下，任务 $T_i$ 的最坏情况响应时间（表示为 $R_i$）可以通过迭代方法找到。响应时间是任务自身的最坏情况执行时间（$C_i$）、它可能经历的来自较低优先级任务的最大阻塞时间（$B_i$）以及所有较高优先级任务的干扰之和。这种关系由以下递推关系式表示：\n$$R_i^{(k+1)} = C_i + B_i + \\sum_{j \\in hp(i)} \\left\\lceil \\frac{R_i^{(k)}}{T_j} \\right\\rceil C_j$$\n其中 $hp(i)$ 是优先级高于任务 $T_i$ 的任务集合。迭代从一个初始猜测值开始，通常为 $R_i^{(0)} = C_i + B_i$，并持续进行直到两个连续值相等，即 $R_i^{(k+1)} = R_i^{(k)}$。\n\n首先，我们根据速率单调（RM）调度策略分配优先级，其中优先级与任务周期成反比。周期越短，优先级越高。\n- $T_{\\mathrm{VH}}$: $T = 10 \\implies$ 优先级 $1$ (最高)\n- $T_{\\mathrm{H}}$: $T = 20 \\implies$ 优先级 $2$\n- $T_{\\mathrm{M}}$: $T = 50 \\implies$ 优先级 $3$\n- $T_{\\mathrm{L}}$: $T = 100 \\implies$ 优先级 $4$ (最低)\n\n对于我们感兴趣的任务 $T_{\\mathrm{H}}$，我们有：\n- 更高优先级任务的集合 $hp(\\mathrm{H})$ 是 $\\{T_{\\mathrm{VH}}\\}$。\n- 更低优先级任务的集合 $lp(\\mathrm{H})$ 是 $\\{T_{\\mathrm{M}}, T_{\\mathrm{L}}\\}$。\n\n接下来，我们计算阻塞项 $B_{\\mathrm{H}}$。根据优先级天花板协议（PCP）的原则，一个任务 $T_i$ 只有在较低优先级的任务 $T_k$ 持有一个资源的锁时才可能被其阻塞，该资源的优先级天花板必须大于或等于任务 $T_i$ 的优先级。资源的优先级天花板定义为访问该资源的最高优先级任务的优先级。\n让我们确定共享资源的优先级天花板：\n- 资源 $R_{1}$ 由 $T_{\\mathrm{H}}$（优先级2）和 $T_{\\mathrm{L}}$（优先级4）使用。最高优先级为2，因此 Ceiling_p($R_{1}$) = 优先级2。\n- 资源 $R_{2}$ 由 $T_{\\mathrm{M}}$（优先级3）和 $T_{\\mathrm{L}}$（优先级4）使用。最高优先级为3，因此 Ceiling_p($R_{2}$) = 优先级3。\n\n现在我们检查哪些较低优先级的任务可以阻塞 $T_{\\mathrm{H}}$（优先级2）：\n- 任务 $T_{\\mathrm{M}}$（优先级3）使用 $R_{2}$。$R_{2}$ 的天花板是优先级3。由于优先级3低于优先级2，即 Ceiling_p($R_{2}$)  Priority($T_{\\mathrm{H}}$)。因此，$T_{\\mathrm{M}}$ 不能阻塞 $T_{\\mathrm{H}}$。\n- 任务 $T_{\\mathrm{L}}$（优先级4）使用 $R_{1}$ 和 $R_{2}$。\n    - 对于 $R_{1}$：Ceiling_p($R_{1}$) = 优先级2。这等于 Priority($T_{\\mathrm{H}}$)。因此，当 $T_{\\mathrm{L}}$ 持有 $R_{1}$ 的锁时，它可以阻塞 $T_{\\mathrm{H}}$。此阻塞的持续时间是 $T_{\\mathrm{L}}$ 在 $R_{1}$ 上的临界区长度，即 $3\\,\\mathrm{ms}$。\n    - 对于 $R_{2}$：Ceiling_p($R_{2}$) = 优先级3。这低于 Priority($T_{\\mathrm{H}}$)。因此，$T_{\\mathrm{L}}$ 持有 $R_{2}$ 的锁不能阻塞 $T_{\\mathrm{H}}$。\n\n基本事实指出，一个任务最多只能被一个较低优先级的临界区阻塞一次。对于 $T_{\\mathrm{H}}$ 来说，唯一潜在的阻塞源是来自 $T_{\\mathrm{L}}$ 访问 $R_{1}$。\n因此，$T_{\\mathrm{H}}$ 的最大阻塞时间是 $B_{\\mathrm{H}} = 3\\,\\mathrm{ms}$。\n\n现在我们可以建立 $R_{\\mathrm{H}}$ 的迭代方程。\n参数如下：\n- $C_{\\mathrm{H}} = 2\\,\\mathrm{ms}$\n- $B_{\\mathrm{H}} = 3\\,\\mathrm{ms}$\n- 来自 $T_{\\mathrm{VH}}$ 的干扰：$T_{\\mathrm{VH}} = 10\\,\\mathrm{ms}$， $C_{\\mathrm{VH}} = 1\\,\\mathrm{ms}$。\n\n$R_{\\mathrm{H}}$ 的递推关系式是：\n$$R_{\\mathrm{H}}^{(k+1)} = C_{\\mathrm{H}} + B_{\\mathrm{H}} + \\left\\lceil \\frac{R_{\\mathrm{H}}^{(k)}}{T_{\\mathrm{VH}}} \\right\\rceil C_{\\mathrm{VH}}$$\n$$R_{\\mathrm{H}}^{(k+1)} = 2 + 3 + \\left\\lceil \\frac{R_{\\mathrm{H}}^{(k)}}{10} \\right\\rceil \\times 1$$\n$$R_{\\mathrm{H}}^{(k+1)} = 5 + \\left\\lceil \\frac{R_{\\mathrm{H}}^{(k)}}{10} \\right\\rceil$$\n\n我们以初始猜测值 $R_{\\mathrm{H}}^{(0)} = C_{\\mathrm{H}} + B_{\\mathrm{H}} = 2 + 3 = 5$ 开始迭代。\n- 迭代 $k=0$：\n$$R_{\\mathrm{H}}^{(1)} = 5 + \\left\\lceil \\frac{R_{\\mathrm{H}}^{(0)}}{10} \\right\\rceil = 5 + \\left\\lceil \\frac{5}{10} \\right\\rceil = 5 + \\lceil 0.5 \\rceil = 5 + 1 = 6$$\n- 迭代 $k=1$：\n$$R_{\\mathrm{H}}^{(2)} = 5 + \\left\\lceil \\frac{R_{\\mathrm{H}}^{(1)}}{10} \\right\\rceil = 5 + \\left\\lceil \\frac{6}{10} \\right\\rceil = 5 + \\lceil 0.6 \\rceil = 5 + 1 = 6$$\n\n由于 $R_{\\mathrm{H}}^{(2)} = R_{\\mathrm{H}}^{(1)} = 6$，序列已经收敛。任务 $T_{\\mathrm{H}}$ 的最坏情况响应时间为 $6\\,\\mathrm{ms}$。该值小于任务的周期 ($T_{\\mathrm{H}} = 20\\,\\mathrm{ms}$)，证实了其可调度性。\n\n最终答案是 $R_{\\mathrm{H}} = 6\\,\\mathrm{ms}$。", "answer": "$$\\boxed{6}$$", "id": "3671263"}, {"introduction": "速率单调（RM）调度虽然是静态优先级调度的基石，但并非万能。本练习旨在揭示 RM 调度的局限性，你将分析一个特定的任务集，通过计算证明它在 RM 调度下会错过截止期，但在最早截止期优先（EDF）调度下却是可行的 ([@problem_id:3675332])。这种对比分析可以让你深刻理解静态与动态优先级调度的核心差异，并学会在不同场景下选择最优的调度策略。", "problem": "考虑一个单核处理器，执行三个独立的周期性任务，这些任务具有隐式截止期（截止期等于周期）、零释放偏移，并采用可忽略上下文切换开销的完全抢占式调度。任务参数以毫秒为单位给出：$C_1=2$，$T_1=5$；$C_2=3$，$T_2=7$；$C_3=2$，$T_3=12$。\n\n仅使用固定优先级调度和动态优先级调度的基本定义：\n- 在速率单调 (RM) 调度下，优先级与周期长度成反比分配。请从基本原理出发，确定最低优先级任务的最坏情况响应时间 $R_3$，并评估 RM 调度是否能满足该任务集的所有截止期。您的推导应从更高优先级任务的干扰定义开始，并得出任务3相对于其作业释放的精确最坏情况完成时间。\n- 在最早截止期优先 (EDF) 调度下，任务总是按最早绝对截止期的顺序进行调度。请使用单处理器上隐式截止期周期性任务的成熟可调度性结论，通过计算精确的总处理器利用率 $U=\\sum_i C_i/T_i$ 并在 EDF 可调度性条件的背景下解释该值，来评估该任务集在 EDF 调度下是否可调度。\n\n请提供最坏情况响应时间 $R_3$ 的精确数值（单位为毫秒）作为您的最终答案。无需四舍五入。请将所有中间时间量以毫秒表示，所有利用率结果以精确分数或适当的小数表示；对于最终答案，仅提供所要求的 $R_3$ 值。", "solution": "问题陈述已经过验证，是自洽的、有科学依据且定义明确的。这是一个实时系统分析中的标准练习。我们可以开始解答。\n\n该问题要求对单核处理器上的一个实时任务集进行两部分分析。任务参数如下：\n- 任务1：最坏情况执行时间 $C_1 = 2$ 毫秒，周期 $T_1 = 5$ 毫秒。\n- 任务2：最坏情况执行时间 $C_2 = 3$ 毫秒，周期 $T_2 = 7$ 毫秒。\n- 任务3：最坏情况执行时间 $C_3 = 2$ 毫秒，周期 $T_3 = 12$ 毫秒。\n所有任务都是独立的、周期性的，具有隐式截止期 ($D_i = T_i$)、零释放偏移，并采用抢占式调度。\n\n**第一部分：速率单调 (RM) 调度分析**\n\n在速率单调 (RM) 调度下，任务优先级是固定的，并与其周期成反比分配。周期越短，优先级越高。鉴于周期为 $T_1 = 5$、$T_2 = 7$ 和 $T_3 = 12$，优先级顺序为任务1（最高）、任务2（中等）和任务3（最低）。\n\n问题要求从基本原理出发，推导最低优先级任务的最坏情况响应时间 $R_3$。任务 $i$ 的最坏情况响应时间发生在一个临界时刻，该时刻定义为任务 $i$ 的一个作业与所有更高优先级任务的作业同时释放的瞬间。响应时间 $R_i$ 是任务自身的执行时间 $C_i$ 与所有更高优先级任务造成的干扰之和。在长度为 $t$ 的时间间隔内，来自更高优先级任务 $j$（其中 $j \\in hp(i)$）的总干扰是任务 $j$ 在该间隔内可以释放的次数乘以其执行时间 $C_j$。这个释放次数由 $\\lceil t/T_j \\rceil$ 给出。\n\n这导出了关于最坏情况响应时间 $R_i$ 的以下递推关系：\n$$R_i = C_i + \\sum_{j \\in hp(i)} \\left\\lceil \\frac{R_i}{T_j} \\right\\rceil C_j$$\n该方程可以通过迭代求解：\n$$R_i^{(n+1)} = C_i + \\sum_{j \\in hp(i)} \\left\\lceil \\frac{R_i^{(n)}}{T_j} \\right\\rceil C_j$$\n迭代从一个初始猜测值开始，通常是 $R_i^{(0)} = C_i$，并持续进行直到两个连续值相等 ($R_i^{(n+1)} = R_i^{(n)}$)，此时该值已收敛到精确的响应时间。如果在任何时候 $R_i^{(n+1)} > D_i$，则该任务被视为不可调度，迭代可以停止。\n\n对于我们的具体情况，我们要求解 $R_3$。比任务3优先级更高的任务集合是 $hp(3) = \\{1, 2\\}$。$R_3$ 的方程是：\n$$R_3 = C_3 + \\left\\lceil \\frac{R_3}{T_1} \\right\\rceil C_1 + \\left\\lceil \\frac{R_3}{T_2} \\right\\rceil C_2$$\n代入给定的数值（全部以毫秒为单位）：\n$$R_3 = 2 + \\left\\lceil \\frac{R_3}{5} \\right\\rceil (2) + \\left\\lceil \\frac{R_3}{7} \\right\\rceil (3)$$\n我们从初始值 $R_3^{(0)} = C_3 = 2$ 开始，迭代求解：\n- **迭代 1：** $w_1 = C_3 + \\lceil C_3/T_1 \\rceil C_1 + \\lceil C_3/T_2 \\rceil C_2 = 2 + \\lceil 2/5 \\rceil (2) + \\lceil 2/7 \\rceil (3) = 2 + (1)(2) + (1)(3) = 7$。因此，$R_3^{(1)} = 7$。\n- **迭代 2：** $w_2 = 2 + \\lceil 7/5 \\rceil (2) + \\lceil 7/7 \\rceil (3) = 2 + (2)(2) + (1)(3) = 2 + 4 + 3 = 9$。因此，$R_3^{(2)} = 9$。\n- **迭代 3：** $w_3 = 2 + \\lceil 9/5 \\rceil (2) + \\lceil 9/7 \\rceil (3) = 2 + (2)(2) + (2)(3) = 2 + 4 + 6 = 12$。因此，$R_3^{(3)} = 12$。\n- **迭代 4：** $w_4 = 2 + \\lceil 12/5 \\rceil (2) + \\lceil 12/7 \\rceil (3) = 2 + (3)(2) + (2)(3) = 2 + 6 + 6 = 14$。因此，$R_3^{(4)} = 14$。\n- **迭代 5：** $w_5 = 2 + \\lceil 14/5 \\rceil (2) + \\lceil 14/7 \\rceil (3) = 2 + (3)(2) + (2)(3) = 2 + 6 + 6 = 14$。因此，$R_3^{(5)} = 14$。\n\n由于 $R_3^{(5)} = R_3^{(4)}$，序列已经收敛。任务3的精确最坏情况响应时间是 $R_3 = 14$ 毫秒。\n\n为了评估可调度性，我们将响应时间与截止期进行比较。对于任务3，截止期是 $D_3 = T_3 = 12$ 毫秒。由于 $R_3 = 14 > T_3 = 12$，任务3在最坏情况下会错过其截止期。因此，该任务集在 RM 调度下是**不可调度**的。\n\n为完整起见，我们验证更高优先级任务的可调度性：\n- 对于任务1 ($hp(1) = \\emptyset$)：$R_1 = C_1 = 2$ 毫秒。由于 $R_1 = 2 \\le T_1 = 5$，任务1是可调度的。\n- 对于任务2 ($hp(2) = \\{1\\}$)：$R_2 = C_2 + \\lceil R_2/T_1 \\rceil C_1 = 3 + \\lceil R_2/5 \\rceil (2)$。迭代得出 $R_2^{(0)}=3 \\rightarrow R_2^{(1)}=5 \\rightarrow R_2^{(2)}=5$。因此，$R_2 = 5$ 毫秒。由于 $R_2 = 5 \\le T_2 = 7$，任务2是可调度的。\n尽管任务1和任务2是可调度的，但任务3的失败使得整个任务集在 RM 调度下不可调度。\n\n**第二部分：最早截止期优先 (EDF) 调度分析**\n\n在最早截止期优先 (EDF) 调度下，优先级是动态的。具有最早绝对截止期的作业总是被调度执行。对于单处理器上一组独立的、可抢占的、具有隐式截止期 ($D_i = T_i$) 的周期性任务，其可调度的充分必要条件是总处理器利用率 $U$ 不得超过1。\n$$U = \\sum_{i=1}^n \\frac{C_i}{T_i} \\le 1$$\n我们计算给定任务集的总利用率：\n$$U = \\frac{C_1}{T_1} + \\frac{C_2}{T_2} + \\frac{C_3}{T_3}$$\n$$U = \\frac{2}{5} + \\frac{3}{7} + \\frac{2}{12} = \\frac{2}{5} + \\frac{3}{7} + \\frac{1}{6}$$\n为了对这些分数求和，我们找到一个公分母，即 $5 \\times 7 \\times 6 = 210$：\n$$U = \\frac{2 \\times 42}{210} + \\frac{3 \\times 30}{210} + \\frac{1 \\times 35}{210} = \\frac{84 + 90 + 35}{210} = \\frac{209}{210}$$\n总处理器利用率为 $U = \\frac{209}{210}$。由于 $209  210$，我们有 $U  1$。可调度性条件得到满足。因此，该任务集在 EDF 调度下是**可调度**的。\n\n问题要求在 RM 调度下的最坏情况响应时间 $R_3$。如上计算，该值为14毫秒。", "answer": "$$\\boxed{14}$$", "id": "3675332"}, {"introduction": "当系统面临过载（即总处理器利用率超过 $1$）时，我们如何避免灾难性的崩溃？一个优秀的实时系统应该具备“优雅降级”的能力。这个练习将带你从分析转向设计，你需要为一个过载的系统制定一个降级策略，通过调整低优先级任务的周期来降低系统总负载，直至其满足 RM 调度的充分条件 ([@problem_id:3675321])。这个过程将让你体验真实的工程决策，学会如何运用调度理论来保证关键任务在极端压力下的可靠运行。", "problem": "一个单处理器、抢占式、固定优先级调度器使用速率单调 (RM) 策略，其中周期越短意味着优先级越高。考虑一个经典周期性任务模型下的硬实时周期性任务集，该任务集包含任务 $\\tau_{1}, \\tau_{2}, \\tau_{3}, \\tau_{4}$，其最坏情况执行时间 $C_{i}$ 和周期 $T_{i}$ 特征如下：$\\tau_{1}$ 的 $C_{1}=1$ 和 $T_{1}=4$，$\\tau_{2}$ 的 $C_{2}=1.5$ 和 $T_{2}=5$，$\\tau_{3}$ 的 $C_{3}=2$ 和 $T_{3}=6$，以及 $\\tau_{4}$ 的 $C_{4}=3$ 和 $T_{4}=8$。所有截止时间均等于其周期，所有任务都是独立的；抢占和上下文切换的开销可忽略不计。系统处于过载状态，即总处理器利用率超过 $1$。\n\n为实现优雅降级，仅允许两个优先级最低的任务（即周期最长的任务）以相同的方式降低其速率。具体来说，将同一个乘法因子 $s \\geq 1$ 应用于 $\\tau_{3}$ 和 $\\tau_{4}$ 的周期，使得降级后的任务集使用变换后的周期 $T_{3}^{\\prime}=s\\,T_{3}$ 和 $T_{4}^{\\prime}=s\\,T_{4}$，而 $C_{3}$ 和 $C_{4}$ 保持不变。这对应于按比例减慢或等效地稀疏化这些任务的作业流，从而平均而言，只有其原始作业的 $1/s$ 部分被执行。\n\n仅使用利用率的基本定义和广泛接受的RM充分可调度性条件（该条件保证在所有可能的任务释放相对相位下都正确），确定最小缩放因子 $s$，以保证降级后的任务集在单处理器上采用速率单调调度是可调度的。将您的答案四舍五入到四位有效数字。最终答案以无量纲数表示。", "solution": "首先对问题进行验证，以确保其具有科学依据、良构性和客观性。\n\n### 步骤 1：提取已知条件\n- **调度器**：单处理器、抢占式、固定优先级。\n- **策略**：速率单调 (RM)，其中优先级与周期成反比。\n- **任务集**：$\\tau_{1}, \\tau_{2}, \\tau_{3}, \\tau_{4}$。\n- **任务参数**：\n    - $\\tau_{1}$：最坏情况执行时间 $C_{1}=1$，周期 $T_{1}=4$。\n    - $\\tau_{2}$：最坏情况执行时间 $C_{2}=1.5$，周期 $T_{2}=5$。\n    - $\\tau_{3}$：最坏情况执行时间 $C_{3}=2$，周期 $T_{3}=6$。\n    - $\\tau_{4}$：最坏情况执行时间 $C_{4}=3$，周期 $T_{4}=8$。\n- **约束条件**：\n    - 截止时间等于周期 ($D_i = T_i$)。\n    - 任务是独立的。\n    - 开销（抢占、上下文切换）可忽略不计。\n    - 初始系统过载（总利用率 $ 1$）。\n- **降级规则**：\n    - 两个优先级最低的任务（$\\tau_3$ 和 $\\tau_4$）的周期按因子 $s \\ge 1$ 进行缩放。\n    - 新周期：$T_{3}^{\\prime}=s T_{3}$ 和 $T_{4}^{\\prime}=s T_{4}$。\n    - 执行时间 $C_{3}$ 和 $C_{4}$ 保持不变。\n- **目标**：使用充分可调度性条件，确定保证降级后任务集在 RM 调度下可调度的最小缩放因子 $s$。\n- **最终答案精度**：四舍五入到四位有效数字。\n\n### 步骤 2：使用提取的已知条件进行验证\n- **科学合理性**：该问题根植于已建立的实时系统理论和速率单调调度，这是该领域的基石。所使用的所有概念——处理器利用率、可调度性测试和优雅降级——都是标准且科学有效的。\n- **良构性**：该问题提供了确定唯一解所需的所有必要参数和约束。目标陈述清晰，且求解路径受到使用“充分可调度性条件”这一要求的限制，这指向一个标准测试。\n- **客观性**：语言精确且无偏见，使用了计算机科学的标准术语。\n- **完整性与一致性**：所提供的数据是完整且一致的。初始过载的论断可以被验证。没有矛盾之处。\n\n### 步骤 3：结论与行动\n问题有效。将提供完整的解法。\n\n***\n\n该问题要求找到最小的缩放因子 $s$，以使任务集在速率单调 (RM) 调度策略下是可调度的。\n\n首先，我们确定任务的优先级。在 RM 策略下，优先级与周期 $T_i$ 成反比。初始任务周期为 $T_{1}=4$、$T_{2}=5$、$T_{3}=6$ 和 $T_{4}=8$。因此，优先级顺序为 $\\tau_{1}  \\tau_{2}  \\tau_{3}  \\tau_{4}$。\n\n问题指出初始系统是过载的。我们可以通过计算总处理器利用率 $U$ 来验证这一点，$U$ 是各个任务利用率 $U_i = C_i / T_i$ 的总和。\n$$ U_{initial} = \\sum_{i=1}^{4} \\frac{C_i}{T_i} = \\frac{1}{4} + \\frac{1.5}{5} + \\frac{2}{6} + \\frac{3}{8} $$\n$$ U_{initial} = 0.25 + 0.3 + \\frac{1}{3} + 0.375 = 0.925 + 0.333\\dots \\approx 1.2583 $$\n由于 $U_{initial}  1$，系统确实过载且不可调度。\n\n为了管理过载，对两个优先级最低的任务 $\\tau_{3}$ 和 $\\tau_{4}$ 应用了优雅降级。它们的周期被一个因子 $s \\ge 1$ 缩放，得到一个新的、降级后的任务集：\n- $\\tau_{1}$：$C_{1}=1$, $T_{1}=4$\n- $\\tau_{2}$：$C_{2}=1.5$, $T_{2}=5$\n- $\\tau_{3}^{\\prime}$：$C_{3}=2$, $T_{3}^{\\prime}=s T_{3} = 6s$\n- $\\tau_{4}^{\\prime}$：$C_{4}=3$, $T_{4}^{\\prime}=s T_{4} = 8s$\n\n由于 $s \\ge 1$，新的周期 $T_3'$ 和 $T_4'$ 将大于或等于其原始值，从而保持了优先级顺序 $\\tau_1  \\tau_2  \\tau_3'  \\tau_4'$。任务总数保持为 $n=4$。\n\n问题要求使用一个“广泛接受的充分可调度性条件”。对于 RM 而言，最基本和最广为人知的此类条件是 Liu and Layland 利用率上界。对于一组 $n$ 个截止时间等于周期的独立周期性任务，如果其总利用率 $U$ 满足以下条件，则该任务集保证是可调度的：\n$$ U \\le n(2^{1/n} - 1) $$\n这是一个充分条件，意味着如果通过测试，任务集绝对是可调度的。如果未通过，任务集可能可调度也可能不可调度。\n\n对于我们这个有 $n=4$ 个任务的系统，Liu and Layland 上界为：\n$$ U_{LL}(4) = 4(2^{1/4} - 1) $$\n降级后任务集的利用率，记作 $U(s)$，为：\n$$ U(s) = \\frac{C_1}{T_1} + \\frac{C_2}{T_2} + \\frac{C_3}{T_3'} + \\frac{C_4}{T_4'} $$\n$$ U(s) = \\frac{1}{4} + \\frac{1.5}{5} + \\frac{2}{6s} + \\frac{3}{8s} $$\n我们可以将固定速率任务和降级任务的利用率分开：\n$$ U(s) = \\left(\\frac{1}{4} + \\frac{1.5}{5}\\right) + \\left(\\frac{2}{6} + \\frac{3}{8}\\right)\\frac{1}{s} $$\n$$ U(s) = (0.25 + 0.3) + \\left(\\frac{1}{3} + \\frac{3}{8}\\right)\\frac{1}{s} $$\n合并降级部分的分数：\n$$ \\frac{1}{3} + \\frac{3}{8} = \\frac{8}{24} + \\frac{9}{24} = \\frac{17}{24} $$\n所以，总利用率为：\n$$ U(s) = 0.55 + \\frac{17}{24s} $$\n为了找到保证可调度的最小 $s$ 值，我们将总利用率设为等于 Liu and Layland 上界：\n$$ U(s) = U_{LL}(4) $$\n$$ 0.55 + \\frac{17}{24s} = 4(2^{1/4} - 1) $$\n现在，我们求解 $s$：\n$$ \\frac{17}{24s} = 4(2^{1/4} - 1) - 0.55 $$\n$$ s = \\frac{17/24}{4(2^{1/4} - 1) - 0.55} $$\n让我们计算其数值。\nLiu and Layland 上界为：\n$$ 4(2^{1/4} - 1) \\approx 4(1.1892071 - 1) = 4(0.1892071) \\approx 0.7568284 $$\n将此值代入 $s$ 的方程中：\n$$ s \\approx \\frac{17/24}{0.7568284 - 0.55} = \\frac{0.7083333\\dots}{0.2068284} $$\n$$ s \\approx 3.424754 $$\n问题要求答案四舍五入到四位有效数字。\n$$ s \\approx 3.425 $$\n这是在 Liu and Layland 充分条件下，保证降级后任务集可调度的最小缩放因子。", "answer": "$$\\boxed{3.425}$$", "id": "3675321"}]}