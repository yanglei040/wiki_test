{"hands_on_practices": [{"introduction": "移动操作系统电源管理的核心技术之一是动态电压与频率调整（DVFS）。该技术通过调节CPU的工作频率和电压，在性能和能耗之间取得平衡。本练习 [@problem_id:3670020] 引导你构建一个简化的数学模型，来量化这一权衡：一方面，降低频率可以显著减少能耗；另一方面，这会延长任务执行时间，可能导致错过最后期限而影响用户体验。通过求解这个成本函数，你将亲身体会如何为延迟敏感型任务找到最佳的CPU频率，从而最小化总成本（能耗与延迟惩罚之和）。", "problem": "移动操作系统的任务调度器通过动态电压和频率缩放 (DVFS) 控制中央处理器 (CPU) 的频率，该技术以性能换取节能。考虑一个智能手机片上系统 (SoC) 上的单个延迟敏感的CPU密集型任务。该任务需要 $W$ 个CPU周期，并且从其释放时间算起有 $d$ 秒的相对截止时间。调度器必须在任务持续时间内选择一个恒定的CPU频率 $f$（单位为赫兹），以平衡能量消耗和尾延迟。\n\n使用以下基本原理来建立能量模型：\n\n- 对于互补金属氧化物半导体 (CMOS) 逻辑电路，动态功率 $P$ 的尺度关系为 $P = \\alpha C V^{2} f$，其中 $\\alpha$ 是活动因子，$C$ 是有效开关电容，$V$ 是电源电压，$f$ 是时钟频率。\n- 在感兴趣的DVFS工作区域内，假设 $V$ 与 $f$ 近似成正比，即 $V = \\theta f$，其中 $\\theta  0$ 是某个比例常数。\n- 在恒定频率下，任务的执行时间为 $t = \\frac{W}{f}$。\n\n基于这些原理，通过消去 $V$ 并将能量表示为 $f$ 和 $W$ 的函数，定义在频率 $f$ 下完成 $W$ 个周期所需的最小能量曲线 $E(f)$，并引入一个常数 $\\kappa \\equiv \\alpha C \\theta^{2}$ 来整合设备参数。使用延迟 $L(f) \\equiv \\max\\{0, \\frac{W}{f} - d\\}$ 和一个带有权重 $\\beta  0$（单位为焦耳/秒）的线性惩罚 $\\beta L(f)$ 来为用户感知的尾延迟建模，因此调度器的目标是总成本\n$$\nJ(f) = E(f) + \\beta L(f).\n$$\n\n假设设备参数和工作负载使得最优频率 $f$ 位于任务在截止时间后稍稍完成的低功耗区间，具体来说\n$$\n\\left(\\frac{\\beta}{2\\kappa}\\right)^{\\frac{1}{3}}  \\frac{W}{d}.\n$$\n\n在此假设下，确定使 $J(f)$ 最小化的频率 $f^{\\star}$ 的闭式表达式。最终答案 $f^{\\star}$ 需用赫兹 (Hz) 表示。不需要四舍五入，且你的答案必须是单一的解析表达式。", "solution": "该问题要求找到使总成本函数 $J(f) = E(f) + \\beta L(f)$ 最小化的CPU频率 $f^{\\star}$。我们将首先推导成本函数 $J(f)$ 的显式表达式，然后使用微积分来找到最小化该函数的频率。\n\n首先，我们推导能量曲线 $E(f)$。任务消耗的能量 $E$ 是动态功率 $P$ 和执行时间 $t$ 的乘积。\n$$\nE(f) = P \\cdot t\n$$\n问题提供了以下关系：\n1. 动态功率为 $P = \\alpha C V^{2} f$。\n2. 电源电压 $V$ 与频率 $f$ 成正比，即 $V = \\theta f$。\n3. 对于需要 $W$ 个周期的任务，其执行时间为 $t = \\frac{W}{f}$。\n\n将 $P$ 和 $t$ 的表达式代入能量方程，我们得到：\n$$\nE(f) = (\\alpha C V^{2} f) \\left(\\frac{W}{f}\\right) = \\alpha C V^{2} W\n$$\n现在，我们代入电压-频率关系 $V = \\theta f$：\n$$\nE(f) = \\alpha C (\\theta f)^{2} W = \\alpha C \\theta^{2} f^{2} W\n$$\n问题中定义了一个常数 $\\kappa \\equiv \\alpha C \\theta^{2}$ 来整合设备特定参数。使用这个常数，能量曲线简化为：\n$$\nE(f) = \\kappa W f^{2}\n$$\n此表达式表明，完成任务所需的能量与频率的平方成正比。\n\n接下来，我们建立完整的成本函数 $J(f)$。成本是能量 $E(f)$ 和延迟惩罚 $\\beta L(f)$ 的总和。延迟 $L(f)$ 定义为 $L(f) \\equiv \\max\\{0, \\frac{W}{f} - d\\}$，其中 $t = \\frac{W}{f}$ 是执行时间，$d$ 是截止时间。\n因此，总成本函数为：\n$$\nJ(f) = \\kappa W f^{2} + \\beta \\max\\left\\{0, \\frac{W}{f} - d\\right\\}\n$$\n这个函数是分段的。函数的形式取决于执行时间 $\\frac{W}{f}$ 是否大于截止时间 $d$。\n情况1：任务满足或早于截止时间完成。这发生在 $\\frac{W}{f} \\le d$ 时，对应于 $f \\ge \\frac{W}{d}$。在这种情况下，$\\frac{W}{f} - d \\le 0$，所以 $\\max\\{0, \\frac{W}{f} - d\\} = 0$。成本函数是：\n$$\nJ(f) = \\kappa W f^{2} \\quad \\text{for } f \\ge \\frac{W}{d}\n$$\n情况2：任务错过截止时间。这发生在 $\\frac{W}{f}  d$ 时，对应于 $f  \\frac{W}{d}$。在这种情况下，$\\frac{W}{f} - d  0$，所以 $\\max\\{0, \\frac{W}{f} - d\\} = \\frac{W}{f} - d$。成本函数是：\n$$\nJ(f) = \\kappa W f^{2} + \\beta \\left(\\frac{W}{f} - d\\right) \\quad \\text{for } f  \\frac{W}{d}\n$$\n问题陈述包含一个关键假设：最优频率 $f^{\\star}$ 位于任务在截止时间后完成的区间内。这意味着 $J(f)$ 的最小值出现在频率 $f^{\\star}  \\frac{W}{d}$ 处。因此，我们需要找到情况2中函数的最小值。我们将此函数表示为 $J_{2}(f)$：\n$$\nJ_{2}(f) = \\kappa W f^{2} + \\frac{\\beta W}{f} - \\beta d\n$$\n为了找到使 $J_{2}(f)$ 最小的频率，我们计算它关于 $f$ 的导数并将其设为零。\n$$\n\\frac{dJ_{2}}{df} = \\frac{d}{df} \\left( \\kappa W f^{2} + \\beta W f^{-1} - \\beta d \\right) = 2\\kappa W f - \\beta W f^{-2}\n$$\n将导数设为零以找到临界点 $f_{c}$：\n$$\n2\\kappa W f_{c} - \\frac{\\beta W}{f_{c}^{2}} = 0\n$$\n由于 $f$ 必须为正，我们可以乘以 $f_{c}^{2}$：\n$$\n2\\kappa W f_{c}^{3} - \\beta W = 0\n$$\n$$\n2\\kappa W f_{c}^{3} = \\beta W\n$$\n假设 $W  0$，我们可以除以 $W$：\n$$\n2\\kappa f_{c}^{3} = \\beta\n$$\n$$\nf_{c}^{3} = \\frac{\\beta}{2\\kappa}\n$$\n求解 $f_{c}$：\n$$\nf_{c} = \\left(\\frac{\\beta}{2\\kappa}\\right)^{\\frac{1}{3}}\n$$\n为确认这是一个最小值，我们检查二阶导数：\n$$\n\\frac{d^{2}J_{2}}{df^{2}} = \\frac{d}{df} \\left( 2\\kappa W f - \\beta W f^{-2} \\right) = 2\\kappa W + 2\\beta W f^{-3} = 2\\kappa W + \\frac{2\\beta W}{f^{3}}\n$$\n由于 $\\kappa$、$W$ 和 $\\beta$ 都为正，且 $f0$，二阶导数 $\\frac{d^{2}J_{2}}{df^{2}}$ 总是正的。这证实了 $J_{2}(f)$ 是一个凸函数，且临界点 $f_{c}$ 是其唯一的最小值。\n\n最优频率 $f^{\\star}$ 就是这个临界点 $f_{c}$，前提是它位于 $J_{2}(f)$ 是正确成本表达式的定义域内，即 $f_{c}  \\frac{W}{d}$。问题恰好将此作为假设条件给出：\n$$\n\\left(\\frac{\\beta}{2\\kappa}\\right)^{\\frac{1}{3}}  \\frac{W}{d}\n$$\n这证实了 $J_{2}(f)$ 的最小值出现在区间 $(0, \\frac{W}{d})$ 内。对于 $f \\ge \\frac{W}{d}$，成本函数为 $J(f) = \\kappa W f^2$，这是一个严格递增的函数。因此，总成本函数 $J(f)$ 的全局最小值必须是在 $f  \\frac{W}{d}$ 区域中找到的最小值。\n\n因此，最优频率 $f^{\\star}$ 是：\n$$\nf^{\\star} = \\left(\\frac{\\beta}{2\\kappa}\\right)^{\\frac{1}{3}}\n$$\n这就是最小化总成本的频率的闭式表达式。", "answer": "$$\\boxed{\\left(\\frac{\\beta}{2\\kappa}\\right)^{\\frac{1}{3}}}$$", "id": "3670020"}, {"introduction": "除了CPU，存储I/O也是移动设备上的一个主要能耗来源。当发生缺页中断时，操作系统需要从闪存中读取页面，这个过程涉及昂贵的设备唤醒和数据传输。本练习 [@problem_id:3669971] 探讨了一种常见的优化策略——预取（prefetching），即在处理一次缺页中断时，推测性地读取多个相关页面。通过建立一个包含唤醒、传输和CPU处理成本的能量模型，你将运用期望值的概念来分析预取策略的效能，并量化其与按需分页相比的节能潜力或额外开销。", "problem": "智能手机上的移动操作系统使用分页技术，按需将代码和数据页从非易失性闪存加载到主内存中。考虑以下能量模型，该模型捕捉了与页面错误和预取相关的存储和中央处理器（CPU）成本：\n\n- 当发生页面错误且系统执行单页获取（无预取）时，能量分量包括：\n  - 设备唤醒和拖尾转换成本为 $E_{\\mathrm{w}}$ 毫焦耳（mJ），用于启动存储接口并在传输期间保持其活动状态。\n  - 每页存储传输成本为 $E_{\\mathrm{t}}$ mJ。\n  - CPU 错误处理成本为 $E_{\\mathrm{c}}$ mJ。\n\n- 当操作系统执行预取时，它会在每次页面错误时获取 $k$ 个页面：发生错误的页面加上由内核预读策略推断出的 $k-1$ 个额外页面。在这种情况下，对于该事件：\n  - 存储唤醒和拖尾成本支付一次（$E_{\\mathrm{w}}$）。\n  - 每页传输成本支付 $k$ 次（$k E_{\\mathrm{t}}$）。\n  - 针对错误页面的 CPU 错误处理成本支付一次（$E_{\\mathrm{c}}$）。\n  - 此外，对于除错误页面外的每个额外预取页面，CPU 在簿记和页表更新中消耗 $E_{\\mathrm{m}}$ mJ，总计为 $(k-1) E_{\\mathrm{m}}$。\n\n假设页面大小统一且每页传输能量相同。对于除错误页面外的每个额外预取页面，其在被换出前实际被访问的概率为 $1 - p$，与其他页面无关，其中 $p \\in [0,1]$ 是预取的未命中概率（即预取页面从未被使用的概率）。所描述的所有随机事件都是独立的，并且您可以假设工作负载很大，因此期望值代表长期平均值。您还可以假设，如果一个预取页面后来被访问，它不会产生额外的存储或 CPU 能量，因为它已经驻留在内存中。\n\n仅使用期望的线性性和独立伯努利试验的定义，完成以下任务：\n\n1. 推导在单页按需分页下，每个成功服务的页面（即每次满足的实际页面访问）的期望能量，记为 $E_{\\mathrm{miss}}$。\n2. 推导在预取策略下，每个成功服务的页面的期望能量，记为 $E_{\\mathrm{prefetch}}$，方法是将一次预取事件的总能量分摊到它所服务的期望有用页面数上。\n\n然后，对于参数值 $E_{\\mathrm{w}} = 4$ mJ，$E_{\\mathrm{t}} = 0.5$ mJ，$E_{\\mathrm{c}} = 0.2$ mJ，$E_{\\mathrm{m}} = 0.05$ mJ，$k = 4$ 和 $p = 0.3$，计算 $E_{\\mathrm{prefetch}} - E_{\\mathrm{miss}}$ 的数值（单位为 mJ）。将您的答案四舍五入到四位有效数字。最终结果以 mJ 表示。最终答案必须是单个实数。", "solution": "该问题要求我们为两种分页策略推导每个成功服务的页面的期望能量，然后计算它们的差值。\n\n**1. 推导 $E_{\\mathrm{miss}}$ (按需分页)**\n\n在按需分页策略中，一次缺页中断恰好导致获取一个页面。根据缺页中断的定义，这个页面是程序执行所必需的，因此它是一个“成功服务的页面”。该事件的总能耗是唤醒成本、传输一个页面的成本以及CPU处理成本的总和。\n\n$$\nE_{\\text{total, miss}} = E_{\\mathrm{w}} + E_{\\mathrm{t}} + E_{\\mathrm{c}}\n$$\n\n由于此事件恰好服务一个有用页面，因此每个服务页面的期望能量就是该事件的总能量：\n\n$$\nE_{\\mathrm{miss}} = \\frac{E_{\\text{total, miss}}}{1} = E_{\\mathrm{w}} + E_{\\mathrm{t}} + E_{\\mathrm{c}}\n$$\n\n**2. 推导 $E_{\\mathrm{prefetch}}$ (预取策略)**\n\n在预取策略中，一次缺页中断会触发一个“预取事件”，在此期间会获取 $k$ 个页面。为了找到每个成功服务的页面的分摊能量成本，我们需要计算一次预取事件的总能量，并将其除以该事件中服务的*期望有用页面数*。\n\n首先，计算一次预取事件的总能量 $E_{\\text{episode}}$。这是单次唤醒成本、所有 $k$ 个页面的传输成本、单次CPU缺页处理成本以及为 $k-1$ 个额外预取页面进行簿记的成本的总和。\n\n$$\nE_{\\text{episode}} = E_{\\mathrm{w}} + k E_{\\mathrm{t}} + E_{\\mathrm{c}} + (k-1) E_{\\mathrm{m}}\n$$\n\n接下来，计算一次事件中的期望有用页面数 $E[N_{\\text{useful}}]$。获取的 $k$ 个页面包括：\n-   导致中断的页面，它总是有用的。它对有用页面数的贡献为 1。\n-   额外的 $k-1$ 个预取页面。\n\n这 $k-1$ 个预取页面中的每一个有 $(1-p)$ 的概率是“有用的”（即在被换出前被访问）。根据伯努利试验的期望定义，在 $k-1$ 个预取页面中，期望的有用页面数为 $(k-1)(1-p)$。\n\n利用期望的线性性质，每次事件的期望总有用页面数是总是被使用的中断页面和期望有用的预取页面数之和：\n\n$$\nE[N_{\\text{useful}}] = 1 + (k-1)(1-p)\n$$\n\n每个成功服务的页面的期望能量 $E_{\\mathrm{prefetch}}$ 是事件的总能量除以期望的有用页面数。\n\n$$\nE_{\\mathrm{prefetch}} = \\frac{E_{\\text{episode}}}{E[N_{\\text{useful}}]} = \\frac{E_{\\mathrm{w}} + k E_{\\mathrm{t}} + E_{\\mathrm{c}} + (k-1) E_{\\mathrm{m}}}{1 + (k-1)(1-p)}\n$$\n\n**3. 数值计算**\n\n现在我们代入给定的值：$E_{\\mathrm{w}} = 4$ mJ, $E_{\\mathrm{t}} = 0.5$ mJ, $E_{\\mathrm{c}} = 0.2$ mJ, $E_{\\mathrm{m}} = 0.05$ mJ, $k = 4$ 和 $p = 0.3$。\n\n首先，计算 $E_{\\mathrm{miss}}$：\n$$\nE_{\\mathrm{miss}} = 4 + 0.5 + 0.2 = 4.7 \\text{ mJ}\n$$\n\n接下来，计算 $E_{\\mathrm{prefetch}}$。\n分子（事件的总能量）为：\n$$\nE_{\\text{episode}} = 4 + 4(0.5) + 0.2 + (4-1)(0.05) = 4 + 2 + 0.2 + 3(0.05) = 6.2 + 0.15 = 6.35 \\text{ mJ}\n$$\n分母（期望的有用页面数）为：\n$$\nE[N_{\\text{useful}}] = 1 + (4-1)(1 - 0.3) = 1 + 3(0.7) = 1 + 2.1 = 3.1\n$$\n因此，$E_{\\mathrm{prefetch}}$ 为：\n$$\nE_{\\mathrm{prefetch}} = \\frac{6.35}{3.1} \\approx 2.048387096... \\text{ mJ}\n$$\n\n最后，我们计算差值 $E_{\\mathrm{prefetch}} - E_{\\mathrm{miss}}$：\n$$\nE_{\\mathrm{prefetch}} - E_{\\mathrm{miss}} \\approx 2.048387096... - 4.7 = -2.651612903... \\text{ mJ}\n$$\n\n将结果四舍五入到四位有效数字，得到 -2.652。负值表示，对于这组参数，就每个成功服务的页面而言，预取策略比按需分页更节能。", "answer": "$$\\boxed{-2.652}$$", "id": "3669971"}, {"introduction": "现代移动操作系统通过智能的“打盹”（Doze）模式，在设备静止时进入深度睡眠以最大化节电。然而，系统必须能够可靠地检测到用户交互（如拿起设备）以快速唤醒。本练习 [@problem_id:3669962] 模拟了一个基于加速度计数据熵的自适应唤醒机制。你将基于高斯分布模型，计算在设备静止时因传感器数据波动而导致“错误唤醒”的概率，并进一步量化这种检测机制本身以及由其误判所带来的总能量开销。", "problem": "一个移动操作系统 (OS) 实现了一种自适应低功耗“Doze”模式，该模式依赖于从设备上传感器流进行的运动推断。该操作系统计算一个固定时长窗口内的加速度计幅值的香农熵 $H$，以决定何时退出或进入 Doze 模式。在 Doze 模式下，操作系统每隔 $\\tau$ 秒进行一次周期性检查，通过收集一个持续时间为 $w$ 秒的窗口并计算 $H$。退出规则是：如果在一次 Doze 检查中 $H  T$，操作系统会立即退出 Doze 模式，进入一个低延迟的活动状态；否则，它将保持在 Doze 模式。假设采用以下科学上现实的模型和参数：\n\n- 在静止条件下，熵 $H$ 是一个高斯随机变量，其分布为 $H \\sim \\mathcal{N}(\\mu_{0}, \\sigma_{0}^{2})$，参数为 $\\mu_{0} = 1.0$ 比特，$\\sigma_{0} = 0.15$ 比特。在运动条件下，$H \\sim \\mathcal{N}(\\mu_{1}, \\sigma_{1}^{2})$，其参数为 $\\mu_{1} = 1.6$ 比特，$\\sigma_{1} = 0.20$ 比特。检测阈值为 $T = 1.3$ 比特。\n- Doze 检查周期和窗口持续时间分别为 $\\tau = 30$ s 和 $w = 5$ s。当设备静止时，各次检查的窗口结果可视为相互独立。\n- 设备在 $p = 0.80$ 的时间比例内处于静止状态，在 $1 - p$ 的时间比例内处于运动状态。周期性检查仅在 Doze 模式下（即静止时）执行。\n- 能耗成本：计算一次 Doze 检查（收集 $w$ 秒的窗口数据并计算 $H$）消耗 $E_{\\text{check}} = 0.06$ J。如果操作系统因错误退出（即设备静止但 $H  T$）而退出 Doze 模式，唤醒转换开销为 $E_{\\text{wake}} = 1.5$ J，并且设备在重新进入 Doze 模式前会以 $P_{\\text{active}} = 0.8$ W 的恒定功率保持活动状态 $L = 10$ s（在此验证间隔期间忽略其他流量或应用活动）。\n\n从以下核心定义出发：(i) 能量是功率对时间的积分，(ii) 稀有事件的期望计数等于试验次数乘以事件概率，请从第一性原理推导一个表达式，用于计算每小时归因于 Doze 检测流程和虚假唤醒的预期总能耗开销。总开销是静止时进行周期性检查所消耗的能量与静止期间因错误退出所消耗的能量之和。最终答案以焦耳（joules）为单位表示，并四舍五入到四位有效数字。在获得最终舍入答案的过程中，不应使用任何中间舍入值。", "solution": "该问题描述了一种自适应 Doze 机制，它在设备静止时执行周期性检查。每小时的预期能耗开销必须考虑两个部分：(i) 执行检查的能耗，以及 (ii) 当设备静止但熵 $H$ 超过阈值 $T$ 时，因错误退出 Doze 模式而产生的能耗。\n\n我们从以下基本原理出发：\n\n1. 能量等于功率对时间的积分。对于在时间 $t$ 内的恒定功率 $P$，能量为 $E = P t$。\n2. 对于事件概率为 $q$ 的独立伯努利试验，在 $N$ 次试验中事件发生的期望次数为 $N q$。\n3. 一个服从 $X \\sim \\mathcal{N}(\\mu, \\sigma^{2})$ 分布的高斯随机变量，其概率密度函数为 $f_{X}(x) = \\frac{1}{\\sigma \\sqrt{2 \\pi}} \\exp\\!\\left(-\\frac{(x - \\mu)^{2}}{2 \\sigma^{2}}\\right)$。超过阈值 $T$ 的尾部概率为\n$$\n\\mathbb{P}(X  T) = \\int_{T}^{\\infty} \\frac{1}{\\sigma \\sqrt{2 \\pi}} \\exp\\!\\left(-\\frac{(x - \\mu)^{2}}{2 \\sigma^{2}}\\right) \\, dx = \\frac{1}{2} \\operatorname{erfc}\\!\\left(\\frac{T - \\mu}{\\sigma \\sqrt{2}}\\right),\n$$\n其中 $\\operatorname{erfc}$ 是互补误差函数。\n\n我们首先量化每小时的 Doze 检查次数。设设备静止的时间比例为 $p$。操作系统仅在设备静止时以周期 $\\tau$ 执行检查。因此，每小时的预期检查次数为\n$$\nN_{\\text{checks}} = \\frac{p \\times 3600}{\\tau}.\n$$\n当 $p = 0.80$ 且 $\\tau = 30$ s 时，\n$$\nN_{\\text{checks}} = \\frac{0.80 \\times 3600}{30} = \\frac{2880}{30} = 96.\n$$\n\n接下来，我们计算每次静止检查的错误退出概率。在静止条件下，$H \\sim \\mathcal{N}(\\mu_{0}, \\sigma_{0}^{2})$，其中 $\\mu_{0} = 1.0$ 比特，$\\sigma_{0} = 0.15$ 比特。当 $H  T$ 时触发退出规则，其中 $T = 1.3$ 比特。标准化变量为\n$$\nz = \\frac{T - \\mu_{0}}{\\sigma_{0}} = \\frac{1.3 - 1.0}{0.15} = \\frac{0.3}{0.15} = 2.0.\n$$\n因此，每次检查的错误退出概率是在 $z = 2$ 处的标准正态分布的上尾概率，即\n$$\nq_{\\text{fp}} = \\mathbb{P}(H  T \\mid \\text{stationary}) = \\frac{1}{2} \\operatorname{erfc}\\!\\left(\\frac{z}{\\sqrt{2}}\\right) = \\frac{1}{2} \\operatorname{erfc}\\!\\left(\\frac{2}{\\sqrt{2}}\\right) = \\frac{1}{2} \\operatorname{erfc}\\!\\left(\\sqrt{2}\\right).\n$$\n数值上，$\\operatorname{erfc}\\!\\left(\\sqrt{2}\\right) \\approx 0.045500263896$，所以\n$$\nq_{\\text{fp}} \\approx 0.022750131948.\n$$\n\n那么每小时的预期错误退出次数为\n$$\nN_{\\text{fp}} = N_{\\text{checks}} \\times q_{\\text{fp}} \\approx 96 \\times 0.022750131948 \\approx 2.1840126624.\n$$\n\n我们现在计算能耗的组成部分：\n\n- 每小时的检查能耗：\n$$\nE_{\\text{checks/hour}} = N_{\\text{checks}} \\times E_{\\text{check}} = 96 \\times 0.06 = 5.76 \\text{ J}.\n$$\n\n- 每次错误退出的能耗：唤醒转换能耗为 $E_{\\text{wake}}$，活动验证间隔以恒定功率 $P_{\\text{active}}$ 持续时间 $L$，所以\n$$\nE_{\\text{per-false-exit}} = E_{\\text{wake}} + P_{\\text{active}} \\times L.\n$$\n当 $E_{\\text{wake}} = 1.5$ J，$P_{\\text{active}} = 0.8$ W，$L = 10$ s 时，\n$$\nE_{\\text{per-false-exit}} = 1.5 + 0.8 \\times 10 = 1.5 + 8.0 = 9.5 \\text{ J}.\n$$\n因此，每小时的错误退出能耗为\n$$\nE_{\\text{fp/hour}} = N_{\\text{fp}} \\times E_{\\text{per-false-exit}} \\approx 2.1840126624 \\times 9.5 \\approx 20.7481202928 \\text{ J}.\n$$\n\n将这两个部分相加，得到每小时的预期总能耗开销：\n$$\nE_{\\text{total/hour}} = E_{\\text{checks/hour}} + E_{\\text{fp/hour}} \\approx 5.76 + 20.7481202928 = 26.5081202928 \\text{ J}.\n$$\n\n四舍五入到四位有效数字，最终结果是\n$$\n26.51 \\text{ J}.\n$$\n\n因此，在给定参数下，归因于自适应 Doze 检测和错误退出的每小时预期总能耗开销为 $26.51$ 焦耳（四舍五入到四位有效数字）。", "answer": "$$\\boxed{26.51}$$", "id": "3669962"}]}