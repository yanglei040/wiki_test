{"hands_on_practices": [{"introduction": "我们已经理论上了解了先来先服务（FCFS）调度算法可能导致的“护航效应”，但这个问题的严重性在实践中究竟如何体现？通过将 FCFS 与更优的调度算法（如最短剩余处理时间优先，SRPT）进行对比，我们可以精确地量化短作业所遭受的性能损失。这项练习将引导你完成一次详细的模拟计算，让你对护航效应的实际影响及其量级有一个具体而深刻的认识 [@problem_id:3643765]。", "problem": "考虑一个单处理器系统，其上下文切换开销可忽略不计，并支持抢占。调度程序必须处理一个由八个独立作业组成的跟踪驱动工作负载，这些作业的到达时间和服務需求（也称为CPU突发时间）是已知的。这些作业是：\n- 作业 $J_{1}$：到达时间 $0$，服务需求 $20$。\n- 作业 $J_{2}$：到达时间 $1$，服务需求 $1$。\n- 作业 $J_{3}$：到达时间 $2$，服务需求 $2$。\n- 作业 $J_{4}$：到达时间 $3$，服务需求 $1$。\n- 作业 $J_{5}$：到达时间 $4$，服务需求 $3$。\n- 作业 $J_{6}$：到达时间 $10$，服务需求 $1$。\n- 作业 $J_{7}$：到达时间 $10.5$，服务需求 $4$。\n- 作业 $J_{8}$：到达时间 $11$，服务需求 $1$。\n\n您将比较两种调度策略：\n- 先来先服务（FCFS）：非抢占式，作业按到达时间的非递减顺序进行服务。\n- 最短剩余处理时间（SRPT）：抢占式，在任何时刻，调度剩余处理时间最短的作业；当时间相同时，优先选择当前正在运行的作业。\n\n使用以下来自操作系统和排队论的基本定义：\n- 作业 $i$ 的完成时间 $C_{i}$ 是指作业 $i$ 完成服务的时刻。\n- 作业 $i$ 的流转时间（也称为周转时间）$F_{i}$ 是 $F_{i} = C_{i} - A_{i}$，其中 $A_{i}$ 是到达时间。\n- 作业 $i$ 的减速率（也称为伸展率）$S_{i}$ 是 $S_{i} = \\frac{F_{i}}{B_{i}}$，其中 $B_{i}$ 是作业 $i$ 的服务需求。\n\n将服务需求 $B_{i} \\leq 2$ 的作业定义为短作业。设 $\\overline{S}_{\\text{short}}^{\\text{FCFS}}$ 为先来先服务策略下短作业的平均减速率，设 $\\overline{S}_{\\text{short}}^{\\text{SRPT}}$ 为最短剩余处理时间策略下短作业的平均减速率。短作业减速因子 $\\Phi$ 定义为对于短作业集合，FCFS相对于SRPT所导致的平均减速率的乘法增长：\n$$\n\\Phi \\equiv \\frac{\\overline{S}_{\\text{short}}^{\\text{FCFS}}}{\\overline{S}_{\\text{short}}^{\\text{SRPT}}}.\n$$\n\n仅根据上述定义（不使用额外公式），计算给定轨迹的 $\\Phi$ 值，并根据护航效应（一种长作业在队列头部导致其后一系列等待作业排队的现象）解释其值。将您的最终答案四舍五入到四位有效数字。最终答案不需要单位。", "solution": "该问题要求计算短作业减速因子 $\\Phi$，该因子用于比较先来先服务（FCFS）和最短剩余处理时间（SRPT）调度策略在给定作业集上的性能。分析过程分为四个阶段：(1) 识别短作业子集，(2) 模拟FCFS下的工作负载以计算短作业的平均减速率，(3) 模拟SRPT下的工作负载以计算短作业的平均减速率，以及 (4) 计算比率 $\\Phi$ 并解释其值。\n\n首先，我们识别短作业集，定义为服务需求 $B_{i} \\leq 2$ 的作业。服务需求为：$B_{1}=20, B_{2}=1, B_{3}=2, B_{4}=1, B_{5}=3, B_{6}=1, B_{7}=4, B_{8}=1$。满足条件 $B_{i} \\leq 2$ 的作业是 $J_{2}, J_{3}, J_{4}, J_{6}$ 和 $J_{8}$。共有 $5$ 个短作业。\n\n接下来，我们分析FCFS调度策略。FCFS是非抢占式的，并按作业的到达顺序提供服务。到达时间 $A_i$ 分别是 $0, 1, 2, 3, 4, 10, 10.5, 11$，因此执行序列是 $J_1, J_2, J_3, J_4, J_5, J_6, J_7, J_8$。\n\n在FCFS下，完成时间 $C_{i}$ 计算如下：\n- 作业 $J_{1}$ ($A_{1}=0, B_{1}=20$)：在 $t=0$ 开始，在 $t=20$ 完成。$C_{1}=20$。\n- 作业 $J_{2}$ ($A_{2}=1, B_{2}=1$)：在 $J_1$ 之后于 $t=20$ 开始，在 $t=20+1=21$ 完成。$C_{2}=21$。\n- 作业 $J_{3}$ ($A_{3}=2, B_{3}=2$)：在 $J_2$ 之后于 $t=21$ 开始，在 $t=21+2=23$ 完成。$C_{3}=23$。\n- 作业 $J_{4}$ ($A_{4}=3, B_{4}=1$)：在 $J_3$ 之后于 $t=23$ 开始，在 $t=23+1=24$ 完成。$C_{4}=24$。\n- 作业 $J_{5}$ ($A_{5}=4, B_{5}=3$)：在 $J_4$ 之后于 $t=24$ 开始，在 $t=24+3=27$ 完成。$C_{5}=27$。\n- 作业 $J_{6}$ ($A_{6}=10, B_{6}=1$)：在 $J_5$ 之后于 $t=27$ 开始，在 $t=27+1=28$ 完成。$C_{6}=28$。\n- 作业 $J_{7}$ ($A_{7}=10.5, B_{7}=4$)：在 $J_6$ 之后于 $t=28$ 开始，在 $t=28+4=32$ 完成。$C_{7}=32$。\n- 作业 $J_{8}$ ($A_{8}=11, B_{8}=1$)：在 $J_7$ 之后于 $t=32$ 开始，在 $t=32+1=33$ 完成。$C_{8}=33$。\n\n现在我们为短作业计算流转时间 $F_{i} = C_{i} - A_{i}$ 和减速率 $S_{i} = F_{i} / B_{i}$：\n- $J_2$: $F_{2} = 21 - 1 = 20$。$S_{2} = \\frac{20}{1} = 20$。\n- $J_3$: $F_{3} = 23 - 2 = 21$。$S_{3} = \\frac{21}{2} = 10.5$。\n- $J_4$: $F_{4} = 24 - 3 = 21$。$S_{4} = \\frac{21}{1} = 21$。\n- $J_6$: $F_{6} = 28 - 10 = 18$。$S_{6} = \\frac{18}{1} = 18$。\n- $J_8$: $F_{8} = 33 - 11 = 22$。$S_{8} = \\frac{22}{1} = 22$。\n\nFCFS下短作业的平均减速率 $\\overline{S}_{\\text{short}}^{\\text{FCFS}}$ 为：\n$$\n\\overline{S}_{\\text{short}}^{\\text{FCFS}} = \\frac{S_{2} + S_{3} + S_{4} + S_{6} + S_{8}}{5} = \\frac{20 + 10.5 + 21 + 18 + 22}{5} = \\frac{91.5}{5} = 18.3\n$$\n\n接下来，我们分析SRPT调度策略。SRPT是抢占式的，并且总是运行剩余处理时间最短的作业。\n- $t=0$：$J_{1}$ ($A_{1}=0, B_{1}=20$) 到达并开始执行。剩余时间 $B'_{1}=20$。\n- $t=1$：$J_{2}$ ($A_{2}=1, B_{2}=1$) 到达。$J_{1}$ 已运行 $1$ 个单位时间，因此 $B'_{1}=19$。由于 $B'_{2}=1  B'_{1}=19$，$J_{2}$ 抢占 $J_{1}$ 并开始执行。\n- $t=2$：$J_{2}$ 完成时 $J_{3}$ ($A_{3}=2, B_{3}=2$) 到达。$C_{2}=2$。就绪队列中的作业是 $J_{1}$ ($B'_{1}=19$) 和 $J_{3}$ ($B'_{3}=2$)。由于 $B'_{3}  B'_{1}$，$J_{3}$ 开始执行。\n- $t=3$：$J_{4}$ ($A_{4}=3, B_{4}=1$) 到达。$J_{3}$ 已运行 $1$ 个单位时间，因此 $B'_{3}=1$。队列中的作业是 $J_{1}$ ($B'_{1}=19$)、$J_{3}$ ($B'_{3}=1$，正在运行) 和 $J_{4}$ ($B'_{4}=1$)。由于 $B'_{4}$ 并不严格小于正在运行作业的剩余时间 $B'_{3}$，根据平局打破规则，优先选择当前作业，因此 $J_{3}$ 继续执行。\n- $t=4$：$J_{3}$ 完成时 $J_{5}$ ($A_{5}=4, B_{5}=3$) 到达。$C_{3}=4$。就绪队列：$J_{1}$ ($B'_{1}=19$)、$J_{4}$ ($B'_{4}=1$)、$J_{5}$ ($B'_{5}=3$) 。$J_{4}$ 开始执行，因为它具有最小的剩余时间。\n- $t=5$：$J_{4}$ 完成。$C_{4}=5$。就绪队列：$J_{1}$ ($B'_{1}=19$)、$J_{5}$ ($B'_{5}=3$) 。$J_{5}$ 开始执行。\n- $t=8$：$J_{5}$ 完成。$C_{5}=8$。系统中只有 $J_{1}$。$J_{1}$ 恢复执行。\n- $t=10$：$J_{6}$ ($A_{6}=10, B_{6}=1$) 到达。$J_{1}$ 已运行 $2$ 个单位时间（从 $t=8$ 到 $t=10$），因此其剩余时间为 $B'_{1}=19-2=17$。由于 $B'_{6}=1  B'_{1}=17$，$J_{6}$ 抢占 $J_{1}$。\n- $t=10.5$：$J_{7}$ ($A_{7}=10.5, B_{7}=4$) 到达。$J_{6}$ 已运行 $0.5$ 个单位时间，$B'_{6}=0.5$。$J_{6}$ 继续执行，因为 $B'_{6}=0.5$ 是最小的。\n- $t=11$：$J_{6}$ 完成时 $J_{8}$ ($A_{8}=11, B_{8}=1$) 到达。$C_{6}=11$。就绪队列：$J_{1}$ ($B'_{1}=17$)、$J_{7}$ ($B'_{7}=4$)、$J_{8}$ ($B'_{8}=1$) 。$J_{8}$ 开始执行。\n- $t=12$：$J_{8}$ 完成。$C_{8}=12$。就绪队列：$J_{1}$ ($B'_{1}=17$)、$J_{7}$ ($B'_{7}=4$) 。$J_{7}$ 开始执行。\n- $t=16$：$J_{7}$ 完成。$C_{7}=16$。$J_{1}$ 恢复执行。\n- $t=33$：$J_{1}$ 运行其剩余的 $17$ 个单位时间并完成。$C_{1}=33$。\n\n现在我们为SRPT下的短作业计算流转时间和减速率：\n- $J_2$: $F_{2} = C_{2} - A_{2} = 2 - 1 = 1$。$S_{2} = \\frac{1}{1} = 1$。\n- $J_3$: $F_{3} = C_{3} - A_{3} = 4 - 2 = 2$。$S_{3} = \\frac{2}{2} = 1$。\n- $J_4$: $F_{4} = C_{4} - A_{4} = 5 - 3 = 2$。$S_{4} = \\frac{2}{1} = 2$。\n- $J_6$: $F_{6} = C_{6} - A_{6} = 11 - 10 = 1$。$S_{6} = \\frac{1}{1} = 1$。\n- $J_8$: $F_{8} = C_{8} - A_{8} = 12 - 11 = 1$。$S_{8} = \\frac{1}{1} = 1$。\n\nSRPT下短作业的平均减速率 $\\overline{S}_{\\text{short}}^{\\text{SRPT}}$ 为：\n$$\n\\overline{S}_{\\text{short}}^{\\text{SRPT}} = \\frac{S_{2} + S_{3} + S_{4} + S_{6} + S_{8}}{5} = \\frac{1 + 1 + 2 + 1 + 1}{5} = \\frac{6}{5} = 1.2\n$$\n\n最后，我们计算短作业减速因子 $\\Phi$：\n$$\n\\Phi = \\frac{\\overline{S}_{\\text{short}}^{\\text{FCFS}}}{\\overline{S}_{\\text{short}}^{\\text{SRPT}}} = \\frac{18.3}{1.2} = 15.25\n$$\n四舍五入到四位有效数字，该值为 $15.25$。\n\n这个结果为护航效应提供了一个鲜明的定量度量。$\\Phi=15.25$ 这个值表明，对于此工作负载，与SRPT调度程序相比，FCFS调度程序使短作业的平均减速率恶化了超过 $15$ 倍。这是因为长时间运行的作业 $J_{1}$ ($B_1=20$) 首先到达，并且在非抢占式的FCFS策略下，它独占了处理器。这迫使所有后续到达的短作业（$J_{2}, J_{3}, J_{4}$）在其后形成“护航队列”等待，导致相对于其小的服务需求而言极长的流转时间，从而产生非常高的减速率。相比之下，抢占式的SRPT策略通过抢占长作业，允许短作业在到达后几乎立即运行。这最小化了它们的等待时间，并使其减速率接近理想值 $1$，但代价是延迟了长作业。$\\Phi$ 的巨大数值表明，像FCFS这样对作业大小不敏感的策略可能对短作业的性能产生极大的损害，这是护航效应的核心现象。", "answer": "$$\n\\boxed{15.25}\n$$", "id": "3643765"}, {"introduction": "除了影响单个作业的性能指标，护航效应还会对整个系统的宏观行为产生显著影响。这个思想实验旨在帮助你直观地理解这种影响，通过预测当一个长作业中断了一系列短作业时，等待时间的分布会呈现何种形态。培养这种直觉对于理解为什么采用简单调度策略的系统，即使用户感觉“卡顿”或“无响应”，其平均性能指标却可能看似良好，是至关重要的一步 [@problem_id:3643806]。", "problem": "考虑一个运行非抢占式先到先服务 (FCFS) 调度器的单核中央处理器 (CPU)。一个教学演示可视化了作业到达和执行的时间线，并显示了作业等待时间的直方图。在这个演示中，相同的“短”作业从时间 $t=0$ 开始，严格以 $\\Delta t = 1$ 个时间单位为周期到达，每个短作业需要 $s = 0.1$ 个时间单位的 CPU 执行时间。在时间 $t=1^{-}$ 时，注入一个 CPU 执行时间为 $L = 10$ 个时间单位的“长”作业；它在一个本应在 $t=1$ 到达的短作业之前无穷小的时间点到达，因此当 CPU 下一次空闲时，它会先到达 FCFS 队列的头部。如果两个作业在完全相同的时间到达，具有较早无穷小到达时刻的作业在 FCFS 顺序中被认为更早。假设没有上下文切换开销，并且系统在初始状态下是空闲的。\n\n作业的等待时间定义为从其到达时刻到其 CPU 服务开始时刻之间经过的时间（即，等待时间不包括服务时间）。\n\n关注在区间 $[0,20]$ 内到达的短作业的等待时间。无需绘制完整的时间线，仅根据非抢占式 FCFS 调度和等待时间的核心定义进行推理，当使用合理的组距（bin width）对这些短作业的等待时间进行分箱时，以下哪项最能描述生成的等待时间直方图的定性形状？\n\nA. 在 $0$ 附近有一个单一的窄峰，在较大的等待时间处几乎没有分布。\n\nB. 双峰形状：一个在 $0$ 附近的强峰，加上一个由长作业执行期间到达的作业所造成的大等待时间的广泛聚类，从而产生一个重右尾。\n\nC. 在从 $0$ 到大约 $L$ 的等待时间内近似均匀分布。\n\nD. 一个以 $L/2$ 附近为中心的单峰，因为长作业平均了周围作业的等待时间。\n\nE. 从 $0$ 开始的指数衰减，如在无记忆的单服务器队列中一样。", "solution": "用户希望我分析一个调度问题并确定等待时间分布的形状。\n\n### 步骤 1：提取给定条件\n- **调度器：** 非抢占式先到先服务 (FCFS)。\n- **CPU：** 单核。\n- **短作业：**\n    - 到达：一系列周期性到达的作业，我们称之为 $S_k$，其中作业 $S_k$ 在时间 $t_k = k$ 到达。到达从 $t=0$ 开始。到达间隔时间为 $\\Delta t = 1$ 个时间单位。\n    - CPU 执行时间：$s = 0.1$ 个时间单位。\n- **长作业：**\n    - 标签：$L_{job}$。\n    - 到达：时间 $t=1^{-}$，表示在 $t=1$ 之前的无穷小时间点。\n    - CPU 执行时间：$L = 10$ 个时间单位。\n- **平局处理：** 在 $t=1^{-}$ 到达的作业优先于在 $t=1$ 到达的作业。\n- **开销：** 无上下文切换开销。\n- **初始状态：** 系统在 $t=0$ 之前处于空闲状态。\n- **等待时间定义：** 从作业到达直到其 CPU 服务开始所经过的时间。\n- **分析范围：** 在区间 $[0, 20]$ 内到达的短作业的等待时间。这对应于作业 $S_0, S_1, \\dots, S_{20}$。\n\n### 步骤 2：使用提取的给定条件进行验证\n问题描述了一个经典的、确定性的排队场景，这在计算机科学中用于说明 FCFS 调度中的“护航效应”。\n- **科学依据：** FCFS 调度、CPU 执行时间、等待时间和护航效应等概念是操作系统中的基本主题。该模型是一个标准的 D/D/1 队列（确定性到达、确定性服务时间、单一服务器），带有一个一次性的扰动。所有原则都是合理的。\n- **良构性：** 所有参数（到达时间、服务时间、调度策略）都已明确定义。平局处理规则清晰。可以确定唯一的事件序列，从而得到唯一的等待时间集合。\n- **客观性：** 问题陈述使用了精确、定量且无歧义的语言。\n- **完整性和一致性：** 信息是充分且自洽的。长作业在 $t=1^{-}$ 到达，这明确地将其置于 FCFS 队列中在 $t=1$ 到达的短作业之前。\n- **可行性：** 该场景是一个概念模型，但对于一个简化模型来说，数值是物理上合理的。\n- **其他缺陷：** 该问题并非微不足道、比喻性或不适定的。它需要逐步应用调度原则。\n\n### 步骤 3：结论与行动\n问题陈述是**有效的**。我将继续推导解决方案。\n\n### 等待时间的推导\n\n设 $A_k$、$Start_k$ 和 $W_k$ 分别为短作业 $S_k$ 的到达时间、服务开始时间和等待时间。所考虑的短作业是 $S_k$，$k \\in \\{0, 1, 2, \\dots, 20\\}$。\n\n1.  **作业 $S_0$ (在 $t=0$ 到达):**\n    - 到达时间 $A_0 = 0$。\n    - CPU 空闲，因此服务立即开始：$Start_0 = 0$。\n    - 等待时间：$W_0 = Start_0 - A_0 = 0 - 0 = 0$。\n    - 该作业在 $t = Start_0 + s = 0 + 0.1 = 0.1$ 完成。CPU 从 $t=0.1$ 开始空闲，直到下一个作业开始。\n\n2.  **长作业 $L_{job}$ 和作业 $S_1$：**\n    - 长作业 $L_{job}$ 在 $A_{L_{job}} = 1^{-}$ 到达。短作业 $S_1$ 在 $A_1 = 1$ 到达。\n    - 在时间 $t=1$ 时，CPU 自 $t=0.1$ 以来一直空闲。FCFS 队列中包含 $L_{job}$，其后是 $S_1$。\n    - 调度器分派 $L_{job}$。其服务在 $Start_{L_{job}} = 1$ 开始。\n    - $L_{job}$ 运行 $L=10$ 个时间单位，在 $F_{L_{job}} = 1 + 10 = 11$ 完成。\n    - 由于调度器是非抢占式的，CPU 从 $t=1$ 到 $t=11$ 被持续占用。\n\n3.  **在“护航”期间到达的作业 ($k \\in [1, 10]$):**\n    - 短作业 $S_1, S_2, \\dots, S_{10}$ 在时间 $t=1, 2, \\dots, 10$ 到达。所有这些作业都在 $L_{job}$ 占用 CPU 期间到达。它们按 FCFS 顺序排队。\n    - 在 $t=11$ 时，$L_{job}$ 完成。就绪队列包含 $[S_1, S_2, \\dots, S_{10}]$。同时，作业 $S_{11}$ 恰好在 $t=11$ 到达，并被添加到队列末尾。队列变为 $[S_1, S_2, \\dots, S_{10}, S_{11}]$。\n    - 调度器分派 $S_1$。\n    - 对于 $S_1$：$A_1 = 1$。$Start_1 = 11$。$W_1 = 11 - 1 = 10$。$S_1$ 在 $F_1 = 11 + 0.1 = 11.1$ 完成。\n    - 对于 $S_2$：$A_2 = 2$。$Start_2 = F_1 = 11.1$。$W_2 = 11.1 - 2 = 9.1$。$S_2$ 在 $F_2 = 11.1 + 0.1 = 11.2$ 完成。\n    - 一般地，对于短作业 $S_k$（其中 $k \\in [1,11]$），它必须等待 $L_{job}$ 和前面的 $k-1$ 个短作业完成。其开始时间为 $Start_k = F_{L_{job}} + (k-1)s = 11 + (k-1) \\times 0.1$。\n    - $S_k$ 的等待时间为 $W_k = Start_k - A_k = (11 + (k-1)s) - k$。\n    - 我们来计算护航队列中直到 $S_{11}$ 的作业：\n        - $W_1 = (11 + 0 \\times 0.1) - 1 = 10$。\n        - $W_2 = (11 + 1 \\times 0.1) - 2 = 9.1$。\n        - $W_3 = (11 + 2 \\times 0.1) - 3 = 8.2$。\n        - ...\n        - $W_{10} = (11 + 9 \\times 0.1) - 10 = 11.9 - 10 = 1.9$。完成时间为 $F_{10} = 11.9 + 0.1 = 12.0$。\n        - $W_{11} = (11 + 10 \\times 0.1) - 11 = 12.0 - 11 = 1.0$。完成时间为 $F_{11} = 12.0 + 0.1 = 12.1$。\n\n4.  **队列清空期间到达的作业 ($k \\ge 12$):**\n    - 对于 $S_{12}$：$A_{12} = 12$。前一个作业 $S_{11}$ 在 $F_{11}=12.1$ 完成。所以，$S_{12}$ 必须等待。\n    - $Start_{12} = F_{11} = 12.1$。\n    - $W_{12} = 12.1 - 12 = 0.1$。\n    - $S_{12}$ 在 $F_{12} = 12.1 + 0.1 = 12.2$ 完成。\n    - 对于 $S_{13}$：$A_{13} = 13$。CPU 自 $F_{12}=12.2$ 以来一直空闲。因此，$S_{13}$ 可以立即开始。\n    - $Start_{13} = 13$。\n    - $W_{13} = 13 - 13 = 0$。\n    - $S_{13}$ 在 $F_{13} = 13 + 0.1 = 13.1$ 完成。\n\n5.  **护航结束后的作业 ($k \\ge 13$):**\n    - 对于任何 $k \\ge 13$ 的作业 $S_k$，前一个作业 $S_{k-1}$ 在 $t=k-1$ 到达，并在 $F_{k-1} = (k-1) + 0.1 = k - 0.9$ 完成。\n    - 由于 $F_{k-1}  k = A_k$，当 $S_k$ 到达时 CPU 总是空闲的。\n    - 因此，对于所有 $k \\in [13, 20]$，等待时间为 $W_k = 0$。\n\n### 总结与直方图形状\n我们来收集所有 21 个短作业（$S_0$ 到 $S_{20}$）的等待时间：\n- $W_0 = 0$。\n- $W_1 = 10.0$。\n- $W_2 = 9.1$。\n- $W_3 = 8.2$。\n- $W_4 = 7.3$。\n- $W_5 = 6.4$。\n- $W_6 = 5.5$。\n- $W_7 = 4.6$。\n- $W_8 = 3.7$。\n- $W_9 = 2.8$。\n- $W_{10} = 1.9$。\n- $W_{11} = 1.0$。\n- $W_{12} = 0.1$。\n- $W_{13}, W_{14}, \\dots, W_{20}$ 全都为 $0$。这是 $8$ 个作业。\n\n等待时间 $W \\approx 0$ 的总作业数：\n- $W=0$：$S_0$ 以及 $S_{13}$ 到 $S_{20}$（$1+8=9$ 个作业）。\n- $W=0.1$：$S_{12}$（1 个作业）。\n总共 21 个作业中有 10 个（接近一半）的等待时间非常接近于零。这将在直方图的原点处形成一个非常强且窄的峰。\n\n有较长等待时间的总作业数：\n- 剩下的 11 个作业（$S_1$ 到 $S_{11}$）的等待时间范围从 $1.0$ 到 $10.0$。这些值广泛分布在这个范围内：$\\{10.0, 9.1, 8.2, \\dots, 1.9, 1.0\\}$。\n这将在直方图中形成一个长的、相对平坦的右尾，代表一个由大等待时间组成的广泛聚类。\n\n整体形状的特点是在零点有一个主峰，并有一个延伸到 $W=10$ 的长重尾。从定性的意义上说，这是一个经典的“双峰”形状，其中一个“峰”是零点处的峰值，另一个“峰”是受护航效应影响的作业的广泛分布。\n\n### 逐项分析\n\n**A. 在 $0$ 附近有一个单一的窄峰，在较大的等待时间处几乎没有分布。**\n- **不正确。**虽然在 $0$ 附近有一个强峰（21 个作业中有 10 个），但在较大的等待时间处有非常显著的分布。其他 11 个作业的等待时间从 $1.0$ 到 $10.0$ 不等。这比“几乎没有分布”要多得多。\n\n**B. 双峰形状：一个在 $0$ 附近的强峰，加上一个由长作业执行期间到达的作业所造成的大等待时间的广泛聚类，从而产生一个重右尾。**\n- **正确。**这个描述完美地匹配了推导出的分布。在 $W=0$ 附近有一个强峰（包含 10 个作业）。有一个由大等待时间组成的广泛聚类（11 个作业的等待时间从 $1.0$ 到 $10.0$）。这个聚类是由于长作业阻塞了后续的短作业而产生的护航效应直接导致的。这些大值的存在导致了一个重右尾。\n\n**C. 在从 $0$ 到大约 $L$ 的等待时间内近似均匀分布。**\n- **不正确。**该分布是高度非均匀的。在 $W=0$ 附近有非常高的作业集中度，而在较大等待时间的作业分布则很稀疏。均匀分布意味着在每个等待时间区间内作业数量大致相等，而这显然不是事实。\n\n**D. 一个以 $L/2$ 附近为中心的单峰，因为长作业平均了周围作业的等待时间。**\n- **不正确。**该分布不是单峰的，也不围绕 $L/2 = 5$ 对称。主峰在 $W=0$ 处。“平均化”的概念具有误导性；等待时间是由 FCFS 规则系统地决定的，并且在护航队列中的作业呈现出递减的趋势，而不是围绕平均值的集中趋势。\n\n**E. 从 $0$ 开始的指数衰减，如在无记忆的单服务器队列中一样。**\n- **不正确。**等待时间的指数分布是随机 M/M/1 队列（泊松到达，指数服务时间）的特征。本问题描述的是一个确定性的 D/D/1 系统。计算出的等待时间不遵循指数衰减；它们遵循一个特定的、确定性的模式，在零点有大量分布，并带有一个线性递减的数值序列。", "answer": "$$\\boxed{B}$$", "id": "3643806"}, {"introduction": "既然我们已经理解了护航效应的严重性，那么应如何着手缓解它呢？完全抢占式的复杂调度器可能不是唯一的答案，有时简单的启发式策略也能带来显著的改善。本练习将探讨一种常见的优化方法：将作业按类型（如 I/O 密集型与 CPU 密集型）分类，并使用独立的队列进行调度。通过在不同类型的作业队列之间交替服务，我们可以有效防止长作业独占资源，从而显著提升系统的整体周转时间 [@problem_id:3643807]。", "problem": "考虑一个单处理器系统，使用先来先服务（FCFS）调度策略执行一批作业。仅使用以下核心定义：(i) FCFS是一种非抢占式策略，总是在等待的作业中运行最早到达的作业；(ii) 作业的周转时间等于其完成时间减去其到达时间；(iii) 当所有作业在时间$0$到达时，作业的周转时间等于其完成时间。作业的完成时间是指其所需的中央处理器（CPU）服务结束的时间。\n\n在时间$0$，系统有以下就绪作业：\n- 两个CPU密集型作业，标记为$J_{C1}$和$J_{C2}$，分别需要$12$和$9$个时间单位的CPU突发时间。\n- 六个I/O密集型作业，标记为$J_{I1}, J_{I2}, \\dots, J_{I6}$，每个需要$1$个时间单位的CPU突发时间。\n\n您将比较两种策略：\n\n1. 单一队列FCFS：所有作业都放在一个单一的FCFS就绪队列中。当多个作业具有相同的到达时间时，决胜规则是一个固定的全序，其中CPU密集型作业优先于I/O密集型作业，在每个类别内部，按作业下标递增的顺序排序。因此，服务顺序是$J_{C1}$, $J_{C2}$, $J_{I1}$, $J_{I2}$, $J_{I3}$, $J_{I4}$, $J_{I5}$, $J_{I6}$。\n\n2. 按类别FCFS交替服务：调度器维护两个独立的FCFS队列，一个用于I/O密集型作业，一个用于CPU密集型作业。服务是非抢占式的。当CPU空闲且两个队列都非空时，调度器会相对于上次选择交替选择类别；在时间$0$时，当两个队列都非空时，调度器从I/O密集型队列开始。如果只有一个队列非空，调度器则从该队列中选择。\n\n将护航效应削减因子定义为以下比率：\n$$\nR \\equiv \\frac{\\text{单一队列FCFS下的平均周转时间}}{\\text{按类别交替FCFS下的平均周转时间}}。\n$$\n\n计算给定工作负载下的$R$值。将最终答案表示为一个无单位数，并四舍五入到四位有效数字。", "solution": "首先验证问题以确保其科学上合理、定义明确且客观。\n\n给定条件如下：\n- 一个采用先来先服务（FCFS）非抢占式调度的单处理器系统。\n- 作业总数为$8$个。\n- 所有作业均在时间$t = 0$到达。\n- 两个CPU密集型作业：$J_{C1}$的突发时间为$b_{C1} = 12$，$J_{C2}$的突发时间为$b_{C2} = 9$。\n- 六个I/O密集型作业：$J_{I1}, J_{I2}, \\dots, J_{I6}$，每个作业的突发时间为$b_{Ik} = 1$，其中$k \\in \\{1, \\dots, 6\\}$。\n- 作业$J$的周转时间定义为$T_J = C_J - A_J$，其中$C_J$是完成时间，$A_J$是到达时间。由于所有作业的到达时间$A_J = 0$，任何作业的周转时间都等于其完成时间，$T_J = C_J$。\n- 将分析两种调度策略：\n    1.  **单一队列FCFS**：一个单一队列，具有固定的服务顺序，由决胜规则确定：$J_{C1}, J_{C2}, J_{I1}, J_{I2}, J_{I3}, J_{I4}, J_{I5}, J_{I6}$。\n    2.  **按类别FCFS交替服务**：两个队列，一个用于CPU密集型作业（$Q_C$），一个用于I/O密集型作业（$Q_I$）。调度器在非空队列之间交替选择，在时间$t=0$时从$Q_I$开始。如果一个队列为空，则从另一个队列提供服务。\n- 目标是计算护航效应削减因子$R$，定义为单一队列策略下的平均周转时间与按类别策略下的平均周转时间之比。\n\n该问题是有效的。这是操作系统进程调度领域中一个标准的、定义明确的问题。它在科学上是合理的，自成体系，所有术语和条件都明确规定，允许有一个唯一的、可验证的解。\n\n解决方案通过计算每种策略的平均周转时间来展开。作业总数是$N = 8$。\n\n**1. 策略1分析：单一队列FCFS**\n\n在此策略下，服务顺序已明确给出：$J_{C1}, J_{C2}, J_{I1}, J_{I2}, J_{I3}, J_{I4}, J_{I5}, J_{I6}$。由于调度是非抢占式的，且所有作业都在$t=0$到达，一个作业的完成时间是所有在其之前执行的作业的突发时间之和，再加上它自己的突发时间。令$C_J$表示作业$J$的完成时间。\n\nCPU密集型作业的突发时间为$b_{C1}=12$和$b_{C2}=9$，六个I/O密集型作业的突发时间均为$b_{Ik}=1$。\n\n完成时间按顺序计算如下：\n- $C_{C1} = b_{C1} = 12$\n- $C_{C2} = C_{C1} + b_{C2} = 12 + 9 = 21$\n- $C_{I1} = C_{C2} + b_{I1} = 21 + 1 = 22$\n- $C_{I2} = C_{I1} + b_{I2} = 22 + 1 = 23$\n- $C_{I3} = C_{I2} + b_{I3} = 23 + 1 = 24$\n- $C_{I4} = C_{I3} + b_{I4} = 24 + 1 = 25$\n- $C_{I5} = C_{I4} + b_{I5} = 25 + 1 = 26$\n- $C_{I6} = C_{I5} + b_{I6} = 26 + 1 = 27$\n\n由于到达时间都为$0$，这些完成时间也就是周转时间。策略1的总周转时间，记为$T_{total,1}$，是这些单个周转时间之和：\n$$\nT_{total,1} = 12 + 21 + 22 + 23 + 24 + 25 + 26 + 27 = 180 \\text{ 时间单位}\n$$\n策略1的平均周转时间$\\bar{T}_1$是：\n$$\n\\bar{T}_1 = \\frac{T_{total,1}}{N} = \\frac{180}{8} = 22.5\n$$\n\n**2. 策略2分析：按类别FCFS交替服务**\n\n在时间$t=0$时，队列为$Q_C = \\{J_{C1}, J_{C2}\\}$和$Q_I = \\{J_{I1}, J_{I2}, J_{I3}, J_{I4}, J_{I5}, J_{I6}\\}$。调度器从$Q_I$开始。\n\n执行序列如下：\n- **时间 $0$**: 两个队列都非空。从$Q_I$中选择。选择作业$J_{I1}$（突发时间$1$）。它从$t=0$运行到$t=1$。\n  - 完成时间$C_{I1} = 1$。上次服务的类别是I/O密集型。\n- **时间 $1$**: 两个队列都非空。交替到$Q_C$。选择作业$J_{C1}$（突发时间$12$）。它从$t=1$运行到$t=1+12=13$。\n  - 完成时间$C_{C1} = 13$。上次服务的类别是CPU密集型。\n- **时间 $13$**: 两个队列都非空。交替到$Q_I$。选择作业$J_{I2}$（突发时间$1$）。它从$t=13$运行到$t=13+1=14$。\n  - 完成时间$C_{I2} = 14$。上次服务的类别是I/O密集型。\n- **时间 $14$**: 两个队列都非空。交替到$Q_C$。选择作业$J_{C2}$（突发时间$9$）。它从$t=14$运行到$t=14+9=23$。\n  - 完成时间$C_{C2} = 23$。上次服务的类别是CPU密集型。此后，$Q_C$为空。\n- **时间 $23$**: $Q_C$为空，但$Q_I$不为空。调度器必须从$Q_I$中选择。$Q_I$中剩余的作业按FCFS顺序服务。\n- 选择作业$J_{I3}$（突发时间$1$）。它从$t=23$运行到$t=24$。\n  - 完成时间$C_{I3} = 24$。\n- 选择作业$J_{I4}$（突发时间$1$）。它从$t=24$运行到$t=25$。\n  - 完成时间$C_{I4} = 25$。\n- 选择作业$J_{I5}$（突发时间$1$）。它从$t=25$运行到$t=26$。\n  - 完成时间$C_{I5} = 26$。\n- 选择作业$J_{I6}$（突发时间$1$）。它从$t=26$运行到$t=27$。\n  - 完成时间$C_{I6} = 27$。\n\n策略2的周转时间为：$1, 13, 14, 23, 24, 25, 26, 27$。\n策略2的总周转时间$T_{total,2}$是这些值的总和：\n$$\nT_{total,2} = 1 + 13 + 14 + 23 + 24 + 25 + 26 + 27 = 153 \\text{ 时间单位}\n$$\n策略2的平均周转时间$\\bar{T}_2$是：\n$$\n\\bar{T}_2 = \\frac{T_{total,2}}{N} = \\frac{153}{8} = 19.125\n$$\n\n**3. 计算护航效应削减因子$R$**\n\n护航效应削减因子$R$定义为平均周转时间之比：\n$$\nR = \\frac{\\bar{T}_1}{\\bar{T}_2} = \\frac{22.5}{19.125}\n$$\n我们可以使用总时间来表示，以避免一开始就进行小数运算：\n$$\nR = \\frac{180/8}{153/8} = \\frac{180}{153}\n$$\n通过将分子和分母除以它们的最大公约数$9$来简化分数：\n$$\nR = \\frac{180 \\div 9}{153 \\div 9} = \\frac{20}{17}\n$$\n为了将最终答案表示为四舍五入到四位有效数字的小数，我们进行除法运算：\n$$\nR = \\frac{20}{17} \\approx 1.176470588...\n$$\n四舍五入到四位有效数字得到$1.176$。", "answer": "$$\\boxed{1.176}$$", "id": "3643807"}]}