{"hands_on_practices": [{"introduction": "我们从一个基本的优化问题开始。本练习模拟了一种混合的“基于保留的全局”策略，要求你分配一个额外的帧池以最小化系统的总页面错误率。通过采用基于边际收益的贪心算法，你将对操作系统如何做出智能的、数据驱动的分配决策获得定量的理解。[@problem_id:3645310]", "problem": "考虑一个操作系统（OS）在一种称为“保留之上全局分配”（global-over-reserves）的混合页框分配策略下管理 $N$ 个并发进程。每个进程 $i$ 必须保证获得最少 $k_i$ 个页框的保留量，所有超出这些保留量的页框将进行全局分配，以优化系统性能。\n\n从以下基本定义和公认事实出发：\n- “局部”页框分配策略为每个进程独立地固定其页框数，而“全局”策略允许进程竞争一个共享的页框池。\n- 对于给定进程 $i$，其稳态缺页率 $f_i(m)$ 是分配给它的页框数 $m$ 的递减函数。超出进程工作集的额外页框通常产生递减的回报。\n\n给定 $N = 3$ 个进程和总共 $M = 15$ 个物理页框。每个进程的保留页框数分别为 $k_1 = 3$，$k_2 = 2$ 和 $k_3 = 4$。定义分配给进程 $i$ 的页框数为 $m_i$，满足约束条件 $m_i \\geq k_i$ 和 $\\sum_{i=1}^{N} m_i = M$。设额外页框数 $e_i$ 定义为 $e_i = m_i - k_i \\geq 0$，因此 $\\sum_{i=1}^{N} e_i = M - \\sum_{i=1}^{N} k_i$。\n\n在“保留之上全局分配”策略下，系统首先分配保留的页框，然后分配额外的页框，以最小化总稳态缺页率 $\\sum_{i=1}^{N} f_i(m_i)$。对于每个进程 $i$，在仅分配保留页框时的缺页率为 $f_i(k_i) = f_{i,0}$，分配给进程 $i$ 的每个额外页框 $j$ 会使其缺页率产生一个边际减少量 $r_{i,j}$。假设对于每个进程 $i$，序列 $\\{r_{i,j}\\}$ 关于 $j$ 是非递增的（收益递减），并且超出所列的 $r_{i,j}$ 值后，额外的页框不会带来边际减少量（即边际减少量为零）。\n\n参数如下：\n- $f_{1,0} = 0.30$, $r_{1,1} = 0.08$, $r_{1,2} = 0.06$, $r_{1,3} = 0.05$, $r_{1,4} = 0.02$.\n- $f_{2,0} = 0.40$, $r_{2,1} = 0.12$, $r_{2,2} = 0.07$, $r_{2,3} = 0.03$.\n- $f_{3,0} = 0.25$, $r_{3,1} = 0.09$, $r_{3,2} = 0.04$.\n\n任务：\n1. 将这种混合的“保留之上全局分配”策略形式化为一个关于额外页框数 $e_i$ 的优化问题，目标是在满足保留约束的条件下最小化 $\\sum_{i=1}^{N} f_i(m_i)$。\n2. 使用给定的 $f_{i,0}$ 和 $r_{i,j}$ 值，计算在该策略下 $\\sum_{i=1}^{N} f_i(m_i)$ 的最小值。\n\n将最终数值答案表示为四舍五入到四位有效数字的小数。不要使用百分号；将所有缺页率视为无量纲的分数。", "solution": "此问题经核实具有科学依据，定义明确，客观且完整。它代表了操作系统领域内一个标准的资源分配问题。\n\n### 步骤1：优化问题的形式化\n\n目标是最小化总稳态缺页率（用 $F$ 表示），即各个进程缺页率的总和：\n$$\nF = \\sum_{i=1}^{N} f_i(m_i)\n$$\n其中 $N=3$ 是进程数，$m_i$ 是分配给进程 $i$ 的页框数。\n\n总页框数为 $M=15$。分配必须满足所有页框都被使用的约束条件：\n$$\n\\sum_{i=1}^{N} m_i = M\n$$\n\n每个进程 $i$ 都有 $k_i$ 个页框的最低保证保留量，因此分配还必须遵守以下约束：\n$$\nm_i \\geq k_i \\quad \\text{for } i=1, 2, \\dots, N\n$$\n\n我们将分配给进程 $i$ 的超出其保留量的“额外”页框数定义为 $e_i = m_i - k_i$。根据定义，$e_i \\geq 0$。将 $m_i = k_i + e_i$ 代入总页框约束可得：\n$$\n\\sum_{i=1}^{N} (k_i + e_i) = M \\implies \\sum_{i=1}^{N} e_i = M - \\sum_{i=1}^{N} k_i\n$$\n这个总和代表了可供全局分配的额外页框总池，即 $E$。\n\n对于拥有 $m_i = k_i + e_i$ 个页框的进程 $i$，其缺页率由其在保留水平上的缺页率 $f_{i,0} = f_i(k_i)$ 减去 $e_i$ 个额外页框带来的累积减少量得出：\n$$\nf_i(m_i) = f_i(k_i + e_i) = f_{i,0} - \\sum_{j=1}^{e_i} r_{i,j}\n$$\n其中 $r_{i,j}$ 是第 $j$ 个额外页框为进程 $i$ 带来的边际减少量。\n\n现在，总缺页率可以表示为额外页框分配 $e_i$ 的函数：\n$$\nF(e_1, \\dots, e_N) = \\sum_{i=1}^{N} \\left( f_{i,0} - \\sum_{j=1}^{e_i} r_{i,j} \\right) = \\left(\\sum_{i=1}^{N} f_{i,0}\\right) - \\left(\\sum_{i=1}^{N} \\sum_{j=1}^{e_i} r_{i,j}\\right)\n$$\n第一项 $\\sum_{i=1}^{N} f_{i,0}$ 是基于初始保留分配的常数。因此，最小化总缺页率 $F$ 等价于最大化总缺页率减少量 $R$：\n$$\n\\text{Maximize } R(e_1, \\dots, e_N) = \\sum_{i=1}^{N} \\sum_{j=1}^{e_i} r_{i,j}\n$$\n形式化的优化问题是，找到非负整数 $e_1, e_2, \\dots, e_N$ 来最大化 $R$，并满足约束条件 $\\sum_{i=1}^{N} e_i = M - \\sum_{i=1}^{N} k_i$。\n\n### 步骤2：计算最小化缺页率\n\n首先，我们计算可用于全局分配的额外页框总数。\n各进程的保留页框数分别为 $k_1 = 3$，$k_2 = 2$ 和 $k_3 = 4$。保留的页框总数为：\n$$\n\\sum_{i=1}^{3} k_i = 3 + 2 + 4 = 9\n$$\n在总共有 $M = 15$ 个物理页框的情况下，需要分配的额外页框数为：\n$$\nE = M - \\sum_{i=1}^{3} k_i = 15 - 9 = 6\n$$\n问题现在简化为分配这 $6$ 个额外页框。由于每个进程的边际回报 $\\{r_{i,j}\\}$ 是非递增的，因此，总是将下一个页框分配给提供最高边际减少量的进程的贪心算法将产生最优解。\n\n我们列出所有可用的边际减少量 $r_{i,j}$：\n- 进程 1: $r_{1,1} = 0.08$, $r_{1,2} = 0.06$, $r_{1,3} = 0.05$, $r_{1,4} = 0.02$\n- 进程 2: $r_{2,1} = 0.12$, $r_{2,2} = 0.07$, $r_{2,3} = 0.03$\n- 进程 3: $r_{3,1} = 0.09$, $r_{3,2} = 0.04$\n\n我们开始贪婪地分配这 $6$ 个页框：\n\n1.  **分配 1：** 可用的最大减少量是 $r_{2,1} = 0.12$。将第1个额外页框分配给进程2。\n    - 至今总减少量：$0.12$。剩余页框数：$5$。\n\n2.  **分配 2：** 次大的可用减少量是 $r_{3,1} = 0.09$。将第2个额外页框分配给进程3。\n    - 至今总减少量：$0.12 + 0.09 = 0.21$。剩余页框数：$4$。\n\n3.  **分配 3：** 接下来最大的是 $r_{1,1} = 0.08$。将第3个额外页框分配给进程1。\n    - 至今总减少量：$0.21 + 0.08 = 0.29$。剩余页框数：$3$。\n\n4.  **分配 4：** 接下来最大的是 $r_{2,2} = 0.07$（来自进程2）。将第4个额外页框分配给进程2。\n    - 至今总减少量：$0.29 + 0.07 = 0.36$。剩余页框数：$2$。\n\n5.  **分配 5：** 接下来最大的是 $r_{1,2} = 0.06$（来自进程1）。将第5个额外页框分配给进程1。\n    - 至今总减少量：$0.36 + 0.06 = 0.42$。剩余页框数：$1$。\n\n6.  **分配 6：** 接下来最大的是 $r_{1,3} = 0.05$（来自进程1）。将第6个额外页框分配给进程1。\n    - 至今总减少量：$0.42 + 0.05 = 0.47$。剩余页框数：$0$。\n\n这 $6$ 个额外页框的分配完成。最大化的总减少量为 $R_{max} = 0.47$。\n\n额外页框的最终分配如下：\n- 进程 1: $e_1 = 3$ 个页框\n- 进程 2: $e_2 = 2$ 个页框\n- 进程 3: $e_3 = 1$ 个页框\n\n每个进程的总页框数是：\n- $m_1 = k_1 + e_1 = 3 + 3 = 6$\n- $m_2 = k_2 + e_2 = 2 + 2 = 4$\n- $m_3 = k_3 + e_3 = 4 + 1 = 5$\n\n仅分配保留页框时的初始总缺页率为：\n$$\n\\sum_{i=1}^{3} f_{i,0} = f_{1,0} + f_{2,0} + f_{3,0} = 0.30 + 0.40 + 0.25 = 0.95\n$$\n最小化的总缺页率是初始缺页率减去最大总减少量：\n$$\nF_{min} = \\left(\\sum_{i=1}^{3} f_{i,0}\\right) - R_{max} = 0.95 - 0.47 = 0.48\n$$\n为了验证，我们可以计算每个进程的最终缺页率：\n- $f_1(6) = f_{1,0} - (r_{1,1} + r_{1,2} + r_{1,3}) = 0.30 - (0.08 + 0.06 + 0.05) = 0.30 - 0.19 = 0.11$\n- $f_2(4) = f_{2,0} - (r_{2,1} + r_{2,2}) = 0.40 - (0.12 + 0.07) = 0.40 - 0.19 = 0.21$\n- $f_3(5) = f_{3,0} - r_{3,1} = 0.25 - 0.09 = 0.16$\n\n最小化的总缺页率是这些单个缺页率的总和：\n$$\nF_{min} = f_1(6) + f_2(4) + f_3(5) = 0.11 + 0.21 + 0.16 = 0.48\n$$\n题目要求答案四舍五入到四位有效数字，即 $0.4800$。", "answer": "$$\\boxed{0.4800}$$", "id": "3645310"}, {"introduction": "理论模型固然强大，但观察策略在实际运行中的表现能提供宝贵的直观理解。在此实践中，你将通过编写一个仿真程序，来观察一个内存密集型的“流式”进程和一个具有良好局部性的“循环”进程在局部和全局分配策略下的动态交互。这将生动地展示全局分配在何种情况下有益，又在何种情况下有害，这是一个经典的权衡问题。[@problem_id:3645321]", "problem": "考虑一个双进程虚拟内存系统，其中虚拟内存页面被映射到一组有限的物理帧中。其基本出发点是缺页的定义：当一个进程引用一个当前未驻留在任何物理帧中的虚拟页面时，系统会产生一次缺页，并且必须将该页面加载到一个帧中，这可能需要根据页面置换策略驱逐一个现有的页面。我们将使用最近最少使用 (LRU) 策略，该策略会驱逐最后访问时间距离现在最远的页面。我们定义两种帧分配策略：局部置换，其中每个进程只从其自己分配的帧中进行驱逐；以及全局置换，其中所有帧被汇集在一起，驱逐可以移除属于任何进程的页面。\n\n您需要在这两种策略下模拟两个特定的进程：\n- 一个流式进程，它顺序扫描一组唯一的页面，并可能多次重复此扫描。\n- 一个循环进程，它在一个固定的页面工作集上重复循环。\n\n核心定义：\n- 设流式进程的工作集大小为 $U_s$ 个不同的页面。它对这 $U_s$ 个页面执行 $P_s$ 次顺序遍历，总共进行 $T_s = U_s \\cdot P_s$ 次引用。在每次遍历中，它按 $0, 1, 2, \\dots, (U_s - 1)$ 的确切顺序引用页面。\n- 设循环进程的工作集大小为 $U_l$ 个不同的页面。它对这 $U_l$ 个页面执行 $P_l$ 次完整循环，总共进行 $T_l = U_l \\cdot P_l$ 次引用。在每次循环中，它按 $0, 1, 2, \\dots, (U_l - 1)$ 的确切顺序引用页面。\n- 交错调度：在每个周期中，系统从流式进程发出 $q_s$ 次引用（如果还有剩余），然后从循环进程发出 $q_l$ 次引用（如果还有剩余），并重复此周期，直到两个进程都完成其总引用次数 $T_s$ 和 $T_l$。当一个进程提前完成时，另一个进程将单独继续执行。\n- 在局部置换策略下，流式进程拥有 $f_s$ 个帧，循环进程拥有 $f_l$ 个帧；置换只在所属进程的帧内发生。在全局置换策略下，总共有 $F$ 个帧由两个进程共享；置换可以驱逐任何页面，无论其属于哪个进程。\n- 我们假设 LRU 使用一个单一的全局时钟：每次引用都会使一个全局时间计数器递增，LRU 的牺牲页面是具有最小最后访问时间的页面。平局通过选择具有最小最后访问时间值的页面来打破（这在 LRU 策略下是等价的）。一个页面只有在其进程标识和页面号都匹配时才被认为是相同的；来自不同进程的页面即使页面号相同也是不同的。\n\n您的任务是使用 C 语言实现一个完整、可运行的程序，该程序：\n1. 模拟上述定义的局部和全局置换策略。\n2. 在每种策略下，分别为流式进程和循环进程统计缺页次数。\n3. 对于每个测试用例，根据以下谓词确定全局置换是否有助于流式进程以及是否破坏了循环进程：\n   - 全局置换有助于流式进程，当且仅当 $PF^{G}_s  PF^{L}_s$，其中 $PF^{G}_s$ 和 $PF^{L}_s$ 分别表示流式进程在全局和局部置换策略下的缺页次数。\n   - 全局置换破坏了循环进程，当且仅当 $PF^{G}_l > PF^{L}_l$，其中 $PF^{G}_l$ 和 $PF^{L}_l$ 分别表示循环进程在全局和局部置换策略下的缺页次数。\n\n为以下测试套件提供结果。每个测试用例由 $(U_s, P_s, U_l, P_l, f_s, f_l, F, q_s, q_l)$ 指定，所有量均为非负整数，且 $F \\ge f_s + f_l$ 以保持物理上的一致性：\n- 测试用例1：$(U_s, P_s, U_l, P_l, f_s, f_l, F, q_s, q_l) = (50, 2, 5, 20, 3, 5, 60, 5, 1)$。\n- 测试用例2：$(U_s, P_s, U_l, P_l, f_s, f_l, F, q_s, q_l) = (40, 2, 6, 30, 3, 6, 20, 8, 1)$。\n- 测试用例3：$(U_s, P_s, U_l, P_l, f_s, f_l, F, q_s, q_l) = (20, 2, 10, 30, 10, 10, 20, 1, 1)$。\n- 测试用例4：$(U_s, P_s, U_l, P_l, f_s, f_l, F, q_s, q_l) = (30, 1, 10, 40, 3, 10, 13, 20, 1)$。\n\n输出规范：\n- 对于每个测试用例，计算两个布尔值：$b_1$ 指示全局置换是否有助于流式进程（是则为 $1$，否则为 $0$），$b_2$ 指示全局置换是否破坏了循环进程（是则为 $1$，否则为 $0$）。\n- 您的程序应生成一行输出，其中包含一个用方括号括起来的逗号分隔列表形式的结果，每个测试用例对应一个双元素整数列表 $[b_1, b_2]$。例如，整体输出必须具有确切的形式 $$[[b_{1,1}, b_{1,2}], [b_{2,1}, b_{2,2}], [b_{3,1}, b_{3,2}], [b_{4,1}, b_{4,2}]]$$ 不得添加空格或任何额外文本。\n此问题不涉及物理单位或角度；所有输出都是无单位的整数。最终程序必须是自包含的，并且不得读取输入。", "solution": "该问题已经过验证，被认为是定义明确、具有科学依据且内部一致的。它提出了一个来自操作系统领域的标准模拟任务，所有参数和行为都得到了清晰和形式化的定义。未发现逻辑矛盾、歧义或事实性错误。\n\n该问题要求在两种不同的内存帧分配策略（局部和全局）下模拟一个双进程系统。目标是量化每种策略下每个进程的缺页次数，并比较结果。该模拟将由一个流式进程 $S$ 和一个循环进程 $L$ 生成的确定性引用字符串驱动。\n\n解决方案的核心是一个离散时间事件模拟。一个由变量 `time` 表示的全局时钟在每次内存引用时递增。物理内存的状态由一个数据结构数组表示，每个结构对应一个物理帧。一个 `Frame` 结构必须包含：\n1.  `process_id`：所属进程的标识符（流式进程为 $0$，循环进程为 $1$）。哨兵值 $-1$ 可以表示一个空帧。\n2.  `page_num`：存储在帧中的虚拟页面号。\n3.  `last_used_time`：该页面最后被引用时的全局时钟值。这对于实现最近最少使用 (LRU) 置换策略至关重要。\n\n模拟通过根据指定的交错调度生成内存引用的方式进行。对于在时间 $t$ 对虚拟页面 $(p_{id}, p_{num})$ 的每次引用（其中 $p_{id}$ 是进程ID，$p_{num}$ 是页面号），系统必须检查该页面是否驻留在物理帧中。\n\n-   **页面命中**：如果页面 $(p_{id}, p_{num})$ 在一个帧中被找到，则为一次页面命中。唯一需要做的操作是更新该帧的 `last_used_time` 为当前时间 $t$。\n\n-   **缺页**：如果页面未被找到，则发生一次缺页。进程 $p_{id}$ 的缺页计数器递增。系统随后必须将该页面加载到一个帧中。\n    1.  **寻找目标帧**：系统首先搜索一个空闲帧（其中 `process_id` 为 $-1$）。如果存在可用空闲帧，则选择它作为目标。\n    2.  **LRU 置换**：如果相关池中的所有帧都已被占用，则调用 LRU 策略。具有最小 `last_used_time` 值的帧被确定为牺牲帧。这是最长时间未被使用的帧。\n    3.  **加载页面**：将新页面 $(p_{id}, p_{num})$ 及其引用时间 $t$ 加载到目标帧（新找到的空闲帧或牺牲帧）中，覆盖其先前的内容。\n\n模拟必须针对两种不同的策略配置执行：\n\n1.  **局部置换**：维护两个独立的帧池。一个大小为 $f_s$ 的池用于流式进程 ($S$)，另一个大小为 $f_l$ 的池用于循环进程 ($L$)。当进程 $S$ 发生缺页时，对空闲帧或 LRU 牺牲帧的搜索完全限制在其专用的 $f_s$ 个帧的池中。类似地，进程 $L$ 只使用其 $f_l$ 个帧。这将进程彼此的内存访问行为隔离开来。\n\n2.  **全局置换**：一个大小为 $F$ 的单一共享帧池可供两个进程使用。当任一进程发生缺页时，对空闲帧或 LRU 牺牲帧的搜索将在整个 $F$ 帧池中进行。这意味着进程 $S$ 的一个页面可能被驱逐，以便为进程 $L$ 的一个页面腾出空间，反之亦然。LRU 牺牲页面是整个系统中最久未被使用的页面，无论它属于哪个进程。\n\n主模拟驱动程序根据流式进程的参数 $(U_s, P_s, q_s)$ 和循环进程的参数 $(U_l, P_l, q_l)$ 生成引用序列。它以周期方式迭代，为进程 $S$ 发出 $q_s$ 次引用，然后为进程 $L$ 发出 $q_l$ 次引用，直到两个进程都完成其总引用次数 $T_s = U_s \\cdot P_s$ 和 $T_l = U_l \\cdot P_l$。流式进程的第 $k$ 次引用（0-索引）是针对页面 $k \\pmod{U_s}$，循环进程的第 $k$ 次引用是针对页面 $k \\pmod{U_l}$。\n\n对于每个测试用例，我们首先在局部置换策略下运行模拟，以获得缺页次数 $PF^{L}_s$ 和 $PF^{L}_l$。然后我们重置系统，在全局置换策略下再次运行模拟，以获得 $PF^{G}_s$ 和 $PF^{G}_l$。最后，我们计算两个布尔指标：\n-   `全局置换有助于流式进程`，$b_1$，如果 $PF^{G}_s  PF^{L}_s$ 则为 $1$，否则为 $0$。\n-   `全局置换破坏了循环进程`，$b_2$，如果 $PF^{G}_l > PF^{L}_l$ 则为 $1$，否则为 $0$。\n\n程序将对所有指定的测试用例执行此过程，并将结果格式化为单行的布尔对列表。", "answer": "[[1,0],[1,1],[0,1],[0,1]]", "id": "3645321"}, {"introduction": "操作系统设计者的决策所带来的影响，远不止页面错误率这类即时性能指标。这最后一个练习将帧分配策略与物理世界联系起来，分析其对固态硬盘（SSD）寿命的影响。你将推导一个表达式，用以量化因全局分配中内存流转加剧而导致的额外硬件磨损（以 $\\omega$、 $S$、 $W$ 和 $T$ 表示），这突显了在操作系统设计中采用整体、全系统视角的重要性。[@problem_id:3645337]", "problem": "考虑一个使用请求分页、固定页面大小且以固态硬盘（SSD）作为后备存储的多道程序系统。我们考虑两种帧分配策略：局部替换和全局替换。在全局替换策略下，属于一个进程的页面可能会为了满足另一进程的需求而被换出，这增加了跨进程间的干扰。定义以下各量：\n\n- 由全局替换（相对于局部替换）引起的额外页面错误写回总速率为 $\\omega$ 事件/秒。“页面错误写回”事件定义为需要将脏页写回SSD的换出操作。\n- 页面大小为 $S$ 字节。\n- SSD的闪存转换层（FTL）产生一个恒定的写放大因子 $W$，意味着写入闪存的物理字节数是请求写入的主机级字节数的 $W$ 倍。\n- 观察区间持续时间为 $T$ 秒。\n\n假设以下基本事实：一次页面写回恰好传输 $S$ 主机级字节，SSD的总写入字节数（TBW）是在该区间内编程到闪存的物理字节数，并且FTL写放大因子 $W$ 在该区间内是恒定的且与访问模式无关。进一步假设，在局部替换策略下，系统已达到稳态，跨进程换出可忽略不计，并且在该区间内两种策略之间的TBW差异仅源于速率为 $\\omega$ 的额外脏页写回。\n\n根据这些定义和假设，推导一个闭式表达式，用于表示在区间 $T$ 内由全局替换导致的额外总写入字节数，单位为太字节（TB），其中 $1\\,\\mathrm{TB}$ 定义为 $10^{12}$ 字节。你的最终答案必须是仅包含 $\\omega$、$S$、$W$ 和 $T$ 的单个解析表达式。不要四舍五入；请提供精确表达式。", "solution": "在尝试任何解答之前，将首先对问题陈述进行严格的验证过程。\n\n### 第1步：提取已知条件\n问题陈述中明确提供了以下量、定义和假设：\n- **系统背景**：使用请求分页、固定页面大小且以固态硬盘（SSD）作为后备存储的多道程序系统。\n- **考虑的策略**：局部替换和全局替换。\n- **$\\omega$**：由全局替换（相对于局部替换）引起的额外页面错误写回总速率，单位为事件/秒。\n- **“页面错误写回”事件的定义**：需要将脏页写回SSD的换出操作。\n- **$S$**：页面大小，单位为字节。\n- **$W$**：SSD的闪存转换层（FTL）的恒定写放大因子。\n- **$T$**：观察区间的持续时间，单位为秒。\n- **假设1**：一次页面写回恰好传输 $S$ 主机级字节。\n- **假设2**：SSD的总写入字节数（TBW）是在该区间内编程到闪存的物理字节数。\n- **假设3**：FTL写放大因子 $W$ 在该区间内是恒定的且与访问模式无关。\n- **假设4**：在局部替换策略下，系统处于稳态，跨进程换出可忽略不计。\n- **假设5**：在该区间内两种策略之间的TBW差异仅源于速率为 $\\omega$ 的额外脏页写回。\n- **要求输出**：一个闭式表达式，用于表示在区间 $T$ 内由全局替换导致的额外总写入字节数。\n- **输出单位**：表达式必须以太字节（TB）为单位，其中 $1\\,\\mathrm{TB}$ 定义为 $10^{12}$ 字节。\n\n### 第2步：使用提取的已知条件进行验证\n根据既定标准对问题进行有效性评估。\n\n- **科学基础**：该问题基于计算机科学中成熟的概念，特别是操作系统（分页、页面替换策略）和计算机存储系统（SSD、写放大、总写入字节数）。所提出的模型是一个简化模型（例如，恒定的 $W$），这在工程和科学领域进行一阶分析时是标准且可接受的做法。该模型没有违反物理学、数学或计算机科学的任何基本原理。\n- **适定性**：该问题是适定的。它提供了一组明确定义的变量（$\\omega$, $S$, $W$, $T$）和一组简化假设，这些假设充分约束了模型以产生唯一解。目标被明确无误地陈述：推导一个以给定变量表示的特定表达式。\n- **客观性**：语言精确且量化。诸如“页面错误写回”、“写放大因子”和“总写入字节数”等术语是该领域的标准术语，并以常规方式定义或使用。没有主观或基于意见的陈述。\n\n### 第3步：结论与行动\n该问题具有科学基础、适定性和客观性。它没有矛盾、歧义和事实错误。因此，该问题被判定为**有效**，现在将给出解决方案的正式推导。\n\n### 解题推导\n目标是推导一个表达式，用于表示与局部替换策略相比，使用全局替换策略在持续时间为 $T$ 的区间内所导致的额外总写入字节数（$\\Delta_{TBW}$）。最终结果必须以太字节为单位。\n\n1.  **计算额外的写回事件总数。**\n    问题将 $\\omega$ 定义为由全局替换引起的*额外*页面错误写回事件的速率，单位为事件/秒。观察区间的持续时间为 $T$ 秒。在这一区间内，这些额外事件的总数（表示为 $N_{events}$）是速率乘以持续时间。\n    $$N_{events} = \\omega T$$\n    该量的单位是（事件/秒）× 秒 = 事件，这在量纲上是正确的。\n\n2.  **计算额外写入的主机级数据总量。**\n    每个页面错误写回事件对应于将一个脏页写入SSD。单个页面的大小给定为 $S$ 字节。因此，由于这些额外事件而写入SSD主机接口的数据总量（表示为 $B_{host}$）是事件数乘以每个事件的数据大小。\n    $$B_{host} = N_{events} \\times S = (\\omega T) S = \\omega S T$$\n    该量的单位是 事件 × （字节/事件） = 字节。\n\n3.  **计算额外写入闪存的物理字节总数（额外TBW）。**\n    由于闪存转换层（FTL）管理的写放大现象，写入闪存的物理字节数与写入的主机级字节数并不相同。写放大因子 $W$ 是物理写入字节数与主机写入字节数的比率。根据问题陈述，总写入字节数（TBW）指的是物理字节数。因此，额外的TBW（$\\Delta_{TBW}$）通过将额外写入的主机级字节数 $B_{host}$ 乘以写放大因子 $W$ 来计算。\n    $$\\Delta_{TBW} = B_{host} \\times W = (\\omega S T) W = \\omega S W T$$\n    单位仍然是字节，因为 $W$ 是一个无量纲因子。该表达式表示在区间 $T$ 内写入SSD的额外物理总字节数。\n\n4.  **将结果转换为太字节。**\n    问题要求最终答案以太字节（TB）表示，给定的转换因子为 $1\\,\\mathrm{TB} = 10^{12}$ 字节。要将 $\\Delta_{TBW}$ 的表达式从字节转换为太字节，我们必须除以 $10^{12}$。设 $\\Delta_{TBW, TB}$ 是以太字节为单位的额外TBW。\n    $$\\Delta_{TBW, TB} = \\frac{\\Delta_{TBW}}{10^{12}} = \\frac{\\omega S W T}{10^{12}}$$\n    这是最终的闭式表达式，用于表示在区间 $T$ 内由全局替换策略导致的额外总写入字节数，以太字节为单位，并用给定的变量 $\\omega$、$S$、$W$ 和 $T$ 表示。", "answer": "$$\\boxed{\\frac{\\omega S W T}{10^{12}}}$$", "id": "3645337"}]}