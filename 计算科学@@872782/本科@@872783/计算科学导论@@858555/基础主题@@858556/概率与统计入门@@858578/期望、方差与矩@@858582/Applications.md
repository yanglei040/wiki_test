## 应用与[交叉](@entry_id:147634)学科联系

在前面的章节中，我们已经建立了期望、[方差](@entry_id:200758)和矩的数学基础。这些概念不仅是概率论的抽象基石，更是科学家和工程师用于理解、建模和预测现实世界中不确定性现象的核心工具。本章的目的是展示这些核心原理在不同学科中的具体应用，揭示它们如何将理论与实践联系起来。我们将通过一系列跨学科的问题情境，探讨这些[矩量](@entry_id:152982)如何被用来量化遗传变异、评估[金融风险](@entry_id:138097)、优化计算系统、设计科学实验、进行[不确定性量化](@entry_id:138597)以及构建和验证[机器学习模型](@entry_id:262335)。我们的目标不是重复这些原理的推导，而是阐明它们在解决实际问题中的强大功能和普适性。

### 遗传学与群体[生物学中的随机性](@entry_id:265013)

[孟德尔遗传定律](@entry_id:276507)为我们提供了预测杂交后代预期性状[分布](@entry_id:182848)的概率框架。然而，在任何实际的遗传实验中，观察到的后代数量很少会精确[匹配理论](@entry_id:261448)预测。期望和[方差](@entry_id:200758)为我们提供了一种量化这种随机偏差的方法。

考虑一个经典的双杂合子[测交](@entry_id:156683)实验，例如一个基因型为 $AaBb$ 的个体与一个纯隐性个体 $aabb$ 杂交。根据孟德尔的[独立分配定律](@entry_id:272450)，来自 $AaBb$ 个体的四种配子（$AB$、$Ab$、$aB$、$ab$）产生的概率相等，均为 $\frac{1}{4}$。因此，在总数为 $N$ 的后代中，四种对应基因型（$AaBb$、$Aabb$、$aaBb$、$aabb$）中每一种的预期数量都是 $\frac{N}{4}$。

这是一个理想化的[期望值](@entry_id:153208)。在实践中，每个后代的产生可以被看作一次独立的随机试验，其结果是四种基因型之一。对于任何一个特定的基因型，其在 $N$ 个后代中出现的次数 $X$ 服从参数为 $n=N$ 和 $p=\frac{1}{4}$ 的二项分布。正如我们在前几章所学到的，该二项分布的[期望值](@entry_id:153208)为 $E[X] = Np = \frac{N}{4}$，这与我们的直觉相符。更重要的是，其[方差](@entry_id:200758)为 $\mathrm{Var}(X) = Np(1-p) = N(\frac{1}{4})(1-\frac{1}{4}) = \frac{3N}{16}$。这个[方差](@entry_id:200758)值至关重要：它为我们提供了一个衡量观察结果偏离[期望值](@entry_id:153208)的典型尺度的标准。如果一个实验的观察计数与预期计数的差异远大于由该[方差](@entry_id:200758)所预测的范围，遗传学家就有理由怀疑基本假设的有效性——例如，基因可能不是[独立分配](@entry_id:141921)的（即存在连锁），或者某些基因型可能具有较低的存活率。因此，期望和[方差](@entry_id:200758)构成了假设检验（如[卡方检验](@entry_id:174175)）的基础，这是现代遗传学分析的基石。[@problem_id:2828721]

### [计算金融](@entry_id:145856)学与[随机过程](@entry_id:159502)

在金融领域，资产价格（如股票或商品）的动态演化本质上是随机的。[几何布朗运动](@entry_id:137398)（Geometric Brownian Motion, GBM）是描述这种演化的一个基本模型，它在著名的 [Black-Scholes-Merton](@entry_id:147622) [期权定价模型](@entry_id:147543)中扮演着核心角色。GBM 由一个随机微分方程（SDE）描述：

$$dS_t = \mu S_t dt + \sigma S_t dW_t$$

其中 $S_t$ 是资产在时间 $t$ 的价格，$\mu$ 是预期回报率（漂移项），$\sigma$ 是波动率（[扩散](@entry_id:141445)项），而 $dW_t$ 代表了市场随机波动的[维纳过程](@entry_id:137696)。

通过求解这个SDE，我们可以得到任意时刻 $t$ 价格 $S_t$ 的精确表达式，它取决于初始价格 $S_0$ 和一个正态分布的随机项。基于这个解，我们可以推导出 $S_t$ 的矩，从而深刻理解投资的风险与回报。其[期望值](@entry_id:153208)为：

$$E[S_t] = S_0 \exp(\mu t)$$

这个结果表明，资产的预期价格以[连续复利](@entry_id:137682)回报率 $\mu$ 呈[指数增长](@entry_id:141869)。然而，期望只描述了平均情况。[方差](@entry_id:200758)则揭示了风险的本质：

$$\mathrm{Var}(S_t) = S_0^2 \exp(2\mu t) (\exp(\sigma^2 t) - 1)$$

从这个表达式中我们可以看到，[方差](@entry_id:200758)不仅随时间呈[指数增长](@entry_id:141869)，还受到波动率 $\sigma$ 的显著影响。即使预期回报率 $\mu$ 为零，只要波动率 $\sigma > 0$，[方差](@entry_id:200758)仍会随时间增长，这反映了价格路径的不确定性随时间 horizon 的延长而急剧增加。这两个矩——期望和[方差](@entry_id:200758)——共同为金融分析师提供了评估投资策略长期表现和内在风险的基本工具。[@problem_id:3052623]

### 工程与计算性能分析

在高性能计算领域，理解和预测代码执行时间的变异性对于[系统优化](@entry_id:262181)至关重要。例如，在图形处理器（GPU）上运行的[并行计算](@entry_id:139241)核（kernel）的执行时间，即使在相同的输入下，每次运行也可能存在微小的差异。这种现象通常被称为“计算[抖动](@entry_id:200248)”（jitter），它可能源于[操作系统调度](@entry_id:753016)、内存访问延迟、缓存冲突等多种随机因素。

我们可以构建一个模型来分析这种执行时间的随机性。假设总执行时间 $T$ 可以分解为一个恒定的基线时间 $T_0$ 和 $k$ 个随机[抖动](@entry_id:200248)源 $J_i$ 的和：

$$T = T_0 + \sum_{i=1}^{k} J_i$$

利用[期望的线性](@entry_id:273513)性质，总的预期执行时间很容易计算：

$$E[T] = E\left[T_0 + \sum_{i=1}^{k} J_i\right] = T_0 + \sum_{i=1}^{k} E[J_i]$$

这表明，平均执行时间就是基线时间加上所有[抖动](@entry_id:200248)源的平均时间的总和。

[方差](@entry_id:200758)的分析则更为深入。总执行时间的[方差](@entry_id:200758)是所有[抖动](@entry_id:200248)项之和的[方差](@entry_id:200758)。一个关键的洞察是，这些[抖动](@entry_id:200248)源之间可能不是[相互独立](@entry_id:273670)的。例如，内存带宽争用和缓存未命中可能同时发生，导致它们之间存在正相关。[方差](@entry_id:200758)的一般公式考虑了这些相关性：

$$\mathrm{Var}(T) = \mathrm{Var}\left(\sum_{i=1}^{k} J_i\right) = \sum_{i=1}^{k} \sum_{j=1}^{k} \mathrm{Cov}(J_i, J_j)$$

这个表达式等于[抖动](@entry_id:200248)向量的[协方差矩阵](@entry_id:139155) $\boldsymbol{\Sigma}$ 的所有元素之和。它告诉我们，总的执行时间变异性不仅取决于每个[抖动](@entry_id:200248)源自身的[方差](@entry_id:200758)（即 $\boldsymbol{\Sigma}$ 的对角线元素），还取决于不同[抖动](@entry_id:200248)源之间的协[方差](@entry_id:200758)（非对角[线元](@entry_id:196833)素）。正的协[方差](@entry_id:200758)会放大总体[方差](@entry_id:200758)，而负的协[方差](@entry_id:200758)（例如，一个进程的延迟可能为另一个进程释放资源）则会减小它。这种基于矩的分析为[性能工程](@entry_id:270797)师诊断和减少[系统延迟](@entry_id:755779)的来源提供了严谨的数学框架。[@problem_id:3126280]

### 数据科学与实验设计

A/B测试是现代数据科学和产品开发中用于比较两个或多个版本（例如，网站设计、推荐算法）效果的标准方法。其核心是设计一个随机[对照实验](@entry_id:144738)，并分析其结果以做出有统计学依据的决策。期望和[方差](@entry_id:200758)在A/B测试的每一步都起着决定性作用。

假设我们有一个总样本量为 $N$ 的实验，将用户随机分配到A组（样本量 $n_A$）和B组（样本量 $n_B$），其成功率（如点击率、转化率）分别为 $p_A$ 和 $p_B$。A组和B组的成功次数 $X_A$ 和 $X_B$ 分别服从[二项分布](@entry_id:141181) $X_A \sim \mathrm{Bin}(n_A, p_A)$ 和 $X_B \sim \mathrm{Bin}(n_B, p_B)$。整个实验的总成功率估计量可以定义为 $\hat{p} = \frac{X_A + X_B}{N}$。

利用[期望的线性](@entry_id:273513)性质，我们可以计算出这个估计量的[期望值](@entry_id:153208)：

$$E[\hat{p}] = \frac{1}{N}(E[X_A] + E[X_B]) = \frac{1}{N}(n_A p_A + n_B p_B)$$

这个期望是真实成功率 $p_A$ 和 $p_B$ 的加权平均，权重由样本[分配比](@entry_id:183708)例决定。更重要的是，我们可以计算出该[估计量的方差](@entry_id:167223)。由于A组和B组是相互独立的，它们的成功次数也相互独立，因此：

$$\mathrm{Var}(\hat{p}) = \mathrm{Var}\left(\frac{X_A + X_B}{N}\right) = \frac{1}{N^2}(\mathrm{Var}(X_A) + \mathrm{Var}(X_B))$$

代入[二项分布](@entry_id:141181)的[方差](@entry_id:200758)公式 $\mathrm{Var}(X) = np(1-p)$，我们得到：

$$\mathrm{Var}(\hat{p}) = \frac{1}{N^2} [n_A p_A(1-p_A) + n_B p_B(1-p_B)]$$

这个[方差](@entry_id:200758)公式是实验设计的核心。它允许数据科学家在实验开始前进行“[功效分析](@entry_id:169032)”（power analysis），即估算需要多大的样本量 $N$ 和怎样的[分配比](@entry_id:183708)例（例如，平衡分配 $n_A = n_B = N/2$）才能有足够高的概率检测出 $p_A$ 和 $p_B$ 之间的一个有意义的差异。通过控制[估计量的方差](@entry_id:167223)，我们控制了实验结果的不确定性，从而确保了决策的科学性和可靠性。[@problem_id:3126318]

### 科学计算中的[不确定性量化](@entry_id:138597)

许多科学和工程模型，如描述[流体动力学](@entry_id:136788)或结构力学的[偏微分方程](@entry_id:141332)（PDEs），其输入参数（如材料属性、边界条件）往往存在不确定性。[不确定性量化](@entry_id:138597)（Uncertainty Quantification, UQ）的目标就是研究这些输入不确定性如何传播到模型的输出结果中。期望和[方差](@entry_id:200758)是描述输出不确定性的基本矩。

#### [蒙特卡洛方法](@entry_id:136978)及其改进

计算模型输出矩的最直接方法是[蒙特卡洛](@entry_id:144354)（MC）模拟：通过对不确定输入参数进行大量随机抽样，为每个样本运行一次确定性模型，然后计算输出样本的[统计矩](@entry_id:268545)（如样本均值和样本[方差](@entry_id:200758)）。虽然通用，但MC方法通常需要大量的模型运行才能获得足够精确的矩估计，计算成本高昂。因此，发展了多种“[方差缩减](@entry_id:145496)”技术，它们的核心思想正是巧妙地运用期望和[方差的性质](@entry_id:185416)。

**对偶变量（Antithetic Variates）** 是一种有效的[方差缩减技术](@entry_id:141433)。假设我们想估计 $E[g(X)]$，其中 $X \sim \mathrm{Uniform}(0,1)$。除了使用独立的样本 $X_i$，我们可以成对地使用样本 $U_i$ 和其对偶样本 $1-U_i$。由于 $U_i$ 和 $1-U_i$ 都服从相同的[均匀分布](@entry_id:194597)，新的估计量由成对平均值 $H_i = \frac{1}{2}(g(U_i) + g(1-U_i))$ 构成。如果函数 $g(x)$ 在 $[0,1]$ 上是单调的，那么 $g(U_i)$ 和 $g(1-U_i)$ 将会是负相关的。这种负相关性使得成对平均值 $H_i$ 的[方差](@entry_id:200758)小于原始单样本 $g(X)$ 的[方差](@entry_id:200758)的一半，从而使得基于 $H_i$ 的[总体均值](@entry_id:175446)[估计量的方差](@entry_id:167223)显著降低。这直接利用了协[方差](@entry_id:200758)在[方差](@entry_id:200758)计算中的作用：$\mathrm{Var}(A+B) = \mathrm{Var}(A) + \mathrm{Var}(B) + 2\mathrm{Cov}(A,B)$。[@problem_id:3126305]

**控制变量（Control Variates）** 是另一种强大的技术。假设我们想估计 $E[g(X)]$，并且我们知道另一个函数 $h(X)$ 的期望 $E[h(X)]$。我们可以构造一个新的估计量 $Y_i = g(X_i) - b(h(X_i) - E[h(X)])$，其中 $b$ 是一个常数。这个新估计量的期望与原始估计量相同，即 $E[Y_i] = E[g(X_i)]$。然而，它的[方差](@entry_id:200758)为：

$$\mathrm{Var}(Y) = \mathrm{Var}(g(X)) + b^2\mathrm{Var}(h(X)) - 2b\mathrm{Cov}(g(X), h(X))$$

通过选择最优的系数 $b_{opt} = \frac{\mathrm{Cov}(g(X), h(X))}{\mathrm{Var}(h(X))}$，我们可以最小化这个[方差](@entry_id:200758)。如果 $g(X)$ 和 $h(X)$ 高度相关，[方差](@entry_id:200758)的缩减效果会非常显著。例如，在使用MC方法进行积分时，我们可以使用一个易于积分的函数（如泰勒展开的低阶项）作为控制变量。[@problem_id:3126304]

#### 代理模型方法

除了改进蒙特卡洛方法，另一种高效的UQ策略是构建“代理模型”（surrogate model），用一个计算成本低廉的函数来近似昂贵的原始模型。

**[多项式混沌展开](@entry_id:162793) (Polynomial Chaos Expansion, PCE)** 是一种强大的代理建模技术。它将模型的随机输出 $u(\xi)$ （其中 $\xi$ 是随机输入）展开为一组关于 $\xi$ 的[正交多项式](@entry_id:146918) $\psi_k(\xi)$ 的级数：

$$u(\xi) \approx \sum_{k=0}^{p} c_k \psi_k(\xi)$$

这些多项式[基函数](@entry_id:170178) $\psi_k$ 的选择使其相对于 $\xi$ 的[概率密度函数](@entry_id:140610)是正交的。这种正交性带来了一个极为优雅的特性：输出的[统计矩](@entry_id:268545)可以直接从展开系数 $c_k$ 中解析计算。例如，如果[基函数](@entry_id:170178)被标准化以满足 $E[\psi_k] = \delta_{k0}$（其中 $\delta_{k0}$ 是克罗内克符号）和 $E[\psi_k \psi_m] = \delta_{km}$，那么输出的期望和[方差](@entry_id:200758)就是：

$$E[u] = c_0$$
$$\mathrm{Var}(u) = \sum_{k=1}^{p} c_k^2$$

这个惊人的结果意味着，一旦我们通过少量模型运行确定了系数 $c_k$，就可以无需任何进一步的[随机抽样](@entry_id:175193)，瞬间得到模型输出的均值和[方差](@entry_id:200758)。这极大地提高了[计算效率](@entry_id:270255)。[@problem_id:3126282]

**随机配置 (Stochastic Collocation)** 是另一种代理方法，它通过在参数空间的特定“[配置点](@entry_id:169000)”上运行确定性模型来逼近矩。这些点（如[高斯求积](@entry_id:146011)点）和相应的权重经过精心选择，使得对模型输出的加权平均能够高度精确地逼近其期望的积分表达式。例如，对于随机输入 $\xi \sim \mathrm{Uniform}(-1,1)$，模型输出的期望 $E[u(x;\xi)]$ 可以通过[高斯-勒让德求积](@entry_id:138201)公式近似：

$$E[u(x;\xi)] \approx \frac{1}{2} \sum_{i=1}^{M} w_i u(x;\xi_i)$$

其中 $\xi_i$ 是勒让德多项式的根，而 $w_i$ 是对应的[求积权重](@entry_id:753910)。通过对 $u^2$ 应用同样的公式，我们可以高效地估计二阶矩，并从而计算[方差](@entry_id:200758)。对于光滑的模型响应，随机配置方法通常比[蒙特卡洛方法](@entry_id:136978)具有更快的收敛速度，能用更少的模型评估次数达到更高的精度。[@problem_id:3126314]

### 系统生物学与[化学动力学](@entry_id:144961)

在细胞层面，生物化学[反应网络的动态行为](@entry_id:186804)本质上是随机的，因为反应物分子的数量是离散的，且反应事件的发生具有内在的随机性。这种随机性被称为“内在噪声”。此外，细胞群体中的每个细胞可能具有不同的参数（如基因表达速率），这种细胞间的差异导致了“[外在噪声](@entry_id:260927)”。期望和[方差](@entry_id:200758)是区分和量化这两种噪声来源的关键。

考虑一个简单的[基因表达模型](@entry_id:178501)：一个基因以速率 $k$ 产生蛋白质分子 $X$，而每个蛋白质分子以速率 $\gamma$ 降解。在[稳态](@entry_id:182458)下，如果参数 $k$ 和 $\gamma$ 是固定的，蛋白质分子数 $X$ 服从[泊松分布](@entry_id:147769)，其均值和[方差](@entry_id:200758)都等于 $\frac{k}{\gamma}$。在这种情况下，[方差](@entry_id:200758)等于均值，这是内在噪声的一个标志。

然而，在细胞群体中，生产速率 $k$ 本身可能是一个[随机变量](@entry_id:195330)，因细胞而异（例如，服从[对数正态分布](@entry_id:261888)）。这时，我们需要使用全期望律和全[方差](@entry_id:200758)律来计算群体水平的均值和[方差](@entry_id:200758)。全[方差](@entry_id:200758)律表明：

$$\mathrm{Var}(X) = E_k[\mathrm{Var}(X|k)] + \mathrm{Var}_k(E[X|k])$$

这个公式将总[方差分解](@entry_id:272134)为两部分：第一部分 $E_k[\mathrm{Var}(X|k)]$ 是内在噪声的平均贡献，它等于群体平均表达水平 $E[X]$。第二部分 $\mathrm{Var}_k(E[X|k])$ 是由生产速率 $k$ 在细胞间的变化（[外在噪声](@entry_id:260927)）引起的。由于这第二项总是非负的，[外在噪声](@entry_id:260927)的存在总是会使总[方差](@entry_id:200758)大于仅由内在噪声预测的水平。[方差](@entry_id:200758)与均值之比（称为[法诺因子](@entry_id:136562)）大于1，成为存在显著[外在噪声](@entry_id:260927)的明确标志。通过对实验数据的矩进行分析，生物学家可以推断出[基因调控网络](@entry_id:150976)中不同噪声来源的相对重要性。[@problem_id:2648969] [@problem_id:3126303]

### 机器学习与人工智能

矩的计算和分析是现代机器学习理论与实践的核心，贯穿于模型设计、训练正则化、[不确定性估计](@entry_id:191096)和模型选择等多个方面。

#### 模型设计与初始化

[深度神经网络](@entry_id:636170)的成功训练在很大程度上依赖于仔细的[权重初始化](@entry_id:636952)。不当的初始化会导致梯度消失或爆炸，使网络难以学习。Xavier/Glorot 初始化等方案的核心思想就是通过控制权重的矩来维持逐层传播的信号[方差](@entry_id:200758)。

考虑一个[全连接层](@entry_id:634348)，其输出 $z_j$ 是输入的加权和。为了保持信号[方差](@entry_id:200758)的稳定（即 $\mathrm{Var}(z_j) \approx \mathrm{Var}(x_i)$），我们需要对权重 $W_{ji}$ 的[方差](@entry_id:200758)进行特定设置。推导表明，权重的[方差](@entry_id:200758)应满足 $\mathrm{Var}(W_{ji}) = \frac{2}{fan_{in} + fan_{out}}$，其中 $fan_{in}$ 和 $fan_{out}$ 分别是层的输入和输出维度。有趣的是，无论是从均值为零的[正态分布](@entry_id:154414)还是[均匀分布](@entry_id:194597)中抽取权重，只要它们的[方差](@entry_id:200758)满足这一条件，信号的**期望[方差](@entry_id:200758)**就能得到保持。然而，这两种初始化方案在更[高阶矩](@entry_id:266936)上存在差异。例如，在[方差](@entry_id:200758)相同的情况下，正态分布的四阶矩大于[均匀分布](@entry_id:194597)。这意味着，尽管平均行为相同，但使用正态分布初始化的网络，其激活[方差](@entry_id:200758)在不同次的随机初始化之间会有更大的波动。这种对[高阶矩](@entry_id:266936)的分析揭示了初始化策略选择中的微妙之处。[@problem_id:3200174]

#### 正则化与不确定性

**Dropout** 和 **Stochastic Depth** 是两种广泛应用的[正则化技术](@entry_id:261393)，它们通过在训练过程中引入随机性来[防止模型过拟合](@entry_id:637382)。这种随机性可以通过矩的语言来精确描述。

在 **Stochastic Depth** 中，一个[残差块](@entry_id:637094) $y = x + F(x)$ 以概率 $p$ 被激活，以概率 $1-p$ 被跳过。因此，训练时的输出可以写作 $y_{train} = x + \delta F(x)$，其中 $\delta \sim \mathrm{Bernoulli}(p)$。其期望输出为 $E[y_{train}] = x + pF(x)$。这与标准的、确定性的推理过程（$y_{test} = x + F(x)$）产生了偏差。为了消除这种训练-推理不匹配，正确的做法是在推理时对残差函数进行缩放，即 $y_{test} = x + pF(x)$，从而使推理时的输出与训练时的期望输出相匹配。此外，该[随机过程](@entry_id:159502)在训练时引入的[方差](@entry_id:200758)为 $\mathrm{Var}(y_{train}) = (F(x))^2 p(1-p)$，这种引入的“噪声”正是其正则化效果的来源。[@problem_id:3169688]

**Dropout** 技术以类似的方式工作，但作用于单个神经元。通过在训练时以概率 $q$ 保留一个神经元的输出并将其乘以 $\frac{1}{q}$（称为“反向Dropout”），可以确保该神经元输出的[期望值](@entry_id:153208)在训练和测试期间保持不变。然而，这种随机[掩码操作](@entry_id:751694)在测试时引入了[方差](@entry_id:200758)。通过在测试时进行多次带Dropout的随机[前向传播](@entry_id:193086)（称为蒙特卡洛Dropout），并计算输出的样本均值和样本[方差](@entry_id:200758)，我们可以不仅得到模型的预测，还能得到对该预测不确定性的量化估计。其[方差](@entry_id:200758) $\mathrm{Var}(a_{MC}) = \frac{1}{T} \frac{1-q}{q} \sum (w_i x_i)^2$ 直接量化了由模型随机性（通过Dropout引入）产生的不确定性。[@problem_id:3118076]

#### 模型评估与选择

矩还可以作为评估和选择模型的强大工具。**[矩匹配](@entry_id:144382)法**是一种经典的统计思想，其基本逻辑是：如果一个理论模型能很好地描述一个数据集，那么该模型的理论矩应该与从数据中计算出的经验矩相匹配。

我们可以定义一个包含多个矩的向量，例如 $[\text{均值}, \text{方差}, \text{偏度}, \text{峰度}]$。首先，我们从数据集中计算出这些矩的经验估计值。然后，我们为一系列候选的理论模型（如[正态分布](@entry_id:154414)、[拉普拉斯分布](@entry_id:266437)、[均匀分布](@entry_id:194597)等）计算它们的理论矩向量。通过计算每个理论矩向量与经验矩向量之间的距离（例如，[欧几里得距离](@entry_id:143990)），我们可以量化每个模型与数据的匹配程度。距离最小的模型可以被选为最合适的模型。这个过程将抽象的[模型选择](@entry_id:155601)问题转化为了一个在“矩空间”中寻找最近邻的几何问题，为模型 adequacy check 提供了清晰且可操作的准则。[@problem_id:3126338]

#### [随机过程](@entry_id:159502)建模

许多现实世界的过程，如用户在网站上的浏览行为，可以被建模为马尔可夫链。期望和[方差](@entry_id:200758)是分析这些过程的关键性能指标。考虑一个将用户导航建模为[吸收马尔可夫链](@entry_id:185661)的场景，其中“转化”（如购买或注册）是一个[吸收态](@entry_id:161036)。我们通常关心的是用户从某个初始页面（或一组页面）出发，到达转化状态所需的平均步数（即平均时间）。

通过基于“第一步分析”的递归思想和全期望律，我们可以为每个瞬态（非[吸收态](@entry_id:161036)）$i$ 建立一个关于其预期[吸收时间](@entry_id:266543) $m_i$ 的线性方程组。这个[方程组](@entry_id:193238)的形式通常为 $(I-Q)\mathbf{m} = \mathbf{1}$，其中 $Q$ 是瞬态之间的转移[概率矩阵](@entry_id:274812)，$\mathbf{m}$ 是预期[吸收时间](@entry_id:266543)的向量。通过求解这个线性系统，我们可以得到从任何一个非转化页面开始的平均转化时间。同样的方法可以扩展到计算[吸收时间](@entry_id:266543)的二阶矩 $s_i = E[T^2|X_0=i]$，进而得到[方差](@entry_id:200758) $\mathrm{Var}(T_i) = s_i - m_i^2$。这些量化指标对于网站设计师优化用户体验、缩短转化路径至关重要。[@problem_id:3126352]