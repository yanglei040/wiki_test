{"hands_on_practices": [{"introduction": "在我们运用风险中性概率为资产定价之前，必须首先确认我们所使用的概率测度是有效的。这个练习将我们带回到最根本的定义：一个有效的风险中性测度必须确保任何交易资产的折现价格是一个鞅（martingale）。通过在一个简单的三状态模型中进行直接计算，我们将检验这一定义，并揭示当此关键属性被违反时会发生什么 [@problem_id:2427434]。", "problem": "考虑一个单期三状态经济，其状态为 $\\omega_1$、$\\omega_2$ 和 $\\omega_3$。存在一种无风险债券，在时刻 $0$ 的价格为 $B_0 = 1$，在时刻 $1$ 的确定性回报为 $B_1 = 1.05$。存在一种单一风险资产，在时刻 $0$ 的价格为 $S_0 = 100$，在时刻 $1$ 的状态依存回报由下式给出\n$$\nS_1(\\omega_1) = 120,\\quad S_1(\\omega_2) = 100,\\quad S_1(\\omega_3) = 80.\n$$\n一位分析师声称市场是无套利的，并提出了关于 $\\{\\omega_1,\\omega_2,\\omega_3\\}$ 的以下风险中性概率向量 $Q$：\n$$\nq_1 = 0.3,\\quad q_2 = 0.4,\\quad q_3 = 0.3.\n$$\n定义偏差\n$$\n\\delta \\equiv \\sum_{i=1}^{3} q_i \\frac{S_1(\\omega_i)}{B_1} - \\frac{S_0}{B_0}.\n$$\n将 $\\delta$ 精确计算为一个数值。不要对答案进行四舍五入。最终值不带单位表示。", "solution": "在尝试任何解答之前，对问题陈述进行验证。\n\n逐字提取已知条件：\n- 一个单期三状态经济，状态为 $\\omega_1$、$\\omega_2$ 和 $\\omega_3$。\n- 一种无风险债券，时刻 $0$ 的价格为 $B_0 = 1$，时刻 $1$ 的回报为 $B_1 = 1.05$。\n- 一种单一风险资产，时刻 $0$ 的价格为 $S_0 = 100$。\n- 风险资产在时刻 $1$ 的状态依存回报：$S_1(\\omega_1) = 120$，$S_1(\\omega_2) = 100$，$S_1(\\omega_3) = 80$。\n- 一个提出的风险中性概率向量 $Q$：$q_1 = 0.3$，$q_2 = 0.4$，$q_3 = 0.3$。\n- 偏差 $\\delta$ 的定义：$\\delta \\equiv \\sum_{i=1}^{3} q_i \\frac{S_1(\\omega_i)}{B_1} - \\frac{S_0}{B_0}$。\n- 目标是精确计算 $\\delta$。\n\n验证结论：该问题是有效的。它在科学上基于金融数学的基石——风险中性定价理论。所有术语定义清晰，所有必要的数值均已提供。该问题是自洽的、适定的和客观的。它可归结为基于给定公式的直接计算，不包含任何科学或逻辑谬误。\n\n任务是计算量 $\\delta$。其定义如下：\n$$\n\\delta = \\sum_{i=1}^{3} q_i \\frac{S_1(\\omega_i)}{B_1} - \\frac{S_0}{B_0}\n$$\n该表达式可以分析为风险资产在所提出的测度 $Q$ 下的预期未来回报的现值，与其观测到的现值之间的差值，其中两个值都由相应时间的无风险债券价格进行归一化。在一个无套利市场中，对于一个有效的风险中性测度，这个偏差必须为零。我们继续进行计算。\n\n首先，展开求和式：\n$$\n\\delta = \\left( q_1 \\frac{S_1(\\omega_1)}{B_1} + q_2 \\frac{S_1(\\omega_2)}{B_1} + q_3 \\frac{S_1(\\omega_3)}{B_1} \\right) - \\frac{S_0}{B_0}\n$$\n分母中的项 $B_1$ 是求和式中所有项的公因式，可以将其提取出来：\n$$\n\\delta = \\frac{1}{B_1} \\left( q_1 S_1(\\omega_1) + q_2 S_1(\\omega_2) + q_3 S_1(\\omega_3) \\right) - \\frac{S_0}{B_0}\n$$\n括号中的表达式是在概率测度 $Q$ 下资产在时刻 $1$ 的预期回报，记为 $E_Q[S_1]$。\n$$\nE_Q[S_1] = q_1 S_1(\\omega_1) + q_2 S_1(\\omega_2) + q_3 S_1(\\omega_3)\n$$\n代入给定的数值：$q_1=0.3$，$q_2=0.4$，$q_3=0.3$ 以及 $S_1(\\omega_1)=120$，$S_1(\\omega_2)=100$，$S_1(\\omega_3)=80$。\n$$\nE_Q[S_1] = (0.3)(120) + (0.4)(100) + (0.3)(80)\n$$\n$$\nE_Q[S_1] = 36 + 40 + 24 = 100\n$$\n现在，将此结果以及剩余的给定值 $B_1 = 1.05$、$S_0 = 100$ 和 $B_0 = 1$ 代回 $\\delta$ 的公式中。\n$$\n\\delta = \\frac{1}{1.05} (100) - \\frac{100}{1}\n$$\n为计算精确值，最好使用分数进行运算。数字 $1.05$ 等价于 $\\frac{105}{100}$，化简后为 $\\frac{21}{20}$。\n$$\n\\delta = \\frac{100}{\\frac{21}{20}} - 100\n$$\n$$\n\\delta = 100 \\times \\frac{20}{21} - 100\n$$\n$$\n\\delta = \\frac{2000}{21} - 100\n$$\n为了进行减法运算，我们找到公分母 $21$。\n$$\n\\delta = \\frac{2000}{21} - \\frac{100 \\times 21}{21} = \\frac{2000}{21} - \\frac{2100}{21}\n$$\n$$\n\\delta = \\frac{2000 - 2100}{21} = -\\frac{100}{21}\n$$\n计算出的 $\\delta$ 值不为零。这表明，在市场无套利的假设下，该分析师提出的概率向量 $Q$ 对于给定的资产价格而言，并非一个有效的风险中性测度。因此，分析师的说法与数据不一致。然而，基于所提供的公式，该计算过程是完整且正确的。", "answer": "$$\n\\boxed{-\\frac{100}{21}}\n$$", "id": "2427434"}, {"introduction": "风险中性定价的威力远不止为复杂的衍生品定价，它还为我们提供了一个解读任何具有或有支付（contingent payoff）证券价格的视角。这个练习将这一概念应用于一个现代且真实的场景：众筹活动 [@problem_id:2427390]。通过将众筹项目的“全有或全无”成功机制视为一种简单的数字期权，我们可以利用其市场价格（由一个“成功代币”代表）来反向推断市场隐含的风险中性成功概率，这展示了价格如何蕴含宝贵的概率信息。", "problem": "一个众筹平台采用“全有或全无”的募资规则：如果一个项目在截止日期前达到或超过其目标，则认捐资金将被收取；否则，认捐无效。考虑该平台上的一个可交易证券，一种“成功代币”，当且仅当众筹成功时，在活动截止日期支付$1$，否则支付$0$。假设市场无摩擦、无套利，且存在恒定的连续复利无风险利率。\n\n在当前时刻 $t=0$，观测到某特定项目的一个成功代币的价格为$0.41$。距离项目截止日期还有$45$天，年化连续复利无风险利率为$0.03$。假设一年为$365$天。\n\n仅使用这些输入和风险中性定价的基本原理，确定从观测到的代币价格中推断出的项目成功的风险中性概率（以无单位小数表示）。将您的答案四舍五入到四位有效数字。", "solution": "首先必须严格验证所述问题。\n\n**第一步：提取已知条件**\n- 证券类型：“成功代币”，在截止日期时若众筹成功则支付$1$，否则支付$0$。\n- 市场假设：无摩擦市场、无套利、恒定的连续复利无风险利率。\n- 时刻 $t=0$ 时的代币价格：$P_0 = 0.41$。\n- 距离截止日期的时间：$T = 45$ 天。\n- 年化连续复利无风险利率：$r = 0.03$。\n- 年份约定：$365$ 天。\n\n**第二步：使用提取的已知条件进行验证**\n- **科学依据**：该问题正确地构建在成熟的无套利定价理论框架内，特别是风险中性定价。这是数理金融中的一个基本概念。\n- **适定性**：该问题提供了确定唯一解所需的所有信息。输入（$P_0$、$r$、$T$ 和支付结构）足以计算未知的风险中性概率。\n- **客观性**：该问题使用精确、量化且明确的语言进行陈述。没有主观或推测性元素。\n\n**第三步：结论与行动**\n该问题具有科学依据、适定且客观。它被判定为**有效**。现在将从基本原理推导解决方案。\n\n无套利定价的基本原理规定，衍生证券的价格是其未来预期收益的现值，其中期望是在风险中性概率测度（记为 $Q$）下计算的。\n\n设 $P_t$ 为成功代币在时刻 $t$ 的价格。已知 $P_0 = 0.41$。\n设 $T$ 为距离项目截止日期的时间，以年为单位。鉴于距离截止日期还有$45$天，且一年有$365$天，我们有：\n$$T = \\frac{45}{365}$$\n年化连续复利无风险利率为 $r = 0.03$。\n\n代币在截止日期的收益 $V_T$ 是一个取决于项目结果的随机变量。设 $S$ 表示项目成功的事件，$F$ 表示失败的事件。支付结构为：\n$$\nV_T = \n\\begin{cases} \n1  \\text{若事件 } S \\text{ 发生} \\\\\n0  \\text{若事件 } F \\text{ 发生}\n\\end{cases}\n$$\n我们的任务是找到成功的风险中性概率。设此概率为 $q$。因此，在风险中性测度 $Q$ 下：\n$$q = Q(S)$$\n$$1-q = Q(F)$$\n在风险中性测度下，时刻 $T$ 的预期收益 $E_Q[V_T]$ 计算如下：\n$$E_Q[V_T] = (1 \\times q) + (0 \\times (1-q)) = q$$\n在时刻 $t=0$ 时，代币的无套利价格是贴现后的预期收益：\n$$P_0 = \\exp(-rT) E_Q[V_T]$$\n代入预期收益的表达式，我们得到：\n$$P_0 = q \\cdot \\exp(-rT)$$\n现在我们必须解这个方程，求出 $q$：\n$$q = P_0 \\cdot \\exp(rT)$$\n现在，我们将给定的数值代入此表达式：\n$$P_0 = 0.41$$\n$$r = 0.03$$\n$$T = \\frac{45}{365}$$\n这得出：\n$$q = 0.41 \\cdot \\exp\\left(0.03 \\cdot \\frac{45}{365}\\right)$$\n首先计算指数部分：\n$$rT = 0.03 \\times \\frac{45}{365} = \\frac{1.35}{365} \\approx 0.00369863$$\n然后我们计算 $q$ 的值：\n$$q = 0.41 \\cdot \\exp(0.00369863...) \\approx 0.41 \\cdot 1.0037054... \\approx 0.4115192...$$\n问题要求答案四舍五入到四位有效数字。前四位有效数字是 $4$、$1$、$1$ 和 $5$。第五位有效数字是 $1$，小于 $5$，因此我们向下舍入。\n$$q \\approx 0.4115$$\n这个值代表了与观测到的市场价格和无套利条件相一致的唯一的项目成功风险中性概率。它不一定是真实的、现实世界中的概率，而是在风险中性框架下用于定价的概率。", "answer": "$$\\boxed{0.4115}$$", "id": "2427390"}, {"introduction": "在探讨了核心定义和直观应用之后，我们现在转向现代金融学的标准模型：几何布朗运动（Geometric Brownian Motion）。这个练习要求我们在连续时间框架下，为一种“幂期权”（power option）推导出其定价公式 [@problem_id:701821]。这项任务将磨练您处理对数正态过程以及在风险中性测度下计算期望值的技能，这是量化金融领域的一块基石。", "problem": "在量化金融的背景下，资产价格 $S_t$ 通常由几何布朗运动 (GBM) 建模。在风险中性概率测度 $\\mathbb{Q}$ 下，资产价格的动态过程由以下随机微分方程 (SDE) 描述：\n$$\ndS_t = r S_t dt + \\sigma S_t dW_t^{\\mathbb{Q}}\n$$\n其中 $r$ 是恒定的无风险利率，$\\sigma > 0$ 是恒定的波动率，而 $W_t^{\\mathbb{Q}}$ 是在 $\\mathbb{Q}$ 下的标准维纳过程。资产在时间 $t=0$ 时的初始价格为 $S_0$。\n\n欧式幂期权是一种金融衍生品，它在指定的到期时间 $T$ 给予其持有者 $(S_T)^p$ 的收益。此处，$p$ 是一个正常数。此期权在时间 $t=0$ 时的无套利价格，记为 $V_0$，由风险中性定价公式给出，即收益的折现期望值：\n$$\nV_0 = e^{-rT} \\mathbb{E}^{\\mathbb{Q}}[(S_T)^p]\n$$\n其中 $\\mathbb{E}^{\\mathbb{Q}}[\\cdot]$ 表示在风险中性测度下，基于时间 $t=0$ 时可用信息计算的期望。\n\n推导该欧式幂期权在零时刻的价值 $V_0$ 的解析表达式。你的最终答案应为一个用 $S_0, r, \\sigma, T,$ 和 $p$ 表示的闭式表达式。", "solution": "1. 几何布朗运动的解可以通过对随机微分方程积分得到：\n$$\\frac{dS_t}{S_t}=r\\,dt+\\sigma\\,dW_t^{\\mathbb{Q}}\\,. $$\n因此\n$$\nS_T=S_0\\exp\\Bigl(\\bigl(r-\\tfrac{1}{2}\\sigma^2\\bigr)T+\\sigma W_T^{\\mathbb{Q}}\\Bigr).\n$$\n2. 我们计算在 $\\mathbb{Q}$ 下的 $p$ 阶矩：\n$$\n\\mathbb{E}^{\\mathbb{Q}}[S_T^p]\n= S_0^p\\exp\\bigl(p(r-\\tfrac{1}{2}\\sigma^2)T\\bigr)\\,\\mathbb{E}^{\\mathbb{Q}}\\!\\Bigl[e^{p\\sigma W_T^{\\mathbb{Q}}}\\Bigr].\n$$\n因为 $W_T^{\\mathbb{Q}}\\sim N(0,T)$，\n$$\n\\mathbb{E}^{\\mathbb{Q}}\\bigl[e^{p\\sigma W_T^{\\mathbb{Q}}}\\bigr]\n=\\exp\\bigl(\\tfrac{1}{2}p^2\\sigma^2T\\bigr).\n$$\n从而\n$$\n\\mathbb{E}^{\\mathbb{Q}}[S_T^p]\n= S_0^p\\exp\\Bigl(p(r-\\tfrac{1}{2}\\sigma^2)T+\\tfrac{1}{2}p^2\\sigma^2T\\Bigr)\n= S_0^p\\exp\\Bigl(prT+\\tfrac{1}{2}(p^2-p)\\sigma^2T\\Bigr).\n$$\n3. 以利率 $r$ 进行折现可得：\n$$\nV_0=e^{-rT}\\mathbb{E}^{\\mathbb{Q}}[S_T^p]\n= S_0^p\\exp\\Bigl((p-1)rT+\\tfrac{1}{2}p(p-1)\\sigma^2T\\Bigr).\n$$", "answer": "$$\\boxed{S_0^p\\exp\\left((p-1)rT+\\frac{1}{2}p(p-1)\\sigma^2T\\right)}$$", "id": "701821"}]}