{"hands_on_practices": [{"introduction": "这个练习颠覆了典型的IRR问题。你将不再是为给定的现金流寻找回报率，而是要去确定在某个时间点上需要多少现金流才能实现一个预设的目标IRR。这种实践强化了净现值 (NPV) 方程的基本代数结构，并展示了其在财务规划和目标设定中的直接效用。[@problem_id:2403004]", "problem": "您需要实现一个完整、可运行的程序，该程序计算单个缺失的现金流，以实现指定的内部收益率（IRR）。内部收益率（IRR）被定义为使一系列现金流的净现值（NPV）等于零的唯一贴现率 $r$。现金流 $\\{C_t\\}_{t=0}^{T}$ 在整数时间 $t \\in \\{0,1,\\dots,T\\}$ 发生，其在贴现率 $r$ 下的净现值（NPV）定义为\n$$\n\\mathrm{NPV}(r; C_0,\\dots,C_T) \\equiv \\sum_{t=0}^{T} \\frac{C_t}{(1+r)^t}.\n$$\n您的任务是利用此定义推导出一个算法，在给定目标贴现率 $r^\\ast$ 和序列 $\\{C_t\\}_{t=0}^{T}$ 中单个未知现金流 $C_k$ 的情况下，计算出使 $\\mathrm{NPV}(r^\\ast; C_0,\\dots,C_T) = 0$ 成立的唯一 $C_k$ 值。\n\n要求和假设：\n- 时间 $t$ 为整数，满足 $t \\in \\{0,1,\\dots,T\\}$ 且 $T$ 是有限的。\n- 恰好有一个现金流是未知的；其索引记为 $k$，其中 $k \\in \\{0,1,\\dots,T\\}$。\n- 目标贴现率 $r^\\ast$ 必须满足 $r^\\ast  -1$，以确保 $(1+r^\\ast)  0$。\n- 所有现金流均为实数。正值代表现金流入，负值代表现金流出。\n- 百分比必须按小数处理（例如，百分之十的利率必须作为 $0.10$ 输入和处理）。\n\n编程任务：\n- 编写一个函数，该函数接收 $r^\\ast$ 和一个包含恰好一个缺失值 $C_k$ 的现金流列表，计算出满足 $\\mathrm{NPV}(r^\\ast; C_0,\\dots,C_T)=0$ 所需的 $C_k$，并返回 $C_k$。\n- 索引 $k$ 应根据其在列表中的缺失位置推断出来。\n- 对于数值输出，将计算出的 $C_k$ 四舍五入到 $6$ 位小数。\n\n测试套件：\n请严格按照以下顺序使用五个测试用例。在每个用例中，列表都包含一个由特殊占位符表示的缺失条目。为具体起见，请使用编程语言中表示缺失值的哨兵值。您必须计算并输出相应的 $C_k$ 值。测试定义中的所有数字都应解释为实数值：\n\n1. 目标利率 $r^\\ast = 0.10$，现金流 $[\\,\\text{缺失值},\\, 50.0,\\, 60.0,\\, 70.0\\,]$，其中 $t \\in \\{0,1,2,3\\}$。\n2. 目标利率 $r^\\ast = -0.20$，现金流 $[\\,-100.0,\\, \\text{缺失值},\\, 150.0\\,]$，其中 $t \\in \\{0,1,2\\}$。\n3. 目标利率 $r^\\ast = -0.90$，现金流 $[\\,-100.0,\\, \\text{缺失值}\\,]$，其中 $t \\in \\{0,1\\}$。\n4. 目标利率 $r^\\ast = 0.05$，现金流 $[\\,-100.0,\\, 0.0,\\, 0.0,\\, 0.0,\\, \\text{缺失值}\\,]$，其中 $t \\in \\{0,1,2,3,4\\}$。\n5. 目标利率 $r^\\ast = 0.12$，现金流 $[\\,-200.0,\\, 80.0,\\, \\text{缺失值},\\, 50.0\\,]$，其中 $t \\in \\{0,1,2,3\\}$。\n\n最终输出格式：\n- 您的程序应生成单行输出，其中包含五个结果，以逗号分隔的列表形式置于方括号内，每个数字四舍五入到 $6$ 位小数，且无多余空格。例如，格式必须与 `\"[x1,x2,x3,x4,x5]\"` 完全相同，其中每个 $x_i$ 是一个打印为 $6$ 位小数的实数。\n- 程序不要求也不允许用户输入；程序必须按原样运行，并仅打印上述测试套件的结果。", "solution": "对所述问题进行验证。\n\n### 第 1 步：提取已知条件\n\n从问题陈述中逐字提取已知条件：\n- **净现值（NPV）的定义**：对于在整数时间 $t \\in \\{0, 1, \\dots, T\\}$ 发生的一系列现金流 $\\{C_t\\}_{t=0}^{T}$，其在贴现率 $r$ 下的净现值为\n$$\n\\mathrm{NPV}(r; C_0,\\dots,C_T) \\equiv \\sum_{t=0}^{T} \\frac{C_t}{(1+r)^t}.\n$$\n- **任务**：在给定目标贴现率 $r^\\ast$ 的情况下，计算单个缺失的现金流 $C_k$，以满足条件 $\\mathrm{NPV}(r^\\ast; C_0,\\dots,C_T) = 0$。\n- **约束与假设**：\n    - 时间 $t$ 为整数：$t \\in \\{0, 1, \\dots, T\\}$。\n    - 恰好有一个现金流 $C_k$ 未知，其中 $k \\in \\{0, 1, \\dots, T\\}$。\n    - 目标贴现率 $r^\\ast$ 满足 $r^\\ast  -1$。\n    - 所有现金流 $C_t$ 均为实数。\n    - 百分比必须按小数处理。\n- **编程要求**：\n    - 缺失现金流的索引 $k$ 将根据其在输入列表中的位置推断。\n    - 计算出的 $C_k$ 值必须四舍五入到 $6$ 位小数。\n- **测试套件**：\n    1. $r^\\ast = 0.10$，现金流：$[\\,\\text{缺失值},\\, 50.0,\\, 60.0,\\, 70.0\\,]$，$t \\in \\{0,1,2,3\\}$。\n    2. $r^\\ast = -0.20$，现金流：$[\\,-100.0,\\, \\text{缺失值},\\, 150.0\\,]$，$t \\in \\{0,1,2\\}$。\n    3. $r^\\ast = -0.90$，现金流：$[\\,-100.0,\\, \\text{缺失值}\\,]$，$t \\in \\{0,1\\}$。\n    4. $r^\\ast = 0.05$，现金流：$[\\,-100.0,\\, 0.0,\\, 0.0,\\, 0.0,\\, \\text{缺失值}\\,]$，$t \\in \\{0,1,2,3,4\\}$。\n    5. $r^\\ast = 0.12$，现金流：$[\\,-200.0,\\, 80.0,\\, \\text{缺失值},\\, 50.0\\,]$，$t \\in \\{0,1,2,3\\}$。\n\n### 第 2 步：使用提取的已知条件进行验证\n\n根据既定标准对问题进行评估。\n- **科学性**：该问题基于金融和经济学中使用的净现值的标准基本定义。这个概念在数学上是合理的，并被广泛接受。约束条件 $r^\\ast  -1$ 确保了贴现因子 $(1+r^\\ast)$ 为正，这是良好金融模型的标准要求。\n- **适定性**：该问题要求在一个关于 $C_k$ 的线性方程中求解单个未知数 $C_k$。一个单变量线性方程有唯一解。因此，该问题是适定的。\n- **客观性**：该问题以精确的数学语言陈述，没有歧义、主观性或个人观点。\n- **完整性与一致性**：该问题提供了所有必要信息：控制方程、约束条件和用于测试的特定输入数据。所提供的信息内部一致。\n\n### 第 3 步：结论与行动\n\n问题陈述是**有效的**。它具有科学性、适定性和完整性。我将继续推导解决方案。\n\n目标是在给定目标贴现率 $r^\\ast$ 的情况下，找到时间点 $k$ 的未知现金流 $C_k$ 的值，使得整个现金流序列 $\\{C_t\\}_{t=0}^{T}$ 的净现值为零。\n\n定义方程为：\n$$\n\\mathrm{NPV}(r^\\ast; C_0, \\dots, C_T) = \\sum_{t=0}^{T} \\frac{C_t}{(1+r^\\ast)^t} = 0\n$$\n这个求和式可以展开，将包含未知现金流 $C_k$ 的项与包含已知现金流的项分开。设 $S$ 是现金流已知的时间索引集合。所有时间索引的集合是 $\\{0, 1, \\dots, T\\}$。未知现金流的索引是 $k$，所以 $S = \\{0, 1, \\dots, T\\} \\setminus \\{k\\}$。该方程可以重写为：\n$$\n\\frac{C_k}{(1+r^\\ast)^k} + \\sum_{t \\in S} \\frac{C_t}{(1+r^\\ast)^t} = 0\n$$\n由于该方程对于未知数 $C_k$ 是线性的，我们可以直接求解。首先，我们分离出包含 $C_k$ 的项：\n$$\n\\frac{C_k}{(1+r^\\ast)^k} = - \\sum_{t \\in S} \\frac{C_t}{(1+r^\\ast)^t}\n$$\n右侧的求和项代表所有*已知*现金流的净现值，按利率 $r^\\ast$ 计算。我们将这个和记为 $\\mathrm{NPV}_{\\text{known}}$。\n$$\n\\mathrm{NPV}_{\\text{known}} = \\sum_{t=0, t \\neq k}^{T} \\frac{C_t}{(1+r^\\ast)^t}\n$$\n将其代回，我们得到：\n$$\n\\frac{C_k}{(1+r^\\ast)^k} = - \\mathrm{NPV}_{\\text{known}}\n$$\n为了求出 $C_k$，我们将方程两边同时乘以因子 $(1+r^\\ast)^k$。条件 $r^\\ast  -1$ 确保了 $(1+r^\\ast) \\neq 0$，因此这个操作总是有效的。\n$$\nC_k = - \\mathrm{NPV}_{\\text{known}} \\cdot (1+r^\\ast)^k\n$$\n这就为未知现金流 $C_k$ 提供了一个直接的解析公式。实现该公式的算法如下：\n1.  接收目标利率 $r^\\ast$ 和现金流列表，该列表在索引 $k$ 处包含一个表示未知值的特殊标记。\n2.  识别出与缺失现金流对应的索引 $k$。\n3.  计算所有*已知*现金流的现值之和。这通过从 $t=0$ 迭代到 $t=T$，跳过索引 $k$，并对每个已知的现金流 $C_t$ 计算 $\\frac{C_t}{(1+r^\\ast)^t}$ 并将其累加到一个总和中来实现。\n4.  将此总和乘以 $-1$，然后再乘以 $(1+r^\\ast)^k$，以获得 $C_k$ 的最终值。\n5.  将结果四舍五入到指定的 $6$ 位小数精度。\n\n这个过程在计算上很简单，并且保证对于任何有效的输入集都能产生唯一的正确答案。实现将遵循此逻辑。", "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes a single missing cash flow to achieve a specified Internal Rate of Return (IRR).\n    The program is self-contained and processes a fixed set of test cases.\n    \"\"\"\n\n    # Define the test cases from the problem statement.\n    # The missing value is represented by the Python sentinel `None`.\n    test_cases = [\n        {'r_star': 0.10, 'cash_flows': [None, 50.0, 60.0, 70.0]},\n        {'r_star': -0.20, 'cash_flows': [-100.0, None, 150.0]},\n        {'r_star': -0.90, 'cash_flows': [-100.0, None]},\n        {'r_star': 0.05, 'cash_flows': [-100.0, 0.0, 0.0, 0.0, None]},\n        {'r_star': 0.12, 'cash_flows': [-200.0, 80.0, None, 50.0]},\n    ]\n\n    def compute_missing_cashflow(r_star: float, cash_flows: list) - float:\n        \"\"\"\n        Calculates the value of a single missing cash flow C_k that makes the NPV of the\n        cash flow series equal to zero for a given target rate r_star.\n\n        Args:\n            r_star: The target discount rate (as a decimal).\n            cash_flows: A list of cash flows, with exactly one entry being None.\n\n        Returns:\n            The value of the missing cash flow C_k, rounded to 6 decimal places.\n        \"\"\"\n        if not (r_star  -1):\n            raise ValueError(\"Target rate r_star must be greater than -1.\")\n        \n        try:\n            k = cash_flows.index(None)\n        except ValueError:\n            raise ValueError(\"The cash_flows list must contain exactly one 'None' placeholder.\")\n            \n        npv_of_known_flows = 0.0\n        # The sum is taken over all known cash flows\n        # The equation to solve is: C_k/(1+r*)^k + sum_{t!=k} C_t/(1+r*)^t = 0\n        for t, cf in enumerate(cash_flows):\n            if cf is not None:\n                npv_of_known_flows += cf / ((1 + r_star)**t)\n        \n        # From the equation, C_k = - (sum_{t!=k} C_t/(1+r*)^t) * (1+r*)^k\n        c_k = -npv_of_known_flows * ((1 + r_star)**k)\n        \n        return round(c_k, 6)\n\n    results = []\n    for case in test_cases:\n        r_star = case['r_star']\n        flows = case['cash_flows']\n        missing_flow = compute_missing_cashflow(r_star, flows)\n        results.append(f\"{missing_flow:.6f}\") # Format to ensure 6 decimal places\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(results)}]\")\n\nsolve()\n```", "id": "2403004"}, {"introduction": "许多金融模型涉及无限延续的现金流，例如来自一家稳定公司的股息。这个问题挑战你计算一个具有无限期但按几何级数递减的现金流的项目的IRR。掌握此方法需要应用无限几何级数的求和公式，这是为长期资产估值的强大工具。[@problem_id:2403066]", "problem": "一个项目在日期 $0$ 需要一笔 $980$ 货币单位的初始支出。随后的现金流发生在整数日期 $t = 1, 2, 3, \\dots$，并遵循一个几何级数 $C_t = C_1 g^{t-1}$，其中 $C_1 = 123$ 且 $g = 0.93$。在周期长度等于1的标准折现现金流惯例下，内部收益率 (IRR) 定义为满足以下等式的实数 $r$：\n$$-980 + \\sum_{t=1}^{\\infty} \\frac{C_t}{(1+r)^{t}} = 0.$$\n求内部收益率 $r$。将您的答案表示为小数（不带百分号），并四舍五入到四位有效数字。", "solution": "该问题要求计算一个具有特定现金流的项目的内部收益率，记为 $r$。内部收益率的基本定义是使一个项目或投资的所有现金流（包括流入和流出）的净现值 (NPV) 等于零的折现率。\n\n问题给出了以下计算NPV的控制方程：\n$$ -980 + \\sum_{t=1}^{\\infty} \\frac{C_t}{(1+r)^{t}} = 0 $$\n在时间 $t=0$ 的初始支出是 $C_0 = -980$。在时间 $t \\ge 1$ 的后续现金流由几何级数 $C_t = C_1 g^{t-1}$ 给出，其中第一笔现金流为 $C_1 = 123$，级数的公比为 $g = 0.93$。\n\n将 $C_t$ 的表达式代入NPV方程，得到：\n$$ -980 + \\sum_{t=1}^{\\infty} \\frac{123 \\cdot (0.93)^{t-1}}{(1+r)^{t}} = 0 $$\n为了求解 $r$，我们必须首先计算这个无穷级数的和，它代表了未来现金流入的现值。我们用 $S$ 表示这个和。\n$$ S = \\sum_{t=1}^{\\infty} \\frac{123 \\cdot (0.93)^{t-1}}{(1+r)^{t}} $$\n我们可以提出常数项 $C_1 = 123$：\n$$ S = 123 \\sum_{t=1}^{\\infty} \\frac{(0.93)^{t-1}}{(1+r)^{t}} $$\n为了将求和表示成标准几何级数形式 $\\sum_{n=0}^{\\infty} ax^n$，我们对求和号内的项进行变换：\n$$ \\frac{(0.93)^{t-1}}{(1+r)^{t}} = \\frac{1}{1+r} \\cdot \\frac{(0.93)^{t-1}}{(1+r)^{t-1}} = \\frac{1}{1+r} \\left(\\frac{0.93}{1+r}\\right)^{t-1} $$\n将此代回 $S$ 的表达式中：\n$$ S = 123 \\sum_{t=1}^{\\infty} \\frac{1}{1+r} \\left(\\frac{0.93}{1+r}\\right)^{t-1} $$\n我们可以提出项 $\\frac{1}{1+r}$，因为它不依赖于求和指数 $t$：\n$$ S = \\frac{123}{1+r} \\sum_{t=1}^{\\infty} \\left(\\frac{0.93}{1+r}\\right)^{t-1} $$\n我们引入一个新的指数 $k = t-1$。当 $t=1$ 时，$k=0$。当 $t \\to \\infty$ 时，$k \\to \\infty$。求和变为：\n$$ S = \\frac{123}{1+r} \\sum_{k=0}^{\\infty} \\left(\\frac{0.93}{1+r}\\right)^{k} $$\n这个求和现在是一个标准几何级数，其首项 $a=1$，公比为 $x = \\frac{0.93}{1+r}$。这样一个级数的和收敛于 $\\frac{1}{1-x}$，当且仅当公比的绝对值小于 $1$，即 $|x|  1$。\n这施加了以下条件：\n$$ \\left| \\frac{0.93}{1+r} \\right|  1 $$\n假设此条件成立，则级数的和为：\n$$ \\sum_{k=0}^{\\infty} \\left(\\frac{0.93}{1+r}\\right)^{k} = \\frac{1}{1 - \\frac{0.93}{1+r}} = \\frac{1}{\\frac{(1+r) - 0.93}{1+r}} = \\frac{1+r}{1+r - 0.93} = \\frac{1+r}{r + 0.07} $$\n现在，我们将此结果代回 $S$ 的表达式中：\n$$ S = \\frac{123}{1+r} \\cdot \\frac{1+r}{r + 0.07} = \\frac{123}{r + 0.07} $$\n这是无限现金流入流的现值。NPV方程现在可以写为：\n$$ -980 + \\frac{123}{r + 0.07} = 0 $$\n我们现在求解这个关于 $r$ 的方程：\n$$ \\frac{123}{r + 0.07} = 980 $$\n$$ 123 = 980(r + 0.07) $$\n$$ r + 0.07 = \\frac{123}{980} $$\n$$ r = \\frac{123}{980} - 0.07 $$\n现在我们必须计算其数值。\n$$ \\frac{123}{980} \\approx 0.125510204 $$\n$$ r \\approx 0.125510204 - 0.07 = 0.055510204 $$\n问题要求答案四舍五入到四位有效数字。第一位有效数字是第一个非零数字，即百分位上的 $5$。四位有效数字是 $5, 5, 5, 1$。第四位有效数字后面的数字是 $0$，小于 $5$，所以我们不向上取整。\n$$ r \\approx 0.05551 $$\n最后，我们必须验证我们最初的收敛假设对于这个 $r$ 值是否成立。\n$$ \\left| \\frac{0.93}{1+r} \\right| = \\left| \\frac{0.93}{1+0.05551} \\right| = \\left| \\frac{0.93}{1.05551} \\right| \\approx |0.8811| $$\n由于 $0.8811  1$，收敛条件得到满足，因此解是有效的。", "answer": "$$\\boxed{0.05551}$$", "id": "2403066"}, {"introduction": "当合并多个投资项目时，人们可能直观地认为投资组合的IRR就是各个项目IRR的某种平均值。这个练习将证明事实并非如此，这对风险管理和资本预算来说是一个至关重要的见解。通过计算一个组合投资的IRR，你将直接面对IRR的非线性特性，并理解为什么它不能被简单地相加或平均。[@problem_id:2403026]", "problem": "一家公司评估两个独立的、规模固定的项目，其年度现金流如下。时间以年为单位，现金流发生在每年年末。项目A的现金流为 $C^{A}_{0}=-100$，$C^{A}_{1}=+60$，$C^{A}_{2}=+60$。项目B的现金流为 $C^{B}_{0}=-100$，$C^{B}_{1}=+0$，$C^{B}_{2}=+130$。该公司通过投资一个单位的项目A和一个单位的项目B来构建一个投资组合，因此该投资组合的现金流为 $C^{P}_{t}=C^{A}_{t}+C^{B}_{t}$，其中 $t\\in\\{0,1,2\\}$。\n\n根据定义，内部收益率（IRR）是使净现值（NPV）为零的数值 $r$，即对于给定的现金流 $\\{C_{t}\\}_{t=0}^{T}$，有 $\\sum_{t=0}^{T}\\frac{C_{t}}{(1+r)^{t}}=0$。\n\n仅使用此定义，计算投资组合的IRR，并基于NPV定义的方程，证明为何投资组合的IRR不是各单个IRR以初始投资额为权重的简单加权平均。仅报告投资组合的IRR，以小数形式表示，并四舍五入至四位有效数字。不要使用百分号。", "solution": "问题陈述已经过验证，被认为是科学合理的、定义明确且客观的。这是计算金融学中的一个标准问题。\n\n首先，我们确定投资组合的现金流。该投资组合包含一个单位的项目A和一个单位的项目B。投资组合在时间 $t$ 的现金流（记为 $C^{P}_{t}$）是各单个项目现金流的总和，$C^{P}_{t} = C^{A}_{t} + C^{B}_{t}$。\n\n给定的现金流如下：\n项目A：$C^{A}_{0}=-100$，$C^{A}_{1}=+60$，$C^{A}_{2}=+60$。\n项目B：$C^{B}_{0}=-100$，$C^{B}_{1}=+0$，$C^{B}_{2}=+130$。\n\n由此产生的投资组合现金流为：\n$C^{P}_{0} = C^{A}_{0} + C^{B}_{0} = -100 + (-100) = -200$。\n$C^{P}_{1} = C^{A}_{1} + C^{B}_{1} = 60 + 0 = 60$。\n$C^{P}_{2} = C^{A}_{2} + C^{B}_{2} = 60 + 130 = 190$。\n\n投资组合的内部收益率（IRR），我们记为 $r_{P}$，是使投资组合现金流的净现值（NPV）为零的贴现率。投资组合的NPV由以下方程给出：\n$$\n\\text{NPV}_{P}(r) = \\sum_{t=0}^{2} \\frac{C^{P}_{t}}{(1+r)^{t}} = C^{P}_{0} + \\frac{C^{P}_{1}}{1+r} + \\frac{C^{P}_{2}}{(1+r)^{2}}\n$$\n令 $\\text{NPV}_{P}(r_{P}) = 0$：\n$$\n-200 + \\frac{60}{1+r_{P}} + \\frac{190}{(1+r_{P})^{2}} = 0\n$$\n为了解出 $r_{P}$，我们引入换元 $x = \\frac{1}{1+r_{P}}$。该方程变为关于 $x$ 的一元二次方程：\n$$\n190x^{2} + 60x - 200 = 0\n$$\n两边同除以 $10$ 可将方程简化为：\n$$\n19x^{2} + 6x - 20 = 0\n$$\n我们使用二次公式 $x = \\frac{-b \\pm \\sqrt{b^{2}-4ac}}{2a}$ 求解 $x$：\n$$\nx = \\frac{-6 \\pm \\sqrt{6^{2} - 4(19)(-20)}}{2(19)} = \\frac{-6 \\pm \\sqrt{36 + 1520}}{38} = \\frac{-6 \\pm \\sqrt{1556}}{38}\n$$\n由于 $r_{P}$ 代表传统投资的利率，我们预期 $1+r_{P}  0$，这意味着 $x = \\frac{1}{1+r_{P}}$ 必须为正。因此，我们取正根：\n$$\nx = \\frac{-6 + \\sqrt{1556}}{38} = \\frac{-6 + 2\\sqrt{389}}{38} = \\frac{-3 + \\sqrt{389}}{19}\n$$\n使用数值近似 $\\sqrt{389} \\approx 19.72308$，我们得到：\n$$\nx \\approx \\frac{-3 + 19.72308}{19} = \\frac{16.72308}{19} \\approx 0.880162\n$$\n现在我们从换元式 $x = \\frac{1}{1+r_{P}}$ 中解出 $r_{P}$：\n$$\n1+r_{P} = \\frac{1}{x} \\approx \\frac{1}{0.880162} \\approx 1.136154\n$$\n$$\nr_{P} \\approx 1.136154 - 1 = 0.136154\n$$\n四舍五入至四位有效数字，投资组合的IRR为 $0.1362$。\n\n接下来，我们必须证明为何投资组合的IRR不是单个项目IRR的简单加权平均。设 $r_{A}$ 和 $r_{B}$ 分别为项目A和项目B的IRR。它们由各自NPV方程的根定义：\n$$\n\\text{NPV}_{A}(r_{A}) = \\sum_{t=0}^{2} \\frac{C^{A}_{t}}{(1+r_{A})^{t}} = -100 + \\frac{60}{1+r_{A}} + \\frac{60}{(1+r_{A})^{2}} = 0\n$$\n$$\n\\text{NPV}_{B}(r_{B}) = \\sum_{t=0}^{2} \\frac{C^{B}_{t}}{(1+r_{B})^{t}} = -100 + \\frac{0}{1+r_{B}} + \\frac{130}{(1+r_{B})^{2}} = 0\n$$\n投资组合的IRR, $r_{P}$，由投资组合NPV方程的根定义：\n$$\n\\text{NPV}_{P}(r_{P}) = \\sum_{t=0}^{2} \\frac{C^{P}_{t}}{(1+r_{P})^{t}} = \\sum_{t=0}^{2} \\frac{C^{A}_{t} + C^{B}_{t}}{(1+r_{P})^{t}} = 0\n$$\n根据求和的可加性，这可以表示为：\n$$\n\\sum_{t=0}^{2} \\frac{C^{A}_{t}}{(1+r_{P})^{t}} + \\sum_{t=0}^{2} \\frac{C^{B}_{t}}{(1+r_{P})^{t}} = 0\n$$\n这等价于陈述 $\\text{NPV}_{A}(r_{P}) + \\text{NPV}_{B}(r_{P}) = 0$。\n\n单个IRR的加权平均值，其权重 $w_{A}$ 和 $w_{B}$ 与初始投资额 $|C^{A}_{0}|=100$ 和 $|C^{B}_{0}|=100$ 成正比，应为 $r_{\\text{avg}} = w_{A}r_{A} + w_{B}r_{B}$。由于初始投资相等，权重为 $w_A=w_B=0.5$，平均值为 $r_{\\text{avg}} = \\frac{r_{A}+r_{B}}{2}$。\n\n断言 $r_{P} = r_{\\text{avg}}$ 是不正确的。根本原因在于NPV函数相对于贴现率 $r$ 的非线性。IRR是方程 $\\text{NPV}(r)=0$ 的一个根。两个非线性函数之和 $\\text{NPV}_{A}(r) + \\text{NPV}_{B}(r) = 0$ 的根，通常不是单个函数 $\\text{NPV}_{A}(r_{A})=0$ 和 $\\text{NPV}_{B}(r_{B})=0$ 各自根的简单平均值。\n\n准确地说，NPV和 $r$ 之间的关系涉及 $(1+r)^{-t}$ 形式的项，这些是关于 $r$ 的非线性函数。要使根具有加权平均这样的性质，函数需要是关于变量的线性函数。例如，如果 $\\text{NPV}(r)$ 是 $r$ 的线性函数，比如 $\\text{NPV}_{i}(r) = k_{i}(r_{i}-r)$，那么 $\\text{NPV}_{P}(r) = k_{A}(r_{A}-r) + k_{B}(r_{B}-r)$。将其设为零将得到 $r_{P} = \\frac{k_{A}}{k_{A}+k_{B}}r_{A} + \\frac{k_{B}}{k_{A}+k_{B}}r_{B}$，这是一个加权平均值。然而，NPV函数显然不是 $r$ 的线性函数。\n\n因此，方程 $\\text{NPV}_{A}(r_{P}) + \\text{NPV}_{B}(r_{P}) = 0$ 必须直接求解 $r_{P}$，其解不能假定为 $r_{A}$ 和 $r_{B}$ 的线性组合。对于非线性函数，求根运算与加法运算不能以这种方式交换。这构成了对投资组合IRR是各组成部分IRR的简单加权平均这一观点的正式反驳。\n\n计算出的投资组合IRR为 $r_{P} \\approx 0.136154$。为完整起见，单个IRR分别为 $r_{A} \\approx 0.1307$ 和 $r_{B} \\approx 0.1402$。加权平均值为 $r_{\\text{avg}} \\approx \\frac{0.1307+0.1402}{2} \\approx 0.1355$。正如形式论证和显式计算所证明的，$r_{P} \\neq r_{\\text{avg}}$。\n最终答案是投资组合IRR四舍五入至四位有效数字。\n$r_{P} \\approx 0.1362$。", "answer": "$$\n\\boxed{0.1362}\n$$", "id": "2403026"}]}