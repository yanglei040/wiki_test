{"hands_on_practices": [{"introduction": "经典的效用理论不仅能指导我们如何做出最优决策，还能帮助我们从已有的决策中反推决策者的风险偏好。这个问题将我们置于一个金融分析师的角色，通过观察一个投资者在风险资产（如标准普尔500指数）和无风险资产之间的资金分配，来推断其隐含的相对风险厌恶系数 $\\gamma$。这项练习是 Robert Merton 投资组合理论的一个经典应用，它展示了如何将抽象的效用函数概念与现实世界中的投资行为联系起来 [@problem_id:2445855]。", "problem": "一位投资者将其财富的一个固定比例分配给标准普尔（SP）$500$指数，剩余部分则投资于一个无风险货币市场账户。该投资者对期末财富具有恒定相对风险厌恶（CRRA）偏好，其效用函数为 $U(W) = \\frac{W^{1-\\gamma}}{1-\\gamma}$，其中 $\\gamma  0$，$\\gamma \\neq 1$。标准普尔500指数价格 $S_t$ 服从几何布朗运动（GBM），由 $\\mathrm{d}S_t/S_t = \\mu \\,\\mathrm{d}t + \\sigma \\,\\mathrm{d}B_t$ 给出，其中 $\\mu$ 和 $\\sigma$ 是常数，而 $B_t$ 是标准布朗运动。无风险利率为常数 $r$。在 $[0,T]$ 的投资期内，该投资者在标准普尔500指数上始终保持一个恒定的投资组合权重 $\\omega$，将 $1-\\omega$ 的比例投资于无风险资产。\n\n您观察到 $\\omega = 0.60$。假设年化参数为 $\\mu = 0.07$，$\\sigma = 0.20$ 和 $r = 0.02$，所有单位均为每年。在维持这些假设的前提下，推断该投资者的隐含相对风险厌恶系数 $\\gamma$。将您的答案四舍五入到三位有效数字。", "solution": "本题要求从投资者观察到的最优投资组合配置中推断其相对风险厌恶系数 $\\gamma$。我们首先验证问题陈述的有效性。\n\n步骤1：提取已知条件。\n- 投资者效用函数：$U(W) = \\frac{W^{1-\\gamma}}{1-\\gamma}$，其中 $\\gamma  0$，$\\gamma \\neq 1$。这是一个恒定相对风险厌恶（CRRA）效用函数。\n- 风险资产（标准普尔500指数）价格动态：$\\frac{\\mathrm{d}S_t}{S_t} = \\mu \\,\\mathrm{d}t + \\sigma \\,\\mathrm{d}B_t$。\n- 无风险资产回报率：常数 $r$。\n- 投资组合配置：固定比例 $\\omega$ 投资于风险资产， $1-\\omega$ 投资于无风险资产。\n- 观察到的和给定的参数：\n  - $\\omega = 0.60$\n  - $\\mu = 0.07$（风险资产的年化期望回报）\n  - $\\sigma = 0.20$（风险资产的年化波动率）\n  - $r = 0.02$（年化无风险利率）\n  - 投资期：$[0,T]$。\n\n步骤2：使用提取的已知条件进行验证。\n该问题具有科学依据，因为它是默顿投资组合问题的直接应用，而默顿投资组合问题是数学金融学中的一个经典基础课题。它是适定的，因为可以从给定的参数和已建立的理论模型中确定唯一的 $\\gamma$ 值。问题陈述客观，具有精确的数值和函数形式。问题是自洽的，没有矛盾。所提供的参数值对于金融市场是现实的。因此，该问题被认为是有效的，可以构建解决方案。\n\n步骤3：进行求解。\n投资者的目标是最大化期末财富的期望效用，$E[U(W_T)]$。对于一个具有CRRA效用函数的投资者，在一个包含单一服从几何布朗运动的风险资产和恒定无风险利率的市场中，分配给风险资产的最优财富比例 $\\omega^*$ 是不随时间变化的。这是默顿投资组合理论的一个标准结果。\n\n设 $W_t$ 为投资者在时间 $t$ 的财富。财富过程的动态由投资组合各组成部分的回报决定。财富的变化量 $dW_t$ 由风险头寸和无风险头寸的回报之和给出：\n$$ dW_t = (\\omega W_t) \\frac{dS_t}{S_t} + ((1-\\omega)W_t) r dt $$\n代入风险资产的随机微分方程（SDE），$\\frac{dS_t}{S_t} = \\mu dt + \\sigma dB_t$：\n$$ dW_t = \\omega W_t (\\mu dt + \\sigma dB_t) + (1-\\omega)W_t r dt $$\n我们可以通过对确定性项（$dt$）和随机项（$dB_t$）进行分组来重新整理此方程：\n$$ dW_t = [\\omega \\mu + (1-\\omega)r] W_t dt + \\omega \\sigma W_t dB_t $$\n两边除以 $W_t$ 得到财富投资组合回报率的SDE：\n$$ \\frac{dW_t}{W_t} = [\\omega(\\mu - r) + r] dt + \\omega \\sigma dB_t $$\n优化问题 $\\max_{\\omega} E\\left[\\frac{W_T^{1-\\gamma}}{1-\\gamma}\\right]$ 的解给出了最优配置 $\\omega^*$。对于给定的效用函数，相对风险厌恶系数定义为 $RRA(W) = - \\frac{W U''(W)}{U'(W)}$。对于指定的效用函数，$U'(W) = W^{-\\gamma}$ 且 $U''(W) = -\\gamma W^{-\\gamma-1}$，这给出 $RRA(W) = - \\frac{W (-\\gamma W^{-\\gamma-1})}{W^{-\\gamma}} = \\gamma$。\n\n著名的默顿比例给出了最优配置为：\n$$ \\omega^* = \\frac{\\mu - r}{\\gamma \\sigma^2} $$\n在此，$\\mu - r$ 是风险的市场价格，或称股权风险溢价。项 $\\gamma \\sigma^2$ 是投资者的风险厌恶程度与风险资产回报方差的乘积。\n\n问题陈述投资者保持恒定的配置 $\\omega = 0.60$。我们将此观察到的配置等同于投资者的最优配置，因此我们设定 $\\omega^* = \\omega$。我们已知以下参数值：\n- $\\mu = 0.07$\n- $r = 0.02$\n- $\\sigma = 0.20$\n- $\\omega^* = 0.60$\n\n现在我们可以通过重新整理最优配置的公式来求解隐含的相对风险厌恶系数 $\\gamma$：\n$$ \\gamma = \\frac{\\mu - r}{\\omega^* \\sigma^2} $$\n将给定的数值代入此表达式：\n$$ \\gamma = \\frac{0.07 - 0.02}{0.60 \\times (0.20)^2} $$\n首先，我们计算分子和分母中的各项：\n- 股权风险溢价：$\\mu - r = 0.05$。\n- 风险资产的方差：$\\sigma^2 = (0.20)^2 = 0.04$。\n- 分母的乘积：$\\omega^* \\sigma^2 = 0.60 \\times 0.04 = 0.024$。\n\n现在，将这些值代回 $\\gamma$ 的表达式中：\n$$ \\gamma = \\frac{0.05}{0.024} $$\n为了计算数值，我们可以将其表示为整数的分数：\n$$ \\gamma = \\frac{50}{24} = \\frac{25}{12} $$\n计算结果约为 $2.08333...$。问题要求答案四舍五入到三位有效数字。\n$$ \\gamma \\approx 2.08 $$\n这个值是一个合理的风险厌恶度量。", "answer": "$$\n\\boxed{2.08}\n$$", "id": "2445855"}, {"introduction": "“不要把所有鸡蛋放在同一个篮子里”是人尽皆知的投资智慧，但我们如何量化分散投资所带来的具体价值呢？本练习通过“确定性等价”这一关键概念，将分散化的好处转化为一个明确的数值。我们将为一个具有指数效用函数（恒定绝对风险厌恶）的代理人计算投资组合的价值，并探索资产之间的相关性 $\\rho$ 如何影响分散化带来的收益，从而加深对风险管理的理解 [@problem_id:2445931]。", "problem": "考虑一个单周期设定，其中一个代理人使用指数效用函数来评估随机财富。设效用函数为 $u(x)=-\\exp(-a x)$，其中 $a0$ 是绝对风险厌恶系数。有两个风险资产收益率 $X_1$ 和 $X_2$，它们服从联合正态分布。资产 $i\\in\\{1,2\\}$ 的均值为 $\\mu_i$，标准差为 $\\sigma_i$。$X_1$ 和 $X_2$ 之间的相关性为 $\\rho$。将等权重投资组合的收益率定义为 $P=\\tfrac{1}{2}X_1+\\tfrac{1}{2}X_2$。所有量均为无量纲。\n\n对于任何随机收益 $Y$，将其确定性等价物 $\\mathrm{CE}(Y)$ 定义为满足 $u(c)=\\mathbb{E}[u(Y)]$ 的唯一标量 $c$。将多样化的价值（相对于仅持有资产1）定义为 $V=\\mathrm{CE}(P)-\\mathrm{CE}(X_1)$。\n\n您的任务是为以下测试套件中的每个参数集计算 $V$。在每种情况下，等权重投资组合 $P$ 必须分别以 $\\tfrac{1}{2}$ 和 $\\tfrac{1}{2}$ 的权重构建在 $X_1$ 和 $X_2$ 上，并且单资产基准是 $X_1$。\n\n测试套件（每种情况为 $(a,\\mu_1,\\sigma_1,\\mu_2,\\sigma_2,\\rho)$）：\n- 案例 1：$(2.0,\\,0.08,\\,0.2,\\,0.08,\\,0.2,\\,0.0)$。\n- 案例 2：$(2.0,\\,0.08,\\,0.2,\\,0.08,\\,0.2,\\,1.0)$。\n- 案例 3：$(2.0,\\,0.08,\\,0.2,\\,0.08,\\,0.2,\\,-1.0)$。\n- 案例 4：$(2.0,\\,0.08,\\,0.2,\\,0.02,\\,0.2,\\,0.0)$。\n- 案例 5：$(3.0,\\,0.06,\\,0.15,\\,0.06,\\,0.3,\\,0.5)$。\n\n要求的最终输出格式：您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表，按上述案例的顺序列出结果；例如，$[v_1,v_2,v_3,v_4,v_5]$，其中每个 $v_i$ 是为案例 $i$ 计算出的 $V$ 值。答案必须是实数（小数或分数均可接受），并且不应打印任何其他文本。", "solution": "该问题要求计算多样化价值 $V$，其定义为等权重投资组合的确定性等价物 $\\mathrm{CE}(P)$ 与单一资产的确定性等价物 $\\mathrm{CE}(X_1)$ 之间的差值。投资组合为 $P=\\tfrac{1}{2}X_1+\\tfrac{1}{2}X_2$，其中资产收益 $X_1$ 和 $X_2$ 服从联合正态分布。代理人的效用函数为指数形式 $u(x)=-\\exp(-ax)$，其绝对风险厌恶系数为 $a0$。\n\n首先，我们推导服从正态分布 $Y \\sim \\mathcal{N}(\\mu_Y, \\sigma_Y^2)$ 的随机收益 $Y$ 的确定性等价物 $\\mathrm{CE}(Y)$ 的通用公式。确定性等价物 $c=\\mathrm{CE}(Y)$ 由关系式 $u(c) = \\mathbb{E}[u(Y)]$ 定义。\n期望效用由 $\\mathbb{E}[u(Y)] = \\mathbb{E}[-\\exp(-aY)] = -\\mathbb{E}[\\exp(-aY)]$ 给出。\n项 $\\mathbb{E}[\\exp(-aY)]$ 对应于正态随机变量 $Y$ 的矩生成函数 (MGF) $M_Y(t) = \\mathbb{E}[\\exp(tY)]$ 在 $t=-a$ 处的值。正态分布的 MGF 为 $M_Y(t) = \\exp(\\mu_Y t + \\tfrac{1}{2}\\sigma_Y^2 t^2)$。\n代入 $t=-a$，我们得到：\n$$ \\mathbb{E}[\\exp(-aY)] = M_Y(-a) = \\exp(\\mu_Y(-a) + \\tfrac{1}{2}\\sigma_Y^2(-a)^2) = \\exp(-a\\mu_Y + \\tfrac{1}{2}a^2\\sigma_Y^2) $$\n因此，期望效用为 $\\mathbb{E}[u(Y)] = -\\exp(-a\\mu_Y + \\tfrac{1}{2}a^2\\sigma_Y^2)$。\n根据确定性等价物 $c$ 的定义，我们有 $u(c) = -\\exp(-ac)$。将其与期望效用等同起来：\n$$ -\\exp(-ac) = -\\exp(-a\\mu_Y + \\tfrac{1}{2}a^2\\sigma_Y^2) $$\n对两边取自然对数并除以 $-a$（因为 $a0$），得到确定性等价物的表达式：\n$$ c = \\mu_Y - \\tfrac{1}{2}a\\sigma_Y^2 $$\n这是具有恒定绝对风险厌恶 (CARA) 效用的代理人面对正态分布收益时著名的确定性等价物。\n\n接下来，我们将此公式应用于问题中的特定资产。\n对于资产 $X_1$，我们已知 $X_1 \\sim \\mathcal{N}(\\mu_1, \\sigma_1^2)$。因此其确定性等价物为：\n$$ \\mathrm{CE}(X_1) = \\mu_1 - \\tfrac{1}{2}a\\sigma_1^2 $$\n\n对于投资组合 $P=\\tfrac{1}{2}X_1+\\tfrac{1}{2}X_2$，我们必须首先确定其分布。作为联合正态随机变量的线性组合，$P$ 也服从正态分布。我们计算其均值 $\\mu_P$ 和方差 $\\sigma_P^2$。\n投资组合的均值为：\n$$ \\mu_P = \\mathbb{E}[P] = \\mathbb{E}[\\tfrac{1}{2}X_1+\\tfrac{1}{2}X_2] = \\tfrac{1}{2}\\mathbb{E}[X_1] + \\tfrac{1}{2}\\mathbb{E}[X_2] = \\tfrac{1}{2}\\mu_1 + \\tfrac{1}{2}\\mu_2 $$\n投资组合的方差为：\n$$ \\sigma_P^2 = \\mathrm{Var}(P) = \\mathrm{Var}(\\tfrac{1}{2}X_1+\\tfrac{1}{2}X_2) = (\\tfrac{1}{2})^2\\mathrm{Var}(X_1) + (\\tfrac{1}{2})^2\\mathrm{Var}(X_2) + 2(\\tfrac{1}{2})(\\tfrac{1}{2})\\mathrm{Cov}(X_1, X_2) $$\n使用 $\\mathrm{Var}(X_i) = \\sigma_i^2$ 和 $\\mathrm{Cov}(X_1, X_2) = \\rho\\sigma_1\\sigma_2$，我们有：\n$$ \\sigma_P^2 = \\tfrac{1}{4}\\sigma_1^2 + \\tfrac{1}{4}\\sigma_2^2 + \\tfrac{1}{2}\\rho\\sigma_1\\sigma_2 $$\n现在我们可以计算投资组合 $P$ 的确定性等价物：\n$$ \\mathrm{CE}(P) = \\mu_P - \\tfrac{1}{2}a\\sigma_P^2 = (\\tfrac{1}{2}\\mu_1 + \\tfrac{1}{2}\\mu_2) - \\tfrac{1}{2}a(\\tfrac{1}{4}\\sigma_1^2 + \\tfrac{1}{4}\\sigma_2^2 + \\tfrac{1}{2}\\rho\\sigma_1\\sigma_2) $$\n\n最后，我们计算多样化价值，$V = \\mathrm{CE}(P) - \\mathrm{CE}(X_1)$。\n$$ V = \\left[ (\\tfrac{1}{2}\\mu_1 + \\tfrac{1}{2}\\mu_2) - \\tfrac{a}{2}(\\tfrac{1}{4}\\sigma_1^2 + \\tfrac{1}{4}\\sigma_2^2 + \\tfrac{1}{2}\\rho\\sigma_1\\sigma_2) \\right] - \\left[ \\mu_1 - \\tfrac{1}{2}a\\sigma_1^2 \\right] $$\n我们按均值和方差分量对各项进行分组：\n$$ V = (\\tfrac{1}{2}\\mu_2 - \\tfrac{1}{2}\\mu_1) + \\tfrac{a}{2}\\left[\\sigma_1^2 - (\\tfrac{1}{4}\\sigma_1^2 + \\tfrac{1}{4}\\sigma_2^2 + \\tfrac{1}{2}\\rho\\sigma_1\\sigma_2)\\right] $$\n简化括号内的项：\n$$ V = \\tfrac{1}{2}(\\mu_2 - \\mu_1) + \\tfrac{a}{2}\\left[\\tfrac{3}{4}\\sigma_1^2 - \\tfrac{1}{4}\\sigma_2^2 - \\tfrac{1}{2}\\rho\\sigma_1\\sigma_2\\right] $$\n最终的解析表达式为：\n$$ V = \\tfrac{\\mu_2 - \\mu_1}{2} + \\tfrac{a}{8}(3\\sigma_1^2 - \\sigma_2^2 - 2\\rho\\sigma_1\\sigma_2) $$\n这个解析表达式用于计算问题陈述中提供的每个测试用例的 $V$ 值。", "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes the value of diversification for several parameter sets.\n    \"\"\"\n    # Define the test cases from the problem statement.\n    # Each case is a tuple: (a, mu1, sigma1, mu2, sigma2, rho)\n    test_cases = [\n        (2.0, 0.08, 0.2, 0.08, 0.2, 0.0),   # Case 1\n        (2.0, 0.08, 0.2, 0.08, 0.2, 1.0),   # Case 2\n        (2.0, 0.08, 0.2, 0.08, 0.2, -1.0),  # Case 3\n        (2.0, 0.08, 0.2, 0.02, 0.2, 0.0),   # Case 4\n        (3.0, 0.06, 0.15, 0.06, 0.3, 0.5),  # Case 5\n    ]\n\n    results = []\n    for case in test_cases:\n        a, mu1, sigma1, mu2, sigma2, rho = case\n\n        # The value of diversification V is defined as CE(P) - CE(X1).\n        # Where P = 0.5*X1 + 0.5*X2.\n        # The derived analytical formula is:\n        # V = (mu2 - mu1)/2 + (a/8) * (3*sigma1^2 - sigma2^2 - 2*rho*sigma1*sigma2)\n\n        # Term related to the difference in mean returns\n        mean_diff_term = (mu2 - mu1) / 2.0\n\n        # Term related to the difference in risk profiles\n        risk_diff_term = (a / 8.0) * (3 * sigma1**2 - sigma2**2 - 2 * rho * sigma1 * sigma2)\n\n        # Total value of diversification\n        v_value = mean_diff_term + risk_diff_term\n        \n        results.append(v_value)\n\n    # Format the output as a comma-separated list in brackets, without spaces.\n    # The map function converts each float in the results list to a string.\n    # The join method then concatenates these strings with a comma.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```", "id": "2445931"}, {"introduction": "传统的期望效用理论在解释某些现实行为时会遇到困难，例如，为什么同一个人会既购买彩票（一种风险寻求行为）又购买保险（一种风险规避行为）？这个问题引导我们走出经典框架，探索由 Daniel Kahneman 和 Amos Tversky 提出的前景理论（Prospect Theory）。通过亲手实现前景理论的核心要素——包括损失厌恶和概率权重函数——我们将能够从计算上解释这一看似矛盾的行为，并体会行为经济学模型强大的解释力 [@problem_id:2445905]。", "problem": "构建一个完整的程序，根据累积前景理论（CPT）评估选择，以确定一个个体是否会同时购买彩票和保险。评估必须使用零作为参照点，并从 CPT 的第一性原理进行。对于每个测试用例，您将获得 CPT 价值函数和概率权重函数的参数，以及两个二元决策的描述：购买彩票和购买保险。您的程序必须为每个测试用例输出两个整数，分别表示严格偏好购买彩票和严格偏好购买保险。\n\n请使用以下定义。\n\n1. 价值函数。对于相对于参照点 $0$ 衡量的结果 $x$，\n$$\nv(x) =\n\\begin{cases}\nx^{\\alpha},  \\text{if } x \\ge 0, \\\\\n-\\lambda \\, (-x)^{\\beta},  \\text{if } x  0,\n\\end{cases}\n$$\n其中 $\\alpha \\in (0,1]$，$\\beta \\in (0,1]$，且 $\\lambda \\ge 1$。\n\n2. 概率权重。对于任何概率 $p \\in (0,1)$，定义收益侧权重函数 $w^{+}(p)$ 和损失侧权重函数 $w^{-}(p)$ 如下：\n$$\nw^{+}(p) = \\frac{p^{\\gamma}}{\\left(p^{\\gamma} + (1-p)^{\\gamma}\\right)^{1/\\gamma}}, \\quad\nw^{-}(p) = \\frac{p^{\\delta}}{\\left(p^{\\delta} + (1-p)^{\\delta}\\right)^{1/\\delta}},\n$$\n其中 $\\gamma \\in (0,1]$ 且 $\\delta \\in (0,1]$。\n\n3. 累积前景理论（CPT）下的决策评估。\n- 彩票购买决策：代理人在不购买（确定性结果为 $0$）和购买彩票之间做出选择。如果购买彩票，结果是以概率 $p$ 获得 $g-c$ 的收益，并以概率 $1-p$ 遭受 $-c$ 的损失。其中 $g \\ge 0$ 是奖金， $c \\ge 0$ 是彩票成本， $p \\in (0,1)$。购买彩票的 CPT 值为：\n$$\nV_{\\text{buy-lottery}} = w^{+}(p)\\, v(g-c) + w^{-}(1-p)\\, v(-c).\n$$\n当且仅当 $V_{\\text{buy-lottery}} > 0$ 时，代理人严格偏好购买彩票。\n\n- 保险购买决策：代理人在保持未投保状态和购买全额保险之间做出选择。如果未投保，结果是以概率 $q$ 遭受 $-L$ 的损失，并以概率 $1-q$ 结果为 $0$。其中 $L \\ge 0$ 是损失额， $q \\in (0,1)$ 是损失概率。如果投保，结果是确定性损失 $-\\pi$，其中 $\\pi \\ge 0$ 是保险费。CPT 值为：\n$$\nV_{\\text{uninsured}} = w^{-}(q)\\, v(-L), \\quad V_{\\text{insured}} = v(-\\pi).\n$$\n当且仅当 $V_{\\text{insured}} > V_{\\text{uninsured}}$ 时，代理人严格偏好购买保险。\n\n您的程序必须严格实现上述定义。对于严格不等式的数值比较，如果左侧值减去右侧值超过 $10^{-12}$，则视为严格大于。\n\n测试套件。使用以下四个测试用例，每个用例由参数元组 $(\\alpha,\\beta,\\lambda,\\gamma,\\delta,p,g,c,q,L,\\pi)$ 指定。\n\n- 用例 1：$(0.88, 0.88, 2.25, 0.61, 0.69, 0.01, 500, 5, 0.01, 500, 6)$。\n- 用例 2：$(1.0, 1.0, 1.0, 1.0, 1.0, 0.01, 500, 5, 0.01, 500, 5)$。\n- 用例 3：$(0.88, 0.88, 1.1, 0.4, 1.0, 0.01, 500, 5, 0.01, 500, 8)$。\n- 用例 4：$(0.6, 0.9, 3.5, 1.0, 0.5, 0.01, 500, 5, 0.01, 500, 6)$。\n\n答案规格与输出格式。对于每个测试用例，计算两个整数：\n- $b_{\\ell} \\in \\{0,1\\}$，如果 $V_{\\text{buy-lottery}} > 0$，则等于 $1$，否则为 $0$。\n- $b_{i} \\in \\{0,1\\}$，如果 $V_{\\text{insured}} > V_{\\text{uninsured}}$，则等于 $1$，否则为 $0$。\n\n您的程序应生成单行输出，其中包含一个由 $8$ 个整数组成的逗号分隔列表，并用方括号括起来，顺序为 $[b_{\\ell}^{(1)}, b_{i}^{(1)}, b_{\\ell}^{(2)}, b_{i}^{(2)}, b_{\\ell}^{(3)}, b_{i}^{(3)}, b_{\\ell}^{(4)}, b_{i}^{(4)}]$，其中上标表示测试用例的索引。输出行中不允许有任何额外的文本或空格。", "solution": "该问题要求在一组指定参数下，根据累积前景理论（CPT）评估决策。在提供解决方案之前，必须对问题陈述的科学合理性、完整性和客观性进行验证。\n\n**步骤 1：提取已知信息**\n\n问题提供了以下定义和数据：\n\n1.  **价值函数**：对于相对于参照点 $0$ 的结果 $x$，价值函数 $v(x)$ 定义为：\n    $$\n    v(x) =\n    \\begin{cases}\n    x^{\\alpha},  \\text{if } x \\ge 0 \\\\\n    -\\lambda \\, (-x)^{\\beta},  \\text{if } x  0\n    \\end{cases}\n    $$\n    参数为 $\\alpha \\in (0,1]$，$\\beta \\in (0,1]$，且 $\\lambda \\ge 1$。\n\n2.  **概率权重函数**：对于概率 $p \\in (0,1)$，权重函数为：\n    $$\n    w^{+}(p) = \\frac{p^{\\gamma}}{\\left(p^{\\gamma} + (1-p)^{\\gamma}\\right)^{1/\\gamma}} \\quad (\\text{收益侧})\n    $$\n    $$\n    w^{-}(p) = \\frac{p^{\\delta}}{\\left(p^{\\delta} + (1-p)^{\\delta}\\right)^{1/\\delta}} \\quad (\\text{损失侧})\n    $$\n    参数为 $\\gamma \\in (0,1]$ 和 $\\delta \\in (0,1]$。\n\n3.  **彩票购买决策**：选择在于不购买（结果为 $0$）和购买彩票之间。购买彩票会以概率 $p$ 产生 $g-c$ 的收益，并以概率 $1-p$ 产生 $-c$ 的损失。购买的 CPT 价值为：\n    $$\n    V_{\\text{buy-lottery}} = w^{+}(p)\\, v(g-c) + w^{-}(1-p)\\, v(-c)\n    $$\n    当且仅当 $V_{\\text{buy-lottery}}  0$ 时，存在严格的购买偏好。\n\n4.  **保险购买决策**：选择在于未投保（以概率 $q$ 损失 $-L$，否则为 $0$）和购买保险（确定损失 $-\\pi$）之间。CPT 价值为：\n    $$\n    V_{\\text{uninsured}} = w^{-}(q)\\, v(-L)\n    $$\n    $$\n    V_{\\text{insured}} = v(-\\pi)\n    $$\n    当且仅当 $V_{\\text{insured}}  V_{\\text{uninsured}}$ 时，存在严格的购买保险偏好。\n\n5.  **数值容差**：当 $A - B  10^{-12}$ 时，严格不等式 $A  B$ 成立。\n\n6.  **测试用例**：提供了四个用例，其参数元组为 $(\\alpha, \\beta, \\lambda, \\gamma, \\delta, p, g, c, q, L, \\pi)$:\n    *   用例 1：$(0.88, 0.88, 2.25, 0.61, 0.69, 0.01, 500, 5, 0.01, 500, 6)$\n    *   用例 2：$(1.0, 1.0, 1.0, 1.0, 1.0, 0.01, 500, 5, 0.01, 500, 5)$\n    *   用例 3：$(0.88, 0.88, 1.1, 0.4, 1.0, 0.01, 500, 5, 0.01, 500, 8)$\n    *   用例 4：$(0.6, 0.9, 3.5, 1.0, 0.5, 0.01, 500, 5, 0.01, 500, 6)$\n\n**步骤 2：使用提取的已知信息进行验证**\n\n根据指定标准对问题进行验证。\n\n*   **科学依据**：该问题基于累积前景理论，这是由 Tversky 和 Kahneman 发展的行为经济学基石。价值函数表现出边际敏感性递减和损失厌恶，概率权重函数捕捉了对小概率事件的高估，这些都是已确立的经验发现。将其应用于彩票-保险悖论是 CPT 的经典用例。所提供的公式是 CPT 对指定的简单前景的正确应用。该问题具有科学合理性。\n*   **适定性**：问题提供了所有必要的数学公式、每个测试用例的参数以及明确的决策规则。计算是确定性的，确保每个用例都有唯一的解。该问题是适定的。\n*   **客观性**：问题使用精确的数学语言表述，不含主观或模棱两可的术语。\n\n问题陈述没有显示出科学不合理、不完整、矛盾或模糊等缺陷。它是一个在计算经济学领域内形式化、可解决的问题。\n\n**步骤 3：结论与行动**\n\n此问题**有效**。将构建一个解决方案。\n\n**基于原理的设计与求解算法**\n\n任务是按规定实现 CPT 框架，并将其应用于四个测试用例。对于每个用例，我们必须确定两个二元结果：购买彩票的决策（$b_{\\ell}$）和购买保险的决策（$b_{i}$）。解决方案是直接实现所提供的公式。\n\n**1. 核心 CPT 函数的实现**\n\n首先，我们必须实现模型的三个基本组件。\n\n*   **价值函数 $v(x)$**：将创建一个函数，用于根据参数 $\\alpha$、$\\beta$ 和 $\\lambda$ 计算结果 $x$ 的价值。\n    *   如果 $x \\ge 0$，函数返回 $x^{\\alpha}$。\n    *   如果 $x  0$，函数返回 $-\\lambda(-x)^{\\beta}$。\n    \n*   **收益侧权重函数 $w^{+}(p)$**：将创建一个函数，用于根据参数 $\\gamma$ 计算收益概率 $p$ 的决策权重。公式为 $w^{+}(p) = p^{\\gamma} / (p^{\\gamma} + (1-p)^{\\gamma})^{1/\\gamma}$。\n\n*   **损失侧权重函数 $w^{-}(p)$**：将创建一个函数，用于根据参数 $\\delta$ 计算损失概率 $p$ 的决策权重。公式为 $w^{-}(p) = p^{\\delta} / (p^{\\delta} + (1-p)^{\\delta})^{1/\\delta}$。\n\n**2. 彩票决策评估**\n\n对于每个测试用例，购买彩票的决策评估如下：\n\n1.  识别彩票决策的参数：$\\alpha, \\beta, \\lambda, \\gamma, \\delta, p, g, c$。\n2.  计算相对于参照点 $0$ 的两种可能结果：收益 $x_{g} = g-c$ 和损失 $x_{\\ell} = -c$。\n3.  使用价值函数计算这些结果的价值：$v(x_{g})$ 和 $v(x_{\\ell})$。\n4.  计算所需的决策权重。收益 $g-c$ 的发生概率为 $p$，因此我们需要 $w^{+}(p)$。损失 $-c$ 的发生概率为 $1-p$，因此我们需要 $w^{-}(1-p)$。\n5.  使用提供的公式计算购买彩票的 CPT 价值：\n    $$\n    V_{\\text{buy-lottery}} = w^{+}(p) v(g-c) + w^{-}(1-p) v(-c)\n    $$\n6.  应用决策规则。如果 $V_{\\text{buy-lottery}}  0$，代理人严格偏好购买彩票。使用指定的容差，检查条件为 $V_{\\text{buy-lottery}}  10^{-12}$。\n7.  如果条件满足，则将决策变量 $b_{\\ell}$ 设为 $1$，否则设为 $0$。\n\n**3. 保险决策评估**\n\n类似地，对于每个测试用例，购买保险的决策评估如下：\n\n1.  识别保险决策的参数：$\\alpha, \\beta, \\lambda, \\delta, q, L, \\pi$。注意，$\\gamma$ 不被使用。\n2.  计算“未投保”前景的 CPT 价值。这涉及一个非零结果，即以概率 $q$ 损失 $-L$。其价值为：\n    $$\n    V_{\\text{uninsured}} = w^{-}(q) v(-L)\n    $$\n    这需要计算 $v(-L)$ 和决策权重 $w^{-}(q)$。\n3.  计算“已投保”前景的 CPT 价值。这是一个确定性结果：损失保费 $-\\pi$。其价值就是：\n    $$\n    V_{\\text{insured}} = v(-\\pi)\n    $$\n4.  应用决策规则。如果 $V_{\\text{insured}}  V_{\\text{uninsured}}$，代理人严格偏好购买保险。检查条件为 $V_{\\text{insured}} - V_{\\text{uninsured}}  10^{-12}$。\n5.  如果条件满足，则将决策变量 $b_{i}$ 设为 $1$，否则设为 $0$。\n\n**4. 程序执行**\n\n将构建一个程序来执行此逻辑。它将遍历四个测试用例。在每次迭代中，它将解包 $11$ 个参数，调用实现上述逻辑的函数来计算 $b_{\\ell}$ 和 $b_{i}$，并存储这两个整数结果。最后，程序将把所有四个用例计算出的 $8$ 个整数格式化为单个逗号分隔的列表，并用方括号括起来，以满足要求。\n\n这个结构化过程确保解决方案严格遵守问题陈述中定义的 CPT 第一性原理，并以指定格式生成正确的输出。使用像 NumPy 这样的数值库适合于精确处理幂运算。", "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Evaluates lottery and insurance decisions under Cumulative Prospect Theory (CPT)\n    for a given set of test cases.\n    \"\"\"\n\n    # Define the test cases from the problem statement.\n    # Each case is a tuple: (alpha, beta, lam, gamma, delta, p, g, c, q, L, pi)\n    test_cases = [\n        (0.88, 0.88, 2.25, 0.61, 0.69, 0.01, 500, 5, 0.01, 500, 6),\n        (1.0, 1.0, 1.0, 1.0, 1.0, 0.01, 500, 5, 0.01, 500, 5),\n        (0.88, 0.88, 1.1, 0.4, 1.0, 0.01, 500, 5, 0.01, 500, 8),\n        (0.6, 0.9, 3.5, 1.0, 0.5, 0.01, 500, 5, 0.01, 500, 6),\n    ]\n\n    TOLERANCE = 1e-12\n    results = []\n\n    def value_func(x, alpha, beta, lam):\n        \"\"\"CPT value function v(x).\"\"\"\n        if x >= 0:\n            return np.power(x, alpha)\n        else:\n            return -lam * np.power(-x, beta)\n\n    def weight_func_plus(p, gamma):\n        \"\"\"CPT gain-side probability weighting function w+(p).\"\"\"\n        if p == 0.0 or p == 1.0:\n            return p\n        p_gamma = np.power(p, gamma)\n        one_minus_p_gamma = np.power(1.0 - p, gamma)\n        return p_gamma / np.power(p_gamma + one_minus_p_gamma, 1.0 / gamma)\n\n    def weight_func_minus(p, delta):\n        \"\"\"CPT loss-side probability weighting function w-(p).\"\"\"\n        if p == 0.0 or p == 1.0:\n            return p\n        p_delta = np.power(p, delta)\n        one_minus_p_delta = np.power(1.0 - p, delta)\n        return p_delta / np.power(p_delta + one_minus_p_delta, 1.0 / delta)\n    \n    for case in test_cases:\n        alpha, beta, lam, gamma, delta, p, g, c, q, L, pi = case\n\n        # --- Lottery Decision ---\n        gain_outcome = g - c\n        loss_outcome = -c\n        \n        v_gain = value_func(gain_outcome, alpha, beta, lam)\n        v_loss = value_func(loss_outcome, alpha, beta, lam)\n        \n        w_plus_p = weight_func_plus(p, gamma)\n        w_minus_1_minus_p = weight_func_minus(1.0 - p, delta)\n        \n        V_buy_lottery = w_plus_p * v_gain + w_minus_1_minus_p * v_loss\n        \n        b_l = 1 if V_buy_lottery > TOLERANCE else 0\n        \n        # --- Insurance Decision ---\n        V_uninsured = weight_func_minus(q, delta) * value_func(-L, alpha, beta, lam)\n        V_insured = value_func(-pi, alpha, beta, lam)\n        \n        b_i = 1 if (V_insured - V_uninsured) > TOLERANCE else 0\n        \n        results.extend([b_l, b_i])\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```", "id": "2445905"}]}