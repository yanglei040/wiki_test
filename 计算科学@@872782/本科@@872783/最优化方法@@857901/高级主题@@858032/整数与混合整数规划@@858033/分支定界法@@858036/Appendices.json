{"hands_on_practices": [{"introduction": "分支定界算法的第一步通常是求解问题的线性规划（LP）松弛。如果松弛问题的解是小数（非整数），我们就必须进行“分支”操作来继续搜索。这个练习将带你完整地走过这一关键的初始迭代过程 [@problem_id:2209717]，从求解根节点到计算其子节点的界限，让你亲身体验搜索空间是如何被分割和评估的。", "problem": "考虑以下整数规划 (IP)，其中决策变量 $x_1$ 和 $x_2$ 必须为非负整数：\n\n最大化 $Z = 5x_1 + 8x_2$\n约束条件：\n1. $x_1 + x_2 \\le 6$\n2. $5x_1 + 9x_2 \\le 45$\n3. $x_1, x_2 \\ge 0$ 且为整数。\n\n采用分支定界算法来寻找最优整数解。该过程首先求解问题的线性规划 (LP) 松弛（即，忽略整数约束）。在得到这个初始 LP 的最优解后，选择解中值为非整数的变量之一进行分支。\n\n假设选择变量 $x_2$ 进行第一步分支。这个分支操作会创建两个新的 LP 子问题，它们构成了分支定界搜索树的第一层。设初始 LP 松弛的最优解中 $x_2$ 的值为 $x_2 = x_2^*$。通过向原始 LP 松弛中添加以下约束之一来形成两个新的子问题：\n- 子问题 A：$x_2 \\le \\lfloor x_2^* \\rfloor$\n- 子问题 B：$x_2 \\ge \\lceil x_2^* \\rceil$\n\n确定子问题 A 和子问题 B 的 LP 松弛的最优目标函数值。设这些值分别为 $Z_A$ 和 $Z_B$。\n\n将您的答案表示为一个包含这两个值并按 $[Z_A, Z_B]$ 顺序排列的行矩阵。", "solution": "我们首先求解原问题的 LP 松弛：\n最大化 $Z=5x_{1}+8x_{2}$，约束条件为 $x_{1}+x_{2}\\leq 6$，$5x_{1}+9x_{2}\\leq 45$，$x_{1},x_{2}\\geq 0$。\n\n根据线性规划基本定理，最优解出现在一个极点上。计算两个紧约束的交点：\n$$\n\\begin{aligned}\nx_{1}+x_{2}=6,\\\\\n5x_{1}+9x_{2}=45.\n\\end{aligned}\n$$\n将 $x_{1}=6-x_{2}$ 代入第二个方程：\n$$\n5(6-x_{2})+9x_{2}=45 \\Rightarrow 30-5x_{2}+9x_{2}=45 \\Rightarrow 4x_{2}=15 \\Rightarrow x_{2}^{*}=\\frac{15}{4}.\n$$\n因此 $x_{1}^{*}=6-\\frac{15}{4}=\\frac{9}{4}$，LP 最优值为\n$$\nZ^{*}=5\\cdot\\frac{9}{4}+8\\cdot\\frac{15}{4}=\\frac{45}{4}+\\frac{120}{4}=\\frac{165}{4}.\n$$\n由于 $x_{2}^{*}=\\frac{15}{4}$ 是分数，我们对 $x_{2}$ 进行分支：\n子问题 A：$x_{2}\\leq\\left\\lfloor \\frac{15}{4}\\right\\rfloor=3$。\n子问题 B：$x_{2}\\geq\\left\\lceil \\frac{15}{4}\\right\\rceil=4$。\n\n子问题 A (添加 $x_{2}\\leq 3$)：我们在以下区域最大化 $Z=5x_{1}+8x_{2}$\n$$\nx_{1}+x_{2}\\leq 6,\\quad 5x_{1}+9x_{2}\\leq 45,\\quad x_{2}\\leq 3,\\quad x_{1},x_{2}\\geq 0.\n$$\n由于目标系数为正且 $8>5$，为了在 $x_{2}\\leq 3$ 下的可行性，最优的做法是取 $x_{2}$ 允许的最大值，即 $x_{2}=3$，然后在剩余约束下最大化 $x_{1}$。当 $x_{2}=3$ 时，\n$$\nx_{1}\\leq 6-3=3,\\qquad 5x_{1}\\leq 45-27=18 \\Rightarrow x_{1}\\leq \\frac{18}{5}.\n$$\n紧约束是 $x_{1}\\leq 3$，所以选择 $(x_{1},x_{2})=(3,3)$，得到\n$$\nZ_{A}=5\\cdot 3+8\\cdot 3=39.\n$$\n在 $x_{1}+x_{2}=6$ 上，任何 $x_{2}3$ 的点都无法改善 $Z$，因为用一个单位的 $x_{1}$ 替换一个单位的 $x_{2}$ 会使 $Z$ 改变 $5-8=-3$；在 $5x_{1}+9x_{2}=45$ 上，从 $x_{2}=3$ 开始，增加 $x_{1}$ 需要减少 $x_{2}$，而目标函数的变化率为 $dZ/dx_1 = (5/9)>0$，但是在 $5x_{1}+9x_{2}=45$ 且 $x_{2}=3$ 的点违反了 $x_{1}+x_{2}\\leq 6$。因此，$(3,3)$ 是子问题 A 的最优解。\n\n子问题 B (添加 $x_{2}\\geq 4$)：在以下区域最大化 $Z$\n$$\nx_{1}+x_{2}\\leq 6,\\quad 5x_{1}+9x_{2}\\leq 45,\\quad x_{2}\\geq 4,\\quad x_{1},x_{2}\\geq 0.\n$$\n考虑与 $x_{2}\\geq 4$ 的关键边界交点：\n- 当 $x_{1}=0$ 时，由 $5x_{1}+9x_{2}\\leq 45$ 得 $x_{2}\\leq 5$，所以 $(0,5)$ 是可行解，得到 $Z=40$。\n- $x_{2}=4$ 与 $5x_{1}+9x_{2}=45$ 的交点给出 $5x_{1}+36=45\\Rightarrow x_{1}=\\frac{9}{5}$，且 $x_{1}+x_{2}=\\frac{9}{5}+4=\\frac{29}{5}\\leq 6$，所以 $(\\frac{9}{5},4)$ 是可行解，此时\n$$\nZ=5\\cdot\\frac{9}{5}+8\\cdot 4=9+32=41.\n$$\n- $x_{2}=4$ 与 $x_{1}+x_{2}=6$ 的交点是 $(2,4)$，但 $5\\cdot 2+9\\cdot 4=4645$，因此是不可行解。\n\n沿着 $5x_{1}+9x_{2}=45$ 从 $(0,5)$ 向较小的 $x_{2}$ 移动会增加 $x_{1}$ 并增加 $Z$，因为 $dZ/dx_1=(5-8(5/9)) = 5/9 > 0$，直到在 $(\\frac{9}{5},4)$ 处达到下界 $x_{2}=4$。因此，$(\\frac{9}{5},4)$ 是子问题 B 的最优解，其值为\n$$\nZ_{B}=41.\n$$\n\n因此，所求的数值对是 $[Z_{A},Z_{B}]=[39,41]$。", "answer": "$$\\boxed{\\begin{pmatrix} 39  41 \\end{pmatrix}}$$", "id": "2209717"}, {"introduction": "在分支定界法中，正确地创建分支是确保算法既完整又高效的核心。每当遇到一个非整数解时，我们需要将问题分解为更小的子问题，同时保证不会漏掉任何可能的整数解。这个练习 [@problem_id:2209727] 聚焦于分支规则本身，通过一个思想实验来巩固如何基于一个非整变量来构建新的约束条件。", "problem": "一家物流公司的运筹学团队正在使用一个整数规划（IP）模型来优化他们的车辆路径调度。变量 $x_i$ 表示车型 $i$ 被分配到某条长途路线的次数。由于分配次数必须是整数，他们采用分支定界算法来寻找最优整数解。\n\n该过程首先求解整数规划问题的线性规划（LP）松弛问题，其中整数约束被暂时忽略。这个初始LP松弛问题的最优解导致了两个变量的非整数值：车型A的分配次数 $x_A$ 为 $4.6$，车型B的分配次数 $x_B$ 为 $2.3$。\n\n算法选择变量 $x_A$ 来执行第一次分支操作，从原问题创建两个新的子问题（子节点）。以下哪对约束正确地定义了这两个新的、相互排斥的子问题？\n\nA. $x_A = 4$ 和 $x_A = 5$\n\nB. $x_A \\leq 4$ 和 $x_A \\geq 5$\n\nC. $x_A \\leq 4.6$ 和 $x_A \\geq 4.6$\n\nD. $x_B \\leq 2$ 和 $x_B \\geq 3$\n\nE. $x_A \\leq 5$ 和 $x_A \\geq 4$", "solution": "在用于整数规划的分支定界算法中，当求解LP松弛问题并获得一个所选整数变量的非整数值后，通过对可行域进行分割来创建两个子问题，使得：\n- 这两个新区域是相互排斥的，\n- 它们共同覆盖了该变量的所有整数值，\n- 并且当前的非整数解被从两个LP松弛问题中排除。\n\n已知LP松弛解为 $x_{A}^{\\ast} = 4.6$，对 $x_{A}$ 进行的标准分支在 $4.6$ 的向下取整和向上取整处进行分割：\n$$\nx_{A} \\leq \\lfloor 4.6 \\rfloor = 4 \\quad \\text{and} \\quad x_{A} \\geq \\lceil 4.6 \\rceil = 5.\n$$\n对于任何整数 $x_{A}$，这两个约束是相互排斥的，共同覆盖了所有整数可能性（$x_{A} \\in \\mathbb{Z}$ 意味着 $x_{A} \\leq 4$ 或 $x_{A} \\geq 5$），并且将当前的LP解 $x_{A}=4.6$ 从两个分支的LP松弛问题中排除。\n\n检查选项：\n- A 使用等式 $x_{A}=4$ 和 $x_{A}=5$，这过于严格，并且没有覆盖除了恰好为 $4$ 和 $5$ 之外的所有整数可能性。\n- B 使用 $x_{A} \\leq 4$ 和 $x_{A} \\geq 5$，这是在向下取整和向上取整处的正确分割。\n- C 使用 $x_{A} \\leq 4.6$ 和 $x_{A} \\geq 4.6$，这在求解LP松弛问题时，至少在一个分支中没有正确地排除当前的LP解。\n- D 对 $x_{B}$ 进行分支，而它不是所选的变量。\n- E 使用 $x_{A} \\leq 5$ 和 $x_{A} \\geq 4$，它们重叠且不相互排斥；此外，它们没有排除 $4.6$。\n\n因此，正确的约束对是 $x_{A} \\leq 4$ 和 $x_{A} \\geq 5$。", "answer": "$$\\boxed{B}$$", "id": "2209727"}, {"introduction": "分支定界法之所以强大，关键在于其“定界”与“剪枝”的能力，这能帮助我们避免对整个搜索树进行详尽的探索，从而节省大量的计算资源。本练习 [@problem_id:2209705] 模拟了算法执行过程中的一个关键决策点，让你实践如何利用节点的界（bound）和当前最优解（incumbent）来判断是否可以安全地“剪掉”一个分支。", "problem": "一位运筹学分析师正在使用分支定界法求解一个最小化整数规划问题。在该方法中，算法会探索一个由子问题组成的树。一个子问题（由树中的一个节点表示）可以被“剪枝”，意味着它将从搜索中被移除，不再进行进一步的探索。剪枝的一个主要规则是“按界剪枝”：对于一个最小化问题，如果一个节点的计算下界大于或等于迄今为止找到的最佳整数解的值（称为“当前最优值”），那么该节点就可以被剪枝。\n\n该算法已经运行了一段时间，其状态在一个特定时刻被捕捉下来。按时间顺序记录的事件如下：\n\n1.  搜索探索了几个节点，并在节点 P5 处找到了一个初始可行整数解，其目标函数值为 285。这为搜索确定了第一个当前最优值。\n2.  在当前最优值设置为 285 的情况下，确定“活”节点（待进一步探索的候选子问题）集合为 {节点 Q1, 节点 Q2, 节点 Q3}。\n3.  算法接着计算了这些活节点的下界：\n    *   节点 Q1 的下界是 279。\n    *   节点 Q2 的下界是 285。\n    *   节点 Q3 的下界是 291。\n4.  在计算出这些下界之后，算法应立即应用“按界剪枝”规则来剪掉任何符合条件的节点。\n\n根据所提供的信息，在搜索的这个时间点，活动集 {Q1, Q2, Q3} 中的哪些节点应该被立即剪枝？\n\nA. 仅节点 Q1\n\nB. 仅节点 Q2\n\nC. 仅节点 Q3\n\nD. 节点 Q2 和节点 Q3\n\nE. 节点 Q1、节点 Q2 和节点 Q3\n\nF. 没有节点应该被剪枝", "solution": "我们正在使用分支定界法求解一个最小化整数规划问题。按界剪枝规则指出，如果一个节点的下界大于或等于当前最优目标值，则该节点被剪枝。\n\n给定当前最优值 $I=285$。对于每个下界为 $\\operatorname{LB}(Q_{i})$ 的活节点 $Q_{i}$，剪枝条件是：\n$$\n\\operatorname{LB}(Q_{i}) \\geq I.\n$$\n\n应用于每个节点：\n1) 对于节点 $Q1$：$\\operatorname{LB}(Q1)=279$。检查 $279 \\geq 285$ 为假，因此 $Q1$ 不被按界剪枝。\n2) 对于节点 $Q2$：$\\operatorname{LB}(Q2)=285$。检查 $285 \\geq 285$ 为真，因此 $Q2$ 被按界剪枝。\n3) 对于节点 $Q3$：$\\operatorname{LB}(Q3)=291$。检查 $291 \\geq 285$ 为真，因此 $Q3$ 被按界剪枝。\n\n因此，节点 $Q2$ 和节点 $Q3$ 应该被立即剪枝。", "answer": "$$\\boxed{D}$$", "id": "2209705"}]}