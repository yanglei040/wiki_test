{"hands_on_practices": [{"introduction": "这个练习将引导你解决一个典型的资源分配问题，其中包含局部边界约束。这是一个很好的起点，可以用来练习推导作为对偶变量（即资源价格）函数的子问题解。通过求解，你将能够确定一个最优的“市场价格”，该价格能有效协调各个独立代理的行为以满足全局资源约束，并深入理解边界约束如何影响局部决策 [@problem_id:3122710]。", "problem": "考虑一个可分离的凸优化问题，该问题涉及在三个具有局部边界约束的代理之间分配单一共享资源。原始问题是最小化局部凸成本之和，其约束条件为单个线性耦合约束和各自的边界：\n$$\n\\min_{x_1,x_2,x_3} \\;\\; f_1(x_1)+f_2(x_2)+f_3(x_3) \\quad \\text{subject to} \\quad l_i \\le x_i \\le u_i \\; \\text{for } i\\in\\{1,2,3\\}, \\;\\; x_1+x_2+x_3=b,\n$$\n其中局部成本是二次的，\n$$\nf_i(x_i)=\\frac{1}{2}q_i x_i^2+r_i x_i,\n$$\n参数如下\n$$\nq_1=2, \\;\\; r_1=1, \\;\\; l_1=0, \\;\\; u_1=2, \\\\\nq_2=1, \\;\\; r_2=-2, \\;\\; l_2=1, \\;\\; u_2=3, \\\\\nq_3=3, \\;\\; r_3=0, \\;\\; l_3=-1, \\;\\; u_3=1, \\\\\nb=1.\n$$\n从拉格朗日函数、对偶函数和 Karush–Kuhn–Tucker (KKT) 条件的定义出发，使用对偶分解来：\n1. 推导每个代理子问题的闭式解，该解是耦合约束对偶变量的函数。\n2. 确定与原始可行性和最优性一致的唯一资源最优对偶价格。\n\n解释这个对偶价格在经济学上代表什么，即共享资源的边际估值，以及边界约束的存在如何通过这个价格影响局部决策。您最终报告的量必须是作为一个实数的最优对偶价格。将您的最终数值答案四舍五入到四位有效数字。", "solution": "所给出的问题是一个凸优化问题，具有可分离的目标函数、单个线性耦合约束以及各自的边界约束。这是一个经典的资源分配问题。\n\n### 步骤 1：问题验证\n\n**1. 提取已知条件：**\n优化问题是：\n$$\n\\min_{x_1,x_2,x_3} \\sum_{i=1}^3 f_i(x_i) \\quad \\text{subject to} \\quad x_1+x_2+x_3=b, \\quad l_i \\le x_i \\le u_i \\text{ for } i\\in\\{1,2,3\\}\n$$\n局部成本函数是二次的：\n$$\nf_i(x_i) = \\frac{1}{2}q_i x_i^2 + r_i x_i\n$$\n参数给定如下：\n- 代理 1: $q_1=2$, $r_1=1$, $l_1=0$, $u_1=2$\n- 代理 2: $q_2=1$, $r_2=-2$, $l_2=1$, $u_2=3$\n- 代理 3: $q_3=3$, $r_3=0$, $l_3=-1$, $u_3=1$\n- 耦合约束: $b=1$\n\n**2. 使用提取的已知条件进行验证：**\n- **科学依据：** 该问题是一个二次规划 (QP)，是凸优化中的一个基本课题。对偶分解是解决此类可分离问题的标准且成熟的方法。该问题在数学优化理论中有坚实的基础。\n- **适定性：** 目标函数是二次函数 $f_i(x_i)$ 的和，且 $q_i > 0$。因此，每个 $f_i(x_i)$ 都是严格凸的，使得总目标函数 $f(x_1,x_2,x_3) = \\sum f_i(x_i)$ 也是严格凸的。可行集由线性等式和不等式约束定义，形成一个非空、闭合的凸集（一个多胞体）。在一个非空、闭合的凸集上最小化一个严格凸函数，会得到唯一的全局最小值。可行集是非空的，因为下界之和 $\\sum l_i = 0+1-1=0$ 与上界之和 $\\sum u_i = 2+3+1=6$ 包含了所需总和 $b=1$。因此，存在唯一解。\n- **客观性：** 问题使用精确的数学语言陈述，并提供了所有必要的数值数据。它没有主观或模棱两可的陈述。\n\n**3. 结论与行动：**\n问题是有效的。我们继续进行求解。\n\n### 步骤 2：使用对偶分解进行公式化和求解\n\n对偶分解的核心思想是通过引入一个拉格朗日乘子（对偶变量）来松弛耦合约束，从而将问题分解为更小的、独立的子问题。\n\n**1. 拉格朗日函数和对偶函数：**\n我们为耦合约束 $x_1+x_2+x_3-b=0$ 引入单个对偶变量 $\\nu$。问题的拉格朗日函数是：\n$$\nL(x_1, x_2, x_3, \\nu) = \\sum_{i=1}^3 \\left( \\frac{1}{2}q_i x_i^2 + r_i x_i \\right) + \\nu \\left( \\sum_{i=1}^3 x_i - b \\right)\n$$\n边界约束 $l_i \\le x_i \\le u_i$ 不被松弛，并将在子问题中处理。拉格朗日函数在变量 $x_i$ 上是可分离的：\n$$\nL(x_1, x_2, x_3, \\nu) = \\sum_{i=1}^3 \\left( \\frac{1}{2}q_i x_i^2 + r_i x_i + \\nu x_i \\right) - \\nu b\n$$\n对偶函数 $g(\\nu)$ 定义为在原始变量 $x_i$ 满足其局部边界约束的条件下，拉格朗日函数的最小值：\n$$\ng(\\nu) = \\min_{l_i \\le x_i \\le u_i, \\forall i} L(x_1, x_2, x_3, \\nu) = \\sum_{i=1}^3 \\left( \\min_{l_i \\le x_i \\le u_i} \\left\\{ \\frac{1}{2}q_i x_i^2 + (r_i+\\nu) x_i \\right\\} \\right) - \\nu b\n$$\n\n**2. 代理子问题解的推导：**\n每个代理 $i$ 必须解决一个独立的子问题，以找到其资源分配 $x_i(\\nu)$，作为对偶价格 $\\nu$ 的函数：\n$$\nx_i(\\nu) = \\arg\\min_{l_i \\le x_i \\le u_i} \\left\\{ \\frac{1}{2}q_i x_i^2 + (r_i+\\nu) x_i \\right\\}\n$$\n这是一个在闭区间上最小化一个严格凸二次函数的问题。无约束的最小值点可以通过将关于 $x_i$ 的导数设为零来找到：\n$$\nq_i x_i + r_i + \\nu = 0 \\implies x_i^{\\text{unconstrained}} = -\\frac{r_i+\\nu}{q_i}\n$$\n有约束子问题的解是这个无约束最小值点在可行区间 $[l_i, u_i]$ 上的投影。这可以通过在边界处对值进行削峰或饱和处理来实现：\n$$\nx_i(\\nu) = \\max\\left(l_i, \\min\\left(u_i, -\\frac{r_i+\\nu}{q_i}\\right)\\right)\n$$\n这可以写成一个分段函数：\n$$\nx_i(\\nu) = \\begin{cases} u_i  \\text{if } -\\frac{r_i+\\nu}{q_i} > u_i \\\\ -\\frac{r_i+\\nu}{q_i}  \\text{if } l_i \\le -\\frac{r_i+\\nu}{q_i} \\le u_i \\\\ l_i  \\text{if } -\\frac{r_i+\\nu}{q_i}  l_i \\end{cases}\n$$\n现在，我们应用给定的参数来为每个代理找到具体解：\n\n- **代理 1：** $q_1=2, r_1=1, l_1=0, u_1=2$。无约束解为 $x_1^{\\text{uc}}(\\nu) = -\\frac{1+\\nu}{2}$。\n  有效区域是 $0 \\le -\\frac{1+\\nu}{2} \\le 2$，简化为 $-5 \\le \\nu \\le -1$。\n  $$x_1(\\nu) = \\begin{cases} 2  \\text{if } \\nu  -5 \\\\ -\\frac{1}{2}(1+\\nu)  \\text{if } -5 \\le \\nu \\le -1 \\\\ 0  \\text{if } \\nu > -1 \\end{cases}$$\n\n- **代理 2：** $q_2=1, r_2=-2, l_2=1, u_2=3$。无约束解为 $x_2^{\\text{uc}}(\\nu) = -\\frac{-2+\\nu}{1} = 2-\\nu$。\n  有效区域是 $1 \\le 2-\\nu \\le 3$，简化为 $-1 \\le \\nu \\le 1$。\n  $$x_2(\\nu) = \\begin{cases} 3  \\text{if } \\nu  -1 \\\\ 2-\\nu  \\text{if } -1 \\le \\nu \\le 1 \\\\ 1  \\text{if } \\nu > 1 \\end{cases}$$\n\n- **代理 3：** $q_3=3, r_3=0, l_3=-1, u_3=1$。无约束解为 $x_3^{\\text{uc}}(\\nu) = -\\frac{0+\\nu}{3} = -\\frac{\\nu}{3}$。\n  有效区域是 $-1 \\le -\\frac{\\nu}{3} \\le 1$，简化为 $-3 \\le \\nu \\le 3$。\n  $$x_3(\\nu) = \\begin{cases} 1  \\text{if } \\nu  -3 \\\\ -\\frac{\\nu}{3}  \\text{if } -3 \\le \\nu \\le 3 \\\\ -1  \\text{if } \\nu > 3 \\end{cases}$$\n\n**3. 确定最优对偶价格：**\n对偶问题是 $\\max_{\\nu} g(\\nu)$。最优对偶价格 $\\nu^*$ 是通过找到对偶函数导数的根来确定的。根据丹斯金定理，$\\frac{dg}{d\\nu} = \\sum_{i=1}^3 x_i(\\nu) - b$。将其设为零，得到最优 $\\nu^*$ 的条件，即代理们的选择必须满足资源约束：\n$$\nS(\\nu^*) = x_1(\\nu^*) + x_2(\\nu^*) + x_3(\\nu^*) = b\n$$\n我们需要求解 $S(\\nu) = 1$。函数 $S(\\nu)$ 是一个关于 $\\nu$ 的连续、分段线性且非增的函数。我们可以在 $x_i(\\nu)$ 分段定义的断点 $\\{-5, -3, -1, 1, 3\\}$ 处评估 $S(\\nu)$ 的值。\n- 对于 $\\nu=-1$：$x_1(-1)=0$, $x_2(-1)=3$, $x_3(-1) = 1/3$。$S(-1) = 0+3+1/3 = 10/3 \\approx 3.33$。\n- 对于 $\\nu=1$：$x_1(1)=0$, $x_2(1)=1$, $x_3(1) = -1/3$。$S(1) = 0+1-1/3 = 2/3 \\approx 0.67$。\n\n由于 $S(1) = 2/3  1$ 且 $S(-1) = 10/3 > 1$，最优值 $\\nu^*$ 必须位于区间 $[-1, 1]$ 内。在此区间内，代理选择的表达式为：\n- $x_1(\\nu)=0$\n- $x_2(\\nu)=2-\\nu$\n- $x_3(\\nu)=-\\frac{\\nu}{3}$\n\n我们将其总和设为 $b=1$：\n$$\nS(\\nu) = 0 + (2-\\nu) + \\left(-\\frac{\\nu}{3}\\right) = 1\n$$\n$$\n2 - \\nu - \\frac{\\nu}{3} = 1\n$$\n$$\n2 - \\frac{4}{3}\\nu = 1\n$$\n$$\n1 = \\frac{4}{3}\\nu\n$$\n$$\n\\nu^* = \\frac{3}{4} = 0.75\n$$\n这个值 $\\nu^*=0.75$ 位于区间 $[-1, 1]$ 内，证实了我们的计算是一致的。\n\n**4. 经济学解释：**\n最优对偶价格 $\\nu^* = 0.75$ 是共享资源的影子价格。它代表了资源对于系统的边际价值。具体来说，如果可用资源总量 $b$ 增加一个微小的量 $\\Delta b$，最小总成本将大约减少 $\\nu^* \\Delta b$。像 $\\nu^*=0.75$ 这样的正值表明资源是稀缺的；放宽约束（增加 $b$）将是有益的，并且会降低整个系统的成本。\n\n在对偶分解框架中，$\\nu^*$ 充当一个协调性的市场价格。每个代理 $i$ 都会被告知这个价格，并独立地最小化其自身的局部目标，即其内在成本 $f_i(x_i)$ 加上资源消耗的成本 $\\nu^* x_i$。也就是说，每个代理求解 $\\min_{l_i \\le x_i \\le u_i} f_i(x_i) + \\nu^* x_i$。\n\n边界约束 $[l_i, u_i]$ 的存在至关重要。代理对价格 $\\nu^*$ 的响应受到这些限制的影响。\n- 如果一个代理的无约束最优选择 $-\\frac{r_i+\\nu^*}{q_i}$ 落在其边界内，则称该代理“处于其有效区域”。此时，代理对资源的边际成本 $\\nabla f_i(x_i) = q_i x_i + r_i$ 恰好等于系统价格的负值，即 $-\\nu^*$。代理 2（$x_2 = 1.25$，在 $[1, 3]$ 内）和代理 3（$x_3 = -0.25$，在 $[-1, 1]$ 内）就是这种情况。确实，$\\nabla f_2(1.25) = (1)(1.25) + (-2) = -0.75 = -\\nu^*$ 并且 $\\nabla f_3(-0.25) = (3)(-0.25) + 0 = -0.75 = -\\nu^*$。\n- 如果无约束选择落在边界之外，则称该代理“受边界约束”或“饱和”。代理的最优选择是在最接近其无约束理想点的边界上运行。代理 1 就是这种情况。其对于 $\\nu^*=0.75$ 的无约束理想点是 $x_1 = -\\frac{1+0.75}{2} = -0.875$。由于这低于其下界 $l_1=0$，代理 1 选择 $x_1=0$。在这种情况下，代理的边际成本不等于 $-\\nu^*$；相反，子问题的 KKT 条件表明，改变的动机指向“禁止”区域。对于代理 1，$\\nabla f_1(0) = 2(0)+1=1 \\ne -0.75$。局部边际成本高于系统的边际收益，这表明代理 1 理想情况下希望贡献负数量的资源（或消耗少于零），但受其下界限制。\n\n最终的最优分配是 $x_1^*=0$，$x_2^*=1.25$ 和 $x_3^*=-0.25$，它们的总和为 $b=1$。最优对偶价格 $\\nu^* = 0.75$ 是唯一的市场价格，它引导出这些局部决策，而这些决策共同满足了全局资源约束。\n\n问题要求将最优对偶价格四舍五入到四位有效数字。\n$$\n\\nu^* = 0.7500\n$$", "answer": "$$\\boxed{0.7500}$$", "id": "3122710"}, {"introduction": "对偶分解的应用不仅限于凸优化问题，它在整数规划等非凸领域也同样强大。这个练习将带你探索如何使用拉格朗日松弛来处理一个由共享预算耦合的整数规划问题，其中每个子问题本身就是一个小型的 $0$-$1$ 背包问题。你将学会如何构建拉格朗日对偶函数，求解对偶问题以获得一个上界，并将其与原始问题的最优整数解进行比较，从而揭示两者之间的“整数性差距” [@problem_id:3122695]。", "problem": "考虑一个可分离的最大化问题，其中每个子问题是一个小的 $0$-$1$ 背包问题，由一个单一的共享预算耦合。仅使用拉格朗日松弛和拉格朗日对偶函数的定义作为你的出发点。\n\n有 $2$ 个子系统，索引为 $i \\in \\{1,2\\}$。每个子系统 $i$ 有一个局部背包容量 $W_i$ 和两个物品，索引为 $j \\in \\{A,B\\}$。选择一个物品 $(i,j)$ 会产生利润 $c_{i,j}$，消耗子系统 $i$ 的局部重量 $w_{i,j}$，并使用全局预算量 $a_{i,j}$。令 $x_{i,j} \\in \\{0,1\\}$ 表示是否选择了物品 $(i,j)$。\n\n子系统 $1$ 数据：\n- 物品 $A_1$：利润 $c_{1,A} = 10$，局部重量 $w_{1,A} = 3$，全局预算系数 $a_{1,A} = 4$。\n- 物品 $B_1$：利润 $c_{1,B} = 6$，局部重量 $w_{1,B} = 2$，全局预算系数 $a_{1,B} = 1$。\n- 局部容量 $W_1 = 3$。\n\n子系统 $2$ 数据：\n- 物品 $A_2$：利润 $c_{2,A} = 9$，局部重量 $w_{2,A} = 3$，全局预算系数 $a_{2,A} = 3$。\n- 物品 $B_2$：利润 $c_{2,B} = 5$，局部重量 $w_{2,B} = 2$，全局预算系数 $a_{2,B} = 2$。\n- 局部容量 $W_2 = 3$。\n\n共享预算：$\\sum_{i \\in \\{1,2\\}} \\sum_{j \\in \\{A,B\\}} a_{i,j} x_{i,j} \\le B$，其中 $B = 6$。\n\n原始问题是在局部背包约束和共享预算约束下最大化总利润：\n- 最大化 $\\sum_{i \\in \\{1,2\\}} \\sum_{j \\in \\{A,B\\}} c_{i,j} x_{i,j}$。\n- 约束条件为 $\\sum_{j \\in \\{A,B\\}} w_{1,j} x_{1,j} \\le W_1$，$\\sum_{j \\in \\{A,B\\}} w_{2,j} x_{2,j} \\le W_2$，以及 $\\sum_{i \\in \\{1,2\\}} \\sum_{j \\in \\{A,B\\}} a_{i,j} x_{i,j} \\le B$。\n- 变量 $x_{i,j} \\in \\{0,1\\}$。\n\n任务：\n- 仅使用拉格朗日松弛和拉格朗日对偶的定义，用乘子 $\\lambda \\ge 0$ 松弛共享预算约束，并推导拉格朗日对偶函数 $q(\\lambda)$，该函数必须能分解到各个 $i \\in \\{1,2\\}$ 上。\n- 通过分析作为 $\\lambda$ 函数的子问题响应，确定在 $\\lambda \\ge 0$ 上最小化 $q(\\lambda)$ 的最优对偶价格 $\\lambda^{\\star}$，并计算相应的对偶界 $q(\\lambda^{\\star})$。\n- 通过从第一性原理直接推理，确定最优整数原始目标值，并将其与 $q(\\lambda^{\\star})$ 进行比较，以确定整数规划间隙。\n- 最后，报告最优对偶价格 $\\lambda^{\\star}$ 的精确值作为你的答案。\n\n以单一精确数字的形式提供最终答案。不需要四舍五入，也不涉及单位。", "solution": "该问题是一个由单一线性约束耦合的可分离整数规划问题。我们的任务是使用拉格朗日对偶性来分析此问题。\n\n首先，我们验证问题陈述的有效性。\n该问题被表述为一个标准的整数线性规划，这是一个定义明确的数学构造。所有数据值（利润 $c_{i,j}$、重量 $w_{i,j}$、预算系数 $a_{i,j}$、容量 $W_i$ 和总预算 $B$）都已提供。约束条件明确，目标函数没有歧义。没有科学或逻辑上的矛盾，没有缺失信息，也没有主观因素。该问题是适定的，并基于成熟的数学优化理论。因此，该问题是有效的。\n\n原始问题是：\n最大化 $P(x) = 10x_{1,A} + 6x_{1,B} + 9x_{2,A} + 5x_{2,B}$\n约束条件：\n$1.$ $3x_{1,A} + 2x_{1,B} \\le 3$\n$2.$ $3x_{2,A} + 2x_{2,B} \\le 3$\n$3.$ $4x_{1,A} + x_{1,B} + 3x_{2,A} + 2x_{2,B} \\le 6$\n$4.$ $x_{1,A}, x_{1,B}, x_{2,A}, x_{2,B} \\in \\{0, 1\\}$\n\n问题要求使用拉格朗日乘子 $\\lambda \\ge 0$ 来松弛共享预算约束（第三个约束）。拉格朗日函数 $L(x, \\lambda)$ 定义为：\n$L(x, \\lambda) = \\sum_{i,j} c_{i,j} x_{i,j} + \\lambda (B - \\sum_{i,j} a_{i,j} x_{i,j})$\n$L(x, \\lambda) = \\sum_{i,j} (c_{i,j} - \\lambda a_{i,j}) x_{i,j} + \\lambda B$\n\n拉格朗日对偶函数 $q(\\lambda)$ 是在剩余局部约束条件下，拉格朗日函数关于变量 $x_{i,j}$ 的最大值：\n$q(\\lambda) = \\max_{x} \\{ L(x, \\lambda) \\mid 3x_{1,A} + 2x_{1,B} \\le 3, 3x_{2,A} + 2x_{2,B} \\le 3, x_{i,j} \\in \\{0,1\\} \\}$\n\n由于约束的结构， $q(\\lambda)$ 的最大化问题可以分解为独立子问题的和，每个子系统 $i \\in \\{1,2\\}$ 对应一个子问题：\n$q(\\lambda) = L_1(\\lambda) + L_2(\\lambda) + \\lambda B$\n其中\n$L_1(\\lambda) = \\max \\{ (10 - 4\\lambda)x_{1,A} + (6 - \\lambda)x_{1,B} \\mid 3x_{1,A} + 2x_{1,B} \\le 3, x_{1,A}, x_{1,B} \\in \\{0,1\\} \\}$\n$L_2(\\lambda) = \\max \\{ (9 - 3\\lambda)x_{2,A} + (5 - 2\\lambda)x_{2,B} \\mid 3x_{2,A} + 2x_{2,B} \\le 3, x_{2,A}, x_{2,B} \\in \\{0,1\\} \\}$\n且 $B=6$。\n\n我们将每个子问题作为 $\\lambda$ 的函数来求解。\n对于子问题 1，$(x_{1,A}, x_{1,B})$ 的可行解是 $(0,0)$、$(1,0)$ 和 $(0,1)$。\n对应的目标值是 $0$、$10 - 4\\lambda$ 和 $6 - \\lambda$。我们必须选择这些值中的最大值。\n- 如果 $10 - 4\\lambda \\ge 6 - \\lambda$ 且 $10 - 4\\lambda \\ge 0$，则解为 $(1,0)$。\n    $10 - 4\\lambda \\ge 6 - \\lambda \\implies 4 \\ge 3\\lambda \\implies \\lambda \\le \\frac{4}{3}$。\n    $10 - 4\\lambda \\ge 0 \\implies \\lambda \\le 2.5$。因此，对于 $\\lambda \\le \\frac{4}{3}$，解为 $(1,0)$。\n- 如果 $6 - \\lambda \\ge 10 - 4\\lambda$ 且 $6 - \\lambda \\ge 0$，则解为 $(0,1)$。\n    $6 - \\lambda \\ge 10 - 4\\lambda \\implies 3\\lambda \\ge 4 \\implies \\lambda \\ge \\frac{4}{3}$。\n    $6 - \\lambda \\ge 0 \\implies \\lambda \\le 6$。因此，对于 $\\frac{4}{3}  \\lambda \\le 6$，解为 $(0,1)$。\n- 如果两个系数都为负，则解为 $(0,0)$，这在 $\\lambda > 6$ 时发生。\n\n子问题 1 的总结：\n- 当 $0 \\le \\lambda \\le \\frac{4}{3}$ 时，$x_1^*(\\lambda) = (1,0)$，且 $L_1(\\lambda) = 10 - 4\\lambda$。\n- 当 $\\frac{4}{3}  \\lambda \\le 6$ 时，$x_1^*(\\lambda) = (0,1)$，且 $L_1(\\lambda) = 6 - \\lambda$。\n- 当 $\\lambda > 6$ 时，$x_1^*(\\lambda) = (0,0)$，且 $L_1(\\lambda) = 0$。\n\n对于子问题 2，$(x_{2,A}, x_{2,B})$ 的可行解是 $(0,0)$、$(1,0)$ 和 $(0,1)$。\n对应的目标值是 $0$、$9 - 3\\lambda$ 和 $5 - 2\\lambda$。\n- 比较 $9 - 3\\lambda$ 和 $5 - 2\\lambda$：$9 - 3\\lambda = 5 - 2\\lambda \\implies 4 = \\lambda$。当 $\\lambda  4$ 时，$9-3\\lambda > 5-2\\lambda$。\n- $9 - 3\\lambda > 0 \\implies \\lambda  3$。\n- $5 - 2\\lambda > 0 \\implies \\lambda  2.5$。\n如果 $0 \\le \\lambda \\le 3$, $9-3\\lambda \\ge 0$。由于 $\\lambda  4$，$9-3\\lambda > 5-2\\lambda$。所以解是 $(1,0)$。\n如果 $\\lambda > 3$，$9-3\\lambda  0$。另外，对于 $\\lambda > 3$，$5-2\\lambda  0$。所以解是 $(0,0)$。\n\n子问题 2 的总结：\n- 当 $0 \\le \\lambda \\le 3$ 时，$x_2^*(\\lambda) = (1,0)$，且 $L_2(\\lambda) = 9 - 3\\lambda$。\n- 当 $\\lambda > 3$ 时，$x_2^*(\\lambda) = (0,0)$，且 $L_2(\\lambda) = 0$。\n\n拉格朗日对偶问题是找到 $\\lambda^{\\star} = \\arg\\min_{\\lambda \\ge 0} q(\\lambda)$。函数 $q(\\lambda)$ 是凸且分段线性的。最小值在其次梯度包含 $0$ 的点处找到。次梯度由 $B - \\sum_{i,j} a_{i,j} x_{i,j}^*(\\lambda)$ 给出，其中 $x^*(\\lambda)$ 是拉格朗日子问题的最优解。\n我们在由断点 $\\frac{4}{3}$ 和 $3$ 定义的区间内检查次梯度。\n\n- 对于 $0 \\le \\lambda  \\frac{4}{3}$：\n    $x_1^*(\\lambda)=(1,0)$ 且 $x_2^*(\\lambda)=(1,0)$。\n    总预算消耗为 $a_{1,A} \\cdot 1 + a_{2,A} \\cdot 1 = 4+3=7$。\n    次梯度为 $B - 7 = 6 - 7 = -1$。\n    $q(\\lambda) = (10-4\\lambda) + (9-3\\lambda) + 6\\lambda = 19 - \\lambda$。斜率为 $-1$。由于斜率为负，最小值在更大的 $\\lambda$ 处出现。\n\n- 对于 $\\frac{4}{3}  \\lambda \\le 3$：\n    $x_1^*(\\lambda)=(0,1)$ 且 $x_2^*(\\lambda)=(1,0)$。\n    总预算消耗为 $a_{1,B} \\cdot 1 + a_{2,A} \\cdot 1 = 1+3=4$。\n    次梯度为 $B - 4 = 6 - 4 = 2$。\n    $q(\\lambda) = (6-\\lambda) + (9-3\\lambda) + 6\\lambda = 15 + 2\\lambda$。斜率为 $2$。由于斜率为正，最小值在更小的 $\\lambda$ 处出现。\n\n次梯度在 $\\lambda=\\frac{4}{3}$ 处从负变为正。这表明 $q(\\lambda)$ 的最小值在 $\\lambda^{\\star} = \\frac{4}{3}$ 处。\n在 $\\lambda = \\frac{4}{3}$ 时，子问题 1 有两个最优解 $(1,0)$ 和 $(0,1)$，因为 $10 - 4(\\frac{4}{3}) = \\frac{14}{3}$ 且 $6 - \\frac{4}{3} = \\frac{14}{3}$。此时的次梯度是区间 $[-1, 2]$，其中包含 $0$。因此，最优对偶价格确实是 $\\lambda^{\\star} = \\frac{4}{3}$。\n\n相应的对偶界是 $q(\\lambda^{\\star}) = q(\\frac{4}{3})$。使用第一个区间的表达式：\n$q(\\frac{4}{3}) = 19 - \\frac{4}{3} = \\frac{57-4}{3} = \\frac{53}{3}$。\n\n为了找到整数规划间隙，我们通过枚举可行组合来求解原始问题。\n子系统 1 的可行解（满足 $3x_{1,A} + 2x_{1,B} \\le 3$）：$(0,0), (1,0), (0,1)$。\n子系统 2 的可行解（满足 $3x_{2,A} + 2x_{2,B} \\le 3$）：$(0,0), (1,0), (0,1)$。\n我们将这些局部解的配对与全局预算约束 $4x_{1,A} + x_{1,B} + 3x_{2,A} + 2x_{2,B} \\le 6$ 进行核对。\n- $x_{1}=(1,0)$, $x_{2}=(0,1)$: 预算使用 $a_{1,A}+a_{2,B}=4+2=6$。可行。利润 $c_{1,A}+c_{2,B}=10+5=15$。\n- $x_{1}=(0,1)$, $x_{2}=(1,0)$: 预算使用 $a_{1,B}+a_{2,A}=1+3=4$。可行。利润 $c_{1,B}+c_{2,A}=6+9=15$。\n- $x_{1}=(1,0)$, $x_{2}=(1,0)$: 预算使用 $a_{1,A}+a_{2,A}=4+3=7$。不可行。\n- 其他组合产生的利润较低。例如，$x_1=(1,0), x_2=(0,0)$ 得到利润 $10$。$x_1=(0,1), x_2=(0,1)$ 得到利润 $11$。\n最优原始目标值为 $p^{\\star} = 15$。\n\n整数规划间隙为 $q(\\lambda^{\\star}) - p^{\\star} = \\frac{53}{3} - 15 = \\frac{53-45}{3} = \\frac{8}{3}$。\n\n问题要求最优对偶价格 $\\lambda^{\\star}$ 的精确值。\n根据我们的分析，$\\lambda^{\\star} = \\frac{4}{3}$。", "answer": "$$\n\\boxed{\\frac{4}{3}}\n$$", "id": "3122695"}]}