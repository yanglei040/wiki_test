{"hands_on_practices": [{"introduction": "第一个实践练习旨在巩固您对Kruskal算法和Prim算法之间根本差异的理解。通过在一个特殊设计的图上追踪它们的行为，您将亲眼看到Kruskal算法对所有边进行排序的“全局”方法与Prim算法扩展单个树的“局部”方法有何不同。这个对比对于培养在特定情境下选择更优算法的直觉至关重要。[@problem_id:3151259]", "problem": "考虑一个具有 $n=5$ 个横档的梯形图，其构造如下。顶部导轨上有顶点 $\\{t_1,t_2,t_3,t_4,t_5\\}$，底部导轨上有顶点 $\\{b_1,b_2,b_3,b_4,b_5\\}$。对于每个 $i \\in \\{1,2,3,4\\}$，存在导轨边 $(t_i,t_{i+1})$ 和 $(b_i,b_{i+1})$；对于每个 $i \\in \\{1,2,3,4,5\\}$，存在横档边 $(t_i,b_i)$。边的权重分配如下：\n- 每条导轨边的权重为 $3$。\n- 如果 $i$ 是奇数，横档边 $(t_i,b_i)$ 的权重为 $1$；如果 $i$ 是偶数，权重为 $10$。\n\n假设所有边都是无向的，并且权重严格按照给定值。你将在此图上运行 Kruskal 算法和 Prim 算法。对于 Prim 算法，起始顶点是 $t_1$。当出现权重相等的边时，平局被任意打破，但没有两个不同的权重值会相等。\n\n仅使用最小生成树的基本性质，选择所有关于这些算法最早选择的边必须为真的陈述。\n\nA. 在使用 Kruskal 算法时，最先被接受的边恰好是第 $1$、$3$ 和 $5$ 列的三条轻量级横档（即 $(t_1,b_1)$、$(t_3,b_3)$、$(t_5,b_5)$），顺序不限，并且它们都在任何导轨边之前被选择。\n\nB. 在使用从 $t_1$ 开始的 Prim 算法时，选择的第一条边是轻量级横档 $(t_1,b_1)$，第二条边必须是权重为 $3$ 的导轨边（而不是任何横档边）。\n\nC. 在使用从 $t_1$ 开始的 Prim 算法时，第二条边可以是轻量级横档 $(t_3,b_3)$，因为它的权重小于导轨边。\n\nD. 尽管两种算法都会生成最小生成树，但 Prim 算法和 Kruskal 算法的早期选择可能不同：Kruskal 算法的全局排序选择会首先选取所有轻量级横档，而 Prim 算法的选择受当前切割的限制，并且可能会根据起始点交错选择导轨边和横档边。", "solution": "首先，让我们按权重对边进行分类：\n*   **权重 1**：$(t_1, b_1)$, $(t_3, b_3)$, $(t_5, b_5)$。（3 条边，轻量级横档）\n*   **权重 3**：$(t_1, t_2), (t_2, t_3), (t_3, t_4), (t_4, t_5)$ 和 $(b_1, b_2), (b_2, b_3), (b_3, b_4), (b_4, b_5)$。（8 条边，导轨边）\n*   **权重 10**：$(t_2, b_2), (t_4, b_4)$。（2 条边，重量级横档）\n\n一个有 $V$ 个顶点的图的最小生成树将有 $V-1$ 条边。这里 $|V|=10$，所以最小生成树将有 $10-1 = 9$ 条边。\n\n**Kruskal 算法分析**\n\nKruskal 算法的工作原理是按权重对所有边进行非递减排序，如果一条边与先前添加的边不形成环，则将其添加到增长的森林中。\n1.  算法首先考虑所有权重为 $1$ 的边。这些是 $(t_1, b_1)$、$(t_3, b_3)$ 和 $(t_5, b_5)$。\n2.  这三条边连接了三对不相交的顶点。因此，以任何顺序添加这三条边都不会产生环。由于它们是整个图中权重最低的边，Kruskal 算法*必须*接受所有这三条边，然后再考虑任何权重为3的边。\n\n**Prim 算法分析**\n\nPrim 算法从单个顶点开始，通过迭代添加连接最小生成树中顶点与树外顶点的最便宜的边来增长最小生成树。起始顶点给定为 $t_1$。\n1.  **步骤 1**：初始树为 $T_0 = \\{t_1\\}$。树中的顶点集合为 $S = \\{t_1\\}$。算法考虑所有与 $t_1$ 相邻的边。它们是：\n    *   $(t_1, b_1)$，权重为 $1$。\n    *   $(t_1, t_2)$，权重为 $3$。\n    权重最小的边是 $(t_1, b_1)$。必须选择这条边。新的顶点集合为 $S = \\{t_1, b_1\\}$。\n\n2.  **步骤 2**：算法现在考虑所有跨越 $S = \\{t_1, b_1\\}$ 和 $V \\setminus S$ 之间切割的边。\n    *   从 $t_1$ 出发：$(t_1, t_2)$，权重为 $3$。\n    *   从 $b_1$ 出发：$(b_1, b_2)$，权重为 $3$。\n    切割中边的最小权重是 $3$。具有此权重的两条边是 $(t_1, t_2)$ 和 $(b_1, b_2)$。算法将选择这两条边中的一条。因此，Prim 算法选择的第二条边*必须*是权重为 $3$ 的导轨边。\n\n**选项评估**\n\n*   **A**: 正如对 Kruskal 算法的分析，三条权重为 $1$ 的边是图中绝对最轻的，并且它们之间不形成环。因此，在考虑任何更高权重的边之前，它们都将被接受。**该陈述是正确的。**\n\n*   **B**: 正如对 Prim 算法的分析，从 $t_1$ 开始，第一选择必须是权重为 $1$ 的 $(t_1, b_1)$。此后，与树 $\\{t_1, b_1\\}$ 相连的最便宜的边是权重为 $3$ 的导轨边 $(t_1, t_2)$ 和 $(b_1, b_2)$。因此，第二条边必须是导轨边。**该陈述是正确的。**\n\n*   **C**: 这个陈述反映了对 Prim 算法的一个常见误解。虽然边 $(t_3, b_3)$ 的权重为 $1$，但它不能被选为第二条边。Prim 算法只能从连接当前树（此时为 $\\{t_1, b_1\\}$）与树外顶点的边中进行选择。边 $(t_3, b_3)$ 不在当前的切割中，因此不是选择的候选对象。**该陈述是不正确的。**\n\n*   **D**: 该陈述正确地对比了两种算法。Kruskal 算法首先选取所有三条权重为 $1$ 的横档。Prim 算法先选择一条权重为 $1$ 的横档，然后选择一条权重为 $3$ 的导轨边。这清楚地表明它们的早期选择不同，并说明了 Kruskal 的全局策略与 Prim 的局部生长策略之间的差异。**该陈述是正确的。**", "answer": "$$\\boxed{ABD}$$", "id": "3151259"}, {"introduction": "经典的教科书例子通常使用互不相同的边权重，从而得到唯一的最小生成树。本练习将挑战您探索一个更复杂也更现实的场景：多条边具有相同权重。通过分析一个简单的环形图，您将发现Kruskal算法中的平局打破机制如何导致在多个可能的最小生成树上形成一个概率分布，从而加深您对核心最优性条件的理解。[@problem_id:3151289]", "problem": "考虑一个包含 $4$ 个标记顶点 $v_{1}, v_{2}, v_{3}, v_{4}$ 的无向连通简单图 $G$，其边集为一个 $4$-环\n$$E=\\{e_{1}, e_{2}, e_{3}, e_{4}\\},$$\n其中 $e_{1}=(v_{1},v_{2})$，$e_{2}=(v_{2},v_{3})$，$e_{3}=(v_{3},v_{4})$ 以及 $e_{4}=(v_{4},v_{1})$。所有边具有相同的正权重，即对于所有 $i\\in\\{1,2,3,4\\}$，$w(e_{i})=w$，其中 $w0$。最小生成树 (MST) 的定义是：一个生成子图，它是一棵树，并且在所有生成树中总边权最小。Kruskal 算法按权重的非递减顺序对边进行排序，并且当且仅当一条边连接两个不同的连通分量时（从而不会形成环），才添加该边。当多条边权重相同时，假设通过对这些边进行均匀随机排列来打破平局。\n\n从最小生成树的基本环和切分最优性性质出发，分析在权重相等的情况下，随机打破平局如何决定图 $G$ 的最小生成树的结构。明确描述 Kruskal 算法产生的最小生成树集合上的导出概率分布。然后，计算 Kruskal 算法输出特定生成树\n$$T^{\\star}=\\{e_{1}, e_{2}, e_{3}\\}$$\n的概率。以单一实数形式提供最终答案。无需四舍五入。", "solution": "本题要求在所有边权重相等的4顶点环图上，计算Kruskal算法得到特定最小生成树（MST）$T^{\\star}=\\{e_{1}, e_{2}, e_{3}\\}$的概率。\n\n首先，我们确定图 $G$ 的所有MST。图 $G$ 有 $n=4$ 个顶点和 $m=4$ 条边，形成一个环。任何生成树必须有 $n-1=3$ 条边。要从一个环中得到一棵树，我们必须移除恰好一条边。从4条边中移除1条有 $\\binom{4}{1} = 4$ 种方式。因此，有4棵不同的生成树：\n*   $T_1 = E \\setminus \\{e_1\\} = \\{e_2, e_3, e_4\\}$\n*   $T_2 = E \\setminus \\{e_2\\} = \\{e_1, e_3, e_4\\}$\n*   $T_3 = E \\setminus \\{e_3\\} = \\{e_1, e_2, e_4\\}$\n*   $T_4 = E \\setminus \\{e_4\\} = \\{e_1, e_2, e_3\\} = T^{\\star}$\n\n由于所有边的权重都相同（为 $w > 0$），所以每棵生成树的总权重都是 $3w$。这意味着所有4棵生成树都是最小生成树。\n\n接下来，我们分析Kruskal算法的行为。算法按非递减权重对边排序。因为所有边的权重相等，平局通过一个均匀随机的边排列 $\\pi = (f_1, f_2, f_3, f_4)$ 来打破。总共有 $4! = 24$ 种等可能的排列。\n\nKruskal算法按排列顺序处理边，只要不形成环就添加：\n1.  **边 $f_1$**：总是被添加，因为不会形成环。\n2.  **边 $f_2$**：总是被添加，因为两条边不会形成环。\n3.  **边 $f_3$**：总是被添加。因为 $\\{f_1, f_2, f_3\\}$ 是从一个4环中取出的任意3条边，它们必然形成一条路径，而不是一个环。\n4.  此时，算法已经选择了3条边，即 $n-1$ 条边，因此算法终止。\n\n最终的MST就是随机排列中的前三条边 $\\{f_1, f_2, f_3\\}$。\n\n我们想求得到 $T^{\\star} = \\{e_1, e_2, e_3\\}$ 的概率。这当且仅当排列中的前三条边是 $\\{e_1, e_2, e_3\\}$（顺序不限）。这等价于排列中的最后一条边 $f_4$ 是 $e_4$。\n\n在一个对4个不同项目的均匀随机排列中，任何一个特定项目出现在最后一个位置的概率是 $\\frac{1}{4}$。\n\n我们可以通过组合学来验证：\n*   总排列数 = $4! = 24$。\n*   $e_4$ 在最后位置的有利排列数 = 将 $\\{e_1, e_2, e_3\\}$ 排列在前三个位置的方式数 = $3! = 6$。\n*   概率 = $\\frac{\\text{有利排列数}}{\\text{总排列数}} = \\frac{6}{24} = \\frac{1}{4}$。\n\n因此，Kruskal算法输出特定生成树 $T^{\\star}=\\{e_{1}, e_{2}, e_{3}\\}$ 的概率是 $\\frac{1}{4}$。", "answer": "$$\\boxed{\\frac{1}{4}}$$", "id": "3151289"}, {"introduction": "这个高级练习超越了静态问题，引入了参数优化的概念。在这里，边的权重不是固定的数值，而是参数 $\\lambda$ 的线性函数。您的任务是确定导致最优最小生成树结构改变的关键“断点”值 $\\lambda$，这提供了一个动态的优化视角，并让您更深刻地体会解对问题数据的敏感性。[@problem_id:3151302]", "problem": "考虑一个无向连通加权图 $G=(V,E)$，其中顶点集 $V=\\{A,B,C,D\\}$，边集 $E=\\{AB,AC,AD,BC,BD,CD\\}$。每条边 $e \\in E$ 的权重都线性依赖于一个实数参数 $\\lambda$，由 $w_{e}(\\lambda)=a_{e}\\lambda+b_{e}$ 给出，其中 $a_{e},b_{e \\in \\mathbb{R}}$。具体的边权重函数如下：\n- $w_{AB}(\\lambda)=\\lambda+1$,\n- $w_{AC}(\\lambda)=\\lambda+2$,\n- $w_{AD}(\\lambda)=\\lambda+3$,\n- $w_{BC}(\\lambda)=-\\lambda+5$,\n- $w_{BD}(\\lambda)=2$,\n- $w_{CD}(\\lambda)=-\\lambda+4$.\n\n仅使用生成树的基本定义以及作为生成树贪心方法（例如，证明 Kruskal 算法和 Prim 算法正确性的切割性质和环性质）基础的正确性性质，确定所有使最小生成树（MST）发生变化的 $\\lambda$ 的断点值。所谓变化，是指在断点的两侧，MST 中的边集是不同的。对于由这些断点确定的每个 $\\lambda$ 的开区间以及断点值本身，请确定 MST 的边集。\n\n最后，设 $S$ 为所有导致 MST 变化的、不重复的 $\\lambda$ 断点值之和。计算 $S$。请将最终答案以一个实数的形式给出，无需四舍五入。", "solution": "最小生成树（MST）的结构由边权重的相对顺序决定。只有当两条或多条边的权重相等时，MST的结构才可能改变。我们通过令成对的边权重相等来找到这些潜在的“断点”$\\lambda$ 值。\n\n给定的权重函数：\n*   $w_{AB}(\\lambda)=\\lambda+1$\n*   $w_{AC}(\\lambda)=\\lambda+2$\n*   $w_{AD}(\\lambda)=\\lambda+3$\n*   $w_{BC}(\\lambda)=-\\lambda+5$\n*   $w_{BD}(\\lambda)=2$\n*   $w_{CD}(\\lambda)=-\\lambda+4$\n\n成对相等求解$\\lambda$:\n*   $w_{AB}=w_{BC} \\Rightarrow \\lambda+1 = -\\lambda+5 \\Rightarrow 2\\lambda=4 \\Rightarrow \\lambda=2$\n*   $w_{AB}=w_{BD} \\Rightarrow \\lambda+1 = 2 \\Rightarrow \\lambda=1$\n*   $w_{AB}=w_{CD} \\Rightarrow \\lambda+1 = -\\lambda+4 \\Rightarrow 2\\lambda=3 \\Rightarrow \\lambda=3/2$\n*   $w_{AC}=w_{BC} \\Rightarrow \\lambda+2 = -\\lambda+5 \\Rightarrow 2\\lambda=3 \\Rightarrow \\lambda=3/2$\n*   $w_{AC}=w_{BD} \\Rightarrow \\lambda+2 = 2 \\Rightarrow \\lambda=0$\n*   $w_{AC}=w_{CD} \\Rightarrow \\lambda+2 = -\\lambda+4 \\Rightarrow 2\\lambda=2 \\Rightarrow \\lambda=1$\n*   $w_{AD}=w_{BC} \\Rightarrow \\lambda+3 = -\\lambda+5 \\Rightarrow 2\\lambda=2 \\Rightarrow \\lambda=1$\n*   $w_{AD}=w_{BD} \\Rightarrow \\lambda+3 = 2 \\Rightarrow \\lambda=-1$\n*   $w_{AD}=w_{CD} \\Rightarrow \\lambda+3 = -\\lambda+4 \\Rightarrow 2\\lambda=1 \\Rightarrow \\lambda=1/2$\n*   $w_{BC}=w_{BD} \\Rightarrow -\\lambda+5 = 2 \\Rightarrow \\lambda=3$\n*   $w_{CD}=w_{BD} \\Rightarrow -\\lambda+4 = 2 \\Rightarrow \\lambda=2$\n\n潜在断点的有序集合是 $\\{-1, 0, 1/2, 1, 3/2, 2, 3\\}$。我们现在分析每个点是否是真正的断点，即MST的边集是否在其两侧发生变化。一个4顶点的图的MST有3条边。\n\n1.  **区间 $\\lambda \\in (-\\infty, -1)$**:\n    以 $\\lambda=-2$ 为例，权重为 $w_{AB}=-1, w_{AC}=0, w_{AD}=1, w_{BD}=2, w_{CD}=6, w_{BC}=7$。Kruskal算法选择权重最小的三条边 $\\{AB, AC, AD\\}$，它们构成一棵树。MST是 $T_1=\\{AB, AC, AD\\}$。\n\n2.  **断点 $\\lambda=-1$**:\n    在 $\\lambda=-1$ 处，$w_{AD}=w_{BD}=2$。对于 $\\lambda  -1$，$w_{AD}  w_{BD}$；对于 $\\lambda > -1$，$w_{AD} > w_{BD}$。\n    对于 $\\lambda  -1$，Kruskal算法在选择 $AB$ 和 $AC$ 后，会选择 $AD$。MST是 $T_1$。\n    对于 $\\lambda > -1$ (略大于-1)，$BD$ 比 $AD$ 便宜。Kruskal算法在选择 $AB$ 和 $AC$ 后，会选择 $BD$。MST变为 $T_2=\\{AB, AC, BD\\}$。\n    由于MST改变，**$\\lambda = -1$ 是一个断点**。\n\n3.  **区间 $\\lambda \\in (-1, 1)$**:\n    MST是 $T_2=\\{AB, AC, BD\\}$。在 $\\lambda=0$ 和 $\\lambda=1/2$ 处，发生权重相等的边对（$AC, BD$ 和 $AD, CD$）的交换，但这不改变最终的MST边集，因为更便宜的边已经确定了树的大部分结构。\n\n4.  **断点 $\\lambda=1$**:\n    在 $\\lambda=1$ 处，$w_{AC}=w_{CD}=3$。\n    对于 $\\lambda  1$ (略小于1)，$w_{AC}  w_{CD}$。Kruskal算法选择 $\\{AB, BD\\}$ 后，需要连接顶点 $C$。$AC$是连接$C$的最便宜的边。MST是 $T_2=\\{AB, AC, BD\\}$。\n    对于 $\\lambda > 1$ (略大于1)，$w_{AC} > w_{CD}$。Kruskal算法选择 $\\{AB, BD\\}$ 后，$CD$ 成为连接$C$的最便宜的边。MST变为 $T_3=\\{AB, BD, CD\\}$。\n    由于MST改变，**$\\lambda=1$ 是一个断点**。\n\n5.  **区间 $\\lambda \\in (1, 3)$**:\n    MST是 $T_3=\\{AB, BD, CD\\}$。在 $\\lambda=3/2$ 和 $\\lambda=2$ 处的权重交换不影响最终的MST。例如，在 $\\lambda=2$ 附近，Kruskal总是选择 $\\{CD, BD, AB\\}$，尽管它们的内部顺序可能改变。\n\n6.  **断点 $\\lambda=3$**:\n    在 $\\lambda=3$ 处，$w_{BC}=w_{BD}=2$。\n    对于 $\\lambda  3$，$w_{BC} > w_{BD}$。考虑环 $B-C-D$。$BC$ 是环中最重的边，根据环性质，它不能在MST中。这与 $T_3=\\{AB, BD, CD\\}$ 一致。\n    对于 $\\lambda > 3$，$w_{BC}  w_{BD}$。现在 $BD$ 是环中最重的边，它不能在MST中。MST必须改变，用 $BC$ 替换 $BD$。MST变为 $T_4=\\{AB, BC, CD\\}$。\n    由于MST改变，**$\\lambda=3$ 是一个断点**。\n\n7.  **区间 $\\lambda \\in (3, \\infty)$**:\n    MST是 $T_4=\\{AB, BC, CD\\}$。\n\n所有导致MST变化的断点值为 $\\{-1, 1, 3\\}$。\n这些断点值的和 $S$ 是：\n$S = (-1) + 1 + 3 = 3$。", "answer": "$$\\boxed{3}$$", "id": "3151302"}]}