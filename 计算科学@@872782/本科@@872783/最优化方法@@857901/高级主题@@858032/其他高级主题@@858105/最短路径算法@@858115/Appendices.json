{"hands_on_practices": [{"introduction": "在处理网络路由、地图导航等许多实际问题时，我们都需要找到从起点到其他所有点的最快路径。Dijkstra 算法是在所有路径成本（如时间或距离）均为正数时解决此类问题的经典高效方法。通过这个练习，你将亲手执行 Dijkstra 算法的每一步，从而掌握其核心工作原理——贪心选择和松弛操作。", "problem": "一个小型数据中心的网络由一个中心路由器（标记为`R`）和五个服务器（标记为`S1`、`S2`、`S3`、`S4`和`S5`）组成。数据包可以在某些设备对之间传输，每个连接都有一个相关的延迟，以毫秒（ms）为单位。网络拓扑和延迟如下：\n\n- `R`与`S1`连接，延迟为10 ms。\n- `R`与`S2`连接，延迟为3 ms。\n- `R`与`S3`连接，延迟为8 ms。\n- `S1`与`S2`连接，延迟为4 ms。\n- `S1`与`S4`连接，延迟为2 ms。\n- `S2`与`S3`连接，延迟为2 ms。\n- `S2`与`S4`连接，延迟为9 ms。\n- `S3`与`S5`连接，延迟为5 ms。\n- `S4`与`S5`连接，延迟为1 ms。\n\n所有连接都是双向的，意味着两个方向的延迟相同。确定一个数据包从中心路由器`R`传输到五个服务器中每一个的最小可能延迟。\n\n按`S1`、`S2`、`S3`、`S4`、`S5`的特定顺序，提供最终的延迟。最终答案应为一组以ms为单位的数字。", "solution": "我们被要求在一个无向加权网络中，找出从源节点$R$到目标节点$S_{1},S_{2},S_{3},S_{4},S_{5}$的最小延迟路径。所有延迟都是非负的，因此可以使用Dijkstra算法。令$d(X)$表示从$R$到节点$X$的当前已知最优延迟。初始化$d(R)=0$和对所有$i$有$d(S_{i})=\\infty$，然后在每一步中，从具有最小暂定距离的已确定节点出发，沿着边进行松弛操作。\n\n使用从$R$出发的边进行初始化：\n- 从$R$到$S_{1}$：$d(S_{1})=\\min(\\infty,10)=10$。\n- 从$R$到$S_{2}$：$d(S_{2})=\\min(\\infty,3)=3$。\n- 从$R$到$S_{3}$：$d(S_{3})=\\min(\\infty,8)=8$。\n- 从$R$到$S_{4}$或$S_{5}$没有直接的边：$d(S_{4})=\\infty$, $d(S_{5})=\\infty$。\n\n确定具有最小暂定距离的节点$S_{2}$，其$d(S_{2})=3$，并对其邻居进行松弛：\n- 边$S_{2}$–$S_{1}$权重为$4$：$d(S_{1})=\\min(10,3+4)=7$。\n- 边$S_{2}$–$S_{3}$权重为$2$：$d(S_{3})=\\min(8,3+2)=5$。\n- 边$S_{2}$–$S_{4}$权重为$9$：$d(S_{4})=\\min(\\infty,3+9)=12$。\n\n现在暂定距离为$d(S_{1})=7$，$d(S_{3})=5$，$d(S_{4})=12$，$d(S_{5})=\\infty$。确定节点$S_{3}$，其$d(S_{3})=5$，并对其邻居进行松弛：\n- 边$S_{3}$–$S_{5}$权重为$5$：$d(S_{5})=\\min(\\infty,5+5)=10$。\n- 边$S_{3}$–$S_{2}$提供$5+2=7$的路径，但这并未改善$d(S_{2})=3$。\n\n现在暂定距离为$d(S_{1})=7$，$d(S_{4})=12$，$d(S_{5})=10$。确定节点$S_{1}$，其$d(S_{1})=7$，并对其邻居进行松弛：\n- 边$S_{1}$–$S_{4}$权重为$2$：$d(S_{4})=\\min(12,7+2)=9$。\n- 边$S_{1}$–$S_{2}$提供$7+4=11$的路径，但这并未改善$d(S_{2})=3$。\n\n现在暂定距离为$d(S_{4})=9$，$d(S_{5})=10$。确定节点$S_{4}$，其$d(S_{4})=9$，并对其邻居进行松弛：\n- 边$S_{4}$–$S_{5}$权重为$1$：$d(S_{5})=\\min(10,9+1)=10$（无变化）。\n\n最后，确定节点$S_{5}$，其$d(S_{5})=10$。所有节点都已确定，得出最小延迟如下：\n- $d(S_{1})=7$\n- $d(S_{2})=3$\n- $d(S_{3})=5$\n- $d(S_{4})=9$\n- $d(S_{5})=10$\n\n这些值以毫秒为单位，符合题目要求；最终答案按指定顺序列出了数值。", "answer": "$$\\boxed{\\begin{pmatrix}7  3  5  9  10\\end{pmatrix}}$$", "id": "1532819"}, {"introduction": "掌握了 Dijkstra 算法的基本操作后，探索其局限性同样至关重要。这个练习 [@problem_id:1532814] 将引导我们思考一个特殊情况：当图中存在负权重边时会发生什么。通过分析一个精心设计的反例，你将理解为什么 Dijkstra 算法的贪心策略在这种情况下可能会失效，这为我们学习更普适的算法（如 Bellman-Ford）奠定了基础。", "problem": "Dijkstra算法是一种用于在带权图中寻找节点间最短路径的基础算法。然而，其贪心方法存在局限性。考虑一个有向图，其顶点集为 $V = \\{S, A, B, C\\}$，其中 $S$ 是指定的源顶点。\n\n你的任务是找出以下哪一种由带权有向边描述的图配置，会导致Dijkstra算法失败。失败的定义是：算法终止，但计算出的从源点 $S$ 到图中至少一个其他顶点的最短路径距离是错误的。\n\n对于每个选项，边的格式为（起始顶点，结束顶点，权重）。所有从 $S$ 不可达的顶点，其路径距离被视为无穷大。\n\nA. 一个带权有向图，其边为：(S, A, 3); (S, B, 6); (B, A, -4); (S, C, 8)。\n\nB. 一个带权有向图，其边为：(S, A, 4); (S, B, 2); (B, A, -1); (B, C, 3)。\n\nC. 一个带权有向图，其边为：(S, A, 5); (A, B, -2); (S, C, 1)。\n\nD. 一个带权有向图，其边为：(S, A, 2); (S, B, 3); (A, C, 4); (B, C, 1)。", "solution": "当所有边的权重均为非负时，Dijkstra算法是正确的，因为一旦一个顶点 $u$ 以最小的暂定距离 $d(u)$ 被取出，就不可能再通过任何剩余的未确定顶点找到通往 $u$ 的更短路径。如果存在从 $S$ 可达的负权重边，稍后可能会出现一条通往已确定顶点的更短路径，这会违反这一不变性，导致算法失败。\n\n我通过首先确定从 $S$ 出发的真实最短路径距离，然后模拟Dijkstra算法的步骤来评估每个选项，看它是否会产生不正确的结果。\n\n选项 A: 边 (S,A,3), (S,B,6), (B,A,-4), (S,C,8)。\n- 真实最短路径距离：\n  - $d^{*}(A) = \\min\\{3,\\,6+(-4)\\} = 2$，路径为 $S \\to B \\to A$。\n  - $d^{*}(B) = 6$，路径为 $S \\to B$。\n  - $d^{*}(C) = 8$，路径为 $S \\to C$。\n- Dijkstra算法模拟：\n  - 初始化 $d(S)=0$, $d(A)=3$, $d(B)=6$, $d(C)=8$。\n  - 首先取出 $A$（最小值 $3$），最终确定 $A$ 的距离为 $3$；从 $A$ 出发没有可以松弛的边。\n  - 取出 $B$（距离为 $6$），松弛边 $(B,A)$ 得到候选距离 $d(A)=6+(-4)=2$，但 $A$ 已经是已确定顶点，不会被更新。\n  - 算法终止时 $d(A)=3$，这是不正确的，因为 $d^{*}(A)=2$。\n因此，Dijkstra算法在选项A上失败。\n\n选项 B: 边 (S,A,4), (S,B,2), (B,A,-1), (B,C,3)。\n- 真实最短路径距离：\n  - $d^{*}(B)=2$，路径为 $S \\to B$。\n  - $d^{*}(A)=2+(-1)=1$，路径为 $S \\to B \\to A$，优于直接路径的 $4$。\n  - $d^{*}(C)=2+3=5$，路径为 $S \\to B \\to C$。\n- Dijkstra算法模拟：\n  - 初始化 $d(S)=0$, $d(B)=2$, $d(A)=4$, $d(C)=\\infty$。\n  - 取出 $B$（距离为 $2$），松弛后得到 $d(A)=1$，$d(C)=5$。\n  - 取出 $A$（距离为 $1$），然后是 $C$（距离为 $5$）。最终距离与 $d^{*}$ 相符。没有失败。\n\n选项 C: 边 (S,A,5), (A,B,-2), (S,C,1)。\n- 真实最短路径距离：\n  - $d^{*}(C)=1$，路径为 $S \\to C$。\n  - $d^{*}(A)=5$，路径为 $S \\to A$。\n  - $d^{*}(B)=5+(-2)=3$，路径为 $S \\to A \\to B$。\n- Dijkstra算法模拟：\n  - 初始化 $d(S)=0$, $d(C)=1$, $d(A)=5$, $d(B)=\\infty$。\n  - 取出 $C$（距离为 $1$）（无松弛操作）。\n  - 取出 $A$（距离为 $5$），松弛后得到 $d(B)=3$。\n  - 取出 $B$（距离为 $3$）。最终距离与 $d^{*}$ 相符。没有失败。\n\n选项 D: 边 (S,A,2), (S,B,3), (A,C,4), (B,C,1)。\n- 所有权重都是非负的，因此可以保证Dijkstra算法的正确性。\n- 真实最短路径距离：$d^{*}(A)=2$，$d^{*}(B)=3$，$d^{*}(C)=\\min\\{2+4,\\,3+1\\}=4$。Dijkstra算法将计算出这些值。\n\n因此，只有选项A会导致Dijkstra算法在终止时得到一个不正确的最短路径距离。", "answer": "$$\\boxed{A}$$", "id": "1532814"}, {"introduction": "现实世界中的优化问题往往带有额外的约束，这使得问题变得更加复杂。本练习 [@problem_id:1532799] 模拟了一个包含负成本（例如补贴或能量回收）和路径段数限制的场景。这挑战我们放弃简单的贪心策略，采用一种类似于 Bellman-Ford 算法的动态规划思想，从而在这些复杂条件下找到最优路径。", "problem": "一家公司正在为其在城市中的无人机机队设计一个新的配送网络。该网络被建模为一个有向图，其中节点代表关键位置（枢纽、充电站、客户地址），边代表可能的飞行路径。由于多种因素的综合作用，例如利用顺风、下降时的再生制动，或享受某些路线的政府补贴，遍历一条路径的“成本”可以是正数（代表能量消耗），也可以是负数（代表能量返还或金钱收益）。\n\n无人机的飞行控制器有一个软件限制：对于从源点到目的地的任何给定配送任务，飞行计划必须最多包含 $K$ 条飞行路径（边）。\n\n考虑以下一个小型网络，它有5个标记为A、B、C、D和E的位置。可用的飞行路径及其相关成本如下：\n- A到B，成本：4\n- A到C，成本：5\n- B到D，成本：7\n- C到B，成本：-3\n- C到E，成本：8\n- D到C，成本：2\n- D到E，成本：-5\n\n您的任务是确定一架无人机从主枢纽位置A到目的地位置E，使用一条最多包含 $K=3$ 条边的路径，所可能的最低成本。如果不存在这样的路径，您的答案应该是“无穷大”（Infinity）。", "solution": "我们将配送网络建模为一个有向图，其节点为 $\\{A,B,C,D,E\\}$，边的成本如题所述。一条路径的成本是其包含的边的成本之和。任务是找到从$A$到$E$使用最多 $K=3$ 条边的最小总成本。因为边的成本可能为负，我们不能假定贪心算法（如Dijkstra算法）所依赖的最优子结构成立；因此，我们明确地枚举所有从$A$到$E$最多包含$3$条边的路径，并计算它们的成本。\n\n首先，考虑从$A$到$E$长度为$1$（一条边）的路径。没有从$A$到$E$的直接边，所以不存在长度为$1$的有效路径。\n\n接下来，考虑从$A$到$E$长度为$2$（两条边）的路径。唯一可能是$A \\to C \\to E$，因为从$A$出发的可行边是$A \\to B$和$A \\to C$，而在一步可达的节点中，只有$C$有指向$E$的出边。其成本为\n$$\n\\text{cost}(A \\to C \\to E) = 5 + 8 = 13.\n$$\n\n现在考虑从$A$到$E$长度为$3$（三条边）的路径。我们根据从$A$出发的第一步进行分类讨论：\n- 从$A \\to B$出发：从$B$出发的唯一一条边是$B \\to D$。从$D$出发，为了在第三条边内到达$E$，我们必须使用$D \\to E$。这得到了路径$A \\to B \\to D \\to E$，其成本为\n$$\n\\text{cost}(A \\to B \\to D \\to E) = 4 + 7 + (-5) = 6.\n$$\n另一条路径$D \\to C$将在三条边后到达$C$，无法在$3$条边内到达$E$。\n- 从$A \\to C$出发：从$C$出发的边是$C \\to B$和$C \\to E$。选择$C \\to E$只会得到一条已经计算过的长度为$2$的路径。选择$C \\to B$将需要后续的$B \\to E$才能在三条边内到达$E$，但不存在边$B \\to E$。从$B$出发的唯一一条边是$B \\to D$，这将需要第四条边才能到达$E$，违反了$K=3$的约束。\n\n因此，最多包含$3$条边的从$A$到$E$的有效路径只有：\n- $A \\to C \\to E$，成本为$13$，\n- $A \\to B \\to D \\to E$，成本为$6$。\n\n取所有有效路径的最小成本，\n$$\n\\min\\{13,\\,6\\} = 6.\n$$\n\n因此，从$A$到$E$使用最多$3$条边的最小可能成本是$6$。", "answer": "$$\\boxed{6}$$", "id": "1532799"}]}