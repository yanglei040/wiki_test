{"hands_on_practices": [{"introduction": "在编写任何代码之前，理解遗传算法中每个组件的基本目的是至关重要的。这项概念性练习旨在挑战你对突变和交叉算子独特作用的思辨能力，特别是它们如何防止算法陷入停滞。通过分析这些极端情况，你将巩固对如何维持遗传多样性以及为何探索（exploration）和利用（exploitation）对成功搜索都至关重要的理解 [@problem_id:3132693]。", "problem": "考虑一个遗传算法 (GA)，它操作于长度为 $n$ 的位串上，以最大化 OneMax 目标函数 $f(\\mathbf{x})=\\sum_{i=1}^{n} x_i$，其中 $x_i \\in \\{0,1\\}$。该遗传算法使用基于适应度的选择（任何概率上偏好更高 $f(\\mathbf{x})$ 值的方案）、均匀交叉（后代的每个位点以 $1/2$ 的概率独立地从两个父代之一复制）以及按位变异，变异概率为 $p_m$。初始种群由 $N$ 个个体组成，其各位是独立同分布的，对于所有位点 $i \\in \\{1,\\dots,n\\}$，满足 $\\mathbb{P}(x_i=1)=1/2$。\n\n从第一性原理分析 $p_m=0$ 和 $p_m=1/n$ 这两种边缘情况。具体来说，请从哪些算子能、哪些算子不能在某个位点上引入新的等位基因值，量化初始等位基因固定的风险，以及考察在 $p_m=1/n$ 时的期望变异行为等方面进行推理。然后选择所有正确的陈述。\n\nA. 当 $p_m=0$ 时，如果初始种群中每个位点都存在 $\\{0,1\\}$ 两种等位基因，那么原则上，交叉和选择可以组装出全1串；然而，如果任何一个位点在整个种群中初始固定为 $0$，那么全1最优解就无法达到。\n\nB. 当 $p_m=1/n$ 时，每一代中每个个体的期望位翻转次数等于 $1$，并且一个个体在一代中不发生变异的概率是 $(1-1/n)^n$，当 $n \\to \\infty$ 时，该概率趋向于 $e^{-1}$。\n\nC. 当 $p_m=0$ 时，即使某个等位基因在当前种群中完全不存在，均匀交叉仍然可以在一个位点上引入这个新的等位基因值，因此变异对于探索并非绝对必要。\n\nD. 在有 $N$ 个个体的随机初始化且 $p_m=0$ 的情况下，种群中存在至少一个位点固定为 $0$ 的概率是 $1 - \\left(1 - (1/2)^N\\right)^n$。\n\nE. 在 $p_m=0$ 的情况下，增加交叉率总能挽救停滞，因为重组可以创造出种群中不存在的等位基因。", "solution": "问题陈述已经过验证，被认为是科学上合理的、问题定义良好的和客观的。它为分析遗传算法 (GA) 在 OneMax 问题上的表现提供了一个标准的理论框架，而 OneMax 问题是演化计算领域的经典任务。该设置是自洽的，没有矛盾或歧义。现在我将开始解答。\n\n这个问题的核心是要求分析遗传算子——选择、交叉和变异——的基本作用，及其对种群遗传多样性的影响，特别是在等位基因存在和固定的背景下。\n\n**第一性原理分析**\n\n1.  **算子与等位基因的生成：**\n    *   **选择：** 该算子不创造新的个体或新的遗传物质。它使繁殖池偏向于适应度更高的个体。在 OneMax 问题中，它偏好含有更多 $1$ 的个体。\n    *   **交叉（均匀）：** 该算子通过重组两个父代个体的遗传物质来创造后代。对于每个位点，它从两个父代之一中选择等位基因（一个 $0$ 或一个 $1$）。至关重要的是，交叉*不能*创造出至少一个父代中不存在的等位基因。如果某个等位基因在给定位置上在整个种群中都不存在，那么任何交叉操作都无法引入它。\n    *   **变异（按位翻转）：** 该算子随机改变等位基因。它可以将 $0$ 变为 $1$ 或将 $1$ 变为 $0$。变异是将新的遗传物质引入种群以及逆转等位基因固定的主要机制。\n\n2.  **$p_m = 0$（无变异）情况的分析：**\n    当变异概率 $p_m$ 为 $0$ 时，等位基因的唯一来源是初始种群。如果对于给定位点 $j$，种群中的每个个体都拥有等位基因 $0$，则称该位点被“固定”在 $0$。由于选择和交叉无法在该位点上创造出 $1$，它将在所有后续世代中保持固定为 $0$。因此，如果任何位点初始固定为 $0$，需要每个位点都为 $1$ 的全1串就变得无法达到。\n\n3.  **$p_m = 1/n$（标准变异率）情况的分析：**\n    这是遗传算法理论分析中变异率的常见选择。\n    *   **期望变异次数：** 对于一个给定的个体（长度为 $n$ 的位串），$n$ 个位中的每一位都以独立的概率 $p_m = 1/n$ 发生变异。变异位的总数 $K$ 服从二项分布 $B(n, p_m)$。该分布的期望值为 $\\mathbb{E}[K] = n \\cdot p_m = n \\cdot (1/n) = 1$。因此，平均而言，每个个体每代预期会有一个位被翻转。\n    *   **无变异的概率：** 单个位*不*发生变异的概率是 $1 - p_m = 1 - 1/n$。由于 $n$ 个位的变异是相互独立的，一个个体完全不发生变异的概率是每个位不发生变异的概率的乘积，即 $(1 - 1/n)^n$。当串长 $n$ 变得很大时，该表达式收敛到一个著名的数学常数：$\\lim_{n \\to \\infty} (1 - 1/n)^n = e^{-1}$。\n\n**逐项评估**\n\n**A. 当 $p_m=0$ 时，如果初始种群中每个位点都存在 $\\{0,1\\}$ 两种等位基因，那么原则上，交叉和选择可以组装出全1串；然而，如果任何一个位点在整个种群中初始固定为 $0$，那么全1最优解就无法达到。**\n*   陈述的第一部分是正确的。如果所有必要的“构建块”（即每个位点上的等位基因 $1$）都存在于种群中的某个地方，交叉提供了将它们组合到单个个体中的机制，而选择则提供了引导搜索朝向该组合的压力。\n*   根据我们上面的分析，第二部分也是正确的。如果 $p_m=0$ 且一个位点被固定为 $0$，就没有任何算子能够在该位置引入 $1$。等位基因池是封闭的，全局最优解无法达到。\n*   **结论：** **正确**。\n\n**B. 当 $p_m=1/n$ 时，每一代中每个个体的期望位翻转次数等于 $1$，并且一个个体在一代中不发生变异的概率是 $(1-1/n)^n$，当 $n \\to \\infty$ 时，该概率趋向于 $e^{-1}$。**\n*   正如在原理分析中推导的，位翻转的次数是一个服从二项分布 $B(n, p_m=1/n)$ 的随机变量。其期望值为 $n \\cdot (1/n) = 1$。第一部分是正确的。\n*   单个位不翻转的概率是 $1 - 1/n$。对于所有 $n$ 个独立的位都发生这种情况的概率确实是 $(1-1/n)^n$。第二部分是正确的。\n*   极限 $\\lim_{n \\to \\infty} (1 - 1/n)^n$ 是 $e^{-1}$ 的标准定义。第三部分是正确的。\n*   整个陈述是三个正确事实的结合。\n*   **结论：** **正确**。\n\n**C. 当 $p_m=0$ 时，即使某个等位基因在当前种群中完全不存在，均匀交叉仍然可以在一个位点上引入这个新的等位基因值，因此变异对于探索并非绝对必要。**\n*   这个陈述对交叉的功能做出了根本性错误的断言。交叉是一种重组算子；它对来自父代的现有等位基因进行重排。它不能创造新的等位基因。如果一个等位基因（例如 $1$）在整个种群的某个位点上都不存在，那么它也就不存在于从该种群中选出的任何一对父代中，因此不能通过交叉出现在它们的后代中。变异才是负责引入这种新颖性的算子。\n*   **结论：** **不正确**。\n\n**D. 在有 $N$ 个个体的随机初始化且 $p_m=0$ 的情况下，种群中存在至少一个位点固定为 $0$ 的概率是 $1 - \\left(1 - (1/2)^N\\right)^n$。**\n*   让我们从第一性原理计算这个概率。\n*   考虑单个位点，比如位点 $j$。单个个体在该位点上为 $0$ 的概率是 $1/2$。\n*   由于包含 $N$ 个个体的初始种群是由独立同分布的位生成的，所以所有 $N$ 个个体在位点 $j$ 上都为 $0$ 的概率是 $(1/2)^N$。这就是位点 $j$ 固定为 $0$ 的概率。\n*   其互补事件是位点 $j$ *没有*固定为 $0$。这个事件的概率是 $1 - (1/2)^N$。\n*   现在，我们考虑所有 $n$ 个位点。每个位点的初始化是一个独立事件。*没有*位点固定为 $0$ 的概率是每个单独位点没有固定为 $0$ 的概率的乘积。这个概率是 $\\left(1 - (1/2)^N\\right)^n$。\n*   “至少存在一个位点固定为 $0$” 这个事件是 “没有位点固定为 $0$” 的互补事件。因此，其概率为 $1 - \\mathbb{P}(\\text{没有位点固定为 } 0) = 1 - \\left(1 - (1/2)^N\\right)^n$。\n*   这与选项中给出的表达式相符。\n*   **结论：** **正确**。\n\n**E. 在 $p_m=0$ 的情况下，增加交叉率总能挽救停滞，因为重组可以创造出种群中不存在的等位基因。**\n*   这个陈述包含两个错误。首先，正如在选项 C 的分析中所确立的，重组（交叉）不能创造出种群中不存在的等位基因。所提供的理由是错误的。\n*   其次，关于增加交叉率能挽救停滞（当 $p_m=0$ 时）的主要论断也是错误的。如果停滞是由于必要等位基因的丢失（例如，在需要 $1$ 的位点上所有个体都为 $0$），交叉是无能为力的。它只能重排现有的、次优的等位基因。\n*   **结论：** **不正确**。", "answer": "$$\\boxed{ABD}$$", "id": "3132693"}, {"introduction": "我们如何预测遗传算法找到解决方案需要多长时间？本练习通过分析一个简单而强大的GA变体在经典的OneMax问题上的表现，架起了抽象理论与具体性能之间的桥梁。你将首先推导其预期运行时间的著名理论界限，然后用经验数据验证该模型，从而深入了解计算理论如何帮助我们理解和预测算法行为 [@problem_id:3137381]。", "problem": "考虑长度为 $n$ 的二进制串上的 OneMax 目标函数，其定义为 $f(\\mathbf{x}) = \\sum_{j=1}^{n} x_{j}$，其中 $\\mathbf{x} \\in \\{0,1\\}^{n}$。一个仅有变异的遗传算法 (GA)，具体来说是 $(1+1)$ 进化算法 (EA)，其操作如下：从当前父代 $\\mathbf{x}$ 出发，通过以概率 $p_{m} = 1/n$ 独立地翻转每一位来创建一个子代 $\\mathbf{y}$；然后应用精英选择，当且仅当 $f(\\mathbf{y}) \\ge f(\\mathbf{x})$ 时，用 $\\mathbf{y}$ 替换 $\\mathbf{x}$。假设初始串是均匀随机的。使用第一性原理，如伯努利试验的独立性、几何分布的期望以及调和数 $H_{n} = \\sum_{k=1}^{n} \\frac{1}{k}$ 的定义，推导达到最优串 $\\mathbf{1}^{n}$ 所需的期望迭代次数关于 $n$ 的一个前导阶解析界。然后，使用以下针对不同 $n$ 的模拟数据（每个值是在大量独立运行中达到最优解的经验平均迭代次数）：当 $n = 50$ 时，$T = 560$；当 $n = 100$ 时，$T = 1300$；当 $n = 200$ 时，$T = 2960$；当 $n = 400$ 时，$T = 6800$；当 $n = 800$ 时，$T = 15100$。使用最小二乘法对这五个数据点拟合零截距模型 $T(n) \\approx c \\, n \\ln(n)$，并通过最小化 $\\sum_{i=1}^{5} \\left(T_{i} - c \\, n_{i} \\ln(n_{i})\\right)^{2}$ 来报告所得到的估计常数 $c$。将你最终报告的 $c$ 值四舍五入到四位有效数字。最终答案中不要包含单位。", "solution": "用户需要解决一个分为两部分的问题。第一部分，推导 $(1+1)$ 进化算法在 OneMax 问题上的期望运行时间的前导阶解析界。第二部分，将一个模型拟合到所提供的模拟数据并估计一个常数。\n\n### 第一部分：解析界的推导\n\n令系统的状态由当前个体 $\\mathbf{x}$ 的适应度定义，即 $f(\\mathbf{x}) = \\sum_{j=1}^{n} x_{j}$。我们用 $i$ 表示这个适应度。因此，状态空间为 $\\{0, 1, \\dots, n\\}$。算法的目标是达到状态 $n$。精英选择规则，即当 $f(\\mathbf{y}) \\ge f(\\mathbf{x})$ 时接受子代 $\\mathbf{y}$，确保了种群中单个个体的适应度是关于时间（迭代次数）的非减函数。\n\n达到最优解的总期望迭代次数 $E[T]$ 可以分解为找到适应度严格更高的个体的期望等待时间之和。设 $E_i$ 为在当前个体适应度为 $i$ 的情况下，找到一个适应度大于 $i$ 的个体所需的期望迭代次数。如果初始个体的适应度为 $I_0$，那么达到最优解的总时间为 $T = \\sum_{i=I_0}^{n-1} E_i$。\n\n从适应度 $i$ 等待一个严格改进的过程是一个伯努利试验序列，其中“成功”是指生成一个适应度大于 $i$ 的子代。直到第一次成功所需的期望试验次数是成功概率 $p_i^+$ 的倒数。因此，$E_i = 1/p_i^+$。\n\n为了推导一个界，我们首先找到 $p_i^+$ 的一个下界。如果我們精确地將一个 $0$ 位翻转为 $1$ 位，并且不翻转任何 $1$ 位到 $0$ 位，就可以保证适应度有严格的改进。一个适应度为 $i$ 的个体有 $n-i$ 个零和 $i$ 个一。翻转一个特定位的概率是 $p_m = 1/n$。不翻转一个位的概率是 $1-p_m = 1 - 1/n$。翻转一个特定的 $0$ 位而不翻转其他任何位的事件概率为 $p_m(1-p_m)^{n-1}$。因为有 $n-i$ 个这样的 $0$ 位，所以精确翻转其中一个而不翻转任何 $1$ 位的概率是：\n$$p_{i, \\text{succ}} = \\binom{n-i}{1} p_m (1-p_m)^{n-1} = (n-i) \\frac{1}{n} \\left(1-\\frac{1}{n}\\right)^{n-1}$$\n因为其他概率较小的变异事件（例如，翻转两个 $0$ 和一个 $1$）也可能导致改进，所以总的改进概率 $p_i^+$ 至少为 $p_{i, \\text{succ}}$。\n$$p_i^+ \\ge \\frac{n-i}{n} \\left(1-\\frac{1}{n}\\right)^{n-1}$$\n这给出了期望等待时间 $E_i$ 的一个上界：\n$$E_i = \\frac{1}{p_i^+} \\le \\frac{n}{n-i} \\frac{1}{\\left(1-\\frac{1}{n}\\right)^{n-1}}$$\n对于任意整数 $n \\ge 2$，项 $\\left(1+\\frac{1}{n-1}\\right)^{n-1}$ 是一个严格递增并趋向于极限 $e$ 的序列。我们可以写出 $\\frac{1}{(1-1/n)^{n-1}} = \\left(\\frac{n}{n-1}\\right)^{n-1} = \\left(1+\\frac{1}{n-1}\\right)^{n-1} \\le e$。\n因此，我们有界：\n$$E_i \\le \\frac{en}{n-i}$$\n总期望运行时间，即对随机初始串取期望，是 $E[T] = E\\left[\\sum_{i=I_0}^{n-1} E_i\\right]$。根据期望的线性性质，$E[T] = \\sum_{i=0}^{n-1} P(I_0 \\le i) E[E_i|I_0 \\le i]$。鉴于此表达式的复杂性，获得前导阶界的一个标准简化方法是从期望初始适应度开始求和。初始串是均匀随机选择的，所以 $1$ 的数量 $I_0$ 服从二项分布 $B(n, 1/2)$，其期望为 $E[I_0] = n/2$。对于大的 $n$，$I_0$ 高度集中在该均值附近。因此，我们通过从 $i=n/2$ 开始求和来近似期望运行时间：\n$$E[T] \\approx \\sum_{i=n/2}^{n-1} E_i \\le \\sum_{i=n/2}^{n-1} \\frac{en}{n-i}$$\n令 $k=n-i$。当 $i$ 从 $n/2$ 取值到 $n-1$ 时，$k$ 从 $n/2$ 取值到 $1$。\n$$E[T] \\lesssim en \\sum_{k=1}^{n/2} \\frac{1}{k} = en H_{n/2}$$\n其中 $H_m$ 是第 $m$ 个调和数。使用渐近近似 $H_m \\approx \\ln(m) + \\gamma$，其中 $\\gamma$ 是欧拉-马斯刻若尼常数，我们得到：\n$$E[T] \\lesssim en (\\ln(n/2) + \\gamma) = en(\\ln n - \\ln 2 + \\gamma) = en \\ln n - en\\ln 2 + en\\gamma$$\n这个解析上界的前导项是 $en \\ln n$。这为将期望运行时间建模为 $T(n) \\approx c \\, n \\ln(n)$ 提供了理论基础，其中理论上预测常数 $c$ 接近于 $e \\approx 2.71828$。\n\n### 第二部分：经验拟合\n\n我们的任务是使用零截距的最小二乘法将模型 $T(n) \\approx c \\, n \\ln(n)$ 拟合到所提供的数据。我们必须找到使残差平方和最小的 $c$ 值：\n$$S(c) = \\sum_{i=1}^{5} \\left(T_{i} - c \\, n_{i} \\ln(n_{i})\\right)^{2}$$\n为了找到最小值，我们计算 $S(c)$ 关于 $c$ 的导数并将其设为零：\n$$\\frac{dS}{dc} = \\sum_{i=1}^{5} 2\\left(T_{i} - c \\, n_{i} \\ln(n_{i})\\right) \\left(-n_{i} \\ln(n_{i})\\right) = 0$$\n$$\\sum_{i=1}^{5} T_{i} (n_{i} \\ln n_{i}) - c \\sum_{i=1}^{5} (n_{i} \\ln n_{i})^{2} = 0$$\n解出 $c$ 得：\n$$c = \\frac{\\sum_{i=1}^{5} T_{i} (n_{i} \\ln n_{i})}{\\sum_{i=1}^{5} (n_{i} \\ln n_{i})^{2}}$$\n给定的数据点 $(n_i, T_i)$ 是：$(50, 560)$、$(100, 1300)$、$(200, 2960)$、$(400, 6800)$ 和 $(800, 15100)$。\n我们定义 $x_i = n_i \\ln n_i$。我们计算这些值：\n$x_1 = 50 \\ln 50 \\approx 195.601150$\n$x_2 = 100 \\ln 100 \\approx 460.517019$\n$x_3 = 200 \\ln 200 \\approx 1059.663426$\n$x_4 = 400 \\ln 400 \\approx 2396.585721$\n$x_5 = 800 \\ln 800 \\approx 5347.689139$\n\n现在我们计算分子 $\\sum_{i=1}^{5} T_i x_i$：\n$T_1 x_1 = 560 \\times 195.601150 \\approx 109536.64$\n$T_2 x_2 = 1300 \\times 460.517019 \\approx 598672.12$\n$T_3 x_3 = 2960 \\times 1059.663426 \\approx 3136603.62$\n$T_4 x_4 = 6800 \\times 2396.585721 \\approx 16296782.90$\n$T_5 x_5 = 15100 \\times 5347.689139 \\approx 80750105.99$\n总和是 $\\sum T_i x_i \\approx 100891701.27$。\n\n接下来，我们计算分母 $\\sum_{i=1}^{5} x_i^2$：\n$x_1^2 \\approx (195.601150)^2 \\approx 38259.80$\n$x_2^2 \\approx (460.517019)^2 \\approx 212075.92$\n$x_3^2 \\approx (1059.663426)^2 \\approx 1122886.52$\n$x_4^2 \\approx (2396.585721)^2 \\approx 5743623.23$\n$x_5^2 \\approx (5347.689139)^2 \\approx 28597778.50$\n总和是 $\\sum x_i^2 \\approx 35714623.97$。\n\n最后，我们计算 $c$：\n$$c = \\frac{100891701.27}{35714623.97} \\approx 2.8249152$$\n将结果四舍五入到四位有效数字，得到 $c \\approx 2.825$。这个经验值与理论推导出的常数 $e \\approx 2.718$ 相当接近。", "answer": "$$\\boxed{2.825}$$", "id": "3137381"}]}