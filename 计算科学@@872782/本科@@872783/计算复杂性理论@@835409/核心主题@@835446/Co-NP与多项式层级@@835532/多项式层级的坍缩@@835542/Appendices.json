{"hands_on_practices": [{"introduction": "在计算复杂性理论中，$NP = \\text{coNP}$ 是一个核心的未解问题，其地位仅次于 $P = NP$。这个练习将引导我们探索一个思想实验：如果 $NP$ 和 $\\text{coNP}$ 这两个类被证明是相等的，将会对整个多项式时间层级结构产生怎样的影响。通过这个实践，你将亲手推导出一个基础性的坍缩定理，理解第一级层级的坍缩是如何向上传播并最终定义整个层级结构的边界的。", "problem": "在计算复杂性理论中，多项式时间层级（Polynomial Hierarchy, PH）提供了一种根据表达问题所需的逻辑量词的复杂性对问题进行分类的方法。该层级是分层构建的。基础是 $\\Sigma_0^p = \\Pi_0^p = P$，即可在多项式时间内解决的问题类。对于 $k \\ge 0$，更高层级被递归定义如下：\n- $\\Sigma_{k+1}^p$ 是这样一类语言：它可以被一台非确定性多项式时间图灵机判定，该图灵机可以访问一个能解决 $\\Sigma_k^p$ 中任意问题的预言机。这个类通常表示为 $NP^{\\Sigma_k^p}$。\n- $\\Pi_{k+1}^p$ 是其补集在 $\\Sigma_{k+1}^p$ 中的语言类。这等价于 $\\text{coNP}^{\\Sigma_k^p}$。\n\n第一层，$\\Sigma_1^p$，是带有“存在”量词的问题类，即非确定性多项式时间（NP）。其补集类 $\\Pi_1^p$ 是 $\\text{coNP}$。整个多项式时间层级是所有这些层级的并集：$PH = \\bigcup_{k \\ge 0} \\Sigma_k^p$。\n\n现在，假设一位研究人员做出了一项里程碑式的假设性发现：他们证明了对于 NP 中的任何语言 $L$，其补集 $\\bar{L}$ 也在 NP 中。这将意味着 NP 和 coNP 这两个类是相同的。如果这个假设（$NP = \\text{coNP}$）成立，那么多项式时间层级的结构将被极大地简化。\n\n在这个假设下，PH 将被证明等于以下哪个著名的复杂性类？\n\nA. P\n\nB. NP\n\nC. PSPACE\n\nD. EXPTIME\n\nE. 多项式时间层级不会坍缩，并且仍然是一个由不同类组成的无限层级。", "solution": "我们从多项式时间层级的标准量词刻画开始。如果存在一个多项式时间可判定的谓词 $R$ 和一个多项式 $p$，使得对于一个语言 $L$ 属于 $\\Sigma_k^p$，有\n$$\nx \\in L \\iff \\exists y_{1}, |y_{1}| \\le p(|x|)\\ \\forall y_{2}, |y_{2}| \\le p(|x|)\\ \\exists y_{3}, |y_{3}| \\le p(|x|)\\ \\cdots\\ Q_{k} y_{k}, |y_{k}| \\le p(|x|)\\ R(x,y_{1},\\ldots,y_{k}) = 1,\n$$\n其中量词交替出现，如果 $k$ 是奇数，$Q_k$ 为 $\\exists$；如果 $k$ 是偶数，$Q_k$ 为 $\\forall$。类似地，$\\Pi_k^p$ 以一个全称量词开始并交替。\n\n假设 $NP = \\text{coNP}$。那么 $\\Sigma_1^p = \\Pi_1^p$。\n\n首先，我们证明 $\\Sigma_2^p \\subseteq NP$。令 $L \\in \\Sigma_2^p$。那么存在多项式 $p$ 和多项式时间谓词 $R$ 使得\n$$\nx \\in L \\iff \\exists y,\\ |y| \\le p(|x|)\\ \\forall z,\\ |z| \\le p(|x|)\\ R(x,y,z) = 1.\n$$\n定义谓词\n$$\nA(x,y) \\iff \\forall z,\\ |z| \\le p(|x|)\\ R(x,y,z) = 1.\n$$\n它的补是\n$$\n\\neg A(x,y) \\iff \\exists z,\\ |z| \\le p(|x|)\\ \\big(R(x,y,z) = 0\\big),\n$$\n这是一个 $NP$ 属性，因为它断言存在一个短的见证 $z$，可以在多项式时间内验证。因此 $A(x,y) \\in \\text{coNP}$。根据假设 $NP = \\text{coNP}$，我们有 $A(x,y) \\in NP$。因此，\n$$\nx \\in L \\iff \\exists y,\\ |y| \\le p(|x|)\\ A(x,y).\n$$\n因为 $A \\in NP$，存在一个多项式时间谓词 $P$ 和一个多项式 $q$ 使得\n$$\nA(x,y) \\iff \\exists w,\\ |w| \\le q(|x|+|y|)\\ P(x,y,w) = 1.\n$$\n于是\n$$\nx \\in L \\iff \\exists y,\\ |y| \\le p(|x|)\\ \\exists w,\\ |w| \\le q(|x|+|y|)\\ P(x,y,w) = 1.\n$$\n将 $(y,w)$ 合并成一个多项式长度的单一见证 $u$，并注意到 $P$ 是多项式时间可判定的，可得\n$$\nx \\in L \\iff \\exists u,\\ |u| \\le r(|x|)\\ P'(x,u) = 1\n$$\n对于某个多项式 $r$ 和多项式时间谓词 $P'$。因此 $L \\in NP$。因为 $NP = \\Sigma_1^p \\subseteq \\Sigma_2^p$，我们得出结论 $\\Sigma_2^p = NP$。\n\n现在我们通过归纳法推广到所有层级。假设对于某个 $k \\ge 1$ 有 $\\Sigma_k^p = NP$。那么根据假设，$\\Pi_k^p = \\text{co}\\Sigma_k^p = \\text{coNP} = NP$。考虑 $L \\in \\Sigma_{k+1}^p$。根据量词刻画，\n$$\nx \\in L \\iff \\exists y,\\ |y| \\le p(|x|)\\ B(x,y),\n$$\n其中 $B(\\cdot,\\cdot) \\in \\Pi_k^p$。在归纳假设下，由于 $\\Pi_k^p = NP$ 且 $NP = \\text{coNP}$，我们有 $B \\in NP$。如上所述，通过捆绑见证，对一个 $NP$ 谓词应用存在量词会坍缩到 $NP$，因此 $L \\in NP$。因此 $\\Sigma_{k+1}^p \\subseteq NP$，又因为 $NP \\subseteq \\Sigma_{k+1}^p$，我们得到 $\\Sigma_{k+1}^p = NP$。\n\n通过归纳法，对于所有 $k \\ge 1$，$\\Sigma_k^p = \\Pi_k^p = NP$。因此，\n$$\nPH = \\bigcup_{k \\ge 0} \\Sigma_k^p = NP.\n$$\n所以，在假设 $NP = \\text{coNP}$ 的情况下，多项式时间层级坍缩到 $NP$，这对应于选项 B。", "answer": "$$\\boxed{B}$$", "id": "1416429"}, {"introduction": "多项式时间层级是通过预言机（oracle machine）的概念来逐级定义的。这个练习将我们带入一个关于预言机计算能力的假想场景：如果一个 $NP$ 完备问题的预言机（例如 3SAT）并不能给非确定性图灵机带来额外的计算能力，会发生什么？这个练习能够帮助你具体地理解 $\\Sigma_2^p = NP^{NP}$ 这一关键定义，并揭示 $\\Sigma_2^p = NP$ 这个条件是如何导致整个层级坍缩到 $NP$ 的。", "problem": "在计算复杂性理论中，多项式层级 (Polynomial Hierarchy, PH) 是一个复杂性类的层级结构，它推广了 $P$、$NP$ 和 $\\text{coNP}$ 等类。该层级的各层由 $\\Sigma_k^p$、$\\Pi_k^p$ 和 $\\Delta_k^p$ 表示，其中整数 $k \\ge 0$。该层级始于 $\\Sigma_0^p = \\Pi_0^p = P$。对于 $k \\ge 1$，类 $\\Sigma_k^p$ 被定义为可以由一台非确定性多项式时间图灵机判定的语言集合，该图灵机可以访问一个 $\\Sigma_{k-1}^p$ 中的问题预言机。我们可以将其形式化地写作 $\\Sigma_k^p = NP^{\\Sigma_{k-1}^p}$。$P$ 之上的第一层包含了重要的类 $NP = \\Sigma_1^p$ 和 $\\text{coNP} = \\Pi_1^p$。\n\n3-可满足性问题 (3-Satisfiability problem, 3SAT) 是一个已知的 $NP$-完全的经典问题。这意味着 $NP$ 类中的任何问题都可以在多项式时间内归约到 3SAT，并且 3SAT 本身也在 $NP$ 中。\n\n假设理论计算机科学中的一个假想突破证明了，为一台非确定性多项式时间图灵机提供一个 3SAT 预言机并不会赋予它超出其已有能力的任何额外计算能力。换句话说，假设被证明了 $NP^{3SAT} = NP$。\n\n这个结果将意味着多项式层级并非由无限多个不同的层级构成，而是“坍缩”到一个有限的层级。基于前提 $NP^{3SAT} = NP$，整个多项式层级会等于下列哪个复杂性类？\n\nA. $P$\n\nB. $\\Sigma_2^p \\cap \\Pi_2^p$\n\nC. $NP \\cap \\text{coNP}$\n\nD. $NP$\n\nE. $\\Sigma_2^p$", "solution": "我们使用多项式层级和预言机的标准定义：\n1) 对于所有整数 $k \\ge 1$，根据定义，\n$$\n\\Sigma_k^p = NP^{\\Sigma_{k-1}^p}.\n$$\n特别地，$\\Sigma_1^p = NP$ 且 $\\Sigma_2^p = NP^{\\Sigma_1^p} = NP^{NP}$。\n\n2) 由于 3SAT 在多项式时间多一归约下是 $NP$-完全的，并且 $3SAT \\in NP$，一台带有 3SAT 预言机的 $NP$ 机可以模拟一个 $NP$ 预言机，反之亦然。形式上：\n- 因为 $3SAT \\in NP$，我们有包含关系\n$$\nNP^{3SAT} \\subseteq NP^{NP} = \\Sigma_2^p.\n$$\n- 因为 3SAT 是 $NP$-完全的，所以对 $NP$ 中任何语言的每次查询都可以在多项式时间内归约到对 3SAT 的单次查询。因此，\n$$\nNP^{NP} \\subseteq NP^{3SAT}.\n$$\n综合这些，我们得到\n$$\nNP^{3SAT} = NP^{NP} = \\Sigma_2^p.\n$$\n\n3) 假设陈述了 $NP^{3SAT} = NP$。使用步骤2中的等式，这得出\n$$\n\\Sigma_2^p = NP.\n$$\n\n4) 层级的坍缩：\n如果对于某个 $k \\ge 1$ 我们有 $\\Sigma_k^p = \\Sigma_{k-1}^p$，那么对于所有的 $t \\ge 0$，\n$$\n\\Sigma_{k+t}^p = NP^{\\Sigma_{k+t-1}^p} = NP^{\\Sigma_{k-1}^p} = \\Sigma_k^p = \\Sigma_{k-1}^p.\n$$\n因此所有更高的 $\\Sigma$ 层级都坍缩到 $\\Sigma_{k-1}^p$。因为 $PH = \\bigcup_{j \\ge 0} \\Sigma_j^p$，可推出\n$$\nPH = \\Sigma_{k-1}^p.\n$$\n将 $k=2$ 和步骤3中的 $\\Sigma_2^p = NP$ 应用于此，我们得出结论\n$$\nPH = NP.\n$$\n\n因此，在前提 $NP^{3SAT} = NP$下，整个多项式层级等于 $NP$，这对应于选项 D。", "answer": "$$\\boxed{D}$$", "id": "1416452"}, {"introduction": "我们已经探讨了较低层级坍缩的情形，现在让我们考虑一个更具戏剧性的场景。如果一个位于多项式时间层级第二层（$\\Pi_2^p$）的完备问题，被发现竟然可以在多项式时间内解决，这会带来什么后果？这个练习将展示这种发现会产生的强大的多米诺骨牌效应，它不仅会导致层级坍缩，而且会将整个复杂的层级结构彻底地拉回到最基础的 $P$ 类。[@problem_id:1416454]", "problem": "在计算复杂性理论中，多项式时间层级 (PH) 是一个复杂性类的层级结构，它推广了 $P$、$NP$ 和 $\\text{coNP}$ 这些复杂性类。该层级的各个层次由 $\\Sigma_k^p$ 和 $\\Pi_k^p$ 表示，其中 $k \\ge 0$。\n\n如果一个语言可以由一台能够在多项式时间内运行、并且可以访问一个 $\\Sigma_{k-1}^p$ 中问题的预言机的图灵机来判定，那么该语言就属于 $\\Sigma_k^p$。对于 $k \\ge 1$ 的情况，一个等价的定义将这些复杂性类与量化布尔公式 (QBF) 联系起来。如果一个实例 $w$ 的成员资格可以由一个包含 $k$ 个交替量词、并以存在量词开头的公式来表示，那么该语言就属于 $\\Sigma_k^p$：$\\exists \\vec{x_1} \\forall \\vec{x_2} \\dots Q \\vec{x_k} \\phi(w, \\vec{x_1}, \\dots, \\vec{x_k})$，其中 $\\phi$ 是一个多项式时间可计算的谓词。\n\n类似地，如果一个语言的成员资格可以由一个包含 $k$ 个交替量词、并以全称量词开头的公式来表示，那么该语言就属于 $\\Pi_k^p$：$\\forall \\vec{x_1} \\exists \\vec{x_2} \\dots Q \\vec{x_k} \\phi(w, \\vec{x_1}, \\dots, \\vec{x_k})$。注意 $\\Pi_k^p = \\text{co}\\Sigma_k^p$。由所有具有 $\\forall\\exists$ 量词结构的真量化布尔公式组成的语言是一个著名的 $\\Pi_2^p$-完全问题。\n\n假设一位计算机科学家取得了突破，发现了一种能在多项式时间内运行的算法，该算法能正确判断任何形式为 $\\forall \\vec{x} \\exists \\vec{y} \\, \\psi(\\vec{x}, \\vec{y})$ 的量化布尔公式是否为真，其中 $\\psi$ 是一个布尔公式。\n\n根据计算复杂性理论的原理，这一发现最重大、最强的推论是什么？\n\nA. $P = NP$\n\nB. $NP = \\text{coNP}$\n\nC. 多项式时间层级坍缩到 $\\Sigma_2^p$。\n\nD. 多项式时间层级完全坍缩到 P。\n\nE. 这样的算法是不可能创建的，因为已经从数学上证明了 $P \\neq \\Pi_2^p$。", "solution": "我们已知存在一个多项式时间算法，用于解决所有形式为 $\\forall \\vec{x} \\exists \\vec{y}\\,\\psi(\\vec{x},\\vec{y})$ 的真量化布尔公式所构成的语言。在多项式时间多一对一归约下，这个语言是 $\\Pi_2^p$-完全的。\n\n根据完备性的定义，对于 $\\Pi_2^p$ 中的任意语言 $L$，存在一个多项式时间可计算的函数 $f$，使得对于所有输入 $w$，\n$$\nw \\in L \\iff f(w) \\in \\text{QBF}_{\\forall\\exists}.\n$$\n由于根据假设的算法，$\\text{QBF}_{\\forall\\exists} \\in P$，因此可以推断出 $L \\in P$。因此\n$$\n\\Pi_2^p \\subseteq P.\n$$\n因为 $P \\subseteq \\Pi_2^p$ (实际上对于所有 $k$，都有 $P \\subseteq \\Sigma_k^p \\cap \\Pi_k^p$)，我们得到\n$$\n\\Pi_2^p = P.\n$$\n由于 $\\Sigma_2^p = \\text{co}\\Pi_2^p$ 并且 $P$ 对补运算是闭合的，我们同样可以得到\n$$\n\\Sigma_2^p = P.\n$$\n\n现在我们将这个坍缩沿着层级向上传播。使用预言机的定义，\n$$\n\\Sigma_{k+1}^p = NP^{\\Sigma_k^p}, \\quad \\Pi_{k+1}^p = \\text{co}\\Sigma_{k+1}^p.\n$$\n由于 $\\Sigma_2^p = P$，我们得到\n$$\n\\Sigma_3^p = NP^P = NP.\n$$\n但 $NP \\subseteq \\Sigma_2^p = P$ 意味着 $NP = P$，因此\n$$\n\\Sigma_3^p = P, \\quad \\Pi_3^p = P.\n$$\n通过归纳法，对于所有 $k \\ge 3$，\n$$\n\\Sigma_k^p = NP^{\\Sigma_{k-1}^p} = NP^P = NP = P, \\quad \\Pi_k^p = P.\n$$\n因此，整个多项式时间层级坍缩为\n$$\nPH = \\bigcup_{k \\ge 0} \\Sigma_k^p = P.\n$$\n\n因此，最重大、最强的推论是多项式时间层级完全坍缩到 P。这个结论严格蕴含了 $P = NP$ 和 $NP = \\text{coNP}$，并且比仅仅坍缩到 $\\Sigma_2^p$ 更强。选项 E 是不正确的，因为目前还没有证明这样的分离性。", "answer": "$$\\boxed{D}$$", "id": "1416454"}]}