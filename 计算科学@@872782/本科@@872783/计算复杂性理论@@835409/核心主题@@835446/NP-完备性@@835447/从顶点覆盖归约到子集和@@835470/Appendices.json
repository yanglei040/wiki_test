{"hands_on_practices": [{"introduction": "这个练习将带你深入理解归约过程中的一个基本机制：如何确保最终的和能够“覆盖”到图中的每一条边。我们将通过一个具体的例子[@problem_id:1443805]，探讨当一个顶点覆盖中的某个顶点只覆盖了某条边时，我们如何利用“松弛变量”来补足和，从而满足目标和中对应数位上的要求。这有助于你清晰地理解在构造的数中，低位的数字是如何发挥其关键作用的。", "problem": "在计算复杂性理论的研究中，顶点覆盖（VERTEX-COVER）问题通常被归约到子集和（SUBSET-SUM）问题，以证明后者的NP完全性。本问题探讨了这种标准归约中的一个具体步骤。\n\n考虑一个图 $G = (V, E)$ 和一个整数 $k$。我们如下构造一个子集和问题的实例：\n设顶点集为 $V = \\{v_1, v_2, v_3, v_4\\}$，边集为 $E = \\{e_1, e_2, e_3\\}$，其中 $e_1 = (v_1, v_2)$，$e_2 = (v_2, v_3)$，$e_3 = (v_3, v_4)$。边的数量为 $m=3$。这些数字是使用一个有 $m+1=4$ 个位或“数字”的4进制表示法构造的。最高有效位（在位置 $m=3$）对应于顶点计数，而位置 $j=0, 1, \\dots, m-1$ 上的数字对应于边 $e_{j+1}$。\n\n对于每个顶点 $v_i \\in V$，创建一个数字 $w_i$。其4进制表示在最高有效位（位置3）上为'1'。对于每条与 $v_i$ 相关联的边 $e_j$，数字 $w_i$ 在位置 $j-1$ 上也为'1'。所有其他位均为'0'。\n\n对于每条边 $e_j \\in E$，创建一个“松弛”数 $s_j$。其4进制表示在位置 $j-1$ 上为'1'，在其他位置均为'0'。\n\n用于子集和实例的完整数字集合是所有 $w_i$ 和 $s_j$ 的并集。目标和 $T$ 的构造方式是，其4进制表示在最高有效位（位置3）上为整数 $k$，在所有其他位置（位置0, 1, 2）上为'2'。\n\n现在，考虑上述定义的图 $G$ 的一个特定顶点覆盖实例，其目标大小为 $k=2$。已知 $C = \\{v_2, v_3\\}$ 是该图的一个大小为2的有效顶点覆盖。为了使子集和实例有解，所生成的数字的一个特定子集的和必须等于目标 $T$。该子集将对应于顶点覆盖 $C$。\n\n关注边 $e_1 = (v_1, v_2)$，以下哪个特定于边的松弛数必须是这个和为 $T$ 的子集的一部分？\n\nA. 1\nB. 4\nC. 16\nD. 64\nE. 边 $e_1$ 的松弛数不是必需的。", "solution": "我们在4进制下进行计算，位置索引如下：位置 $j=0,1,2$ 分别对应边 $e_{1},e_{2},e_{3}$，而位置 $3$（最高有效位）用于计算所选顶点的数量。位值分别为 $4^{0},4^{1},4^{2},4^{3}$。\n\n对于每个顶点 $v_{i}$，数字 $w_{i}$ 在位置3上的数字为1，并且对于每条邻接边 $e_{j}$，它在位置 $j-1$ 上的数字为1。对于每条边 $e_{j}$，松弛数 $s_{j}$ 仅在位置 $j-1$ 上的数字为1。目标 $T$ 在位置0,1,2上的4进制数字等于2，在位置3上等于 $k=2$。\n\n对于 $C=\\{v_{2},v_{3}\\}$，子集必须包含 $w_{2}$ 和 $w_{3}$。它们按位置的贡献如下：\n- 位置 $3$ (顶点计数): $1+1=2$，与 $T$ 的该位匹配。\n- 位置 $0$ (边 $e_{1}$): $w_{2}$ 贡献1（因为 $v_{2}$ 与 $e_{1}$ 邻接），$w_{3}$ 贡献0（不邻接），所以和为1。由于 $T$ 在此位的数字是2，我们必须加上松弛数 $s_{1}$，它在位置0上额外贡献1。\n- 位置 $1$ 和 $2$ 对于边 $e_{2}$ 和 $e_{3}$ 的情况类似；这证实了该机制的有效性，但问题是具体关于 $e_{1}$ 的。\n\n因此，对于边 $e_{1}$，所需的松弛数是 $s_{1}$，其值为 $4^{0}=1$。在选项中，这对应于A。", "answer": "$$\\boxed{A}$$", "id": "1443805"}, {"introduction": "一个可靠的归约必须严格地对应原问题的所有约束条件。这个思想实验[@problem_id:1443832]将挑战你分析：如果我们从构造中移除一个关键部分——用于追踪所选顶点数量的最高有效位——会发生什么。通过探究这个有缺陷的归约，你将更深刻地体会到为什么这个数位对于强制执行顶点覆盖的大小约束（即 $|V'| \\le k$）至关重要。", "problem": "在计算复杂性理论中，从顶点覆盖问题（VERTEX-COVER）到子集和问题（SUBSET-SUM）的归约是将图问题映射到数值问题的经典范例。\n\n我们来回顾一下这个标准构造方法。给定一个无向图 $G=(V, E)$，其中顶点集为 $V=\\{v_1, v_2, \\dots, v_n\\}$，边集为 $E=\\{e_1, e_2, \\dots, e_m\\}$，以及一个整数 $k$。顶点覆盖问题询问是否存在一个顶点子集 $V' \\subseteq V$，使得 $|V'| \\leq k$，并且对于每条边 $(u,v) \\in E$，$u$ 和 $v$ 中至少有一个顶点在 $V'$ 中。\n\n该归约从顶点覆盖问题的一个实例 $(G, k)$ 构造出子集和问题的一个实例。它会创建一组整数 $S$ 和一个目标整数 $T$。$S$ 中存在一个子集，其和等于 $T$，当且仅当在图 $G$ 中存在一个大小为 $k$ 的顶点覆盖。这些整数是使用一个具有 $m+1$ 位的4进制表示法构造的。\n\n构造方法如下：\n1.  对于每个顶点 $v_i \\in V$，创建一个整数 $x_i$。在4进制下，这个数的最高有效位（第 $(m+1)$ 位）为 '1'，并且对于每条与 $v_i$ 相关联的边 $e_j \\in E$，其第 $j$ 位为 '1'。所有其他位都为 '0'。\n    -   符号化表示：$x_i = 4^m + \\sum_{e_j \\text{ incident to } v_i} 4^{j-1}$。\n2.  对于每条边 $e_j \\in E$，创建一个整数 $y_j$。在4进制下，这个数的第 $j$ 位为 '1'，其他所有位都为 '0'。\n    -   符号化表示：$y_j = 4^{j-1}$。\n3.  用于子集和问题实例的整数集合为 $S = \\{x_1, \\dots, x_n\\} \\cup \\{y_1, \\dots, y_m\\}$。\n4.  构造目标和 $T$。在4进制下，它的最高有效位为数字 $k$，其他所有 $m$ 位均为 '2'。\n    -   符号化表示：$T = k \\cdot 4^m + \\sum_{j=1}^m 2 \\cdot 4^{j-1}$。\n\n现在，考虑该归约的一个有缺陷的版本，其中最高有效位从所有构造的数中被完全移除。新的数和目标和在4进制下仅用 $m$ 位（每条边对应一位）来定义。\n-   新的顶点数：$x'_i = \\sum_{e_j \\text{ incident to } v_i} 4^{j-1}$。\n-   新的边数：$y'_j = 4^{j-1}$。（这些与原始的 $y_j$ 相同）。\n-   新的目标和：$T' = \\sum_{j=1}^m 2 \\cdot 4^{j-1}$。\n\n通过找到 $\\{x'_1, \\dots, x'_n\\} \\cup \\{y'_1, \\dots, y'_m\\}$ 中和为 $T'$ 的子集，原始顶点覆盖问题 $(G, k)$ 的下列哪个属性不再被正确地强制执行？\n\nA. 所选顶点集必须构成一个顶点覆盖的约束（即每条边都被覆盖）。\nB. 顶点覆盖的大小必须等于 $k$ 的约束。\nC. 图 $G$ 必须是连通图才能使归约有效的约束。\nD. 该归约完全失败，因为对于任何图，都不可能找到任何和为目标 $T'$ 的子集。\nE. 所选顶点必须构成一个独立集的约束。", "solution": "我们分析这个有缺陷的归约的4进制数字结构。每个数都恰好有 $m$ 个4进制位，每条边 $e_{j}$ 对应一位，没有最高有效位（第 $(m+1)$ 位）。对于每条边 $e_{j}=\\{u,v\\}$：\n- $x'_{i}$ 的第 $j$ 位等于 $1$ 当且仅当 $v_{i}$ 是 $e_{j}$ 的一个端点，否则等于 $0$。\n- $y'_{j}$ 的第 $j$ 位等于 $1$，且 $y'_{j}$ 的所有其他位都等于 $0$。\n- 目标 $T'$ 的第 $j$ 位等于 $2$。\n\n设 $U \\subseteq \\{1,\\dots,n\\}$ 是所选顶点数 $\\{x'_{i}\\}$ 的索引集， $J \\subseteq \\{1,\\dots,m\\}$ 是所选边数 $\\{y'_{j}\\}$ 的索引集。因为4进制各位数字相加，总和最大为 $3$ 时不会产生进位，所以每个位的约束都是独立的，并且必须精确地等于目标位上的数字 $2$，无进位。\n\n固定一条边 $e_{j}=\\{a,b\\}$。和的第 $j$ 位等于\n$$\n\\mathbf{1}[a \\in U]+\\mathbf{1}[b \\in U]+\\mathbf{1}[j \\in J]=2,\n$$\n其中 $\\mathbf{1}[\\cdot]$ 表示指示函数。由于每一项都在 $\\{0,1\\}$ 中，唯一的解是：\n- $\\mathbf{1}[a \\in U]=1$ 且 $\\mathbf{1}[b \\in U]=1$，同时 $\\mathbf{1}[j \\in J]=0$，或者\n- $a,b$ 中恰好有一个在 $U$ 中，同时 $\\mathbf{1}[j \\in J]=1$。\n\n在任何一种情况下，$e_{j}$ 的至少一个端点在 $U$ 中。因此，任何和为 $T'$ 的子集必然会选择一个覆盖了每条边的顶点集 $U$。因此，顶点覆盖的属性仍然被强制执行，所以选项 A 在这个有缺陷的归约中仍然是正确的。\n\n现在考虑大小约束。在正确的归约中，最高有效位强制了 $\\sum_{i \\in U}1=k$，因为每个 $x_{i}$ 对该位贡献 $1$，每个 $y_{j}$ 贡献 $0$，而目标值在该位上是 $k$。在这个有缺陷的归约中，这一位被完全移除了。目标 $T'$ 不再包含 $k$，并且子集和的约束只涉及每条边对应的位。因此，所选顶点的数量不受和为 $T'$ 这一条件的限制。例如，选择所有顶点（即 $U=\\{1,\\dots,n\\}$）并且不选择任何边（即 $J=\\varnothing$），对于每条边，其对应位的和都为 $2$，因此无论 $k$ 是多少，总能满足目标和 $T'$。因此，顶点覆盖的大小等于 $k$ 的约束没有被强制执行。\n\n选项 C 是无关的，因为该归约原本就不要求图 $G$ 是连通的。选项 D 是错误的，因为对于任意图，都存在可行的子集（例如，选择所有顶点）其和为 $T'$。选项 E 是不相关的，并且无论是原始构造还是有缺陷的构造都没有强制执行该选项。\n\n因此，缺失的最高有效位导致了与 $k$ 相关的大小约束的丢失，即选项 B。", "answer": "$$\\boxed{B}$$", "id": "1443832"}, {"introduction": "这个最终练习将此概念又推进了一步，它将我们学习的归约嵌入到另一个经典的变换中：从子集和问题（SUBSET-SUM）到划分问题（PARTITION）的归约。你需要对一个给定的图，完整地追踪这整个两阶段的转换过程[@problem_id:1443831]。这个练习旨在检验你综合核心逻辑并将其应用于更复杂、多层次问题的能力，这是计算复杂性理论中一项重要的技能。", "problem": "一个计算生物学研究小组使用无向图 $G=(V,E)$ 来模拟蛋白质-蛋白质相互作用。为了分析图的结构，他们采用一种复杂的变换，将图映射为一组数值权重。该变换包含两个主要阶段。\n\n**阶段1：从图到主权重**\n\n给定一个有 $n=|V|$ 个顶点和 $m=|E|$ 条边的图 $G$ 以及一个整数参数 $k$，构建一组“主权重” $S_{\\text{primary}}$ 和一个目标和 $T$。顶点按 $v_1, \\dots, v_n$ 标记，边按 $e_1, \\dots, e_m$ 标记，顺序固定。\n1.  设定一个基整数 $B$ 为 $n+1$。\n2.  对每个顶点 $v_i \\in V$，定义一个“顶点权重” $a_i$ 为 $a_i = B^m + \\sum_{j=1}^{m} \\delta(i, j) B^{j-1}$，其中如果顶点 $v_i$ 是边 $e_j$ 的一个端点，则 $\\delta(i, j)=1$，否则为 $0$。\n3.  对每条边 $e_j \\in E$，定义一个“边权重” $b_j$ 为 $b_j = B^{j-1}$。\n4.  主权重集合为 $S_{\\text{primary}} = \\{a_1, \\dots, a_n\\} \\cup \\{b_1, \\dots, b_m\\}$。\n5.  定义目标和 $T$ 为 $T = k \\cdot B^m + 2 \\sum_{j=1}^{m} B^{j-1}$。\n\n**阶段2：从主权重到最终权重**\n\n接着，使用集合 $S_{\\text{primary}}$ 和目标和 $T$ 来生成最终的“分子权重”集合 $S_{\\text{final}}$。\n6.  首先，计算所有主权重的总和：$\\Sigma = \\sum_{w \\in S_{\\text{primary}}} w$。\n7.  计算一个特殊权重 $X$ 为 $X = \\Sigma - 2T$。\n8.  最终集合为 $S_{\\text{final}} = S_{\\text{primary}} \\cup \\{X\\}$。\n理论上已经证明，对于该团队感兴趣的特定图和参数，集合 $S_{\\text{final}}$ 总能被划分成两个和相等的子集。\n\n**你的任务**\n\n考虑路径图 $P_5$，它有5个顶点和4条边。设顶点沿路径顺序标记为 $v_1, \\dots, v_5$，因此边为 $e_1=(v_1,v_2)$、$e_2=(v_2,v_3)$、$e_3=(v_3,v_4)$ 和 $e_4=(v_4,v_5)$。参数 $k$ 设为2。\n\n对 $S_{\\text{final}}$ 的分析得出了一个划分为两个子集 $P_1$ 和 $P_2$ 的结果。现发现权重 $a_1$（对应于顶点 $v_1$ 的顶点权重）在子集 $P_1$ 中。\n\n计算另一个子集 $P_2$ 中所有“顶点权重”的和。你的答案应该是一个整数值。", "solution": "我们根据给定的构造，基数为 $B = n+1$，每个顶点 $v_{i}$ 的权重为\n$$\na_{i} = B^{m}+\\sum_{j=1}^{m}\\delta(i,j)B^{j-1},\n$$\n每条边 $e_{j}$ 的权重为 $b_{j} = B^{j-1}$。对于 $P_{5}$，我们有 $n=5$，$m=4$，所以 $B = 6$。边是 $e_{1}=(v_{1},v_{2})$，$e_{2}=(v_{2},v_{3})$，$e_{3}=(v_{3},v_{4})$，$e_{4}=(v_{4},v_{5})$。关联关系如下：\n- $v_{1}$ 与 $e_{1}$ 关联，\n- $v_{2}$ 与 $e_{1},e_{2}$ 关联，\n- $v_{3}$ 与 $e_{2},e_{3}$ 关联，\n- $v_{4}$ 与 $e_{3},e_{4}$ 关联，\n- $v_{5}$ 与 $e_{4}$ 关联。\n\n因此，\n$$\n\\begin{aligned}\na_{1} = B^{4} + B^{0},\\\\\na_{2} = B^{4} + B^{0} + B^{1},\\\\\na_{3} = B^{4} + B^{1} + B^{2},\\\\\na_{4} = B^{4} + B^{2} + B^{3},\\\\\na_{5} = B^{4} + B^{3},\n\\end{aligned}\n\\qquad\n\\begin{aligned}\nb_{1} = B^{0},\\\\\nb_{2} = B^{1},\\\\\nb_{3} = B^{2},\\\\\nb_{4} = B^{3}.\n\\end{aligned}\n$$\n当 $B = 6$ 时，我们有 $B^{0} = 1$，$B^{1} = 6$，$B^{2} = 36$，$B^{3} = 216$，$B^{4} = 1296$，所以\n$$\n\\begin{aligned}\na_{1} = 1296 + 1 = 1297,\\\\\na_{2} = 1296 + 1 + 6 = 1303,\\\\\na_{3} = 1296 + 6 + 36 = 1338,\\\\\na_{4} = 1296 + 36 + 216 = 1548,\\\\\na_{5} = 1296 + 216 = 1512,\n\\end{aligned}\n\\qquad\n\\begin{aligned}\nb_{1} = 1,\\\\\nb_{2} = 6,\\\\\nb_{3} = 36,\\\\\nb_{4} = 216.\n\\end{aligned}\n$$\n\n在此构造的标准分析中，$S_{\\text{final}}$ 存在一个和相等的两部分划分，当且仅当 $S_{\\text{primary}}$ 中存在一个子集，其和为\n$$\nT = k B^{m} + 2 \\sum_{j=1}^{m} B^{j-1}.\n$$\n元素 $X = \\Sigma - 2T$ 确保在 $S_{\\text{final}}$ 的任何等和划分中，包含 $X$ 的那一部分（不计 $X$）拥有一个和恰好为 $T$ 的 $S_{\\text{primary}}$ 的子多重集。因为 $B^m$ 项只出现在顶点权重中，任何这样的子多重集必须恰好包含 $k$ 个顶点权重，并且将低位项匹配到 $2\\sum_{j}B^{j-1}$ 要求这 $k$ 个顶点形成一个顶点覆盖；对于被恰好一个所选顶点覆盖的边 $e_j$，其顶点权重贡献了 $B^{j-1}$，还必须包含 $b_j$ 才能使系数达到2，而被两个所选顶点都覆盖的边则不需要 $b_j$。未被覆盖的边无法满足条件，因为每条边只有一个 $b_j$。\n\n此处 $k=2$，对于 $P_5$，大小为2的唯一顶点覆盖是 $\\{v_{2},v_{4}\\}$。因此，在任何有效的等和划分中，包含 $X$ 的子集必须恰好包含顶点权重 $a_{2}$ 和 $a_{4}$（并且，在这个特定的图中，还包含所有四个边权重 $b_{1},b_{2},b_{3},b_{4}$，因为每条边都恰好被 $v_{2}$ 或 $v_{4}$ 中的一个覆盖）。既然给定 $a_{1}$ 在 $P_1$ 中，那么 $P_1$ 不可能是包含 $X$ 的那一部分（包含 $X$ 的那部分在顶点权重中恰好包含 $a_{2}$ 和 $a_{4}$）。因此 $X \\in P_2$，并且 $P_2$ 中的顶点权重恰好是 $a_2$ 和 $a_4$。\n\n因此所求的和是\n$$\na_{2} + a_{4} = (1296 + 1 + 6) + (1296 + 36 + 216) = 1303 + 1548 = 2851.\n$$\n\n作为一致性检验，计算总和：\n$$\n\\sum_{i=1}^{5}a_{i} = 5B^{4} + 2\\sum_{j=1}^{4}B^{j-1} = 5 \\cdot 1296 + 2 \\cdot 259 = 6998,\\quad \\sum_{j=1}^{4}b_{j} = 259,\n$$\n所以 $\\Sigma = 6998 + 259 = 7257$，$T = 2 \\cdot 1296 + 2 \\cdot 259 = 3110$，$X = \\Sigma - 2T = 1037$，并且每一部分的和为 $(\\Sigma + X)/2 = 4147$。确实，\n$$\nP_{2}: a_{2} + a_{4} + b_{1} + b_{2} + b_{3} + b_{4} + X = 1303 + 1548 + 259 + 1037 = 4147,\n$$\n$$\nP_{1}: a_{1} + a_{3} + a_{5} = 1297 + 1338 + 1512 = 4147,\n$$\n证实了此结构，并且 $P_2$ 中的顶点权重之和为 $2851$。", "answer": "$$\\boxed{2851}$$", "id": "1443831"}]}