{"hands_on_practices": [{"introduction": "电路可满足性问题的核心是找到一组能使电路输出为真的输入。这项练习将通过一个由与非门（NAND gates）构成的具体报警系统电路，帮助你建立基本直觉 [@problem_id:1415026]。你的任务是手动分析逻辑，通过寻找一组特定的输入组合来使输出为假（即警报不响），从而深入理解电路行为与输入赋值之间的直接关系。", "problem": "一个高安保设施使用一个基于数字逻辑电路的简单报警系统。该系统有三个传感器输入，记为 $x_1$、$x_2$ 和 $x_3$。每个输入可以处于两种状态之一：未激活（由 0 表示）或激活（由 1 表示）。如果电路的最终输出 $F$ 为 1，则报警器被设计为触发。\n\n该电路仅由双输入与非门构成。一个与非门当且仅当其两个输入都为 1 时输出 0；否则，它输出 1。连接方式如下：\n- 门 G1 接收输入 $x_1$ 和 $x_2$。\n- 门 G2 接收输入 $x_2$ 和 $x_3$。\n- 门 G3 接收输入 $x_1$ 和 $x_3$。\n- 门 G4 接收 G1 和 G2 的输出作为其输入。\n- 门 G5 接收 G2 和 G3 的输出作为其输入。\n- 最终输出门 F 接收 G4 和 G5 的输出作为其输入。\n\n你的任务是确定是否存在任何*不会*触发警报的传感器输入组合。以下哪个陈述是正确的？\n\nA. 不，对于任何传感器输入组合，警报都保证会触发。\n\nB. 是的，一个不触发警报的组合是 $(x_1, x_2, x_3) = (1, 0, 1)$。\n\nC. 是的，一个不触发警报的组合是 $(x_1, x_2, x_3) = (0, 1, 1)$。\n\nD. 是的，一个不触发警报的组合是 $(x_1, x_2, x_3) = (1, 1, 0)$。\n\nE. 是的，一个不触发警报的组合是 $(x_1, x_2, x_3) = (0, 0, 0)$。", "solution": "设与非运算定义为 $a \\uparrow b = \\lnot(a \\land b)$。将各个门的输出记为如下：\n- $y_{1} = \\lnot(x_{1} \\land x_{2})$\n- $y_{2} = \\lnot(x_{2} \\land x_{3})$\n- $y_{3} = \\lnot(x_{1} \\land x_{3})$\n- $y_{4} = \\lnot(y_{1} \\land y_{2})$\n- $y_{5} = \\lnot(y_{2} \\land y_{3})$\n- $F = \\lnot(y_{4} \\land y_{5})$。\n\n使用德摩根定律逐步简化。\n\n首先，计算 $y_{4}$ 和 $y_{5}$：\n$$\ny_{4} = \\lnot(y_{1} \\land y_{2}) = \\lnot y_{1} \\lor \\lnot y_{2}.\n$$\n由于 $y_{1} = \\lnot(x_{1} \\land x_{2})$，我们有 $\\lnot y_{1} = x_{1} \\land x_{2}$。类似地，$\\lnot y_{2} = x_{2} \\land x_{3}$。因此\n$$\ny_{4} = (x_{1} \\land x_{2}) \\lor (x_{2} \\land x_{3}) = x_{2} \\land (x_{1} \\lor x_{3}).\n$$\n同理可得，\n$$\ny_{5} = \\lnot(y_{2} \\land y_{3}) = \\lnot y_{2} \\lor \\lnot y_{3} = (x_{2} \\land x_{3}) \\lor (x_{1} \\land x_{3}) = x_{3} \\land (x_{1} \\lor x_{2}).\n$$\n\n接下来，计算 $y_{4} \\land y_{5}$：\n$$\ny_{4} \\land y_{5} = \\bigl[x_{2} \\land (x_{1} \\lor x_{3})\\bigr] \\land \\bigl[x_{3} \\land (x_{1} \\lor x_{2})\\bigr] = x_{2} \\land x_{3} \\land \\bigl[(x_{1} \\lor x_{3})(x_{1} \\lor x_{2})\\bigr].\n$$\n使用分配律 $(a \\lor b)(a \\lor c) = a \\lor (b \\land c)$，令 $a=x_{1}$、$b=x_{3}$、$c=x_{2}$，得到\n$$\n(x_{1} \\lor x_{3})(x_{1} \\lor x_{2}) = x_{1} \\lor (x_{3} \\land x_{2}) = x_{1} \\lor (x_{2} \\land x_{3}).\n$$\n因此，\n$$\ny_{4} \\land y_{5} = x_{2} \\land x_{3} \\land \\bigl[x_{1} \\lor (x_{2} \\land x_{3})\\bigr].\n$$\n应用吸收律 $p \\land (q \\lor p) = p$，令 $p = x_{2} \\land x_{3}$ 且 $q = x_{1}$：\n$$\ny_{4} \\land y_{5} = x_{2} \\land x_{3}.\n$$\n因此最终输出为\n$$\nF = \\lnot(y_{4} \\land y_{5}) = \\lnot(x_{2} \\land x_{3}).\n$$\n\n因此，$F=0$（警报不触发）当且仅当 $x_{2}=1$ 且 $x_{3}=1$，这与 $x_{1}$ 无关。在给定的选项中，组合 $(x_{1},x_{2},x_{3})=(0,1,1)$ 满足这个条件。因此，正确的陈述是选项 C。", "answer": "$$\\boxed{C}$$", "id": "1415026"}, {"introduction": "电路可满足性问题的真正威力在于其能够为现实世界中各式各样的搜索问题建立模型。本练习将引导你思考如何将一个双人博弈的胜负判断问题，转化为一个电路可满足性实例 [@problem_id:1415023]。你将学习到一种关键的规约技巧——“硬编码”（hardwiring），即将已知信息（例如玩家一的固定出招）作为电路的内建常数，从而将原问题简化为一个标准的电路可满足性问题。", "problem": "在计算复杂性理论中，许多问题可以被建模为博弈。考虑一个由已知布尔电路 $C$ 定义的双人、完美信息博弈。玩家1提供一个 $n$ 位的输入字符串 $x = (x_1, x_2, \\dots, x_n)$，玩家2提供一个 $m$ 位的输入字符串 $y = (y_1, y_2, \\dots, y_m)$。电路 $C$ 将这 $n+m$ 位作为输入。博弈的结果由电路的单位输出决定：如果 $C(x, y) = 1$，玩家2获胜；如果 $C(x, y) = 0$，玩家1获胜。\n\n假设玩家1走出了一个公开已知的、固定的开局着法 $x_0$。我们想要判断玩家2是否有一个获胜的应对，即是否存在至少一个玩家2的着法 $y$ 使得 $C(x_0, y) = 1$。这个判断可以通过求解一个电路可满足性（CIRCUIT-SAT）问题的单个实例来完成。CIRCUIT-SAT问题询问的是，对于一个给定的布尔电路，是否存在一个输入赋值使其输出为1。\n\n你的任务是，基于原始电路 $C$ 和固定着法 $x_0$，确定一个新电路 $C'$ 的正确构造方法，使得 $C'$ 是可满足的当且仅当玩家2对 $x_0$ 有获胜的应对。$C'$ 的输入应该是我们正在为其寻找一个满足赋值的那些变量。以下哪项描述了 $C'$ 的正确构造方法？\n\nA. 构造一个具有 $n+m$ 个输入（对应于 $x$ 和 $y$）的电路 $C'$。创建 $n$ 个新的子电路，其中第 $i$ 个子电路计算输入位 $x_i$ 和常量位 $x_{0,i}$ 的逻辑异或。这 $n$ 个子电路的输出被送入一个大型或非门。$C'$ 的最终输出是原始电路输出 $C(x, y)$ 与此或非门输出的逻辑与。\n\nB. 构造一个具有 $n$ 个输入（对应于 $x$）的电路 $C'$。该电路由原始电路 $C$ 形成，将其用于 $y$ 的 $m$ 条输入线永久设置为一个固定的、任意的字符串（例如，全零）。然后在其 $n$ 个输入上确定 $C'$ 的可满足性。\n\nC. 构造一个具有 $m$ 个输入（对应于 $y$）的电路 $C'$。该电路通过将原始电路 $C$ 的输出连接到一个非门，并使用该非门的输出作为 $C'$ 的输出来形成。原始电路 $C$ 的前 $n$ 个输入（用于 $x$）被硬连接到 $x_0$ 的常量位值。\n\nD. 构造一个具有 $m$ 个输入（对应于 $y$）的电路 $C'$。该电路就是原始电路 $C$，但其前 $n$ 条输入线（用于 $x$）不是可变输入，而是被硬连接到走法 $x_0$ 的常量位值。具体来说，对于每个 $i \\in \\{1, \\dots, n\\}$，如果 $x_{0,i}=1$，第 $i$ 条输入线连接到一个常量`真`源；如果 $x_{0,i}=0$，则连接到一个常量`假`源。\n\nE. 构造一个具有 $m$ 个输入（对应于 $y$）的电路 $C'$。该电路通过取 $n$ 个 $C$ 的副本构建。对于第 $i$ 个副本，如果 $x_{0,i}=1$，输入 $x_i$ 连接到`真`源；如果 $x_{0,i}=0$，则连接到`假`源，而所有其他 $x_j$（对于 $j \\neq i$）和所有 $y_k$ 都留作输入。所有 $n$ 个副本的输出然后被送入一个大型或门，从而产生 $C'$ 的最终输出。", "solution": "我们将目标判定形式化如下。该博弈指定了一个固定的开局着法 $x_{0} \\in \\{0,1\\}^{n}$。问题“玩家2是否有获胜的应对？”恰好是谓词\n$$\n\\exists\\, y \\in \\{0,1\\}^{m}:\\; C(x_{0},y)=1.\n$$\n一个CIRCUIT-SAT实例由一个电路 $C'$（其输入变量集为 $Z$）组成，并询问是否\n$$\n\\exists\\, z \\in \\{0,1\\}^{|Z|}:\\; C'(z)=1.\n$$\n问题还额外要求 $C'$ 的输入恰好是我们正在为其寻找满足赋值的那些变量。由于 $x$ 被固定为 $x_{0}$，我们唯一必须量化的变量是 $y$ 的 $m$ 个位。因此，$C'$ 必须正好有对应于 $y$ 的 $m$ 个输入，而 $x$ 的输入则被硬连接到编码 $x_0$ 的常量上。\n\n评估每个选项：\n\n- 选项 D：用 $m$ 个输入 $y$ 构造 $C'$，并将 $C$ 的前 $n$ 个输入硬连接到 $x_{0}$。那么对于每一个 $y$，\n$$\nC'(y)=C(x_{0},y),\n$$\n所以\n$$\n\\exists\\, y:\\; C'(y)=1 \\iff \\exists\\, y:\\; C(x_{0},y)=1,\n$$\n这恰好是所需的条件，并且 $C'$ 的输入恰好是我们正在搜索的变量。这满足了题目陈述的要求。\n\n- 选项 A：定义\n$$\nC'(x,y)=C(x,y)\\wedge \\bigwedge_{i=1}^{n}\\neg(x_{i}\\oplus x_{0,i}),\n$$\n所以 $C'(x,y)=1$ 当且仅当 $x=x_{0}$ 且 $C(x,y)=1$。那么\n$$\n\\exists\\, x,y:\\; C'(x,y)=1 \\iff \\exists\\, y:\\; C(x_{0},y)=1.\n$$\n虽然这在逻辑上等价于目标谓词，但 $C'$ 将 $x$ 作为输入暴露出来，因此也对 $x$ 进行了量化。这违反了输入必须恰好是我们正在搜索的变量（仅 $y$）这一要求。\n\n- 选项 B：在 $C'$ 以 $x$ 为输入且 $y$ 固定为某个任意常量 $s$ 的情况下，可满足性检查的是\n$$\n\\exists\\, x:\\; C(x,s)=1,\n$$\n这通常与 $\\exists\\, y:\\; C(x_{0},y)=1$ 无关。不正确。\n\n- 选项 C：在 $x$ 硬连接到 $x_{0}$ 但输出被取反的情况下，\n$$\nC'(y)=\\neg C(x_{0},y),\n$$\n所以\n$$\n\\exists\\, y:\\; C'(y)=1 \\iff \\exists\\, y:\\; C(x_{0},y)=0,\n$$\n这与期望的谓词正好相反。不正确。\n\n- 选项 E：构建 $n$ 个 $C$ 的副本，每个副本只固定一个 $x_i$，然后将它们的输出进行或运算。这会得到\n$$\n\\exists\\, y,\\; \\text{and for some } i,\\; \\exists\\, (x_{j})_{j\\neq i}:\\; C(x,y)=1 \\text{ with } x_{i}=x_{0,i},\n$$\n这并没有强制 $x=x_{0}$，并且不等价于 $\\exists\\, y:\\; C(x_{0},y)=1$。不正确。\n\n因此，既能保持目标谓词又能遵守对输入变量要求的正确构造是选项 D。", "answer": "$$\\boxed{D}$$", "id": "1415023"}, {"introduction": "在计算复杂性理论中，我们常常假设拥有一个能瞬间解决某个难题的“预言机”（Oracle），并以此为基础来探索更复杂问题的可解性。这个练习将挑战你利用一个电路可满足性问题的预言机，去判断一个电路是否拥有“唯一”的满足解 [@problem_id:1415013]。这不仅是对逻辑构造能力的考验，也揭示了图灵规约（Turing reduction）的精髓——如何利用一个已知的求解器作为子程序，来解决一个全新但相关的问题。", "problem": "一位名叫 Alice 的电气工程师，其任务是验证复杂数字逻辑电路的行为。一个给定的电路，我们将其表示为 $C$，有 $n$ 个二进制输入，由向量 $\\mathbf{x} = (x_1, x_2, \\dots, x_n)$ 表示，以及一个单一的二进制输出。电路 $C$ 的一个“可满足赋值”是一个输入向量 $\\mathbf{a}$，使得电路的输出为 1，即 $C(\\mathbf{a}) = 1$。\n\nAlice 有一个强大的测试设备，称为电路可满足性预言机 (Oracle for Circuit Satisfiability, OCS)。OCS 是一个黑盒设备，可以解决电路可满足性问题：给定任何布尔电路，如果存在至少一个可满足赋值，OCS 会立即返回 TRUE，否则返回 FALSE。\n\nAlice 的具体任务是确定电路 $C$ 是否有*且仅有*一个唯一的可满足赋值。她想用她的 OCS 来完成这个任务。她意识到她可以基于 $C$ 构建新的电路，并使用 OCS 来测试它们。她的计划是最多调用两次 OCS。在她的设计中，她使用了两组不同的 $n$ 个输入变量，$\\mathbf{x} = (x_1, \\dots, x_n)$ 和 $\\mathbf{y} = (y_1, \\dots, y_n)$。设 $C(\\mathbf{x})$ 表示输入为 $\\mathbf{x}$ 的原始电路，而 $C(\\mathbf{y})$ 表示一个输入为 $\\mathbf{y}$ 的相同电路副本。表达式 $(\\mathbf{x} \\neq \\mathbf{y})$ 表示一个子电路，当且仅当输入向量 $\\mathbf{x}$ 和 $\\mathbf{y}$ 不相同时，该子电路输出 1；它等价于逻辑表达式 $\\bigvee_{i=1}^n (x_i \\oplus y_i)$，其中 $\\oplus$ 是异或运算。\n\nAlice 设计了几种可能的策略。以下哪个过程能正确地使用最多两次 OCS 调用来确定电路 $C$ 是否有且仅有一个可满足赋值？\n\nA. 首先，对电路 $C_1 = C(\\mathbf{x})$ 调用 OCS。如果结果为 FALSE，则 $C$ 不是唯一可满足的。如果结果为 TRUE，则构建第二个电路 $C_2$，其输入为 $(\\mathbf{x}, \\mathbf{y})$，计算 $C(\\mathbf{x}) \\lor C(\\mathbf{y})$。对 $C_2$ 调用 OCS。当且仅当 OCS 对 $C_2$ 返回 TRUE 时，$C$ 有一个唯一的可满足赋值。\n\nB. 首先，对电路 $C_1 = C(\\mathbf{x})$ 调用 OCS。如果结果为 FALSE，则 $C$ 不是唯一可满足的。如果结果为 TRUE，则构建第二个电路 $C_2$，其输入为 $(\\mathbf{x}, \\mathbf{y})$，计算 $C(\\mathbf{x}) \\land C(\\mathbf{y}) \\land (\\mathbf{x} \\neq \\mathbf{y})$。对 $C_2$ 调用 OCS。当且仅当 OCS 对 $C_2$ 返回 TRUE 时，$C$ 有一个唯一的可满足赋值。\n\nC. 首先，对电路 $C_1 = C(\\mathbf{x})$ 调用 OCS。如果结果为 FALSE，则 $C$ 不是唯一可满足的。如果结果为 TRUE，则构建第二个电路 $C_2$，其输入为 $(\\mathbf{x}, \\mathbf{y})$，计算 $C(\\mathbf{x}) \\land C(\\mathbf{y}) \\land (\\mathbf{x} \\neq \\mathbf{y})$。对 $C_2$ 调用 OCS。当且仅当 OCS 对 $C_2$ 返回 FALSE 时，$C$ 有一个唯一的可满足赋值。\n\nD. 首先，对电路 $C_1 = C(\\mathbf{x})$ 调用 OCS。如果结果为 FALSE，则 $C$ 不是唯一可满足的。如果结果为 TRUE，则构建第二个电路 $C_2$，其输入为 $(\\mathbf{x}, \\mathbf{y})$，计算 $C(\\mathbf{x}) \\land \\neg C(\\mathbf{y})$。对 $C_2$ 调用 OCS。当且仅当 OCS 对 $C_2$ 返回 TRUE 时，$C$ 有一个唯一的可满足赋值。\n\nE. 仅用两次 OCS 调用不可能确定一个电路是否具有唯一的可满足赋值。这将需要一种根本不同类型的预言机。", "solution": "将电路 $C$ 的可满足集定义为\n$$S \\equiv \\{\\mathbf{a} \\in \\{0,1\\}^{n} : C(\\mathbf{a}) = 1\\}.$$\n当且仅当 $|S| = 1$ 时，电路 $C$ 是唯一可满足的。\n\n电路可满足性预言机 (OCS) 对一个输入电路返回 TRUE，当且仅当该电路至少有一个可满足赋值。我们根据 $|S|$ 的大小来分析每个提议的过程。\n\n共同的第一次调用（在所有 A–D 选项中）：对 $C(\\mathbf{x})$ 调用 OCS。当且仅当 $|S| \\geq 1$ 时，它返回 TRUE。如果返回 FALSE，则 $|S| = 0$，且 $C$ 不是唯一可满足的。因此，只有在第一次调用返回 TRUE（即 $|S| \\geq 1$）的分支需要进一步分析。\n\n选项 A：\n- 第二个电路：$C_{2}(\\mathbf{x}, \\mathbf{y}) \\equiv C(\\mathbf{x}) \\lor C(\\mathbf{y})$。\n- 当且仅当存在 $\\mathbf{x}, \\mathbf{y}$ 使得 $C(\\mathbf{x}) = 1$ 或 $C(\\mathbf{y}) = 1$ 时，该电路是可满足的。\n- 如果 $|S| \\geq 1$，选择 $\\mathbf{x} \\in S$；那么无论 $\\mathbf{y}$ 如何，$C_{2}$ 都是可满足的。因此，对于所有 $|S| \\geq 1$ 的情况，对 $C_2$ 调用 OCS 都会返回 TRUE。\n- 该过程声称当且仅当对 $C_2$ 调用 OCS 返回 TRUE 时具有唯一性，但这在 $|S| \\geq 1$ 时总是为 TRUE，所以它无法区分 $|S| = 1$ 和 $|S| \\geq 2$。因此 A 是不正确的。\n\n选项 B：\n- 第二个电路：$C_{2}(\\mathbf{x}, \\mathbf{y}) \\equiv C(\\mathbf{x}) \\land C(\\mathbf{y}) \\land (\\mathbf{x} \\neq \\mathbf{y})$。\n- 当且仅当存在不同的 $\\mathbf{x}, \\mathbf{y} \\in S$ 时，该电路是可满足的，即当且仅当 $|S| \\geq 2$。\n- 该过程声称当且仅当对 $C_2$ 调用 OCS 返回 TRUE 时具有唯一性，即它将 $|S| = 1$ 等同于 $|S| \\geq 2$，这是颠倒的。因此 B 是不正确的。\n\n选项 C：\n- 第二个电路与 B 中相同：$C_{2}(\\mathbf{x}, \\mathbf{y}) \\equiv C(\\mathbf{x}) \\land C(\\mathbf{y}) \\land (\\mathbf{x} \\neq \\mathbf{y})$。\n- 如上所述，对 $C_2$ 调用 OCS 返回 TRUE 当且仅当 $|S| \\geq 2$，返回 FALSE 当且仅当 $|S| \\leq 1$。\n- 结合第一次调用（它确保了 $|S| \\geq 1$），我们得到：第一次调用为 TRUE 且第二次调用为 FALSE，当且仅当 $|S| = 1$。\n- 因此，这个过程能用最多两次调用正确地确定唯一性。因此 C 是正确的。\n\n选项 D：\n- 第二个电路：$C_{2}(\\mathbf{x}, \\mathbf{y}) \\equiv C(\\mathbf{x}) \\land \\neg C(\\mathbf{y})$。\n- 当且仅当存在 $\\mathbf{x} \\in S$ 和 $\\mathbf{y} \\notin S$ 时，该电路是可满足的，即当且仅当 $1 \\leq |S| \\leq 2^{n} - 1$。\n- 对于任何可满足的非重言式 $C$（即 $1 \\leq |S| \\leq 2^{n} - 1$），对 $C_2$ 调用 OCS 都会返回 TRUE，无论 $|S| = 1$ 还是 $|S| \\geq 2$。如果 $C$ 是一个重言式（$|S| = 2^{n}$），对 $C_2$ 调用 OCS 会返回 FALSE，但在这种情况下 $C$ 也不是唯一可满足的。因此这个测试不能表征 $|S| = 1$。因此 D 是不正确的。\n\n选项 E：\n- 由于选项 C 提供了一个有效的两次调用过程来判断 $|S| = 1$ 是否成立，因此这并非不可能。因此 E 是不正确的。\n\n因此，唯一正确的过程是 C。", "answer": "$$\\boxed{C}$$", "id": "1415013"}]}