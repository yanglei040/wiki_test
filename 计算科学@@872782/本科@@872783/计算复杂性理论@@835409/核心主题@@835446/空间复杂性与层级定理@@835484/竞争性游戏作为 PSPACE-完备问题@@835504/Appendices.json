{"hands_on_practices": [{"introduction": "要掌握将竞争性游戏形式化为计算问题的核心，最好的方法莫过于亲身实践。这个练习将带你进入一个基于图论概念“独立集”的策略游戏。通过分析一个具体的中盘局面，你将学会如何通过向前推演几步来评估走法，并识别出能够创造多重威胁、从而锁定胜局的关键决策 [@problem_id:1416871]。这种直接的博弈树搜索是解决许多确定性策略游戏的基础。", "problem": "在一个名为“独立集博弈”的新竞争性游戏中，两名玩家（玩家A和玩家B）轮流从一个给定的图 $G=(V, E)$ 中选取顶点。一旦一个顶点被某个玩家选取，它就不能再被任何一方选择。当一名玩家自己收集的顶点集合中包含一个大小为 $k$ 的独立集时，该玩家获胜。独立集是指一个顶点集合，其中任意两个顶点之间都没有边相连。如果所有顶点都被选取，但没有玩家达成目标，则游戏为平局。\n\n考虑在7-圈图 $G$ 上进行的一局该游戏，其顶点集为 $V = \\{1, 2, 3, 4, 5, 6, 7\\}$，边集为 $E = \\{\\{1,2\\}, \\{2,3\\}, \\{3,4\\}, \\{4,5\\}, \\{5,6\\}, \\{6,7\\}, \\{7,1\\}\\}$。独立集的目标大小为 $k=3$。\n\n游戏正在进行中。玩家A已选取顶点 $\\{1\\}$，玩家B已选取顶点 $\\{4\\}$。现在轮到玩家A选择一个未被选取的顶点。\n\n以下哪个陈述是正确的？\n\nA. 玩家A在本回合选择顶点2有一个必胜策略。\n\nB. 玩家A在本回合选择顶点3有一个必胜策略。\n\nC. 玩家A在本回合选择顶点5有一个必胜策略。\n\nD. 玩家A在本回合选择顶点7有一个必胜策略。\n\nE. 玩家B有一个必胜策略，这意味着玩家A没有任何走法可以保证获胜。", "solution": "我们在7-圈图 $C_{7}$ 上进行分析，其顶点集为 $V=\\{1,2,3,4,5,6,7\\}$，边集为 $\\{\\{i,i+1\\}:i=1,\\ldots,6\\}\\cup\\{\\{7,1\\}\\}$。$C_{7}$ 上大小为3的独立集必然是最大独立集，所有这样的集合恰好是以下7个三元组\n$$\nS_{j}=\\{j,\\ j+2,\\ j+4\\}\\quad\\text{(下标在 $\\{1,\\ldots,7\\}$ 内模7运算)}。\n$$\n根据构造，它们两两不相邻（下标差模7为2或4），并且每个最大独立集都具有这种形式。\n\n初始时，玩家A拥有 $\\{1\\}$，玩家B拥有 $\\{4\\}$。现在轮到A走。\n\n考虑A在本回合选择3。那么A拥有 $\\{1,3\\}$。观察到 $\\{1,3\\}\\subset S_{1}=\\{1,3,5\\}$ 并且 $\\{1,3\\}\\subset S_{6}=\\{6,1,3\\}$。因此A构成了威胁，即可以通过取5来完成 $S_{1}$，或者通过取6来完成 $S_{6}$。对于B的应对：\n- 如果B取5，那么A接下来取6，以 $\\{1,3,6\\}$ 获胜。\n- 如果B取6，那么A接下来取5，以 $\\{1,3,5\\}$ 获胜。\n- 如果B取任何其他顶点，5和6都仍然可用，所以A接下来取5或6即可获胜。\nB不可能在A的下一步之前获胜，因为B目前只有一个顶点（4），需要再取两个顶点才能构成一个独立三元组，而A将在紧接着的下一步完成目标。因此，选择3给了A一个必胜局面。\n\n为完整起见，我们验证在B的最佳应对下，其他列出的走法并不能保证A获胜：\n- 如果A选择2，B可以回应选择3。那么A就无法再利用顶点1来构成包含顶点1的大小为3的独立集（因为 $S_{1}$ 和 $S_{6}$ 都需要3），并且通过2唯一剩下的可用三元组是 $S_{5}=\\{2,5,7\\}$。B总可以通过拿走 $\\{5,7\\}$ 中A尚未拿走的那个来阻止A，所以A没有必胜局面。\n- 如果A选择5，那么直接的单一威胁是 $S_{1}=\\{1,3,5\\}$；B通过拿走3来阻止。之后，A通过5唯一剩下的可用三元组是 $S_{5}=\\{2,5,7\\}$，B可以像上面一样继续阻止；因此A没有必胜局面。\n- 如果A选择7，B同样回应选择3，这排除了 $S_{1}$ 和 $S_{6}$（这是A在没有4的情况下，唯一可以利用1构成的三元组）。通过7唯一剩下的可用三元组是 $S_{5}=\\{2,5,7\\}$，B可以像之前一样阻止；因此A没有必胜局面。\n\n因此，只有选择顶点3能给玩家A一个必胜策略；其他列出的走法不能保证获胜，并且在这种局面下玩家B也没有必胜策略。", "answer": "$$\\boxed{B}$$", "id": "1416871"}, {"introduction": "在许多游戏中，规则由一组依赖关系或先决条件定义，这可以很自然地用有向无环图 (DAG) 来建模。本练习呈现了一个结构化的辩论游戏，其中每个论点都必须建立在先前已确立的论点之上。你的任务是分析整个游戏，确定先手或后手玩家是否拥有必胜策略 [@problem_id:1416894]。这个问题将帮助你巩固对“必胜位置”(Winning Position) 和“必败位置”(Losing Position) 的理解，并练习如何通过系统地分析所有可能的游戏路径来证明一个策略的存在。", "problem": "两名辩手，辩手1和辩手2，进行一场结构化辩论。辩论是通过从一个预定义列表中断言命题来构建的。辩手1先手。辩手们轮流每次断言一个命题。一个命题只有在其所有前置条件都已被任一辩手断言后，才能被断言。任何已被断言的命题不能被再次断言。如果轮到一名辩手且他无法做出有效移动（即，没有剩下他可以断言的命题），则该辩手输掉比赛。\n\n可用的命题集合是 $\\{A, B, C, D, E, F, G\\}$。前置条件结构如下：\n- 命题 $A$ 没有前置条件。\n- 命题 $B$ 需要命题 $A$。\n- 命题 $C$ 需要命题 $A$。\n- 命题 $D$ 需要命题 $B$。\n- 命题 $E$ 需要命题 $C$。\n- 命题 $F$ 需要命题 $D$ 和 $E$。\n- 命题 $G$ 需要命题 $F$。\n\n两位辩手都以最佳方式进行游戏以求获胜。关于这场博弈，以下哪个陈述是正确的？\n\nA. 辩手1有必胜策略。\n\nB. 辩手2有必胜策略。\n\nC. 如果双方都以最佳方式进行游戏，则比赛可能以平局结束。\n\nD. 比赛的结果取决于辩手2在他的第一步中选择断言哪个命题（$B$ 或 $C$）。", "solution": "为了确定谁有必胜策略，我们可以通过探索可能移动的博弈树来分析这场博弈。由于双方都以最佳方式进行游戏，我们可以为每个博弈状态确定当前行动的玩家是处于必胜位置还是必败位置。如果当前玩家可以做出一步移动，将对手置于必败位置（L），那么该位置就是一个必胜位置（W）。如果所有可能的移动都会将对手置于必胜位置，那么该位置就是一个必败位置（L）。没有有效移动可走的玩家处于必败位置。\n\n让我们从头开始追踪这场博弈。我们将轮到行动的玩家表示为 P1（辩手1）或 P2（辩手2）。博弈的状态可以用已经断言的命题集合来表示。\n\n**第1步 (P1):**\n初始状态是已断言命题的空集 $\\emptyset$。唯一没有前置条件的命题是 $A$。因此，辩手1只有一个可能的移动：断言 $A$。\n*   P1 断言 $A$。\n*   新状态：$\\{A\\}$。现在轮到辩手2。\n\n**第2步 (P2):**\n已断言的命题集合是 $\\{A\\}$。P2 可以断言任何前置条件在 $\\{A\\}$ 中的命题。这些是命题 $B$ 和 $C$。P2 有两个选择。我们必须分析这两个分支。\n\n*   **情况1：P2 断言 $B$。**\n    *   新状态：$\\{A, B\\}$。现在轮到 P1。\n    *   **第3步 (P1):** P1 可以断言任何前置条件在 $\\{A, B\\}$ 中的命题。有效的移动是 $C$（需要 $A$）和 $D$（需要 $B$）。\n        *   **子情况1.1：P1 断言 $C$。**\n            *   新状态：$\\{A, B, C\\}$。现在轮到 P2。\n            *   **第4步 (P2):** P2 的有效移动是 $D$（需要 $B$）和 $E$（需要 $C$）。\n                *   让我们从 $\\{A, B, C\\}$ 开始分析余下的博弈。还剩下4个命题：$D, E, F, G$。总移动步数将是 $3+4=7$。走出最后一步的玩家获胜。P1 走了第3步。P2 走第4步，P1 第5步，P2 第6步，P1 第7步。在 P1 走完第7步后，所有命题都被断言，轮到 P2 时将没有可走的步。P2 输，P1 赢。让我们验证这个序列是必然的。\n                *   从 $\\{A, B, C\\}$ 开始，P2 可以走 $D$ 或 $E$。\n                    *   如果 P2 走 $D$（第4步）：状态为 $\\{A, B, C, D\\}$。轮到 P1。唯一有效的移动是 $E$。\n                    *   P1 走 $E$（第5步）：状态为 $\\{A, B, C, D, E\\}$。轮到 P2。唯一有效的移动是 $F$。\n                    *   P2 走 $F$（第6步）：状态为 $\\{A, B, C, D, E, F\\}$。轮到 P1。唯一有效的移动是 $G$。\n                    *   P1 走 $G$（第7步）：状态为 $\\{A, B, C, D, E, F, G\\}$。所有命题都已断言。轮到 P2，没有可走的步。P2 输。P1 赢。\n                *   如果 P2 先选择 $E$，结果也一样，D 和 E 的角色将在玩家之间互换。如果 P2 走 $E$（第4步），P1 必须走 $D$（第5步），P2 必须走 $F$（第6步），P1 必须走 $G$（第7步），P2 输。\n                *   因此，如果 P1 达到状态 $\\{A, B, C\\}$，P1 就有必胜策略。这意味着状态 $\\{A, B, C\\}$ 对当前玩家（P2）来说是一个必败位置（L-position）。\n            *   因此，在子情况1.1中，P1 从状态 $\\{A, B\\}$ 断言 $C$ 的这一步，是将 P2 置于一个必败位置。这使得状态 $\\{A, B\\}$ 对 P1 来说是一个必胜位置（W-position）。\n        *   由于 P1 从状态 $\\{A, B\\}$ 找到了一个致胜的移动（$C$），我们不需要分析 P1 的另一个选项（$D$）。一个最佳的 P1 会选择 $C$。\n\n*   **情况2：P2 断言 $C$。**\n    *   新状态：$\\{A, C\\}$。现在轮到 P1。\n    *   **第3步 (P1):** P1 可以断言任何前置条件在 $\\{A, C\\}$ 中的命题。有效的移动是 $B$（需要 $A$）和 $E$（需要 $C$）。\n        *   **子情况2.1：P1 断言 $B$。**\n            *   新状态：$\\{A, C, B\\}$。这与子情况1.1中的状态 $\\{A, B, C\\}$ 相同。\n            *   正如我们所发现的，这个状态对当前玩家（P2）来说是一个必败位置。\n            *   因此，P1 从状态 $\\{A, C\\}$ 断言 $B$ 的这一步，是将 P2 置于一个必败位置。这使得状态 $\\{A, C\\}$ 对 P1 来说是一个必胜位置。\n        *   由于 P1 找到了一个致胜的移动（$B$），我们不需要分析 P1 的另一个选项（$E$）。\n\n**结论：**\n在 P1 必然的第一步（$A$）之后，博弈处于状态 $\\{A\\}$，轮到 P2 行动。P2 可以选择断言 $B$ 或 $C$。\n- 如果 P2 选择 $B$，状态变为 $\\{A, B\\}$。我们发现这对 P1 来说是一个必胜位置。所以 P1 会赢。\n- 如果 P2 选择 $C$，状态变为 $\\{A, C\\}$。我们发现这对 P1 来说也是一个必胜位置。所以 P1 会赢。\n\n无论哪种情况，不管 P2 的第一步如何选择，P1 都能做出确保胜利的应对之策。因此，从博弈一开始，辩手1就拥有必胜策略。\n\n让我们评估给出的选项：\nA. 辩手1有必胜策略。根据我们的分析，这是正确的。\nB. 辩手2有必胜策略。这是错误的。\nC. 如果双方都以最佳方式进行游戏，则比赛可能以平局结束。这是错误的。这场博弈包含有限数量的移动（7个命题），并且当一名玩家无法移动时结束。必定有一名玩家会输。\nD. 比赛的结果取决于辩手2在他的第一步中选择断言哪个命题（$B$ 或 $C$）。这是错误的。我们证明了无论辩手2作何选择，辩手1都会获胜。", "answer": "$$\\boxed{A}$$", "id": "1416894"}, {"introduction": "现在，让我们来探索一类特殊的游戏——“无偏博弈”(impartial games)，在这类游戏中，任何一方在任何局面下可以采取的走法都是完全相同的。对于这类游戏，我们常常可以运用一种名为 Sprague-Grundy 定理的强大数学工具，它能将复杂的局面分解为若干个独立的子游戏。这个城市规划游戏 [@problem_id:1416843] 是一个绝佳的例子，它将引导你学习如何计算每个子游戏的 Grundy 值（或 nim-value），并使用 nim-sum (异或运算) 来确定整个游戏的胜负，这是一种比遍历整个博弈树更优雅和高效的分析方法。", "problem": "在计算复杂性理论的研究中，许多完美信息双人博弈可用于模拟复杂的决策问题。考虑这样一种名为“城市隔离”的博弈，由规划者（玩家1）和破坏者（玩家2）进行。\n\n博弈在一个一维网格上进行，该网格由7个地块组成，排成一行，编号为1到7。一些地块可能已经被规划为‘住宅区’（R）或‘工业区’（I），而其他地块则是空的。双方轮流行动，规划者先行。一步行动包括选择一个空地块，并将其规划为‘R’或‘I’。\n\n然而，一个行动只有在不会造成‘住宅区’和‘工业区’相邻的情况下才是合法的。例如，如果4号地块被规划为‘R’，玩家就不能将3号或5号地块规划为‘I’。如果玩家试图进行会造成这种相邻关系的行动，该行动是被禁止的。\n\n当轮到某位玩家时，若其无法进行任何合法行动，则博弈结束。该玩家输掉博弈，另一位玩家获胜。\n\n假设博弈开始时，7个地块的初始配置如下：\n\n`R _ _ I _ _ R`\n\n（这里，`_`表示空地块。地块从左到右编号，所以1号地块是‘R’，4号地块是‘I’，7号地块是‘R’，而2、3、5、6号地块是空的）。\n\n假设双方都以获胜为目标进行最优博弈，以下哪个陈述是正确的？\n\nA. 规划者有必胜策略，该策略以将2号地块规划为‘住宅区’开始。\n\nB. 规划者有必胜策略，该策略以将3号地块规划为‘工业区’开始。\n\nC. 规划者有必胜策略，但这需要一个与选项A和B中描述的不同的开局行动。\n\nD. 破坏者有必胜策略，无论规划者的第一步行动是什么。", "solution": "将当前局面建模为两个独立的空地块片段的析取和，每个片段都由已经规划好的固定端点界定。初始配置 $R\\,\\_\\,\\_\\,I\\,\\_\\,\\_\\,R$ 包含两个长度为2且端点类型相反的片段：2-3号地块位于R和I之间，5-6号地块位于I和R之间。该博弈是公平博弈（即任何局面下双方的合法行动都相同）并且遵循常规胜负规则（normal play）；因此，Sprague–Grundy定理适用。总的Grundy值是各个独立片段的Grundy值的nim和。\n\n定义 $g_{E}(n)$ 为一个由n个连续空地块组成的、两端点类型相同的片段的Grundy数，而 $g_{O}(n)$ 为两端点类型相反的片段的Grundy数。基本情况：$g_{E}(0)=0$ 且 $g_{O}(0)=0$ （没有可行的行动）。\n\n对于 $n=1$：\n- 端点相同：唯一合法的行动是放置与端点相同的区域类型，将其分裂为两个长度为0的空片段，因此后继局面的值为 $0 \\oplus 0=0$，故 $g_{E}(1)=\\operatorname{mex}\\{0\\}=1$。\n- 端点相反：放置任何一种区域类型都会与一端的相反类型区域相邻，因此没有合法的行动；故 $g_{O}(1)=0$。\n\n对于 $n=2$：\n- 端点相同：在 $j=1$ 处，只有与端点匹配的区域类型是合法的，产生左边长度为0（端点相同）和右边长度为1（端点相同）的片段，因此后继局面的值为 $0 \\oplus g_{E}(1)=1$。类似地，在 $j=2$ 处，后继局面的值为 $g_{E}(1)\\oplus 0=1$。因此 $g_{E}(2)=\\operatorname{mex}\\{1\\}=0$。\n- 端点相反：在 $j=1$ 处，只有与左端点匹配的区域类型是合法的，分裂成左边长度为0（端点相同）和右边长度为1（端点相反）的片段，得到 $0 \\oplus g_{O}(1)=0$。在 $j=2$ 处，只有与右端点匹配的区域类型是合法的，分裂成左边长度为1（端点相反）和右边长度为0（端点相同）的片段，得到 $g_{O}(1)\\oplus 0=0$。因此 $g_{O}(2)=\\operatorname{mex}\\{0\\}=1$。\n\n因此，初始局面中的两个片段的Grundy值均为 $g_{O}(2)=1$，总的Grundy值为 $1 \\oplus 1=0$。nim和为0意味着先手输（一个$\\mathcal{P}$-position）；因此，下一个行动者（规划者）在破坏者采取最优策略的情况下处于必败局面。具体来说，规划者的任何合法开局行动都是在2、3、5、6号地块之一填充该位置唯一允许的区域类型；这会立即阻塞该片段中的另一个单元格，并使另一个长度为2、端点相反的片段保持不变。然后，破坏者在另一个片段中填充相应的单元格（这是那里唯一合法的行动），此后不再有任何合法行动，所以规划者无路可走而告负。因此，正确的陈述是，无论规划者的第一步行动是什么，破坏者都有必胜策略。", "answer": "$$\\boxed{D}$$", "id": "1416843"}]}