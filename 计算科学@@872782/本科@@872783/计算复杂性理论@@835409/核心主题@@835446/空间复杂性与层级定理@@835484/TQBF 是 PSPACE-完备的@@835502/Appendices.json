{"hands_on_practices": [{"introduction": "这个练习是一个很好的起点，它将帮助你掌握评估量化布尔公式（QBF）的基本技能。通过逐层处理嵌套的量词，你将具体地理解一个QBF的真值是如何被决定的，这为后续更深入地研究TQBF问题奠定了坚实的基础。", "problem": "在计算复杂性理论中，量化布尔公式 (QBF) 是一种经典命题逻辑中的公式，其中的变量是被量化的。判断一个没有自由变量的给定 QBF 是真还是假的问题被称为 TQBF 问题。\n\n考虑布尔变量 $x$ 和 $y$，它们可以取集合 $\\{\\top, \\bot\\}$ 中的值，分别代表真和假。标准逻辑运算符表示为：$\\land$ 代表“与”(AND)，$\\lor$ 代表“或”(OR)，$\\neg$ 代表“非”(NOT)。量词为 $\\forall$（全称/“对所有”）和 $\\exists$（存在/“存在”）。\n\n你的任务是确定以下 QBF 的真值：\n$$ \\exists x \\forall y ((x \\lor \\neg y) \\land (\\neg x \\lor y)) $$\n\n下列哪个陈述是正确的？\n\nA. 该公式为真（$\\top$）。\nB. 该公式为假（$\\bot$）。\nC. 该公式的真值是不可判定的。\nD. 该公式在语法上是格式错误的。\nE. 真值取决于一个初始的、未量化的赋值。", "solution": "给定的量化布尔公式是\n$$\n\\exists x \\forall y \\left((x \\lor \\neg y) \\land (\\neg x \\lor y)\\right).\n$$\n定义其矩阵（内部布尔表达式）为\n$$\n\\phi(x,y) = (x \\lor \\neg y) \\land (\\neg x \\lor y).\n$$\n使用命题等价式 $a \\rightarrow b \\equiv \\neg a \\lor b$ 和双条件定义 $a \\leftrightarrow b \\equiv (a \\rightarrow b) \\land (b \\rightarrow a)$。那么\n$$\nx \\lor \\neg y \\equiv \\neg y \\lor x \\equiv y \\rightarrow x,\n$$\n$$\n\\neg x \\lor y \\equiv x \\rightarrow y,\n$$\n所以\n$$\n\\phi(x,y) \\equiv (y \\rightarrow x) \\land (x \\rightarrow y) \\equiv x \\leftrightarrow y.\n$$\n因此，整个 QBF 等价于\n$$\n\\exists x \\forall y \\,(x \\leftrightarrow y).\n$$\n对 $x$ 的每个可能取值，评估全称量词部分。\n\n情况 1：$x=\\top$。使用 $x \\leftrightarrow y \\equiv (x \\land y) \\lor (\\neg x \\land \\neg y)$，\n$$\nx \\leftrightarrow y \\equiv (\\top \\land y) \\lor (\\bot \\land \\neg y) \\equiv y.\n$$\n因此 $\\forall y\\,(x \\leftrightarrow y)$ 变为 $\\forall y\\, y$，其值为假，因为取 $y=\\bot$ 会使 $y$ 为假。\n\n情况 2：$x=\\bot$。那么\n$$\nx \\leftrightarrow y \\equiv (\\bot \\land y) \\lor (\\top \\land \\neg y) \\equiv \\neg y.\n$$\n因此 $\\forall y\\,(x \\leftrightarrow y)$ 变为 $\\forall y\\, \\neg y$，其值为假，因为取 $y=\\top$ 会使 $\\neg y$ 为假。\n\n在两种情况下，$\\forall y\\,(x \\leftrightarrow y)$ 都为假，所以没有 $x$ 能满足存在量词。因此整个公式为假，正确选项是 B。", "answer": "$$\\boxed{B}$$", "id": "1467505"}, {"introduction": "在学会了简单的公式求值之后，下一个问题将引导你探索QBF语法中更精妙的方面，特别是变量遮蔽（variable shadowing）和量词顺序的至关重要性。理解这些规则对于正确解释和构造复杂的公式至关重要，它也清晰地揭示了为什么 $\\forall\\exists$ 和 $\\exists\\forall$ 通常是不等价的 [@problem_id:1467525]。", "problem": "计算理论课程上的两名学生，Alice和Bob，正在争论量化布尔公式（QBF）的规则。QBF是一种经典逻辑中的公式，其中每个变量都由一个量词（全称量词 $\\forall$ 或存在量词 $\\exists$）所约束。这些变量是布尔变量，取值为真（1）或假（0）。一个完全量化的QBF（即没有自由变量）的值总是为真或为假。\n\n他们从一个具有两个自由变量 $x_1$ 和 $x_2$ 的任意布尔公式 $\\phi(x_1, x_2)$ 开始。由此，他们构造了三个不同的QBF：\n\n- $\\Psi_1 = \\forall x_1 \\exists x_2 \\forall x_1 \\phi(x_1, x_2)$\n- $\\Psi_2 = \\exists x_2 \\forall x_1 \\phi(x_1, x_2)$\n- $\\Psi_3 = \\forall x_1 \\exists x_2 \\phi(x_1, x_2)$\n\nAlice认为，由于一个被称为“变量遮蔽”的概念，公式 $\\Psi_1$ 是多余的，并且与另外两个更简单的公式之一逻辑等价。Bob对此表示怀疑，他猜测这三个公式可能都不同，或者也许 $\\Psi_2$ 和 $\\Psi_3$ 仅仅通过交换量词就是等价的。\n\n为了解决他们的争论，你必须分析这三个公式之间的逻辑关系。请记住，对于布尔公式 $\\phi(x_1, x_2)$ 的每一种可能的选择，如果两个QBF的求值结果都为相同的真值，那么它们就被认为是逻辑等价的。\n\n以下关于这些公式的逻辑等价性的陈述中，哪一个是正确的？\n\nA. $\\Psi_1$ 与 $\\Psi_2$ 逻辑等价。\nB. $\\Psi_1$ 与 $\\Psi_3$ 逻辑等价。\nC. $\\Psi_2$ 与 $\\Psi_3$ 逻辑等价。\nD. 所有三个公式相互逻辑等价。\nE. 没有任意两个公式是相互逻辑等价的。", "solution": "我们分析由具有自由变量 $x_{1}$ 和 $x_{2}$ 的任意布尔公式 $\\phi(x_{1}, x_{2})$ 构建的三个QBF：\n$$\n\\Psi_{1} \\;=\\; \\forall x_{1}\\,\\exists x_{2}\\,\\forall x_{1}\\,\\phi(x_{1},x_{2}),\\quad\n\\Psi_{2} \\;=\\; \\exists x_{2}\\,\\forall x_{1}\\,\\phi(x_{1},x_{2}),\\quad\n\\Psi_{3} \\;=\\; \\forall x_{1}\\,\\exists x_{2}\\,\\phi(x_{1},x_{2}).\n$$\n如果对于 $\\phi$ 的每一种选择，两个QBF都具有相同的真值，则它们是逻辑等价的。\n\n首先，我们证明 $\\Psi_{1}$ 与 $\\Psi_{2}$ 逻辑等价。在 $\\Psi_{1}$ 中，最内层的量词 $\\forall x_{1}$ 遮蔽了外层的 $\\forall x_{1}$。通过约束变量重命名（也称为α-变换），我们可以将最内层约束的 $x_{1}$ 重命名为一个新变量 $y$ 而不改变其含义：\n$$\n\\Psi_{1} \\;\\equiv\\; \\forall x_{1}\\,\\exists x_{2}\\,\\forall y\\,\\phi(y,x_{2}).\n$$\n现在 $x_{1}$ 在 $\\exists x_{2}\\,\\forall y\\,\\phi(y,x_{2})$ 中不是自由出现的。根据空量化规则，如果一个变量在公式 $\\psi$ 中不是自由出现的，那么 $\\forall x\\,\\psi$ 与 $\\psi$ 等价。因此，\n$$\n\\forall x_{1}\\,\\exists x_{2}\\,\\forall y\\,\\phi(y,x_{2}) \\;\\equiv\\; \\exists x_{2}\\,\\forall y\\,\\phi(y,x_{2}).\n$$\n最后，将约束变量 $y$ 重命名回 $x_{1}$（再次通过α-变换）得到\n$$\n\\exists x_{2}\\,\\forall y\\,\\phi(y,x_{2}) \\;\\equiv\\; \\exists x_{2}\\,\\forall x_{1}\\,\\phi(x_{1},x_{2}) \\;=\\; \\Psi_{2}.\n$$\n因此，对于任意 $\\phi$，$\\Psi_{1}$ 和 $\\Psi_{2}$ 具有相同的真值，所以 $\\Psi_{1}$ 与 $\\Psi_{2}$ 逻辑等价。\n\n接下来，我们通过展示一个使它们不同的特定 $\\phi$ 来证明 $\\Psi_{2}$ 和 $\\Psi_{3}$ 不是逻辑等价的。取\n$$\n\\phi(x_{1},x_{2}) \\;:=\\; \\bigl(x_{1} \\leftrightarrow x_{2}\\bigr),\n$$\n即 $x_{1}$ 和 $x_{2}$ 的布尔等价关系。计算 $\\Psi_{3}$：\n$$\n\\Psi_{3} \\;=\\; \\forall x_{1}\\,\\exists x_{2}\\,\\bigl(x_{1} \\leftrightarrow x_{2}\\bigr).\n$$\n对于 $x_{1}$ 的每一个值，选择 $x_{2}=x_{1}$ 都能满足 $x_{1} \\leftrightarrow x_{2}$，所以 $\\Psi_{3}$ 为真。现在计算 $\\Psi_{2}$：\n$$\n\\Psi_{2} \\;=\\; \\exists x_{2}\\,\\forall x_{1}\\,\\bigl(x_{1} \\leftrightarrow x_{2}\\bigr).\n$$\n如果 $x_{2}=0$，那么当 $x_{1}=1$ 时内层公式为假；如果 $x_{2}=1$，那么当 $x_{1}=0$ 时它也为假。因此，不存在单个 $x_{2}$ 能使该等价关系对所有 $x_{1}$ 都成立，所以 $\\Psi_{2}$ 为假。因此 $\\Psi_{2}$ 和 $\\Psi_{3}$ 不是逻辑等价的。\n\n既然 $\\Psi_{1} \\equiv \\Psi_{2}$ 并且 $\\Psi_{2} \\not\\equiv \\Psi_{3}$，那么 $\\Psi_{1} \\not\\equiv \\Psi_{3}$ 也成立。因此，在给出的选项中，只有陈述“$\\Psi_{1}$与$\\Psi_{2}$逻辑等价”是正确的。", "answer": "$$\\boxed{A}$$", "id": "1467525"}, {"introduction": "最后的这个实践练习将抽象逻辑与计算复杂性理论联系起来。你将运用QBF来编码一个计算状态的特定属性，这模拟了证明TQBF是PSPACE-hard问题的关键步骤。这个练习展示了QBF强大的表达能力，并解释了为何它在PSPACE的研究中处于核心地位 [@problem_id:1467536]。", "problem": "考虑一个简单的计算模型，其配置由一组 $n$ 个布尔变量 $V = \\{v_1, v_2, \\dots, v_n\\}$ 描述，其中 $n$ 是一个偶数且 $n \\ge 4$。对这些变量进行特定的真/假值赋值代表了系统的一个单一状态。\n\n一个状态被定义为“良构的”，当且仅当集合的前半部分 $\\{v_1, v_2, \\dots, v_{n/2}\\}$ 中恰好有一个变量被赋值为真。这个前半部分的所有其他变量都必须为假。\n\n一个状态被定义为“接受的”，当且仅当最后一个变量 $v_n$ 被赋值为真。\n\n你的任务是构造一个公式，以确定是否存在任何可能的状态同时是良构的和接受的。下列哪个量化布尔公式 (QBFs) 当且仅当存在这样的状态时，其求值结果正确地为真？\n\nA. $\\exists v_1 \\dots \\exists v_n \\left( \\left( \\bigvee_{i=1}^{n/2} v_i \\right) \\land \\left( \\bigwedge_{1 \\le i  j \\le n/2} (\\neg v_i \\lor \\neg v_j) \\right) \\land v_n \\right)$\n\nB. $\\forall v_1 \\dots \\forall v_n \\left( \\left( \\bigvee_{i=1}^{n/2} v_i \\right) \\land \\left( \\bigwedge_{1 \\le i  j \\le n/2} (\\neg v_i \\lor \\neg v_j) \\right) \\land v_n \\right)$\n\nC. $\\exists v_1 \\dots \\exists v_n \\left( \\left( \\bigvee_{i=1}^{n/2} v_i \\right) \\land v_n \\right)$\n\nD. $\\exists v_1 \\dots \\exists v_n \\left( \\left( \\left( \\bigvee_{i=1}^{n/2} v_i \\right) \\land \\left( \\bigwedge_{1 \\le i  j \\le n/2} (\\neg v_i \\lor \\neg v_j) \\right) \\right) \\rightarrow v_n \\right)$\n\nE. $\\exists v_1 \\dots \\exists v_{n/2} \\forall v_{n/2+1} \\dots \\forall v_n \\left( \\left( \\bigvee_{i=1}^{n/2} v_i \\right) \\land \\left( \\bigwedge_{1 \\le i  j \\le n/2} (\\neg v_i \\lor \\neg v_j) \\right) \\land v_n \\right)$", "solution": "题目要求我们构造一个量化布尔公式，该公式当且仅当存在一个对变量 $v_1,\\dots,v_n$ 的赋值，使得状态同时是良构的和接受的时，其求值结果为真。根据定义，一个状态是良构的，如果 $\\{v_1,\\dots,v_{n/2}\\}$ 中恰好有一个变量为真；是接受的，如果 $v_n$ 为真。\n\n“$\\{v_1,\\dots,v_{n/2}\\}$ 中恰好有一个为真”这个要求可以被编码为以下两部分的合取：\n- 一个“至少一个”子句 $\\bigvee_{i=1}^{n/2} v_i$，以及\n- 一个“至多一个”子句 $\\bigwedge_{1 \\le i  j \\le n/2} (\\neg v_i \\lor \\neg v_j)$，它强制规定前半部分的变量中没有两个同时为真。\n\n将良构性条件定义为\n$$\nW \\equiv \\left( \\bigvee_{i=1}^{n/2} v_i \\right) \\land \\left( \\bigwedge_{1 \\le i  j \\le n/2} (\\neg v_i \\lor \\neg v_j) \\right),\n$$\n并将接受性条件定义为\n$$\nA \\equiv v_n.\n$$\n一个既是良构的又是接受的状态的存在性，恰好可以被以下存在量化QBF捕捉到：\n$$\n\\exists v_1 \\dots \\exists v_n \\left( W \\land A \\right).\n$$\n这与选项A相匹配。\n\n为了验证其他选项是不正确的，我们使用量词的语义：如果存在一个 $x$ 的值使得 $\\phi$ 为真，那么 $\\exists x\\,\\phi$ 为真；如果对于 $x$ 的两个值，$\\phi$ 都为真，那么 $\\forall x\\,\\phi$ 为真。\n\n- 选项B对所有变量使用全称量化：\n$$\n\\forall v_1 \\dots \\forall v_n \\left( W \\land v_n \\right).\n$$\n这断言每个赋值都是良构的并且 $v_n$ 为真，这是错误的（例如，所有变量都为假的赋值违反了 $\\bigvee_{i=1}^{n/2} v_i$ 和 $v_n$）。因此B不等价于所要求的存在性属性。\n\n- 选项C省略了“至多一个”的约束：\n$$\n\\exists v_1 \\dots \\exists v_n \\left( \\left( \\bigvee_{i=1}^{n/2} v_i \\right) \\land v_n \\right).\n$$\n这允许前半部分中有多个变量为真的赋值。因此它没有强制实现良构性，并且即使所选的赋值不是良构的，它也可以为真；它没有编码所要求的“恰好一个”的条件。\n\n- 选项D用蕴含替代了合取：\n$$\n\\exists v_1 \\dots \\exists v_n \\left( \\left( W \\right) \\rightarrow v_n \\right).\n$$\n在存在量化下，我们可以选择一些值使得前件 $W$ 为假（例如，将 $v_1,\\dots,v_{n/2}$ 全部设为假），这使得无论 $v_n$ 为何值，蕴含式都为真。因此这个公式可以被满足而无需产生一个良构的接受赋值，所以它不等价于所要求的属性。\n\n- 选项E对前半部分使用 $\\exists$ 量化，对后半部分（包括 $v_n$）使用 $\\forall$ 量化：\n$$\n\\exists v_1 \\dots \\exists v_{n/2} \\;\\forall v_{n/2+1} \\dots \\forall v_n \\left( W \\land v_n \\right).\n$$\n因为 $v_n$ 是全称量化的，所以公式体必须对 $v_n$ 为真和 $v_n$ 为假两种情况都成立。但合取项要求 $v_n$ 为真，所以 $v_n$ 为假的情况会证伪该公式体，使得整个QBF为假。因此E是不正确的。\n\n因此，正确的编码恰好是选项A。", "answer": "$$\\boxed{A}$$", "id": "1467536"}]}