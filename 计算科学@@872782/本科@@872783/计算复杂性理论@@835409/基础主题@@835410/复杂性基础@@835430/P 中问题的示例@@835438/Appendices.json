{"hands_on_practices": [{"introduction": "这是一个在数据处理和算法面试中非常经典的问题。当我们需要在大量数据中寻找满足特定数值关系的两个元素时，暴力搜索的效率很低，时间复杂度为 $O(n^2)$。本练习 [@problem_id:1423318] 将向你展示如何利用数据的有序性，通过巧妙的“双指针”技术，将问题的时间复杂度降低到线性级 $O(n)$，这是高效算法设计的精髓所在，也是 P 类问题可解性的一个直观体现。", "problem": "一个用于分布式数据库系统的监控服务，旨在检查数据损坏。该服务会定期从各个数据节点接收一批校验和。对于某项特定的完整性检查，该服务需要确定给定批次中是否存在任意两个不同的校验和之和等于一个特定的主密钥。这些校验和总是不同的正整数，并以升序排序的列表形式提供。\n\n一位工程师实现了一个高效的算法来执行此检查。该算法描述如下：\n1. 初始化两个指针：一个 `start` 指针位于列表的开头（索引 0），一个 `end` 指针位于列表的末尾。\n2. 当 `start` 指针在 `end` 指针之前时，计算 `start` 和 `end` 位置上数字的和。\n3. 如果这个和等于主密钥，则说明找到了一个数对，算法终止。\n4. 如果和小于主密钥，则将 `start` 指针向右移动一个位置（增加其索引）。\n5. 如果和大于主密钥，则将 `end` 指针向左移动一个位置（减少其索引）。\n6. 如果 `start` 指针和 `end` 指针相交或相遇，算法终止，因为没有找到数对。\n\n考虑以下具体情景：\n- 排序后的校验和列表为 `L = [3, 8, 11, 14, 19, 21, 26, 30, 33, 39]`。\n- 主密钥为 `K = 44`。\n\n对于这个特定的输入，所述算法在终止前会执行多少次求和计算？\n\nA. 3\n\nB. 4\n\nC. 5\n\nD. 9\n\nE. 10\n\nF. 45", "solution": "我们给定一个排序列表 $L=[3,8,11,14,19,21,26,30,33,39]$ 和一个目标和（主密钥）$K=44$。该算法在列表的两端初始化两个指针，每次迭代都精确计算一个和 $s=L_{\\text{start}}+L_{\\text{end}}$，然后根据 $s$ 是小于还是大于 $K$ 来移动一个指针，如果 $s=K$ 则终止。设 $c$ 表示执行的求和计算次数。\n\n初始化 $\\text{start}=0$，$\\text{end}=9$，以及 $c=0$。\n第 1 次迭代：计算 $s=L_{0}+L_{9}=3+39=42$。将 $c$ 增加 1 ($c \\leftarrow c+1$)，于是 $c=1$。由于 $4244$，将 $\\text{start}$ 增加 1 ($\\text{start} \\leftarrow 1$)。\n第 2 次迭代：计算 $s=L_{1}+L_{9}=8+39=47$。将 $c$ 增加 1 ($c \\leftarrow c+1$)，于是 $c=2$。由于 $47>44$，将 $\\text{end}$ 减少 1 ($\\text{end} \\leftarrow 8$)。\n第 3 次迭代：计算 $s=L_{1}+L_{8}=8+33=41$。将 $c$ 增加 1 ($c \\leftarrow c+1$)，于是 $c=3$。由于 $4144$，将 $\\text{start}$ 增加 1 ($\\text{start} \\leftarrow 2$)。\n第 4 次迭代：计算 $s=L_{2}+L_{8}=11+33=44$。将 $c$ 增加 1 ($c \\leftarrow c+1$)，于是 $c=4$。由于 $44=K$，算法终止。\n\n因此，该算法在终止前正好执行了 $c=4$ 次求和计算。", "answer": "$$\\boxed{B}$$", "id": "1423318"}, {"introduction": "在掌握了线性数据结构上的高效算法后，我们进入到关系更复杂的图结构。在社交网络、生物信息学或任何网络系统的分析中，寻找“三角关系”（即三个节点相互连接）是最基本的模式发现任务之一。这个练习 [@problem_id:1423320] 要求我们系统地在一个图中寻找特定的子结构，它揭示了尽管图问题看似复杂，但许多核心问题仍然可以通过多项式时间的算法来有效解决。", "problem": "一家名为“SocioGraph Inc.”的社交网络分析公司使用无向图来建模社交互动，其中每个人是一个顶点，相互的朋友关系是一条边。该公司正在开发一项功能，用于识别“闭合三元组”，即三个人两两之间都是朋友的群体。在图论中，这种结构被称为三角形或3-圈。\n\n您已获得一个由六个个体组成的小型网络的数据，这些个体用整数1到6标记。顶点集合为 $V = \\{1, 2, 3, 4, 5, 6\\}$。表示图的边的朋友关系，由以下无序对集合给出：\n$E = \\{\\{1, 2\\}, \\{1, 3\\}, \\{1, 4\\}, \\{2, 3\\}, \\{2, 5\\}, \\{3, 4\\}, \\{3, 5\\}, \\{4, 6\\}, \\{5, 6\\}\\}$。\n\n您的任务是确定该网络中存在的不同闭合三元组（三角形）的总数。一个不同的三元组由一组唯一的三个个体定义。", "solution": "一个闭合三元组（三角形）是一个3顶点集合 $\\{a,b,c\\}\\subset V$，使得所有三条边 $\\{a,b\\}$、$\\{a,c\\}$ 和 $\\{b,c\\}$ 都属于 $E$。等价地，对于一个固定的顶点 $v$，每个包含 $v$ 的三角形对应于 $v$ 的一对相邻的邻居。\n\n计算邻居集合以及邻居之间的边：\n- 对于 $1$，$N(1)=\\{2,3,4\\}$。在这些邻居中，$\\{2,3\\}\\in E$，$\\{2,4\\}\\notin E$，$\\{3,4\\}\\in E$。因此有三角形：$\\{1,2,3\\}$ 和 $\\{1,3,4\\}$。\n- 对于 $2$，$N(2)=\\{1,3,5\\}$。在这些邻居中，$\\{1,3\\}\\in E$，$\\{1,5\\}\\notin E$，$\\{3,5\\}\\in E$。因此有三角形：$\\{1,2,3\\}$ 和 $\\{2,3,5\\}$。\n- 对于 $3$，$N(3)=\\{1,2,4,5\\}$。在这些邻居中，$\\{1,2\\}\\in E$，$\\{1,4\\}\\in E$，$\\{1,5\\}\\notin E$，$\\{2,4\\}\\notin E$，$\\{2,5\\}\\in E$，$\\{4,5\\}\\notin E$。因此有三角形：$\\{1,2,3\\}$、$\\{1,3,4\\}$、$\\{2,3,5\\}$。\n- 对于 $4$，$N(4)=\\{1,3,6\\}$。在这些邻居中，$\\{1,3\\}\\in E$，$\\{1,6\\}\\notin E$，$\\{3,6\\}\\notin E$。因此有三角形：$\\{1,3,4\\}$。\n- 对于 $5$，$N(5)=\\{2,3,6\\}$。在这些邻居中，$\\{2,3\\}\\in E$，$\\{2,6\\}\\notin E$，$\\{3,6\\}\\notin E$。因此有三角形：$\\{2,3,5\\}$。\n- 对于 $6$，$N(6)=\\{4,5\\}$ 且 $\\{4,5\\}\\notin E$，所以没有三角形包含 $6$。\n\n收集所有不同的三角形，得到集合 $\\{\\{1,2,3\\},\\{1,3,4\\},\\{2,3,5\\}\\}$，其基数为 $3$。", "answer": "$$\\boxed{3}$$", "id": "1423320"}, {"introduction": "最后，我们将视野扩展到形式语言和计算理论的核心。判断一个字符串是否可以由给定的上下文无关文法（Context-Free Grammar, CFG）生成，是编译器设计和自然语言处理中的一个基本问题。这个更高级的练习 [@problem_id:1423341] 将引导你了解强大的 Cocke-Younger-Kasami (CYK) 算法，这是一种动态规划方法，能在多项式时间 $O(n^3)$ 内解决该问题，完美地展示了 P 类问题中更为复杂的算法技巧。", "problem": "在形式语言的研究中，上下文无关文法（CFG）提供了一套用于生成语言中字符串的规则。如果一个上下文无关文法的所有产生式规则都形如 $A \\to BC$ 或 $A \\to a$，那么它就属于乔姆斯基范式（CNF），其中 $A, B, C$ 是非终结符，$a$ 是终结符。\n\n考虑一个用 $G$ 表示的上下文无关文法，它由以下部分定义：\n- 非终结符：$\\{S, A, B, C\\}$\n- 终结符：$\\{a, b\\}$\n- 开始符号：$S$\n- 产生式规则：\n    1. $S \\to AB$\n    2. $A \\to BA$\n    3. $A \\to a$\n    4. $B \\to CC$\n    5. $B \\to b$\n    6. $C \\to AB$\n    7. $C \\to a$\n\n判断下列哪个字符串可以由文法 $G$ 生成。\n\nA. `aba`\n\nB. `baba`\n\nC. `aaab`\n\nD. `abaa`", "solution": "要确定一个字符串是否可以由一个处于乔姆斯基范式（CNF）的上下文无关文法生成，我们可以使用科克-扬格-卡萨米（CYK）算法。该算法使用动态规划来填充一个表格，该表格告诉我们哪些非终结符可以生成给定字符串的哪些子串。\n\n设输入字符串为 $w = w_1 w_2 \\dots w_n$，长度为 $n$。我们构建一个 $n \\times n$ 的表格 $P$，其中条目 $P[i,j]$ 包含可以生成子串 $w_i \\dots w_j$ 的非终结符集合。当且仅当开始符号 $S$ 位于条目 $P[1,n]$ 中时，字符串 $w$ 属于该文法的语言。\n\n该表格是按子串长度 $l$ 从 $1$ 到 $n$ 递增的顺序填充的。\n对于 $l=1$，条目 $P[i,i]$（对角线）用所有满足规则 $A \\to w_i$ 的非终结符 $A$ 填充。\n对于 $l  1$，条目 $P[i,j]$（其中 $j=i+l-1$）通过考虑子串 $w_i \\dots w_j$ 的所有可能的分割方式来填充，即将其分割成两个非空部分 $w_i \\dots w_k$ 和 $w_{k+1} \\dots w_j$，其中 $k$ 的取值范围为从 $i$ 到 $j-1$。如果存在产生式规则 $A \\to BC$ 以及某个分割点 $k$ 使得非终结符 $B \\in P[i,k]$ 且 $C \\in P[k+1,j]$，则将非终结符 $A$ 添加到 $P[i,j]$ 中。\n\n我们将测试选项C中的字符串 $w = \\text{aaab}$。这里，$n=4$，所以我们需要一个 $4 \\times 4$ 的表格。\n字符串是 $w_1=a, w_2=a, w_3=a, w_4=b$。\n\n文法规则如下：\n$S \\to AB$\n$A \\to BA | a$\n$B \\to CC | b$\n$C \\to AB | a$\n\n**第1步：长度为 $l=1$ 的子串**\n这对应于表格的对角线 $P[i,i]$。我们寻找形如 $X \\to w_i$ 的规则。\n- $P[1,1]$ (对应 $w_1 = a$): 规则有 $A \\to a$ 和 $C \\to a$。所以，$P[1,1] = \\{A, C\\}$。\n- $P[2,2]$ (对应 $w_2 = a$): 规则有 $A \\to a$ 和 $C \\to a$。所以，$P[2,2] = \\{A, C\\}$。\n- $P[3,3]$ (对应 $w_3 = a$): 规则有 $A \\to a$ 和 $C \\to a$。所以，$P[3,3] = \\{A, C\\}$。\n- $P[4,4]$ (对应 $w_4 = b$): 规则有 $B \\to b$。所以，$P[4,4] = \\{B\\}$。\n\n**第2步：长度为 $l=2$ 的子串**\n- $P[1,2]$ (对应 $w_1w_2 = aa$): 在 $k=1$ 处分割。我们检查来自 $P[1,1]P[2,2] = \\{A,C\\}\\{A,C\\}$ 的配对。可能的配对有 $AA, AC, CA, CC$。存在规则 $B \\to CC$。所以，$P[1,2] = \\{B\\}$。\n- $P[2,3]$ (对应 $w_2w_3 = aa$): 在 $k=2$ 处分割。我们检查来自 $P[2,2]P[3,3] = \\{A,C\\}\\{A,C\\}$ 的配对。存在规则 $B \\to CC$。所以，$P[2,3] = \\{B\\}$。\n- $P[3,4]$ (对应 $w_3w_4 = ab$): 在 $k=3$ 处分割。我们检查来自 $P[3,3]P[4,4] = \\{A,C\\}\\{B\\}$ 的配对。可能的配对有 $AB, CB$。存在规则 $S \\to AB$ 和 $C \\to AB$。所以，$P[3,4] = \\{S,C\\}$。\n\n**第3步：长度为 $l=3$ 的子串**\n- $P[1,3]$ (对应 $w_1w_2w_3 = aaa$):\n  - 在 $k=1$ 处分割：$P[1,1]P[2,3] = \\{A,C\\}\\{B\\}$。配对为 $AB, CB$。存在规则 $S \\to AB$ 和 $C \\to AB$。\n  - 在 $k=2$ 处分割：$P[1,2]P[3,3] = \\{B\\}\\{A,C\\}$。配对为 $BA, BC$。存在规则 $A \\to BA$。\n  - 结合这些结果，我们得到 $P[1,3] = \\{S, C, A\\}$。\n- $P[2,4]$ (对应 $w_2w_3w_4 = aab$):\n  - 在 $k=2$ 处分割：$P[2,2]P[3,4] = \\{A,C\\}\\{S,C\\}$。配对为 $AS, AC, CS, CC$。存在规则 $B \\to CC$。\n  - 在 $k=3$ 处分割：$P[2,3]P[4,4] = \\{B\\}\\{B\\}$。配对为 $BB$。没有规则。\n  - 所以，$P[2,4] = \\{B\\}$。\n\n**第4步：长度为 $l=4$ 的子串**\n- $P[1,4]$ (对应 $w_1w_2w_3w_4 = aaab$):\n  - 在 $k=1$ 处分割：$P[1,1]P[2,4] = \\{A,C\\}\\{B\\}$。配对为 $AB, CB$。存在规则 $S \\to AB$ 和 $C \\to AB$。\n  - 在 $k=2$ 处分割：$P[1,2]P[3,4] = \\{B\\}\\{S,C\\}$。配对为 $BS, BC$。没有规则。\n  - 在 $k=3$ 处分割：$P[1,3]P[4,4] = \\{S,C,A\\}\\{B\\}$。配对为 $SB, CB, AB$。存在规则 $S \\to AB$ 和 $C \\to AB$。\n  - 结合所有结果，$P[1,4] = \\{S, C\\}$。\n\n'aaab' 的CYK表格如下所示：\n| $i \\backslash j$ | 1       | 2       | 3             | 4         |\n| :---: |:-------:|:-------:|:-------------:|:---------:|\n| **1** | {A,C}   | {B}     | {S,C,A}       | {S,C}     |\n| **2** |         | {A,C}   | {B}           | {B}       |\n| **3** |         |         | {A,C}         | {S,C}     |\n| **4** |         |         |               | {B}       |\n\n因为开始符号 $S$ 在右上角的单元格 $P[1,4]$ 中，所以字符串 `aaab` 可以由文法 $G$ 生成。\n\n对其他字符串进行类似的分析会发现，对于它们中的任何一个，开始符号 $S$ 都不会出现在最终的单元格 $P[1,n]$ 中。例如，对于字符串 `aba`，$P[1,3]=\\{B\\}$，其中不包含 $S$。对于 `baba`，$P[1,4]=\\{B\\}$。对于 `abaa`，$P[1,4]=\\{A\\}$。因此，其他字符串都不能由该文法生成。", "answer": "$$\\boxed{C}$$", "id": "1423341"}]}