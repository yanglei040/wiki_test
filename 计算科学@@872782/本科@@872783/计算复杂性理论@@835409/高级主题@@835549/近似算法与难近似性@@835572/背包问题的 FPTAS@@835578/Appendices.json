{"hands_on_practices": [{"introduction": "理解一个算法最好的方式之一就是亲手在具体实例上运行一遍。这个练习将引导你逐步完成针对背包问题的 FPTAS 核心步骤，包括如何缩放价值、如何应用动态规划，以及如何得出最终的近似解。通过这个具体的计算过程，你将对该算法的运作机制有一个直观且深刻的认识 [@problem_id:1425023]。", "problem": "一位网络工程师的任务是优化单次传输突发中要发送的数据包的选择。其目标是在不超过传输缓冲区容量的前提下，最大化数据包的总“重要性”。为了高效地完成这项任务，该工程师使用了一种全多项式时间近似方案（FPTAS）的特定实例，该方案通过缩减重要性值来工作。\n\n值缩放算法的步骤定义如下：\n1.  给定一个包含 $n$ 个物品的集合，其中每个物品 $i$ 都有一个重量 $w_i$ 和一个价值 $v_i$。还给定一个总重量容量 $W$ 和一个误差容限参数 $\\epsilon$。\n2.  首先，找出所有物品中的最大价值，$V_{\\text{max}} = \\max_i(v_i)$。\n3.  计算缩放因子 $K = \\frac{\\epsilon V_{\\text{max}}}{n}$。\n4.  对于每个物品 $i$，创建一个新的缩放价值 $v'_i = \\lfloor \\frac{v_i}{K} \\rfloor$，其中 $\\lfloor \\cdot \\rfloor$ 是向下取整函数。原始重量 $w_i$ 保持不变。\n5.  使用动态规划，对于每个可能的总缩放价值 $V'$，确定达到它所需的最小总重量。我们将其表示为 $W_{\\text{min}}(V')$。\n6.  从所有可实现的总缩放价值 $V'$ 中，找到满足相应最小重量在容量限制内的最大值，我们称之为 $V'_{\\text{best}}$，即 $W_{\\text{min}}(V'_{\\text{best}}) \\le W$。\n7.  找出以重量 $W_{\\text{min}}(V'_{\\text{best}})$ 达到 $V'_{\\text{best}}$ 所对应的物品组合，并计算它们 **原始** 价值的总和。这个总和就是近似的结果。\n\n给定以下四个数据包及其大小（重量）和重要性分数（价值）：\n-   数据包 1：大小 = 2，重要性 = 60\n-   数据包 2：大小 = 3，重要性 = 70\n-   数据包 3：大小 = 4，重要性 = 90\n-   数据包 4：大小 = 5，重要性 = 120\n\n传输缓冲区的容量为 $W = 8$。误差容限为 $\\epsilon = 0.5$。\n\n通过对此数据仔细执行所述算法，确定被选中传输的数据包集合的总重要性分数。", "solution": "我们给定 $n=4$ 个物品及其重量和价值：$(w_{1},v_{1})=(2,60)$，$(w_{2},v_{2})=(3,70)$，$(w_{3},v_{3})=(4,90)$，$(w_{4},v_{4})=(5,120)$，容量 $W=8$，误差容限 $\\epsilon=\\frac{1}{2}$。值缩放算法的执行过程如下。\n\n计算最大价值和缩放因子：\n$$\nV_{\\max}=\\max\\{60,70,90,120\\}=120,\\qquad K=\\frac{\\epsilon V_{\\max}}{n}=\\frac{\\left(\\frac{1}{2}\\right)\\cdot 120}{4}=15.\n$$\n通过 $v'_{i}=\\left\\lfloor \\frac{v_{i}}{K}\\right\\rfloor$ 缩放价值，同时保持重量不变：\n$$\nv'_{1}=\\left\\lfloor \\frac{60}{15}\\right\\rfloor=4,\\quad v'_{2}=\\left\\lfloor \\frac{70}{15}\\right\\rfloor=4,\\quad v'_{3}=\\left\\lfloor \\frac{90}{15}\\right\\rfloor=6,\\quad v'_{4}=\\left\\lfloor \\frac{120}{15}\\right\\rfloor=8.\n$$\n\n定义 $W_{\\min}(V')$ 为达到总缩放价值 $V'$ 所需的最小总重量。初始化 $W_{\\min}(0)=0$，其他情况下 $W_{\\min}(V')=\\infty$，然后逐个物品更新。\n\n处理物品 1 $(w_{1}=2,v'_{1}=4)$ 后：\n$$\nW_{\\min}(0)=0,\\quad W_{\\min}(4)=2.\n$$\n\n处理物品 2 $(w_{2}=3,v'_{2}=4)$ 后，与之前的状态组合产生新的候选 $(V',w)$：$(4,3)$ 和 $(8,5)$。取最小值：\n$$\nW_{\\min}(0)=0,\\quad W_{\\min}(4)=\\min\\{2,3\\}=2,\\quad W_{\\min}(8)=5.\n$$\n\n处理物品 3 $(w_{3}=4,v'_{3}=6)$ 后，加到现有状态 $(0,0)$, $(4,2)$, $(8,5)$ 上得到 $(6,4)$, $(10,6)$, $(14,9)$，然后取最小值：\n$$\nW_{\\min}(0)=0,\\quad W_{\\min}(4)=2,\\quad W_{\\min}(6)=4,\\quad W_{\\min}(8)=5,\\quad W_{\\min}(10)=6,\\quad W_{\\min}(14)=9.\n$$\n\n处理物品 4 $(w_{4}=5,v'_{4}=8)$ 后，加到现有状态上得到新的候选 $(8,5)$, $(12,7)$, $(14,9)$, $(16,10)$, $(18,11)$, $(22,14)$，然后取最小值：\n$$\nW_{\\min}(0)=0,\\quad W_{\\min}(4)=2,\\quad W_{\\min}(6)=4,\\quad W_{\\min}(8)=5,\\quad W_{\\min}(10)=6,\\quad W_{\\min}(12)=7,\\quad W_{\\min}(14)=9,\\quad W_{\\min}(16)=10,\\quad W_{\\min}(18)=11,\\quad W_{\\min}(22)=14.\n$$\n\n选择满足 $W_{\\min}(V'_{\\text{best}})\\leq W=8$ 的最大缩放价值 $V'_{\\text{best}}$。可行值为 $V'\\in\\{0,4,6,8,10,12\\}$，其对应重量为 $\\{0,2,4,5,6,7\\}$；最大的是\n$$\nV'_{\\text{best}}=12\\quad \\text{with}\\quad W_{\\min}(12)=7\\leq 8.\n$$\n\n回溯构造得到 $V'=12$ 且重量为 $7$ 的组合，该组合包含物品 1 和 4（因为 $v'_{1}+v'_{4}=4+8=12$ 且 $w_{1}+w_{4}=2+5=7$）。它们的原始价值总和为\n$$\nv_{1}+v_{4}=60+120=180.\n$$\n\n因此，该算法选择的数据包的总原始重要性为 $180$。", "answer": "$$\\boxed{180}$$", "id": "1425023"}, {"introduction": "在掌握了 FPTAS 的基本操作后，理解其核心参数 $\\epsilon$ 的实际意义至关重要。本练习旨在揭示 FPTAS 的一个根本性权衡：在更快的、不太精确的解与更慢的、更精确的解之间做出选择。通过比较两个不同 $\\epsilon$ 值带来的影响，你将能定量地理解这种“精度换时间”的策略 [@problem_id:1425003]。", "problem": "一个操作团队的任务是为一次任务装载一艘货运飞船。他们有一份包含 $n$ 个可用科学仪器的清单，每种仪器都有特定的质量和科学价值分数。目标是选择这些仪器的一个子集，以在不超过飞船最大有效载荷质量的情况下，最大化总科学价值。这是一个经典的 0/1 背包问题。\n\n由于 0/1 背包问题是 NP-难问题，且仪器数量 $n$ 很大，团队决定使用一个完全多项式时间近似方案（FPTAS）。他们采用的具体 FPTAS 具有以下特点：\n1.  **时间复杂度**：找到一个解的最坏情况运行时间由函数 $T(n, \\epsilon) = C \\cdot \\frac{n^3}{\\epsilon}$ 给出，其中 $C$ 是一个与硬件相关的常数，$n$ 是仪器数量，$\\epsilon$ 是用户选择的近似参数（$0  \\epsilon  1$）。\n2.  **性能保证**：该算法保证其解的总科学价值 $V_{\\text{sol}}$ 不低于真实最优值 $V_{\\text{opt}}$ 的 $(1-\\epsilon)$ 倍。即，$V_{\\text{sol}} \\ge (1-\\epsilon)V_{\\text{opt}}$。\n\n对于同一组 $n$ 个仪器，团队考虑了两种不同的策略：\n-   **策略 A**：使用近似参数 $\\epsilon_A = 0.60$ 进行快速、粗略的估计。\n-   **策略 B**：使用近似参数 $\\epsilon_B = 0.15$ 进行更仔细、精确的计算。\n\n计算以下两个比率以比较这两种策略：\n1.  策略 B 与策略 A 的最坏情况运行时间之比，即 $\\frac{T_B}{T_A}$。\n2.  策略 B 的最小保证科学价值与策略 A 的最小保证科学价值之比。我们称这个比率为 $R_V$。\n\n将你的最终答案表示为一对数 $(\\frac{T_B}{T_A}, R_V)$。将最终答案中的每个数字四舍五入到两位有效数字。", "solution": "该问题要求我们计算在两种不同近似参数 $\\epsilon_A$ 和 $\\epsilon_B$ 下，针对背包问题的完全多项式时间近似方案（FPTAS）性能相关的两个比率。\n\n**第一部分：运行时间之比**\n\nFPTAS 的最坏情况运行时间由以下公式给出：\n$$T(n, \\epsilon) = C \\frac{n^3}{\\epsilon}$$\n其中 $n$ 是物品数量，$C$ 是一个常数。我们有两种使用不同 $\\epsilon$ 值的策略：\n-   策略 A：$\\epsilon_A = 0.60$\n-   策略 B：$\\epsilon_B = 0.15$\n\n策略 A 的运行时间 $T_A$ 为：\n$$T_A = T(n, \\epsilon_A) = C \\frac{n^3}{\\epsilon_A}$$\n\n策略 B 的运行时间 $T_B$ 为：\n$$T_B = T(n, \\epsilon_B) = C \\frac{n^3}{\\epsilon_B}$$\n\n我们需要计算比率 $\\frac{T_B}{T_A}$。\n$$\\frac{T_B}{T_A} = \\frac{C \\frac{n^3}{\\epsilon_B}}{C \\frac{n^3}{\\epsilon_A}}$$\n\n由于两策略的 $C$ 和 $n^3$ 项相同，它们可以消掉。\n$$\\frac{T_B}{T_A} = \\frac{1/\\epsilon_B}{1/\\epsilon_A} = \\frac{\\epsilon_A}{\\epsilon_B}$$\n\n现在，我们代入给定的 $\\epsilon_A$ 和 $\\epsilon_B$ 的数值：\n$$\\frac{T_B}{T_A} = \\frac{0.60}{0.15} = 4$$\n\n因此，策略 B 的最坏情况运行时间是策略 A 的 4 倍。\n\n**第二部分：最小保证价值之比**\n\nFPTAS 的性能保证指出，解的价值 $V_{\\text{sol}}$ 至少是最优值 $V_{\\text{opt}}$ 的 $(1-\\epsilon)$ 倍：\n$$V_{\\text{sol}} \\ge (1-\\epsilon)V_{\\text{opt}}$$\n\n因此，最小保证价值为 $(1-\\epsilon)V_{\\text{opt}}$。\n\n对于策略 A，其最小保证价值（我们称之为 $V_{\\text{min},A}$）为：\n$$V_{\\text{min},A} = (1-\\epsilon_A)V_{\\text{opt}}$$\n\n对于策略 B，其最小保证价值 $V_{\\text{min},B}$ 为：\n$$V_{\\text{min},B} = (1-\\epsilon_B)V_{\\text{opt}}$$\n\n问题要求计算这些最小保证价值之比，$R_V = \\frac{V_{\\text{min},B}}{V_{\\text{min},A}}$。\n$$R_V = \\frac{(1-\\epsilon_B)V_{\\text{opt}}}{(1-\\epsilon_A)V_{\\text{opt}}}$$\n\n$V_{\\text{opt}}$ 项是给定问题实例的真实最优值，在两种情况下是相同的，因此可以消掉。\n$$R_V = \\frac{1-\\epsilon_B}{1-\\epsilon_A}$$\n\n代入 $\\epsilon_A$ 和 $\\epsilon_B$ 的数值：\n$$R_V = \\frac{1 - 0.15}{1 - 0.60} = \\frac{0.85}{0.40}$$\n$$R_V = 2.125$$\n\n问题要求四舍五入到两位有效数字。\n第一个比率 4，可以写成 $4.0$ 以表示两位有效数字。\n第二个比率 $2.125$，四舍五入到两位有效数字是 $2.1$。\n\n因此，最终答案以一对数 $(\\frac{T_B}{T_A}, R_V)$ 的形式表示为 $(4.0, 2.1)$。", "answer": "$$\\boxed{\\begin{pmatrix} 4.0  2.1 \\end{pmatrix}}$$", "id": "1425003"}, {"introduction": "任何算法的性能保证都建立在特定的假设之上。这个练习将挑战你思考 FPTAS 的理论边界，通过探讨当误差参数 $\\epsilon$ 被设置为一个非常规值（大于等于1）时会发生什么。这有助于你更深刻地理解近似保证公式的真正含义，并明确为何 $\\epsilon$ 的取值范围通常是 $(0, 1)$ [@problem_id:1425012]。", "problem": "考虑 0-1 背包问题：给定一组 $n$ 个物品，其中物品 $i$ 具有正整数价值 $v_i$ 和正整数重量 $w_i$。我们还给定一个最大承重为 $W$ 的背包。目标是选择一个物品子集，使得在不超过重量限制 $W$ 的前提下，总价值最大化。\n\n由于该问题是 NP难 的，通常使用近似算法。一种常见的算法是全多项式时间近似方案 (FPTAS)。对于任意给定的误差参数 $\\epsilon  0$，该 FPTAS 能找到一个总价值为 $V_{ALG}$ 的解，满足保证 $V_{ALG} \\geq (1-\\epsilon)V_{OPT}$，其中 $V_{OPT}$ 是最优解的价值。该 FPTAS 的运行时间在输入大小 $n$ 和 $1/\\epsilon$ 上是多项式的，具体为 $T(n, \\epsilon) = O(n^3 / \\epsilon)$。\n\n一名学生正在实验这个 FPTAS，并与标准做法相反，决定使用一个大于或等于 1 的误差参数 $\\epsilon$ 来运行它。以下哪个陈述最能描述这一选择的理论后果？\n\nA. 算法将在关于 $n$ 的多项式时间内运行（具体来说，$O(n^3)$ 或更快），但近似保证 $V_{ALG} \\geq (1-\\epsilon)V_{OPT}$ 变得无意义，无法提供任何关于解相对于最优解质量的保证。\n\nB. 算法的运行时间会减少，并且近似保证会变得更强，确保解比 $\\epsilon  1$ 时更接近最优值 $V_{OPT}$。\n\nC. 算法将产生一个保证值至少为 0 的解，但其运行时间将变为关于 $n$ 的指数级，因为参数 $\\epsilon$ 超出了其预期的 $(0, 1)$ 范围。\n\nD. 算法不保证会终止或产生一个有效解（即，一个遵守重量限制 $W$ 的解），因为 FPTAS 的理论基础依赖于 $\\epsilon$ 是一个小的正分数。\n\nE. 近似保证变得无效，但算法的运行时间与 $\\epsilon$ 是一个小分数的情况相比保持不变，因为复杂度主要由 $n^3$ 项决定。", "solution": "我们给定一个针对 0-1 背包问题的 FPTAS，其保证和运行时间如下：\n$$\nV_{ALG} \\geq (1-\\epsilon) V_{OPT}, \\quad T(n,\\epsilon) = O\\!\\left(\\frac{n^{3}}{\\epsilon}\\right).\n$$\n考虑学生选择的 $\\epsilon \\geq 1$。\n\n首先，分析近似界限。对于 $\\epsilon \\geq 1$，我们有\n$$\n1 - \\epsilon \\leq 0.\n$$\n由于物品价值是正整数，任何可行解的总价值都是非负的，特别是空集合产生的价值为 $0$，所以\n$$\nV_{ALG} \\geq 0.\n$$\n因为 $V_{OPT} \\geq 0$，我们有\n$$\n(1-\\epsilon) V_{OPT} \\leq 0.\n$$\n因此，形式上的保证\n$$\nV_{ALG} \\geq (1-\\epsilon) V_{OPT}\n$$\n简化为一个无意义的陈述 $V_{ALG} \\geq$ 一个非正数，这对于解与 $V_{OPT}$ 的接近程度没有提供任何有意义的保证。因此，当 $\\epsilon \\geq 1$ 时，近似保证变得无意义。\n\n其次，分析运行时间。给定的运行时间是\n$$\nT(n,\\epsilon) = O\\!\\left(\\frac{n^{3}}{\\epsilon}\\right).\n$$\n对于 $\\epsilon \\geq 1$，我们有 $\\frac{1}{\\epsilon} \\leq 1$，因此\n$$\nT(n,\\epsilon) = O\\!\\left(\\frac{n^{3}}{\\epsilon}\\right) \\subseteq O(n^{3}).\n$$\n因此，该算法仍然在关于 $n$ 的多项式时间内运行，至多为 $O(n^{3})$，并且随着 $\\epsilon$ 的增大可能运行得更快。\n\n算法的可行性和终止性不依赖于 $\\epsilon  1$；FPTAS 的构造仍然会产生一个遵守背包容量限制的可行解，唯一的后果是当 $\\epsilon \\geq 1$ 时失去了有意义的近似因子。\n\n综合以上两点，正确的描述是运行时间是关于 $n$ 的多项式时间（不差于 $O(n^{3})$，可能更快），而近似保证变得无意义。\n\n这对应于选项 A。", "answer": "$$\\boxed{A}$$", "id": "1425012"}]}