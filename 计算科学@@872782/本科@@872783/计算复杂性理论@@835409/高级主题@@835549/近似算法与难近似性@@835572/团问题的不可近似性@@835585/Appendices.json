{"hands_on_practices": [{"introduction": "理解CLIQUE问题的计算难度，最好的方法之一是亲手操作其困难性的来源——从3-SAT问题到CLIQUE问题的经典归约。这个练习将指导你完成这一过程，将一个抽象的布尔逻辑公式转化为一个具体的图。通过识别图中与满足赋值相对应的团，你将能直观地理解为何解决CLIQUE问题至少和解决3-SAT问题一样困难。", "problem": "在计算复杂性理论中，许多问题通过将它们转化为其他问题来研究。考虑一个从布尔可满足性问题到图问题的标准转换。一个布尔公式如果是一个或多个子句的合取（AND，用 $\\land$ 表示），其中每个子句是恰好三个文字的析取（OR，用 $\\lor$ 表示），那么这个公式就处于 3-合取范式（3-CNF）中。一个文字要么是一个变量（例如，$x_i$），要么是它的否定（例如，$\\neg x_i$）。\n\n给定以下具有三个变量（$x_1, x_2, x_3$）和三个子句的 3-CNF 公式 $\\phi$：\n$$ \\phi = (x_1 \\lor \\neg x_2 \\lor x_3) \\land (\\neg x_1 \\lor x_2 \\lor \\neg x_3) \\land (x_1 \\lor x_2 \\lor \\neg x_3) $$\n\n根据以下规则从 $\\phi$ 构造一个图 $G=(V, E)$：\n1.  顶点集 $V$ 的形成方式是为每个子句中的每个文字创建一个顶点。一个顶点由一个序对 $(l, i)$ 表示，其中 $l$ 是文字，$i \\in \\{1, 2, 3\\}$ 是包含该文字的子句的索引。例如，第一个子句中的文字 $\\neg x_2$ 对应于顶点 $(\\neg x_2, 1)$。\n2.  边集 $E$ 的形成方式是：当且仅当同时满足以下两个条件时，在两个顶点 $(l, i)$ 和 $(l', j)$ 之间连接一条边：\n    a. 顶点来自不同的子句（即，$i \\neq j$）。\n    b. 文字不相互矛盾（即，$l$ 不是 $l'$ 的否定）。\n\n图中的一个 $k$-团（k-clique）是一个包含 $k$ 个顶点的集合，其中集合中的任意两个不同顶点都是相邻的（由一条边连接）。在从公式 $\\phi$ 构造的图 $G$ 中，以下哪个顶点集合构成一个 3-团？\n\nA. $\\{(x_1, 1), (\\neg x_1, 2), (x_2, 3)\\}$\n\nB. $\\{(x_1, 1), (x_2, 2), (\\neg x_3, 3)\\}$\n\nC. $\\{(x_1, 1), (\\neg x_2, 1), (x_2, 3)\\}$\n\nD. $\\{(\\neg x_2, 1), (x_2, 2), (\\neg x_3, 2)\\}$\n\nE. $\\{(x_3, 1), (\\neg x_3, 2), (x_1, 3)\\}", "solution": "问题要求我们确定，在从一个特定的 3-CNF 公式 $\\phi$ 构造的图中，给定的三顶点集合中哪一个构成一个 3-团。\n\n公式为 $\\phi = (x_1 \\lor \\neg x_2 \\lor x_3) \\land (\\neg x_1 \\lor x_2 \\lor \\neg x_3) \\land (x_1 \\lor x_2 \\lor \\neg x_3)$。\n子句 1：$(x_1 \\lor \\neg x_2 \\lor x_3)$\n子句 2：$(\\neg x_1 \\lor x_2 \\lor \\neg x_3)$\n子句 3：$(x_1 \\lor x_2 \\lor \\neg x_3)$\n\n图的顶点对应于这些子句中的文字。一个顶点表示为 $(l, i)$，其中 $l$ 是文字，$i$ 是子句编号。\n这些顶点是：\n来自子句 1：$(x_1, 1), (\\neg x_2, 1), (x_3, 1)$\n来自子句 2：$(\\neg x_1, 2), (x_2, 2), (\\neg x_3, 2)$\n来自子句 3：$(x_1, 3), (x_2, 3), (\\neg x_3, 3)$\n\n两个顶点 $(l, i)$ 和 $(l', j)$ 之间存在一条边，当且仅当：\n1.  它们在不同的子句中：$i \\neq j$。\n2.  它们不相互矛盾：$l \\neq \\neg l'$。\n\n一个包含三个顶点的集合 $\\{v_1, v_2, v_3\\}$ 构成一个 3-团，如果 $v_1$ 和 $v_2$ 之间、$v_1$ 和 $v_3$ 之间、以及 $v_2$ 和 $v_3$ 之间都存在一条边。我们现在逐一检查每个选项。\n\n**A. $\\{(x_1, 1), (\\neg x_1, 2), (x_2, 3)\\}$**\n我们检查顶点对 $(x_1, 1)$ 和 $(\\neg x_1, 2)$。\n1.  它们在不同的子句中吗？是的，$1 \\neq 2$。\n2.  它们相互矛盾吗？文字 $x_1$ 是文字 $\\neg x_1$ 的否定。所以，是的，它们是矛盾的。\n由于边的第二个条件不满足，$(x_1, 1)$ 和 $(\\neg x_1, 2)$ 之间没有边。因此，这个顶点集合不构成一个 3-团。\n\n**B. $\\{(x_1, 1), (x_2, 2), (\\neg x_3, 3)\\}$**\n我们必须检查所有三对顶点。\n1.  顶点对：$(x_1, 1)$ 和 $(x_2, 2)$\n    a. 不同的子句？是的，$1 \\neq 2$。\n    b. 矛盾吗？$x_1$ 和 $x_2$ 不是彼此的否定。不矛盾。\n    $(x_1, 1)$ 和 $(x_2, 2)$ 之间存在一条边。\n2.  顶点对：$(x_1, 1)$ 和 $(\\neg x_3, 3)$\n    a. 不同的子句？是的，$1 \\neq 3$。\n    b. 矛盾吗？$x_1$ 和 $\\neg x_3$ 不是彼此的否定。不矛盾。\n    $(x_1, 1)$ 和 $(\\neg x_3, 3)$ 之间存在一条边。\n3.  顶点对：$(x_2, 2)$ 和 $(\\neg x_3, 3)$\n    a. 不同的子句？是的，$2 \\neq 3$。\n    b. 矛盾吗？$x_2$ 和 $\\neg x_3$ 不是彼此的否定。不矛盾。\n    $(x_2, 2)$ 和 $(\\neg x_3, 3)$ 之间存在一条边。\n由于该集合中每对顶点之间都存在一条边，因此该集合构成一个 3-团。\n\n**C. $\\{(x_1, 1), (\\neg x_2, 1), (x_2, 3)\\}$**\n我们检查顶点对 $(x_1, 1)$ 和 $(\\neg x_2, 1)$。\n1.  它们在不同的子句中吗？不，它们都在子句 1 中（$1 = 1$）。\n由于边的第一个条件不满足，$(x_1, 1)$ 和 $(\\neg x_2, 1)$ 之间没有边。因此，这个顶点集合不构成一个 3-团。\n\n**D. $\\{(\\neg x_2, 1), (x_2, 2), (\\neg x_3, 2)\\}$**\n我们检查顶点对 $(x_2, 2)$ 和 $(\\neg x_3, 2)$。\n1.  它们在不同的子句中吗？不，它们都在子句 2 中（$2 = 2$）。\n由于边的第一个条件不满足，$(x_2, 2)$ 和 $(\\neg x_3, 2)$ 之间没有边。因此，这个顶点集合不构成一个 3-团。\n\n**E. $\\{(x_3, 1), (\\neg x_3, 2), (x_1, 3)\\}$**\n我们检查顶点对 $(x_3, 1)$ 和 $(\\neg x_3, 2)$。\n1.  它们在不同的子句中吗？是的，$1 \\neq 2$。\n2.  它们相互矛盾吗？文字 $x_3$ 是文字 $\\neg x_3$ 的否定。所以，是的，它们是矛盾的。\n由于边的第二个条件不满足，$(x_3, 1)$ 和 $(\\neg x_3, 2)$ 之间没有边。因此，这个顶点集合不构成一个 3-团。\n\n根据分析，只有选项 B 中的顶点集合满足构成 3-团的条件。", "answer": "$$\\boxed{B}$$", "id": "1427960"}, {"introduction": "仅仅知道一个问题是NP难的是不够的，我们还关心它是否容易近似。这个练习将挑战你对贪心算法的直觉，让你分析一个看似合理的策略在特定图上的表现。通过计算该算法的近似比 [@problem_id:1427955]，你将亲眼见证为何即使是寻找一个“足够好”的团也是一个艰巨的任务，这为CLIQUE问题的不可近似性提供了具体的例证。", "problem": "一位计算机科学家正在分析一种用于在图中寻找大团的贪心算法。最大团问题是一个著名的NP难问题，这意味着没有已知的有效算法可以为所有图找到绝对最大的团。\n\n该贪心算法的递归定义如下：\n给定一个图 $G$，如果 $G$ 为空，算法返回一个空集。否则，它在当前图 $G$ 中选择一个度数最大的顶点 $v$。然后，算法返回由 $\\{v\\}$ 与对 $v$ 的邻居所诱导的子图进行递归调用所返回的团的并集。如果有多个顶点具有相同的最大度数，算法在它们之间的选择是任意的。\n\n为了测试该算法的极限，这位科学家构建了一个特殊的图 $G$。该图由三个不同的部分组成：\n1. 一个包含 $k$ 个顶点的完全图（一个团）$K_k$。\n2. 一个包含 $m$ 个顶点的简单圈图 $C_m$。\n3. 一个单独的顶点，我们称之为“中心”顶点 $h$。\n\n最终的图 $G$ 是通过取 $K_k$ 和 $C_m$ 的不交并，然后在中心顶点 $h$ 和圈 $C_m$ 中的每个顶点之间添加一条边而形成的。$K_k$ 与图的任何其他部分之间不添加任何边。\n\n在这个特定的分析中，设团的大小为 $k=16$，圈的长度为 $m=17$。\n\n你的任务是确定该贪心算法在所述图 $G$ 上的近似比。对于一个最大化问题，近似比定义为最优解（最大团）的大小与算法找到的解的大小的比值。\n\n将你的答案表示为一个实数，并四舍五入到四位有效数字。", "solution": "我们首先刻画在参数为 $k=16$ 和 $m=17$ 时，所构建图 $G$ 中顶点的度数：\n- 团 $K_{k}$ 中的每个顶点的度数为 $k-1$，因此当 $k=16$ 时，每个此类顶点的度数为 $15$。\n- 圈 $C_{m}$ 上的每个顶点在 $C_{m}$ 内部的度数为 $2$，并额外有一条边连接到中心顶点 $h$，因此在 $G$ 中的度数为 $3$。\n- 中心顶点 $h$ 与所有 $m$ 个圈顶点相邻，所以 $\\deg(h)=m=17$。\n\n由于贪心算法在每一步都选择度数最大的顶点，所以在顶层它会选择 $h$，因为 $m=17  15 = k-1$。然后，算法对 $N(h)$ 上的诱导子图进行递归，而这个子图正是圈 $C_{m}$。\n\n在 $m=17$ 的圈 $C_{m}$ 上，所有顶点的度数都为 $2$，因此贪心算法会任意选择一个顶点 $u$。其邻居集合 $N_{C_{m}}(u)$ 由圈上与 $u$ 相邻的两个顶点组成。对于 $m\\geq 4$ 的情况，这两个邻居互不相邻，因此 $N_{C_{m}}(u)$ 上的诱导子图是两个孤立的顶点。对这个无边的图进行递归调用会选择一个顶点 $v$（度数为 $0$），然后对空的邻居集合进行递归（返回空集），并返回单例团 $\\{v\\}$。与 $\\{u\\}$ 取并集，在 $C_{m}$ 中得到大小为 $2$ 的团 $\\{u,v\\}$，也就是一条边。\n\n回到顶层，与 $\\{h\\}$ 取并集，在 $G$ 中得到大小为 $3$ 的团 $\\{h,u,v\\}$。因此，贪心算法的输出大小为\n$$\n\\mathrm{ALG}=3.\n$$\n\n接下来，我们确定最优团的大小 $\\mathrm{OPT}$。$K_{k}$ 部分是一个大小为 $k=16$ 的团。由于 $K_{k}$ 与图的其余部分之间没有边，所以任何团都不能同时包含 $K_{k}$ 中的顶点和其他顶点。在由 $h$ 和 $C_{m}$ 组成的子图（一个轮图）中，最大的团大小为 $3$（由 $h$ 和两个相邻的圈顶点形成的一个三角形）；不存在 $4$-团，因为当 $m\\geq 4$ 时，$C_{m}$ 的轮缘顶点中没有三角形。因此，\n$$\n\\mathrm{OPT}=\\max\\{k,3\\}=16.\n$$\n\n因此，（对于一个最大化问题）近似比为\n$$\n\\rho=\\frac{\\mathrm{OPT}}{\\mathrm{ALG}}=\\frac{16}{3}.\n$$\n四舍五入到四位有效数字，结果是\n$$\n5.333.\n$$", "answer": "$$\\boxed{5.333}$$", "id": "1427955"}, {"introduction": "在计算复杂性理论中，一个核心思想是将“判定问题”（回答“是”或“否”）与“搜索问题”（找到一个解）联系起来。这个练习通过一个假设性的“间隙核心检测器”来探索这种联系，该检测器只能区分团（clique）尺寸存在巨大差异的图。通过利用这个工具 [@problem_id:1427944]，你将学习如何系统地构建一个算法，将判定间隙的能力转化为找到一个有大小保证的近似团的实际能力，从而加深对近似算法本质的理解。", "problem": "您的任务是分析一个大型通信网络，该网络可以建模为一个简单无向图 $G=(V, E)$。该网络中的一个关键功能单元是“处理核心”，它对应于图中的一个团。团（clique）是一个顶点子集，其中每两个不同的顶点都由一条边连接。这种核心的最大尺寸称为图的团数，记为 $\\omega(G)$。\n\n为了辅助您的分析，您可以使用一个特殊的子程序 `CoreDetector(H, k)`，它作用于一个图 $H$ 和一个整数 $k$。`CoreDetector` 基于间隙检测的原理构建；只有当其输入 $(H, k)$ 满足一个“间隙承诺”时，才能保证其正确工作。该承诺是指，输入图的团数 $\\omega(H)$ 要么很大，要么很小，但不能介于两者之间。具体来说，对于给定的松弛参数 $s1$，承诺是 $\\omega(H) \\ge k$ 或 $\\omega(H)  k/s$。\n\n您所拥有的 `CoreDetector` 使用松弛参数 $s=2$。其行为如下：\n- 如果输入 $(H, k)$ 满足承诺 $\\omega(H) \\ge k$，检测器保证返回 `YES`。\n- 如果输入 $(H, k)$ 满足承诺 $\\omega(H)  k/2$，检测器保证返回 `NO`。\n- 如果输入不满足承诺，即 $k/2 \\le \\omega(H)  k$，则检测器的行为是未定义的，其输出不可靠。\n\n您正在使用以下算法分析一个特定的大图 $G$，以找到一个规模可观的团：\n\n**算法：Find-Approx-Core**\n\n**阶段 1：估计核心大小**\n1.  找到最大的、身为2的幂的整数 $k_{est}$（即，对于某个整数 $j \\ge 0$，$k_{est} = 2^j$），使得 `CoreDetector(G, k_{est})` 返回 `YES`。如果不存在这样的值，算法返回一个空集。\n\n**阶段 2：重构核心**\n1.  初始化一个空顶点集 $C = \\emptyset$。\n2.  初始化一个候选顶点集 $V_{cand} = V$。\n3.  根据一个固定的、任意的顺序，遍历图的顶点 $v_1, v_2, \\dots, v_n$。\n4.  对于每个顶点 $v_i$：\n    a. 如果 $v_i$ 在当前候选集 $V_{cand}$ 中：\n        i. 构建一个新的临时候选集 $V'_{cand} = V_{cand} \\cap N(v_i)$，其中 $N(v_i)$ 是原始图 $G$ 中顶点 $v_i$ 的邻居集合。\n        ii. 构建一个测试图 $H_{test}$，它是 $G$ 中由 $V'_{cand}$ 中的顶点诱导的子图。\n        iii. 调用检测器：`verdict = CoreDetector(H_{test}, k_{est})`。\n        iv. 如果 `verdict` 为 `YES`：\n            - 将顶点 $v_i$ 添加到团中：$C \\leftarrow C \\cup \\{v_i\\}$。\n            - 更新主候选集：$V_{cand} \\leftarrow V'_{cand}$。\n\n算法在遍历所有顶点后返回集合 $C$。设 $\\omega(G)$ 是图 $G$ 中最大团的真实大小。假设 $\\omega(G)$ 很大，所述算法保证能找到一个大小达到某个最小值的团 $C$。这个有保证的 $C$ 的最小尺寸相对于 $\\omega(G)$ 是多少？\n\nA. $\\frac{\\omega(G)}{2}$\n\nB. $\\frac{\\omega(G)}{4}$\n\nC. $\\frac{\\omega(G)}{8}$\n\nD. $\\frac{\\omega(G)}{16}$", "solution": "我们分两个阶段来分析这个问题。\n\n**阶段 1：估计核心大小**\n\n设图 $G$ 的真实最大团大小为 $\\omega(G) = t$。算法的第一阶段通过对 2 的幂进行搜索，找到最大的 $k_{est}$，使得 `CoreDetector(G, k_{est})` 返回 `YES`。\n-   `CoreDetector(G, k_{est})` 返回 `YES`，根据检测器的保证，我们知道图的真实团数不能在“NO”范围内，即 $\\omega(G)$ 不能小于 $k_{est}/2$。因此，我们有 $t \\ge k_{est}/2$。\n-   由于 $k_{est}$ 是满足此条件的最大 2 的幂，`CoreDetector(G, 2 \\cdot k_{est})` 不会返回 `YES`。这意味着 $t$ 不可能大于或等于 $2 \\cdot k_{est}$（否则检测器必须返回 `YES`）。因此，我们有 $t  2 \\cdot k_{est}$。\n\n综合这两个条件，我们得到了 $k_{est}$ 与真实团数 $t$ 之间的关系：\n$$ \\frac{k_{est}}{2} \\le t  2k_{est} $$\n这等价于 $t/2  k_{est} \\le 2t$。这个估计值 $k_{est}$ 在真实团数 $t$ 的一个常数因子范围内。\n\n**阶段 2：重构核心**\n\n这一阶段的目标是利用 `CoreDetector` 来实际构建一个团。问题中描述的算法是一个启发式的贪心算法。在理论分析中，这类“间隙检测器”通常用于一个更严谨的自归约（self-reduction）过程中，以保证找到的解的大小。尽管问题中的算法描述与标准证明略有出入，但其基本思想是相同的，其性能保证也源于同样的核心原理。\n\n标准的自归约论证表明，一个可以将 $\\omega(H) \\ge k$ 和 $\\omega(H)  k/s$ 区分开的“间隙为 $s$ 的检测器”，可以被用来设计一个 $s^2$-近似算法。这个过程大致如下：算法迭代地将顶点加入一个初始为空的团 $C$。在每一步，它会丢弃那些不属于任何大小至少为某个阈值（例如 $k_{est}/s$）的团的顶点，从而缩小候选集。\n\n在这个问题中，松弛参数 $s=2$。因此，理论上我们可以利用这个 `CoreDetector` 设计一个多项式时间的 $s^2 = 2^2 = 4$-近似算法。这意味着该算法能够保证找到一个大小至少为 $\\omega(G)/4$ 的团。\n\n所以，算法保证找到的团 $C$ 的最小尺寸为：\n$$ |C| \\ge \\frac{\\omega(G)}{4} $$\n\n因此，正确的选项是 B。", "answer": "$$\\boxed{B}$$", "id": "1427944"}]}