{"hands_on_practices": [{"introduction": "描述复杂性的核心思想是用逻辑公式来描述计算问题。在我们深入探讨 Immerman-Vardi 定理的全部威力之前，首要任务是熟练掌握其基础——一阶逻辑（FO）。这个练习是一个绝佳的起点，它将引导你把一个关于图的简单属性翻译成精确的逻辑语言。通过这个实践，你将建立起将计算概念形式化为逻辑表达式的基本技能，这是理解更复杂逻辑（如 FO(LFP)）的基石。", "problem": "在描述复杂性的研究中，我们通常将计算问题表示为有限结构（如有向图）的性质，并分析它们在给定逻辑中的可表达性。考虑一个使用一阶（FO）逻辑语言描述的有向图。该结构由一个单一的二元关系符号 $E$ 定义，其中公式 $E(u, v)$ 为真当且仅当存在一条从顶点 $u$ 到顶点 $v$ 的有向边。该逻辑的论域是图中所有顶点的集合。\n\n设 $c$ 为一个常数符号，指代图中的一个特定、指定的顶点。你的任务是找出一个正确的一阶逻辑公式，该公式表达了“顶点 $c$ 至少有一条入边和至少一条出边”这一性质。\n\n下列哪个公式正确地表示了这一性质？\n\nA. $(\\exists x \\, E(x, c)) \\land (\\exists y \\, E(c, y))$\n\nB. $(\\exists x \\, E(x, c)) \\lor (\\exists y \\, E(c, y))$\n\nC. $\\exists z \\, (E(z, c) \\land E(c, z))$\n\nD. $\\forall z \\, (E(z, c) \\lor E(c, z))$\n\nE. $(\\forall x \\, E(x, c)) \\land (\\forall y \\, E(c, y))$", "solution": "目标是构建一个一阶（FO）逻辑公式，用于翻译英文陈述：“顶点 $c$ 至少有一条入边和至少一条出边”。我们需要将这个陈述分解成其逻辑组成部分，然后使用给定的词汇（包括表示从 $u$ 到 $v$ 的边的二元关系 $E(u, v)$ 和表示特定顶点的常数 $c$）来翻译每个部分。\n\n该陈述是两个更简单性质的合取：\n1.  “顶点 $c$ 至少有一条入边。”\n2.  “顶点 $c$ 至少有一条出边。”\n\n这两个性质之间的逻辑联结词是“与”，对应于逻辑合取符号 $\\land$。\n\n我们来翻译第一个性质：“顶点 $c$ 至少有一条入边。”\n到 $c$ 的入边是指终点为 $c$ 的边。这意味着必须存在某个顶点（我们称之为 $x$），使得存在一条从 $x$ 到 $c$ 的边。短语“至少一个”翻译为存在量词 $\\exists$。所以，我们在说“存在一个顶点 $x$，使得有一条从 $x$ 到 $c$ 的边”。在我们的形式语言中，这写作：\n$$ \\exists x \\, E(x, c) $$\n\n现在，我们来翻译第二个性质：“顶点 $c$ 至少有一条出边。”\n从 $c$ 出发的出边是指起点为 $c$ 的边。这意味着必须存在某个顶点（我们称之为 $y$），使得存在一条从 $c$ 到 $y$ 的边。同样，“至少一个”对应于存在量词 $\\exists$。所以，我们在说“存在一个顶点 $y$，使得有一条从 $c$ 到 $y$ 的边”。在我们的形式语言中，这写作：\n$$ \\exists y \\, E(c, y) $$\n注意，我们使用了不同的变量名 $y$ 以避免混淆，尽管这不是严格必需的，因为量词 $\\exists x$ 的作用域仅限于表达式的第一部分。\n\n最后，我们将这两个公式用“与”（$\\land$）联结词组合起来，以表示完整的性质：\n$$ (\\exists x \\, E(x, c)) \\land (\\exists y \\, E(c, y)) $$\n\n这个公式正确地陈述了：存在一个顶点 $x$ 为 $c$ 提供一条入边，并且存在一个顶点 $y$ 接收一条从 $c$ 出发的出边。\n\n我们来分析一下给定的选项：\nA. $(\\exists x \\, E(x, c)) \\land (\\exists y \\, E(c, y))$\n这就是我们推导出的公式。它正确地陈述了至少有一条入边“并且”至少有一条出边。这是正确答案。\n\nB. $(\\exists x \\, E(x, c)) \\lor (\\exists y \\, E(c, y))$\n这个公式使用了析取（“或”）符号 $\\lor$。它表达了“顶点 $c$ 至少有一条入边‘或’至少有一条出边”的性质。这比题目要求的条件更弱。\n\nC. $\\exists z \\, (E(z, c) \\land E(c, z))$\n这个公式陈述了“存在一个顶点 $z$，使得有一条从 $z$ 到 $c$ 的边‘并且’有一条从 $c$ 到 $z$ 的边”。这描述了一个更具体的性质，即顶点 $c$ 是一个2-环的一部分。一个顶点可能有一条来自顶点 $u$ 的入边和一条到另一个顶点 $v$ 的出边，但并不满足这个公式。\n\nD. $\\forall z \\, (E(z, c) \\lor E(c, z))$\n这个公式使用了全称量词 $\\forall$（“对所有”）。它陈述了“对于图中的每一个顶点 $z$，要么有一条从 $z$ 到 $c$ 的边，‘要么’有一条从 $c$ 到 $z$ 的边”。这是一个非常强的性质，意味着 $c$ 与图中的每个顶点都有连接（方向不限），这与题目的要求不符。\n\nE. $(\\forall x \\, E(x, c)) \\land (\\forall y \\, E(c, y))$\n这个公式也使用了全称量词 $\\forall$。它陈述了“对于每一个顶点 $x$，都有一条从 $x$ 到 $c$ 的边，‘并且’对于每一个顶点 $y$，都有一条从 $c$ 到 $y$ 的边”。这意味着图中的每个顶点都有一条指向 $c$ 的边，并且 $c$ 有一条指向图中每个顶点的边。这是一个极其强大且完全不同的性质。\n\n因此，唯一正确捕捉了指定性质的公式是 A。", "answer": "$$\\boxed{A}$$", "id": "1427674"}, {"introduction": "掌握了一阶逻辑的基础后，我们来探索赋予该逻辑强大计算能力的关键——最小不动点（LFP）算子。LFP 允许我们通过迭代方式定义递归概念，例如图中的“可达性”。这个练习将带你一步步地演算 LFP 的迭代过程，让你亲手计算从源点出发可到达的顶点集合。通过这个具体的计算，你会直观地理解抽象的“不动点”概念是如何通过逐层逼近来捕捉计算结果的。", "problem": "在描述复杂性理论中，复杂性类 P（多项式时间）中的问题可以使用一阶逻辑外加一个最小不动点（LFP）算子来刻画。考虑有向图中的顶点可达性判定问题。\n\n设一个有向图由一个结构 $G = (V, E)$ 表示，其中 $V$ 是顶点集合，$E$ 是表示边的二元关系。我们希望找到从一个给定的源顶点 $s$ 可达的所有顶点。该集合可被计算为一个由以下一阶公式 $\\varphi(R, x)$ 定义的算子的最小不动点，其中 $R$ 是一个一元关系变量，用于存放可达顶点的集合：\n$$\n\\varphi(R, x) \\equiv (x = s) \\lor (\\exists y (R(y) \\land E(y, x)))\n$$\n寻找LFP的迭代过程从一个空关系开始，并逐次应用该公式：\n- 设 $I_0 = \\emptyset$。\n- 对于 $k \\ge 0$，将第 $(k+1)$ 次迭代定义为 $I_{k+1} = \\{x \\in V \\mid \\text{公式 } \\varphi(I_k, x) \\text{ 为真}\\}$。\n\n考虑一个具体的有向图，其顶点集为 $V = \\{1, 2, 3, 4, 5\\}$，边关系为 $E = \\{(1, 2), (2, 3), (3, 4), (4, 1), (3, 5)\\}$。设源顶点为 $s = 1$。\n\n关系 $I_3$ 中包含的顶点集合是什么？\n\nA. $\\{1, 2\\}$\n\nB. $\\{1, 2, 3\\}$\n\nC. $\\{1, 2, 3, 5\\}$\n\nD. $\\{1, 2, 3, 4\\}$\n\nE. $\\{1, 2, 3, 4, 5\\}$", "solution": "给定一个有向图结构 $G=(V,E)$，其中 $V=\\{1,2,3,4,5\\}$ 且 $E=\\{(1,2),(2,3),(3,4),(4,1),(3,5)\\}$，源顶点 $s=1$。最小不动点是通过迭代由以下一阶公式所决定的单调算子来计算的\n$$\n\\varphi(R,x) \\equiv (x=s)\\lor(\\exists y\\,(R(y)\\land E(y,x))).\n$$\n定义 $I_{0}=\\emptyset$，且对于 $k\\ge 0$，令\n$$\nI_{k+1}=\\{x\\in V \\mid \\varphi(I_{k},x)\\ \\text{为真}\\}.\n$$\n我们显式地计算前三次迭代。\n\n首先，对于 $I_{1}$，由于 $I_{0}=\\emptyset$，存在量词子句对所有 $x$ 都为假，因此只有 $x=s$ 满足 $\\varphi(I_{0},x)$。因此\n$$\nI_{1}=\\{x\\in V \\mid x=s\\}=\\{1\\}.\n$$\n\n其次，对于 $I_{2}$，一个元素 $x$ 满足 $\\varphi(I_{1},x)$ 的条件是 $x=s$ 或存在 $y\\in I_{1}$ 使得 $E(y,x)$ 成立。由于 $I_{1}=\\{1\\}$ 且 $E(1,2)$ 成立，所以在 $1$ 之外，我们还有 $2\\in I_{2}$。因此\n$$\nI_{2}=\\{1,2\\}.\n$$\n\n最后，对于 $I_{3}$，一个元素 $x$ 满足 $\\varphi(I_{2},x)$ 的条件是 $x=s$ 或存在 $y\\in I_{2}$ 使得 $E(y,x)$ 成立。根据 $I_{2}=\\{1,2\\}$，我们有 $E(1,2)$ 和 $E(2,3)$；因此 $2$ 和 $3$ 通过存在量词子句被包含，而 $1$ 通过 $x=s$ 被包含。没有其他边从顶点 $1$ 或 $2$ 出发。因此\n$$\nI_{3}=\\{1,2,3\\}.\n$$\n\n与选项比较，这与选项 B 匹配。", "answer": "$$\\boxed{B}$$", "id": "1427720"}, {"introduction": "现在，我们将一阶逻辑（FO）的表达能力和最小不動点（LFP）算子的归纳能力结合起来。这个练习完美地展示了 FO(LFP) 的协同工作方式：首先使用 LFP 定义一个复杂的关系——传递闭包（即两点之间是否存在路径），然后利用 FO 的全称量词来断言一个关于整个图的全局属性——强连通性。这个过程揭示了 FO(LFP) 如何能够表达那些对应着重要计算问题的复杂图属性，让你更深入地体会 Immerman-Vardi 定理的内涵。", "problem": "在描述复杂性理论中，我们研究可以用各种逻辑语言表达的结构的性质。考虑由结构 $G = (V, E)$ 表示的有限有向图，其中 $V$ 是顶点集合，$E$ 是 $V$ 上的一个二元关系，表示边。我们使用一个逻辑词汇表，其中包含一个也记为 $E$ 的二元关系符号。\n\n我们使用一阶逻辑 (FO) 并辅以最小不动点 (LFP) 算子。LFP 算子允许我们归纳地定义关系。考虑以下 FO 公式 $\\phi(P, x, y)$，其中 $P$ 是一个二元关系的占位符：\n$$\n\\phi(P, x, y) \\equiv E(x, y) \\lor \\exists z (P(x, z) \\land E(z, y))\n$$\n这个公式可以用来定义边关系 $E$ 的传递闭包。公式 $TC(x, y)$ 定义为 $\\phi$ 的最小不动点，由下式给出：\n$$\nTC(x, y) \\equiv [\\text{LFP}_{P,x,y} \\phi](x, y)\n$$\n作为一个带有两个自由变量 $x$ 和 $y$ 的公式，$TC(x, y)$ 在给定图 $G$ 的顶点上定义了一个二元关系。具体来说，$TC(a, b)$ 为真当且仅当存在一条从顶点 $a$ 到顶点 $b$ 的长度为1或更长的路径。\n\n现在，考虑以下语句 $\\Psi$，它是一个由 $TC(x, y)$ 构造的、没有自由变量的 FO 公式：\n$$\n\\Psi \\equiv \\forall x \\forall y ((x \\neq y) \\to TC(x, y))\n$$\n像 $\\Psi$ 这样的语句对于整个图 $G$ 来说，其真值或者为真，或者为假。因此，它定义了一个图的性质。\n\n以下哪个图的性质对应于语句 $\\Psi$ 为真的图的集合？\n\nA. 图 $G$ 是一个单一的简单环。\n\nB. 图 $G$ 是强连通的。\n\nC. 图 $G$ 是一个有向无环图 (DAG)。\n\nD. 图 $G$ 至少有一条边。\n\nE. 图 $G$ 是一个完全图（即，对于每一对不同的顶点 $u, v$，边 $(u, v)$ 都在 $E$ 中）。", "solution": "我们分析由公式 $\\phi(P,x,y) \\equiv E(x,y) \\lor \\exists z\\,(P(x,z) \\land E(z,y))$ 定义的算子。考虑二元关系上的算子 $F$，其定义为\n$$\nF(P)(x,y) \\equiv E(x,y) \\lor \\exists z\\,(P(x,z) \\land E(z,y)).\n$$\n首先，我们注意到 $F$ 是单调的：如果 $P \\subseteq Q$（作为有序对集合），那么对于所有的 $x,y$，从 $P(x,z) \\to Q(x,z)$ 我们可以得到 $F(P)(x,y) \\to F(Q)(x,y)$。因此 $F$ 在 $P$ 上是单调的。根据有限结构上的最小不动点理论，最小不动点 $\\text{LFP}_{P,x,y}\\,\\phi$ 存在，并且可以通过从空关系开始的迭代逼近来获得。\n\n通过下式定义序列 $P_{0}, P_{1}, P_{2}, \\dots$\n$$\nP_{0} \\equiv \\emptyset,\\quad P_{i+1} \\equiv F(P_{i}).\n$$\n我们对 $i \\geq 1$ 使用归纳法证明，$P_{i}(x,y)$ 成立当且仅当存在一条从 $x$到 $y$ 的有向路径，其长度至少为 1，至多为 $i$。\n- 基本情况 $i=1$：$P_{1}(x,y) \\equiv F(P_{0})(x,y) \\equiv E(x,y)$。这正好对应于存在一条从 $x$ 到 $y$ 的长度为 1 的有向路径。\n- 归纳步骤：假设该论断对 $i$ 成立。那么\n$$\nP_{i+1}(x,y) \\equiv F(P_{i})(x,y) \\equiv E(x,y) \\lor \\exists z\\,(P_{i}(x,z) \\land E(z,y)).\n$$\n根据归纳假设，$P_{i}(x,z)$ 成立当且仅当存在一条从 $x$ 到 $z$ 的有向路径，其长度在 1 和 $i$ 之间。与 $E(z,y)$ 进行合取会附加一条边，从而得到一条从 $x$ 到 $y$ 的长度在 2 和 $i+1$ 之间的路径。与 $E(x,y)$ 进行析取则包含了长度为 1 的路径。因此，$P_{i+1}(x,y)$ 成立当且仅当存在一条从 $x$ 到 $y$ 的有向路径，其长度至少为 1，至多为 $i+1$。\n\n因此，最小不动点 $TC(x,y) \\equiv [\\text{LFP}_{P,x,y}\\,\\phi](x,y)$ 是所有 $P_{i}$ ($i \\geq 1$) 的并集，所以 $TC(x,y)$ 成立当且仅当存在一条从 $x$ 到 $y$ 的长度至少为 1 的有向路径。\n\n现在考虑语句\n$$\n\\Psi \\equiv \\forall x \\forall y\\,\\big((x \\neq y) \\to TC(x,y)\\big).\n$$\n解析其语义，$\\Psi$ 要求对于每一对不同的顶点 $(x,y)$，都有一条从 $x$ 到 $y$ 的有向路径（长度至少为 1）。由于量化范围是所有 $x \\neq y$ 的有序对，这个条件对每一对不同的顶点强制了相互可达性：对于任何 $u \\neq v$，$TC(u,v)$ 和 $TC(v,u)$ 都必须成立。这正是有向图强连通性的标准定义：对于所有顶点 $u,v$，都存在一条从 $u$ 到 $v$ 的有向路径。子句 $(x \\neq y)$ 仅仅是为了避免对 $x=y$ 的情况施加任何条件，这一点无关紧要，因为强连通性不要求非平凡的自可达性；允许 $x=y$ 时存在长度为 0 的平凡路径是标准的做法，并且不影响该性质。\n\n我们与选项进行比较：\n- A（单一简单环）是语句成立的充分但非必要条件，因此这个条件过于严格。\n- B（强连通）与 $\\Psi$ 的解释完全匹配。\n- C（有向无环图）除了在平凡情况下，不能满足 $\\Psi$，所以通常是不兼容的。\n- D（至少有一条边）这个条件太弱了。\n- E（完全图）比所要求的条件更强，它要求所有不同顶点对之间都有边，而不仅仅是可达性。\n\n因此，由 $\\Psi$ 定义的性质是图是强连通的，对应于选项 B。", "answer": "$$\\boxed{B}$$", "id": "1427703"}]}