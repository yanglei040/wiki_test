{"hands_on_practices": [{"introduction": "许多算法的核心操作是搜索。理解如何分析搜索算法的平均性能至关重要。这个练习为平均情况分析提供了一个基础，它考察了最直接的情形：在一个二维网格中线性地寻找一个位置完全随机的目标。通过这个练习，你将学会如何通过对所有可能结果进行平均来计算期望成本，这是平均情况复杂度分析的基本功。[@problem_id:1413197]", "problem": "一个简单的图像处理算法被设计用于在方形数字图像中定位一个特定的“标记”像素。该图像表示为一个 $n \\times n$ 的像素网格。该算法通过从左上角（第1行，第1列）开始逐个扫描像素来搜索标记，沿每行从左到右进行，然后移至下一行。一旦找到标记像素，搜索立即终止。\n\n假设对于任何给定的搜索操作，标记像素都保证存在于图像中。此外，该标记像素的位置在所有 $n^2$ 个可能的像素位置上是均匀分布的。\n\n搜索的成本定义为算法检查的像素总数。例如，如果标记位于第 $i$ 行和第 $j$ 列（其中索引从1开始），算法会检查前 $i-1$ 行的所有像素，然后再检查第 $i$ 行的前 $j$ 个像素。\n\n确定此搜索算法的平均情况成本（即检查像素数量的期望值），并将其表示为图像维度 $n$ 的函数。", "solution": "设图像为一个 $n \\times n$ 的网格，且标记在所有 $n^{2}$ 个像素位置上均匀分布。行和列的索引从 $1$ 到 $n$。如果标记位于第 $i$ 行和第 $j$ 列，算法会检查前 $i-1$ 行的所有像素，然后检查第 $i$ 行的前 $j$ 个像素。因此，这种情况下的成本是\n$$\nC(i,j)=n(i-1)+j.\n$$\n由于每个 $(i,j)$ 位置出现的概率相等，均为 $\\frac{1}{n^{2}}$，因此期望成本为\n$$\n\\mathbb{E}[C]=\\sum_{i=1}^{n}\\sum_{j=1}^{n}\\frac{1}{n^{2}}\\left(n(i-1)+j\\right).\n$$\n计算关于 $j$ 的内层和：\n$$\n\\sum_{j=1}^{n}\\left(n(i-1)+j\\right)=n\\cdot n(i-1)+\\sum_{j=1}^{n}j=n^{2}(i-1)+\\frac{n(n+1)}{2}.\n$$\n现在对 $i$ 求和：\n$$\n\\sum_{i=1}^{n}\\left[n^{2}(i-1)+\\frac{n(n+1)}{2}\\right]\n= n^{2}\\sum_{i=1}^{n}(i-1)+n\\cdot\\frac{n(n+1)}{2}\n= n^{2}\\cdot\\frac{n(n-1)}{2}+\\frac{n^{2}(n+1)}{2}.\n$$\n因此，\n$$\n\\mathbb{E}[C]=\\frac{1}{n^{2}}\\left[\\frac{n^{3}(n-1)}{2}+\\frac{n^{2}(n+1)}{2}\\right]\n=\\frac{1}{2n^{2}}\\left(n^{4}+n^{2}\\right)=\\frac{n^{2}+1}{2}.\n$$\n这个结果等于从 $1$ 到 $n^{2}$ 的整数的平均值，这与将扫描视为在 $n^{2}$ 个等可能位置上进行线性搜索的观点是一致的。", "answer": "$$\\boxed{\\frac{n^{2}+1}{2}}$$", "id": "1413197"}, {"introduction": "在实践中，许多比较过程在发现第一个差异时就会提前终止。这个练习模拟了这类场景，例如数据完整性校验或字符串比较。与上一个练习中目标必然存在于集合中不同，这里我们将分析一个基于概率事件而具有可变步数的随机过程。这是一个绝佳的机会，可以练习使用期望的线性性质来分析这类动态过程的平均行为。[@problem_id:1413198]", "problem": "一个简化的数据完整性验证算法被用来比较一个接收到的二进制字符串 $A$ 和一个本地存储的主字符串 $B$。两个字符串的长度均为 $n$。该算法通过从第一个位置（$i=1$）开始，顺序比较两个字符串的比特位，直到最后一个位置（$i=n$）。如果发现不匹配（即，在第一个索引 $i$ 处有 $A_i \\neq B_i$），过程将立即终止。如果整个比较过程完成而没有任何不匹配，意味着两个字符串是相同的，那么过程也将在第 $n$ 次比较后终止。\n\n假设两个字符串都是随机生成的，其中每个字符串中的每个比特位都是独立地以 $\\frac{1}{2}$ 的等概率选择为 '0' 或 '1'。\n\n确定该算法执行的比特位比较次数的平均值。请用一个关于 $n$ 的封闭形式解析表达式来表示你的答案。", "solution": "设 $C$ 为执行的比较次数。对于 $i \\in \\{1,\\dots,n\\}$，定义指示变量 $I_{i}$，如果第 $i$ 次比较被执行，则 $I_{i}=1$，否则 $I_{i}=0$。那么\n$$\nC=\\sum_{i=1}^{n} I_{i}.\n$$\n根据期望的线性性，\n$$\n\\mathbb{E}[C]=\\sum_{i=1}^{n} \\mathbb{E}[I_{i}]=\\sum_{i=1}^{n} \\mathbb{P}(I_{i}=1).\n$$\n第 $i$ 次比较会被执行，当且仅当在前 $i-1$ 个位置上没有不匹配。对于每个位置，这对比特位相匹配的概率为 $\\frac{1}{2}$，并且各个位置之间是独立的。因此\n$$\n\\mathbb{P}(I_{i}=1)=\\left(\\frac{1}{2}\\right)^{i-1}.\n$$\n所以，\n$$\n\\mathbb{E}[C]=\\sum_{i=1}^{n}\\left(\\frac{1}{2}\\right)^{i-1}=\\frac{1-\\left(\\frac{1}{2}\\right)^{n}}{1-\\frac{1}{2}}=2\\left(1-2^{-n}\\right)=2-2^{1-n}.\n$$\n这就是所求的关于 $n$ 的封闭形式表达式。", "answer": "$$\\boxed{2-2^{1-n}}$$", "id": "1413198"}, {"introduction": "平均情况分析不仅适用于算法的运行时，也适用于分析随机化数据结构本身的性质。这个问题将我们的视角从分析确定性算法的随机输入，转移到分析一个被随机修改的常见数据结构——链表。它演示了一种强大的解题技巧：将一个看似复杂的结构问题，简化为对单个、明确定义的随机变量的分析，从而优雅地得到最终答案。[@problem_id:1413194]", "problem": "在一个分布式系统中，一条包含 $n$ 个计算任务的链被顺序处理。这些任务由一个单向链表中的节点表示，并按其创建的时间顺序被标记为节点1至节点$n$。系统中终结程序的一个微妙的竞争条件导致最后一个节点（节点$n$）的 `next` 指针被链接到一个目标节点。该目标节点从全部 $n$ 个节点 {节点1, 节点2, ..., 节点 $n$} 的集合中均匀随机选择。这个过程无意中创建了一个结构，其中一个线性的节点序列（“尾部”）最终进入一个环。\n\n该结构的“尾部”定义为从节点1开始，直到（但不包括）第一个属于环的节点的节点序列。尾部的长度是其包含的节点数量。\n\n请确定尾部的期望长度，作为总任务数 $n$ 的函数。您的答案应该是一个关于 $n$ 的封闭形式解析表达式。", "solution": "设 $U$ 表示节点 $n$ 所指向的随机目标节点。根据假设，$U$ 在 $\\{1,2,\\ldots,n\\}$ 上均匀分布，因此对于每个 $k \\in \\{1,\\ldots,n\\}$，我们有 $P(U=k)=\\frac{1}{n}$。\n\n存在的边为 $i \\to i+1$（对于 $i=1,2,\\ldots,n-1$）以及 $n \\to U$。这会创建一个包含节点 $\\{U,U+1,\\ldots,n\\}$ 的环，因为从 $U$ 开始跟随指针的路径是 $U \\to U+1 \\to \\cdots \\to n \\to U$。从节点1出发，遇到的第一个属于此环的节点恰好是节点 $U$。因此，尾部由节点 $\\{1,2,\\ldots,U-1\\}$ 构成，在给定 $U$ 的条件下，其长度是确定的，等于\n$$\nT=U-1.\n$$\n\n取期望，\n$$\n\\mathbb{E}[T]=\\mathbb{E}[U-1]=\\mathbb{E}[U]-1.\n$$\n由于 $U$ 在 $\\{1,\\ldots,n\\}$ 上均匀分布，\n$$\n\\mathbb{E}[U]=\\sum_{k=1}^{n} k \\, P(U=k)=\\frac{1}{n}\\sum_{k=1}^{n} k=\\frac{1}{n}\\cdot \\frac{n(n+1)}{2}=\\frac{n+1}{2}.\n$$\n因此，\n$$\n\\mathbb{E}[T]=\\frac{n+1}{2}-1=\\frac{n-1}{2}.\n$$", "answer": "$$\\boxed{\\frac{n-1}{2}}$$", "id": "1413194"}]}