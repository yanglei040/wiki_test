{"hands_on_practices": [{"introduction": "理解伪随机性的第一步是学会如何识别“非随机性”。这个练习提供了一个最基础的例子，帮助你掌握区分器 (distinguisher) 和区分优势 (distinguishing advantage) 的核心概念。通过分析一个设计极其简单的生成器，你将亲身体会到，一个看似微小的确定性模式是如何被一个简单的统计检验轻易识破的。[@problem_id:1457800]", "problem": "在计算复杂性理论中，伪随机生成器（Pseudorandom Generator, PRG）是一种将一个简短的、真正随机的种子扩展为一个更长的、伪随机字符串的算法。形式上，如果一个函数 $G: \\{0,1\\}^k \\to \\{0,1\\}^n$（其中 $n>k$）的输出与一个长度为 $n$ 的真正随机字符串是“计算上不可区分的”，那么它就是一个PRG。变量 $k$ 被称为安全参数。\n\n不可区分性是通过一个统计测试来衡量的，该测试是任何一个概率多项式时间算法 $T$，它以一个 $n$ 比特字符串作为输入，并输出一个比特，0 或 1。如果一个测试 $T$ 能够以不可忽略的优势区分生成器 $G$ 的输出和真正随机字符串，那么我们就说这个测试 $T$ “攻破”或“区分”了生成器 $G$。\n\n测试 $T$ 针对生成器 $G$ 的优势定义为：\n$$\n\\text{Adv}_G(T) = \\left| \\Pr_{s \\sim U_k}[T(G(s))=1] - \\Pr_{r \\sim U_n}[T(r)=1] \\right|\n$$\n其中 $s \\sim U_k$ 表示 $s$ 是从 $\\{0,1\\}^k$ 中均匀随机选择的种子，而 $r \\sim U_n$ 表示 $r$ 是从 $\\{0,1\\}^n$ 中均匀随机选择的字符串。\n\n如果存在一个正常数 $c$，使得对于所有足够大的 $k$，都有 $\\text{Adv}_G(T) \\ge \\frac{1}{k^c}$，则该优势被认为是不可忽略的。如果优势比 $k$ 的任何逆多项式衰减得更快（即可忽略），则该测试未能攻破该生成器。\n\n考虑一个简单的候选生成器，我们称之为“补零”生成器，$G_{PZ}: \\{0,1\\}^k \\to \\{0,1\\}^{k+1}$。对于任何 $k$ 比特的种子 $s \\in \\{0,1\\}^k$，该生成器定义为：\n$$\nG_{PZ}(s) = s \\circ 0\n$$\n其中 $\\circ$ 表示字符串连接。该生成器只是将一个固定的比特'0'附加到种子上。\n\n以下哪个统计测试 $T: \\{0,1\\}^{k+1} \\to \\{0,1\\}$ 通过获得不可忽略的优势成功攻破了 $G_{PZ}$ 生成器？\n\nA. 对于输入 $x \\in \\{0,1\\}^{k+1}$，$T(x)$ 在 $x$ 的最后一个比特为 0 时输出 1，否则输出 0。\n\nB. 对于输入 $x \\in \\{0,1\\}^{k+1}$，$T(x)$ 在 $x$ 的汉明权重（`1`的个数）为奇数时输出 1，否则输出 0。\n\nC. 对于输入 $x \\in \\{0,1\\}^{k+1}$，$T(x)$ 在 $x$ 的第一个比特为 0 时输出 1，否则输出 0。\n\nD. 对于输入 $x \\in \\{0,1\\}^{k+1}$，$T(x)$ 在 $x$ 的汉明权重小于或等于 $k/4$ 时输出 1，否则输出 0。假设 $k$ 是 4 的倍数。", "solution": "我们使用区分优势的定义\n$$\n\\text{Adv}_{G}(T)=\\left|\\Pr_{s \\sim U_{k}}[T(G(s))=1]-\\Pr_{r \\sim U_{k+1}}[T(r)=1]\\right|.\n$$\n对于补零生成器 $G_{PZ}(s)=s \\circ 0$，其输出的最后一个比特总是等于0，而前 $k$ 个比特与 $s$ 一样是均匀分布的。\n\n测试 A：$T(x)$ 输出 $1$ 当且仅当 $x$ 的最后一个比特是 $0$。\n在 $G_{PZ}$ 下，最后一个比特总是 $0$，因此\n$$\n\\Pr_{s \\sim U_{k}}[T(G_{PZ}(s))=1]=1.\n$$\n对于均匀的 $r \\sim U_{k+1}$，最后一个比特为 $0$ 的概率是 $\\frac{1}{2}$，因此\n$$\n\\Pr_{r \\sim U_{k+1}}[T(r)=1]=\\frac{1}{2}.\n$$\n因此\n$$\n\\text{Adv}_{G_{PZ}}(T)=\\left|1-\\frac{1}{2}\\right|=\\frac{1}{2},\n$$\n这是一个常数，因而是不可忽略的。所以 A 攻破了 $G_{PZ}$。\n\n测试 B：$T(x)$ 输出 $1$ 当且仅当 $x$ 的汉明权重是奇数。\n对于 $G_{PZ}(s)=s \\circ 0$，其汉明权重的奇偶性与 $s$ 的相同，而 $s$ 是均匀的；因此\n$$\n\\Pr_{s \\sim U_{k}}[T(G_{PZ}(s))=1]=\\frac{1}{2}.\n$$\n对于 $r \\sim U_{k+1}$，奇偶性也是平衡的，所以\n$$\n\\Pr_{r \\sim U_{k+1}}[T(r)=1]=\\frac{1}{2}.\n$$\n因此\n$$\n\\text{Adv}_{G_{PZ}}(T)=0,\n$$\n这是可忽略的。所以 B 没有攻破 $G_{PZ}$。\n\n测试 C：$T(x)$ 输出 $1$ 当且仅当 $x$ 的第一个比特是 $0$。\n对于 $G_{PZ}(s)$，第一个比特是 $s$ 的第一个比特，而 $s$ 是均匀的，所以\n$$\n\\Pr_{s \\sim U_{k}}[T(G_{PZ}(s))=1]=\\frac{1}{2}.\n$$\n对于 $r \\sim U_{k+1}$，第一个比特也是均匀的，所以\n$$\n\\Pr_{r \\sim U_{k+1}}[T(r)=1]=\\frac{1}{2}.\n$$\n因此\n$$\n\\text{Adv}_{G_{PZ}}(T)=0,\n$$\n这是可忽略的。所以 C 没有攻破 $G_{PZ}$。\n\n测试 D：$T(x)$ 输出 $1$ 当且仅当 $x$ 的汉明权重小于或等于 $k/4$（其中 $k$ 是 $4$ 的倍数）。\n令 $Y \\sim \\text{Bin}(k,\\frac{1}{2})$ 为 $s$ 的汉明权重，令 $X \\sim \\text{Bin}(k+1,\\frac{1}{2})$ 为 $r$ 的汉明权重。那么\n$$\n\\Pr_{s \\sim U_{k}}[T(G_{PZ}(s))=1]=\\Pr[Y \\leq k/4].\n$$\n将 $X$ 写为 $X=Y+B$，其中 $B \\sim \\text{Bernoulli}(\\frac{1}{2})$ 且独立于 $Y$（即均匀字符串 $r$ 中额外附加的比特）。那么\n$$\n\\Pr_{r \\sim U_{k+1}}[T(r)=1]=\\Pr[X \\leq k/4]=\\frac{1}{2}\\Pr[Y \\leq k/4]+\\frac{1}{2}\\Pr[Y \\leq k/4 - 1].\n$$\n因此\n$$\n\\text{Adv}_{G_{PZ}}(T)=\\left|\\Pr[Y \\leq k/4]-\\left(\\frac{1}{2}\\Pr[Y \\leq k/4]+\\frac{1}{2}\\Pr[Y \\leq k/4 - 1]\\right)\\right|=\\frac{1}{2}\\Pr[Y=k/4].\n$$\n由于 $Y \\sim \\text{Bin}(k,\\frac{1}{2})$ 且 $k/4$ 与均值 $k/2$ 相差一个常数比例，点概率满足\n$$\n\\Pr[Y=k/4] \\leq \\Pr[Y \\leq k/4] \\leq \\exp\\!\\left(-\\frac{k}{16}\\right)\n$$\n根据 Chernoff 界，其中均值 $\\mu=k/2$ 且 $\\delta=\\frac{1}{2}$。因此\n$$\n\\text{Adv}_{G_{PZ}}(T) \\leq \\frac{1}{2}\\exp\\!\\left(-\\frac{k}{16}\\right),\n$$\n这是可忽略的。所以 D 没有攻破 $G_{PZ}$。\n\n结论：只有测试 A 获得了不可忽略的优势。", "answer": "$$\\boxed{A}$$", "id": "1457800"}, {"introduction": "真正的随机性要求序列中的任意子集都必须是完全无偏的，但这在计算上代价高昂。因此，我们常常退而求其次，使用满足较弱性质（如“成对独立性”）的生成器。这个练习将引导你探究这种有限独立性的局限性，通过一个巧妙的3比特检验，你将发现即使任意两位都是独立的，三位组合在一起也可能暴露出明显的非随机模式。[@problem_id:1457782]", "problem": "在计算复杂性领域，一个关键挑战是生成那些即使由确定性过程产生，但看起来是随机的比特序列。这些被称为伪随机比特。\n\n考虑一个简单的统计分析器，它被设计用来测试3比特伪随机字符串的质量。对于任何给定的3比特字符串 $x_1x_2x_3$，该分析器计算两个二元随机变量 $A$ 和 $B$ 之间的统计协方差，定义如下：\n-   如果字符串是回文串（即，其第一个比特等于第三个比特，$x_1=x_3$），则变量 $A$ 为 1，否则为 0。\n-   变量 $B$ 是中间比特 $x_2$ 的值。\n\n一个特定的伪随机生成器被构造成“两两独立”的。它首先生成两个真正独立且均匀随机的比特，$z_1$ 和 $z_2$。基于这两个比特，它通过设置 $y_1 = z_1$、$y_2 = z_2$ 和 $y_3 = z_1 \\oplus z_2$ 来构造一个3比特字符串 $y_1y_2y_3$，其中 $\\oplus$ 表示异或（XOR）运算。\n\n你的任务是计算由这个特定伪随机生成器产生的3比特字符串的协方差 $Cov(A, B)$。请将你的最终答案表示为一个精确的分数。", "solution": "设 $z_{1}$ 和 $z_{2}$ 是独立且均匀随机的比特。生成器输出 $y_{1}=z_{1}$、$y_{2}=z_{2}$ 和 $y_{3}=z_{1}\\oplus z_{2}$。定义 $A$ 为字符串是回文串的指示变量，即 $A=1$ 当且仅当 $y_{1}=y_{3}$，并定义 $B=y_{2}$。\n\n根据 $A$ 的定义，\n$$\nA=1 \\iff y_{1}=y_{3} \\iff z_{1}=z_{1}\\oplus z_{2}.\n$$\n使用异或恒等式 $u\\oplus u=0$ 和 $u\\oplus 0=u$，我们将等式两边与 $z_{1}$ 进行异或运算得到\n$$\nz_{1}\\oplus z_{1}=z_{2} \\iff 0=z_{2}.\n$$\n因此，$A=1$ 当且仅当 $z_{2}=0$，否则 $A=0$。因为 $B=y_{2}=z_{2}$，可以确定地得出\n$$\nA=1-B.\n$$\n\n我们使用 $\\operatorname{Cov}(A,B)=\\mathbb{E}[AB]-\\mathbb{E}[A]\\mathbb{E}[B]$ 来计算协方差。由于 $A=1-B$，\n$$\nAB=B(1-B)=B-B^{2}.\n$$\n对于一个二元变量 $B\\in\\{0,1\\}$，我们有 $B^{2}=B$ 处处成立，因此 $AB=0$ 几乎必然成立，并且\n$$\n\\mathbb{E}[AB]=0.\n$$\n因为 $z_{2}$ 是均匀分布的，$\\mathbb{E}[B]=\\mathbb{P}(z_{2}=1)=\\frac{1}{2}$ 且 $\\mathbb{E}[A]=\\mathbb{P}(z_{2}=0)=\\frac{1}{2}$。因此，\n$$\n\\operatorname{Cov}(A,B)=0-\\left(\\frac{1}{2}\\right)\\left(\\frac{1}{2}\\right)=-\\frac{1}{4}.\n$$", "answer": "$$\\boxed{-\\frac{1}{4}}$$", "id": "1457782"}, {"introduction": "在展示了成对独立性的局限后，一个自然的问题是：我们如何高效地构建一个能满足这种性质的集合呢？这个练习将从分析转向构建，为你展示一种利用线性代数思想来生成成对独立比特串的经典方法。通过这个实践，你将了解到如何用一个远小于所有可能性的样本空间来代替完全随机的输入，这是算法去随机化中的一个关键思想。[@problem_id:1457812]", "problem": "一个计算机科学家团队正在对一个算法进行去随机化。其中一个关键步骤是用一个更小的“伪随机”输入集合来取代大量的真正随机输入，同时仍然保持一个特定的统计特性。该算法接受一个$n$位二进制字符串作为输入。所需的特性是，对于任意两个不同的比特位置，比如说位置$i$和位置$j$（其中 $1 \\le i  j \\le n$），出现在这些位置上的比特对必须在整个伪随机输入集合中均匀分布。也就是说，(0,0)、(0,1)、(1,0)和(1,1)这四种比特对必须在该集合中各占恰好25%的输入。\n\n为了构造这样一个输入集合，该团队使用了以下方法。\n1. 找到满足 $n \\le 2^k - 1$ 的最小整数$k$。\n2. 为每个比特位置$i \\in \\{1, 2, \\dots, n\\}$分配一个唯一的长度为$k$的非零二进制向量$v_i$。（$k$的条件确保了有足够多的唯一非零向量）。\n3. 伪随机输入集合由“种子”对$(a, b)$生成，其中$a$是一个长度为$k$的二进制向量，$b$是一个单个比特（0或1）。\n4. 对于每个种子对$(a, b)$，生成一个$n$位的字符串$S$。该字符串$S$在位置$i$的比特$S_i$是通过计算$a$和$v_i$的点积，加上$b$，然后全体模2得到的。即 $S_i = (a \\cdot v_i + b) \\pmod 2$。\n\n假设算法需要长度为$n=200$的输入。使用所述的构造方法，生成的集合中伪随机输入字符串的总数是多少？", "solution": "我们需要找到满足 $n \\le 2^k - 1$ 的最小整数$k$。对于$n=200$，我们检验 $2^7 - 1 = 127  200$ 和 $2^8 - 1 = 255 \\ge 200$，因此$k=8$。\n\n每个种子是一个对$(a,b)$，其中$a \\in \\{0,1\\}^{k}$且$b \\in \\{0,1\\}$，所以种子的总数是$2^{k} \\cdot 2 = 2^{k+1}$。对于$k=8$，这个数字等于$2^{9} = 512$。\n\n我们必须验证不同的种子产生不同的$n$位字符串，这样生成的字符串数量才等于种子的数量。设$v_{1},\\dots,v_{n} \\in \\{0,1\\}^{k}$是被分配的不同的非零向量，并定义一个$n \\times k$矩阵$M$，其第$i$行为$v_{i}^{\\top}$。种子$(a,b)$对应的输出字符串是\n$$\nS = M a + b \\mathbf{1} \\quad \\text{在 } \\mathbb{F}_{2} \\text{ 上},\n$$\n其中$\\mathbf{1}$是$\\mathbb{F}_{2}^{n}$中的全1向量。\n\n首先，$\\operatorname{rank}(M) = k$。如果$\\operatorname{rank}(M)  k$，那么所有的$v_{i}$都位于$\\mathbb{F}_{2}^{k}$的一个维度至多为$k-1$的真子空间中，该子空间最多包含$2^{k-1} - 1$个非零向量。对于$k=8$，这个上界是$127$，与$n=200$矛盾。因此$\\operatorname{rank}(M)=8$。\n\n其次，$\\mathbf{1}$不在$M$的列空间中。如果存在$a \\in \\mathbb{F}_{2}^{k}$使得$M a = \\mathbf{1}$，这将意味着对所有的$i$都有$a \\cdot v_{i} = 1$。对于任何固定的非零$a$，$\\mathbb{F}_{2}^{k}$中的$2^{k}$个向量中恰好有$2^{k-1}$个向量满足$a \\cdot x = 1$，而在$2^{k}-1$个非零向量中，至多有$2^{k-1}$个满足此条件。对于$k=8$，这个数是$128$，小于$200$，因此不可能所有$200$个选定的$v_{i}$都满足$a \\cdot v_{i} = 1$。所以$\\mathbf{1} \\notin \\operatorname{col}(M)$。\n\n因此，增广矩阵$[M \\mid \\mathbf{1}]$的秩为$k+1=9$，并且映射$(a,b) \\mapsto S$是单射的。所以，生成的不同字符串的数量等于种子的数量，即$2^{k+1} = 512$。", "answer": "$$\\boxed{512}$$", "id": "1457812"}]}