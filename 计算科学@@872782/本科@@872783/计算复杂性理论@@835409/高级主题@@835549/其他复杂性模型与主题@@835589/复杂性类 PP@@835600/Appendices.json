{"hands_on_practices": [{"introduction": "复杂度理论中最重要的成果之一是理解不同计算复杂性类之间的关系。第一个练习将通过展示如何用一个概率图灵机解决典型的NP完全问题——布尔可满足性问题（SAT），来揭示PP类的巨大威力。这个构造是一个经典的例子，它证明了NP是PP的子集，从而确立了PP作为一个非常强大的复杂性类的地位。[@problem_id:1454712]", "problem": "在计算复杂性理论中，PP类（概率多项式时间）包含可在多项式时间内由概率图灵机解决的判定问题，其错误概率小于$1/2$。概率图灵机（PTM）是一种非确定性图灵机，其中每个转移选择都附带一个概率，通常是公平的抛硬币。\n\n让我们考虑布尔可满足性问题（SAT），该问题询问对于给定的布尔公式，是否存在一个满足赋值。假设我们有一个包含$n$个不同变量的布尔公式$\\phi$。令$S$为使公式$\\phi$为真的变量真值赋值的总数。\n\n构建一个PTM来处理输入$\\phi$。该PTM执行以下算法：\n1. 它通过为$n$个变量中的每一个选择一个真值（真或假）来生成一个变量赋值，记为$y$。这$n$个选择中的每一个都是均匀且独立地随机做出的。\n2. 它生成一个额外的随机比特$b \\in \\{0, 1\\}$，其中选择$b=0$的概率等于选择$b=1$的概率。这个选择与变量赋值无关。\n3. 如果赋值$y$满足公式$\\phi$，或者随机比特为$b=1$，则PTM停机并接受。如果这两个条件都不满足，则PTM停机并拒绝。\n\n你的任务是确定此PTM接受的确切概率。请用一个关于$n$和$S$的单一封闭形式解析表达式来表示你的答案。", "solution": "令$A$为随机赋值$y$满足$\\phi$的事件，令$B$为随机比特等于$1$的事件。PTM接受当且仅当$A \\cup B$发生。\n\n共有$2^{n}$种可能的赋值，其中恰好有$S$个满足赋值，所以\n$$\n\\Pr[A]=\\frac{S}{2^{n}}.\n$$\n比特是公平的，所以\n$$\n\\Pr[B]=\\frac{1}{2}.\n$$\n赋值和比特是独立生成的，因此\n$$\n\\Pr[A \\cap B]=\\Pr[A]\\Pr[B]=\\frac{S}{2^{n}} \\cdot \\frac{1}{2}=\\frac{S}{2^{n+1}}.\n$$\n根据容斥原理，\n$$\n\\Pr[A \\cup B]=\\Pr[A]+\\Pr[B]-\\Pr[A \\cap B]=\\frac{S}{2^{n}}+\\frac{1}{2}-\\frac{S}{2^{n+1}}.\n$$\n合并各项得到\n$$\n\\Pr[\\text{接受}]=\\frac{1}{2}+\\frac{S}{2^{n+1}}=\\frac{2^{n}+S}{2^{n+1}}.\n$$", "answer": "$$\\boxed{\\frac{2^{n}+S}{2^{n+1}}}$$", "id": "1454712"}, {"introduction": "PP的定义取决于一个 $1/2$ 的概率阈值。一个很自然的问题是：这个阈值是任意的吗？本练习将通过考虑一个具有不同阈值的假设性复杂性类 $\\text{PP}_{1/3}$ 来探讨这个问题。通过证明PP和 $\\text{PP}_{1/3}$ 实际上是同一个类，我们将展示PP定义的稳健性，并更深入地理解如何操控概率图灵机。[@problem_id:1454693]", "problem": "在计算复杂性理论中，类 PP (Probabilistic Polynomial time, 概率多项式时间) 是根据概率图灵机的行为来定义的。如果存在一个多项式时间概率图灵机 $M$，对于任何长度为 $n$ 的输入字符串 $x$，满足以下条件，则语言 $L$ 属于 PP：\n1. 如果 $x$ 在 $L$ 中，$M(x)$ 接受的概率大于 $1/2$。\n   $$x \\in L \\implies \\Pr[M(x) \\text{ accepts}]  \\frac{1}{2}$$\n2. 如果 $x$ 不在 $L$ 中，$M(x)$ 接受的概率小于或等于 $1/2$。\n   $$x \\notin L \\implies \\Pr[M(x) \\text{ accepts}] \\le \\frac{1}{2}$$\n\n考虑一个假设的复杂性类，我们称之为 $\\text{PP}_{1/3}$，它使用不同的概率阈值进行定义。如果存在一个多项式时间概率图灵机 $M'$，对于任何输入字符串 $x$，满足以下条件，则语言 $L'$ 属于 $\\text{PP}_{1/3}$：\n1. 如果 $x$ 在 $L'$ 中，$M'(x)$ 接受的概率大于 $1/3$。\n   $$x \\in L' \\implies \\Pr[M'(x) \\text{ accepts}]  \\frac{1}{3}$$\n2. 如果 $x$ 不在 $L'$ 中，$M'(x)$ 接受的概率小于或等于 $1/3$。\n   $$x \\notin L' \\implies \\Pr[M'(x) \\text{ accepts}] \\le \\frac{1}{3}$$\n\n根据这些定义，复杂性类 PP 和假设的类 $\\text{PP}_{1/3}$ 之间有什么关系？\n\nA. $\\text{PP}_{1/3}$ 是 PP 的真子集。\nB. PP 是 $\\text{PP}_{1/3}$ 的真子集。\nC. $\\text{PP}_{1/3}$ 等于 PP。\nD. $\\text{PP}_{1/3}$ 等于类 BPP (Bounded-error Probabilistic Polynomial time, 有界错误概率多项式时间)。\nE. 类 PP 和 $\\text{PP}_{1/3}$ 是不可比较的 (彼此不为子集)。", "solution": "为了确定 PP 和 $\\text{PP}_{1/3}$ 之间的关系，我们将研究每个类是否是另一个类的子集。我们将通过展示如何将一个类的机器转换为另一个类的机器，而不改变它所判定的语言，来证明这一点。\n\n首先，我们来证明 $\\text{PP}_{1/3} \\subseteq \\text{PP}$。\n设 $L$ 是 $\\text{PP}_{1/3}$ 中的一个语言。这意味着存在一个多项式时间概率图灵机，我们称之为 $M_{1/3}$，对于任何输入 $x$：\n- 如果 $x \\in L$，则 $p(x) = \\Pr[M_{1/3}(x) \\text{ accepts}]  1/3$。\n- 如果 $x \\notin L$，则 $p(x) = \\Pr[M_{1/3}(x) \\text{ accepts}] \\le 1/3$。\n\n我们需要构造一个新的多项式时间概率机器 $M_{1/2}$，它判定相同的语言 $L$，但遵循 PP 的定义（阈值为 $1/2$）。我们想要找到一个概率过程，将接受概率 $p(x)$ 转换为一个新的概率 $p'(x)$，使得 $p(x)  1/3 \\implies p'(x)  1/2$ 且 $p(x) \\le 1/3 \\implies p'(x) \\le 1/2$。实现这一点的一个简单方法是使用线性变换 $p'(x) = ap(x) + b$，它必须将阈值 $1/3$ 映射到 $1/2$。所以，我们需要 $a(1/3) + b = 1/2$。该变换还必须将概率映射到有效的概率，并且它必须是单调递增的（$a  0$）以保持不等式的方向。\n\n让我们选择变换 $p'(x) = \\frac{3}{4}p(x) + \\frac{1}{4}$。\n我们来验证这个变换：\n1. 由于系数 $3/4$ 为正，它是 $p(x)$ 的增函数。\n2. 如果 $p(x) = 1/3$，则 $p'(x) = \\frac{3}{4}\\left(\\frac{1}{3}\\right) + \\frac{1}{4} = \\frac{1}{4} + \\frac{1}{4} = \\frac{1}{2}$。\n3. 对于 $p(x)  1/3$，我们有 $p'(x)  1/2$。对于 $p(x) \\le 1/3$，我们有 $p'(x) \\le 1/2$。\n4. 对于 $p(x) \\in [0, 1]$，$p'(x)$ 的范围从 $p'(0)=1/4$ 到 $p'(1)=1$，这是一个有效的概率范围。\n\n我们可以构造一个机器 $M_{1/2}$ 来实现这个概率变换。对于输入 $x$，$M_{1/2}$ 执行以下步骤：\n1. 生成两个随机位（例如，抛掷两枚均匀的硬币）。这会产生 4 个等可能的结果。\n2. 如果结果是（比如说）`00`（其出现概率为 $1/4$），机器立即接受。\n3. 对于其他三个结果（其总出现概率为 $3/4$），机器运行 $M_{1/3}(x)$ 并返回其结果。\n\n$M_{1/2}$ 的总接受概率是：\n$\\Pr[M_{1/2}(x) \\text{ accepts}] = \\Pr[\\text{outcome is `00`}] \\cdot 1 + \\Pr[\\text{outcome is not `00`}] \\cdot \\Pr[M_{1/3}(x) \\text{ accepts}]$\n$p'(x) = \\frac{1}{4} \\cdot 1 + \\frac{3}{4} \\cdot p(x) = \\frac{3}{4}p(x) + \\frac{1}{4}$。\n由于 $M_{1/3}$ 在多项式时间内运行，所以这个机器 $M_{1/2}$ 也在多项式时间内运行。它根据 PP 的定义正确地判定了 $L$。因此，任何在 $\\text{PP}_{1/3}$ 中的语言也在 PP 中，这意味着 $\\text{PP}_{1/3} \\subseteq \\text{PP}$。\n\n其次，我们来证明 $\\text{PP} \\subseteq \\text{PP}_{1/3}$。\n设 $L$ 是 PP 中的一个语言，由机器 $M_{1/2}$ 判定。令 $p(x) = \\Pr[M_{1/2}(x) \\text{ accepts}]$。\n- 如果 $x \\in L$，则 $p(x)  1/2$。\n- 如果 $x \\notin L$，则 $p(x) \\le 1/2$。\n\n我们需要构造一个新机器 $M'_{1/3}$，它使用 $\\text{PP}_{1/3}$ 的概率阈值来判定 $L$。我们需要一个变换 $p'(x)$，使得 $p(x)  1/2 \\implies p'(x)  1/3$ 且 $p(x) \\le 1/2 \\implies p'(x) \\le 1/3$。阈值 $1/2$ 必须映射到 $1/3$。\n让我们尝试线性变换 $p'(x) = \\frac{2}{3}p(x)$。\n1. 它是 $p(x)$ 的增函数。\n2. 如果 $p(x) = 1/2$，则 $p'(x) = \\frac{2}{3}\\left(\\frac{1}{2}\\right) = \\frac{1}{3}$。\n3. 对于 $p(x)  1/2$，我们有 $p'(x)  1/3$。对于 $p(x) \\le 1/2$，我们有 $p'(x) \\le 1/3$。\n4. 对于 $p(x) \\in [0, 1]$，$p'(x)$ 的范围从 $0$ 到 $2/3$，这是一个有效的概率范围。\n\n我们可以构造一个机器 $M'_{1/3}$ 来实现这一点。概率 $\\frac{2}{3}p(x)$ 对应于两个独立事件的联合概率，这两个事件的概率分别为 $2/3$ 和 $p(x)$。\n对于输入 $x$，机器 $M'_{1/3}$ 执行以下步骤：\n1. 模拟一个成功概率为 $2/3$ 的事件。例如，模拟掷一个均匀的三面骰子。如果是 1 或 2，我们“成功”。如果是 3，我们“失败”。\n2. 如果第一个事件失败（概率为 $1/3$），机器立即拒绝。\n3. 如果第一个事件成功（概率为 $2/3$），机器运行 $M_{1/2}(x)$ 并返回其结果。\n\n$M'_{1/3}$ 的总接受概率是：\n$\\Pr[M'_{1/3}(x) \\text{ accepts}] = \\Pr[\\text{first event succeeds}] \\cdot \\Pr[M_{1/2}(x) \\text{ accepts}]$\n$p'(x) = \\frac{2}{3} \\cdot p(x)$。\n这个机器 $M'_{1/3}$ 在多项式时间内运行，并根据 $\\text{PP}_{1/3}$ 的定义正确地判定了 $L$。因此，$\\text{PP} \\subseteq \\text{PP}_{1/3}$。\n\n由于我们已经证明了 $\\text{PP}_{1/3} \\subseteq \\text{PP}$ 和 $\\text{PP} \\subseteq \\text{PP}_{1/3}$，所以这两个类必然相等。\n\n类 BPP 是不同的，因为它要求概率间隙是多项式大的（例如，“是”的接受概率 > 2/3，“否”的接受概率 $\\le$ 1/3），而 PP（以及 $\\text{PP}_{1/3}$）允许围绕阈值的间隙是指数级小的。因此，$\\text{PP}_{1/3}$ 不等于 BPP。", "answer": "$$\\boxed{C}$$", "id": "1454693"}, {"introduction": "既然我们已经看到了PP如何包含NP，并理解了其定义的灵活性，现在让我们亲自动手，从头开始设计一台机器。这个问题挑战你构建一个非确定性图灵机，将一个数论问题——判断一个整数是否拥有更多偶数因子而不是奇数因子——归入PP类。这个练习要求你将决策问题仔细地转化为PP的“多数投票”范式，然后对一个特定输入进行具体计算。[@problem_id:1454741]", "problem": "如果存在一个多项式时间的非确定性图灵机 (NTM)，对于任何输入 $x$，当且仅当该 NTM 在输入 $x$ 上的计算路径中有多于一半的路径在接受状态下结束时，语言 $L$ 属于复杂性类别 PP (概率多项式时间)。\n\n考虑一个特定的 NTM，我们称之为 $M$，它被设计用于处理一个正整数输入 $N$。令 $n = \\lfloor \\log_2 N \\rfloor + 1$ 为 $N$ 的标准二进制表示的位数。机器 $M$ 执行以下步骤：\n\n1.  它非确定性地选择一个长度为 $n$ 的二进制字符串 $y$ 和一个比特 $b \\in \\{0, 1\\}$。这个过程定义了 $2^{n+1}$ 条不同的计算路径，每个唯一的对 $(y, b)$ 对应一条。\n2.  令 $d$ 为二进制字符串 $y$ 所表示的正整数值。\n3.  然后，机器应用以下逻辑来决定在给定的计算路径上是接受还是拒绝：\n    *   如果 $b=0$：当且仅当（$d0$，$d \\le N$，$d$ 是 $N$ 的因数，且 $d$ 是偶数）时，机器接受。在 $b=0$ 的所有其他情况下，它拒绝。\n    *   如果 $b=1$：当且仅当（$d0$，$d \\le N$，$d$ 是 $N$ 的因数，且 $d$ 是奇数）时，机器拒绝。在 $b=1$ 的所有其他情况下，它接受。\n\n你的任务是计算当输入为 $N = 90$ 时，这台机器 $M$ 的接受计算路径的总数。", "solution": "输入为 $N=90$。位数为 $n=\\lfloor \\log_{2}(N) \\rfloor + 1$。由于 $2^{6}=64 \\leq 90  128=2^{7}$，我们有 $\\lfloor \\log_{2}(90) \\rfloor=6$，因此\n$$\nn=7.\n$$\n机器非确定性地选择一个对 $(y,b)$，其中 $y \\in \\{0,1\\}^{n}$ 且 $b \\in \\{0,1\\}$，产生 $2^{n+1}=2^{8}=256$ 条计算路径。字符串 $y$ 表示一个整数 $d$，其中 $0 \\leq d \\leq 2^{n}-1=127$。\n\n定义以下 $d$ 值集合：\n- $E=\\{d: d0,\\, d \\leq N,\\, d \\mid N,\\, d \\text{ even}\\}$，即 $N$ 的正偶数因数。\n- $O=\\{d: d0,\\, d \\leq N,\\, d \\mid N,\\, d \\text{ odd}\\}$，即 $N$ 的正奇数因数。\n- $C=\\{0,1,\\dots,127\\} \\setminus (E \\cup O)$，即所有剩余的 $d$ 值。\n\n对 $N$ 进行因数分解：\n$$\n90=2 \\cdot 3^{2} \\cdot 5.\n$$\n正因数的总数为 $(1+1)(2+1)(1+1)=12$。偶数因数必须包含因子 $2$，所以它们的数量是\n$$\n|E|=1 \\cdot 3 \\cdot 2=6,\n$$\n奇数因数的数量是\n$$\n|O|=3 \\cdot 2=6.\n$$\n由于 $d$ 的取值有 128 个，我们有\n$$\n|C|=128-(|E|+|O|)=128-12=116.\n$$\n\n对每个固定的 $d$ 分情况讨论接受条件：\n- 如果 $d \\in E$ (偶数因数)，那么对于 $b=0$，机器接受；对于 $b=1$，它也接受（因为 $b=1$ 的拒绝条件要求 $d$ 是奇数）。因此，每个这样的 $d$ 有 $2$ 条接受路径。\n- 如果 $d \\in O$ (奇数因数)，那么对于 $b=0$，它拒绝（不是偶数）；对于 $b=1$，它也拒绝（明确的拒绝条件）。因此，每个这样的 $d$ 有 $0$ 条接受路径。\n- 如果 $d \\in C$，那么对于 $b=0$，它拒绝（不是一个偶数因数）；对于 $b=1$，它接受（因为 $d$ 不是 $N$ 的正奇数因数）。因此，每个这样的 $d$ 有 $1$ 条接受路径。\n\n因此，接受路径的总数是\n$$\n2|E|+0|O|+1|C|=2 \\cdot 6+0 \\cdot 6+1 \\cdot 116=12+116=128.\n$$", "answer": "$$\\boxed{128}$$", "id": "1454741"}]}