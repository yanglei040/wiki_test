{"hands_on_practices": [{"introduction": "在我们深入研究如何构建高效编码之前，我们必须首先理解一个更基本的问题：我们如何确保解码后的信息是唯一的？如果一个编码方案可能将一个二进制序列解码成多个不同的原始消息，那么这个编码方案就是失败的。这个问题 [@problem_id:1625290] 将通过一个具体的例子，揭示非唯一可解码码的模糊性，从而强调前缀码（prefix code）的重要性。", "problem": "一位数字档案管理员正在致力于保存一份新发现的古代文本，该文本使用一种非常简单的字母表，仅包含三个符号：Aleph（$\\alpha$）、Bet（$\\beta$）和 Gamal（$\\gamma$）。为了进行数字存储，这位档案管理员提出了一种可变长度的二进制编码方案来表示这些符号。提议的码本如下：\n- 符号 $\\alpha$ 编码为二进制字符串 `0`。\n- 符号 $\\beta$ 编码为二进制字符串 `1`。\n- 符号 $\\gamma$ 编码为二进制字符串 `01`。\n\n在从损坏的存储介质中恢复数据时，档案管理员成功检索到一个不间断的二进制序列：`010110`。然而，由于编码的性质，原始的符号序列是什么并不清楚。\n\n从集合 $\\{\\alpha, \\beta, \\gamma\\}$ 中，有多少种不同的符号序列可以产生这个确切的二进制序列 `010110`？\n\n从以下选项中选择正确的计数。\n\nA. 1\nB. 2\nC. 3\nD. 4\nE. 5", "solution": "该码本分配 $\\alpha \\mapsto 0$，$\\beta \\mapsto 1$，以及 $\\gamma \\mapsto 01$。这个编码不是前缀码，因为 $0$ 是 $01$ 的前缀，所以二进制字符串的解码可能会有歧义。我们必须计算字符串 $010110$ 有多少种方式可以被解析成来自集合 $\\{0,1,01\\}$ 的码字。\n\n设二进制字符串为 $w$，长度为 $n=6$，其位置索引从 $1$ 到 $6$。定义 $f(i)$ 为从位置 $i$ 开始的后缀的解析方法数。使用基本条件 $f(n+1)=f(7)=1$，表示一旦到达末尾，只有一种方式可以结束（即什么都不做）。\n\n在位置 $i$，递推关系是\n$$\nf(i)=\\begin{cases}\n\\mathbf{1}_{\\{w_{i}=0\\}}\\,f(i+1)+\\mathbf{1}_{\\{w_{i}=1\\}}\\,f(i+1)+\\mathbf{1}_{\\{i\\leq n-1,\\,w_{i}=0,\\,w_{i+1}=1\\}}\\,f(i+2),  1\\leq i\\leq n,\\\\\n1,  i=n+1,\n\\end{cases}\n$$\n这分别对应于当当前比特允许时，选择码字 $0$、$1$ 或 $01$。\n\n对于 $w=010110$，从后往前计算：\n- $f(7)=1$。\n- 在 $i=6$，$w_{6}=0$：$f(6)=f(7)=1$。\n- 在 $i=5$，$w_{5}=1$：$f(5)=f(6)=1$。\n- 在 $i=4$，$w_{4}=1$：$f(4)=f(5)=1$。\n- 在 $i=3$，$w_{3}=0$ 且 $w_{4}=1$：$f(3)=f(4)+f(5)=1+1=2$。\n- 在 $i=2$，$w_{2}=1$：$f(2)=f(3)=2$。\n- 在 $i=1$，$w_{1}=0$ 且 $w_{2}=1$：$f(1)=f(2)+f(3)=2+2=4$。\n\n因此，解码的总数为 $f(1)=4$。具体来说，这些序列是 $\\alpha\\beta\\alpha\\beta\\beta\\alpha$、$\\alpha\\beta\\gamma\\beta\\alpha$、$\\gamma\\alpha\\beta\\beta\\alpha$ 和 $\\gamma\\gamma\\beta\\alpha$，它们都映射到 $010110$。\n\n因此，正确选项是 D。", "answer": "$$\\boxed{D}$$", "id": "1625290"}, {"introduction": "上一个练习 [@problem_id:1625290] 强调了前缀码对于无歧义解码的必要性。现在，一个自然而然的问题是：给定一组我们希望的码长，我们如何确定是否存在一个对应的前缀码？克拉夫特不等式（Kraft's inequality）为我们提供了解决这个问题的强大数学工具。这个练习 [@problem_id:1625225] 将要求你应用这个不等式，来判断在一套非二元的字母表上，一组给定的码长是否可行，从而加深你对编码存在性条件的理解。", "problem": "一个工程团队正在为深空探测器设计一种通信协议。该探测器监测五种不同类别的环境数据。为了节省带宽，数据类别标识符将使用可变长度编码进行编码。通信硬件被设计为从一个三元字母表传输信号，该字母表由三个不同的符号组成（例如，$\\{0, 1, 2\\}$）。\n\n为了使系统正常工作，编码必须是前缀码。如果没有任何码字是其他任何码字的前缀（初始部分），则该编码是前缀码。这个特性对于连续数据流的无歧义和即时解码至关重要。\n\n一位工程师为这五个数据类别提出了一组码字长度：$\\{1, 1, 2, 2, 2\\}$。你的任务是确定在数学上是否可能用这组特定的长度构建一个三元前缀码。\n\n以下哪个陈述是正确的？\n\nA. 可以用指定的码字长度构建一个三元前缀码。\nB. 不可能用指定的码字长度构建一个三元前缀码。\nC. 如果字母表是二元的，可以用这些长度构建前缀码，但对于三元字母表则不可能。\nD. 在不知道五个数据类别的具体概率的情况下，不可能确定是否可以构建前缀码。", "solution": "我们需要确定是否存在一个在三元字母表（字母表大小 $D=3$）上的前缀码，其码字长度的多重集为 $\\{1,1,2,2,2\\}$。相关的原理是针对$D$元前缀码的Kraft–McMillan不等式：一组长度 $\\{l_{i}\\}_{i=1}^{n}$ 可以通过$D$元字母表上的前缀码实现，当且仅当\n$$\n\\sum_{i=1}^{n} D^{-l_{i}} \\leq 1.\n$$\n在这里，$D=3$ 且 $n=5$。代入给定的长度 $l_{1}=1$, $l_{2}=1$, $l_{3}=2$, $l_{4}=2$, $l_{5}=2$，我们计算\n$$\n\\sum_{i=1}^{5} 3^{-l_{i}} = 3^{-1} + 3^{-1} + 3^{-2} + 3^{-2} + 3^{-2}.\n$$\n合并同类项：\n$$\n3^{-1} + 3^{-1} = 2 \\cdot 3^{-1} = \\frac{2}{3}, \\quad 3^{-2} + 3^{-2} + 3^{-2} = 3 \\cdot 3^{-2} = \\frac{3}{9} = \\frac{1}{3}.\n$$\n因此，\n$$\n\\sum_{i=1}^{5} 3^{-l_{i}} = \\frac{2}{3} + \\frac{1}{3} = 1.\n$$\n由于Kraft和等于$1$，Kraft–McMillan不等式以等式形式成立，这足以保证存在具有这些长度的三元前缀码。\n\n使用三元码树的构造性解释证实了其可行性：两个长度为$1$的码字占据了根节点的三个子节点中的两个；剩下的那个子节点在深度为$2$处恰好产生三个可用节点，可以分配给三个长度为$2$的码字，同时保持前缀特性。\n\n因此，可以用长度为 $\\{1,1,2,2,2\\}$ 构建一个三元前缀码。声称不可能或依赖于符号概率的陈述是错误的，因为可行性仅取决于Kraft–McMillan不等式，而与概率无关。", "answer": "$$\\boxed{A}$$", "id": "1625225"}, {"introduction": "既然我们已经理解了唯一解码的重要性 [@problem_id:1625290]，并且掌握了判断前缀码存在性的理论工具 [@problem_id:1625225]，现在是时候将这些知识付诸实践了。本练习 [@problem_id:1625230] 模拟了一个现实世界中的数据存储优化任务。你将需要为一个非均匀分布的信源构建一个最优的变长码（霍夫曼编码），并将其与简单的定长码进行比较，从而量化变长编码在节省存储空间方面的巨大优势。", "problem": "一所大学的计算机科学系的任务是优化一个包含 $N = 2,500,000$ 条学生记录的海量历史数据集的最终课程成绩的存储。可能的成绩为 A、B、C、D 和 F。在对数据集进行统计分析后，发现成绩的频率不均匀。观察到的每个成绩的概率如下：\n- 成绩 A：$p_A = 0.25$\n- 成绩 B：$p_B = 0.35$\n- 成绩 C：$p_C = 0.20$\n- 成绩 D：$p_D = 0.15$\n- 成绩 F：$p_F = 0.05$\n\n该系正在比较两种无损压缩策略：\n1.  **定长编码：** 每个成绩都用一个相同且尽可能短的二进制字符串表示。\n2.  **变长编码：** 根据成绩概率构建一个最优前缀码（哈夫曼编码），其中更频繁的成绩被分配更短的二进制字符串。\n\n您的任务是量化存储的改进。计算通过使用最优哈夫曼编码与最小定长编码相比，在整个包含 $N$ 条记录的数据集上节省的总比特数。请以整数形式提供您的答案。", "solution": "我们有一个大小为 $M=5$ 的字符集和 $N=2{,}500{,}000$ 条记录。对于最小定长编码，每个符号的长度是满足 $2^{L_{\\text{fix}}} \\geq M$ 的最小整数 $L_{\\text{fix}}$，即：\n$$\nL_{\\text{fix}}=\\lceil \\log_{2}(M) \\rceil=\\lceil \\log_{2}(5) \\rceil=3.\n$$\n因此，使用定长编码的总比特数为\n$$\nB_{\\text{fix}}=N \\cdot L_{\\text{fix}}=N \\cdot 3.\n$$\n\n对于最优哈夫曼编码，我们通过重复合并两个概率最小的符号/节点来构建编码。概率按升序排列为 $0.05,\\,0.15,\\,0.20,\\,0.25,\\,0.35$。合并 $0.05$ 和 $0.15$ 得到 $0.20$；多重集变为 $0.20,\\,0.20,\\,0.25,\\,0.35$。合并两个 $0.20$ 得到 $0.40$；多重集变为 $0.25,\\,0.35,\\,0.40$。合并 $0.25$ 和 $0.35$ 得到 $0.60$；多重集变为 $0.40,\\,0.60$。合并 $0.40$ 和 $0.60$ 得到根节点。由此得出码字长度为 $l_{A}=2$, $l_{B}=2$, $l_{C}=2$, $l_{D}=3$, $l_{F}=3$。\n\n每个符号的期望码长为\n$$\nL_{\\text{huff}}=\\sum_{i} p_{i} l_{i}=2\\left(p_{A}+p_{B}+p_{C}\\right)+3\\left(p_{D}+p_{F}\\right).\n$$\n代入给定的概率，\n$$\nL_{\\text{huff}}=2\\left(0.25+0.35+0.20\\right)+3\\left(0.15+0.05\\right)=2\\cdot 0.80+3\\cdot 0.20=1.60+0.60=2.20.\n$$\n因此，使用哈夫曼编码的总比特数为\n$$\nB_{\\text{huff}}=N \\cdot L_{\\text{huff}}=N \\cdot 2.20.\n$$\n\n节省的总比特数为\n$$\n\\Delta B=B_{\\text{fix}}-B_{\\text{huff}}=N\\left(L_{\\text{fix}}-L_{\\text{huff}}\\right)=N\\left(3-2.20\\right)=N \\cdot 0.80.\n$$\n当 $N=2{,}500{,}000$ 时，\n$$\n\\Delta B=2{,}500{,}000 \\times 0.80=2{,}000{,}000.\n$$", "answer": "$$\\boxed{2000000}$$", "id": "1625230"}]}